import{C as T,O as q,l as B,j as C,m as x,r,c as A,w as D,o as i,q as o,u as t,p as m,t as d,x as w,b as v,v as E,G as I,T as R,F as P}from"./entry.ae51314b.js";import{L,u as U}from"./Layout.288d44a5.js";import{u as F}from"./useUser.9e6a9c73.js";import{_ as O}from"./_plugin-vue_export-helper.a1a6add7.js";import"./ProBadge.de1f3ff6.js";import"./user-counters-api.7503204d.js";const j={class:"p-2 pt-4 mx-auto w-1/3 rounded"},G={class:""},z={key:0,class:"mb-2 text-base"},H={key:1,class:"p-2 mb-2 w-full text-white bg-red-500 rounded-md"},J={key:2,class:"p-2 mb-2 w-full text-white bg-green-500 rounded-md"},K=["name"],Q=["placeholder"],W=["name"],X=["placeholder"],Y={type:"submit",class:"float-right mt-2 primary-button"},Z={__name:"RecoverPassword",setup(ee){const{t:g}=T(),k=q(),f=B(),{iv:h,content:_}=k.params,{oApiConfiguration:$,fetchOptions:N}=C(),y=F($,N());x(()=>{S()});const S=async()=>{const[e,s]=await y.checkResetPasswordTokenValidity({iv:h,content:_});s?f.push({path:"/"}):e.valid||f.push({path:"/"})},u="password-reset-form",a=r(""),l=r(""),p=r(!1),b=r(""),n=r(!1),V=async()=>{U().validate(u,g),n.value=!1,p.value=!1;const[e,s]=await y.resetPassword({iv:h,content:_,newPassword:a.value});s?M(s):n.value=!0},M=e=>{p.value=!0,b.value=e};return(e,s)=>(i(),A(L,{"with-footer":!1,"hide-side":!0,"no-right-side":!0},{default:D(()=>[o("div",j,[o("div",G,[t(n)?w("",!0):(i(),m("div",z,d(e.$t("accountRecovery.resetPassword")),1)),t(p)?(i(),m("div",H,d(t(b)),1)):w("",!0),t(n)?(i(),m("div",J,d(e.$t("accountRecovery.accountRecovered")),1)):w("",!0),v(o("form",{id:u,onSubmit:s[2]||(s[2]=I(c=>V(u),["prevent"]))},[o("n-validate",{for:"password",name:e.$t("accountRecovery.form.newPassword")},[v(o("input",{"onUpdate:modelValue":s[0]||(s[0]=c=>R(a)?a.value=c:null),type:"password",rules:"required|min:6|containSymbol|containNumber",class:"form-input",placeholder:e.$t("accountRecovery.form.newPassword")},null,8,Q),[[P,t(a)]])],8,K),o("n-validate",{for:"retype-password",name:e.$t("accountRecovery.form.retypeNewPassword")},[v(o("input",{"onUpdate:modelValue":s[1]||(s[1]=c=>R(l)?l.value=c:null),type:"password",rules:"required|min:6|containSymbol|containNumber|equalTo:password",class:"form-input",placeholder:e.$t("accountRecovery.form.retypeNewPassword")},null,8,X),[[P,t(l)]])],8,W),o("button",Y,d(e.$t("reset")),1)],544),[[E,!e.showRecoveryLinkSentDialog]])])])]),_:1}))}},ce=O(Z,[["__scopeId","data-v-bc45e804"]]);export{ce as default};
