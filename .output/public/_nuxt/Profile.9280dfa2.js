import{o,p as i,P as se,Q as le,q as t,K as F,aw as Pe,G as Q,e as v,L as T,s as q,t as n,x as d,k as ee,j as X,m as ae,r as m,a1 as Oe,u as e,b as E,v as S,c as H,Z as Je,O as Re,E as $e,H as J,w as Z,y as je,M as xe,N as Me,C as Ce,F as re,Y as Fe,D as Ue,l as Qe}from"./entry.ed1bfc63.js";import{J as Ze,u as Ae,P as ne}from"./ProBadge.dc1cf83d.js";import{M as ge,_ as fe,b as Ve,d as be,S as _e,c as ke,e as ye,f as Xe}from"./ModalView.76afae2b.js";import{_ as te}from"./_plugin-vue_export-helper.a1a6add7.js";import{u as Ie}from"./useUser.374c898b.js";import{u as Le,L as et}from"./Layout.c894869a.js";import{u as tt}from"./useFeed.bd601146.js";import{I as Se,F as ot}from"./FeedModalView.24b1e004.js";import{W as Ee}from"./WorkList.c9cb3145.js";import{_ as ie}from"./LoadingEmptyErrorMessage.caee9811.js";import{u as st}from"./useSetting.56e2c71f.js";import{U as ze}from"./UserList.5e18cd2b.js";const lt={key:0,class:"flex flex-row flex-wrap gap-2 justify-center mt-4 md:justify-start"},at=["onClick"],nt={class:"py-1 px-2 rounded-md theme-color"},it={__name:"Socials",props:{socials:{type:Array,default:()=>[]}},setup(a){const b=a,h=[{title:"website",valueKey:"personal_website",href:b.socials.personal_website,icon:"i-ph-link-simple-break-bold",color:"gray",show:!!(b.socials.personal_website&&b.socials.personal_website!=""),modalId:"external-website-visit-confirmation-modal"},{title:"patreon",valueKey:"patreon",href:"https://patreon.com/"+b.socials.patreon,icon:"i-gg-patreon",color:"orange",hex:"#f97316",show:!!(b.socials.patreon&&b.socials.patreon!="")},{title:"twitch",valueKey:"twitch",href:"https://twitch.com/"+b.socials.twitch,icon:"i-ph-twitch-logo-fill",color:"purple",hex:"#6441a5",show:!!(b.socials.twitch&&b.socials.twitch!="")},{title:"instagram",valueKey:"instagram",href:"https://instagram.com/"+b.socials.instagram,icon:"i-ion-logo-instagram",color:"fuchsia",hex:"#8a3ab9",show:!!(b.socials.instagram&&b.socials.instagram!="")},{title:"twitter",valueKey:"twitter",href:"https://twitter.com/"+b.socials.twitter,icon:"i-ion-logo-twitter",color:"cyan",hex:"#1DA1F2",show:!!(b.socials.twitter&&b.socials.twitter!="")},{title:"facebook",valueKey:"facebook",href:"https://facebook.com/"+b.socials.facebook,icon:"i-ion-logo-facebook",color:"blue",show:!!(b.socials.facebook&&b.socials.facebook!="")},{title:"youtube",valueKey:"youtube",href:b.socials.youtube,icon:"i-ion-logo-youtube",color:"red",show:!!(b.socials.youtube&&b.socials.youtube!="")},{title:"discord",valueKey:"discord",href:"https://discord.com/"+b.socials.discord,icon:"i-ic-twotone-discord",color:"indigo",hex:"#7289d9",show:!!(b.socials.discord&&b.socials.discord!="")},{title:"picarto",valueKey:"picarto",href:"https://picarto.tv/"+b.socials.picarto,icon:"i-cib-picarto-tv",color:"green",show:!!(b.socials.picarto&&b.socials.picarto!="")},{title:"gumroad",valueKey:"gumroad",href:"https://"+b.socials.gumroad+".gumroad.com",icon:"i-cib-gumroad",color:"pink",hex:"#FE92E4",show:!!(b.socials.gumroad&&b.socials.gumroad!="")}],l=C=>{window.open(C,"_blank")};return(C,c)=>a.socials?(o(),i("div",lt,[(o(),i(se,null,le(h,p=>t("span",{key:p.valueKey,class:F({hidden:!p.show})},[p.show?(o(),i("a",{key:0,href:"#",class:F(["group/facebook socials__badge",p.hex?"":`border-${p.color}-500 bg-${p.color}-500`]),style:Pe([p.hex?`border-color: ${p.hex}; background-color: ${p.hex};`:""]),onClick:Q(y=>p.valueKey==="personal_website"?C.openModal(p.modalId):l(p.href),["prevent"])},[t("div",{class:F(["socials__badge-name",p.hex?"":`bg-${p.color}-500`]),style:Pe(p.hex?`background-color: ${p.hex}`:"")},[v(T,{name:p.icon},null,8,["name"]),q(" "+n(p.title),1)],6),t("div",nt,n(a.socials[p.valueKey]),1)],14,at)):d("",!0)],2)),64))])):d("",!0)}},Te=te(it,[["__scopeId","data-v-dc56369c"]]);const rt={class:"follow-buttons"},dt={class:"flex flex-row justify-center"},ct={class:"follow-buttons__private-toggler"},ut={__name:"FollowButtons",props:{userInfo:{type:Object,default:()=>{}},followersCount:{type:Number,default:0},followingsCount:{type:Number,default:0},isFollowing:{type:Boolean,default:!1},isPrivate:{type:Boolean,default:!1},followingSince:{type:String,default:""}},emits:["changeCurrentState"],setup(a,{emit:b}){const h=a,l=ee(),{oApiConfiguration:C,fetchOptions:c}=X(),p=Ie(C,c());ae(()=>{g.value.isFollowing=h.isFollowing,g.value.isPrivate=h.isPrivate,g.value.followingSince=h.followingSince});const y=f=>{b("changeCurrentState",f)},g=m({isFollowing:h.isFollowing,isPrivate:h.isPrivate,followingSince:h.followingSince}),r=m(null),O=m("i-ri-user-follow-fill"),$=(f,_)=>{O.value=f,r.value=_},s=async(f,_)=>{let[I,x]=[null,!1];_?[I,x]=await p.followPrivately(f):[I,x]=await p.follow(f),x||(g.value={isFollowing:!0,isPrivate:_!=null?_:!1,followingSince:""})},L=async f=>{const[_,I]=await p.unfollow(f);I||(g.value={isFollowing:!1,isPrivate:!1,followingSince:""})};return(f,_)=>{const I=Oe("ProBadge");return o(),i("div",rt,[t("div",{class:F(["follow-buttons__counter",a.userInfo.id==e(l).user.id?"rounded-md":"rounded-t-md"])},[t("div",dt,[t("div",{class:"follow-buttons__counter-partial",onClick:_[0]||(_[0]=x=>y("followerList"))},[t("b",null,n(f.thousand(a.followersCount)),1),q("\xA0 "),t("i",null,n(f.$t("followers.followers").toLowerCase()),1)]),t("div",{class:"follow-buttons__counter-partial",onClick:_[1]||(_[1]=x=>y("followingList"))},[t("b",null,n(f.thousand(a.followingsCount)),1),q("\xA0 "),t("i",null,n(f.$t("followings.followings").toLowerCase()),1)])])],2),e(l).loggedIn&&a.userInfo.id!==e(l).user.id?(o(),i("div",{key:0,class:F(["follow-buttons__buttons",{"hover:danger-button":e(g).isFollowing}]),onClick:_[2]||(_[2]=x=>e(g).isFollowing?L(a.userInfo.id):s(a.userInfo.id)),onMouseover:_[3]||(_[3]=x=>$("i-ri-user-unfollow-fill",f.$t("unfollow"))),onMouseleave:_[4]||(_[4]=x=>$("i-ri-user-follow-fill",f.$t("followings.followings")))},[E(t("button",null,[v(T,{name:"i-ri-user-add-fill","text-size":"text-base"}),q(" "+n(f.$t("follow")),1)],512),[[S,!e(g).isFollowing]]),E(t("button",null,[v(T,{name:e(O),"text-size":"text-base"},null,8,["name"]),q(" "+n(e(r)===null?f.$t("followings.followings"):e(r)),1)],512),[[S,e(g).isFollowing]])],34)):d("",!0),E(t("div",ct,[t("label",{for:"follow-privately",onClick:_[5]||(_[5]=x=>e(l).i502p00r0?e(g).isPrivate?s(a.userInfo.id,!1):s(a.userInfo.id,!0):null)},[e(g).isPrivate?(o(),H(T,{key:1,name:"i-ic-outline-check",class:"text-green-500"})):(o(),H(T,{key:0,name:"i-fluent-checkbox-unchecked-20-regular"})),t("span",null,n(f.$t("followings.followPrivately")),1),e(l).i502p00r0?d("",!0):(o(),H(I,{key:2}))])],512),[[S,e(g).isFollowing]])])}}},Be=te(ut,[["__scopeId","data-v-a3d4e5c4"]]);const pe=a=>(xe("data-v-f2afd521"),a=a(),Me(),a),mt={class:"left-0 w-full md:w-2/3"},ft={class:"flex flex-row mb-2 rounded-lg border-none shadow-none theme-color-secondary"},pt={class:"w-full"},wt={key:0,class:"p-4 user-info"},vt=["src"],ht={class:"name"},gt=pe(()=>t("br",null,null,-1)),bt=pe(()=>t("span",{class:"mx-1"},"\xB7",-1)),_t={class:"text-xxs"},kt={class:"px-2 md:px-4"},yt=["id","innerHTML"],$t=["id","onClick"],xt={key:1,class:"my-2 w-full rounded-md theme-color"},Mt={key:0,class:"p-2 md:p-4 user-info"},Ct=["src"],It={class:"name"},Lt=pe(()=>t("br",null,null,-1)),Et=pe(()=>t("span",{class:"mx-1"},"\xB7",-1)),Ft={class:"px-2 mt-2 md:px-4"},At={class:"text-xs font-semibold"},Pt=["id"],St=["id","onClick"],Tt=["onClick"],Bt={key:0,class:"p-2 mx-auto w-full text-center rounded-md opacity-90 theme-color"},Ot={class:"mx-auto mt-2 primary-button"},Rt={key:0,class:"p-2 mx-auto w-full text-center rounded-md opacity-90 theme-color"},jt={class:"mx-auto mt-2 primary-button"},Ut={class:"float-right mx-4 mt-2 interactions"},Vt={key:0,class:"reactions"},zt=["onClick"],Nt=["onClick"],Dt={class:"option dropdown"},Ht=["onClick"],Kt={class:"option-dropdown dropdown-menu"},qt={id:"option-dropdown-items",class:"w-52 toggler","aria-labelledby":"option-dropdown-buttons",role:"menu"},Wt={class:"menu-wrapper"},Gt={key:0,class:"custom-divider"},Yt=["to"],Jt={class:"loading-empty-error-message theme-color-secondary"},Qt=pe(()=>t("div",{class:"mt-2 text-tiny"},"Currently making magic..",-1)),Zt={class:"mx-auto mt-10 text-center"},Xt=pe(()=>t("b",null,"(\u3186_\u3186)",-1)),eo={class:"mx-auto text-center"},to={id:"chronological-feed-modal",class:"modal work-view"},oo={id:"artwork-modal",class:"modal work-view"},so={__name:"Feeds",props:{userId:{type:Number,default:0}},setup(a){const b=a,h=ee(),{oApiConfiguration:l,fetchOptions:C}=X(),c=tt(l,C()),{generateArtworkThumb:p}=Je(),y=Re();$e(()=>y.query,()=>{setTimeout(()=>{J().closeModal("chronological-modal"),J().closeModal("chronological-feed-modal"),J().closeModal("feed-collection-selection-modal"),J().closeModal("collection-selection-modal"),J().closeModal("album-selection-modal"),J().closeModal("report-modal")},10)});const g=m(0),r=m(0),O=(k,U)=>{g.value=k,r.value=U},$=m([]),s=m({page:0,perPage:10}),L=async({loaded:k})=>{const[U,z]=await c.getFeedByUserId({userId:b.userId,pagination:{page:s.value.page,perPage:s.value.perPage}});s.value.page+=1;for(let u=0;u<U.feeds.length;u++){const N=U.feeds[u];if(N.liked&&A.value.push(N.id),N.artworks){N.artworks.images=[],N.artworks.apply_explicit_filter=!1;for(let K=0;K<N.artworks.artwork_assets.length;K++)if(K<=3){const Y=await p(N.artworks.artwork_assets[K].bucket,N.artworks.artwork_assets[K].filename,"feed");N.artworks.images.push(Y)}N.artworks!=null&&(!h.loggedIn&&N.artworks.is_explicit||N.artworks.is_explicit&&!h.user.user_settings.show_explicit)&&(N.artworks.apply_explicit_filter=!0)}$.value.push(N)}k(U.feeds.length,s.value.perPage)},f=m(null),_=k=>{f.value.view(k),J().openModal("chronological-feed-modal")},I=m(null),x=(k,U,z)=>{U?$.value[z].artworks.apply_explicit_filter=!1:(I.value.view(k),J().openModal("artwork-modal"))},A=m([]),R=async k=>{const[U,z]=await c.like({feedId:k});if(U){A.value.push(k);const u=document.getElementById(`profileFeedLikeButton-${k}`);u.classList.add("animate-bounce"),setInterval(()=>{u.classList.remove("animate-bounce")},2500)}},w=async k=>{const[U,z]=await c.unlike({feedId:k});if(U){const u=A.value.indexOf(k);A.value.splice(u,1)}},D=(k,U,z,u)=>{Ve().readMore(k,U,z,u)},M=async()=>{const[k,U]=await c.remove(g.value);k&&$.value.splice(r.value,1)};return(k,U)=>{const z=je;return o(),i("div",mt,[(o(!0),i(se,null,le(e($),(u,N)=>(o(),i("div",{key:u.id},[t("div",ft,[t("div",pt,[u.users?(o(),i("div",wt,[v(z,{to:"/u/"+u.users.username},{default:Z(()=>[t("img",{class:"avatar",src:k.avatarCoverUrl(u.users.avatar_bucket,u.users.avatar_filename),onError:U[0]||(U[0]=(...K)=>k.imageLoadError&&k.imageLoadError(...K))},null,40,vt)]),_:2},1032,["to"]),t("div",ht,[v(z,{to:"/u/"+u.users.username,class:"fullname"},{default:Z(()=>[q(n(u.users.name),1)]),_:2},1032,["to"]),gt,v(z,{to:"/u/"+u.users.username,class:"username hover:underline"},{default:Z(()=>[q(" @"+n(u.users.username),1)]),_:2},1032,["to"]),bt,t("span",_t,n(k.formatDate(u.scheduled_post?u.scheduled_post:u.created_at,!0)),1)])])):d("",!0),t("div",kt,[t("p",{id:"feed-text-"+u.id,innerHTML:u.text.split("<br>").length>3&&u.text.length>300?`${u.text.slice(0,300)}...`:u.text},null,8,yt),u.text.split("<br>").length>3&&u.text.length>300?(o(),i("a",{key:0,id:"feed-read-more-"+u.id,class:"href",onClick:Q(K=>D(u.text,u.id,"feed-read-more-","feed-text-"),["prevent"])},n(k.$t("readMore")),9,$t)):d("",!0),u.artworks?(o(),i("div",xt,[u.artworks.users?(o(),i("div",Mt,[v(z,{to:"/u/"+u.artworks.users.username},{default:Z(()=>[t("img",{class:"avatar",src:k.avatarCoverUrl(u.artworks.users.avatar_bucket,u.artworks.users.avatar_filename),onError:U[1]||(U[1]=(...K)=>k.imageLoadError&&k.imageLoadError(...K))},null,40,Ct)]),_:2},1032,["to"]),t("div",It,[v(z,{to:"/u/"+u.artworks.users.username,class:"fullname hover:href"},{default:Z(()=>[q(n(u.artworks.users.name),1)]),_:2},1032,["to"]),Lt,v(z,{to:"/u/"+u.artworks.users.username,class:"hover:underline text-xxs"},{default:Z(()=>[q(" @"+n(u.artworks.users.username),1)]),_:2},1032,["to"]),Et,v(z,{to:"/a/"+u.artworks.id,class:"hover:underline text-xxs"},{default:Z(()=>[q(n(k.formatDate(u.artworks.scheduled_post?u.artworks.scheduled_post:u.artworks.created_at,!0)),1)]),_:2},1032,["to"])])])):d("",!0),t("div",Ft,[t("span",At,n(u.artworks.title),1),E(t("p",null,[t("span",{id:"feed-description-"+u.artworks.id},n(u.artworks.description.length>300?`${u.artworks.description.slice(0,300)}...`:u.artworks.description),9,Pt),u.artworks.description.length>300?(o(),i("a",{key:0,id:"feed-read-more-"+u.artworks.id,class:"href",onClick:Q(K=>D(u.artworks.description,u.artworks.id,"feed-read-more-","feed-description-"),["prevent"])},n(k.$t("readMore")),9,St)):d("",!0)],512),[[S,u.artworks.description]])]),t("div",null,[k.isMobile()?d("",!0):(o(),i("div",{key:0,class:F(["p-2",{"cursor-pointer":!u.artworks.apply_explicit_filter}]),onClick:Q(K=>x(u.artworks.id,u.artworks.apply_explicit_filter,N),["prevent"])},[t("div",{class:F(["overflow-hidden relative p-2 rounded-md",{"md:mx-2":u.artworks.apply_explicit_filter}])},[v(Se,{class:F([{"blur-3xl unclickable":u.artworks.apply_explicit_filter},u.artworks.apply_explicit_filter?"brightness-50":"brightness-100"]),work:u.artworks},null,8,["class","work"]),u.artworks.apply_explicit_filter?(o(),i("div",Bt,[t("div",null,n(e(h).loggedIn?k.$t("explicitContentAlert"):k.$t("explicitContentAlertForGuest")),1),t("button",Ot,n(k.$t("explicitShowMeThisContent")),1)])):d("",!0)],2)],10,Tt)),k.isMobile()?(o(),H(z,{key:1,to:u.artworks.apply_explicit_filter?null:"/a/"+u.artworks.id,onClick:Q(K=>x(u.artworks.id,u.artworks.apply_explicit_filter,N),["prevent"]),class:"cursor-pointer"},{default:Z(()=>[t("div",{class:F(["overflow-hidden relative p-2 rounded-md",{"m-2":u.artworks.apply_explicit_filter}])},[v(Se,{class:F([{"blur-3xl unclickable":u.artworks.apply_explicit_filter},u.artworks.apply_explicit_filter?"brightness-50":"brightness-100"]),work:u.artworks},null,8,["class","work"]),u.artworks.apply_explicit_filter?(o(),i("div",Rt,[t("div",null,n(e(h).loggedIn?k.$t("explicitContentAlert"):k.$t("explicitContentAlertForGuest")),1),t("button",jt,n(k.$t("explicitShowMeThisContent")),1)])):d("",!0)],2)]),_:2},1032,["to","onClick"])):d("",!0)])])):d("",!0)]),t("div",Ut,[e(h).loggedIn?(o(),i("div",Vt,[t("span",{class:"leading-8",onClick:K=>e(A).includes(u.id)?w(u.id):R(u.id)},[E(v(T,{id:"profileFeedLikeButton-"+u.id,name:"i-ion-heart",class:"mr-1 text-red-500 hover:text-red-500"},null,8,["id"]),[[S,e(A).includes(u.id)]]),E(v(T,{name:"i-ri-heart-3-line",class:"mr-1 icon-color hover:text-red-500"},null,512),[[S,!e(A).includes(u.id)]]),q(" "+n(k.thousand(u._count.feed_likes)),1)],8,zt),t("span",{class:"leading-8",onClick:Q(K=>_(u.id),["prevent"])},[v(T,{name:"i-mdi-comment-multiple-outline",class:"mr-1 icon-color hover:text-blue-500"}),q(" "+n(k.thousand(u._count.feed_comments)),1)],8,Nt),t("div",Dt,[t("button",{type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"option-dropdown-items",onClick:K=>O(u.id,N)},[t("span",null,[v(T,{name:"i-uit-ellipsis-v",class:"align-middle icon icon-color"})])],8,Ht),t("div",Kt,[t("div",qt,[t("div",Wt,[v(z,{to:"/feed/"+u.id,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:Z(()=>[v(T,{name:"i-fluent-arrow-enter-20-filled",class:"mr-2 text-base"}),q(" "+n(k.$t("open")),1)]),_:2},1032,["to"]),v(z,{to:"/feed/"+u.id,target:"_blank",class:"flex z-20 py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:Z(()=>[v(T,{name:"i-ci-external-link",class:"mr-2 text-base"}),q(" "+n(k.$t("openInNewTab")),1)]),_:2},1032,["to"]),e(h).loggedIn&&u.user_id&&e(h).user.id===u.user_id?(o(),i("div",Gt)):d("",!0),e(h).loggedIn&&u.user_id&&e(h).user.id===u.user_id?(o(),i("div",{key:1,to:"/feed/"+u.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 cursor-pointer bg-danger hover:button-color parent-icon hover:text-white",onClick:U[2]||(U[2]=K=>k.openModal("profile-feed-deletion-confirm-modal"))},[v(T,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),q(" "+n(k.$t("delete")),1)],8,Yt)):d("",!0)])])])])])):d("",!0)])])])]))),128)),v(e(Ze),{load:L,"is-initial":!1},{loading:Z(()=>[t("div",Jt,[v(T,{name:"i-line-md-loading-twotone-loop",class:"text-3xl"}),Qt])]),"no-results":Z(()=>[t("div",Zt,[Xt,q(" "+n(k.$t("feeds.haventPostedAnyUpdate")),1)])]),"no-more":Z(()=>[t("div",eo,n(k.$t("youHaveReachedTheEnd")),1)]),_:1}),t("div",to,[v(ot,{ref_key:"chronologicalFeedModalViewRef",ref:f,section:"chronological-feed"},null,512)]),t("div",oo,[v(ge,{ref_key:"artworkModalViewRef",ref:I,section:"artwork"},null,512)]),v(fe,{id:"profile-feed-deletion-confirm-modal","modal-id":"profile-feed-deletion-confirm-modal",message:`${k.$t("alert.areYouSure")} ${k.$t("alert.youCannotUndoThisAction")}`,class:"modal",onOnAccept:U[3]||(U[3]=u=>M())},null,8,["message"])])}}},lo=te(so,[["__scopeId","data-v-f2afd521"]]);const ao={id:"lists"},no=["id"],io={__name:"Artworks",props:{userId:{type:Number,default:0},manageMode:{type:Boolean,default:!1},sortBy:{type:String,default:"default"}},emits:["feedSelectedItems","onEmpty"],setup(a,{emit:b}){const h=a,{oApiConfiguration:l,fetchOptions:C}=X(),c=Ae(l,C()),p="profile",y=m(!0);ae(()=>{g()});const g=async()=>{O.value.page=0;const[U,z]=await $();r.value=U,z.record_total<=O.value.perPage&&f(),z.record_total===0&&A()};$e(()=>h.sortBy,()=>{g()});const r=m([]),O=m({perPage:24,page:0}),$=async()=>{O.value.page===0&&(y.value=!0);const[U,z,u]=await c.getUserArtworks({userId:h.userId,sortBy:h.sortBy,pagination:{page:O.value.page,perPage:O.value.perPage}});if(u)w();else return z.record_total<=O.value.perPage&&f(),z.record_total===0&&A(),O.value.page+=1,s(),[U,z]},s=()=>{y.value=!1,x.value=!1,R.value=!1},L=m(!0),f=()=>{L.value=!1},_=m({delay:!1}),I=async()=>{_.value.delay=!0;const[U,z]=await $();for(let u=0;u<U.length;u++)r.value.push(U[u]);_.value.delay=!1,z.next_previous.next_page||f(),z.next_previous.next_page&&z.current_page===_.maxLoad&&(f(),_.showDiscoveryButton=!0)},x=m(!1),A=()=>{x.value=!0,f(),b("onEmpty")},R=m(!1),w=()=>{y.value=!1,R.value=!0,f()},D=m(null),M=(U,z=!1)=>{D.value.view(U,z),J().openModal(p+"-modal")},k=U=>{b("feedSelectedItems",U)};return(U,z)=>(o(),i("div",ao,[E(t("div",null,[E(v(Ee,{"section-class":"work-grid",works:e(r),view:M,"manage-mode":a.manageMode,onFeedManageList:k},null,8,["works","manage-mode"]),[[S,!e(x)]]),E(t("div",{class:F(["primary-button",e(_).delay?"animate-pulse":""]),onClick:I},n(U.$t("loadMore")),3),[[S,e(L)]])],512),[[S,!e(y)]]),v(ie,{loading:e(y),empty:e(x),error:e(R),fetch:$,"background-color":"theme-color-secondary",class:"mt-2"},null,8,["loading","empty","error"]),t("div",{id:p+"-modal",class:"modal work-view"},[E(v(ge,{ref_key:"profileModalViewRef",ref:D,section:p},null,512),[[S,!e(y)]])],8,no)]))}},ro=te(io,[["__scopeId","data-v-c394edc4"]]);const co={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},uo={class:"title"},mo=["name"],fo=["placeholder"],po=["placeholder"],wo=["for"],vo=t("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),ho={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},go=t("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),bo=[go],_o={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},ko=t("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),yo=[ko],$o={class:"flex flex-row gap-x-1"},xo={class:"flex flex-row gap-2 justify-end mt-2"},Mo={type:"submit",class:"primary-button"},Co={__name:"AlbumFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(a,{emit:b}){const h=a,l=ee(),{t:C}=Ce(),{oApiConfiguration:c,fetchOptions:p}=X(),y=be(c,p()),g="create-album-form",r=m({title:"",description:"",isPublic:1,category:"artwork"}),O=async()=>{Le().validate(g,C);try{let $=!1,s={};if(h.category){const[L,f,_]=await y.createAlbum(h.category,r.value);$=L,s=f}$&&(J().closeModal(h.modalId),b("created",s))}catch{}};return($,s)=>(o(),i("div",null,[t("div",co,[t("div",null,[t("span",uo,n($.$t("albums.create.form.title")),1),t("form",{id:g,class:"mt-2",onSubmit:s[4]||(s[4]=Q(L=>O(),["prevent"]))},[t("n-validate",{for:"title",name:$.$t("title")},[E(t("input",{"onUpdate:modelValue":s[0]||(s[0]=L=>e(r).title=L),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:$.$t("title")},null,8,fo),[[re,e(r).title]])],8,mo),E(t("textarea",{"onUpdate:modelValue":s[1]||(s[1]=L=>e(r).description=L),class:"form-input theme-color-secondary",placeholder:$.$t("description"),"data-gramm":"false"},null,8,po),[[re,e(r).description]]),t("label",{for:e(r).isPublic?"checked":"unchecked",class:"inline-flex items-center"},[t("span",{class:"relative cursor-pointer",onClick:s[2]||(s[2]=L=>e(l).i502p00r0?e(r).isPublic=!e(r).isPublic:e(r).isPublic=!0)},[vo,e(r).isPublic?(o(),i("span",ho,bo)):d("",!0),e(r).isPublic?d("",!0):(o(),i("span",_o,yo))]),t("div",$o,[t("span",{class:F(["ml-2 inline-block",{"leading-6":!e(l).i502p00r0}])},n($.$t("private")),3),e(l).i502p00r0?d("",!0):(o(),H(ne,{key:0}))])],8,wo),t("div",xo,[t("button",{class:"cancel-button",onClick:s[3]||(s[3]=Q(L=>$.closeModal(a.modalId),["prevent"]))},n($.$t("cancel")),1),t("button",Mo,n($.$t("create")),1)])],32)])])]))}};const Io={id:"lists"},Lo={class:"p-4 mb-2 w-full rounded-md theme-color-secondary"},Eo={class:"mb-2 text-base font-bold"},Fo={class:"mb-2"},Ao={class:"italic"},Po=["id"],So={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1}},emits:["onAlbumEmpty","feedManageList"],setup(a,{expose:b,emit:h}){const l=a,{oApiConfiguration:C,fetchOptions:c}=X(),p=be(C,c()),y=m(l.id);$e(()=>l.id,(M,k)=>{y.value=M}),ae(async()=>{await O()});const g=m(!0),r=m({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:24},list:[],empty:!1}),O=async()=>{g.value=!0,await $(),await s(),g.value=!1},$=async()=>{const[M,k]=await p.getInfo(y.value);r.value.info=M.data},s=async()=>{const[M,k,U]=await p.listAlbumItems({albumId:y.value,pagination:{page:r.value.pagination.page,perPage:r.value.pagination.page===0?r.value.pagination.firstLoad:r.value.pagination.perPage}});k?r.value.pagination.page===0?r.value.pagination.page=r.value.pagination.firstLoad/r.value.pagination.perPage:r.value.pagination.page+=r.value.pagination.page!==0?1:2:r.value.loadMore=!1,M!==null&&M.length?(M.forEach(z=>{r.value.list.push(z.artworks)}),h("onAlbumEmpty",!1)):(r.value.empty=!0,h("onAlbumEmpty",!0))},L=()=>{r.value.loadMore=!0,r.value.pagination.page=0,r.value.list=[]},f=m([]),_=M=>{f.value=M,h("feedManageList",M)},I=m(!1);let x;const A=async()=>{const[M,k]=await p.removeItems(l.id,f.value);M&&(ke().splash(x,I,"item-removed-alert"),L(),await O())},R=m("album"),w=m(null),D=(M,k=!1)=>{w.value.view(M,k),J().openModal(R.value+"-modal")};return b({fetchInfo:$,removeItems:A}),(M,k)=>(o(),i("div",Io,[t("div",Lo,[t("div",Eo,n(e(r).info.name),1),t("div",Fo,n(e(r).info.description),1),t("div",null,[t("b",null,n(M.$t("private"))+":",1),q(),t("span",Ao,n(e(r).info.is_public?M.$t("no"):M.$t("yes")),1)]),t("div",null,[t("b",null,n(M.$t("createdAt")),1),q(" "+n(M.formatDate(e(r).info.created_at)),1)])]),E(t("div",null,[E(v(Ee,{"section-class":"work-grid",works:e(r).list,view:D,"manage-mode":a.manageMode,onFeedManageList:_},null,8,["works","manage-mode"]),[[S,!e(r).empty]]),E(t("div",{class:"primary-button",onClick:k[0]||(k[0]=U=>s())},n(M.$t("loadMore")),513),[[S,e(r).loadMore]])],512),[[S,!e(g)]]),v(ie,{loading:e(g),empty:e(r).empty,error:!1,fetch:O,"background-color":"theme-color-secondary"},null,8,["loading","empty"]),e(g)?d("",!0):(o(),i("div",{key:0,id:e(R)+"-modal",class:"modal work-view"},[v(ge,{ref_key:"albumModalViewRef",ref:w,section:e(R)},null,8,["section"])],8,Po)),E(v(_e,{id:"item-removed-alert",text:M.$t("albums.itemRemoved")},null,8,["text"]),[[S,e(I)]])]))}},To=te(So,[["__scopeId","data-v-36c4a1d3"]]),Bo={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Oo={class:"title"},Ro=["name"],jo=["placeholder"],Uo=["placeholder"],Vo=["for"],zo=t("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),No={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},Do=t("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Ho=[Do],Ko={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},qo=t("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Wo=[qo],Go={class:"flex flex-row gap-x-1"},Yo={class:"flex flex-row gap-2 justify-end mt-2"},Jo={type:"submit",class:"primary-button"},Qo={__name:"EditForm",props:{albumId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(a,{expose:b,emit:h}){const l=a,C=ee(),{oApiConfiguration:c,fetchOptions:p}=X(),y=be(c,p()),{t:g}=Ce(),r=m(!0),O=async _=>{if(_){f(),r.value=!0;const[I,x]=await y.getInfo(_),A=I.data;s.value.id=_,s.value.name=A.name,s.value.description=A.description,s.value.isPublic=!!A.is_public,r.value=!1}},$="update-album-form",s=m({id:0,name:"",description:"",isPublic:!1}),L=async()=>{Le().validate($,g);const[_,I]=await y.update({id:s.value.id,name:s.value.name,description:s.value.description,isPublic:s.value.isPublic?1:0});I||(J().closeModal(l.modalId),h("updated",s.value),f())},f=()=>{s.value={id:0,name:"",description:"",isPublic:0}};return b({fetch:O}),(_,I)=>(o(),i("div",null,[t("div",Bo,[t("div",null,[t("span",Oo,n(_.$t("albums.edit.form.title")),1),e(r)?d("",!0):(o(),i("form",{key:0,id:$,class:"mt-2",onSubmit:I[4]||(I[4]=Q(x=>L(),["prevent"]))},[t("n-validate",{for:"title",name:_.$t("title")},[E(t("input",{"onUpdate:modelValue":I[0]||(I[0]=x=>e(s).name=x),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:_.$t("title")},null,8,jo),[[re,e(s).name]])],8,Ro),E(t("textarea",{"onUpdate:modelValue":I[1]||(I[1]=x=>e(s).description=x),class:"form-input theme-color-secondary",placeholder:_.$t("description"),"data-gramm":"false"},null,8,Uo),[[re,e(s).description]]),t("label",{for:e(s).isPublic?"checked":"unchecked",class:"inline-flex items-center"},[t("span",{class:"relative cursor-pointer",onClick:I[2]||(I[2]=x=>e(C).i502p00r0?e(s).isPublic=!e(s).isPublic:e(s).isPublic=!0)},[zo,e(s).isPublic?(o(),i("span",No,Ho)):d("",!0),e(s).isPublic?d("",!0):(o(),i("span",Ko,Wo))]),t("div",Go,[t("span",{class:F(["ml-2",{"leading-6":!e(C).i502p00r0}])},n(_.$t("private")),3),e(C).i502p00r0?d("",!0):(o(),H(ne,{key:0}))])],8,Vo),t("div",Yo,[t("button",{class:"cancel-button",onClick:I[3]||(I[3]=Q(x=>_.closeModal(a.modalId),["prevent"]))},n(_.$t("cancel")),1),t("button",Jo,n(_.$t("save")),1)])],32))])])]))}},Ne=""+new URL("folder.11be08fa.png",import.meta.url).href;const De=a=>(xe("data-v-25fd9644"),a=a(),Me(),a),Zo={class:"mb-2"},Xo={key:0},es=["src"],ts={key:1},os={class:"relative text-center"},ss={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},ls={class:"overflow-hidden rounded-md"},as=["src"],ns={key:2,class:"imgrid"},is={class:"relative text-center"},rs={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},ds={class:"overflow-hidden rounded-md"},cs=["src"],us=De(()=>t("img",{class:"bg-gray-300 border-none"},null,-1)),ms=De(()=>t("img",{class:"bg-gray-300 border-none"},null,-1)),fs={key:3,class:"imgrid"},ps={class:"relative text-center"},ws={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},vs={class:"overflow-hidden rounded-md"},hs=["src"],gs={key:4,class:"imgrid"},bs={class:"relative text-center"},_s={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},ks={class:"overflow-hidden rounded-md"},ys=["src"],$s={key:5,class:"imgrid"},xs={key:0,class:"relative text-center"},Ms={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},Cs={class:"overflow-hidden rounded-md"},Is=["src"],Ls={key:1,class:"relative text-center"},Es={class:"absolute top-1/2 left-1/2 z-10 text-lg font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 md:text-xl lg:text-3xl"},Fs={class:"overflow-hidden rounded-md"},As=["src"],Ps={__name:"ArtworkThumbnail",props:{album:{type:Object,default:()=>{}}},setup(a){const b=ee(),h={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(l,C)=>(o(),i("div",Zo,[!a.album.album_has_artworks||a.album._count.album_has_artworks===0?(o(),i("div",Xo,[t("img",{src:e(Ne),class:"rounded"},null,8,es)])):d("",!0),a.album.album_has_artworks&&a.album._count.album_has_artworks===1?(o(),i("div",ts,[t("div",os,[l.applyExplicitFilter(e(b),a.album.album_has_artworks[0].artworks.is_explicit,a.album.album_has_artworks[0].artworks.is_gore)?(o(),i("span",ss,n(l.$t("explicitContent")),1)):d("",!0),t("div",ls,[a.album.album_has_artworks&&a.album._count.album_has_artworks===1?(o(),i("img",{key:0,src:l.artworkThumb(a.album.album_has_artworks[0].artworks.artwork_assets[0].bucket,a.album.album_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:F(["object-cover object-top rounded",{"blur-sm brightness-50":l.applyExplicitFilter(e(b),a.album.album_has_artworks[0].artworks.is_explicit,a.album.album_has_artworks[0].artworks.is_gore)}]),style:{"aspect-ratio":"1/1"},onError:C[0]||(C[0]=(...c)=>l.imageLoadError&&l.imageLoadError(...c))},null,42,as)):d("",!0)])])])):d("",!0),a.album.album_has_artworks&&a.album._count.album_has_artworks===2?(o(),i("div",ns,[(o(!0),i(se,null,le(a.album.album_has_artworks,(c,p)=>(o(),i("div",{key:p,class:F(h[2][p])},[t("div",is,[l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)?(o(),i("span",rs,n(l.$t("explicitContent")),1)):d("",!0),t("div",ds,[t("img",{class:F(["theme-color",{"blur-sm brightness-50":l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)}]),src:l.artworkThumb(c.artworks.artwork_assets[0].bucket,c.artworks.artwork_assets[0].filename,"thumbnail"),onError:C[1]||(C[1]=(...y)=>l.imageLoadError&&l.imageLoadError(...y))},null,42,cs)])])],2))),128)),us,ms])):d("",!0),a.album.album_has_artworks&&a.album._count.album_has_artworks===3?(o(),i("div",fs,[(o(!0),i(se,null,le(a.album.album_has_artworks,(c,p)=>(o(),i("div",{key:p,class:F(h[3][p])},[t("div",ps,[l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)?(o(),i("span",ws,n(l.$t("explicitContent")),1)):d("",!0),t("div",vs,[t("img",{class:F(["theme-color",{"blur-sm brightness-50":l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)}]),src:l.artworkThumb(c.artworks.artwork_assets[0].bucket,c.artworks.artwork_assets[0].filename,"thumbnail"),onError:C[2]||(C[2]=(...y)=>l.imageLoadError&&l.imageLoadError(...y))},null,42,hs)])])],2))),128))])):d("",!0),a.album.album_has_artworks&&a.album._count.album_has_artworks===4?(o(),i("div",gs,[(o(!0),i(se,null,le(a.album.album_has_artworks,(c,p)=>(o(),i("div",{key:p},[t("div",bs,[l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)?(o(),i("span",_s,n(l.$t("explicitContent")),1)):d("",!0),t("div",ks,[t("img",{class:F(["theme-color",{"blur-sm brightness-50":l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)}]),src:l.artworkThumb(c.artworks.artwork_assets[0].bucket,c.artworks.artwork_assets[0].filename,"thumbnail"),onError:C[3]||(C[3]=(...y)=>l.imageLoadError&&l.imageLoadError(...y))},null,42,ys)])])]))),128))])):d("",!0),a.album.album_has_artworks&&a.album._count.album_has_artworks>4?(o(),i("div",$s,[(o(!0),i(se,null,le(a.album.album_has_artworks,(c,p)=>(o(),i("div",{key:p},[p<3?(o(),i("div",xs,[l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)?(o(),i("span",Ms,n(l.$t("explicitContent")),1)):d("",!0),t("div",Cs,[t("img",{class:F(["theme-color",{"blur-sm brightness-50":l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)}]),src:l.artworkThumb(c.artworks.artwork_assets[0].bucket,c.artworks.artwork_assets[0].filename,"thumbnail"),onError:C[4]||(C[4]=(...y)=>l.imageLoadError&&l.imageLoadError(...y))},null,42,Is)])])):(o(),i("div",Ls,[t("span",Es,"+"+n(a.album._count.album_has_artworks-4),1),t("div",Fs,[t("img",{src:l.artworkThumb(c.artworks.artwork_assets[0].bucket,c.artworks.artwork_assets[0].filename,"thumbnail"),class:F(["z-0 brightness-50",{"blur-sm brightness-50":l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)}]),onError:C[5]||(C[5]=(...y)=>l.imageLoadError&&l.imageLoadError(...y))},null,42,As)])]))]))),128))])):d("",!0)]))}},Ss=te(Ps,[["__scopeId","data-v-25fd9644"]]);const Ts={class:"mb-2 w-full"},Bs={key:0,class:"flex flex-row justify-between"},Os={class:"flex flex-row"},Rs={key:0},js={key:1,class:"flex flex-row justify-between"},Us={class:"flex flex-row"},Vs={class:"flex flex-row gap-2"},zs={class:"flex flex-row gap-2"},Ns={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},Ds=["onClick"],Hs={class:"flex flex-row pb-1 mt-4 font-bold"},Ks={class:"text-xs font-normal"},qs={__name:"Album",props:{userId:{type:Number,default:0}},setup(a){const b=a,h=ee(),{oApiConfiguration:l,fetchOptions:C}=X(),c=be(l,C());Fe(()=>{O()}),ae(()=>{f()});const p=m(!0),y=m("artwork"),g=m(0),r=m(!1),O=async()=>{if(h.i502p00r0)r.value=!0;else{const[P,B]=await c.proCanCreateAlbum({type:y.value});B?r.value=!1:r.value=P}},$=m([]),s=m({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),L=m({artwork:0}),f=async()=>{p.value=!0;const[P,B,W]=await c.fetchAlbums(b.userId,y.value,s.value.pagination.page===0?s.value.pagination.firstLoad:s.value.pagination.perPage,s.value.pagination.page);if(W)R();else{P.length||(s.value.manageMode=!1,x()),P.forEach(ue=>{$.value.push(ue)}),s.value.pagination.page+=s.value.pagination.firstLoad/s.value.pagination.perPage,s.value.showLoadMore=B;const[de]=await c.countArtworkAlbums(b.userId);L.value.artwork=de}p.value=!1},_=async()=>await f(),I=m(!1),x=()=>{I.value=!0,s.value.showLoadMore=!1},A=m(!1),R=()=>{p.value=!1,A.value=!0,s.value.showLoadMore=!1},w=async()=>{p.value=!1,I.value=!1,A.value=!1,s.value.pagination.page=0,$.value=[],await f()},D=m(!1);let M;const k=async()=>{await O(),ke().splash(M,D,"created-alert"),await w()},U=m(null),z=()=>{U.value.fetch(g.value),J().openModal("album-edit-form-modal")},u=m(null),N=P=>{u.value.fetchInfo(),$.value.forEach(B=>{B.id===P.id&&(B.name=P.name,B.description=P.description,B.is_public=P.isPublic)})},K=()=>{u.value.removeItems()},Y=m([]),ce=P=>{Y.value=P},we=async()=>{if(g.value!==0){const[P,B]=await c.deleteAlbum(g.value);P&&(await O(),g.value=0,w())}},ve=P=>{s.value.showManageButton=!P,s.value.manageMode=!1},oe=()=>{g.value=0,s.value.showManageButton=!1,s.value.manageMode=!1};return(P,B)=>(o(),i("div",null,[t("div",Ts,[e(g)?d("",!0):(o(),i("div",Bs,[t("div",Os,[t("div",{class:F(["ml-0 primary-button theme-color-secondary",{"button-color text-white":e(y)==="artwork"}]),onClick:B[0]||(B[0]=W=>y.value="artwork")},[q(n(P.$t("artworks.artwork"))+" ",1),t("span",{class:F(["px-1 ml-2 font-normal rounded",e(y)==="artwork"?"theme-color":"button-color text-white"])},n(P.thousand(e(L).artwork)),3)],2)]),e(h).loggedIn&&e(h).user.id===a.userId?(o(),i("div",Rs,[t("div",{class:"flex flex-row icon-button",onClick:B[1]||(B[1]=W=>e(r)?P.openModal("album-form-modal"):null)},[v(T,{name:"i-ion-add-outline"}),e(r)?d("",!0):(o(),H(ne,{key:0,class:"ml-1"}))])])):d("",!0)])),e(g)?(o(),i("div",js,[t("div",null,[t("div",{class:"ml-0 icon-button",onClick:B[2]||(B[2]=W=>oe())},[v(T,{name:"i-ic-baseline-keyboard-arrow-left"})])]),t("div",Us,[E(t("div",Vs,[t("button",{onClick:B[3]||(B[3]=W=>e(s).manageMode=!e(s).manageMode),class:F(["action-button",e(s).manageMode?"danger-button":"secondary-button"])},[v(T,{name:e(s).manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),q(" "+n(e(s).manageMode?P.$t("quit"):P.$t("manage")),1)],2),E(t("button",{onClick:B[4]||(B[4]=W=>e(Y).length>0?P.openModal("item-deletion-confirm-modal"):null),class:F(["flex flex-row",e(Y).length>0?"danger-button":"disabled-button cursor-not-allowed"])},[v(T,{name:"i-akar-icons-trash-bin"}),q(" "+n(P.$t("albums.removeSelected")),1)],2),[[S,e(s).manageMode]])],512),[[S,e(h).loggedIn&&e(h).user.id===a.userId&&e(s).showManageButton]]),E(t("div",zs,[t("button",{class:"icon-button",onClick:B[5]||(B[5]=W=>z())},[v(T,{name:"i-ph-gear-six"})]),t("button",{class:"danger-button-color b-button",onClick:B[6]||(B[6]=W=>P.openModal("album-deletion-confirm-modal"))},[v(T,{name:"i-akar-icons-trash-bin"})])],512),[[S,e(h).loggedIn&&e(h).user.id===a.userId&&!e(s).manageMode]])])])):d("",!0),E(t("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},n(P.$t("albums.manageModeActiveMessage")),513),[[S,e(s).manageMode]])]),e(g)?d("",!0):(o(),i("div",Ns,[(o(!0),i(se,null,le(e($),W=>(o(),i("div",{key:W.id,class:F(["p-3 rounded-md cursor-pointer",W.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:de=>g.value=W.id},[W.type==="artwork"?(o(),H(Ss,{key:0,album:W},null,8,["album"])):d("",!0),t("div",Hs,[W.is_public?d("",!0):(o(),H(T,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),t("span",Ks,n(W.name),1)])],10,Ds))),128))])),e(s).showLoadMore&&!e(g)?(o(),i("div",{key:1,class:"mt-4 w-full primary-button",onClick:_},n(P.$t("loadMore")),1)):d("",!0),v(ie,{loading:e(p),empty:e(I),error:e(A),fetch:f,"background-color":"theme-color-secondary"},null,8,["loading","empty","error"]),!e(p)&&!e(g)?(o(),H(Co,{key:2,id:"album-form-modal","modal-id":"album-form-modal",category:e(y),class:"modal",onCreated:k},null,8,["category"])):d("",!0),E(v(_e,{id:"created-alert",text:P.$t("albums.created")},null,8,["text"]),[[S,e(D)]]),!e(p)&&e(g)?(o(),H(Qo,{key:3,id:"album-edit-form-modal",ref_key:"albumEditFormModalRef",ref:U,"modal-id":"album-edit-form-modal","album-id":e(g),class:"modal",onUpdated:N},null,8,["album-id"])):d("",!0),v(fe,{id:"album-deletion-confirm-modal","modal-id":"album-deletion-confirm-modal",message:"All saved items in this album will be deleted. Do you still want to delete this album?",class:"modal",onOnAccept:we},null,8,["message"]),v(fe,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this album. Do you still want to remove them?",class:"modal",onOnAccept:K},null,8,["message"]),e(g)&&!e(p)?(o(),H(To,{key:4,id:e(g),ref_key:"albumDetailRef",ref:u,"manage-mode":e(s).manageMode,onOnAlbumEmpty:ve,onFeedManageList:ce},null,8,["id","manage-mode"])):d("",!0)]))}},Ws=te(qs,[["__scopeId","data-v-a912e056"]]);const Gs={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Ys={class:"title"},Js=["placeholder"],Qs=["placeholder"],Zs=["for"],Xs=t("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),el={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},tl=t("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),ol=[tl],sl={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},ll=t("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),al=[ll],nl={class:"flex flex-row gap-x-1"},il={class:"flex flex-row gap-2 justify-end mt-2"},rl={type:"submit",class:"primary-button"},dl={__name:"CollectionFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(a,{emit:b}){const h=a,l=ee(),{oApiConfiguration:C,fetchOptions:c}=X(),p=ye(C,c()),{t:y}=Ce(),g="create-collection-form",r=m({title:"",description:"",isPublic:1,category:"artwork"}),O=async()=>{Le().validate(g,y);try{let $=!1,s={};if(h.category){const[L,f,_]=await p.createCollection(h.category,r.value);_||($=L,s=f)}$&&(J().closeModal(h.modalId),b("created",s))}catch{}};return($,s)=>(o(),i("div",null,[t("div",Gs,[t("div",null,[t("span",Ys,n($.$t("collections.create.form.title")),1),t("form",{id:g,class:"mt-2",onSubmit:s[4]||(s[4]=Q(L=>O(),["prevent"]))},[t("n-validate",null,[E(t("input",{"onUpdate:modelValue":s[0]||(s[0]=L=>e(r).title=L),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:$.$t("title")},null,8,Js),[[re,e(r).title]])]),E(t("textarea",{"onUpdate:modelValue":s[1]||(s[1]=L=>e(r).description=L),class:"form-input theme-color-secondary",placeholder:$.$t("description"),"data-gramm":"false"},null,8,Qs),[[re,e(r).description]]),t("label",{for:e(r).isPublic?"checked":"unchecked",class:"inline-flex items-center"},[t("span",{class:"relative cursor-pointer",onClick:s[2]||(s[2]=L=>e(l).i502p00r0?e(r).isPublic=!e(r).isPublic:e(r).isPublic=!0)},[Xs,e(r).isPublic?(o(),i("span",el,ol)):d("",!0),e(r).isPublic?d("",!0):(o(),i("span",sl,al))]),t("div",nl,[t("span",{class:F(["ml-2 inline-block",{"leading-6":!e(l).i502p00r0}])},n($.$t("private")),3),e(l).i502p00r0?d("",!0):(o(),H(ne,{key:0}))])],8,Zs),t("div",il,[t("button",{class:"cancel-button",onClick:s[3]||(s[3]=Q(L=>$.closeModal(a.modalId),["prevent"]))},n($.$t("cancel")),1),t("button",rl,n($.$t("create")),1)])],32)])])]))}};const cl={id:"lists"},ul={class:"p-4 mb-4 w-full rounded-md theme-color-secondary"},ml={class:"text-base font-bold mb-2"},fl={class:"mb-2"},pl={class:"italic"},wl=["id"],vl={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1},type:{type:String,default:""}},emits:["onCollectionEmpty","feedManageList"],setup(a,{expose:b,emit:h}){const l=a,{oApiConfiguration:C,fetchOptions:c}=X(),p=ye(C,c()),y=m(l.id);$e(()=>l.id,(M,k)=>{y.value=M}),ae(async()=>{await O()});const g=m(!0),r=m({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:24},list:[],empty:!1}),O=async()=>{g.value=!0,await $(),await s(),g.value=!1},$=async()=>{const[M,k]=await p.getInfo(y.value);r.value.info=M.data},s=async()=>{const[M,k,U]=await p.listCollectionItems({collectionId:y.value,pagination:{page:r.value.pagination.page,perPage:r.value.pagination.page===0?r.value.pagination.firstLoad:r.value.pagination.perPage}});k?r.value.pagination.page===0?r.value.pagination.page=r.value.pagination.firstLoad/r.value.pagination.perPage:r.value.pagination.page+=r.value.pagination.page!==0?1:2:r.value.loadMore=!1,M!==null&&M.length?(M.forEach(z=>{r.value.list.push(z.artworks)}),h("onCollectionEmpty",!1)):(r.value.empty=!0,h("onCollectionEmpty",!0))},L=()=>{r.value.loadMore=!0,r.value.pagination.page=0,r.value.list=[]},f=m([]),_=M=>{f.value=M,h("feedManageList",M)},I=m(!1);let x;const A=async()=>{const[M,k]=await p.removeItem({collectionId:l.id,type:l.type,workId:f.value});k||(ke().splash(x,I,"item-removed-alert"),L(),await O(),h("feedManageList",[]))},R=m("collection"),w=m(null),D=(M,k=!1)=>{w.value.view(M,k),J().openModal(R.value+"-modal")};return b({fetchInfo:$,removeItem:A}),(M,k)=>(o(),i("div",cl,[t("div",ul,[t("div",ml,n(e(r).info.name),1),t("div",fl,n(e(r).info.description),1),t("div",null,[t("b",null,n(M.$t("private"))+":",1),q(),t("span",pl,n(e(r).info.is_public?M.$t("no"):M.$t("yes")),1)]),t("div",null,[t("b",null,n(M.$t("createdAt")),1),q(" "+n(M.formatDate(e(r).info.created_at)),1)])]),E(t("div",null,[E(v(Ee,{"section-class":"work-grid",works:e(r).list,view:D,"manage-mode":a.manageMode,onFeedManageList:_},null,8,["works","manage-mode"]),[[S,!e(r).empty]]),E(t("div",{class:"primary-button",onClick:k[0]||(k[0]=U=>s())},n(M.$t("loadMore")),513),[[S,e(r).loadMore]])],512),[[S,!e(g)]]),v(ie,{loading:e(g),empty:e(r).empty,error:!1,fetch:O,"background-color":"theme-color-secondary"},null,8,["loading","empty"]),e(g)?d("",!0):(o(),i("div",{key:0,id:e(R)+"-modal",class:"modal work-view"},[v(ge,{ref_key:"collectionModalViewRef",ref:w,section:e(R)},null,8,["section"])],8,wl)),E(v(_e,{id:"item-removed-alert",text:M.$t("collections.itemRemoved")},null,8,["text"]),[[S,e(I)]])]))}},hl=te(vl,[["__scopeId","data-v-54139f41"]]),gl={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},bl={class:"title"},_l=["placeholder"],kl=["placeholder"],yl=["for"],$l=t("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),xl={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},Ml=t("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Cl=[Ml],Il={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Ll=t("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),El=[Ll],Fl={class:"flex flex-row gap-x-1"},Al={class:"flex flex-row gap-2 justify-end mt-2"},Pl={type:"submit",class:"primary-button"},Sl={__name:"EditForm",props:{collectionId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(a,{expose:b,emit:h}){const l=a,C=ee(),{oApiConfiguration:c,fetchOptions:p}=X(),y=ye(c,p()),{t:g}=Ce(),r=m(!0),O=async _=>{if(_){f(),r.value=!0;const[I,x]=await y.getInfo(_);if(!x){const A=I.data;s.value.id=_,s.value.name=A.name,s.value.description=A.description,s.value.isPublic=!!A.is_public,r.value=!1}}},$="edit-collection-form",s=m({id:0,name:"",description:"",isPublic:!1}),L=async()=>{Le().validate($,g);const[_,I]=await y.update({id:s.value.id,name:s.value.name,description:s.value.description,isPublic:s.value.isPublic?1:0});I||(J().closeModal(l.modalId),h("updated",s.value),f())},f=()=>{s.value={id:0,name:"",description:"",isPublic:0}};return b({fetch:O}),(_,I)=>(o(),i("div",null,[t("div",{class:"hidden",onClick:I[0]||(I[0]=x=>O(0))}),t("div",gl,[t("div",null,[t("span",bl,n(_.$t("collections.edit.form.title")),1),e(r)?d("",!0):(o(),i("form",{key:0,id:$,class:"mt-2",onSubmit:I[5]||(I[5]=Q(x=>L(),["prevent"]))},[t("n-validate",null,[E(t("input",{"onUpdate:modelValue":I[1]||(I[1]=x=>e(s).name=x),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:_.$t("title")},null,8,_l),[[re,e(s).name]])]),E(t("textarea",{"onUpdate:modelValue":I[2]||(I[2]=x=>e(s).description=x),class:"form-input theme-color-secondary",placeholder:_.$t("description"),"data-gramm":"false"},null,8,kl),[[re,e(s).description]]),t("label",{for:e(s).isPublic?"checked":"unchecked",class:"inline-flex items-center"},[t("span",{class:"relative cursor-pointer",onClick:I[3]||(I[3]=x=>e(C).i502p00r0?e(s).isPublic=!e(s).isPublic:e(s).isPublic=!0)},[$l,e(s).isPublic?(o(),i("span",xl,Cl)):d("",!0),e(s).isPublic?d("",!0):(o(),i("span",Il,El))]),t("div",Fl,[t("span",{class:F(["ml-2",{"leading-6":!e(C).i502p00r0}])},n(_.$t("private")),3),e(C).i502p00r0?d("",!0):(o(),H(ne,{key:0}))])],8,yl),t("div",Al,[t("button",{class:"cancel-button",onClick:I[4]||(I[4]=Q(x=>_.closeModal(a.modalId),["prevent"]))},n(_.$t("cancel")),1),t("button",Pl,n(_.$t("save")),1)])],32))])])]))}};const He=a=>(xe("data-v-0f9e442e"),a=a(),Me(),a),Tl={class:"mb-2"},Bl={key:0},Ol=["src"],Rl={key:1},jl={class:"relative text-center"},Ul={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Vl={class:"overflow-hidden rounded-md"},zl=["src"],Nl={key:2,class:"imgrid"},Dl={class:"relative text-center"},Hl={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Kl={class:"overflow-hidden rounded-md"},ql=["src"],Wl=He(()=>t("img",{class:"bg-gray-300 border-none"},null,-1)),Gl=He(()=>t("img",{class:"bg-gray-300 border-none"},null,-1)),Yl={key:3,class:"imgrid"},Jl={class:"relative text-center"},Ql={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Zl={class:"overflow-hidden rounded-md"},Xl=["src"],ea={key:4,class:"imgrid"},ta={class:"relative text-center"},oa={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},sa={class:"overflow-hidden rounded-md"},la=["src"],aa={key:5,class:"imgrid"},na={key:0,class:"relative text-center"},ia={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},ra={class:"overflow-hidden rounded-md"},da=["src"],ca={key:1,class:"relative text-center"},ua={class:"absolute top-1/2 left-1/2 z-10 text-lg font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 md:text-xl lg:text-3xl"},ma={class:"overflow-hidden rounded-md"},fa=["src"],pa={__name:"ArtworkThumbnail",props:{collection:{type:Object,default:()=>{}}},setup(a){const b=ee(),h={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(l,C)=>(o(),i("div",Tl,[!a.collection.collection_has_artworks||a.collection._count.collection_has_artworks===0?(o(),i("div",Bl,[t("img",{src:e(Ne),class:"rounded"},null,8,Ol)])):d("",!0),a.collection.collection_has_artworks&&a.collection._count.collection_has_artworks===1?(o(),i("div",Rl,[t("div",jl,[l.applyExplicitFilter(e(b),a.collection.collection_has_artworks[0].artworks.is_explicit,a.collection.collection_has_artworks[0].artworks.is_gore)?(o(),i("span",Ul,n(l.$t("explicitContent")),1)):d("",!0),t("div",Vl,[a.collection.collection_has_artworks&&a.collection._count.collection_has_artworks===1?(o(),i("img",{key:0,src:l.artworkThumb(a.collection.collection_has_artworks[0].artworks.artwork_assets[0].bucket,a.collection.collection_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:F(["object-cover object-top rounded",{"blur-sm brightness-50":l.applyExplicitFilter(e(b),a.collection.collection_has_artworks[0].artworks.is_explicit,a.collection.collection_has_artworks[0].artworks.is_gore)}]),style:{"aspect-ratio":"1/1"},onError:C[0]||(C[0]=(...c)=>l.imageLoadError&&l.imageLoadError(...c))},null,42,zl)):d("",!0)])])])):d("",!0),a.collection.collection_has_artworks&&a.collection._count.collection_has_artworks===2?(o(),i("div",Nl,[(o(!0),i(se,null,le(a.collection.collection_has_artworks,(c,p)=>(o(),i("div",{key:p,class:F(h[2][p])},[t("div",Dl,[l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)?(o(),i("span",Hl,n(l.$t("explicitContent")),1)):d("",!0),t("div",Kl,[t("img",{class:F(["theme-color",{"blur-sm brightness-50":l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)}]),src:l.artworkThumb(c.artworks.artwork_assets[0].bucket,c.artworks.artwork_assets[0].filename,"thumbnail"),onError:C[1]||(C[1]=(...y)=>l.imageLoadError&&l.imageLoadError(...y))},null,42,ql)])])],2))),128)),Wl,Gl])):d("",!0),a.collection.collection_has_artworks&&a.collection._count.collection_has_artworks===3?(o(),i("div",Yl,[(o(!0),i(se,null,le(a.collection.collection_has_artworks,(c,p)=>(o(),i("div",{key:p,class:F(h[3][p])},[t("div",Jl,[l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)?(o(),i("span",Ql,n(l.$t("explicitContent")),1)):d("",!0),t("div",Zl,[t("img",{class:F(["theme-color",{"blur-sm brightness-50":l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)}]),src:l.artworkThumb(c.artworks.artwork_assets[0].bucket,c.artworks.artwork_assets[0].filename,"thumbnail"),onError:C[2]||(C[2]=(...y)=>l.imageLoadError&&l.imageLoadError(...y))},null,42,Xl)])])],2))),128))])):d("",!0),a.collection.collection_has_artworks&&a.collection._count.collection_has_artworks===4?(o(),i("div",ea,[(o(!0),i(se,null,le(a.collection.collection_has_artworks,(c,p)=>(o(),i("div",{key:p},[t("div",ta,[l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)?(o(),i("span",oa,n(l.$t("explicitContent")),1)):d("",!0),t("div",sa,[t("img",{class:F(["theme-color",{"blur-sm brightness-50":l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)}]),src:l.artworkThumb(c.artworks.artwork_assets[0].bucket,c.artworks.artwork_assets[0].filename,"thumbnail"),onError:C[3]||(C[3]=(...y)=>l.imageLoadError&&l.imageLoadError(...y))},null,42,la)])])]))),128))])):d("",!0),a.collection.collection_has_artworks&&a.collection._count.collection_has_artworks>4?(o(),i("div",aa,[(o(!0),i(se,null,le(a.collection.collection_has_artworks,(c,p)=>(o(),i("div",{key:p},[p<3?(o(),i("div",na,[l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)?(o(),i("span",ia,n(l.$t("explicitContent")),1)):d("",!0),t("div",ra,[t("img",{class:F(["theme-color",{"blur-sm brightness-50":l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)}]),src:l.artworkThumb(c.artworks.artwork_assets[0].bucket,c.artworks.artwork_assets[0].filename,"thumbnail"),onError:C[4]||(C[4]=(...y)=>l.imageLoadError&&l.imageLoadError(...y))},null,42,da)])])):(o(),i("div",ca,[t("span",ua,"+"+n(a.collection._count.collection_has_artworks-4),1),t("div",ma,[t("img",{src:l.artworkThumb(c.artworks.artwork_assets[0].bucket,c.artworks.artwork_assets[0].filename,"thumbnail"),class:F(["z-0 brightness-50",{"blur-sm brightness-50":l.applyExplicitFilter(e(b),c.artworks.is_explicit,c.artworks.is_gore)}]),onError:C[5]||(C[5]=(...y)=>l.imageLoadError&&l.imageLoadError(...y))},null,42,fa)])]))]))),128))])):d("",!0)]))}},wa=te(pa,[["__scopeId","data-v-0f9e442e"]]);const va={class:"mb-2 w-full"},ha={key:0,class:"flex flex-row justify-between"},ga={class:"flex flex-row"},ba={key:0},_a={key:1,class:"flex flex-row justify-between"},ka={class:"flex flex-row"},ya={class:"flex flex-row gap-2"},$a={class:"flex flex-row gap-2"},xa={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},Ma=["onClick"],Ca={class:"flex flex-row pb-1 mt-4 font-bold"},Ia={class:"text-xs font-normal"},La={__name:"Collection",props:{userId:{type:Number,default:0}},setup(a){const b=a,h=ee();ae(()=>{f()});const{oApiConfiguration:l,fetchOptions:C}=X(),c=ye(l,C());Fe(()=>{O()});const p=m(!0),y=m("artwork"),g=m(0),r=m(!1),O=async()=>{if(h.i502p00r0)r.value=!0;else{const[P,B]=await c.proCanCreateCollection({type:y.value});B?r.value=!1:r.value=P}},$=m([]),s=m({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),L=m({artwork:0}),f=async()=>{p.value=!0;const[P,B,W]=await c.fetchCollections({userId:b.userId,type:y.value,pagination:{page:s.value.pagination.page,perPage:s.value.pagination.page===0?s.value.pagination.firstLoad:s.value.pagination.perPage}});if(W)R();else{P.length||(s.value.manageMode=!1,x()),P.forEach(ue=>{$.value.push(ue)}),s.value.pagination.page+=s.value.pagination.firstLoad/s.value.pagination.perPage,s.value.showLoadMore=B;const[de]=await c.countArtworkCollections(b.userId);L.value.artwork=de}p.value=!1},_=async()=>await f(),I=m(!1),x=()=>{I.value=!0,s.value.showLoadMore=!1},A=m(!1),R=()=>{p.value=!1,A.value=!0,s.value.showLoadMore=!1},w=async()=>{p.value=!1,I.value=!1,A.value=!1,s.value.pagination.page=0,$.value=[],await f()},D=P=>{s.value.showManageButton=!0,P&&(s.value.showManageButton=!1)},M=m(!1);let k;const U=async()=>{await O(),ke().splash(k,M,"created-alert"),await w()},z=m(null),u=()=>{z.value.fetch(g.value),J().openModal("collection-edit-form-modal")},N=m(null),K=P=>{N.value.fetchInfo(),$.value.forEach(B=>{B.id===P.id&&(B.name=P.name,B.description=P.description,B.is_public=P.isPublic)})},Y=m([]),ce=P=>{Y.value=P},we=()=>{N.value.removeItem()},ve=async()=>{if(g.value!==0){const[P,B]=await c.deleteCollection(g.value);P&&(await O(),g.value=0,w())}},oe=()=>{g.value=0,s.value.showManageButton=!1,s.value.manageMode=!1};return(P,B)=>(o(),i("div",null,[t("div",va,[e(g)?d("",!0):(o(),i("div",ha,[t("div",ga,[t("div",{class:F(["ml-0 primary-button theme-color-secondary",{"button-color text-white":e(y)==="artwork"}]),onClick:B[0]||(B[0]=W=>y.value="artwork")},[q(n(P.$t("artworks.artwork"))+" ",1),t("span",{class:F(["px-1 ml-2 font-normal rounded",e(y)==="artwork"?"theme-color":"button-color text-white"])},n(P.thousand(e(L).artwork)),3)],2)]),e(h).loggedIn&&e(h).user.id===a.userId?(o(),i("div",ba,[t("div",{class:"flex flex-row icon-button",onClick:B[1]||(B[1]=W=>e(r)?P.openModal("collection-form-modal"):null)},[v(T,{name:"i-ion-add-outline"}),e(r)?d("",!0):(o(),H(ne,{key:0,class:"ml-1"}))])])):d("",!0)])),e(g)?(o(),i("div",_a,[t("div",null,[t("div",{class:"ml-0 icon-button",onClick:B[2]||(B[2]=W=>oe())},[v(T,{name:"i-ic-baseline-keyboard-arrow-left"})])]),t("div",ka,[E(t("div",ya,[t("button",{class:F(["action-button",e(s).manageMode?"danger-button":"secondary-button"]),onClick:B[3]||(B[3]=W=>e(s).manageMode=!e(s).manageMode)},[v(T,{name:e(s).manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),q(" "+n(e(s).manageMode?P.$t("quit"):P.$t("manage")),1)],2),E(t("button",{onClick:B[4]||(B[4]=W=>e(Y).length>0?P.openModal("item-deletion-confirm-modal"):null),class:F(["flex flex-row",e(Y).length>0?"danger-button":"disabled-button cursor-not-allowed"])},[v(T,{name:"i-akar-icons-trash-bin"}),q(" "+n(P.$t("collections.removeSelected")),1)],2),[[S,e(s).manageMode]])],512),[[S,e(h).loggedIn&&e(h).user.id===a.userId&&e(s).showManageButton]]),E(t("div",$a,[t("button",{class:"icon-button",onClick:B[5]||(B[5]=W=>u())},[v(T,{name:"i-ph-gear-six"})]),t("button",{class:"danger-button-color b-button",onClick:B[6]||(B[6]=W=>P.openModal("collection-deletion-confirm-modal"))},[v(T,{name:"i-akar-icons-trash-bin"})])],512),[[S,e(h).loggedIn&&e(h).user.id===a.userId&&!e(s).manageMode]])])])):d("",!0),E(t("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},n(P.$t("collections.manageModeActiveMessage")),513),[[S,e(s).manageMode]])]),e(g)?d("",!0):(o(),i("div",xa,[(o(!0),i(se,null,le(e($),W=>(o(),i("div",{key:W.id,class:F(["p-3 rounded-md cursor-pointer",W.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:de=>g.value=W.id},[W.type==="artwork"?(o(),H(wa,{key:0,collection:W},null,8,["collection"])):d("",!0),t("div",Ca,[W.is_public?d("",!0):(o(),H(T,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),t("span",Ia,n(W.name),1)])],10,Ma))),128))])),e(s).showLoadMore&&!e(g)?(o(),i("div",{key:1,class:"mt-4 w-full primary-button",onClick:_},n(P.$t("loadMore")),1)):d("",!0),v(ie,{loading:e(p),empty:e(I),error:e(A),fetch:f,"background-color":"theme-color-secondary"},null,8,["loading","empty","error"]),!e(p)&&!e(g)?(o(),H(dl,{key:2,id:"collection-form-modal","modal-id":"collection-form-modal",category:e(y),class:"modal",onCreated:U},null,8,["category"])):d("",!0),E(v(_e,{id:"created-alert",text:P.$t("collections.created")},null,8,["text"]),[[S,e(M)]]),!e(p)&&e(g)?(o(),H(Sl,{key:3,id:"collection-edit-form-modal",ref_key:"collectionEditFormModalRef",ref:z,"modal-id":"collection-edit-form-modal","collection-id":e(g),class:"modal",onUpdated:K},null,8,["collection-id"])):d("",!0),v(fe,{id:"collection-deletion-confirm-modal","modal-id":"collection-deletion-confirm-modal",message:"All saved items in this collection will be deleted. Do you still want to delete this collection?",class:"modal",onOnAccept:ve},null,8,["message"]),v(fe,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this collection. Do you still want to remove them?",class:"modal",onOnAccept:we},null,8,["message"]),e(g)&&!e(p)?(o(),H(hl,{key:4,id:e(g),ref_key:"collectionDetailRef",ref:N,"manage-mode":e(s).manageMode,type:e(y),onOnCollectionEmpty:D,onFeedManageList:ce},null,8,["id","manage-mode","type"])):d("",!0)]))}},Ea=te(La,[["__scopeId","data-v-4e3d12f2"]]);const Fa={id:"lists"},Aa=["id"],Pa={__name:"Liked",props:{userId:{type:Number,default:0}},setup(a){const b=a,h=ee(),{oApiConfiguration:l,fetchOptions:C}=X(),c=Ae(l,C()),p=st(l,C()),y="profile-liked",g=m(!0),r=m(0),O=Ue(()=>h.i502p00r0?!0:f.value.page*f.value.perPage<r.value);Fe(()=>{h.i502p00r0||$(),s()});const $=async()=>{const N=await p.getSetting("max_free_liked_artworks");r.value=Number(N)},s=async()=>{const[N,K]=await _();for(let Y=0;Y<N.length;Y++)L.value.push(N[Y].artworks);K.record_total<=f.value.perPage&&A(),K.record_total===0&&M()},L=m([]),f=m({perPage:24,page:0}),_=async()=>{f.value.page===0&&(g.value=!0);const[N,K,Y]=await c.getUserLikedArtworks({userId:b.userId,pagination:{page:f.value.page,perPage:f.value.perPage}});if(Y)U();else return K.record_total<=f.value.perPage&&A(),K.record_total===0&&M(),f.value.page+=1,I(),[N,K]},I=()=>{g.value=!1,D.value=!1,k.value=!1},x=m(!0),A=()=>{x.value=!1},R=m({delay:!1}),w=async()=>{R.value.delay=!0;const[N,K]=await _();for(let Y=0;Y<N.length;Y++)L.value.push(N[Y].artworks);R.value.delay=!1,K.next_previous.next_page||A(),K.next_previous.next_page&&K.current_page===R.maxLoad&&(A(),R.showDiscoveryButton=!0)},D=m(!1),M=()=>{D.value=!0,g.value=!1,A(),emits("onEmpty")},k=m(!1),U=()=>{g.value=!1,k.value=!0,A()},z=m(null),u=(N,K=!1)=>{z.value.view(N,K),J().openModal(y+"-modal")};return(N,K)=>(o(),i("div",Fa,[E(t("div",null,[E(v(Ee,{"section-class":"work-grid",works:e(L),view:u},null,8,["works"]),[[S,!e(D)]]),E(t("div",{class:F([e(O)?"primary-button":"disabled-button",{"animate-pulse":e(R).delay},{"inline-block flex-row w-full text-center":!e(O)}]),onClick:K[0]||(K[0]=Y=>e(O)?w():null)},[q(n(N.$t("loadMore")),1),e(O)?d("",!0):(o(),H(ne,{key:0,class:"ml-2"}))],2),[[S,e(x)]])],512),[[S,!e(g)]]),v(ie,{loading:e(g),empty:e(D),error:e(k),fetch:_,"background-color":"theme-color-secondary"},null,8,["loading","empty","error"]),t("div",{id:y+"-modal",class:"modal work-view"},[E(v(ge,{ref_key:"artworkModalViewRef",ref:z,section:y},null,512),[[S,!e(g)]])],8,Aa)]))}},Sa=te(Pa,[["__scopeId","data-v-2508dc40"]]);const Ta={class:"flex flex-row justify-between"},Ba={class:"section-title"},Oa=["checked","disabled"],Ra={class:"ml-2"},ja={key:0},Ua={__name:"FollowerList",props:{userId:{type:Number,default:0},hide:{type:Boolean,default:!0},userHideFollowerListStatus:{type:Boolean,default:!1}},setup(a){const b=a,h=ee(),{oApiConfiguration:l,fetchOptions:C}=X(),c=Ie(l,C()),p=m(!1),y=m(!1);ae(()=>{y.value=b.userHideFollowerListStatus,b.hide?(r.value=!1,s.value=!0,p.value=!0):f()});const g=m([]),r=m(!0),O=m({page:0,perPage:12}),$=m(!1),s=m(!1);m("");const L=m(!1),f=async()=>{_(),r.value=!0;const[x,A]=await c.getFollowerList({userId:b.userId,pagination:{page:O.value.page,perPage:O.value.perPage}});A?$.value=!0:(x.followers.length||(s.value=!0),x.followers.forEach(R=>{g.value.push(R)}),O.value.page+=1,x.pagination.next_previous.next_page?L.value=!0:L.value=!1),r.value=!1},_=()=>{s.value=!1,$.value=!1},I=async()=>{if(!h.i502p00r0)return null;const[x,A]=await c.toggleFollowerPrivacy();x?y.value=!y.value:console.error("ERROR: can't toggle follower visibility setting.")};return(x,A)=>(o(),i("div",null,[t("div",Ta,[t("div",Ba,n(x.$t("followers.followers")),1),t("div",null,[e(h).loggedIn&&e(h).i502p00r0&&e(h).user.id===a.userId?(o(),i("label",{key:0,onClick:A[0]||(A[0]=Q(R=>I(),["prevent"])),for:"hide-follower-toggle",class:"inline-flex relative flex-row justify-center items-center cursor-pointer"},[t("input",{id:"hide-follower-toggle",type:"checkbox",class:"sr-only peer",checked:e(y),disabled:!e(h).i502p00r0},null,8,Oa),t("div",{class:F(["w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600",{unclickable:!e(h).i502p00r0},e(h).i502p00r0?" after:top-[2px]":" after:top-[4px]"])},null,2),t("span",Ra,n(x.$t("followers.hideMyFollowers")),1),e(h).i502p00r0?d("",!0):(o(),H(ne,{key:0,class:"ml-1"}))])):d("",!0)])]),!a.hide&&!e(r)&&!e(s)&&!e($)?(o(),i("div",ja,[v(ze,{class:"mt-4",users:e(g),"column-type":3},null,8,["users"]),E(t("div",{class:"mt-4 primary-button",onClick:A[1]||(A[1]=R=>f())},n(x.$t("loadMore")),513),[[S,e(L)]])])):d("",!0),v(ie,{class:"mt-2",loading:e(r),empty:e(s),"empty-message":e(p)?x.$t("followers.followersHidden"):null,"empty-icon":"i-ri-eye-close-fill",error:e($),fetch:f,"background-color":"theme-color-secondary"},null,8,["loading","empty","empty-message","error"])]))}},Va=te(Ua,[["__scopeId","data-v-05a246ee"]]);const za={class:"flex flex-row justify-between"},Na={class:"section-title"},Da={class:"inline-flex flex-row gap-4"},Ha={class:"flex flex-col justify-center align-middle"},Ka={class:"mr-1"},qa=["checked","disabled"],Wa={class:"ml-2"},Ga={key:0},Ya={__name:"FollowingList",props:{userId:{type:Number,default:0},hide:{type:Boolean,default:!0},userHideFollowingListStatus:{type:Boolean,default:!1}},setup(a){const b=a,h=ee(),{oApiConfiguration:l,fetchOptions:C}=X(),c=Ie(l,C()),p=m(!1),y=m(!1);ae(()=>{p.value=b.userHideFollowingListStatus,b.hide?($.value=!1,f.value=!0,y.value=!0):I(!1)});const g=m(!1),r=async R=>{O.value=[],s.value.page=0,g.value=R,await I(R)},O=m([]),$=m(!0),s=m({page:0,perPage:12}),L=m(!1),f=m(!1),_=m(!1),I=async R=>{x(),$.value=!0;const[w,D]=await c.getFollowingList({userId:b.userId,isPrivateOnly:R?1:0,pagination:{page:s.value.page,perPage:s.value.perPage}});D?L.value=!0:(w.followings.length||(f.value=!0),w.followings.forEach(M=>{O.value.push(M)}),s.value.page+=1,w.pagination.next_previous.next_page?_.value=!0:_.value=!1),$.value=!1},x=()=>{f.value=!1,L.value=!1},A=async()=>{if(!h.i502p00r0)return null;const[R,w]=await c.toggleFollowingPrivacy();R?p.value=!p.value:console.error("ERROR: can't toggle following visibility setting.")};return(R,w)=>{const D=Oe("ProBadge");return o(),i("div",null,[t("div",za,[t("div",Na,n(R.$t("followings.followings")),1),t("div",Da,[t("div",Ha,[e(h).loggedIn&&e(h).i502p00r0&&e(h).user.id==a.userId?(o(),i("div",{key:0,onClick:w[0]||(w[0]=M=>r(!e(g))),class:F(["flex flex-row cursor-pointer href",{"font-bold":e(g)}])},[E(v(T,{name:"i-mdi-eye-check"},null,512),[[S,e(g)]]),t("div",Ka,[E(v(T,{name:"i-fluent-inprivate-account-16-regular"},null,512),[[S,!e(g)]]),E(v(T,{name:"i-fluent-inprivate-account-16-filled"},null,512),[[S,e(g)]])]),t("span",null,n(R.$t("privateFollow")),1)],2)):d("",!0)]),e(h).loggedIn&&e(h).i502p00r0&&e(h).user.id===a.userId?(o(),i("label",{key:0,onClick:w[1]||(w[1]=Q(M=>A(),["prevent"])),for:"hide-following-toggle",class:"inline-flex relative flex-row justify-center items-center cursor-pointer"},[t("input",{id:"hide-following-toggle",type:"checkbox",class:"inline-block align-middle sr-only peer",checked:e(p),disabled:!e(h).i502p00r0},null,8,qa),t("div",{class:F(["w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600",{unclickable:!e(h).i502p00r0},e(h).i502p00r0?" after:top-[4px]":" after:top-[6px]"])},null,2),t("span",Wa,n(R.$t("followings.hideMyFollowings")),1),e(h).i502p00r0?d("",!0):(o(),H(D,{key:0,class:"ml-1"}))])):d("",!0)])]),!a.hide&&!e($)&&!e(f)&&!e(L)?(o(),i("div",Ga,[v(ze,{class:"mt-4",users:e(O),"column-type":3},null,8,["users"]),E(t("div",{class:"mt-4 primary-button",onClick:w[2]||(w[2]=M=>I(!1))},n(R.$t("loadMore")),513),[[S,e(_)]])])):d("",!0),v(ie,{class:"mt-2",loading:e($),empty:e(f),"empty-message":e(y)?R.$t("followings.followingsHidden"):null,"empty-icon":"i-ri-eye-close-fill",error:e(L),fetch:r,"background-color":"theme-color-secondary"},null,8,["loading","empty","empty-message","error"])])}}},Ja=te(Ya,[["__scopeId","data-v-041d6b68"]]);const Ke=a=>(xe("data-v-47230066"),a=a(),Me(),a),Qa=["src"],Za={class:"px-2 pb-4 w-full rounded md:px-6 md:pb-6 theme-color"},Xa={class:"flex-row justify-between hidden-md-flex"},en={class:"mr-6 w-1/5"},tn=["src"],on={class:"hidden flex-row justify-between w-full md:flex md:mt-6"},sn={class:"flex flex-col w-full"},ln={class:"flex flex-row w-full"},an={class:"w-9/12"},nn={class:"text-base font-semibold"},rn={class:"mr-2 italic"},dn={class:"flex flex-row mt-2"},cn={key:0,class:"mr-1"},un={class:"flex flex-row rounded-md border-2 border-color-button-color button-color"},mn={class:"flex flex-row gap-1 p-1 pr-2 button-color"},fn={class:"py-1 px-2 rounded-md theme-color"},pn={class:"float-right w-3/12 text-right"},wn={class:"shadow-md light-button"},vn={class:"leading-4"},hn={key:0,class:"mt-4"},gn=["id","innerHTML"],bn=["id"],_n={class:"flex flex-col text-center md:hidden"},kn=["src"],yn={class:"mt-4 text-base font-semibold"},$n={class:"flex flex-row justify-center mt-4"},xn={key:0,class:"flex flex-row mr-1"},Mn={class:"flex flex-row rounded-md border-2 border-color-secondary"},Cn={class:"flex flex-row gap-1 p-1 pr-2 theme-color-secondary"},In={class:"py-1 px-2 rounded-md"},Ln={key:0,class:"mx-2 mt-4 text-center"},En=["id","innerHTML"],Fn=["id"],An={class:"mt-2"},Pn={class:"flex flex-row gap-x-2 justify-center md:hidden"},Sn={class:"flex flex-row justify-between mt-2 md:mt-6"},Tn={class:"hidden flex-col lg:w-1/5 md:flex"},Bn={class:"profile-navigation_wrapper"},On={class:"hidden-lg-flex"},Rn=Ke(()=>t("span",{class:"hidden-lg-flex"},null,-1)),jn={class:"profile-navigation_wrapper"},Un={class:"hidden-lg-flex"},Vn={class:"hidden-lg-flex"},zn={class:"profile-navigation_wrapper"},Nn={class:"hidden-lg-flex"},Dn={class:"hidden-lg-flex"},Hn={key:0,class:"custom-divider"},Kn={class:"profile-navigation_wrapper"},qn={class:"hidden-lg-flex"},Wn={class:"hidden-lg-flex"},Gn={class:"w-full md:ml-6"},Yn={key:0},Jn={class:"flex flex-row w-full"},Qn={class:"flex flex-row gap-2 justify-between mt-4 w-full"},Zn={class:"w-full md:w-auto"},Xn={class:"inline-block w-full group md:w-52"},ei={class:"flex-1 pr-1"},ti=Ke(()=>t("span",null,[t("svg",{class:"w-4 h-4 transition duration-150 ease-in-out transform fill-current group-hover:-rotate-180",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[t("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1)),oi={id:"profile-artwork-order",class:"absolute z-50 mt-1 w-6/12 text-center rounded-md transition duration-150 ease-in-out transform origin-top scale-0 md:w-52 theme-color group-hover:scale-100"},si={class:"flex flex-row gap-x-2 w-full md:w-auto"},li={class:"mt-2"},ai={key:1},ni={key:2},ii={key:3},ri={key:4},di={key:5},ci={__name:"Profile",props:{id:{type:Number,default:0},userLogon:{type:Boolean,default:!1}},emits:["setMeta"],setup(a,{emit:b}){const h=a,l=ee(),{oApiConfiguration:C,fetchOptions:c}=X(),p=Ie(C,c()),y=be(C,c()),g=ye(C,c()),r=Ae(C,c()),O=Re(),$=Qe(),{o:s}=O.query,L=m(!0),f=s!=null?m(s):m("dashboard"),_=m("artwork"),I=m(0),x=Ue(()=>h.userLogon&&l.loggedIn?l.user.id:h.id),A=m({manageMode:!1,showManageMode:!0});ae(async()=>{await k()});const R=j=>{f.value=j,A.value.manageMode=!1,s!=null&&$.push("/profile")},w=m({}),D=m({feed:0,artwork:0,comic:0,tutorial:0,album:0,collection:0,liked:0,followers:0,followings:0}),M=m({isFollowing:!1,isPrivate:!1,followingSince:""}),k=async()=>{L.value=!0;try{const[j]=await p.getInfo(x.value);if(w.value=j,l.loggedIn&&l.user.id!==x.value){const[he]=await p.isFollowing(x.value);M.value={isFollowing:he.is_following,isPrivate:he.is_private,followingSince:he.following_since}}const[V]=await p.countFeeds(x.value);D.value.feed=V;const[me]=await p.countArtworks(x.value);D.value.artwork=me;const[G]=await p.countFollowers(x.value);D.value.followers=G;const[We]=await p.countFollowings(x.value);D.value.followings=We;const[Ge]=await y.countAlbums(x.value);D.value.album=Ge;const[Ye]=await g.countCollections(x.value);if(D.value.collection=Ye,l.loggedIn&&l.user.id===w.value.id){const[he]=await r.countUserLikedArtworks({userId:x.value});D.value.liked=he}b("setMeta",{title:`(${w.value.username}) ${w.value.name}`})}catch{}L.value=!1},U=m(null),z=m([]),u=j=>{z.value=j},N=()=>{A.value.showManageMode=!1},K=m(null),Y=()=>{J().openModal("album-selection-modal")},ce=m(!1);let we;const ve=()=>{ke().splash(we,ce,"item-added-to-album-alert")},oe=m("latest"),P=m(""),B=async(j,V)=>{oe.value=j,P.value=V,W()},W=()=>{document.getElementById("profile-artwork-order").classList.add("scale-0")},de=m(!0),ue=(j,V,me,G)=>{de.value=!1,Ve().readMore(j,V,me,G)},qe=()=>{w.value.user_socials&&w.value.user_socials.personal_website&&window.open(w.value.user_socials.personal_website,"_blank")};return(j,V)=>{const me=je;return o(),H(et,{"hide-side":!0,"with-footer":!0,"no-right-side":!0},{default:Z(()=>[t("div",null,[t("img",{preload:"",loading:"lazy",src:j.avatarCoverUrl(e(w).cover_bucket,e(w).cover_filename),class:"object-cover object-top w-full h-32 rounded-t md:h-52 lg:h-72 xl:h-96 unselectable",onError:V[0]||(V[0]=(...G)=>j.defaultCoverImage&&j.defaultCoverImage(...G))},null,40,Qa),e(l).loggedIn&&e(l).user.id===e(w).id?(o(),H(me,{key:0,to:"/profile/setting",class:"float-right absolute right-4 mt-2 shadow-md icon-button-primary-color flex-md-hidden"},{default:Z(()=>[v(T,{name:"i-ph-gear-six"})]),_:1})):d("",!0)]),t("div",Za,[t("div",Xa,[t("div",en,[t("img",{preload:"",loading:"lazy",class:"hidden -mt-2 w-full md:-mt-16 avatar md:flex",src:j.avatarCoverUrl(e(w).avatar_bucket,e(w).avatar_filename),onError:V[1]||(V[1]=(...G)=>j.defaultCoverImage&&j.defaultCoverImage(...G))},null,40,tn),e(L)?d("",!0):(o(),H(Be,{key:0,class:"mt-2 hidden-md-flex",userInfo:e(w),followersCount:e(D).followers,followingsCount:e(D).followings,isFollowing:e(M).isFollowing,isPrivate:e(M).isPrivate,followingSince:e(M).followingSince,onChangeCurrentState:R},null,8,["userInfo","followersCount","followingsCount","isFollowing","isPrivate","followingSince"]))]),t("div",on,[t("div",sn,[t("div",ln,[t("div",an,[t("div",null,[t("span",nn,n(e(w).name),1),q("\xA0 "),t("span",rn,"@"+n(e(w).username),1),e(w).is_pro?(o(),H(ne,{key:0})):d("",!0)]),t("div",dn,[e(w).pen_name&&e(w).pen_name!==""?(o(),i("div",cn,[t("span",un,[t("div",mn,[v(T,{name:"i-mdi-fountain-pen-tip"}),q(" "+n(j.$t("profile.penName")),1)]),t("div",fn,n(e(w).pen_name),1)])])):d("",!0)])]),t("div",pn,[e(l).loggedIn&&e(l).user.id===e(w).id?(o(),H(me,{key:0,to:"/profile/setting",class:"float-right -mt-20 shadow-md"},{default:Z(()=>[t("button",wn,[v(T,{name:"i-ph-gear-six"}),t("span",vn,n(j.$t("profile.setting")),1)])]),_:1})):d("",!0)])]),t("div",null,[e(w).bio?(o(),i("p",hn,[t("p",{id:"user-bio-"+e(w).id,innerHTML:e(w).bio.length>300?`${e(w).bio.slice(0,300)}..`:e(w).bio},null,8,gn),e(w).bio.length>300?(o(),i("a",{key:0,id:"user-bio-read-more-"+e(w).id,class:"href",onClick:V[2]||(V[2]=Q(G=>ue(e(w).bio,e(w).id,"user-bio-read-more-","user-bio-"),["prevent"]))},n(j.$t("readMore")),9,bn)):d("",!0)])):d("",!0)]),e(w).user_socials?(o(),H(Te,{key:0,socials:e(w).user_socials},null,8,["socials"])):d("",!0)])])]),t("div",_n,[t("img",{preload:"",loading:"lazy",class:"flex mx-auto -mt-14 w-2/6 sm:-mt-16 sm:w-1/5 avatar md:hidden",src:j.avatarCoverUrl(e(w).avatar_bucket,e(w).avatar_filename),onError:V[3]||(V[3]=(...G)=>j.imageLoadError&&j.imageLoadError(...G))},null,40,kn),t("div",yn,n(e(w).name),1),t("div",null," @"+n(e(w).username),1),t("div",$n,[e(w).pen_name?(o(),i("span",xn,[t("span",Mn,[t("div",Cn,[v(T,{name:"i-mdi-fountain-pen-tip"}),q(" "+n(j.$t("profile.penName")),1)]),t("div",In,n(e(w).pen_name),1)])])):d("",!0)]),e(w).bio?(o(),i("div",Ln,[t("p",{id:"mobile__user-bio-"+e(w).id,innerHTML:e(w).bio.length>150?`${e(w).bio.slice(0,300)}..`:e(w).bio},null,8,En),e(w).bio.length>150?(o(),i("a",{key:0,id:"mobile__user-bio-read-more-"+e(w).id,class:"href",onClick:V[4]||(V[4]=Q(G=>ue(e(w).bio,e(w).id,"mobile__user-bio-read-more-","mobile__user-bio-"),["prevent"]))},n(j.$t("readMore")),9,Fn)):d("",!0)])):d("",!0),e(L)?d("",!0):(o(),H(Be,{key:1,class:"mt-4 mb-2 flex-md-hidden",userInfo:e(w),followersCount:e(D).followers,followingsCount:e(D).followings,isFollowing:e(M).isFollowing,isPrivate:e(M).isPrivate,followingSince:e(M).followingSince,onChangeCurrentState:R},null,8,["userInfo","followersCount","followingsCount","isFollowing","isPrivate","followingSince"]))]),e(w).user_socials?(o(),H(Te,{key:0,class:"mb-6 md:hidden",socials:e(w).user_socials},null,8,["socials"])):d("",!0),t("div",An,[t("div",Pn,[t("div",{class:F(["profile-navigation__mobile theme-color-secondary",{"button-color text-white":e(f)=="dashboard"}]),onClick:V[5]||(V[5]=G=>R("dashboard"))},[t("div",null,[E(v(T,{name:"i-ion-home-outline",class:"text-white"},null,512),[[S,e(f)=="dashboard"]]),E(v(T,{name:"i-ion-home-outline",class:"hover:text-white"},null,512),[[S,e(f)!="dashboard"]])]),t("span",null,n(j.$t("dashboard")),1)],2),t("div",{class:F(["profile-navigation__mobile theme-color-secondary",{"button-color text-white":e(f)=="albums"}]),onClick:V[6]||(V[6]=G=>R("albums"))},[t("div",null,[E(v(T,{name:"i-ion-folder-outline",class:"text-white"},null,512),[[S,e(f)=="albums"]]),E(v(T,{name:"i-ion-folder-outline",class:"hover:text-white"},null,512),[[S,e(f)!="albums"]])]),t("span",null,n(j.$t("albums.albums")),1)],2),t("div",{class:F(["profile-navigation__mobile theme-color-secondary",{"button-color text-white":e(f)=="collections"}]),onClick:V[7]||(V[7]=G=>R("collections"))},[t("div",null,[E(v(T,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[S,e(f)=="collections"]]),E(v(T,{name:"i-majesticons-bookmark-line",class:"hover:text-white"},null,512),[[S,e(f)!="collections"]])]),t("span",null,n(j.$t("collections.collections")),1)],2),e(l).loggedIn&&e(l).user.id===e(w).id?(o(),i("div",{key:0,class:F(["profile-navigation__mobile theme-color-secondary",{"button-color text-white":e(f)=="liked"}]),onClick:V[8]||(V[8]=G=>R("liked"))},[t("div",null,[E(v(T,{name:"i-ri-heart-3-line",class:"text-white"},null,512),[[S,e(f)=="liked"]]),E(v(T,{name:"i-ri-heart-3-line",class:"hover:text-white"},null,512),[[S,e(f)!="liked"]])]),t("span",null,n(j.$t("artworks.liked")),1)],2)):d("",!0)]),t("div",Sn,[t("div",Tn,[t("div",{class:F(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":e(f)==="dashboard"}]),onClick:V[9]||(V[9]=G=>R("dashboard"))},[t("div",Bn,[E(v(T,{name:"i-humbleicons-dashboard",class:"text-white"},null,512),[[S,e(f)==="dashboard"]]),E(v(T,{name:"i-humbleicons-dashboard"},null,512),[[S,e(f)!=="dashboard"]]),t("label",On,n(j.$t("dashboard")),1)]),Rn],2),t("div",{class:F(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":e(f)==="albums"}]),onClick:V[10]||(V[10]=G=>R("albums"))},[t("div",jn,[E(v(T,{name:"i-bx-photo-album",class:"text-white"},null,512),[[S,e(f)==="albums"]]),E(v(T,{name:"i-bx-photo-album"},null,512),[[S,e(f)!=="albums"]]),t("label",Un,n(j.$t("albums.albums")),1)]),t("span",Vn,n(j.thousand(e(D).album)),1)],2),t("div",{class:F(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":e(f)==="collections"}]),onClick:V[11]||(V[11]=G=>R("collections"))},[t("div",zn,[E(v(T,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[S,e(f)==="collections"]]),E(v(T,{name:"i-majesticons-bookmark-line"},null,512),[[S,e(f)!=="collections"]]),t("label",Nn,n(j.$t("collections.collections")),1)]),t("span",Dn,n(j.thousand(e(D).collection)),1)],2),e(l).loggedIn&&e(l).user.id===e(w).id?(o(),i("div",Hn)):d("",!0),e(l).loggedIn&&e(l).user.id===e(w).id?(o(),i("div",{key:1,class:F(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":e(f)==="liked"}]),onClick:V[12]||(V[12]=G=>R("liked"))},[t("div",Kn,[E(v(T,{name:"i-ri-heart-3-line",class:"text-white"},null,512),[[S,e(f)==="liked"]]),E(v(T,{name:"i-ri-heart-3-line"},null,512),[[S,e(f)!=="liked"]]),t("label",qn,n(j.$t("artworks.liked")),1)]),t("span",Wn,n(j.thousand(e(D).liked)),1)],2)):d("",!0)]),t("div",Gn,[e(f)==="dashboard"?(o(),i("div",Yn,[t("div",Jn,[t("div",{class:F(["flex flex-row justify-between w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":e(_)==="feed"}]),onClick:V[13]||(V[13]=G=>_.value="feed")},[q(n(j.$t("feed"))+" ",1),t("span",{class:F(["px-1 ml-2 rounded",e(_)==="feed"?"theme-color":"button-color text-white"])},n(j.thousand(e(D).feed)),3)],2),t("div",{class:F(["flex flex-row justify-between mr-0 w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":e(_)==="artwork"}]),onClick:V[14]||(V[14]=G=>_.value="artwork")},[q(n(j.$t("artworks.artwork"))+" ",1),t("span",{class:F(["px-1 ml-2 rounded",e(_)==="artwork"?"theme-color":"button-color text-white"])},n(j.thousand(e(D).artwork)),3)],2)]),E(t("div",Qn,[t("div",Zn,[t("div",Xn,[t("button",{class:"flex items-center py-2 w-full rounded-md border-2 border-transparent outline-none md:w-52 theme-color-secondary hover:button",onClick:V[15]||(V[15]=G=>j.togglePopularOrderStatus())},[t("span",ei,n(e(oe)==="latest"?j.$t("profile.artworks.sorter.latest"):e(P)),1),ti]),t("ul",oi,[t("li",{class:F([{button:e(oe)==="latest"},{"rounded-b-md":!e(l).loggedIn}]),onClick:V[16]||(V[16]=G=>B("latest",j.$t("profile.artworks.sorter.latest")))},[v(T,{name:"i-material-symbols-fiber-new",class:F({"text-white":e(oe)==="latest"})},null,8,["class"]),q(" Latest ")],2),t("li",{class:F([{button:e(oe)==="popular"},{"rounded-b-md":!e(l).loggedIn}]),onClick:V[17]||(V[17]=G=>B("popular",j.$t("profile.artworks.sorter.popular")))},[v(T,{name:"i-ic-twotone-star",class:F({"text-white":e(oe)==="popular"})},null,8,["class"]),q(" Popular ")],2),t("li",{class:F([{button:e(oe)==="oldest"},{"rounded-b-md":!e(l).loggedIn}]),onClick:V[18]||(V[18]=G=>B("oldest",j.$t("profile.artworks.sorter.oldest")))},[v(T,{name:"i-ic-baseline-update",class:F({"text-white":e(oe)==="oldest"})},null,8,["class"]),q(" Oldest ")],2)])])]),t("div",si,[t("button",{onClick:V[19]||(V[19]=G=>e(A).manageMode=!e(A).manageMode),class:F(["w-full action-button md:w-auto md:mt-0",e(A).manageMode?"danger-button":"secondary-button"])},[v(T,{name:e(A).manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),q(" "+n(e(A).manageMode?j.$t("quit"):j.$t("manage")),1)],2),E(t("button",{onClick:V[20]||(V[20]=G=>Y()),class:"w-full primary-button md:w-auto"},[v(T,{name:"i-ion-add-outline"}),q(" "+n(j.$t("albums.addToAlbum")),1)],512),[[S,e(A).manageMode]])])],512),[[S,!e(L)&&e(l).loggedIn&&e(l).user.id===e(w).id&&e(_)==="artwork"&&e(A).showManageMode]]),v(ie,{class:"mt-2",loading:e(L),"background-color":"theme-color-secondary"},null,8,["loading"]),E(t("div",{class:"p-2 mt-2 text-black bg-yellow-200 rounded-md"},n(j.$t("profile.manageModeActiveMessage")),513),[[S,e(A).manageMode]]),t("div",li,[e(_)==="feed"?(o(),H(lo,{key:0,ref:"feedListRef","user-id":e(w).id},null,8,["user-id"])):d("",!0),!e(L)&&e(_)==="artwork"?(o(),H(ro,{ref_key:"artworkListRef",ref:U,key:e(I),"user-id":e(w).id,"manage-mode":e(A).manageMode,"sort-by":e(oe),onFeedSelectedItems:u,onOnEmpty:N},null,8,["user-id","manage-mode","sort-by"])):d("",!0)])])):d("",!0),e(f)==="albums"?(o(),i("div",ai,[e(L)?d("",!0):(o(),H(Ws,{key:0,"user-id":e(w).id},null,8,["user-id"]))])):d("",!0),e(f)==="collections"?(o(),i("div",ni,[e(L)?d("",!0):(o(),H(Ea,{key:0,"user-id":e(w).id},null,8,["user-id"]))])):d("",!0),e(l).loggedIn&&e(l).user.id===e(w).id&&e(f)==="liked"?(o(),i("div",ii,[e(L)?d("",!0):(o(),H(Sa,{key:0,"user-id":e(w).id,onOnEmpty:N},null,8,["user-id"]))])):d("",!0),e(f)==="followerList"?(o(),i("div",ri,[e(L)?d("",!0):(o(),H(Va,{key:0,"user-id":e(w).id,hide:e(l).loggedIn?e(w).id!==e(l).user.id:e(w).is_pro&&!!e(w).user_settings.hide_follower_list,"user-hide-follower-list-status":!!e(w).user_settings.hide_follower_list},null,8,["user-id","hide","user-hide-follower-list-status"]))])):d("",!0),e(f)==="followingList"?(o(),i("div",di,[e(L)?d("",!0):(o(),H(Ja,{key:0,"user-id":e(w).id,hide:e(l).loggedIn?e(w).id!==e(l).user.id:e(w).is_pro&&!!e(w).user_settings.hide_following_list,"user-hide-following-list-status":!!e(w).user_settings.hide_following_list},null,8,["user-id","hide","user-hide-following-list-status"]))])):d("",!0)])])])]),e(w).user_socials&&e(w).user_socials.personal_website?(o(),H(fe,{key:0,id:"external-website-visit-confirmation-modal",class:"modal","modal-id":"external-website-visit-confirmation-modal",message:"<div>You are going to visit this website, are you sure?</div><div class='text-center w-full italic href mt-4 rounded-md p-2 rounded-md theme-color-secondary'>"+e(w).user_socials.personal_website+"</div>",onOnAccept:qe},null,8,["message"])):d("",!0),e(L)?d("",!0):(o(),H(Xe,{key:1,id:"album-selection-modal",ref_key:"albumSelectionModalRef",ref:K,class:"modal","work-ids":e(z),onAddedToAlbum:ve},null,8,["work-ids"])),E(v(_e,{id:"item-added-to-album-alert",text:j.$t("albums.itemAdded")},null,8,["text"]),[[S,e(ce)]])]),_:1})}}},$i=te(ci,[["__scopeId","data-v-47230066"]]);export{$i as P};
