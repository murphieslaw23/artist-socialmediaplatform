import{k as T,a as D,j as W,I as K,m as j,r as h,a2 as Q,o as d,p as _,q as t,s as k,t as a,e as b,w as U,b as m,v as y,u as e,K as B,F as H,T as J,x,c as L,G as X,y as Z,M as P,N as Y,l as ee,Y as te,P as se,Q as oe}from"./entry.15cb71bb.js";import{u as z}from"./client-only.407c3fea.js";import{L as re}from"./Layout.69b2e7d1.js";import{v as ae}from"./vue3-editor.common.e68427ef.js";import{S as N}from"./Spinner.cb390d69.js";import{_ as q}from"./_plugin-vue_export-helper.a1a6add7.js";const E=l=>(P("data-v-56701733"),l=l(),Y(),l),le={class:"mb-4 text-base font-bold"},ie={class:"text-xs italic font-bold href"},ne={class:"alert-success"},ce={class:"italic"},de={class:"flex flex-row p-2 mb-6 text-white rounded-md button-color"},ue=["onSubmit"],pe={class:"input-block"},he=["placeholder"],_e={class:"-mt-2 input-block"},fe={class:"input-block"},ge={key:0,class:"input-block"},me={for:"is-original-character-toggle",class:"inline-flex relative items-center cursor-pointer"},ve=["checked"],we=E(()=>t("div",{class:"toggle peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 peer-checked:bg-blue-600"},null,-1)),ke={class:"ml-2"},ye={key:1,class:"input-block"},be={for:"is-allow-redraw-toggle",class:"inline-flex relative items-center cursor-pointer"},xe=["checked"],$e=E(()=>t("div",{class:"toggle peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 peer-checked:bg-blue-600"},null,-1)),Ie={class:"ml-2"},Ce={key:2,class:"input-block"},Se={for:"is-redraw-in-your-style-toggle",class:"inline-flex relative items-center cursor-pointer"},Re=["checked"],Ee=E(()=>t("div",{class:"toggle peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 peer-checked:bg-blue-600"},null,-1)),Ae={class:"ml-2"},Ve={class:"input-block"},Me={for:"explicit-mode-toggle",class:"inline-flex relative items-center cursor-pointer"},Fe=["checked"],Oe=E(()=>t("div",{class:"toggle peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 peer-checked:bg-blue-600"},null,-1)),Be={class:"ml-2"},Ue={class:"flex flex-row"},Ne={__name:"UpdateForm",props:{id:{type:String,default:""}},setup(l){const v=l,A=T(),{$router:I}=D(),{oApiConfiguration:C,fetchOptions:V}=W(),S=z(C,V()),M=K().public.apiUrl;j(()=>{A.loggedIn||I.push("/"),u()});const i=h(!1),f=h({}),u=async()=>{const[o,r]=await S.getWorkById(v.id);r?i.value=!0:(f.value=o,s.value.title=o.title,s.value.description=o.description.split("<br><br>").join(` 
`).split("<br>").join(""),s.value.isExplicit=!!o.is_explicit,s.value.isOriginalCharacter=!!o.is_original_character,s.value.isAllowRedraw=!!o.allow_redraw,s.value.isRedrawInMyStyle=!!o.redraw_in_your_style,o.artwork_has_tags.forEach(w=>{c.value.push({key:w.artwork_tags.id,value:w.artwork_tags.tag})}))},s=h({title:"",description:"",tags:"",isExplicit:!1,isOriginalCharacter:!1,isAllowRedraw:!1,isRedrawInMyStyle:!1}),c=h([]),p=h(!1),g=h(!1),F=h(!1),G=async()=>{const o=[];c.value.forEach(r=>{o.push(r.value)}),p.value=!0,g.value=!1;try{const r=[];c.value.forEach(n=>{r.push(n.value)});const[w,O]=await S.updateInfo({id:v.id,title:s.value.title,description:s.value.description,isExplicit:s.value.isExplicit,tags:r.toString(),isOriginalCharacter:s.value.isOriginalCharacter,allowRedraw:s.value.allowRedraw,redrawInYourStyle:s.value.isRedrawInMyStyle});O?F.value=!0:(g.value=!0,setTimeout(()=>{I.push(`/a/${v.id}`)},1e3))}catch{F.value=!0}p.value=!1};return(o,r)=>{const w=Z,O=Q("tags-input");return d(),_("div",null,[t("div",le,[k(a(o.$t("artworks.update.form.title"))+" ",1),t("span",ie,[b(w,{to:"/a/"+l.id},{default:U(()=>[k(" (ID: "+a(l.id)+") ",1)]),_:1},8,["to"])])]),m(t("div",{class:"alert-danger"},a(o.$t("artworks.update.form.fetchFailure")),513),[[y,e(i)]]),m(t("div",ne,[k(a(o.$t("artworks.update.form.updated"))+" ",1),t("span",ce,a(o.$t("artworks.update.form.successRedirect")),1)],512),[[y,e(g)]]),m(t("div",de,[b(N,{class:"mr-1"}),k(" "+a(o.$t("saving")),1)],512),[[y,e(p)]]),m(t("div",{class:"alert-danger"},a(o.$t("artworks.add.form.uploadFailure")),513),[[y,e(F)]]),m(t("form",{enctype:"multipart/form-data",onSubmit:X(G,["prevent"])},[t("div",pe,[m(t("input",{"onUpdate:modelValue":r[0]||(r[0]=n=>e(s).title=n),type:"text",class:B(["form-input input",{"pointer-events-none cursor-not-allowed":e(p)||e(g)}]),placeholder:o.$t("title")},null,10,he),[[H,e(s).title]])]),t("div",_e,[b(e(ae.exports.VueEditor),{modelValue:e(s).description,"onUpdate:modelValue":r[1]||(r[1]=n=>e(s).description=n),editorToolbar:[[{size:["normal","large"]}],["bold","italic","underline","strike"],["link"],[{color:[]},{background:[]}],["clean"]],class:B([{"pointer-events-none cursor-not-allowed":e(p)||e(g)}]),placeholder:o.$t("description")},null,8,["modelValue","class","placeholder"])]),t("div",fe,[b(O,{modelValue:e(c),"onUpdate:modelValue":r[2]||(r[2]=n=>J(c)?c.value=n:null),placeholder:o.$t("tagsInputPlaceholder"),typeahead:!0,"typeahead-style":"dropdown","typeahead-activation-threshold":2,"typeahead-show-on-focus":!0,"typeahead-hide-discard":!0,"typeahead-url":e(M)+"/artworks/tags/search?keyword=:search","add-tags-on-comma":!0},null,8,["modelValue","placeholder","typeahead-url"])]),e(f).redraw_of?x("",!0):(d(),_("div",ge,[t("label",me,[t("input",{onClick:r[3]||(r[3]=n=>e(s).isOriginalCharacter=!e(s).isOriginalCharacter),id:"is-original-character-toggle",type:"checkbox",class:"sr-only peer",checked:e(s).isOriginalCharacter},null,8,ve),we,t("span",ke,a(o.$t("artworks.originalCharacter")),1)])])),e(f).redraw_of?x("",!0):(d(),_("div",ye,[t("label",be,[t("input",{onClick:r[4]||(r[4]=n=>e(s).isAllowRedraw=!e(s).isAllowRedraw),id:"is-allow-redraw-toggle",type:"checkbox",class:"sr-only peer",checked:e(s).isAllowRedraw},null,8,xe),$e,t("span",Ie,a(o.$t("artworks.add.form.allowRedraw")),1)])])),e(f).redraw_of?(d(),_("div",Ce,[t("label",Se,[t("input",{onClick:r[5]||(r[5]=n=>e(s).isRedrawInMyStyle=!e(s).isRedrawInMyStyle),id:"is-redraw-in-your-style-toggle",type:"checkbox",class:"sr-only peer",checked:e(s).isRedrawInMyStyle},null,8,Re),Ee,t("span",Ae,a(o.$t("artworks.add.form.redrawInMyStyle")),1)])])):x("",!0),t("div",Ve,[t("label",Me,[t("input",{onClick:r[6]||(r[6]=n=>e(s).isExplicit=!e(s).isExplicit),id:"explicit-mode-toggle",type:"checkbox",class:"sr-only peer",checked:e(s).isExplicit},null,8,Fe),Oe,t("span",Be,a(o.$t("explicitContent")),1)])]),t("button",{class:B(["float-right primary-button",{"pointer-events-none cursor-not-allowed":e(p)||e(g)}])},[t("div",Ue,[e(p)?(d(),L(N,{key:0,class:"mr-1"})):x("",!0),k(" "+a(e(p)?o.$t("saving"):o.$t("save")),1)])],2)],40,ue),[[y,!e(i)]])])}}},Te=q(Ne,[["__scopeId","data-v-56701733"]]);const $=l=>(P("data-v-88c4c5cc"),l=l(),Y(),l),De=$(()=>t("h1",{class:"mb-3 text-base font-bold"},"Current Info",-1)),We={class:"mt-2"},je=$(()=>t("label",{class:"italic font-medium text-color-secondary"},"Title",-1)),Le={class:"mt-2"},Pe=$(()=>t("label",{class:"italic font-medium text-color-secondary"},"Explicit",-1)),Ye={key:0,class:"mt-2"},ze=$(()=>t("label",{class:"italic font-medium text-color-secondary"},"Tags",-1)),qe={class:"tags"},Ge={class:"mt-2"},Ke=$(()=>t("label",{class:"italic font-medium text-color-secondary"},"Publish Date",-1)),Qe={__name:"[id]",setup(l){const v=T(),{oApiConfiguration:A,fetchOptions:I}=W(),C=z(A,I()),{$router:V}=D(),S=ee(),{id:R}=V.currentRoute.value.params;te(async()=>{await M()}),j(()=>{f()});const M=async()=>{const[u,s]=await C.getWorkById(R);(u.user_id!==v.user.id||s)&&S.push({path:"/"})},i=h({}),f=async()=>{try{const[u,s]=await C.getWorkById(R);s||(i.value=u)}catch{}};return(u,s)=>(d(),L(re,{"with-footer":!0,"h-screen":!0},{"right-side":U(()=>[De,t("div",We,[je,t("p",null,a(e(i).title),1)]),t("div",Le,[Pe,t("p",null,a(e(i).is_explicit?"Yes":"No"),1)]),e(i).artwork_has_tags&&e(i).artwork_has_tags.length?(d(),_("div",Ye,[ze,t("div",qe,[(d(!0),_(se,null,oe(e(i).artwork_has_tags,c=>(d(),_("span",{key:c.artwork_tags.id,class:"tag"},a(c.artwork_tags.tag),1))),128))])])):x("",!0),t("div",Ge,[Ke,t("p",null,a(u.formatDate(e(i).scheduled_post)),1)])]),default:U(()=>[b(e(Te),{id:e(R)},null,8,["id"])]),_:1}))}},st=q(Qe,[["__scopeId","data-v-88c4c5cc"]]);export{st as default};
