import{B as ft,h as J,i as G,R as H,O as vt,o as b,p as R,q as n,e as _,w as z,s as T,t as g,b as P,v as L,x as I,L as U,G as $e,K as Y,P as ye,Q as xe,y as Pe,j as B,r as $,m as Oe,J as et,c as ee,u as e,k as at,Y as gt,T as De,F as Ve,H as X,D as tt,M as yt,N as bt,I as kt,Z as _t,$ as es,a as ts,E as ss,a0 as mt,a1 as as,a2 as os,a3 as rs}from"./entry.15cb71bb.js";import{u as He,J as ns,_ as ls}from"./client-only.407c3fea.js";import{u as xt}from"./useReport.6a600d64.js";import{W as ot,u as Ct}from"./WorkList.d666493b.js";import{_ as be}from"./_plugin-vue_export-helper.a1a6add7.js";import{_ as Ee}from"./LoadingEmptyErrorMessage.31b597d2.js";import{S as je}from"./Spinner.cb390d69.js";import{U as Fe}from"./user-counters-api.e38b184e.js";import{u as is}from"./useSetting.56adc0e9.js";import{u as cs}from"./useFeed.a800ee91.js";const me=function(i){return{addWorkToAlbum:async(s,a={})=>{const o="/albums/add-work",t=new URL(o,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"POST",...r,...a},u={},p={};u["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const f in p)d.set(f,p[f]);for(const f in a.params)d.set(f,a.params[f]);t.search=new URLSearchParams(d).toString();let w=r&&r.headers?r.headers:{};l.headers={...u,...w,...a.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}},countUserAlbumsByType:async(s,a={})=>{const o="/albums/count",t=new URL(o,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"POST",...r,...a},u={},p={};u["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const f in p)d.set(f,p[f]);for(const f in a.params)d.set(f,a.params[f]);t.search=new URLSearchParams(d).toString();let w=r&&r.headers?r.headers:{};l.headers={...u,...w,...a.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}},createAlbum:async(s,a={})=>{const o="/albums/create",t=new URL(o,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"POST",...r,...a},u={},p={};u["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const f in p)d.set(f,p[f]);for(const f in a.params)d.set(f,a.params[f]);t.search=new URLSearchParams(d).toString();let w=r&&r.headers?r.headers:{};l.headers={...u,...w,...a.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}},deleteAlbum:async(s,a={})=>{if(s==null)throw new H("id","Required parameter id was null or undefined when calling deleteAlbum.");const o="/albums/{id}".replace("{id}",encodeURIComponent(String(s))),t=new URL(o,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"DELETE",...r,...a},u={},p={},d=new URLSearchParams(t.search);for(const y in p)d.set(y,p[y]);for(const y in a.params)d.set(y,a.params[y]);t.search=new URLSearchParams(d).toString();let w=r&&r.headers?r.headers:{};return l.headers={...u,...w,...a.headers},{url:t.pathname+t.search+t.hash,options:l}},getAlbumById:async(s,a={})=>{if(s==null)throw new H("id","Required parameter id was null or undefined when calling getAlbumById.");const o="/albums/{id}".replace("{id}",encodeURIComponent(String(s))),t=new URL(o,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"GET",...r,...a},u={},p={},d=new URLSearchParams(t.search);for(const y in p)d.set(y,p[y]);for(const y in a.params)d.set(y,a.params[y]);t.search=new URLSearchParams(d).toString();let w=r&&r.headers?r.headers:{};return l.headers={...u,...w,...a.headers},{url:t.pathname+t.search+t.hash,options:l}},getAlbumItems:async(s,a,o,t={})=>{if(s==null)throw new H("id","Required parameter id was null or undefined when calling getAlbumItems.");if(a==null)throw new H("perPage","Required parameter perPage was null or undefined when calling getAlbumItems.");if(o==null)throw new H("page","Required parameter page was null or undefined when calling getAlbumItems.");const r="/albums/list/{id}".replace("{id}",encodeURIComponent(String(s))),l=new URL(r,"https://example.com");let u;i&&(u=i.baseOptions);const p={method:"GET",...u,...t},d={},w={};a!==void 0&&(w.per_page=a),o!==void 0&&(w.page=o);const y=new URLSearchParams(l.search);for(const k in w)y.set(k,w[k]);for(const k in t.params)y.set(k,t.params[k]);l.search=new URLSearchParams(y).toString();let f=u&&u.headers?u.headers:{};return p.headers={...d,...f,...t.headers},{url:l.pathname+l.search+l.hash,options:p}},getCurrentAlbumSaveInfo:async(s,a,o={})=>{if(s==null)throw new H("type","Required parameter type was null or undefined when calling getCurrentAlbumSaveInfo.");if(a==null)throw new H("workId","Required parameter workId was null or undefined when calling getCurrentAlbumSaveInfo.");const t="/albums/current/{type}/{work_id}".replace("{type}",encodeURIComponent(String(s))).replace("{work_id}",encodeURIComponent(String(a))),r=new URL(t,"https://example.com");let l;i&&(l=i.baseOptions);const u={method:"GET",...l,...o},p={},d={},w=new URLSearchParams(r.search);for(const f in d)w.set(f,d[f]);for(const f in o.params)w.set(f,o.params[f]);r.search=new URLSearchParams(w).toString();let y=l&&l.headers?l.headers:{};return u.headers={...p,...y,...o.headers},{url:r.pathname+r.search+r.hash,options:u}},listUserAlbums:async(s,a,o,t,r={})=>{if(s==null)throw new H("userId","Required parameter userId was null or undefined when calling listUserAlbums.");if(a==null)throw new H("perPage","Required parameter perPage was null or undefined when calling listUserAlbums.");if(o==null)throw new H("page","Required parameter page was null or undefined when calling listUserAlbums.");if(t==null)throw new H("type","Required parameter type was null or undefined when calling listUserAlbums.");const l="/albums/user/{userId}".replace("{userId}",encodeURIComponent(String(s))),u=new URL(l,"https://example.com");let p;i&&(p=i.baseOptions);const d={method:"GET",...p,...r},w={},y={};a!==void 0&&(y.per_page=a),o!==void 0&&(y.page=o),t!==void 0&&(y.type=t);const f=new URLSearchParams(u.search);for(const h in y)f.set(h,y[h]);for(const h in r.params)f.set(h,r.params[h]);u.search=new URLSearchParams(f).toString();let k=p&&p.headers?p.headers:{};return d.headers={...w,...k,...r.headers},{url:u.pathname+u.search+u.hash,options:d}},proLimitIsCanCreateAlbum:async(s,a={})=>{const o="/albums/create/permission",t=new URL(o,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"POST",...r,...a},u={},p={};u["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const f in p)d.set(f,p[f]);for(const f in a.params)d.set(f,a.params[f]);t.search=new URLSearchParams(d).toString();let w=r&&r.headers?r.headers:{};l.headers={...u,...w,...a.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}},removeWorkFromAlbum:async(s,a={})=>{const o="/albums/work/remove",t=new URL(o,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"DELETE",...r,...a},u={},p={};u["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const f in p)d.set(f,p[f]);for(const f in a.params)d.set(f,a.params[f]);t.search=new URLSearchParams(d).toString();let w=r&&r.headers?r.headers:{};l.headers={...u,...w,...a.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}},updateAlbum:async(s,a={})=>{const o="/albums",t=new URL(o,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"PATCH",...r,...a},u={},p={};u["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const f in p)d.set(f,p[f]);for(const f in a.params)d.set(f,a.params[f]);t.search=new URLSearchParams(d).toString();let w=r&&r.headers?r.headers:{};l.headers={...u,...w,...a.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}}}},pe=function(i){return{async addWorkToAlbum(s,a){const o=await me(i).addWorkToAlbum(s,a);return(t=J,r=G)=>{const l={...o.options,url:r+o.url};return t.request(l)}},async countUserAlbumsByType(s,a){const o=await me(i).countUserAlbumsByType(s,a);return(t=J,r=G)=>{const l={...o.options,url:r+o.url};return t.request(l)}},async createAlbum(s,a){const o=await me(i).createAlbum(s,a);return(t=J,r=G)=>{const l={...o.options,url:r+o.url};return t.request(l)}},async deleteAlbum(s,a){const o=await me(i).deleteAlbum(s,a);return(t=J,r=G)=>{const l={...o.options,url:r+o.url};return t.request(l)}},async getAlbumById(s,a){const o=await me(i).getAlbumById(s,a);return(t=J,r=G)=>{const l={...o.options,url:r+o.url};return t.request(l)}},async getAlbumItems(s,a,o,t){const r=await me(i).getAlbumItems(s,a,o,t);return(l=J,u=G)=>{const p={...r.options,url:u+r.url};return l.request(p)}},async getCurrentAlbumSaveInfo(s,a,o){const t=await me(i).getCurrentAlbumSaveInfo(s,a,o);return(r=J,l=G)=>{const u={...t.options,url:l+t.url};return r.request(u)}},async listUserAlbums(s,a,o,t,r){const l=await me(i).listUserAlbums(s,a,o,t,r);return(u=J,p=G)=>{const d={...l.options,url:p+l.url};return u.request(d)}},async proLimitIsCanCreateAlbum(s,a){const o=await me(i).proLimitIsCanCreateAlbum(s,a);return(t=J,r=G)=>{const l={...o.options,url:r+o.url};return t.request(l)}},async removeWorkFromAlbum(s,a){const o=await me(i).removeWorkFromAlbum(s,a);return(t=J,r=G)=>{const l={...o.options,url:r+o.url};return t.request(l)}},async updateAlbum(s,a){const o=await me(i).updateAlbum(s,a);return(t=J,r=G)=>{const l={...o.options,url:r+o.url};return t.request(l)}}}};class fe extends ft{async addWorkToAlbum(s,a){return pe(this.configuration).addWorkToAlbum(s,a).then(o=>o(this.axios,this.basePath))}async countUserAlbumsByType(s,a){return pe(this.configuration).countUserAlbumsByType(s,a).then(o=>o(this.axios,this.basePath))}async createAlbum(s,a){return pe(this.configuration).createAlbum(s,a).then(o=>o(this.axios,this.basePath))}async deleteAlbum(s,a){return pe(this.configuration).deleteAlbum(s,a).then(o=>o(this.axios,this.basePath))}async getAlbumById(s,a){return pe(this.configuration).getAlbumById(s,a).then(o=>o(this.axios,this.basePath))}async getAlbumItems(s,a,o,t){return pe(this.configuration).getAlbumItems(s,a,o,t).then(r=>r(this.axios,this.basePath))}async getCurrentAlbumSaveInfo(s,a,o){return pe(this.configuration).getCurrentAlbumSaveInfo(s,a,o).then(t=>t(this.axios,this.basePath))}async listUserAlbums(s,a,o,t,r){return pe(this.configuration).listUserAlbums(s,a,o,t,r).then(l=>l(this.axios,this.basePath))}async proLimitIsCanCreateAlbum(s,a){return pe(this.configuration).proLimitIsCanCreateAlbum(s,a).then(o=>o(this.axios,this.basePath))}async removeWorkFromAlbum(s,a){return pe(this.configuration).removeWorkFromAlbum(s,a).then(o=>o(this.axios,this.basePath))}async updateAlbum(s,a){return pe(this.configuration).updateAlbum(s,a).then(o=>o(this.axios,this.basePath))}}const ie=function(i){return{addItemForLater:async(s,a,o={})=>{if(s==null)throw new H("type","Required parameter type was null or undefined when calling addItemForLater.");const t="/collections/later",r=new URL(t,"https://example.com");let l;i&&(l=i.baseOptions);const u={method:"POST",...l,...o},p={},d={};s!==void 0&&(d.type=s),p["Content-Type"]="application/json";const w=new URLSearchParams(r.search);for(const k in d)w.set(k,d[k]);for(const k in o.params)w.set(k,o.params[k]);r.search=new URLSearchParams(w).toString();let y=l&&l.headers?l.headers:{};u.headers={...p,...y,...o.headers};const f=typeof a!="string"||u.headers["Content-Type"]==="application/json";return u.data=f?JSON.stringify(a!==void 0?a:{}):a||"",{url:r.pathname+r.search+r.hash,options:u}},addItemToCollection:async(s,a,o,t={})=>{if(s==null)throw new H("type","Required parameter type was null or undefined when calling addItemToCollection.");if(a==null)throw new H("collectionId","Required parameter collectionId was null or undefined when calling addItemToCollection.");const r="/collections/{collectionId}/items".replace("{collectionId}",encodeURIComponent(String(a))),l=new URL(r,"https://example.com");let u;i&&(u=i.baseOptions);const p={method:"POST",...u,...t},d={},w={};s!==void 0&&(w.type=s),d["Content-Type"]="application/json";const y=new URLSearchParams(l.search);for(const h in w)y.set(h,w[h]);for(const h in t.params)y.set(h,t.params[h]);l.search=new URLSearchParams(y).toString();let f=u&&u.headers?u.headers:{};p.headers={...d,...f,...t.headers};const k=typeof o!="string"||p.headers["Content-Type"]==="application/json";return p.data=k?JSON.stringify(o!==void 0?o:{}):o||"",{url:l.pathname+l.search+l.hash,options:p}},collectionsIdDelete:async(s,a={})=>{if(s==null)throw new H("id","Required parameter id was null or undefined when calling collectionsIdDelete.");const o="/collections/{id}".replace("{id}",encodeURIComponent(String(s))),t=new URL(o,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"DELETE",...r,...a},u={},p={},d=new URLSearchParams(t.search);for(const y in p)d.set(y,p[y]);for(const y in a.params)d.set(y,a.params[y]);t.search=new URLSearchParams(d).toString();let w=r&&r.headers?r.headers:{};return l.headers={...u,...w,...a.headers},{url:t.pathname+t.search+t.hash,options:l}},countUserCollectionsByType:async(s,a={})=>{const o="/collections/count",t=new URL(o,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"POST",...r,...a},u={},p={};u["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const f in p)d.set(f,p[f]);for(const f in a.params)d.set(f,a.params[f]);t.search=new URLSearchParams(d).toString();let w=r&&r.headers?r.headers:{};l.headers={...u,...w,...a.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}},create:async(s,a={})=>{const o="/collections/create",t=new URL(o,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"POST",...r,...a},u={},p={};u["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const f in p)d.set(f,p[f]);for(const f in a.params)d.set(f,a.params[f]);t.search=new URLSearchParams(d).toString();let w=r&&r.headers?r.headers:{};l.headers={...u,...w,...a.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}},detail:async(s,a={})=>{if(s==null)throw new H("id","Required parameter id was null or undefined when calling detail.");const o="/collections/{id}".replace("{id}",encodeURIComponent(String(s))),t=new URL(o,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"GET",...r,...a},u={},p={},d=new URLSearchParams(t.search);for(const y in p)d.set(y,p[y]);for(const y in a.params)d.set(y,a.params[y]);t.search=new URLSearchParams(d).toString();let w=r&&r.headers?r.headers:{};return l.headers={...u,...w,...a.headers},{url:t.pathname+t.search+t.hash,options:l}},getCurrentSaveInfo:async(s,a,o={})=>{if(s==null)throw new H("type","Required parameter type was null or undefined when calling getCurrentSaveInfo.");if(a==null)throw new H("workId","Required parameter workId was null or undefined when calling getCurrentSaveInfo.");const t="/collections/current/{type}/{work_id}".replace("{type}",encodeURIComponent(String(s))).replace("{work_id}",encodeURIComponent(String(a))),r=new URL(t,"https://example.com");let l;i&&(l=i.baseOptions);const u={method:"GET",...l,...o},p={},d={},w=new URLSearchParams(r.search);for(const f in d)w.set(f,d[f]);for(const f in o.params)w.set(f,o.params[f]);r.search=new URLSearchParams(w).toString();let y=l&&l.headers?l.headers:{};return u.headers={...p,...y,...o.headers},{url:r.pathname+r.search+r.hash,options:u}},listCollectionItems:async(s,a,o,t={})=>{if(s==null)throw new H("id","Required parameter id was null or undefined when calling listCollectionItems.");if(a==null)throw new H("perPage","Required parameter perPage was null or undefined when calling listCollectionItems.");if(o==null)throw new H("page","Required parameter page was null or undefined when calling listCollectionItems.");const r="/collections/{id}/items".replace("{id}",encodeURIComponent(String(s))),l=new URL(r,"https://example.com");let u;i&&(u=i.baseOptions);const p={method:"GET",...u,...t},d={},w={};a!==void 0&&(w.per_page=a),o!==void 0&&(w.page=o);const y=new URLSearchParams(l.search);for(const k in w)y.set(k,w[k]);for(const k in t.params)y.set(k,t.params[k]);l.search=new URLSearchParams(y).toString();let f=u&&u.headers?u.headers:{};return p.headers={...d,...f,...t.headers},{url:l.pathname+l.search+l.hash,options:p}},listUserCollections:async(s,a,o,t,r,l={})=>{if(s==null)throw new H("userId","Required parameter userId was null or undefined when calling listUserCollections.");if(a==null)throw new H("type","Required parameter type was null or undefined when calling listUserCollections.");if(o==null)throw new H("page","Required parameter page was null or undefined when calling listUserCollections.");if(t==null)throw new H("perPage","Required parameter perPage was null or undefined when calling listUserCollections.");const u="/collections/user/{userId}".replace("{userId}",encodeURIComponent(String(s))),p=new URL(u,"https://example.com");let d;i&&(d=i.baseOptions);const w={method:"GET",...d,...l},y={},f={};a!==void 0&&(f.type=a),r!==void 0&&(f.name=r),o!==void 0&&(f.page=o),t!==void 0&&(f.per_page=t);const k=new URLSearchParams(p.search);for(const v in f)k.set(v,f[v]);for(const v in l.params)k.set(v,l.params[v]);p.search=new URLSearchParams(k).toString();let h=d&&d.headers?d.headers:{};return w.headers={...y,...h,...l.headers},{url:p.pathname+p.search+p.hash,options:w}},proLimitIsCanCreateCollection:async(s,a={})=>{const o="/collections/create/permission",t=new URL(o,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"POST",...r,...a},u={},p={};u["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const f in p)d.set(f,p[f]);for(const f in a.params)d.set(f,a.params[f]);t.search=new URLSearchParams(d).toString();let w=r&&r.headers?r.headers:{};l.headers={...u,...w,...a.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}},removeItemFromCollection:async(s,a,o,t={})=>{if(s==null)throw new H("type","Required parameter type was null or undefined when calling removeItemFromCollection.");if(a==null)throw new H("collectionId","Required parameter collectionId was null or undefined when calling removeItemFromCollection.");const r="/collections/{collectionId}/items".replace("{collectionId}",encodeURIComponent(String(a))),l=new URL(r,"https://example.com");let u;i&&(u=i.baseOptions);const p={method:"DELETE",...u,...t},d={},w={};s!==void 0&&(w.type=s),d["Content-Type"]="application/json";const y=new URLSearchParams(l.search);for(const h in w)y.set(h,w[h]);for(const h in t.params)y.set(h,t.params[h]);l.search=new URLSearchParams(y).toString();let f=u&&u.headers?u.headers:{};p.headers={...d,...f,...t.headers};const k=typeof o!="string"||p.headers["Content-Type"]==="application/json";return p.data=k?JSON.stringify(o!==void 0?o:{}):o||"",{url:l.pathname+l.search+l.hash,options:p}},updateCollection:async(s,a={})=>{const o="/collections",t=new URL(o,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"PATCH",...r,...a},u={},p={};u["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const f in p)d.set(f,p[f]);for(const f in a.params)d.set(f,a.params[f]);t.search=new URLSearchParams(d).toString();let w=r&&r.headers?r.headers:{};l.headers={...u,...w,...a.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}}}},ce=function(i){return{async addItemForLater(s,a,o){const t=await ie(i).addItemForLater(s,a,o);return(r=J,l=G)=>{const u={...t.options,url:l+t.url};return r.request(u)}},async addItemToCollection(s,a,o,t){const r=await ie(i).addItemToCollection(s,a,o,t);return(l=J,u=G)=>{const p={...r.options,url:u+r.url};return l.request(p)}},async collectionsIdDelete(s,a){const o=await ie(i).collectionsIdDelete(s,a);return(t=J,r=G)=>{const l={...o.options,url:r+o.url};return t.request(l)}},async countUserCollectionsByType(s,a){const o=await ie(i).countUserCollectionsByType(s,a);return(t=J,r=G)=>{const l={...o.options,url:r+o.url};return t.request(l)}},async create(s,a){const o=await ie(i).create(s,a);return(t=J,r=G)=>{const l={...o.options,url:r+o.url};return t.request(l)}},async detail(s,a){const o=await ie(i).detail(s,a);return(t=J,r=G)=>{const l={...o.options,url:r+o.url};return t.request(l)}},async getCurrentSaveInfo(s,a,o){const t=await ie(i).getCurrentSaveInfo(s,a,o);return(r=J,l=G)=>{const u={...t.options,url:l+t.url};return r.request(u)}},async listCollectionItems(s,a,o,t){const r=await ie(i).listCollectionItems(s,a,o,t);return(l=J,u=G)=>{const p={...r.options,url:u+r.url};return l.request(p)}},async listUserCollections(s,a,o,t,r,l){const u=await ie(i).listUserCollections(s,a,o,t,r,l);return(p=J,d=G)=>{const w={...u.options,url:d+u.url};return p.request(w)}},async proLimitIsCanCreateCollection(s,a){const o=await ie(i).proLimitIsCanCreateCollection(s,a);return(t=J,r=G)=>{const l={...o.options,url:r+o.url};return t.request(l)}},async removeItemFromCollection(s,a,o,t){const r=await ie(i).removeItemFromCollection(s,a,o,t);return(l=J,u=G)=>{const p={...r.options,url:u+r.url};return l.request(p)}},async updateCollection(s,a){const o=await ie(i).updateCollection(s,a);return(t=J,r=G)=>{const l={...o.options,url:r+o.url};return t.request(l)}}}};class ve extends ft{async addItemForLater(s,a,o){return ce(this.configuration).addItemForLater(s,a,o).then(t=>t(this.axios,this.basePath))}async addItemToCollection(s,a,o,t){return ce(this.configuration).addItemToCollection(s,a,o,t).then(r=>r(this.axios,this.basePath))}async collectionsIdDelete(s,a){return ce(this.configuration).collectionsIdDelete(s,a).then(o=>o(this.axios,this.basePath))}async countUserCollectionsByType(s,a){return ce(this.configuration).countUserCollectionsByType(s,a).then(o=>o(this.axios,this.basePath))}async create(s,a){return ce(this.configuration).create(s,a).then(o=>o(this.axios,this.basePath))}async detail(s,a){return ce(this.configuration).detail(s,a).then(o=>o(this.axios,this.basePath))}async getCurrentSaveInfo(s,a,o){return ce(this.configuration).getCurrentSaveInfo(s,a,o).then(t=>t(this.axios,this.basePath))}async listCollectionItems(s,a,o,t){return ce(this.configuration).listCollectionItems(s,a,o,t).then(r=>r(this.axios,this.basePath))}async listUserCollections(s,a,o,t,r,l){return ce(this.configuration).listUserCollections(s,a,o,t,r,l).then(u=>u(this.axios,this.basePath))}async proLimitIsCanCreateCollection(s,a){return ce(this.configuration).proLimitIsCanCreateCollection(s,a).then(o=>o(this.axios,this.basePath))}async removeItemFromCollection(s,a,o,t){return ce(this.configuration).removeItemFromCollection(s,a,o,t).then(r=>r(this.axios,this.basePath))}async updateCollection(s,a){return ce(this.configuration).updateCollection(s,a).then(o=>o(this.axios,this.basePath))}}function pt(){return{animate:a=>{const o=document.getElementById(a);o==null||o.classList.add("animate-bounce"),setInterval(()=>{o==null||o.classList.remove("animate-bounce")},2500)}}}function rt(){const i=(a,o,t)=>{o.value=!1,clearTimeout(a),o.value=!0,a=setTimeout(()=>{o.value=!1,s(t)},2e3)},s=a=>{const o=document.getElementById(a);o==null||o.classList.add("fade"),o==null||o.classList.add("fade-out")};return{splash:i,hide:s}}function ds(){return{readMore:(s,a,o,t)=>{const r=document.getElementById(`${t}${a}`);r!==null&&(r.innerHTML=s);const l=document.getElementById(`${o}${a}`);l==null||l.remove()}}}const us={class:"flex-col info"},ms={key:0,class:"user-info"},ps={class:"flex flex-row w-full"},hs=["src"],ws={class:"w-full name"},fs={class:"flex flex-row justify-between"},vs={class:"flex flex-col"},gs={key:1,class:"flex flex-row mb-4"},ys={class:"mb-2 section-title"},bs={key:2,class:"mb-4"},ks=["id","innerHTML"],_s=["id"],xs={class:"mb-4"},Cs={key:3,class:"tags"},Rs={__name:"ModalViewInfo",props:{section:{type:String,default:""},isModal:{type:Boolean,default:!1},artworkDetail:{type:Object,default:()=>{}},previewMode:{type:Boolean,default:!1},isDesktop:{type:Boolean,default:!1}},setup(i){vt();const s=(a,o,t,r)=>{ds().readMore(a,o,t,r)};return(a,o)=>{const t=Pe;return b(),R("section",us,[i.artworkDetail.users?(b(),R("div",ms,[n("div",ps,[_(t,{to:"/profile/"+i.artworkDetail.users.username},{default:z(()=>[n("img",{class:"avatar",src:a.avatarCoverUrl(i.artworkDetail.users.avatar_bucket,i.artworkDetail.users.avatar_filename),onError:o[0]||(o[0]=(...r)=>a.imageLoadError&&a.imageLoadError(...r))},null,40,hs)]),_:1},8,["to"]),n("div",ws,[n("div",fs,[n("div",vs,[_(t,{to:"/profile/"+i.artworkDetail.users.username,class:"fullname"},{default:z(()=>[T(g(i.artworkDetail.users.name),1)]),_:1},8,["to"]),_(t,{to:"/profile/"+i.artworkDetail.users.username,class:"username"},{default:z(()=>[T(" @"+g(i.artworkDetail.users.username),1)]),_:1},8,["to"])]),P(n("div",{class:"p-1 h-7 font-bold rounded-md border-2 cursor-pointer hover:shadow-md border-color-primary",style:{"font-size":"10px"},onClick:o[1]||(o[1]=r=>a.closeModal(i.section+"-modal"))}," ESC ",512),[[L,i.isModal]])])])])])):I("",!0),i.artworkDetail.is_original_character?(b(),R("div",gs,[_(U,{name:"i-clarity-cursor-hand-click-line"}),T("\xA0 "+g(a.$t("artworks.originalCharacter")),1)])):I("",!0),n("div",ys,g(i.artworkDetail.title),1),i.artworkDetail.description?(b(),R("div",bs,[n("span",{id:"mview-"+i.isDesktop+"-description-"+i.artworkDetail.id,innerHTML:i.artworkDetail.description.length>300?`${i.artworkDetail.description.slice(0,300)}...`:i.artworkDetail.description},null,8,ks),i.artworkDetail.description.length>300?(b(),R("a",{key:0,id:"mview-"+i.isDesktop+"-read-more-"+i.artworkDetail.id,class:"href",onClick:o[2]||(o[2]=$e(r=>s(i.artworkDetail.description,i.artworkDetail.id,"mview-"+i.isDesktop+"-read-more-","mview-"+i.isDesktop+"-description-"),["prevent"]))},g(a.$t("readMore")),9,_s)):I("",!0)])):I("",!0),n("div",xs,[n("span",{class:Y(["italic text-color-secondary",{"font-bold text-red-400":i.previewMode}])},g(i.previewMode?a.$t("willBePublishedOn"):a.$t("publishedOn")),3),T(" "+g(a.formatDate(i.artworkDetail.scheduled_post)),1)]),i.artworkDetail.artwork_has_tags&&i.artworkDetail.artwork_has_tags.length?(b(),R("div",Cs,[(b(!0),R(ye,null,xe(i.artworkDetail.artwork_has_tags,r=>(b(),R("span",{key:r.artwork_tags.id,class:"tag"},[_(t,{to:"/works/browse?tags="+r.artwork_tags.tag.replaceAll(" ","+")},{default:z(()=>[T(g(r.artwork_tags.tag),1)]),_:2},1032,["to"])]))),128))])):I("",!0)])}}},ht=be(Rs,[["__scopeId","data-v-f2529c21"]]);const $s={class:"artist-works"},As={class:"heading"},Is={key:0,class:"pagination-controller"},Ss={__name:"ArtistWorks",props:{artworkDetail:{type:Object,default(){return{}}},keepArtistPageNumber:{type:Boolean,default:!1},view:Function,isHref:{type:Boolean,default:!1},paginationPerPage:{type:Number,default:4}},setup(i){const s=i,a=s.artworkDetail,{oApiConfiguration:o,fetchOptions:t}=B(),r=He(o,t()),l=$(null);Oe(()=>{s.keepArtistPageNumber||(d.page=-1),w(a.users.id)});const u=$(!0),p=$([]),d=et({page:0,perPage:s.paginationPerPage,options:{nextPrevLoading:!1,disableArtistNextButton:!0,disableArtistPrevButton:!0}}),w=async(k,h)=>{u.value=!0,d.options.nextPrevLoading=!0,k!==l.value&&(l.value=k,d.page=-1),h==="prev"?d.page-=1:d.page+=1;const[v,x,O]=await r.getUserArtworks({userId:k,pagination:{page:d.page,perPage:d.perPage}});O?(u.value=!1,f()):(x.next_previous.prev_page===null||x.next_previous.prev_page===void 0?d.options.disableArtistPrevButton=!0:d.options.disableArtistPrevButton=!1,x.next_previous.next_page===null||x.next_previous.next_page===void 0?d.options.disableArtistNextButton=!0:d.options.disableArtistNextButton=!1,p.value=v),d.options.nextPrevLoading=!1,u.value=!1},y=$(!1),f=()=>{y.value=!0};return(k,h)=>{const v=Pe;return b(),R("div",$s,[n("div",As,[n("span",null,[T(g(k.$t("artworks.moreArtworkBy"))+" ",1),i.artworkDetail.users?(b(),ee(v,{key:0,to:"/profile/"+i.artworkDetail.users.username,class:"text-colored"},{default:z(()=>[T(g(i.artworkDetail.users.username)+" <"+g(i.artworkDetail.users.name)+"> ",1)]),_:1},8,["to"])):I("",!0)]),_(v,{to:"/profile/"+i.artworkDetail.users.username,target:"_blank",class:"flex flex-row cursor-pointer"},{default:z(()=>[_(U,{name:"i-ci-external-link"})]),_:1},8,["to"])]),_(Ee,{loading:e(u),error:e(y),class:"mt-2"},null,8,["loading","error"]),P(_(ot,{class:Y(["gap-2 md:gap-4",[e(d).options.nextPrevLoading?"animate-pulse":"",i.paginationPerPage===6?"grid-cols-6":"grid-cols-4"]]),"section-class":"works",works:e(p),view:i.view,"is-href":i.isHref,"is-mini-list":!0,"current-work-id":i.artworkDetail.id},null,8,["class","works","view","is-href","current-work-id"]),[[L,!e(u)&&!e(y)]]),i.artworkDetail.users?P((b(),R("div",Is,[n("span",{onClick:h[0]||(h[0]=x=>e(d).options.disableArtistPrevButton?null:w(i.artworkDetail.users.id,"prev"))},[_(U,{name:"i-ion-chevron-back"})]),n("span",{onClick:h[1]||(h[1]=x=>e(d).options.disableArtistNextButton?null:w(i.artworkDetail.users.id,"next"))},[_(U,{name:"i-ion-chevron-forward"})])],512)),[[L,!e(u)]]):I("",!0)])}}},wt=be(Ss,[["__scopeId","data-v-d964edff"]]),Ps={};function Ls(i,s){const a=Pe;return b(),ee(a,{to:"/pro",class:"inline-block py-1 px-2 font-bold text-black align-middle bg-yellow-200 rounded-md text-xxs hover:text-black"},{default:z(()=>[T(" PRO ")]),_:1})}const st=be(Ps,[["render",Ls]]);const Us={class:"splash"},Vs={class:"flex flex-row"},Os={__name:"SplashAlert",props:{text:{type:String,default:""},icon:{type:String,default:"checkmark-outline"}},setup(i){return(s,a)=>(b(),R("div",Us,[n("div",Vs,[_(U,{name:i.icon,class:"mr-2 text-base"},null,8,["name"]),n("span",null,g(i.text),1)])]))}},nt=be(Os,[["__scopeId","data-v-2ed398ff"]]);function Es(i,s){return{proCanCreateCollection:async h=>{try{const{data:v}=await new ve(i).proLimitIsCanCreateCollection({type:h.type},s);return[v.data.is_can_create,null]}catch(v){return[null,B().consumeReadableStreamError(v)]}},createCollection:async(h,v)=>{try{const{data:x}=await new ve(i).create({name:v.title,description:v.description,is_public:v.isPublic?1:0,type:h},s);return[x.success,x.data,null]}catch(x){return[null,null,B().consumeReadableStreamError(x)]}},getInfo:async h=>{try{return[(await new ve(i).detail(h,s)).data,null]}catch(v){return[null,B().consumeReadableStreamError(v)]}},countCollections:async h=>{try{const{data:v}=await new Fe(i).countUserCollections(h,s);return[v.data.total,null]}catch(v){return[null,B().consumeReadableStreamError(v)]}},countArtworkCollections:async h=>{try{const{data:v}=await new Fe(i).countUserArtworkCollections(h,s);return[v.data.total,null]}catch(v){return[null,B().consumeReadableStreamError(v)]}},fetchCollections:async h=>{try{const{data:v}=await new ve(i).listUserCollections(h.userId,h.type,h.pagination.page,h.pagination.perPage,h.name,s),x=v.data.collections,O=v.data.pagination;let V=!0;return O.current_page===O.total_page&&(V=!1),[x,V,null]}catch(v){return[null,!1,B().consumeReadableStreamError(v)]}},listCollectionItems:async h=>{try{const{data:v}=await new ve(i).listCollectionItems(h.collectionId,h.pagination.perPage,h.pagination.page,s),x=v.data.pagination;let O=!0;return x.current_page===x.total_page&&(O=!1),[v.data.items,O,null]}catch(v){return[null,!1,B().consumeReadableStreamError(v)]}},getCurrentSaveInfo:async(h,v)=>{try{const{data:x}=await new ve(i).getCurrentSaveInfo(h,v,s);return[x.data,null]}catch(x){return[null,B().consumeReadableStreamError(x)]}},addItem:async h=>{try{return await new ve(i).addItemToCollection(h.type,h.collectionId,{id:h.workId},s),[!0,null]}catch(v){return[null,B().consumeReadableStreamError(v)]}},removeItem:async h=>{try{const{data:v}=await new ve(i).removeItemFromCollection(h.type,h.collectionId,{id:h.workId},s);return[v.success,null]}catch(v){return[null,B().consumeReadableStreamError(v)]}},update:async h=>{try{const{data:v}=await new ve(i).updateCollection({id:h.id,name:h.name,description:h.description,is_public:h.isPublic},s);return[v.success,null]}catch(v){return[null,B().consumeReadableStreamError(v)]}},deleteCollection:async h=>{try{const{data:v}=await new ve(i).collectionsIdDelete(h,s);return[v.success,null]}catch(v){return[null,B().consumeReadableStreamError(v)]}}}}const Ts={class:"w-full modal-layer xl:w-3/12 lg:w-2/5"},qs={class:"flex flex-row justify-between w-full"},Ms={class:"title"},Bs={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},js={class:"list"},Ds={class:"overflow-y-scroll pr-2 max-h-60"},Fs=["onClick"],Hs={class:"flex flex-row justify-between"},Ns={class:"flex flex-row"},zs={key:0,class:"flex flex-row mt-2 w-full"},Qs={class:"leading-6"},Ws={class:"flex float-right flex-row gap-2 mt-4"},Js=["placeholder"],Gs={class:"flex flex-row justify-between mt-2"},Ys={__name:"ManageSave",props:{modalId:{type:String,default:"collection-selection-modal"},workId:{type:Number,default:0}},emits:["save"],setup(i,{expose:s,emit:a}){const o=i,t=at(),{oApiConfiguration:r,fetchOptions:l}=B(),u=Es(r,l());gt(()=>{d()}),Oe(()=>{h(),x()});const p=$(!1),d=async()=>{if(t.i502p00r0)p.value=!0;else{const[E,q]=await u.proCanCreateCollection({type:"artwork"});q?p.value=!1:p.value=E}},w=$({pagination:{page:0,perPage:10},loading:!1}),y=$(!1),f=$(!1),k=$([]),h=async(E=!1)=>{await d(),k.value=[],E||(w.value.loading=!0);const[q,M,ke]=await u.fetchCollections({userId:t.user.id,type:"artwork",pagination:{page:w.value.pagination.page,perPage:w.value.pagination.perPage}});w.value.loading=!1,ke&&(y.value=!0),ke||(q&&q.length>0?(M?(w.value.pagination.page+=1,O.value=!0):O.value=!1,q.forEach(_e=>{k.value.push(_e)})):f.value=!0)},v=$([]),x=async()=>{y.value=!1,v.value=[],Z.value=[],Q.value=[],await setTimeout(async()=>{const[E,q]=await u.getCurrentSaveInfo("artwork",o.workId);if(q)y.value=!0;else for(const M of E)Z.value.push(M.collection_id),v.value.push(M.collection_id)},300)},O=$(!0),V=async()=>{await h({isLoadMore:!0}),await x()},Z=$([]),Q=$([]),ae=E=>{if(Z.value.includes(E)){Q.value.push(E);const q=Z.value.indexOf(E);Z.value.splice(q,1)}else if(Z.value.push(E),Q.value.includes(E)){const q=Q.value.indexOf(E);Q.value.splice(q,1)}},C=async()=>{try{for(const q of Z.value)await u.addItem({collectionId:q,type:"artwork",workId:o.workId});if(Q.value.length)for(const q of Q.value)await u.removeItem({collectionId:q,type:"artwork",workId:o.workId});let E=!1;Z.value.length===0&&v.value.length===Q.value.length&&(E=!0),await x(),X().closeModal(o.modalId),a("save",E)}catch{}},W=$(""),ne=$(!1),ge=async()=>{ne.value=!1;const[E,q,M]=await u.createCollection("artwork",{title:W.value,isPublic:1,description:""});E?(k.value=[],K(),w.value.pagination.page=0,await h(),await x(),await d(),W.value="",N()):ne.value=!0},de=$(!1);let he;const N=()=>{de.value=!0,rt().splash(he,de,"collection-created-alert")},K=()=>{Z.value=[]},F=()=>{X().closeModal(o.modalId),K()};return s({fetchCollection:h,fetchCurrentSaved:x}),(E,q)=>(b(),R("div",null,[n("div",Ts,[n("div",null,[n("div",qs,[n("span",Ms,g(E.$t("collections.addItem.form.title")),1),n("div",Bs,[n("div",{class:"modal-close",onClick:q[0]||(q[0]=M=>F())},[_(U,{name:"i-majesticons-close",class:"text-2xl"})])])]),P(n("div",js,[n("div",Ds,[(b(!0),R(ye,null,xe(e(k),(M,ke)=>(b(),R("div",{key:M.id,class:Y(["item",{"mt-2":ke!==0},e(Z).includes(M.id)?"button-color text-white":"theme-color-secondary",M.is_can_add_more?"cursor-pointer":"cursor-not-allowed"]),onClick:_e=>M.is_can_add_more?ae(M.id):null},[n("div",Hs,[n("span",null,g(M.name),1),n("div",Ns,[n("span",{class:Y(["ml-2 font-bold",e(Z).includes(M.id)?"text-white":"text-colored"])},g(M._count.collection_has_artworks),3)])]),M.is_can_add_more?I("",!0):(b(),R("div",zs,[_(st,{class:"mr-1"}),n("p",Qs,g(E.$t("collections.maxItemLimitReached")),1)]))],10,Fs))),128))]),P(n("div",{class:"mt-2 primary-button",onClick:q[1]||(q[1]=M=>V())},[_(U,{name:"chevron-down-outline",class:"mr-2"}),T(" "+g(E.$t("loadMore")),1)],512),[[L,e(O)]]),n("div",Ws,[n("button",{class:"cancel-button",onClick:q[2]||(q[2]=M=>F())},g(E.$t("cancel")),1),n("button",{class:"primary-button",onClick:q[3]||(q[3]=M=>C())},g(E.$t("save")),1)])],512),[[L,!e(w).loading&&!e(y)&&!e(f)]]),P(n("div",null,[P(n("input",{"onUpdate:modelValue":q[4]||(q[4]=M=>De(W)?W.value=M:null),type:"text",class:Y(["mt-4 mb-0 form-input theme-color-secondary",{"border border-red-400":e(ne)}]),placeholder:E.$t("collections.createNewCollection")},null,10,Js),[[Ve,e(W)]]),n("div",Gs,[n("div",null,[P(n("span",{class:"font-bold text-red-400 transition-all duration-200 ease-in-out"},g(E.$t("collections.failedToCreateCollection")),513),[[L,e(ne)]])]),P(n("button",{class:"flex flex-row primary-button",onClick:q[5]||(q[5]=M=>e(p)?ge():null)},[n("span",{class:Y({"leading-6":!e(p)})},g(E.$t("create")),3),e(p)?I("",!0):(b(),ee(st,{key:0,class:"ml-1"}))],512),[[L,e(W)&&e(W).length>0]])])],512),[[L,!e(w).loading&&!e(y)&&!e(f)]])]),_(Ee,{loading:e(w).loading,empty:e(f),error:e(y),fetch:h},null,8,["loading","empty","error"])]),P(_(nt,{id:"collection-created-alert",text:E.$t("collections.collectionCreated"),icon:"i-bi-check-all"},null,8,["text"]),[[L,e(de)]])]))}},Ks=be(Ys,[["__scopeId","data-v-7569d44f"]]);function Zs(i,s){return{proCanCreateAlbum:async h=>{try{const{data:v}=await new fe(i).proLimitIsCanCreateAlbum({type:h.type},s);return[v.data.is_can_create,null]}catch(v){return[null,B().consumeReadableStreamError(v)]}},createAlbum:async(h,v)=>{try{const{data:x}=await new fe(i).createAlbum({name:v.title,description:v.description,is_public:v.isPublic?1:0,type:h},s);return[x.success,x.data,null]}catch(x){return[null,null,B().consumeReadableStreamError(x)]}},getInfo:async h=>{try{return[(await new fe(i).getAlbumById(h,s)).data,null]}catch(v){return[null,B().consumeReadableStreamError(v)]}},countAlbums:async h=>{try{const{data:v}=await new Fe(i).countUserAlbums(h,s);return[v.data.total,null]}catch(v){return[null,B().consumeReadableStreamError(v)]}},countArtworkAlbums:async h=>{try{const{data:v}=await new Fe(i).countUserArtworkAlbums(h,s);return[v.data.total,null]}catch(v){return[null,B().consumeReadableStreamError(v)]}},fetchAlbums:async(h,v,x,O)=>{try{const{data:V}=await new fe(i).listUserAlbums(h,x,O,v,s),Z=V.data.pagination;let Q=!0;return Z.current_page===Z.total_page&&(Q=!1),[V.data.albums,Q,null]}catch(V){return[null,!1,B().consumeReadableStreamError(V)]}},listAlbumItems:async h=>{try{const{data:v}=await new fe(i).getAlbumItems(h.albumId,h.pagination.perPage,h.pagination.page,s),x=v.data.pagination;let O=!0;return x.current_page===x.total_page&&(O=!1),[v.data.works,O,null]}catch(v){return[null,!1,B().consumeReadableStreamError(v)]}},getCurrentSaveInfo:async(h,v)=>{try{const{data:x}=await new fe(i).getCurrentAlbumSaveInfo(h,v,s);return[x.data,null]}catch(x){return[null,B().consumeReadableStreamError(x)]}},addItems:async h=>{try{for(const v of h.albumIds)await new fe(i).addWorkToAlbum({album_id:v,type:h.type,work_ids:h.workIds},s);return[!0,null]}catch(v){return[null,B().consumeReadableStreamError(v)]}},removeItems:async(h,v)=>{try{const{data:x}=await new fe(i).removeWorkFromAlbum({album_id:h,work_ids:v},s);return[x.success,null]}catch(x){return[null,B().consumeReadableStreamError(x)]}},update:async h=>{try{const{data:v}=await new fe(i).updateAlbum({id:h.id,name:h.name,description:h.description,is_public:h.isPublic},s);return[v.success,null]}catch(v){return[null,B().consumeReadableStreamError(v)]}},deleteAlbum:async h=>{try{const{data:v}=await new fe(i).deleteAlbum(h,s);return[v.success,null]}catch(v){return[null,B().consumeReadableStreamError(v)]}}}}const Xs={class:"w-full modal-layer xl:w-3/12 lg:w-2/5"},ea={class:"flex flex-row justify-between w-full"},ta={class:"title"},sa={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},aa={class:"list"},oa={class:"overflow-y-scroll pr-2 max-h-60"},ra=["onClick"],na={class:"flex flex-row justify-between"},la={key:0,class:"flex flex-row mt-2 w-full"},ia={class:"leading-6"},ca={class:"flex float-right flex-row gap-2 mt-4"},da={__name:"ManageAlbum",props:{modalId:{type:String,default:"album-selection-modal"},workId:{type:Number,default:0},workIds:{type:Array,default:()=>[]}},emits:["addedToAlbum"],setup(i,{expose:s,emit:a}){const o=i,t=at(),{oApiConfiguration:r,fetchOptions:l}=B(),u=Zs(r,l()),p=is(r,l());gt(async()=>{await w()}),Oe(()=>{O(),o.workIds.length||Q()});const d=$(999),w=async()=>{const N=await p.getSetting("max_free_album_items");d.value=N},y=async()=>{f.value=[],k.value.pagination.page=0,V(),await O()},f=$([]),k=$({pagination:{perPage:10,page:0,firstLoad:10},showLoadMore:!0}),h=$(!0),v=$(!1),x=$(!1),O=async()=>{V(),h.value=!0;const[N,K,F]=await u.fetchAlbums(t.user.id,"artwork",k.value.pagination.page===0?k.value.pagination.firstLoad:k.value.pagination.perPage,k.value.pagination.page);F&&(v.value=!0),N.length?(K?(k.value.pagination.page+=1,k.value.showLoadMore=!0):k.value.showLoadMore=!1,N.forEach(E=>{f.value.push(E)})):x.value=!0,h.value=!1},V=()=>{x.value=!1,v.value=!1},Z=$([]),Q=async()=>{Z.value=[],C.value=[],W.value=[];const[N,K]=await u.getCurrentSaveInfo("artwork",o.workId);for(const F of N)C.value.push(F.album_id),Z.value.push(F.album_id)},ae=async()=>{await O(),await Q()},C=$([]),W=$([]),ne=N=>{if(C.value.includes(N)){W.value.push(N);const K=C.value.indexOf(N);C.value.splice(K,1)}else if(C.value.push(N),W.value.includes(N)){const K=W.value.indexOf(N);W.value.splice(K,1)}},ge=async()=>{const[N,K]=await u.addItems({albumIds:C.value,type:"artwork",workIds:o.workIds.length?o.workIds:[o.workId]});if(!o.workIds.length&&W.value.length)for(const F of W.value)await u.removeItems(F,[o.workId]);if(N){let F=!1;o.workIds.length||C.value.length===0&&Z.value.length===W.value.length&&(F=!0),de(),X().closeModal(o.modalId),a("addedToAlbum",o.workIds.length?!0:F)}},de=()=>{C.value=[]},he=()=>{X().closeModal(o.modalId),de()};return s({fetchCurrentSaved:Q,fetchAlbums:O}),(N,K)=>(b(),R("div",null,[n("div",Xs,[n("div",null,[n("div",ea,[n("span",ta,g(N.$t("albums.selectAlbums")),1),n("div",sa,[n("div",{class:"modal-close",onClick:K[0]||(K[0]=F=>he())},[_(U,{name:"close",class:"text-2xl"})])])]),n("div",aa,[P(n("div",null,[n("div",oa,[(b(!0),R(ye,null,xe(e(f),(F,E)=>(b(),R("div",{key:F.id,class:Y(["item",{"mt-2":E!==0},e(C).includes(F.id)?"button-color text-white":"theme-color-secondary",F.is_can_add_more?"cursor-pointer":"cursor-not-allowed"]),onClick:q=>F.is_can_add_more?ne(F.id):null},[n("div",na,[n("span",null,g(F.name),1),n("span",{class:Y(["ml-2 font-bold",e(C).includes(F.id)?"text-white":"text-colored"])},g(F._count.album_has_artworks),3)]),!F.is_can_add_more||!e(t).i502p00r0&&F._count.album_has_artworks+o.workIds.length>e(d)?(b(),R("div",la,[_(st,{class:"mr-1"}),n("p",ia,g(N.$t("albums.maxItemLimitReached")),1)])):I("",!0)],10,ra))),128))]),P(n("div",{class:"mt-2 primary-button",onClick:K[1]||(K[1]=F=>ae())}," Load More ",512),[[L,e(k).showLoadMore]]),n("div",ca,[n("button",{class:"cancel-button",onClick:K[2]||(K[2]=F=>he())},g(N.$t("cancel")),1),n("button",{class:"primary-button",onClick:K[3]||(K[3]=F=>ge())},g(N.$t("save")),1)])],512),[[L,!e(h)&&!e(x)&&!e(v)]])])]),_(Ee,{loading:e(h),empty:e(x),error:e(v),fetch:y},null,8,["loading","empty","error"])])]))}},ua=be(da,[["__scopeId","data-v-80a89092"]]),ma={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},pa=["innerHTML"],ha={class:"flex flex-row justify-end gap-2"},wa={__name:"ConfirmationDialog",props:{modalId:{type:String,default:"confirmation-dialog-modal"},message:{type:String,default:"Are you sure?"},onAccept:{type:Function,default:()=>{}}},emits:"onAccept",setup(i,{emit:s}){const a=i,o=t=>{t&&s("onAccept",!0),X().closeModal(a.modalId)};return(t,r)=>(b(),R("div",null,[n("div",ma,[n("p",{innerHTML:i.message,class:"mb-4"},null,8,pa),n("div",ha,[n("button",{class:"cancel-button",onClick:r[0]||(r[0]=l=>o(!1))},g(t.$t("no")),1),n("button",{class:"danger-button",onClick:r[1]||(r[1]=l=>o(!0))},g(t.$t("yes")),1)])])]))}};const Rt=i=>(yt("data-v-78557f0a"),i=i(),bt(),i),fa={class:"opt-modal modal-layer"},va={class:"opt-modal__title"},ga={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},ya={class:"opt-modal__content"},ba={class:"report"},ka={class:"report__reason_opt"},_a={class:"report__title"},xa=["onClick"],Ca={class:"report__title"},Ra=["placeholder"],$a={class:"report__buttons"},Aa={class:"text-justify"},Ia={class:"mt-2"},Sa=Rt(()=>n("i",null,"Your report ID:",-1)),Pa=Rt(()=>n("i",null,"Report date:",-1)),La={__name:"ReportModal",props:{type:{type:String,default:""},postId:{type:Number,default:0},reportStatus:{type:Object,default:()=>{}}},setup(i){const s=i,{oApiConfiguration:a,fetchOptions:o}=B(),t=xt(a,o()),r=$(["stolen","spam","hateSpeech","harassment","falseInfo","suicide","graphic","terrorism","aiGeneratedArt","somethingElse"]),l=$({selectedReasons:[],reasonDescription:"",enableSubmit:tt(()=>l.value.selectedReasons.length>0&&l.value.reasonDescription!=="")}),u=k=>{if(!l.value.selectedReasons.includes(k))l.value.selectedReasons.push(k);else{const h=l.value.selectedReasons.indexOf(k);l.value.selectedReasons.splice(h,1)}},p=$(!1),d=$({}),w=async()=>{p.value=!1,d.value={};const[k,h,v]=await t.createNewReport({type:s.type,postId:s.postId,reasons:l.value.selectedReasons.join(","),description:l.value.reasonDescription});v&&!k||(p.value=!0,d.value=h)},y=()=>{X().closeModal("report-modal"),f()},f=()=>{l.value.selectedReasons=[],l.value.reasonDescription="",p.value=!1};return(k,h)=>{const v=Pe;return b(),R("div",null,[n("div",fa,[n("div",va,[n("h1",null,g(e(p)?k.$t("reports.reportSubmitted"):i.reportStatus.id?k.$t("reports.alreadyReported"):k.$t("reports.title")),1),n("div",ga,[n("div",{class:"modal-close",onClick:h[0]||(h[0]=x=>y())},[_(U,{name:"i-ion-close",class:"text-2xl"})])])]),n("div",ya,[P(n("div",ba,[n("div",ka,[n("div",_a,g(k.$t("reports.selectReasons")),1),(b(!0),R(ye,null,xe(e(r),x=>(b(),R("span",{key:x,class:Y([e(l).selectedReasons.includes(x)?"button-color":"theme-color-secondary"]),onClick:O=>u(x)},[n("div",null,[P(_(U,{name:"i-ion-square-outline",class:"text-color-secondary"},null,512),[[L,!e(l).selectedReasons.includes(x)]]),P(_(U,{name:"i-ion-checkbox-outline",class:"text-green-300"},null,512),[[L,e(l).selectedReasons.includes(x)]])]),n("div",{class:Y(["reason",[e(l).selectedReasons.includes(x)?"text-white":"text-color-secondary"]])},g(k.$t("reports.reasons."+x)),3)],10,xa))),128))]),n("div",null,[n("div",Ca,g(k.$t("reports.describeReason")),1),P(n("textarea",{"onUpdate:modelValue":h[1]||(h[1]=x=>e(l).reasonDescription=x),class:"report__reason_description",placeholder:k.$t("reports.describeText"),cols:"5",rows:"5"},null,8,Ra),[[Ve,e(l).reasonDescription]])]),n("div",$a,[n("button",{class:"cancel-button",onClick:h[2]||(h[2]=x=>y())},g(k.$t("cancel")),1),n("button",{class:Y(e(l).enableSubmit?"primary-button":"disabled-button"),onClick:h[3]||(h[3]=x=>e(l).enableSubmit?w():null)},g(k.$t("report")),3)])],512),[[L,!e(p)&&!i.reportStatus.id]]),P(n("div",null,[n("div",Aa,g(k.$t("reports.reportSubmittedMessage")),1),n("div",Ia,[n("div",null,[Sa,T("\xA0 "),n("b",null,"#"+g(e(d).id),1)]),n("div",null,[Pa,T("\xA0 "),n("b",null,g(k.formatDate(e(d).created_at)),1)])])],512),[[L,e(p)]]),P(n("div",null,[T(g(k.$t("reports.alreadyReportedDescription"))+" ",1),_(v,{class:"underline href",to:"/reports"},{default:z(()=>[T(g(k.$t("reports.reportStatus")),1)]),_:1})],512),[[L,i.reportStatus.id]])])])])}}},Ua=be(La,[["__scopeId","data-v-78557f0a"]]),Va={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Oa={class:"title"},Ea={class:"mt-2"},Ta={class:"alert-success"},qa={class:"italic"},Ma={class:"flex flex-row p-2 mb-2 text-white rounded-md button-color"},Ba=["placeholder"],ja={class:"flex flex-row gap-2 justify-end"},Da={class:"flex flex-row justify-between mt-6"},Fa=["value"],Ha={__name:"ShareArtworkToFeedModal",props:{postId:{type:Number,default:0}},setup(i){const s=i,{oApiConfiguration:a,fetchOptions:o}=B(),t=cs(a,o()),r=kt(),l=()=>{p.value=""},u=()=>{d.value=!1,w.value=!1,y.value=!1,X().closeModal("share-to-feed-modal"),l()},p=$(""),d=$(!1),w=$(!1),y=$(!1),f=async()=>{d.value=!1,w.value=!0,y.value=!1;const[x,O,V]=await t.shareArtworkToFeed({text:p.value,workId:s.postId});x?(y.value=!0,setTimeout(()=>{u()},500)):d.value=!0,w.value=!1},k=$(!1);let h;const v=x=>{const O=$(x),{copy:V}=Ct({source:O});V(),rt().splash(h,k,"copy-alert")};return(x,O)=>(b(),R("div",null,[n("div",Va,[n("span",Oa,g(x.$t("feeds.share.artwork.title")),1),n("div",Ea,[P(n("div",Ta,[n("span",qa,g(x.$t("feeds.share.artwork.success")),1)],512),[[L,e(y)]]),P(n("div",Ma,[_(je,{class:"mr-2"}),T(" "+g(x.$t("feeds.form.postingYourUpdate")),1)],512),[[L,e(w)]]),P(n("div",{class:"alert-danger"},g(x.$t("feeds.form.postFailure")),513),[[L,e(d)]]),P(n("textarea",{"onUpdate:modelValue":O[0]||(O[0]=V=>De(p)?p.value=V:null),class:"input form-input textarea",placeholder:x.$t("typeSomething"),cols:"30",rows:"2","data-gramm":"false",maxlength:"2000"},null,8,Ba),[[Ve,e(p)]]),n("div",ja,[n("button",{class:"cancel-button",onClick:O[1]||(O[1]=V=>u())},g(x.$t("cancel")),1),n("button",{class:Y(["primary-button"]),onClick:O[2]||(O[2]=V=>f())},g(x.$t("share")),1)]),n("div",Da,[n("input",{readonly:"",value:e(r).public.appUrl+"/a/"+s.postId,class:"p-3 w-full rounded-md theme-color-secondary"},null,8,Fa),n("button",{class:"icon-button",onClick:O[3]||(O[3]=V=>v(e(r).public.appUrl+"/a/"+i.postId))},[_(U,{name:"i-icon-park-outline-copy"})])])])]),P(_(nt,{id:"copy-alert",text:x.$t("linkCopied"),icon:"i-bi-check-all"},null,8,["text"]),[[L,e(k)]])]))}},Na={class:"w-full modal-layer xl:w-3/12 lg:w-2/5"},za={class:"flex flex-row justify-between w-full"},Qa={class:"title"},Wa={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},Ja={class:"grid overflow-y-scroll gap-2 pr-2 max-h-96 grid-cols"},Ga=["src"],Ya=["to"],Ka={class:"mx-auto text-center"},Za={class:"mx-auto text-center"},Xa={class:"mx-auto text-center"},eo={__name:"UserLiked",props:{modalId:{type:String,default:"user-liked-modal"},workId:{type:Number,default:0}},setup(i){const s=i,{oApiConfiguration:a,fetchOptions:o}=B(),t=He(a,o()),r=$({pagination:{page:0,perPage:10}}),l=$([]),u=async({loaded:d})=>{const[w,y]=await t.viewWhoLikedTheArtwork({workId:s.workId,pagination:{page:r.value.pagination.page,perPage:r.value.pagination.perPage}});if(!y){r.value.pagination.page+=1;for(let f=0;f<w.length;f++){const k=w[f];l.value.push(k)}}d(w.length,r.value.pagination.perPage)},p=()=>{X().closeModal(s.modalId)};return(d,w)=>{const y=Pe,f=ls;return b(),R("div",null,[n("div",Na,[n("div",za,[n("div",Qa,g(d.$t("artworks.usersLiked")),1),n("div",Wa,[n("div",{class:"modal-close",onClick:w[0]||(w[0]=k=>p())},[_(U,{name:"i-majesticons-close",class:"text-2xl"})])])]),n("div",Ja,[(b(!0),R(ye,null,xe(e(l),(k,h)=>(b(),ee(y,{key:k.id,to:"/profile/"+k.users.username,class:"flex flex-row gap-2 p-2 rounded-md theme-color-secondary hover:button-color hover:text-white img-hover"},{default:z(()=>[n("img",{preload:"",loading:"lazy",class:"w-10 h-10 avatar",src:d.avatarCoverUrl(k.users.avatar_bucket,k.users.avatar_filename),onError:w[1]||(w[1]=(...v)=>d.imageLoadError&&d.imageLoadError(...v))},null,40,Ga),n("span",{to:"/profile/"+k.users.username,class:"font-bold leading-10"},g(k.users.name),9,Ya)]),_:2},1032,["to"]))),128)),_(f,null,{default:z(()=>[_(e(ns),{load:u},{loading:z(()=>[n("div",Ka,[_(U,{name:"i-line-md-loading-twotone-loop",class:"text-3xl"})])]),"no-results":z(()=>[n("div",Za,g(d.$t("users.nothingToShow")),1)]),"no-more":z(()=>[n("div",Xa,g(d.$t("youHaveReachedTheEnd")),1)]),_:1})]),_:1})])])])}}};const to={id:"lists"},so={key:0},ao={__name:"RelatedArtworks",props:{workId:{type:Number,default:0},isModal:{type:Boolean,default:!0}},setup(i){const s=i,{oApiConfiguration:a,fetchOptions:o}=B(),t=He(a,o());Oe(()=>{setTimeout(()=>{l()},2e3)});const r=$({loadings:{first:!0,loading:!0},data:[],options:{isEmpty:!1,isError:!1,paginations:{page:0,perPage:12,showLoadMore:!0}}}),l=async()=>{r.value.loadings.loading=!0,r.value.options.isError=!1,r.value.options.isEmpty=!1;const[p,d,w]=await t.getRelatedArtworks({workId:s.workId,pagination:{page:r.value.options.paginations.page,perPage:r.value.options.paginations.perPage}});if(w)r.value.options.isError=!0;else if(r.value.options.paginations.page==0&&!p.length)r.value.options.isEmpty=!0;else{for(let y=0;y<p.length;y++)r.value.data.push(p[y]);d.next_previous.next_page==null&&(r.value.options.paginations.showLoadMore=!1),r.value.options.paginations.page+=1}r.value.options.paginations.page==1&&(r.value.loadings.first=!1),r.value.loadings.loading=!1},u=()=>{l()};return(p,d)=>(b(),R("div",to,[_(Ee,{loading:e(r).loadings.first,empty:e(r).options.isEmpty,error:e(r).options.isError,fetch:l,"background-color":i.isModal?"theme-color-secondary":"theme-color",class:"mt-2"},null,8,["loading","empty","error","background-color"]),e(r).loadings.first?I("",!0):(b(),R("div",so,[(b(),ee(_t,null,[e(r).options.isEmpty?I("",!0):(b(),ee(ot,{key:0,"section-class":"work-grid",view:null,works:e(r).data,"is-href":!0,"direct-open":!0},null,8,["works"]))],1024)),P(n("div",{class:Y(["primary-button",e(r).loadings.loading?"animate-pulse":""]),onClick:u},g(p.$t("loadMore")),3),[[L,e(r).options.paginations.showLoadMore]])]))]))}},oo=be(ao,[["__scopeId","data-v-0cebba41"]]);const Ne=i=>(yt("data-v-eef3185f"),i=i(),bt(),i),ro={class:"mx-auto w-full align-middle work-view md:w-1/2"},no={class:"flex flex-col w-full lg:flex-row"},lo={class:"left-side"},io={key:0,class:"p-4 mb-4 w-full text-center text-black bg-yellow-200 rounded-md theme-color-secondary"},co={class:"flex flex-row justify-center mb-2"},uo={class:"font-bold cursor-pointer"},mo={class:"mr-2 font-normal"},po={class:"italic"},ho={key:1,class:"alert-success"},wo={class:"flex flex-row justify-between p-3 mb-2 text-black align-middle bg-yellow-200 rounded"},fo={class:"mr-4"},vo={class:"image-list"},go={key:0,class:"flex flex-row mb-2"},yo=["src"],bo={class:"font-bold"},ko=["src"],_o={class:"font-bold"},xo=["src","data-source"],Co={class:"interactions"},Ro={class:"reaction-counters"},$o={class:"counter"},Ao={key:0,class:"reactions"},Io={key:0},So={key:0},Po={class:"inline-block relative z-30 dropdown"},Lo={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options"},Uo={class:"invisible rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 dropdown-menu"},Vo={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 p-1 mt-2 w-56 rounded-md shadow-lg origin-top-right outline-none theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},Oo={key:2,class:"custom-divider"},Eo={key:4,class:"custom-divider"},To=["to"],qo={class:"right-side"},Mo={key:1},Bo={class:"mb-2 italic title"},jo={key:0,class:"flex flex-row gap-2"},Do=["href"],Fo={key:0},Ho=["src"],No={class:"w-2/3"},zo={class:"title"},Qo=["innerHTML"],Wo={key:2,class:"custom-divider"},Jo={key:3,class:"flex flex-col gap-4"},Go={class:"section-title"},Yo={key:0,class:"flex flex-row gap-2 justify-between w-full"},Ko={key:1},Zo={key:2},Xo={class:"title"},er={key:0,class:"w-1/3"},tr=["src"],sr={class:"w-2/3"},ar={class:"title"},or=["innerHTML"],rr={class:"italic"},nr=Ne(()=>n("div",{class:"custom-divider"},null,-1)),lr={class:"comments"},ir={key:0,class:"comment-box"},cr={class:"flex flex-col"},dr={class:"flex relative flex-col"},ur=["readonly","rows","placeholder"],mr={key:1,class:"p-4 mb-4 text-center rounded-md theme-color-secondary"},pr={id:"comments",class:"comment-content"},hr={class:"flex flex-row justify-end mb-2"},wr={key:0},fr=["src"],vr={class:"w-full"},gr={class:"flex justify-between"},yr={class:"comment-time"},br={class:"mt-4 reactions"},kr=["onClick"],_r={key:0},xr={key:0,class:"flex flex-row"},Cr=["onClick"],Rr=["onClick"],$r={class:"inline-block relative ml-2 dropdown"},Ar={class:"invisible z-50 rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 cursor-pointer dropdown-menu"},Ir={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 p-1 mt-2 w-56 rounded-md border shadow-lg origin-top-right outline-none border-color theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},Sr=["onClick"],Pr={key:0,class:"-mb-4 comment-box"},Lr={class:"flex flex-col"},Ur={class:"flex relative flex-col"},Vr=["id","readonly","rows","placeholder"],Or=["onClick"],Er=["id"],Tr={key:0,class:"w-full"},qr={class:"float-left mb-2 text-xs italic text-color-secondary"},Mr=["onClick"],Br={class:"flex flex-row justify-between"},jr=["src"],Dr={class:"transition-all duration-150 cursor-pointer hover:font-bold"},Fr={class:"leading-6 comment-time"},Hr={class:"mt-2"},Nr={key:0,class:"mt-2 reactions"},zr=Ne(()=>n("span",null,null,-1)),Qr={class:"flex flex-row"},Wr=["onClick"],Jr={class:"inline-block relative ml-2 dropdown"},Gr={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options"},Yr={class:"invisible z-50 rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 cursor-pointer dropdown-menu"},Kr={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 z-50 p-1 mt-2 w-56 rounded-md border shadow-lg origin-top-right outline-none border-color theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},Zr=["onClick"],Xr=["onClick"],en={key:3,class:"mt-4 w-full text-xs italic text-center"},tn=Ne(()=>n("div",{class:"custom-divider"},null,-1)),sn={class:"mt-4 w-full"},an=Ne(()=>n("div",{class:"section-title"},"Similar Artworks",-1)),on={__name:"ModalView",props:{id:{type:Number,default:0},section:{type:String,default:""}},emits:["setMeta","stopLoading","showEmpty","showError"],setup(i,{expose:s,emit:a}){const o=i,t=at(),{oApiConfiguration:r,fetchOptions:l}=B(),{applyExplicitFilter:u,removeExplicitFilter:p,generateSemiCompressedArtworkUrl:d}=es(),w=He(r,l()),y=xt(r,l()),f=kt(),{$router:k}=ts(),h=vt();ss(()=>h.query,()=>{v(),X().closeModal("collection-selection-modal"),X().closeModal("album-selection-modal"),X().closeModal("report-modal")}),Oe(()=>{o.id!==0&&he(o.id),window.addEventListener("keydown",c=>{const m=document.getElementById("collection-selection-modal"),S=document.getElementById("album-selection-modal"),j=document.getElementById("report-modal"),re=document.querySelectorAll(".viewer-in");c.key==="Escape"&&(!m||m.style.display!="flex")&&(!S||S.style.display!="flex")&&(!j||j.style.display!="flex")&&!re.length&&v()})});const v=()=>{X().closeModal(`${o.section}-modal`)},x=$(!1),O=()=>{x.value=!1,p()},V=o.id===0,Z=async c=>{await w.incraseViewCount(c)},Q=$(!1),ae=$(!0),C=$({}),W=$(!1),ne=$(!1),ge=$(!1),de=$([]),he=async c=>{te.value="",M.value=[],we.value=[],ae.value=!0;const[m,S]=await w.getWorkById(c);S?S=="Work not found"?a("showEmpty"):a("showError"):(C.value=m,de.value=[],m.artwork_assets.forEach(re=>{de.value.push({thumbnail:d(re.bucket,re.filename,!0),source:d(re.bucket,re.filename,!1)})}),!t.loggedIn&&m.is_explicit||m.is_explicit&&!t.user.user_settings.show_explicit?(x.value=!0,u()):x.value=!1,W.value=m.liked,ne.value=m.saved,ge.value=m.in_album,mt().formatApiToWeb(m.scheduled_post)<mt().currentUtcTime()?(await $t(c),t.loggedIn&&await K(c),(!t.loggedIn||t.user.id!==m.users.id)&&await Z(c),m.redraw_of&&Xt(m.redraw_of),await Yt(),await Kt(m.id),t.loggedIn&&await Zt(m.id)):t.user.id!==m.users.id?k.push("/"):Q.value=!0,o.id!==0&&a("setMeta",{title:C.value.title})),ae.value=!1,a("stopLoading")},N=$({}),K=async c=>{const[m,S]=await y.getReportStatus({type:"artwork",postId:c});S||(m.length?N.value=m[0]:N.value={})},F=async()=>{const[c,m]=await w.like({workId:C.value.id});if(c){W.value=!0;const S=document.getElementById("like-button");S.classList.add("animate-bounce"),setInterval(()=>{S.classList.remove("animate-bounce")},2500)}},E=()=>{X().openModal("user-liked-modal")},q=async()=>{const[c,m]=await w.unlike({workId:C.value.id});c&&(W.value=!1)},M=$([]),ke=et({perPage:3,page:0}),_e=$([]),lt=async c=>{const[m,S]=await w.getComments({workId:c,pagination:{page:ke.page,perPage:ke.perPage}});if(m)return m.pagination.current_page===m.pagination.first_last.last_page?Te.value=!1:Te.value=!0,m.comments.forEach(j=>{j.liked&&Ce.value.push(j.id),_e.value.push(j.id)}),m.comments},$t=async c=>{try{(await lt(c)).forEach(S=>M.value.push(S))}catch{}},Te=$(!1),At=async c=>{try{ke.page+=1,(await lt(c)).forEach(S=>M.value.push(S))}catch{}},te=$(),ze=200,It=tt(()=>te.value!=null&&te.value!==""?ze-te.value.length:ze),Ae=$(!1),St=async()=>{Ae.value=!0;try{const[c,m,S]=await w.addComment({workId:C.value.id,comment:te.value});c&&(te.value="",M.value.splice(0,0,m),M.value.join(),_e.value.splice(0,0,m.id),_e.value.join())}catch{}Ae.value=!1},Pt=async c=>{const[m,S]=await w.deleteComment({commentId:c});if(m){const j=_e.value.indexOf(c);M.value.splice(j,1),_e.value.splice(j,1)}},Ce=$([]),Lt=async c=>{const[m,S]=await w.likeComment({commentId:c});if(m){Ce.value.push(c);const j=document.getElementById(`comment-like-button-${c}`);j.classList.add("animate-bounce"),setInterval(()=>{j.classList.remove("animate-bounce")},2500)}},Ut=async c=>{const[m,S]=await w.unlikeComment({commentId:c});if(m){const j=Ce.value.indexOf(c);Ce.value.splice(j,1)}},Qe=et({perPage:2,page:0}),we=$([]),Ie=$([]),We=$(!0),it=async c=>{const[m,S,j]=await w.getCommentReplies({commentId:c,pagination:{page:Qe.page,perPage:Qe.perPage}});if(!j)return S.current_page===S.first_last.last_page&&(We.value=!1),m.map(re=>Ie.value.push(re.id)),m},Le=$(0),Je=async c=>{We.value=!0,Ie.value=[];try{const m=await it(c);we.value={[c]:m},m.forEach(j=>{j.liked&&Re.value.push(j.id)}),Le.value&&Ge(Le.value);const S=document.getElementById(`comment-replies-${c}`);S.classList.add("flex"),S.classList.remove("hidden"),Le.value=c}catch{}},Ge=c=>{const m=document.getElementById(`comment-replies-${c}`);m.classList.remove("flex"),m.classList.add("hidden"),Le.value=0},Vt=async c=>{Qe.page+=1;try{(await it(c)).forEach(S=>{we.value[c].push(S)})}catch{}},qe=$(0),Ot=async c=>{await Je(c),qe.value=c},oe=$(),Ye=200,Et=tt(()=>oe.value!=null&&oe.value!==""?Ye-oe.value.length:Ye),Se=$(!1),Tt=async c=>{Se.value=!0;try{const[m,S,j]=await w.addReply({commentId:c,reply:oe.value});m&&(Je(c),oe.value="",we.value[c].splice(0,0,S),we.value[c].join(),qe.value=0,Ie.value.splice(0,0,S.id),Ie.value.join())}catch{}Se.value=!1},qt=async(c,m)=>{const[S,j]=await w.deleteReply({replyId:m});if(S){const re=Ie.value.indexOf(m);we.value[c].splice(re,1),Ie.value.splice(re,1)}},Re=$([]),Mt=async c=>{const[m,S]=await w.likeReply({replyId:c});if(m){Re.value.push(c);const j=document.getElementById(`reply-like-button-${c}`);j.classList.add("animate-bounce"),setInterval(()=>{j.classList.remove("animate-bounce")},2500)}},Bt=async c=>{const[m,S]=await w.unlikeReply({replyId:c});if(m){const j=Re.value.indexOf(c);Re.value.splice(j,1)}},Ke=$(!1),Ze=$(!1),ct=async c=>{const[m,S]=await w.deleteWork({workId:[c]});m&&(Ze.value=!0,setTimeout(()=>{k.push("/")},1500))},Xe=$(null),jt=()=>{X().openModal("collection-selection-modal"),Xe.value.fetchCollection(),Xe.value.fetchCurrentSaved()},Dt=c=>{c?ne.value=!1:ne.value=!0,pt().animate("save-to-collection-button")},dt=$(null),Ft=()=>{X().openModal("album-selection-modal"),dt.value.fetchCurrentSaved()},Ht=c=>{c?ge.value=!1:ge.value=!0,pt().animate("save-to-album-button")},Nt=()=>{X().openModal("share-to-feed-modal")},ut=$(!1);let zt;const Qt=c=>{const m=$(f.public.appUrl+c),{copy:S}=Ct({source:m});S(),rt().splash(zt,ut,"copy-alert")},Wt=$(null),Jt=()=>{X().openModal("report-modal")},Me=as().isMobile()?19:25,Gt=$(0),Yt=async()=>{const[c,m]=await w.countRedraws(C.value.id);Gt.value=c},ue=$({data:[],pagination:{}}),Kt=async c=>{const[m,S,j]=await w.getRedraws({workId:c,pagination:{page:0,perPage:8}});j||(ue.value.data=m,ue.value.pagination=S)},le=$({}),Zt=async c=>{const[m,S]=await w.getMyRedraw({workId:c});S||(le.value=m)},se=$({}),Be=$(!0),Xt=async c=>{Be.value=!0;const[m,S]=await w.getWorkById(c);S||(se.value=m),Be.value=!1};return s({view:he}),(c,m)=>{const S=Pe,j=os("viewer"),re=rs("auto-animate");return b(),R(ye,null,[P(n("div",ro,[_(Ee,{loading:e(ae)},null,8,["loading"])],512),[[L,e(ae)&&!c.isMobile()&&V]]),P(n("div",{class:Y(["work-container work-view",V?"w-full 2xl:w-4/6 2xl:mx-auto p-2 md:p-6 theme-color":"w-full"])},[n("div",no,[n("div",lo,[e(Q)&&!e(Ze)?(b(),R("div",io,[n("div",co,[_(U,{name:"i-ion-alert-outline"}),n("div",null,g(c.$t("artworks.previewModeMessage")),1)]),n("div",uo,[n("span",{class:"text-red-500",onClick:m[0]||(m[0]=A=>Ke.value=!0)},g(c.$t("artworks.deleteArtwork")),1),P(n("div",null,[n("span",mo,[T(g(c.$t("alert.areYouSure"))+" ",1),n("span",po,"("+g(c.$t("alert.youCannotUndoThisAction"))+")",1)]),n("span",{class:"mr-2 text-red-500 hover:underline",onClick:m[1]||(m[1]=A=>ct(e(C).id))},g(c.$t("yes")),1),n("span",{class:"hover:underline",onClick:m[2]||(m[2]=A=>Ke.value=!1)},g(c.$t("no")),1)],512),[[L,e(Ke)]])])])):I("",!0),e(Ze)?(b(),R("div",ho,g(c.$t("artworks.successDelete")),1)):I("",!0),P(n("div",wo,[n("span",fo,g(e(t).loggedIn?c.$t("explicitContentAlert"):c.$t("explicitContentAlertForGuest")),1),n("button",{class:"primary-button",onClick:m[3]||(m[3]=$e(A=>O(),["prevent"]))},g(c.$t("show")),1)],512),[[L,e(x)]]),n("div",vo,[e(C).redraw_of&&!e(Be)?(b(),R("div",go,[_(S,{to:"/a/"+e(se).id,class:"inline-block z-10 flex-row gap-2 p-1 pr-6 rounded-l-md rounded-r-full theme-colored hover:cursor-pointer"},{default:z(()=>[n("img",{preload:"",loading:"lazy",class:"inline-block mr-2 w-8 rounded-md",src:c.artworkThumb(e(se).artwork_assets[0].bucket,e(se).artwork_assets[0].filename,"thumbnail",!1),onError:m[4]||(m[4]=(...A)=>c.imageLoadError&&c.imageLoadError(...A))},null,40,yo),n("span",bo,g(e(se).title.length>e(Me)?e(se).title.slice(0,e(Me))+"..":e(se).title),1)]),_:1},8,["to"]),n("div",{class:Y(["inline-block flex-row gap-2 p-1 pr-2 pl-6 -ml-4 rounded-md",V?"theme-color-secondary":"theme-color"])},[n("img",{preload:"",loading:"lazy",class:"inline-block mr-2 w-8 rounded-md",src:c.artworkThumb(e(C).artwork_assets[0].bucket,e(C).artwork_assets[0].filename,"thumbnail",!1),onError:m[5]||(m[5]=(...A)=>c.imageLoadError&&c.imageLoadError(...A))},null,40,ko),n("span",_o,g(e(C).title.length>e(Me)?e(C).title.slice(0,e(Me))+"..":e(C).title),1)],2)])):I("",!0),_(j,{options:{url:"data-source"},images:e(de),class:"overflow-hidden rounded-md"},{default:z(()=>[(b(!0),R(ye,null,xe(e(de),(A,D)=>(b(),R("img",{key:A.thumbnail,preload:"",loading:"lazy",src:A.thumbnail,"data-source":A.source,class:Y(["overflow-hidden mb-2 rounded cursor-pointer image image-layer unselectable",{"blur-lg unclickable":e(x)},e(x)?"brightness-50":"brightness-100"]),onError:m[6]||(m[6]=(...Ue)=>c.imageLoadError&&c.imageLoadError(...Ue))},null,42,xo))),128))]),_:1},8,["images"])]),n("div",Co,[n("div",Ro,[e(C).is_explicit?(b(),R("span",{key:0,class:Y(["py-1 px-2 mr-2 font-bold rounded-md text-xxs",V?"theme-color-secondary":"bg-tag"])},"E",2)):I("",!0),P(n("span",$o,[_(U,{name:"i-mi-eye"}),n("b",null,g(c.shortNumber(e(C).views)),1),T(" "+g(e(C).views>1?c.$t("count.views"):c.$t("count.view")),1)],512),[[L,e(C).views>0]])]),e(Q)?I("",!0):(b(),R("div",Ao,[e(t).loggedIn?(b(),R("span",Io,[n("span",{onClick:m[7]||(m[7]=A=>e(W)?q():F())},[P(_(U,{id:"like-button",name:"i-ion-heart",class:"text-red-500 hover:text-red-500"},null,512),[[L,e(W)]]),P(_(U,{name:"i-ri-heart-3-line",class:"hover:text-red-500"},null,512),[[L,!e(W)]])]),e(C)._count&&e(C)._count.artwork_likes?(b(),R("span",{key:0,class:"hover:cursor-pointer",onClick:m[8]||(m[8]=A=>E())},g(c.thousand(e(C)._count.artwork_likes)),1)):I("",!0)])):I("",!0),e(t).loggedIn?(b(),R("span",{key:1,onClick:m[9]||(m[9]=A=>jt())},[P(_(U,{id:"save-to-collection-button",name:"i-majesticons-bookmark",class:"text-blue-500 hover:text-blue-500"},null,512),[[L,e(ne)]]),P(_(U,{name:"i-majesticons-bookmark-line",class:"hover:text-blue-500"},null,512),[[L,!e(ne)]]),e(C)._count&&e(C)._count.collection_has_artworks?(b(),R("span",So,g(c.thousand(e(C)._count.collection_has_artworks)),1)):I("",!0)])):I("",!0),e(t).loggedIn&&e(C).users&&e(t).user.id===e(C).users.id?(b(),R("span",{key:2,onClick:m[10]||(m[10]=A=>Ft())},[P(_(U,{id:"save-to-album-button",name:"i-ion-folder-open",class:"text-green-500 hover:text-green-500"},null,512),[[L,e(ge)]]),P(_(U,{name:"i-bx-photo-album",class:"hover:text-blue-500"},null,512),[[L,!e(ge)]])])):I("",!0),e(t).loggedIn?(b(),R("span",{key:3,onClick:m[11]||(m[11]=A=>Nt())},[_(U,{name:"i-uil-share",class:"hover:text-blue-500"})])):I("",!0),n("div",Po,[n("button",Lo,[n("span",null,[_(U,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),n("div",Uo,[n("div",Vo,[V?(b(),ee(S,{key:0,to:"/a/"+e(C).id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:z(()=>[_(U,{name:"i-fluent-arrow-enter-20-filled",class:"mr-2 text-base"}),T(" "+g(c.$t("open")),1)]),_:1},8,["to"])):I("",!0),V?(b(),ee(S,{key:1,to:"/a/"+e(C).id,target:"_blank",class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:z(()=>[_(U,{name:"i-ci-external-link",class:"mr-2 text-base"}),T(" "+g(c.$t("openInNewTab")),1)]),_:1},8,["to"])):I("",!0),V?(b(),R("div",Oo)):I("",!0),e(t).loggedIn&&e(C).users&&e(t).user.id!=e(C).users.id&&!e(t).user.is_admin&&!e(t).user.is_moderator?(b(),R("div",{key:3,to:"#",class:Y(["flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",{"rounded-t-md":!V}]),onClick:m[12]||(m[12]=A=>Jt())},[_(U,{name:"i-akar-icons-flag",class:"mr-2 text-base"}),T(" "+g(c.$t("report")),1)],2)):I("",!0),n("div",{class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 cursor-pointer theme-color hover:button-color parent-icon hover:text-white",onClick:m[13]||(m[13]=A=>Qt("/a/"+e(C).id))},[_(U,{name:"i-icon-park-outline-copy",class:"mr-2 text-base"}),T(" "+g(c.$t("copySharableLink")),1)]),e(t).loggedIn&&e(C).users&&e(t).user.id===e(C).users.id?(b(),R("div",Eo)):I("",!0),e(t).loggedIn&&e(C).users&&e(t).user.id===e(C).users.id?(b(),ee(S,{key:5,to:"/works/update/"+e(C).id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:z(()=>[_(U,{name:"i-ion-settings-outline",class:"mr-2 text-base"}),T(" "+g(c.$t("update")),1)]),_:1},8,["to"])):I("",!0),e(t).loggedIn&&e(C).users&&e(t).user.id===e(C).users.id?(b(),R("div",{key:6,to:"/a/"+e(C).id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 cursor-pointer bg-danger hover:button-color parent-icon hover:text-white",onClick:m[14]||(m[14]=A=>c.openModal("work-deletion-confirm-modal"))},[_(U,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),T(" "+g(c.$t("delete")),1)],8,To)):I("",!0)])])])]))]),_(ht,{section:i.section,class:"flex-md-hidden","is-modal":V,"artwork-detail":e(C),"preview-mode":e(Q),"is-desktop":!0},null,8,["section","artwork-detail","preview-mode"]),(b(),ee(_t,null,[e(ae)?I("",!0):(b(),ee(wt,{key:0,class:"mb-6 hidden-md-flex","artwork-detail":e(C),view:he,"is-href":!V,"keep-artist-page-number":!0,"pagination-per-page":4},null,8,["artwork-detail","is-href","pagination-per-page"]))],1024))]),n("div",qo,[_(ht,{section:i.section,class:"hidden-md-flex","is-modal":V,"artwork-detail":e(C),"preview-mode":e(Q),"is-desktop":!1},null,8,["section","artwork-detail","preview-mode"]),e(ae)?I("",!0):(b(),ee(wt,{key:0,class:"flex-md-hidden","artwork-detail":e(C),view:he,"is-href":!V,"keep-artist-page-number":!0,"pagination-per-page":4},null,8,["artwork-detail","is-href","pagination-per-page"])),e(C).redraw_of?(b(),R("div",Mo,[n("div",Bo,g(c.$t("artworks.originalArtwork")),1),e(Be)?(b(),R("div",jo,[_(je),T(" "+g(c.$t("artworks.redrawOriginalLoading")),1)])):(b(),R("a",{key:1,href:"/a/"+e(C).redraw_of,target:"_blank",class:"flex flex-row gap-2 w-full"},[e(se).artwork_assets?(b(),R("div",Fo,[n("img",{preload:"",loading:"lazy",class:"w-40 rounded-md",src:c.artworkThumb(e(se).artwork_assets[0].bucket,e(se).artwork_assets[0].filename,"thumbnail",!1),onError:m[15]||(m[15]=(...A)=>c.imageLoadError&&c.imageLoadError(...A))},null,40,Ho)])):I("",!0),n("div",No,[n("span",zo,g(e(se).title),1),n("p",{innerHTML:e(se).description.length>200?e(se).description.slice(0,200)+"..":e(se).description},null,8,Qo)])],8,Do))])):I("",!0),e(C).allow_redraw?(b(),R("div",Wo)):I("",!0),e(C).allow_redraw||e(ue).data&&e(ue).data.length?(b(),R("div",Jo,[n("span",Go,g(c.$t("artworks.redraws"))+" ("+g(e(ue).pagination&&e(ue).pagination.record_total?e(ue).pagination.record_total:0)+") ",1),e(t).loggedIn&&!e(le)?(b(),R("div",Yo,[_(S,{to:"/post?redrawWorkId="+e(C).id,class:Y([V?"secondary-button":"light-button"])},{default:z(()=>[_(U,{name:"i-typcn-brush"}),T(" "+g(c.$t("artworks.redrawThisArtwork")),1)]),_:1},8,["to","class"])])):I("",!0),e(ue).data&&e(ue).data.length?(b(),R("div",Ko,[_(ot,{"section-class":"redraw-works",works:e(ue).data,view:he,"is-href":c.isHref,"is-mini-list":!0,"current-work-id":e(C).id,"direct-open":!0,"hide-redraw-icon":!0},null,8,["works","is-href","current-work-id"]),e(ue).pagination.next_previous.next_page?(b(),ee(S,{key:0,to:"/a/"+e(C).id+"/redraws",class:"mt-2 primary-button"},{default:z(()=>[_(U,{name:"i-fluent-arrow-enter-20-filled",class:"mr-1 text-white hover:text-white"}),T(" "+g(c.$t("seeMore")),1)]),_:1},8,["to"])):I("",!0)])):I("",!0),e(t).loggedIn&&e(le)?(b(),R("div",Zo,[n("span",Xo,g(c.$t("artworks.myRedraw")),1),_(S,{to:"/a/"+e(le).id,class:"flex flex-row gap-2 mt-2 w-full"},{default:z(()=>[e(le).artwork_assets?(b(),R("div",er,[n("img",{preload:"",loading:"lazy",class:"w-40 rounded-md",src:c.artworkThumb(e(le).artwork_assets[0].bucket,e(le).artwork_assets[0].filename,"thumbnail",!1),onError:m[16]||(m[16]=(...A)=>c.imageLoadError&&c.imageLoadError(...A))},null,40,tr)])):I("",!0),n("div",sr,[n("span",ar,g(e(le).title),1),n("p",{innerHTML:e(le).description?e(le).description.length>100?e(le).description.slice(0,100)+"..":e(se).description:c.$t("artworks.noDescription"),class:"mb-2"},null,8,or),n("span",rr,g(c.formatDate(e(le).scheduled_post)),1)])]),_:1},8,["to"])])):I("",!0)])):I("",!0),nr,n("section",lr,[e(t).loggedIn&&!e(Q)?(b(),R("div",ir,[n("div",cr,[n("div",dr,[P(n("textarea",{"onUpdate:modelValue":m[17]||(m[17]=A=>De(te)?te.value=A:null),cols:"30","data-gramm":"false",class:Y(["input form-input",{"cursor-not-allowed":e(Ae)},{"theme-color-secondary textarea":V}]),readonly:e(Ae),rows:e(te)!=null&&e(te)!=""?"4":"0",placeholder:c.$t("comments.inputPlaceholder"),maxlength:ze},null,10,ur),[[Ve,e(te)]]),P(n("span",{class:"absolute left-4 bottom-6 py-1 px-2 text-white rounded-md button-color"},g(e(It)),513),[[L,e(te)!=null&&e(te)!=""]]),n("span",{class:"absolute right-2 bottom-5 py-1 px-2",onClick:m[18]||(m[18]=$e(A=>St(),["prevent"]))},[P(_(U,{name:"i-carbon-send-filled",class:"text-xl transition-all duration-100 cursor-pointer text-colored"},null,512),[[L,e(te)!=null&&e(te)!=""&&!e(Ae)]]),P(_(je,null,null,512),[[L,e(Ae)]])])])])])):I("",!0),e(t).loggedIn?I("",!0):(b(),R("div",mr,g(c.$t("comments.loginOrRegisterToLeaveComment")),1)),n("div",pr,[n("div",hr,[e(C)._count&&e(C)._count.artwork_comments?(b(),R("div",wr,[n("b",null,g(c.thousand(e(C)._count.artwork_comments)),1),T(" "+g(e(C)._count.artwork_comments>1?c.$t("count.comments"):c.$t("count.comment")),1)])):I("",!0)]),(b(!0),R(ye,null,xe(e(M),A=>P((b(),R("div",{key:A.id,class:"flex flex-row w-full comment-item"},[_(S,{class:"mr-2",to:"/profile/"+A.users.username},{default:z(()=>[n("img",{class:"w-10 h-10 avatar",src:c.avatarCoverUrl(A.users.avatar_bucket,A.users.avatar_filename),onError:m[19]||(m[19]=(...D)=>c.imageLoadError&&c.imageLoadError(...D))},null,40,fr)]),_:2},1032,["to"]),n("div",vr,[n("div",{class:Y(["p-3 w-full rounded-md",V?"theme-color-secondary":"theme-color"])},[n("div",gr,[_(S,{to:"/profile/"+A.users.username,class:"mb-2 text-xs font-semibold transition-all duration-150 cursor-pointer"},{default:z(()=>[T(g(A.users.name),1)]),_:2},1032,["to"]),n("div",yr,g(c.formatDate(A.created_at,!0)),1)]),n("div",null,g(A.comment),1),n("div",br,[n("div",{class:"cursor-pointer hover:underline",onClick:D=>e(Le)==A.id?Ge(A.id):Je(A.id)},[A._count.artwork_comment_has_replies>0?(b(),R("span",_r,[n("b",null,g(c.shortNumber(A._count.artwork_comment_has_replies)),1),T(" "+g(A._count.artwork_comment_has_replies>1?c.$t("comments.replies.replies").toLowerCase():c.$t("comments.replies.reply").toLowerCase()),1)])):I("",!0)],8,kr),e(t).loggedIn?(b(),R("div",xr,[n("span",{class:"reaction",onClick:D=>e(Ce).includes(A.id)?Ut(A.id):Lt(A.id)},[P(_(U,{name:"i-ri-heart-3-line",class:"text-gray-500 hover:text-red-500"},null,512),[[L,!e(Ce).includes(A.id)]]),P(_(U,{id:"comment-like-button-"+A.id,name:"i-ion-heart",class:"text-red-500 hover:text-red-500"},null,8,["id"]),[[L,e(Ce).includes(A.id)]]),T(" "+g(c.shortNumber(A._count.artwork_comment_has_likes)),1)],8,Cr),n("span",{class:"reaction",onClick:D=>Ot(A.id)},[_(U,{name:"i-quill-reply",class:"text-gray-500 hover:text-blue-500"})],8,Rr),n("div",$r,[n("button",{type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options",onClick:m[20]||(m[20]=D=>qe.value=0)},[n("span",null,[_(U,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),n("div",Ar,[n("div",Ir,[_(S,{to:"/profile/"+A.users.username,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:m[21]||(m[21]=$e(()=>{},["prevent"]))},{default:z(()=>[_(U,{name:"i-fluent-person-32-regular",class:"mr-2 text-base"}),T(" "+g(c.$t("viewProfile")),1)]),_:2},1032,["to"]),e(t).loggedIn&&e(t).user.id===A.users.id?(b(),R("div",{key:0,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:D=>Pt(A.id)},[_(U,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),T(" "+g(c.$t("delete")),1)],8,Sr)):I("",!0)])])])])):I("",!0)])],2),e(t).loggedIn?P((b(),R("div",Pr,[n("div",Lr,[n("div",Ur,[P(n("textarea",{id:"reply-"+A.id,"onUpdate:modelValue":m[22]||(m[22]=D=>De(oe)?oe.value=D:null),class:Y(["mt-2 w-full input form-input",[{"cursor-not-allowed":e(Se)},{"theme-color-secondary textarea":V}]]),readonly:e(Se),cols:"30",rows:e(oe)!=null&&e(oe)!=""?"4":"0",placeholder:c.$t("comments.replies.write"),maxlength:Ye,"data-gramm":"false"},null,10,Vr),[[Ve,e(oe)]]),P(n("span",{class:"absolute left-4 bottom-6 py-1 px-2 text-white rounded-md button-color"},g(e(Et)),513),[[L,e(oe)!=null&&e(oe)!=""]]),n("span",{class:"absolute right-2 bottom-5 py-1 px-2",onClick:$e(D=>Tt(A.id),["prevent"])},[P(_(U,{name:"i-carbon-send-filled",class:"text-xl transition-all duration-100 cursor-pointer text-colored"},null,512),[[L,e(oe)!=null&&e(oe)!=""&&!e(Se)]]),P(_(je,null,null,512),[[L,e(Se)]])],8,Or)])])],512)),[[L,e(qe)===A.id]]):I("",!0),n("div",{id:"comment-replies-"+A.id,class:"hidden flex-col mt-2"},[e(we)[A.id]&&e(we)[A.id].length?(b(),R("div",Tr,[n("span",qr,g(c.$t("comments.replies.replies")),1),n("span",{class:"float-right text-xs cursor-pointer hover:font-semibold",onClick:D=>Ge(A.id)},g(c.$t("hide")),9,Mr)])):I("",!0),(b(!0),R(ye,null,xe(e(we)[A.id],D=>(b(),R("div",{key:D.id,class:Y(["p-3 mb-2 w-full rounded-md border-l-4",V?"theme-color-secondary":"theme-color"])},[n("div",Br,[_(S,{to:"/profile/"+D.users.username,class:"flex flex-row leading-6"},{default:z(()=>[n("img",{class:"mr-2 w-6 h-6 rounded-full",src:c.avatarCoverUrl(D.users.avatar_bucket,D.users.avatar_filename),onError:m[23]||(m[23]=(...Ue)=>c.imageLoadError&&c.imageLoadError(...Ue))},null,40,jr),n("span",Dr,g(D.users.name),1)]),_:2},1032,["to"]),n("span",Fr,g(c.formatDate(D.created_at,!0)),1)]),n("div",Hr,g(D.content),1),e(t).loggedIn?(b(),R("div",Nr,[zr,n("div",Qr,[n("span",{class:"reaction",onClick:Ue=>e(Re).includes(D.id)?Bt(D.id):Mt(D.id)},[P(_(U,{id:"reply-like-button-"+D.id,name:"i-ion-heart",class:"text-red-500 hover:text-red-500"},null,8,["id"]),[[L,e(Re).includes(D.id)]]),P(_(U,{name:"i-ri-heart-3-line",class:"text-gray-500 hover:text-red-500"},null,512),[[L,!e(Re).includes(D.id)]]),T(" "+g(c.shortNumber(D._count.artwork_comment_reply_has_likes)),1)],8,Wr),n("div",Jr,[n("button",Gr,[n("span",null,[_(U,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),n("div",Yr,[n("div",Kr,[_(S,{to:"/profile/"+D.users.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:m[24]||(m[24]=$e(()=>{},["prevent"]))},{default:z(()=>[_(U,{name:"i-fluent-person-32-regular",class:"mr-2 text-base"}),T(" "+g(c.$t("viewProfile")),1)]),_:2},1032,["to"]),e(t).loggedIn&&e(t).user.id===D.users.id?(b(),R("div",{key:0,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:Ue=>qt(A.id,D.id)},[_(U,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),T(" "+g(c.$t("delete")),1)],8,Zr)):I("",!0)])])])])])):I("",!0)],2))),128)),e(we)[A.id]&&e(We)?(b(),R("div",{key:1,class:"mb-1 text-center transition ease-in-out delay-75 cursor-pointer hover:font-semibold hover:underline text-color-secondary href",onClick:D=>Vt(A.id)},g(c.$t("comments.replies.loadMore")),9,Xr)):I("",!0)],8,Er)])])),[[re]])),128))]),e(C)._count?P((b(),R("div",{key:2,class:"text-center capitalize href",onClick:m[25]||(m[25]=$e(A=>At(e(C).id),["prevent"]))},g(c.$t("comments.loadOlder")),513)),[[L,e(C)._count.artwork_comments>3&&e(Te)]]):I("",!0),P(n("div",{class:"w-full text-xs italic text-center"},g(c.$t("comments.reachedTheEnd")),513),[[L,e(M).length&&!e(Te)]]),e(t).loggedIn&&!e(M).length&&!e(Q)?(b(),R("div",en,g(c.$t("comments.noCommentYet")),1)):I("",!0)])])]),tn,n("div",sn,[an,e(ae)?I("",!0):(b(),ee(oo,{key:0,"work-id":e(C).id,"is-modal":V},null,8,["work-id"]))]),e(ae)?I("",!0):(b(),ee(Ks,{key:0,id:"collection-selection-modal","modal-id":"collection-selection-modal",ref_key:"collectionSelectionModalRef",ref:Xe,"work-id":e(C).id,class:"modal",onSave:Dt},null,8,["work-id"])),!e(ae)&&e(t).loggedIn&&e(C).users&&e(t).user.id==e(C).users.id?(b(),ee(e(ua),{key:1,id:"album-selection-modal",ref_key:"albumSelectionModalRef",ref:dt,class:"modal","modal-id":"album-selection-modal","work-id":e(C).id,onAddedToAlbum:Ht},null,8,["work-id"])):I("",!0),_(wa,{id:"work-deletion-confirm-modal",class:"modal","modal-id":"work-deletion-confirm-modal",message:`${c.$t("alert.areYouSure")} ${c.$t("alert.youCannotUndoThisAction")}`,onOnAccept:m[26]||(m[26]=A=>ct(e(C).id))},null,8,["message"]),_(Ua,{id:"report-modal",ref_key:"reportModalRef",ref:Wt,class:"modal",type:"artwork","post-id":e(C).id,"report-status":e(N)},null,8,["post-id","report-status"]),_(Ha,{id:"share-to-feed-modal",ref:"shareToFeedModalRef",class:"modal","post-id":e(C).id},null,8,["post-id"]),_(eo,{id:"user-liked-modal",class:"modal","work-id":e(C).id},null,8,["work-id"]),P(_(nt,{id:"copy-alert",text:c.$t("linkCopied"),icon:"i-bi-check-all"},null,8,["text"]),[[L,e(ut)]])],2),[[L,!e(ae)]])],64)}}},fn=be(on,[["__scopeId","data-v-eef3185f"]]);export{fn as M,st as P,nt as S,wa as _,Ks as a,ds as b,rt as c,Zs as d,Es as e,ua as f,pt as u};
