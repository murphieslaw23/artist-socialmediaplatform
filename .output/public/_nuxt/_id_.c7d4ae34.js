import{k as T,j as W,a as D,I as K,m as j,r as h,a1 as P,o as r,p as x,q as o,s as C,t as l,e as S,w as L,b as k,v as I,u as t,K as p,F as H,T as J,G as m,c as n,L as c,x as $,y as Q,M as X,N as Z,l as ee,Y as te}from"./entry.ae51314b.js";import{u as z}from"./ProBadge.de1f3ff6.js";import{L as oe}from"./Layout.288d44a5.js";import{v as se}from"./vue3-editor.common.5407f97f.js";import{S as N}from"./Spinner.96f551a8.js";import{_ as ae}from"./_plugin-vue_export-helper.a1a6add7.js";const E=d=>(X("data-v-9aa441cc"),d=d(),Z(),d),re={class:"mb-4 text-base font-bold"},ie={class:"text-xs italic font-bold href"},le={class:"alert-success"},ne={class:"italic"},ce={class:"flex flex-row p-2 mb-6 text-white rounded-md button-color"},de=["onSubmit"],ue={class:"input-block"},pe=["placeholder"],he={class:"-mt-2 input-block"},ge={class:"input-block"},_e={class:"grid grid-cols-1 gap-2 input-block md:grid-cols-3"},ve={class:"toggler-box__icons"},fe={class:"toggler-box__description"},ke=E(()=>o("span",null," Check this if your work contain explicit content (explicit art wihout explicit mark will be forcibly taken down) ",-1)),me={class:"toggler-box__icons"},we=E(()=>o("div",{class:"toggler-box__description"},[o("b",null,"Contain Gore"),o("span",null," Check this if your work contain blood, etc. ")],-1)),ye={class:"grid grid-cols-1 gap-2 md:grid-cols-3 input-block"},be={class:"toggler-box__icons"},xe={class:"toggler-box__description"},Ce=E(()=>o("span",null," Check this if the character in your work is your original character made by you (don't check this if the character is someone else's or a character from animation series) ",-1)),Ie={class:"toggler-box__icons"},$e={class:"toggler-box__description"},Se=E(()=>o("span",null," Check this if you allow other artist to redraw your artwork ",-1)),Ee={class:"toggler-box__icons"},Re={class:"toggler-box__description"},Ae=E(()=>o("span",null," Check this if you redraw the art with your own drawing style. ",-1)),Ve={class:"flex flex-row"},Me={__name:"UpdateForm",props:{id:{type:String,default:""}},setup(d){const w=d,G=T(),{oApiConfiguration:O,fetchOptions:R}=W(),A=z(O,R()),{$router:V}=D(),B=K().public.apiUrl;j(()=>{G.loggedIn||V.push("/"),g()});const y=h(!1),_=h({}),g=async()=>{const[s,a]=await A.getWorkById(w.id);a?y.value=!0:(_.value=s,e.value.title=s.title,e.value.description=s.description.split("<br><br>").join(` 
`).split("<br>").join(""),e.value.isExplicit=!!s.is_explicit,e.value.isGore=!!s.is_gore,e.value.isOriginalCharacter=!!s.is_original_character,e.value.isAllowRedraw=!!s.allow_redraw,e.value.isRedrawInMyStyle=!!s.redraw_in_your_style,s.artwork_has_tags.forEach(b=>{v.value.push({key:b.artwork_tags.id,value:b.artwork_tags.tag})}))},e=h({title:"",description:"",tags:"",isExplicit:!1,isGore:!1,isOriginalCharacter:!1,isAllowRedraw:!1,isRedrawInMyStyle:!1}),v=h([]),u=h(!1),f=h(!1),F=h(!1),Y=async()=>{const s=[];v.value.forEach(a=>{s.push(a.value)}),u.value=!0,f.value=!1;try{const a=[];v.value.forEach(i=>{a.push(i.value)});const[b,U]=await A.updateInfo({id:w.id,title:e.value.title,description:e.value.description,isExplicit:e.value.isExplicit,isGore:e.value.isGore,tags:a.toString(),isOriginalCharacter:e.value.isOriginalCharacter,allowRedraw:e.value.isAllowRedraw,redrawInYourStyle:e.value.isRedrawInMyStyle});U?F.value=!0:(f.value=!0,setTimeout(()=>{V.push(`/a/${w.id}`)},1e3))}catch{F.value=!0}u.value=!1},q=()=>{e.value.isExplicit=!e.value.isExplicit,e.value.isGore=!1};return(s,a)=>{const b=Q,U=P("tags-input");return r(),x("div",null,[o("div",re,[C(l(s.$t("artworks.update.form.title"))+" ",1),o("span",ie,[S(b,{to:"/a/"+d.id},{default:L(()=>[C(" (ID: "+l(d.id)+") ",1)]),_:1},8,["to"])])]),k(o("div",{class:"alert-danger"},l(s.$t("artworks.update.form.fetchFailure")),513),[[I,t(y)]]),k(o("div",le,[C(l(s.$t("artworks.update.form.updated"))+" ",1),o("span",ne,l(s.$t("artworks.update.form.successRedirect")),1)],512),[[I,t(f)]]),k(o("div",ce,[S(N,{class:"mr-1"}),C(" "+l(s.$t("saving")),1)],512),[[I,t(u)]]),k(o("div",{class:"alert-danger"},l(s.$t("artworks.add.form.uploadFailure")),513),[[I,t(F)]]),k(o("form",{enctype:"multipart/form-data",onSubmit:m(Y,["prevent"])},[o("div",ue,[k(o("input",{"onUpdate:modelValue":a[0]||(a[0]=i=>t(e).title=i),type:"text",class:p(["form-input input",{"pointer-events-none cursor-not-allowed":t(u)||t(f)}]),placeholder:s.$t("title")},null,10,pe),[[H,t(e).title]])]),o("div",he,[S(t(se.exports.VueEditor),{modelValue:t(e).description,"onUpdate:modelValue":a[1]||(a[1]=i=>t(e).description=i),editorToolbar:[[{size:["normal","large"]}],["bold","italic","underline","strike"],["link"],[{color:[]},{background:[]}],["clean"]],class:p([{"pointer-events-none cursor-not-allowed":t(u)||t(f)}]),placeholder:s.$t("description")},null,8,["modelValue","class","placeholder"])]),o("div",ge,[S(U,{modelValue:t(v),"onUpdate:modelValue":a[2]||(a[2]=i=>J(v)?v.value=i:null),placeholder:s.$t("tagsInputPlaceholder"),typeahead:!0,"typeahead-style":"dropdown","typeahead-activation-threshold":2,"typeahead-show-on-focus":!0,"typeahead-hide-discard":!0,"typeahead-url":t(B)+"/artworks/tags/search?keyword=:search","add-tags-on-comma":!0},null,8,["modelValue","placeholder","typeahead-url"])]),o("div",_e,[o("div",{onClick:a[3]||(a[3]=m(i=>q(),["prevent"])),class:p(["toggler-box",{"toggler-box__active":t(e).isExplicit}])},[o("div",ve,[t(e).isExplicit?(r(),n(c,{key:1,name:"i-ic-outline-check",class:"text-green-500"})):(r(),n(c,{key:0,name:"i-fluent-checkbox-unchecked-20-regular"}))]),o("div",fe,[o("b",null,l(s.$t("explicitContent")),1),ke])],2),t(e).isExplicit?(r(),x("div",{key:0,onClick:a[4]||(a[4]=m(i=>t(e).isGore=!t(e).isGore,["prevent"])),class:p(["toggler-box",{"toggler-box__active":t(e).isGore}])},[o("div",me,[t(e).isGore?(r(),n(c,{key:1,name:"i-ic-outline-check",class:"text-green-500"})):(r(),n(c,{key:0,name:"i-fluent-checkbox-unchecked-20-regular"}))]),we],2)):$("",!0)]),o("div",ye,[t(_).redraw_of?$("",!0):(r(),x("div",{key:0,onClick:a[5]||(a[5]=m(i=>t(e).isOriginalCharacter=!t(e).isOriginalCharacter,["prevent"])),class:p(["toggler-box",{"toggler-box__active":t(e).isOriginalCharacter}])},[o("div",be,[t(e).isOriginalCharacter?(r(),n(c,{key:1,name:"i-ic-outline-check",class:"text-green-500"})):(r(),n(c,{key:0,name:"i-fluent-checkbox-unchecked-20-regular"}))]),o("div",xe,[o("b",null,l(s.$t("artworks.originalCharacter")),1),Ce])],2)),t(_).redraw_of?$("",!0):(r(),x("div",{key:1,onClick:a[6]||(a[6]=m(i=>t(e).isAllowRedraw=!t(e).isAllowRedraw,["prevent"])),class:p(["toggler-box",{"toggler-box__active":t(e).isAllowRedraw}])},[o("div",Ie,[t(e).isAllowRedraw?(r(),n(c,{key:1,name:"i-ic-outline-check",class:"text-green-500"})):(r(),n(c,{key:0,name:"i-fluent-checkbox-unchecked-20-regular"}))]),o("div",$e,[o("b",null,l(s.$t("artworks.add.form.allowRedraw")),1),Se])],2)),t(_).redraw_of?(r(),x("div",{key:2,onClick:a[7]||(a[7]=m(i=>t(e).isredrawInMyStyle=!t(e).isredrawInMyStyle,["prevent"])),class:p(["toggler-box",{"toggler-box__active":t(e).isredrawInMyStyle}])},[o("div",Ee,[t(e).isredrawInMyStyle?(r(),n(c,{key:1,name:"i-ic-outline-check",class:"text-green-500"})):(r(),n(c,{key:0,name:"i-fluent-checkbox-unchecked-20-regular"}))]),o("div",Re,[o("b",null,l(s.$t("artworks.add.form.redrawInMyStyle")),1),Ae])],2)):$("",!0)]),o("button",{class:p(["float-right primary-button",{"pointer-events-none cursor-not-allowed":t(u)||t(f)}])},[o("div",Ve,[t(u)?(r(),n(N,{key:0,class:"mr-1"})):$("",!0),C(" "+l(t(u)?s.$t("saving"):s.$t("save")),1)])],2)],40,de),[[I,!t(y)]])])}}},Ge=ae(Me,[["__scopeId","data-v-9aa441cc"]]),We={__name:"[id]",setup(d){const w=T(),{oApiConfiguration:G,fetchOptions:O}=W(),R=z(G,O()),{$router:A}=D(),V=ee(),{id:M}=A.currentRoute.value.params;te(async()=>{await B()}),j(()=>{_()});const B=async()=>{const[g,e]=await R.getWorkById(M);(g.user_id!==w.user.id||e)&&V.push({path:"/"})},y=h({}),_=async()=>{try{const[g,e]=await R.getWorkById(M);e||(y.value=g)}catch{}};return(g,e)=>(r(),n(oe,{"with-footer":!0,"h-screen":!0},{default:L(()=>[S(t(Ge),{id:t(M)},null,8,["id"])]),_:1}))}};export{We as default};
