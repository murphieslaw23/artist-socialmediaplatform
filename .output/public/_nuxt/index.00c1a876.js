import{a8 as Ns,j as Vl,C as qa,I as Ul,O as jl,a as Ya,k as za,E as Xa,D as Hl,m as Wl,af as $l,r as Re,a1 as ql,o as Qe,p as pt,q,t as Ee,u as U,e as Me,s as Jt,c as ri,w as ii,x as At,b as Ce,v as He,F as Gs,K as ht,T as Ka,L as On,G as Qa,$ as Yl,h as zl,y as Xl,f as Fs}from"./entry.e86746f3.js";import{u as Kl,L as Ql}from"./Layout.04566d95.js";import{u as Zl,a as Jl,_ as ec}from"./nuxt-img.978eb1b8.js";import{u as tc,a as nc}from"./useFeed.1ec68f4a.js";import{v as Za}from"./vue3-editor.common.0d385de4.js";import{S as Dn}from"./Spinner.cfab8439.js";import{_ as rc}from"./_plugin-vue_export-helper.a1a6add7.js";(()=>{function e(o){return function(s){if(Array.isArray(s))return t(s)}(o)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(o)||function(s,d){if(!!s){if(typeof s=="string")return t(s,d);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return t(s,d)}}(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function t(o,s){(s==null||s>o.length)&&(s=o.length);for(var d=0,a=new Array(s);d<s;d++)a[d]=o[d];return a}function n(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function r(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?n(Object(d),!0).forEach(function(a){i(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):n(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function i(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function l(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function c(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var u={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:function(){},onClose:function(){},onToggle:function(){}},f=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l(this,o),this._items=a,this._options=r(r({},u),g),this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;this._items.length&&this._items.map(function(g){g.active&&a.open(g.id),g.triggerEl.addEventListener("click",function(){a.toggle(g.id)})})}},{key:"getItem",value:function(a){return this._items.filter(function(g){return g.id===a})[0]}},{key:"open",value:function(a){var g,I,R=this,M=this.getItem(a);this._options.alwaysOpen||this._items.map(function(B){var V,Y;B!==M&&((V=B.triggerEl.classList).remove.apply(V,e(R._options.activeClasses.split(" "))),(Y=B.triggerEl.classList).add.apply(Y,e(R._options.inactiveClasses.split(" "))),B.targetEl.classList.add("hidden"),B.triggerEl.setAttribute("aria-expanded",!1),B.active=!1,B.iconEl&&B.iconEl.classList.remove("rotate-180"))}),(g=M.triggerEl.classList).add.apply(g,e(this._options.activeClasses.split(" "))),(I=M.triggerEl.classList).remove.apply(I,e(this._options.inactiveClasses.split(" "))),M.triggerEl.setAttribute("aria-expanded",!0),M.targetEl.classList.remove("hidden"),M.active=!0,M.iconEl&&M.iconEl.classList.add("rotate-180"),this._options.onOpen(this,M)}},{key:"toggle",value:function(a){var g=this.getItem(a);g.active?this.close(a):this.open(a),this._options.onToggle(this,g)}},{key:"close",value:function(a){var g,I,R=this.getItem(a);(g=R.triggerEl.classList).remove.apply(g,e(this._options.activeClasses.split(" "))),(I=R.triggerEl.classList).add.apply(I,e(this._options.inactiveClasses.split(" "))),R.targetEl.classList.add("hidden"),R.triggerEl.setAttribute("aria-expanded",!1),R.active=!1,R.iconEl&&R.iconEl.classList.remove("rotate-180"),this._options.onClose(this,R)}}])&&c(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function h(){document.querySelectorAll("[data-accordion]").forEach(function(o){var s=o.getAttribute("data-accordion"),d=o.getAttribute("data-active-classes"),a=o.getAttribute("data-inactive-classes"),g=[];o.querySelectorAll("[data-accordion-target]").forEach(function(I){var R={id:I.getAttribute("data-accordion-target"),triggerEl:I,targetEl:document.querySelector(I.getAttribute("data-accordion-target")),iconEl:I.querySelector("[data-accordion-icon]"),active:I.getAttribute("aria-expanded")==="true"};g.push(R)}),new f(g,{alwaysOpen:s==="open",activeClasses:d||u.activeClasses,inactiveClasses:a||u.inactiveClasses})})}window.Accordion=f,document.readyState!=="loading"?h():document.addEventListener("DOMContentLoaded",h);function p(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function m(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?p(Object(d),!0).forEach(function(a){w(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):p(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function w(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function b(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function _(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var v={triggerEl:null,onCollapse:function(){},onExpand:function(){},onToggle:function(){}},T=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1?arguments[1]:void 0;b(this,o),this._targetEl=a,this._triggerEl=g?g.triggerEl:v.triggerEl,this._options=m(m({},v),g),this._visible=!1,this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;this._triggerEl&&(this._triggerEl.hasAttribute("aria-expanded")?this._visible=this._triggerEl.getAttribute("aria-expanded")==="true":this._visible=!this._targetEl.classList.contains("hidden"),this._triggerEl.addEventListener("click",function(){a._visible?a.collapse():a.expand()}))}},{key:"collapse",value:function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)}},{key:"expand",value:function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)}},{key:"toggle",value:function(){this._visible?this.collapse():this.expand()}}])&&_(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function D(){document.querySelectorAll("[data-collapse-toggle]").forEach(function(o){var s=document.getElementById(o.getAttribute("data-collapse-toggle"));new T(s,{triggerEl:o})})}window.Collapse=T,document.readyState!=="loading"?D():document.addEventListener("DOMContentLoaded",D);function y(o){return function(s){if(Array.isArray(s))return E(s)}(o)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(o)||function(s,d){if(!!s){if(typeof s=="string")return E(s,d);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return E(s,d)}}(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function E(o,s){(s==null||s>o.length)&&(s=o.length);for(var d=0,a=new Array(s);d<s;d++)a[d]=o[d];return a}function O(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function S(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?O(Object(d),!0).forEach(function(a){G(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):O(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function G(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function $(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function L(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var N={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:function(){},onPrev:function(){},onChange:function(){}},z=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$(this,o),this._items=a,this._options=S(S(S({},N),g),{},{indicators:S(S({},N.indicators),g.indicators)}),this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._interval=null,this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;this._items.map(function(g){g.el.classList.add("absolute","inset-0","transition-all","transform")}),this._getActiveItem()?this.slideTo(this._getActiveItem().position):this.slideTo(0),this._indicators.map(function(g,I){g.el.addEventListener("click",function(){a.slideTo(I)})})}},{key:"getItem",value:function(a){return this._items[a]}},{key:"slideTo",value:function(a){var g=this._items[a],I={left:g.position===0?this._items[this._items.length-1]:this._items[g.position-1],middle:g,right:g.position===this._items.length-1?this._items[0]:this._items[g.position+1]};this._rotate(I),this._setActiveItem(g.position),this._interval&&(this.pause(),this.cycle()),this._options.onChange(this)}},{key:"next",value:function(){var a=this._getActiveItem(),g=null;g=a.position===this._items.length-1?this._items[0]:this._items[a.position+1],this.slideTo(g.position),this._options.onNext(this)}},{key:"prev",value:function(){var a=this._getActiveItem(),g=null;g=a.position===0?this._items[this._items.length-1]:this._items[a.position-1],this.slideTo(g.position),this._options.onPrev(this)}},{key:"_rotate",value:function(a){this._items.map(function(g){g.el.classList.add("hidden")}),a.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),a.left.el.classList.add("-translate-x-full","z-10"),a.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),a.middle.el.classList.add("translate-x-0","z-20"),a.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),a.right.el.classList.add("translate-x-full","z-10")}},{key:"cycle",value:function(){var a=this;this._interval=setInterval(function(){a.next()},this._options.interval)}},{key:"pause",value:function(){clearInterval(this._interval)}},{key:"_getActiveItem",value:function(){return this._activeItem}},{key:"_setActiveItem",value:function(a){var g,I,R=this;this._activeItem=this._items[a],this._indicators.length&&(this._indicators.map(function(M){var B,V;M.el.setAttribute("aria-current","false"),(B=M.el.classList).remove.apply(B,y(R._options.indicators.activeClasses.split(" "))),(V=M.el.classList).add.apply(V,y(R._options.indicators.inactiveClasses.split(" ")))}),(g=this._indicators[a].el.classList).add.apply(g,y(this._options.indicators.activeClasses.split(" "))),(I=this._indicators[a].el.classList).remove.apply(I,y(this._options.indicators.inactiveClasses.split(" "))),this._indicators[a].el.setAttribute("aria-current","true"))}}])&&L(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function j(){document.querySelectorAll("[data-carousel]").forEach(function(o){var s=o.getAttribute("data-carousel-interval"),d=o.getAttribute("data-carousel")==="slide",a=[],g=0;o.querySelectorAll("[data-carousel-item]").length&&y(o.querySelectorAll("[data-carousel-item]")).map(function(V,Y){a.push({position:Y,el:V}),V.getAttribute("data-carousel-item")==="active"&&(g=Y)});var I=[];o.querySelectorAll("[data-carousel-slide-to]").length&&y(o.querySelectorAll("[data-carousel-slide-to]")).map(function(V){I.push({position:V.getAttribute("data-carousel-slide-to"),el:V})});var R=new z(a,{defaultPosition:g,indicators:{items:I},interval:s||N.interval});d&&R.cycle();var M=o.querySelector("[data-carousel-next]"),B=o.querySelector("[data-carousel-prev]");M&&M.addEventListener("click",function(){R.next()}),B&&B.addEventListener("click",function(){R.prev()})})}window.Carousel=z,document.readyState!=="loading"?j():document.addEventListener("DOMContentLoaded",j);function H(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function ee(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?H(Object(d),!0).forEach(function(a){k(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):H(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function k(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function Z(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function A(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var x={triggerEl:null,transition:"transition-opacity",duration:300,timing:"ease-out",onHide:function(){}},W=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Z(this,o),this._targetEl=a,this._triggerEl=g?g.triggerEl:x.triggerEl,this._options=ee(ee({},x),g),this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;this._triggerEl&&this._triggerEl.addEventListener("click",function(){a.hide()})}},{key:"hide",value:function(){var a=this;this._targetEl.classList.add(this._options.transition,"duration-".concat(this._options.duration),this._options.timing,"opacity-0"),setTimeout(function(){a._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)}}])&&A(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function C(){document.querySelectorAll("[data-dismiss-target]").forEach(function(o){var s=document.querySelector(o.getAttribute("data-dismiss-target"));new W(s,{triggerEl:o})})}window.Dismiss=W,document.readyState!=="loading"?C():document.addEventListener("DOMContentLoaded",C);function F(o){if(o==null)return window;if(o.toString()!=="[object Window]"){var s=o.ownerDocument;return s&&s.defaultView||window}return o}function J(o){return o instanceof F(o).Element||o instanceof Element}function ie(o){return o instanceof F(o).HTMLElement||o instanceof HTMLElement}function pe(o){return typeof ShadowRoot<"u"&&(o instanceof F(o).ShadowRoot||o instanceof ShadowRoot)}var fe=Math.max,he=Math.min,Q=Math.round;function _e(o,s){s===void 0&&(s=!1);var d=o.getBoundingClientRect(),a=1,g=1;if(ie(o)&&s){var I=o.offsetHeight,R=o.offsetWidth;R>0&&(a=Q(d.width)/R||1),I>0&&(g=Q(d.height)/I||1)}return{width:d.width/a,height:d.height/g,top:d.top/g,right:d.right/a,bottom:d.bottom/g,left:d.left/a,x:d.left/a,y:d.top/g}}function We(o){var s=F(o);return{scrollLeft:s.pageXOffset,scrollTop:s.pageYOffset}}function Pe(o){return o?(o.nodeName||"").toLowerCase():null}function ye(o){return((J(o)?o.ownerDocument:o.document)||window.document).documentElement}function yt(o){return _e(ye(o)).left+We(o).scrollLeft}function ut(o){return F(o).getComputedStyle(o)}function wr(o){var s=ut(o),d=s.overflow,a=s.overflowX,g=s.overflowY;return/auto|scroll|overlay|hidden/.test(d+g+a)}function nl(o,s,d){d===void 0&&(d=!1);var a,g,I=ie(s),R=ie(s)&&function(X){var ve=X.getBoundingClientRect(),re=Q(ve.width)/X.offsetWidth||1,de=Q(ve.height)/X.offsetHeight||1;return re!==1||de!==1}(s),M=ye(s),B=_e(o,R),V={scrollLeft:0,scrollTop:0},Y={x:0,y:0};return(I||!I&&!d)&&((Pe(s)!=="body"||wr(M))&&(V=(a=s)!==F(a)&&ie(a)?{scrollLeft:(g=a).scrollLeft,scrollTop:g.scrollTop}:We(a)),ie(s)?((Y=_e(s,!0)).x+=s.clientLeft,Y.y+=s.clientTop):M&&(Y.x=yt(M))),{x:B.left+V.scrollLeft-Y.x,y:B.top+V.scrollTop-Y.y,width:B.width,height:B.height}}function Ir(o){var s=_e(o),d=o.offsetWidth,a=o.offsetHeight;return Math.abs(s.width-d)<=1&&(d=s.width),Math.abs(s.height-a)<=1&&(a=s.height),{x:o.offsetLeft,y:o.offsetTop,width:d,height:a}}function xn(o){return Pe(o)==="html"?o:o.assignedSlot||o.parentNode||(pe(o)?o.host:null)||ye(o)}function ki(o){return["html","body","#document"].indexOf(Pe(o))>=0?o.ownerDocument.body:ie(o)&&wr(o)?o:ki(xn(o))}function fn(o,s){var d;s===void 0&&(s=[]);var a=ki(o),g=a===((d=o.ownerDocument)==null?void 0:d.body),I=F(a),R=g?[I].concat(I.visualViewport||[],wr(a)?a:[]):a,M=s.concat(R);return g?M:M.concat(fn(xn(R)))}function rl(o){return["table","td","th"].indexOf(Pe(o))>=0}function Ni(o){return ie(o)&&ut(o).position!=="fixed"?o.offsetParent:null}function pn(o){for(var s=F(o),d=Ni(o);d&&rl(d)&&ut(d).position==="static";)d=Ni(d);return d&&(Pe(d)==="html"||Pe(d)==="body"&&ut(d).position==="static")?s:d||function(a){var g=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1;if(navigator.userAgent.indexOf("Trident")!==-1&&ie(a)&&ut(a).position==="fixed")return null;for(var I=xn(a);ie(I)&&["html","body"].indexOf(Pe(I))<0;){var R=ut(I);if(R.transform!=="none"||R.perspective!=="none"||R.contain==="paint"||["transform","perspective"].indexOf(R.willChange)!==-1||g&&R.willChange==="filter"||g&&R.filter&&R.filter!=="none")return I;I=I.parentNode}return null}(o)||s}var Ge="top",qe="bottom",Ye="right",Fe="left",Tr="auto",hn=[Ge,qe,Ye,Fe],Ut="start",gn="end",Gi="viewport",mn="popper",Fi=hn.reduce(function(o,s){return o.concat([s+"-"+Ut,s+"-"+gn])},[]),Bi=[].concat(hn,[Tr]).reduce(function(o,s){return o.concat([s,s+"-"+Ut,s+"-"+gn])},[]),il=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function sl(o){var s=new Map,d=new Set,a=[];function g(I){d.add(I.name),[].concat(I.requires||[],I.requiresIfExists||[]).forEach(function(R){if(!d.has(R)){var M=s.get(R);M&&g(M)}}),a.push(I)}return o.forEach(function(I){s.set(I.name,I)}),o.forEach(function(I){d.has(I.name)||g(I)}),a}var Vi={placement:"bottom",modifiers:[],strategy:"absolute"};function Ui(){for(var o=arguments.length,s=new Array(o),d=0;d<o;d++)s[d]=arguments[d];return!s.some(function(a){return!(a&&typeof a.getBoundingClientRect=="function")})}function al(o){o===void 0&&(o={});var s=o,d=s.defaultModifiers,a=d===void 0?[]:d,g=s.defaultOptions,I=g===void 0?Vi:g;return function(R,M,B){B===void 0&&(B=I);var V,Y,X={placement:"bottom",orderedModifiers:[],options:Object.assign({},Vi,I),modifiersData:{},elements:{reference:R,popper:M},attributes:{},styles:{}},ve=[],re=!1,de={state:X,setOptions:function(ne){var we=typeof ne=="function"?ne(X.options):ne;ce(),X.options=Object.assign({},I,X.options,we),X.scrollParents={reference:J(R)?fn(R):R.contextElement?fn(R.contextElement):[],popper:fn(M)};var ge=function(te){var se=sl(te);return il.reduce(function(ae,oe){return ae.concat(se.filter(function(le){return le.phase===oe}))},[])}(function(te){var se=te.reduce(function(ae,oe){var le=ae[oe.name];return ae[oe.name]=le?Object.assign({},le,oe,{options:Object.assign({},le.options,oe.options),data:Object.assign({},le.data,oe.data)}):oe,ae},{});return Object.keys(se).map(function(ae){return se[ae]})}([].concat(a,X.options.modifiers)));return X.orderedModifiers=ge.filter(function(te){return te.enabled}),X.orderedModifiers.forEach(function(te){var se=te.name,ae=te.options,oe=ae===void 0?{}:ae,le=te.effect;if(typeof le=="function"){var ue=le({state:X,name:se,instance:de,options:oe}),me=function(){};ve.push(ue||me)}}),de.update()},forceUpdate:function(){if(!re){var ne=X.elements,we=ne.reference,ge=ne.popper;if(Ui(we,ge)){X.rects={reference:nl(we,pn(ge),X.options.strategy==="fixed"),popper:Ir(ge)},X.reset=!1,X.placement=X.options.placement,X.orderedModifiers.forEach(function(me){return X.modifiersData[me.name]=Object.assign({},me.data)});for(var te=0;te<X.orderedModifiers.length;te++)if(X.reset!==!0){var se=X.orderedModifiers[te],ae=se.fn,oe=se.options,le=oe===void 0?{}:oe,ue=se.name;typeof ae=="function"&&(X=ae({state:X,options:le,name:ue,instance:de})||X)}else X.reset=!1,te=-1}}},update:(V=function(){return new Promise(function(ne){de.forceUpdate(),ne(X)})},function(){return Y||(Y=new Promise(function(ne){Promise.resolve().then(function(){Y=void 0,ne(V())})})),Y}),destroy:function(){ce(),re=!0}};if(!Ui(R,M))return de;function ce(){ve.forEach(function(ne){return ne()}),ve=[]}return de.setOptions(B).then(function(ne){!re&&B.onFirstUpdate&&B.onFirstUpdate(ne)}),de}}var kn={passive:!0};function ot(o){return o.split("-")[0]}function jt(o){return o.split("-")[1]}function Or(o){return["top","bottom"].indexOf(o)>=0?"x":"y"}function ji(o){var s,d=o.reference,a=o.element,g=o.placement,I=g?ot(g):null,R=g?jt(g):null,M=d.x+d.width/2-a.width/2,B=d.y+d.height/2-a.height/2;switch(I){case Ge:s={x:M,y:d.y-a.height};break;case qe:s={x:M,y:d.y+d.height};break;case Ye:s={x:d.x+d.width,y:B};break;case Fe:s={x:d.x-a.width,y:B};break;default:s={x:d.x,y:d.y}}var V=I?Or(I):null;if(V!=null){var Y=V==="y"?"height":"width";switch(R){case Ut:s[V]=s[V]-(d[Y]/2-a[Y]/2);break;case gn:s[V]=s[V]+(d[Y]/2-a[Y]/2)}}return s}var ol={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Hi(o){var s,d=o.popper,a=o.popperRect,g=o.placement,I=o.variation,R=o.offsets,M=o.position,B=o.gpuAcceleration,V=o.adaptive,Y=o.roundOffsets,X=o.isFixed,ve=R.x,re=ve===void 0?0:ve,de=R.y,ce=de===void 0?0:de,ne=typeof Y=="function"?Y({x:re,y:ce}):{x:re,y:ce};re=ne.x,ce=ne.y;var we=R.hasOwnProperty("x"),ge=R.hasOwnProperty("y"),te=Fe,se=Ge,ae=window;if(V){var oe=pn(d),le="clientHeight",ue="clientWidth";oe===F(d)&&ut(oe=ye(d)).position!=="static"&&M==="absolute"&&(le="scrollHeight",ue="scrollWidth"),(g===Ge||(g===Fe||g===Ye)&&I===gn)&&(se=qe,ce-=(X&&ae.visualViewport?ae.visualViewport.height:oe[le])-a.height,ce*=B?1:-1),(g===Fe||(g===Ge||g===qe)&&I===gn)&&(te=Ye,re-=(X&&ae.visualViewport?ae.visualViewport.width:oe[ue])-a.width,re*=B?1:-1)}var me,Le=Object.assign({position:M},V&&ol),Be=Y===!0?function(Je){var ft=Je.x,Ot=Je.y,et=window.devicePixelRatio||1;return{x:Q(ft*et)/et||0,y:Q(Ot*et)/et||0}}({x:re,y:ce}):{x:re,y:ce};return re=Be.x,ce=Be.y,B?Object.assign({},Le,((me={})[se]=ge?"0":"",me[te]=we?"0":"",me.transform=(ae.devicePixelRatio||1)<=1?"translate("+re+"px, "+ce+"px)":"translate3d("+re+"px, "+ce+"px, 0)",me)):Object.assign({},Le,((s={})[se]=ge?ce+"px":"",s[te]=we?re+"px":"",s.transform="",s))}const ll={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(o){var s=o.state,d=o.options,a=o.name,g=d.offset,I=g===void 0?[0,0]:g,R=Bi.reduce(function(Y,X){return Y[X]=function(ve,re,de){var ce=ot(ve),ne=[Fe,Ge].indexOf(ce)>=0?-1:1,we=typeof de=="function"?de(Object.assign({},re,{placement:ve})):de,ge=we[0],te=we[1];return ge=ge||0,te=(te||0)*ne,[Fe,Ye].indexOf(ce)>=0?{x:te,y:ge}:{x:ge,y:te}}(X,s.rects,I),Y},{}),M=R[s.placement],B=M.x,V=M.y;s.modifiersData.popperOffsets!=null&&(s.modifiersData.popperOffsets.x+=B,s.modifiersData.popperOffsets.y+=V),s.modifiersData[a]=R}};var cl={left:"right",right:"left",bottom:"top",top:"bottom"};function Nn(o){return o.replace(/left|right|bottom|top/g,function(s){return cl[s]})}var dl={start:"end",end:"start"};function Wi(o){return o.replace(/start|end/g,function(s){return dl[s]})}function $i(o,s){var d=s.getRootNode&&s.getRootNode();if(o.contains(s))return!0;if(d&&pe(d)){var a=s;do{if(a&&o.isSameNode(a))return!0;a=a.parentNode||a.host}while(a)}return!1}function Dr(o){return Object.assign({},o,{left:o.x,top:o.y,right:o.x+o.width,bottom:o.y+o.height})}function qi(o,s){return s===Gi?Dr(function(d){var a=F(d),g=ye(d),I=a.visualViewport,R=g.clientWidth,M=g.clientHeight,B=0,V=0;return I&&(R=I.width,M=I.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(B=I.offsetLeft,V=I.offsetTop)),{width:R,height:M,x:B+yt(d),y:V}}(o)):J(s)?function(d){var a=_e(d);return a.top=a.top+d.clientTop,a.left=a.left+d.clientLeft,a.bottom=a.top+d.clientHeight,a.right=a.left+d.clientWidth,a.width=d.clientWidth,a.height=d.clientHeight,a.x=a.left,a.y=a.top,a}(s):Dr(function(d){var a,g=ye(d),I=We(d),R=(a=d.ownerDocument)==null?void 0:a.body,M=fe(g.scrollWidth,g.clientWidth,R?R.scrollWidth:0,R?R.clientWidth:0),B=fe(g.scrollHeight,g.clientHeight,R?R.scrollHeight:0,R?R.clientHeight:0),V=-I.scrollLeft+yt(d),Y=-I.scrollTop;return ut(R||g).direction==="rtl"&&(V+=fe(g.clientWidth,R?R.clientWidth:0)-M),{width:M,height:B,x:V,y:Y}}(ye(o)))}function ul(o,s,d){var a=s==="clippingParents"?function(M){var B=fn(xn(M)),V=["absolute","fixed"].indexOf(ut(M).position)>=0&&ie(M)?pn(M):M;return J(V)?B.filter(function(Y){return J(Y)&&$i(Y,V)&&Pe(Y)!=="body"}):[]}(o):[].concat(s),g=[].concat(a,[d]),I=g[0],R=g.reduce(function(M,B){var V=qi(o,B);return M.top=fe(V.top,M.top),M.right=he(V.right,M.right),M.bottom=he(V.bottom,M.bottom),M.left=fe(V.left,M.left),M},qi(o,I));return R.width=R.right-R.left,R.height=R.bottom-R.top,R.x=R.left,R.y=R.top,R}function Yi(o){return Object.assign({},{top:0,right:0,bottom:0,left:0},o)}function zi(o,s){return s.reduce(function(d,a){return d[a]=o,d},{})}function En(o,s){s===void 0&&(s={});var d=s,a=d.placement,g=a===void 0?o.placement:a,I=d.boundary,R=I===void 0?"clippingParents":I,M=d.rootBoundary,B=M===void 0?Gi:M,V=d.elementContext,Y=V===void 0?mn:V,X=d.altBoundary,ve=X!==void 0&&X,re=d.padding,de=re===void 0?0:re,ce=Yi(typeof de!="number"?de:zi(de,hn)),ne=Y===mn?"reference":mn,we=o.rects.popper,ge=o.elements[ve?ne:Y],te=ul(J(ge)?ge:ge.contextElement||ye(o.elements.popper),R,B),se=_e(o.elements.reference),ae=ji({reference:se,element:we,strategy:"absolute",placement:g}),oe=Dr(Object.assign({},we,ae)),le=Y===mn?oe:se,ue={top:te.top-le.top+ce.top,bottom:le.bottom-te.bottom+ce.bottom,left:te.left-le.left+ce.left,right:le.right-te.right+ce.right},me=o.modifiersData.offset;if(Y===mn&&me){var Le=me[g];Object.keys(ue).forEach(function(Be){var Je=[Ye,qe].indexOf(Be)>=0?1:-1,ft=[Ge,qe].indexOf(Be)>=0?"y":"x";ue[Be]+=Le[ft]*Je})}return ue}function _n(o,s,d){return fe(o,he(s,d))}const fl={name:"preventOverflow",enabled:!0,phase:"main",fn:function(o){var s=o.state,d=o.options,a=o.name,g=d.mainAxis,I=g===void 0||g,R=d.altAxis,M=R!==void 0&&R,B=d.boundary,V=d.rootBoundary,Y=d.altBoundary,X=d.padding,ve=d.tether,re=ve===void 0||ve,de=d.tetherOffset,ce=de===void 0?0:de,ne=En(s,{boundary:B,rootBoundary:V,padding:X,altBoundary:Y}),we=ot(s.placement),ge=jt(s.placement),te=!ge,se=Or(we),ae=se==="x"?"y":"x",oe=s.modifiersData.popperOffsets,le=s.rects.reference,ue=s.rects.popper,me=typeof ce=="function"?ce(Object.assign({},s.rects,{placement:s.placement})):ce,Le=typeof me=="number"?{mainAxis:me,altAxis:me}:Object.assign({mainAxis:0,altAxis:0},me),Be=s.modifiersData.offset?s.modifiersData.offset[s.placement]:null,Je={x:0,y:0};if(oe){if(I){var ft,Ot=se==="y"?Ge:Fe,et=se==="y"?qe:Ye,Ve=se==="y"?"height":"width",bt=oe[se],Dt=bt+ne[Ot],Bn=bt-ne[et],Yt=re?-ue[Ve]/2:0,tt=ge===Ut?le[Ve]:ue[Ve],nt=ge===Ut?-ue[Ve]:-le[Ve],zt=s.elements.arrow,vt=re&&zt?Ir(zt):{width:0,height:0},rt=s.modifiersData["arrow#persistent"]?s.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Vn=rt[Ot],Un=rt[et],Xt=_n(0,le[Ve],vt[Ve]),Nr=te?le[Ve]/2-Yt-Xt-Vn-Le.mainAxis:tt-Xt-Vn-Le.mainAxis,Gr=te?-le[Ve]/2+Yt+Xt+Un+Le.mainAxis:nt+Xt+Un+Le.mainAxis,Kt=s.elements.arrow&&pn(s.elements.arrow),Fr=Kt?se==="y"?Kt.clientTop||0:Kt.clientLeft||0:0,bn=(ft=Be==null?void 0:Be[se])!=null?ft:0,jn=bt+Gr-bn,Qt=_n(re?he(Dt,bt+Nr-bn-Fr):Dt,bt,re?fe(Bn,jn):Bn);oe[se]=Qt,Je[se]=Qt-bt}if(M){var Zt,lt=se==="x"?Ge:Fe,Rt=se==="x"?qe:Ye,St=oe[ae],Hn=ae==="y"?"height":"width",As=St+ne[lt],Ps=St-ne[Rt],Br=[Ge,Fe].indexOf(we)!==-1,Ls=(Zt=Be==null?void 0:Be[ae])!=null?Zt:0,Ms=Br?As:St-le[Hn]-ue[Hn]-Ls+Le.altAxis,Cs=Br?St+le[Hn]+ue[Hn]-Ls-Le.altAxis:Ps,xs=re&&Br?function(Fl,Bl,Vr){var ks=_n(Fl,Bl,Vr);return ks>Vr?Vr:ks}(Ms,St,Cs):_n(re?Ms:As,St,re?Cs:Ps);oe[ae]=xs,Je[ae]=xs-St}s.modifiersData[a]=Je}},requiresIfExists:["offset"]},pl={name:"arrow",enabled:!0,phase:"main",fn:function(o){var s,d=o.state,a=o.name,g=o.options,I=d.elements.arrow,R=d.modifiersData.popperOffsets,M=ot(d.placement),B=Or(M),V=[Fe,Ye].indexOf(M)>=0?"height":"width";if(I&&R){var Y=function(ue,me){return Yi(typeof(ue=typeof ue=="function"?ue(Object.assign({},me.rects,{placement:me.placement})):ue)!="number"?ue:zi(ue,hn))}(g.padding,d),X=Ir(I),ve=B==="y"?Ge:Fe,re=B==="y"?qe:Ye,de=d.rects.reference[V]+d.rects.reference[B]-R[B]-d.rects.popper[V],ce=R[B]-d.rects.reference[B],ne=pn(I),we=ne?B==="y"?ne.clientHeight||0:ne.clientWidth||0:0,ge=de/2-ce/2,te=Y[ve],se=we-X[V]-Y[re],ae=we/2-X[V]/2+ge,oe=_n(te,ae,se),le=B;d.modifiersData[a]=((s={})[le]=oe,s.centerOffset=oe-ae,s)}},effect:function(o){var s=o.state,d=o.options.element,a=d===void 0?"[data-popper-arrow]":d;a!=null&&(typeof a!="string"||(a=s.elements.popper.querySelector(a)))&&$i(s.elements.popper,a)&&(s.elements.arrow=a)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xi(o,s,d){return d===void 0&&(d={x:0,y:0}),{top:o.top-s.height-d.y,right:o.right-s.width+d.x,bottom:o.bottom-s.height+d.y,left:o.left-s.width-d.x}}function Ki(o){return[Ge,Ye,qe,Fe].some(function(s){return o[s]>=0})}var Rr=al({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(o){var s=o.state,d=o.instance,a=o.options,g=a.scroll,I=g===void 0||g,R=a.resize,M=R===void 0||R,B=F(s.elements.popper),V=[].concat(s.scrollParents.reference,s.scrollParents.popper);return I&&V.forEach(function(Y){Y.addEventListener("scroll",d.update,kn)}),M&&B.addEventListener("resize",d.update,kn),function(){I&&V.forEach(function(Y){Y.removeEventListener("scroll",d.update,kn)}),M&&B.removeEventListener("resize",d.update,kn)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(o){var s=o.state,d=o.name;s.modifiersData[d]=ji({reference:s.rects.reference,element:s.rects.popper,strategy:"absolute",placement:s.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(o){var s=o.state,d=o.options,a=d.gpuAcceleration,g=a===void 0||a,I=d.adaptive,R=I===void 0||I,M=d.roundOffsets,B=M===void 0||M,V={placement:ot(s.placement),variation:jt(s.placement),popper:s.elements.popper,popperRect:s.rects.popper,gpuAcceleration:g,isFixed:s.options.strategy==="fixed"};s.modifiersData.popperOffsets!=null&&(s.styles.popper=Object.assign({},s.styles.popper,Hi(Object.assign({},V,{offsets:s.modifiersData.popperOffsets,position:s.options.strategy,adaptive:R,roundOffsets:B})))),s.modifiersData.arrow!=null&&(s.styles.arrow=Object.assign({},s.styles.arrow,Hi(Object.assign({},V,{offsets:s.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:B})))),s.attributes.popper=Object.assign({},s.attributes.popper,{"data-popper-placement":s.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(o){var s=o.state;Object.keys(s.elements).forEach(function(d){var a=s.styles[d]||{},g=s.attributes[d]||{},I=s.elements[d];ie(I)&&Pe(I)&&(Object.assign(I.style,a),Object.keys(g).forEach(function(R){var M=g[R];M===!1?I.removeAttribute(R):I.setAttribute(R,M===!0?"":M)}))})},effect:function(o){var s=o.state,d={popper:{position:s.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(s.elements.popper.style,d.popper),s.styles=d,s.elements.arrow&&Object.assign(s.elements.arrow.style,d.arrow),function(){Object.keys(s.elements).forEach(function(a){var g=s.elements[a],I=s.attributes[a]||{},R=Object.keys(s.styles.hasOwnProperty(a)?s.styles[a]:d[a]).reduce(function(M,B){return M[B]="",M},{});ie(g)&&Pe(g)&&(Object.assign(g.style,R),Object.keys(I).forEach(function(M){g.removeAttribute(M)}))})}},requires:["computeStyles"]},ll,{name:"flip",enabled:!0,phase:"main",fn:function(o){var s=o.state,d=o.options,a=o.name;if(!s.modifiersData[a]._skip){for(var g=d.mainAxis,I=g===void 0||g,R=d.altAxis,M=R===void 0||R,B=d.fallbackPlacements,V=d.padding,Y=d.boundary,X=d.rootBoundary,ve=d.altBoundary,re=d.flipVariations,de=re===void 0||re,ce=d.allowedAutoPlacements,ne=s.options.placement,we=ot(ne),ge=B||(we===ne||!de?[Nn(ne)]:function(tt){if(ot(tt)===Tr)return[];var nt=Nn(tt);return[Wi(tt),nt,Wi(nt)]}(ne)),te=[ne].concat(ge).reduce(function(tt,nt){return tt.concat(ot(nt)===Tr?function(zt,vt){vt===void 0&&(vt={});var rt=vt,Vn=rt.placement,Un=rt.boundary,Xt=rt.rootBoundary,Nr=rt.padding,Gr=rt.flipVariations,Kt=rt.allowedAutoPlacements,Fr=Kt===void 0?Bi:Kt,bn=jt(Vn),jn=bn?Gr?Fi:Fi.filter(function(lt){return jt(lt)===bn}):hn,Qt=jn.filter(function(lt){return Fr.indexOf(lt)>=0});Qt.length===0&&(Qt=jn);var Zt=Qt.reduce(function(lt,Rt){return lt[Rt]=En(zt,{placement:Rt,boundary:Un,rootBoundary:Xt,padding:Nr})[ot(Rt)],lt},{});return Object.keys(Zt).sort(function(lt,Rt){return Zt[lt]-Zt[Rt]})}(s,{placement:nt,boundary:Y,rootBoundary:X,padding:V,flipVariations:de,allowedAutoPlacements:ce}):nt)},[]),se=s.rects.reference,ae=s.rects.popper,oe=new Map,le=!0,ue=te[0],me=0;me<te.length;me++){var Le=te[me],Be=ot(Le),Je=jt(Le)===Ut,ft=[Ge,qe].indexOf(Be)>=0,Ot=ft?"width":"height",et=En(s,{placement:Le,boundary:Y,rootBoundary:X,altBoundary:ve,padding:V}),Ve=ft?Je?Ye:Fe:Je?qe:Ge;se[Ot]>ae[Ot]&&(Ve=Nn(Ve));var bt=Nn(Ve),Dt=[];if(I&&Dt.push(et[Be]<=0),M&&Dt.push(et[Ve]<=0,et[bt]<=0),Dt.every(function(tt){return tt})){ue=Le,le=!1;break}oe.set(Le,Dt)}if(le)for(var Bn=function(tt){var nt=te.find(function(zt){var vt=oe.get(zt);if(vt)return vt.slice(0,tt).every(function(rt){return rt})});if(nt)return ue=nt,"break"},Yt=de?3:1;Yt>0&&Bn(Yt)!=="break";Yt--);s.placement!==ue&&(s.modifiersData[a]._skip=!0,s.placement=ue,s.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},fl,pl,{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(o){var s=o.state,d=o.name,a=s.rects.reference,g=s.rects.popper,I=s.modifiersData.preventOverflow,R=En(s,{elementContext:"reference"}),M=En(s,{altBoundary:!0}),B=Xi(R,a),V=Xi(M,g,I),Y=Ki(B),X=Ki(V);s.modifiersData[d]={referenceClippingOffsets:B,popperEscapeOffsets:V,isReferenceHidden:Y,hasPopperEscaped:X},s.attributes.popper=Object.assign({},s.attributes.popper,{"data-popper-reference-hidden":Y,"data-popper-escaped":X})}}]});function Qi(o){return function(s){if(Array.isArray(s))return Sr(s)}(o)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(o)||function(s,d){if(!!s){if(typeof s=="string")return Sr(s,d);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Sr(s,d)}}(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Sr(o,s){(s==null||s>o.length)&&(s=o.length);for(var d=0,a=new Array(s);d<s;d++)a[d]=o[d];return a}function Zi(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function Ht(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?Zi(Object(d),!0).forEach(function(a){hl(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):Zi(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function hl(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function gl(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function ml(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var Ji={placement:"bottom",triggerType:"click",onShow:function(){},onHide:function(){}},es=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};gl(this,o),this._targetEl=a,this._triggerEl=g,this._options=Ht(Ht({},Ji),I),this._popperInstance=this._createPopperInstace(),this._visible=!1,this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;this._triggerEl&&this._triggerEl.addEventListener("click",function(){a.toggle()})}},{key:"_createPopperInstace",value:function(){return Rr(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,10]}}]})}},{key:"_handleClickOutside",value:function(a,g){var I=a.target;I===g||g.contains(I)||this._triggerEl.contains(I)||!this._visible||this.hide(),document.body.removeEventListener("click",this._handleClickOutside,!0)}},{key:"toggle",value:function(){this._visible?(this.hide(),document.body.removeEventListener("click",this._handleClickOutside,!0)):this.show()}},{key:"show",value:function(){var a=this;this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._popperInstance.setOptions(function(g){return Ht(Ht({},g),{},{modifiers:[].concat(Qi(g.modifiers),[{name:"eventListeners",enabled:!0}])})}),document.body.addEventListener("click",function(g){a._handleClickOutside(g,a._targetEl)},!0),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)}},{key:"hide",value:function(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._popperInstance.setOptions(function(a){return Ht(Ht({},a),{},{modifiers:[].concat(Qi(a.modifiers),[{name:"eventListeners",enabled:!1}])})}),this._visible=!1,this._options.onHide(this)}}])&&ml(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function ts(){document.querySelectorAll("[data-dropdown-toggle]").forEach(function(o){var s=document.getElementById(o.getAttribute("data-dropdown-toggle")),d=o.getAttribute("data-dropdown-placement");new es(s,o,{placement:d||Ji.placement})})}window.Dropdown=es,document.readyState!=="loading"?ts():document.addEventListener("DOMContentLoaded",ts);function El(o){return function(s){if(Array.isArray(s))return Ar(s)}(o)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(o)||function(s,d){if(!!s){if(typeof s=="string")return Ar(s,d);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ar(s,d)}}(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ar(o,s){(s==null||s>o.length)&&(s=o.length);for(var d=0,a=new Array(s);d<s;d++)a[d]=o[d];return a}function ns(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function rs(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?ns(Object(d),!0).forEach(function(a){_l(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):ns(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function _l(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function yl(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function bl(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var Pr={placement:"center",backdropClasses:"bg-gray-900 bg-opacity-50 dark:bg-opacity-80 fixed inset-0 z-40",backdrop:"dynamic",onHide:function(){},onShow:function(){},onToggle:function(){}},is=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};yl(this,o),this._targetEl=a,this._options=rs(rs({},Pr),g),this._isHidden=!0,this._backdropEl=null,this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;this._targetEl&&(this._getPlacementClasses().map(function(g){a._targetEl.classList.add(g)}),this._targetEl.addEventListener("click",function(g){a._handleOutsideClick(g.target)}))}},{key:"_createBackdrop",value:function(){if(this._isHidden){var a,g=document.createElement("div");g.setAttribute("modal-backdrop",""),(a=g.classList).add.apply(a,El(this._options.backdropClasses.split(" "))),document.querySelector("body").append(g),this._backdropEl=g}}},{key:"_destroyBackdropEl",value:function(){this._isHidden||document.querySelector("[modal-backdrop]").remove()}},{key:"_handleOutsideClick",value:function(a){this._options.backdrop==="dynamic"&&(a!==this._targetEl&&a!==this._backdropEl||this.hide())}},{key:"_getPlacementClasses",value:function(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":default:return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"]}}},{key:"toggle",value:function(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)}},{key:"show",value:function(){this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,document.body.classList.add("overflow-hidden"),this._options.onShow(this)}},{key:"hide",value:function(){this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.onHide(this)}},{key:"isHidden",value:function(){return this._isHidden}}])&&bl(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();window.Modal=is;var ss=function(o,s){return!!s.some(function(d){return d.id===o})&&s.find(function(d){return d.id===o})},as=function(o){var s=[];document.querySelectorAll("[".concat(o.main,"]")).forEach(function(d){var a=d.getAttribute(o.main),g=document.getElementById(a),I=g.getAttribute(o.placement),R=g.getAttribute(o.backdrop);g&&(g.hasAttribute("aria-hidden")||g.hasAttribute("aria-modal")||g.setAttribute("aria-hidden","true"));var M=null;ss(a,s)?M=(M=ss(a,s)).object:(M=new is(g,{placement:I||Pr.placement,backdrop:R||Pr.backdrop}),s.push({id:a,object:M})),g.hasAttribute(o.show)&&g.getAttribute(o.show)==="true"&&M.show(),d.addEventListener("click",function(){M.toggle()})})},os={main:"data-modal-toggle",placement:"data-modal-placement",show:"data-modal-show",backdrop:"data-modal-backdrop"};document.readyState!=="loading"?as(os):document.addEventListener("DOMContentLoaded",as(os));function vl(o){return function(s){if(Array.isArray(s))return Lr(s)}(o)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(o)||function(s,d){if(!!s){if(typeof s=="string")return Lr(s,d);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Lr(s,d)}}(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Lr(o,s){(s==null||s>o.length)&&(s=o.length);for(var d=0,a=new Array(s);d<s;d++)a[d]=o[d];return a}function ls(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function cs(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?ls(Object(d),!0).forEach(function(a){wl(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):ls(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function wl(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function Il(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function Tl(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var Wt={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900 bg-opacity-50 dark:bg-opacity-80 fixed inset-0 z-30",onShow:function(){},onHide:function(){},onToggle:function(){}},ds=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1?arguments[1]:void 0;Il(this,o),this._targetEl=a,this._options=cs(cs({},Wt),g),this._visible=!1,this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;this._targetEl&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform")),this._getPlacementClasses(this._options.placement).base.map(function(g){a._targetEl.classList.add(g)}),this.hide()}},{key:"isVisible",value:function(){return this._visible}},{key:"hide",value:function(){var a=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(g){a._targetEl.classList.remove(g)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(g){a._targetEl.classList.add(g)})):(this._getPlacementClasses(this._options.placement).active.map(function(g){a._targetEl.classList.remove(g)}),this._getPlacementClasses(this._options.placement).inactive.map(function(g){a._targetEl.classList.add(g)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)}},{key:"show",value:function(){var a=this;this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(function(g){a._targetEl.classList.add(g)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(function(g){a._targetEl.classList.remove(g)})):(this._getPlacementClasses(this._options.placement).active.map(function(g){a._targetEl.classList.add(g)}),this._getPlacementClasses(this._options.placement).inactive.map(function(g){a._targetEl.classList.remove(g)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)}},{key:"toggle",value:function(){this.isVisible()?this.hide():this.show()}},{key:"_createBackdrop",value:function(){var a=this;if(!this._visible){var g,I=document.createElement("div");I.setAttribute("drawer-backdrop",""),(g=I.classList).add.apply(g,vl(this._options.backdropClasses.split(" "))),document.querySelector("body").append(I),I.addEventListener("click",function(){a.hide()})}}},{key:"_destroyBackdropEl",value:function(){this._visible&&document.querySelector("[drawer-backdrop]").remove()}},{key:"_getPlacementClasses",value:function(a){switch(a){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]}}}}])&&Tl(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();window.Drawer=ds;var yn=function(o,s){return!!s.some(function(d){return d.id===o})&&s.find(function(d){return d.id===o})};function us(){var o=[];document.querySelectorAll("[data-drawer-target]").forEach(function(s){var d=document.getElementById(s.getAttribute("data-drawer-target")),a=d.id,g=s.getAttribute("data-drawer-placement"),I=s.getAttribute("data-drawer-body-scrolling"),R=s.getAttribute("data-drawer-backdrop"),M=s.getAttribute("data-drawer-edge"),B=s.getAttribute("data-drawer-edge-offset"),V=null;yn(a,o)?V=(V=yn(a,o)).object:(V=new ds(d,{placement:g||Wt.placement,bodyScrolling:I?I==="true":Wt.bodyScrolling,backdrop:R?R==="true":Wt.backdrop,edge:M?M==="true":Wt.edge,edgeOffset:B||Wt.edgeOffset}),o.push({id:a,object:V}))}),document.querySelectorAll("[data-drawer-toggle]").forEach(function(s){var d=document.getElementById(s.getAttribute("data-drawer-toggle")).id,a=yn(d,o);s.addEventListener("click",function(){a.object.isVisible()?a.object.hide():a.object.show()})}),document.querySelectorAll("[data-drawer-dismiss]").forEach(function(s){var d=document.getElementById(s.getAttribute("data-drawer-dismiss")).id,a=yn(d,o);s.addEventListener("click",function(){a.object.hide()})}),document.querySelectorAll("[data-drawer-show]").forEach(function(s){var d=document.getElementById(s.getAttribute("data-drawer-show")).id,a=yn(d,o);s.addEventListener("click",function(){a.object.show()})})}document.readyState!=="loading"?us():document.addEventListener("DOMContentLoaded",us);function Gn(o){return function(s){if(Array.isArray(s))return Mr(s)}(o)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(o)||function(s,d){if(!!s){if(typeof s=="string")return Mr(s,d);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Mr(s,d)}}(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Mr(o,s){(s==null||s>o.length)&&(s=o.length);for(var d=0,a=new Array(s);d<s;d++)a[d]=o[d];return a}function fs(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function ps(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?fs(Object(d),!0).forEach(function(a){Ol(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):fs(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function Ol(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function Dl(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function Rl(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var Sl={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:function(){}},hs=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Dl(this,o),this._items=a,this._activeTab=g?this.getTab(g.defaultTabId):null,this._options=ps(ps({},Sl),g),this._init()}var s,d;return s=o,d=[{key:"_init",value:function(){var a=this;this._items.length&&(this._activeTab||this._setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(function(g){g.triggerEl.addEventListener("click",function(){a.show(g.id)})}))}},{key:"getActiveTab",value:function(){return this._activeTab}},{key:"_setActiveTab",value:function(a){this._activeTab=a}},{key:"getTab",value:function(a){return this._items.filter(function(g){return g.id===a})[0]}},{key:"show",value:function(a){var g,I,R=this,M=arguments.length>1&&arguments[1]!==void 0&&arguments[1],B=this.getTab(a);(B!==this._activeTab||M)&&(this._items.map(function(V){var Y,X;V!==B&&((Y=V.triggerEl.classList).remove.apply(Y,Gn(R._options.activeClasses.split(" "))),(X=V.triggerEl.classList).add.apply(X,Gn(R._options.inactiveClasses.split(" "))),V.targetEl.classList.add("hidden"),V.triggerEl.setAttribute("aria-selected",!1))}),(g=B.triggerEl.classList).add.apply(g,Gn(this._options.activeClasses.split(" "))),(I=B.triggerEl.classList).remove.apply(I,Gn(this._options.inactiveClasses.split(" "))),B.triggerEl.setAttribute("aria-selected",!0),B.targetEl.classList.remove("hidden"),this._setActiveTab(B),this._options.onShow(this,B))}}],d&&Rl(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function gs(){document.querySelectorAll("[data-tabs-toggle]").forEach(function(o){var s=[],d=null;o.querySelectorAll('[role="tab"]').forEach(function(a){var g=a.getAttribute("aria-selected")==="true",I={id:a.getAttribute("data-tabs-target"),triggerEl:a,targetEl:document.querySelector(a.getAttribute("data-tabs-target"))};s.push(I),g&&(d=I.id)}),new hs(s,{defaultTabId:d})})}window.Tabs=hs,document.readyState!=="loading"?gs():document.addEventListener("DOMContentLoaded",gs);function ms(o){return function(s){if(Array.isArray(s))return Cr(s)}(o)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(o)||function(s,d){if(!!s){if(typeof s=="string")return Cr(s,d);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Cr(s,d)}}(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Cr(o,s){(s==null||s>o.length)&&(s=o.length);for(var d=0,a=new Array(s);d<s;d++)a[d]=o[d];return a}function Es(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function $t(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?Es(Object(d),!0).forEach(function(a){Al(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):Es(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function Al(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function Pl(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function Ll(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var xr={placement:"top",triggerType:"hover",onShow:function(){},onHide:function(){}},_s=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Pl(this,o),this._targetEl=a,this._triggerEl=g,this._options=$t($t({},xr),I),this._popperInstance=this._createPopperInstace(),this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;if(this._triggerEl){var g=this._getTriggerEvents();g.showEvents.forEach(function(I){a._triggerEl.addEventListener(I,function(){a.show()})}),g.hideEvents.forEach(function(I){a._triggerEl.addEventListener(I,function(){a.hide()})})}}},{key:"_createPopperInstace",value:function(){return Rr(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})}},{key:"_getTriggerEvents",value:function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]}}}},{key:"show",value:function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(a){return $t($t({},a),{},{modifiers:[].concat(ms(a.modifiers),[{name:"eventListeners",enabled:!0}])})}),this._popperInstance.update(),this._options.onShow(this)}},{key:"hide",value:function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(a){return $t($t({},a),{},{modifiers:[].concat(ms(a.modifiers),[{name:"eventListeners",enabled:!1}])})}),this._options.onHide(this)}}])&&Ll(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function ys(){document.querySelectorAll("[data-tooltip-target]").forEach(function(o){var s=document.getElementById(o.getAttribute("data-tooltip-target")),d=o.getAttribute("data-tooltip-trigger"),a=o.getAttribute("data-tooltip-placement");new _s(s,o,{placement:a||xr.placement,triggerType:d||xr.triggerType})})}window.Tooltip=_s,document.readyState!=="loading"?ys():document.addEventListener("DOMContentLoaded",ys);function bs(o){return function(s){if(Array.isArray(s))return kr(s)}(o)||function(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}(o)||function(s,d){if(!!s){if(typeof s=="string")return kr(s,d);var a=Object.prototype.toString.call(s).slice(8,-1);if(a==="Object"&&s.constructor&&(a=s.constructor.name),a==="Map"||a==="Set")return Array.from(s);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return kr(s,d)}}(o)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function kr(o,s){(s==null||s>o.length)&&(s=o.length);for(var d=0,a=new Array(s);d<s;d++)a[d]=o[d];return a}function vs(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function qt(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?vs(Object(d),!0).forEach(function(a){Ml(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):vs(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function Ml(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function Cl(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function xl(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var Fn={placement:"top",offset:10,triggerType:"hover",onShow:function(){},onHide:function(){}},ws=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Cl(this,o),this._targetEl=a,this._triggerEl=g,this._options=qt(qt({},Fn),I),this._popperInstance=this._createPopperInstace(),this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;if(this._triggerEl){var g=this._getTriggerEvents();g.showEvents.forEach(function(I){a._triggerEl.addEventListener(I,function(){a.show()}),a._targetEl.addEventListener(I,function(){a.show()})}),g.hideEvents.forEach(function(I){a._triggerEl.addEventListener(I,function(){setTimeout(function(){a._targetEl.matches(":hover")||a.hide()},100)}),a._targetEl.addEventListener(I,function(){setTimeout(function(){a._triggerEl.matches(":hover")||a.hide()},100)})})}}},{key:"_createPopperInstace",value:function(){return Rr(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})}},{key:"_getTriggerEvents",value:function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]}}}},{key:"show",value:function(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(function(a){return qt(qt({},a),{},{modifiers:[].concat(bs(a.modifiers),[{name:"eventListeners",enabled:!0}])})}),this._popperInstance.update(),this._options.onShow(this)}},{key:"hide",value:function(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(function(a){return qt(qt({},a),{},{modifiers:[].concat(bs(a.modifiers),[{name:"eventListeners",enabled:!1}])})}),this._options.onHide(this)}}])&&xl(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function Is(){document.querySelectorAll("[data-popover-target]").forEach(function(o){var s=document.getElementById(o.getAttribute("data-popover-target")),d=o.getAttribute("data-popover-trigger"),a=o.getAttribute("data-popover-placement"),g=o.getAttribute("data-popover-offset");new ws(s,o,{placement:a||Fn.placement,offset:g?parseInt(g):Fn.offset,triggerType:d||Fn.triggerType})})}window.Popover=ws,document.readyState!=="loading"?Is():document.addEventListener("DOMContentLoaded",Is);function Ts(o,s){var d=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);s&&(a=a.filter(function(g){return Object.getOwnPropertyDescriptor(o,g).enumerable})),d.push.apply(d,a)}return d}function Os(o){for(var s=1;s<arguments.length;s++){var d=arguments[s]!=null?arguments[s]:{};s%2?Ts(Object(d),!0).forEach(function(a){kl(o,a,d[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(d)):Ts(Object(d)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(d,a))})}return o}function kl(o,s,d){return s in o?Object.defineProperty(o,s,{value:d,enumerable:!0,configurable:!0,writable:!0}):o[s]=d,o}function Nl(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function Gl(o,s){for(var d=0;d<s.length;d++){var a=s[d];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}var Ds={triggerType:"hover",onShow:function(){},onHide:function(){},onToggle:function(){}},Rs=function(){function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,R=arguments.length>3?arguments[3]:void 0;Nl(this,o),this._parentEl=a,this._triggerEl=g,this._targetEl=I,this._options=Os(Os({},Ds),R),this._visible=!1,this._init()}var s,d;return s=o,(d=[{key:"_init",value:function(){var a=this;if(this._triggerEl){var g=this._getTriggerEvents();g.showEvents.forEach(function(I){a._triggerEl.addEventListener(I,function(){a.show()}),a._targetEl.addEventListener(I,function(){a.show()})}),g.hideEvents.forEach(function(I){a._parentEl.addEventListener(I,function(){setTimeout(function(){a._parentEl.matches(":hover")||a.hide()},100)})})}}},{key:"hide",value:function(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)}},{key:"show",value:function(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)}},{key:"toggle",value:function(){this._visible?this.hide():this.show()}},{key:"_getTriggerEvents",value:function(){switch(this._options.triggerType){case"hover":default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]}}}}])&&Gl(s.prototype,d),Object.defineProperty(s,"prototype",{writable:!1}),o}();function Ss(){document.querySelectorAll("[data-dial-init]").forEach(function(o){var s=o.querySelector("[data-dial-toggle]"),d=document.getElementById(s.getAttribute("data-dial-toggle")),a=s.getAttribute("data-dial-trigger");new Rs(o,s,d,{triggerType:a||Ds.triggerType})})}window.Dial=Rs,document.readyState!=="loading"?Ss():document.addEventListener("DOMContentLoaded",Ss)})();function gt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ei(e){return e[e.length-1]}function Gt(e,...t){return t.forEach(n=>{e.includes(n)||e.push(n)}),e}function Ur(e,t){return e?e.split(t):[]}function _i(e,t,n){const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}function Ja(e,t,n){return e<t?t:e>n?n:e}function ln(e,t,n={},r=0,i=""){const l=Object.keys(n).reduce((u,f)=>{let h=n[f];return typeof h=="function"&&(h=h(r)),`${u} ${f}="${h}"`},e);i+=`<${l}></${e}>`;const c=r+1;return c<t?ln(e,t,n,c,i):i}function yi(e){return e.replace(/>\s+/g,">").replace(/\s+</,"<")}function si(e){return new Date(e).setHours(0,0,0,0)}function Ft(){return new Date().setHours(0,0,0,0)}function It(...e){switch(e.length){case 0:return Ft();case 1:return si(e[0])}const t=new Date(0);return t.setFullYear(...e),t.setHours(0,0,0,0)}function rn(e,t){const n=new Date(e);return n.setDate(n.getDate()+t)}function ic(e,t){return rn(e,t*7)}function rr(e,t){const n=new Date(e),r=n.getMonth()+t;let i=r%12;i<0&&(i+=12);const l=n.setMonth(r);return n.getMonth()!==i?n.setDate(0):l}function sn(e,t){const n=new Date(e),r=n.getMonth(),i=n.setFullYear(n.getFullYear()+t);return r===1&&n.getMonth()===2?n.setDate(0):i}function Bs(e,t){return(e-t+7)%7}function ir(e,t,n=0){const r=new Date(e).getDay();return rn(e,Bs(t,n)-Bs(r,n))}function sc(e){const t=ir(e,4,1),n=ir(new Date(t).setMonth(0,4),4,1);return Math.round((t-n)/6048e5)+1}function Pt(e,t){const n=new Date(e).getFullYear();return Math.floor(n/t)*t}const ai=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,ac=/[\s!-/:-@[-`{-~年月日]+/;let jr={};const Vs={y(e,t){return new Date(e).setFullYear(parseInt(t,10))},m(e,t,n){const r=new Date(e);let i=parseInt(t,10)-1;if(isNaN(i)){if(!t)return NaN;const l=t.toLowerCase(),c=u=>u.toLowerCase().startsWith(l);if(i=n.monthsShort.findIndex(c),i<0&&(i=n.months.findIndex(c)),i<0)return NaN}return r.setMonth(i),r.getMonth()!==eo(i)?r.setDate(0):r.getTime()},d(e,t){return new Date(e).setDate(parseInt(t,10))}},oc={d(e){return e.getDate()},dd(e){return Wn(e.getDate(),2)},D(e,t){return t.daysShort[e.getDay()]},DD(e,t){return t.days[e.getDay()]},m(e){return e.getMonth()+1},mm(e){return Wn(e.getMonth()+1,2)},M(e,t){return t.monthsShort[e.getMonth()]},MM(e,t){return t.months[e.getMonth()]},y(e){return e.getFullYear()},yy(e){return Wn(e.getFullYear(),2).slice(-2)},yyyy(e){return Wn(e.getFullYear(),4)}};function eo(e){return e>-1?e%12:eo(e+12)}function Wn(e,t){return e.toString().padStart(t,"0")}function to(e){if(typeof e!="string")throw new Error("Invalid date format.");if(e in jr)return jr[e];const t=e.split(ai),n=e.match(new RegExp(ai,"g"));if(t.length===0||!n)throw new Error("Invalid date format.");const r=n.map(l=>oc[l]),i=Object.keys(Vs).reduce((l,c)=>(n.find(f=>f[0]!=="D"&&f[0].toLowerCase()===c)&&l.push(c),l),[]);return jr[e]={parser(l,c){const u=l.split(ac).reduce((f,h,p)=>{if(h.length>0&&n[p]){const m=n[p][0];m==="M"?f.m=h:m!=="D"&&(f[m]=h)}return f},{});return i.reduce((f,h)=>{const p=Vs[h](f,u[h],c);return isNaN(p)?f:p},Ft())},formatter(l,c){let u=r.reduce((f,h,p)=>f+=`${t[p]}${h(l,c)}`,"");return u+=Ei(t)}}}function Ln(e,t,n){if(e instanceof Date||typeof e=="number"){const r=si(e);return isNaN(r)?void 0:r}if(!!e){if(e==="today")return Ft();if(t&&t.toValue){const r=t.toValue(e,t,n);return isNaN(r)?void 0:si(r)}return to(t).parser(e,n)}}function sr(e,t,n){if(isNaN(e)||!e&&e!==0)return"";const r=typeof e=="number"?new Date(e):e;return t.toDisplay?t.toDisplay(r,t,n):to(t).formatter(r,n)}const ar=new WeakMap,{addEventListener:lc,removeEventListener:cc}=EventTarget.prototype;function no(e,t){let n=ar.get(e);n||(n=[],ar.set(e,n)),t.forEach(r=>{lc.call(...r),n.push(r)})}function dc(e){let t=ar.get(e);!t||(t.forEach(n=>{cc.call(...n)}),ar.delete(e))}if(!Event.prototype.composedPath){const e=(t,n=[])=>{n.push(t);let r;return t.parentNode?r=t.parentNode:t.host?r=t.host:t.defaultView&&(r=t.defaultView),r?e(r,n):n};Event.prototype.composedPath=function(){return e(this.target)}}function ro(e,t,n,r=0){const i=e[r];return t(i)?i:i===n||!i.parentElement?void 0:ro(e,t,n,r+1)}function io(e,t){const n=typeof t=="function"?t:r=>r.matches(t);return ro(e.composedPath(),n,e.currentTarget)}const vn={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},bi={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:'<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',orientation:"auto",pickLevel:0,prevArrow:'<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg>',showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},uc=document.createRange();function mt(e){return uc.createContextualFragment(e)}function Rn(e){e.style.display!=="none"&&(e.style.display&&(e.dataset.styleDisplay=e.style.display),e.style.display="none")}function Sn(e){e.style.display==="none"&&(e.dataset.styleDisplay?(e.style.display=e.dataset.styleDisplay,delete e.dataset.styleDisplay):e.style.display="")}function or(e){e.firstChild&&(e.removeChild(e.firstChild),or(e))}function fc(e,t){or(e),t instanceof DocumentFragment?e.appendChild(t):typeof t=="string"?e.appendChild(mt(t)):typeof t.forEach=="function"&&t.forEach(n=>{e.appendChild(n)})}const{language:Hr,format:pc,weekStart:hc}=bi;function Us(e,t){return e.length<6&&t>=0&&t<7?Gt(e,t):e}function js(e){return(e+6)%7}function Hs(e,t,n,r){const i=Ln(e,t,n);return i!==void 0?i:r}function Wr(e,t,n=3){const r=parseInt(e,10);return r>=0&&r<=n?r:t}function $r(e,t){const n=Object.assign({},e),r={},i=t.constructor.locales;let{format:l,language:c,locale:u,maxDate:f,maxView:h,minDate:p,pickLevel:m,startView:w,weekStart:b}=t.config||{};if(n.language){let E;if(n.language!==c&&(i[n.language]?E=n.language:(E=n.language.split("-")[0],i[E]===void 0&&(E=!1))),delete n.language,E){c=r.language=E;const O=u||i[Hr];u=Object.assign({format:pc,weekStart:hc},i[Hr]),c!==Hr&&Object.assign(u,i[c]),r.locale=u,l===O.format&&(l=r.format=u.format),b===O.weekStart&&(b=r.weekStart=u.weekStart,r.weekEnd=js(u.weekStart))}}if(n.format){const E=typeof n.format.toDisplay=="function",O=typeof n.format.toValue=="function",S=ai.test(n.format);(E&&O||S)&&(l=r.format=n.format),delete n.format}let _=p,v=f;if(n.minDate!==void 0&&(_=n.minDate===null?It(0,0,1):Hs(n.minDate,l,u,_),delete n.minDate),n.maxDate!==void 0&&(v=n.maxDate===null?void 0:Hs(n.maxDate,l,u,v),delete n.maxDate),v<_?(p=r.minDate=v,f=r.maxDate=_):(p!==_&&(p=r.minDate=_),f!==v&&(f=r.maxDate=v)),n.datesDisabled&&(r.datesDisabled=n.datesDisabled.reduce((E,O)=>{const S=Ln(O,l,u);return S!==void 0?Gt(E,S):E},[]),delete n.datesDisabled),n.defaultViewDate!==void 0){const E=Ln(n.defaultViewDate,l,u);E!==void 0&&(r.defaultViewDate=E),delete n.defaultViewDate}if(n.weekStart!==void 0){const E=Number(n.weekStart)%7;isNaN(E)||(b=r.weekStart=E,r.weekEnd=js(E)),delete n.weekStart}if(n.daysOfWeekDisabled&&(r.daysOfWeekDisabled=n.daysOfWeekDisabled.reduce(Us,[]),delete n.daysOfWeekDisabled),n.daysOfWeekHighlighted&&(r.daysOfWeekHighlighted=n.daysOfWeekHighlighted.reduce(Us,[]),delete n.daysOfWeekHighlighted),n.maxNumberOfDates!==void 0){const E=parseInt(n.maxNumberOfDates,10);E>=0&&(r.maxNumberOfDates=E,r.multidate=E!==1),delete n.maxNumberOfDates}n.dateDelimiter&&(r.dateDelimiter=String(n.dateDelimiter),delete n.dateDelimiter);let T=m;n.pickLevel!==void 0&&(T=Wr(n.pickLevel,2),delete n.pickLevel),T!==m&&(m=r.pickLevel=T);let D=h;n.maxView!==void 0&&(D=Wr(n.maxView,h),delete n.maxView),D=m>D?m:D,D!==h&&(h=r.maxView=D);let y=w;if(n.startView!==void 0&&(y=Wr(n.startView,y),delete n.startView),y<m?y=m:y>h&&(y=h),y!==w&&(r.startView=y),n.prevArrow){const E=mt(n.prevArrow);E.childNodes.length>0&&(r.prevArrow=E.childNodes),delete n.prevArrow}if(n.nextArrow){const E=mt(n.nextArrow);E.childNodes.length>0&&(r.nextArrow=E.childNodes),delete n.nextArrow}if(n.disableTouchKeyboard!==void 0&&(r.disableTouchKeyboard="ontouchstart"in document&&!!n.disableTouchKeyboard,delete n.disableTouchKeyboard),n.orientation){const E=n.orientation.toLowerCase().split(/\s+/g);r.orientation={x:E.find(O=>O==="left"||O==="right")||"auto",y:E.find(O=>O==="top"||O==="bottom")||"auto"},delete n.orientation}if(n.todayBtnMode!==void 0){switch(n.todayBtnMode){case 0:case 1:r.todayBtnMode=n.todayBtnMode}delete n.todayBtnMode}return Object.keys(n).forEach(E=>{n[E]!==void 0&&gt(bi,E)&&(r[E]=n[E])}),r}const gc=yi(`<div class="datepicker hidden">
  <div class="datepicker-picker inline-block rounded-lg bg-white dark:bg-gray-700 shadow-lg p-4">
    <div class="datepicker-header">
      <div class="datepicker-title bg-white dark:bg-gray-700 dark:text-white px-2 py-3 text-center font-semibold"></div>
      <div class="datepicker-controls flex justify-between mb-2">
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 prev-btn"></button>
        <button type="button" class="text-sm rounded-lg text-gray-900 dark:text-white bg-white dark:bg-gray-700 font-semibold py-2.5 px-5 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-200 view-switch"></button>
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 next-btn"></button>
      </div>
    </div>
    <div class="datepicker-main p-1"></div>
    <div class="datepicker-footer">
      <div class="datepicker-controls flex space-x-2 mt-2">
        <button type="button" class="%buttonClass% today-btn text-white bg-blue-700 dark:bg-blue-600 hover:bg-blue-800 dark:hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
        <button type="button" class="%buttonClass% clear-btn text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
      </div>
    </div>
  </div>
</div>`),mc=yi(`<div class="days">
  <div class="days-of-week grid grid-cols-7 mb-1">${ln("span",7,{class:"dow block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"})}</div>
  <div class="datepicker-grid w-64 grid grid-cols-7">${ln("span",42,{class:"block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"})}</div>
</div>`),Ec=yi(`<div class="calendar-weeks">
  <div class="days-of-week flex"><span class="dow h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"></span></div>
  <div class="weeks">${ln("span",6,{class:"week block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"})}</div>
</div>`);class vi{constructor(t,n){Object.assign(this,n,{picker:t,element:mt('<div class="datepicker-view flex"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}init(t){t.pickLevel!==void 0&&(this.isMinView=this.id===t.pickLevel),this.setOptions(t),this.updateFocus(),this.updateSelection()}performBeforeHook(t,n,r){let i=this.beforeShow(new Date(r));switch(typeof i){case"boolean":i={enabled:i};break;case"string":i={classes:i}}if(i){if(i.enabled===!1&&(t.classList.add("disabled"),Gt(this.disabled,n)),i.classes){const l=i.classes.split(/\s+/);t.classList.add(...l),l.includes("disabled")&&Gt(this.disabled,n)}i.content&&fc(t,i.content)}}}class _c extends vi{constructor(t){super(t,{id:0,name:"days",cellClass:"day"})}init(t,n=!0){if(n){const r=mt(mc).firstChild;this.dow=r.firstChild,this.grid=r.lastChild,this.element.appendChild(r)}super.init(t)}setOptions(t){let n;if(gt(t,"minDate")&&(this.minDate=t.minDate),gt(t,"maxDate")&&(this.maxDate=t.maxDate),t.datesDisabled&&(this.datesDisabled=t.datesDisabled),t.daysOfWeekDisabled&&(this.daysOfWeekDisabled=t.daysOfWeekDisabled,n=!0),t.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=t.daysOfWeekHighlighted),t.todayHighlight!==void 0&&(this.todayHighlight=t.todayHighlight),t.weekStart!==void 0&&(this.weekStart=t.weekStart,this.weekEnd=t.weekEnd,n=!0),t.locale){const r=this.locale=t.locale;this.dayNames=r.daysMin,this.switchLabelFormat=r.titleFormat,n=!0}if(t.beforeShowDay!==void 0&&(this.beforeShow=typeof t.beforeShowDay=="function"?t.beforeShowDay:void 0),t.calendarWeeks!==void 0)if(t.calendarWeeks&&!this.calendarWeeks){const r=mt(Ec).firstChild;this.calendarWeeks={element:r,dow:r.firstChild,weeks:r.lastChild},this.element.insertBefore(r,this.element.firstChild)}else this.calendarWeeks&&!t.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);t.showDaysOfWeek!==void 0&&(t.showDaysOfWeek?(Sn(this.dow),this.calendarWeeks&&Sn(this.calendarWeeks.dow)):(Rn(this.dow),this.calendarWeeks&&Rn(this.calendarWeeks.dow))),n&&Array.from(this.dow.children).forEach((r,i)=>{const l=(this.weekStart+i)%7;r.textContent=this.dayNames[l],r.className=this.daysOfWeekDisabled.includes(l)?"dow disabled text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400 cursor-not-allowed":"dow text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"})}updateFocus(){const t=new Date(this.picker.viewDate),n=t.getFullYear(),r=t.getMonth(),i=It(n,r,1),l=ir(i,this.weekStart,this.weekStart);this.first=i,this.last=It(n,r+1,0),this.start=l,this.focused=this.picker.viewDate}updateSelection(){const{dates:t,rangepicker:n}=this.picker.datepicker;this.selected=t,n&&(this.range=n.dates)}render(){this.today=this.todayHighlight?Ft():void 0,this.disabled=[...this.datesDisabled];const t=sr(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(t),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){const n=ir(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach((r,i)=>{r.textContent=sc(ic(n,i))})}Array.from(this.grid.children).forEach((n,r)=>{const i=n.classList,l=rn(this.start,r),c=new Date(l),u=c.getDay();if(n.className=`datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ${this.cellClass}`,n.dataset.date=l,n.textContent=c.getDate(),l<this.first?i.add("prev","text-gray-500","dark:text-white"):l>this.last&&i.add("next","text-gray-500","dark:text-white"),this.today===l&&i.add("today","bg-gray-100","dark:bg-gray-600","dark:bg-gray-600"),(l<this.minDate||l>this.maxDate||this.disabled.includes(l))&&i.add("disabled","cursor-not-allowed"),this.daysOfWeekDisabled.includes(u)&&(i.add("disabled","cursor-not-allowed"),Gt(this.disabled,l)),this.daysOfWeekHighlighted.includes(u)&&i.add("highlighted"),this.range){const[f,h]=this.range;l>f&&l<h&&(i.add("range","bg-gray-200","dark:bg-gray-600"),i.remove("rounded-lg","rounded-l-lg","rounded-r-lg")),l===f&&(i.add("range-start","bg-gray-100","dark:bg-gray-600","rounded-l-lg"),i.remove("rounded-lg","rounded-r-lg")),l===h&&(i.add("range-end","bg-gray-100","dark:bg-gray-600","rounded-r-lg"),i.remove("rounded-lg","rounded-l-lg"))}this.selected.includes(l)&&(i.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),i.remove("text-gray-900","text-gray-500","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),l===this.focused&&i.add("focused"),this.beforeShow&&this.performBeforeHook(n,l,l)})}refresh(){const[t,n]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(r=>{r.classList.remove("range","range-start","range-end","selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white","focused","bg-gray-100","dark:bg-gray-600"),r.classList.add("text-gray-900","rounded-lg","dark:text-white")}),Array.from(this.grid.children).forEach(r=>{const i=Number(r.dataset.date),l=r.classList;i>t&&i<n&&(l.add("range","bg-gray-200","dark:bg-gray-600"),l.remove("rounded-lg")),i===t&&(l.add("range-start","bg-gray-200","dark:bg-gray-600","rounded-l-lg"),l.remove("rounded-lg","rounded-r-lg")),i===n&&(l.add("range-end","bg-gray-200","dark:bg-gray-600","rounded-r-lg"),l.remove("rounded-lg","rounded-l-lg")),this.selected.includes(i)&&(l.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),l.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),i===this.focused&&l.add("focused","bg-gray-100","dark:bg-gray-600")})}refreshFocus(){const t=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach(n=>{n.classList.remove("focused","bg-gray-100","dark:bg-gray-600")}),this.grid.children[t].classList.add("focused","bg-gray-100","dark:bg-gray-600")}}function Ws(e,t){if(!e||!e[0]||!e[1])return;const[[n,r],[i,l]]=e;if(!(n>t||i<t))return[n===t?r:-1,i===t?l:12]}class yc extends vi{constructor(t){super(t,{id:1,name:"months",cellClass:"month"})}init(t,n=!0){n&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(mt(ln("span",12,{"data-month":r=>r})))),super.init(t)}setOptions(t){if(t.locale&&(this.monthNames=t.locale.monthsShort),gt(t,"minDate"))if(t.minDate===void 0)this.minYear=this.minMonth=this.minDate=void 0;else{const n=new Date(t.minDate);this.minYear=n.getFullYear(),this.minMonth=n.getMonth(),this.minDate=n.setDate(1)}if(gt(t,"maxDate"))if(t.maxDate===void 0)this.maxYear=this.maxMonth=this.maxDate=void 0;else{const n=new Date(t.maxDate);this.maxYear=n.getFullYear(),this.maxMonth=n.getMonth(),this.maxDate=It(this.maxYear,this.maxMonth+1,0)}t.beforeShowMonth!==void 0&&(this.beforeShow=typeof t.beforeShowMonth=="function"?t.beforeShowMonth:void 0)}updateFocus(){const t=new Date(this.picker.viewDate);this.year=t.getFullYear(),this.focused=t.getMonth()}updateSelection(){const{dates:t,rangepicker:n}=this.picker.datepicker;this.selected=t.reduce((r,i)=>{const l=new Date(i),c=l.getFullYear(),u=l.getMonth();return r[c]===void 0?r[c]=[u]:Gt(r[c],u),r},{}),n&&n.dates&&(this.range=n.dates.map(r=>{const i=new Date(r);return isNaN(i)?void 0:[i.getFullYear(),i.getMonth()]}))}render(){this.disabled=[],this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);const t=this.selected[this.year]||[],n=this.year<this.minYear||this.year>this.maxYear,r=this.year===this.minYear,i=this.year===this.maxYear,l=Ws(this.range,this.year);Array.from(this.grid.children).forEach((c,u)=>{const f=c.classList,h=It(this.year,u,1);if(c.className=`datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ${this.cellClass}`,this.isMinView&&(c.dataset.date=h),c.textContent=this.monthNames[u],(n||r&&u<this.minMonth||i&&u>this.maxMonth)&&f.add("disabled"),l){const[p,m]=l;u>p&&u<m&&f.add("range"),u===p&&f.add("range-start"),u===m&&f.add("range-end")}t.includes(u)&&(f.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),f.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),u===this.focused&&f.add("focused","bg-gray-100","dark:bg-gray-600"),this.beforeShow&&this.performBeforeHook(c,u,h)})}refresh(){const t=this.selected[this.year]||[],[n,r]=Ws(this.range,this.year)||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(i=>{i.classList.remove("range","range-start","range-end","selected","bg-blue-700","dark:bg-blue-600","dark:text-white","text-white","focused","bg-gray-100","dark:bg-gray-600"),i.classList.add("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")}),Array.from(this.grid.children).forEach((i,l)=>{const c=i.classList;l>n&&l<r&&c.add("range"),l===n&&c.add("range-start"),l===r&&c.add("range-end"),t.includes(l)&&(c.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),c.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),l===this.focused&&c.add("focused","bg-gray-100","dark:bg-gray-600")})}refreshFocus(){this.grid.querySelectorAll(".focused").forEach(t=>{t.classList.remove("focused","bg-gray-100")}),this.grid.children[this.focused].classList.add("focused","bg-gray-100","dark:bg-gray-600")}}function bc(e){return[...e].reduce((t,n,r)=>t+=r?n:n.toUpperCase(),"")}class $s extends vi{constructor(t,n){super(t,n)}init(t,n=!0){n&&(this.navStep=this.step*10,this.beforeShowOption=`beforeShow${bc(this.cellClass)}`,this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(mt(ln("span",12)))),super.init(t)}setOptions(t){if(gt(t,"minDate")&&(t.minDate===void 0?this.minYear=this.minDate=void 0:(this.minYear=Pt(t.minDate,this.step),this.minDate=It(this.minYear,0,1))),gt(t,"maxDate")&&(t.maxDate===void 0?this.maxYear=this.maxDate=void 0:(this.maxYear=Pt(t.maxDate,this.step),this.maxDate=It(this.maxYear,11,31))),t[this.beforeShowOption]!==void 0){const n=t[this.beforeShowOption];this.beforeShow=typeof n=="function"?n:void 0}}updateFocus(){const t=new Date(this.picker.viewDate),n=Pt(t,this.navStep),r=n+9*this.step;this.first=n,this.last=r,this.start=n-this.step,this.focused=Pt(t,this.step)}updateSelection(){const{dates:t,rangepicker:n}=this.picker.datepicker;this.selected=t.reduce((r,i)=>Gt(r,Pt(i,this.step)),[]),n&&n.dates&&(this.range=n.dates.map(r=>{if(r!==void 0)return Pt(r,this.step)}))}render(){this.disabled=[],this.picker.setViewSwitchLabel(`${this.first}-${this.last}`),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach((t,n)=>{const r=t.classList,i=this.start+n*this.step,l=It(i,0,1);if(t.className=`datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ${this.cellClass}`,this.isMinView&&(t.dataset.date=l),t.textContent=t.dataset.year=i,n===0?r.add("prev"):n===11&&r.add("next"),(i<this.minYear||i>this.maxYear)&&r.add("disabled"),this.range){const[c,u]=this.range;i>c&&i<u&&r.add("range"),i===c&&r.add("range-start"),i===u&&r.add("range-end")}this.selected.includes(i)&&(r.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),r.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),i===this.focused&&r.add("focused","bg-gray-100","dark:bg-gray-600"),this.beforeShow&&this.performBeforeHook(t,i,l)})}refresh(){const[t,n]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(r=>{r.classList.remove("range","range-start","range-end","selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white","focused","bg-gray-100","dark:bg-gray-600")}),Array.from(this.grid.children).forEach(r=>{const i=Number(r.textContent),l=r.classList;i>t&&i<n&&l.add("range"),i===t&&l.add("range-start"),i===n&&l.add("range-end"),this.selected.includes(i)&&(l.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),l.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),i===this.focused&&l.add("focused","bg-gray-100","dark:bg-gray-600")})}refreshFocus(){const t=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach(n=>{n.classList.remove("focused","bg-gray-100","dark:bg-gray-600")}),this.grid.children[t].classList.add("focused","bg-gray-100","dark:bg-gray-600")}}function an(e,t){const n={date:e.getDate(),viewDate:new Date(e.picker.viewDate),viewId:e.picker.currentView.id,datepicker:e};e.element.dispatchEvent(new CustomEvent(t,{detail:n}))}function lr(e,t){const{minDate:n,maxDate:r}=e.config,{currentView:i,viewDate:l}=e.picker;let c;switch(i.id){case 0:c=rr(l,t);break;case 1:c=sn(l,t);break;default:c=sn(l,t*i.navStep)}c=Ja(c,n,r),e.picker.changeFocus(c).render()}function so(e){const t=e.picker.currentView.id;t!==e.config.maxView&&e.picker.changeView(t+1).render()}function ao(e){e.config.updateOnBlur?e.update({autohide:!0}):(e.refresh("input"),e.hide())}function qs(e,t){const n=e.picker,r=new Date(n.viewDate),i=n.currentView.id,l=i===1?rr(r,t-r.getMonth()):sn(r,t-r.getFullYear());n.changeFocus(l).changeView(i-1).render()}function vc(e){const t=e.picker,n=Ft();if(e.config.todayBtnMode===1){if(e.config.autohide){e.setDate(n);return}e.setDate(n,{render:!1}),t.update()}t.viewDate!==n&&t.changeFocus(n),t.changeView(0).render()}function wc(e){e.setDate({clear:!0})}function Ic(e){so(e)}function Tc(e){lr(e,-1)}function Oc(e){lr(e,1)}function Dc(e,t){const n=io(t,".datepicker-cell");if(!n||n.classList.contains("disabled"))return;const{id:r,isMinView:i}=e.picker.currentView;i?e.setDate(Number(n.dataset.date)):r===1?qs(e,Number(n.dataset.month)):qs(e,Number(n.dataset.year))}function Rc(e){!e.inline&&!e.config.disableTouchKeyboard&&e.inputField.focus()}function Ys(e,t){if(t.title!==void 0&&(t.title?(e.controls.title.textContent=t.title,Sn(e.controls.title)):(e.controls.title.textContent="",Rn(e.controls.title))),t.prevArrow){const n=e.controls.prevBtn;or(n),t.prevArrow.forEach(r=>{n.appendChild(r.cloneNode(!0))})}if(t.nextArrow){const n=e.controls.nextBtn;or(n),t.nextArrow.forEach(r=>{n.appendChild(r.cloneNode(!0))})}if(t.locale&&(e.controls.todayBtn.textContent=t.locale.today,e.controls.clearBtn.textContent=t.locale.clear),t.todayBtn!==void 0&&(t.todayBtn?Sn(e.controls.todayBtn):Rn(e.controls.todayBtn)),gt(t,"minDate")||gt(t,"maxDate")){const{minDate:n,maxDate:r}=e.datepicker.config;e.controls.todayBtn.disabled=!_i(Ft(),n,r)}t.clearBtn!==void 0&&(t.clearBtn?Sn(e.controls.clearBtn):Rn(e.controls.clearBtn))}function zs(e){const{dates:t,config:n}=e,r=t.length>0?Ei(t):n.defaultViewDate;return Ja(r,n.minDate,n.maxDate)}function Xs(e,t){const n=new Date(e.viewDate),r=new Date(t),{id:i,year:l,first:c,last:u}=e.currentView,f=r.getFullYear();switch(e.viewDate=t,f!==n.getFullYear()&&an(e.datepicker,"changeYear"),r.getMonth()!==n.getMonth()&&an(e.datepicker,"changeMonth"),i){case 0:return t<c||t>u;case 1:return f!==l;default:return f<c||f>u}}function qr(e){return window.getComputedStyle(e).direction}class Sc{constructor(t){this.datepicker=t;const n=gc.replace(/%buttonClass%/g,t.config.buttonClass),r=this.element=mt(n).firstChild,[i,l,c]=r.firstChild.children,u=i.firstElementChild,[f,h,p]=i.lastElementChild.children,[m,w]=c.firstChild.children,b={title:u,prevBtn:f,viewSwitch:h,nextBtn:p,todayBtn:m,clearBtn:w};this.main=l,this.controls=b;const _=t.inline?"inline":"dropdown";r.classList.add(`datepicker-${_}`),_==="dropdown"&&r.classList.add("dropdown","absolute","top-0","left-0","z-20","pt-2"),Ys(this,t.config),this.viewDate=zs(t),no(t,[[r,"click",Rc.bind(null,t),{capture:!0}],[l,"click",Dc.bind(null,t)],[b.viewSwitch,"click",Ic.bind(null,t)],[b.prevBtn,"click",Tc.bind(null,t)],[b.nextBtn,"click",Oc.bind(null,t)],[b.todayBtn,"click",vc.bind(null,t)],[b.clearBtn,"click",wc.bind(null,t)]]),this.views=[new _c(this),new yc(this),new $s(this,{id:2,name:"years",cellClass:"year",step:1}),new $s(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[t.config.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),t.config.container.appendChild(this.element)}setOptions(t){Ys(this,t),this.views.forEach(n=>{n.init(t,!1)}),this.currentView.render()}detach(){this.datepicker.config.container.removeChild(this.element)}show(){if(this.active)return;this.element.classList.add("active","block"),this.element.classList.remove("hidden"),this.active=!0;const t=this.datepicker;if(!t.inline){const n=qr(t.inputField);n!==qr(t.config.container)?this.element.dir=n:this.element.dir&&this.element.removeAttribute("dir"),this.place(),t.config.disableTouchKeyboard&&t.inputField.blur()}an(t,"show")}hide(){!this.active||(this.datepicker.exitEditMode(),this.element.classList.remove("active","block"),this.element.classList.add("active","block","hidden"),this.active=!1,an(this.datepicker,"hide"))}place(){const{classList:t,style:n}=this.element,{config:r,inputField:i}=this.datepicker,l=r.container,{width:c,height:u}=this.element.getBoundingClientRect(),{left:f,top:h,width:p}=l.getBoundingClientRect(),{left:m,top:w,width:b,height:_}=i.getBoundingClientRect();let{x:v,y:T}=r.orientation,D,y,E;l===document.body?(D=window.scrollY,y=m+window.scrollX,E=w+D):(D=l.scrollTop,y=m-f,E=w-h+D),v==="auto"&&(y<0?(v="left",y=10):y+c>p?v="right":v=qr(i)==="rtl"?"right":"left"),v==="right"&&(y-=c-b),T==="auto"&&(T=E-u<D?"bottom":"top"),T==="top"?E-=u:E+=_,t.remove("datepicker-orient-top","datepicker-orient-bottom","datepicker-orient-right","datepicker-orient-left"),t.add(`datepicker-orient-${T}`,`datepicker-orient-${v}`),n.top=E&&`${E}px`,n.left=y&&`${y}px`}setViewSwitchLabel(t){this.controls.viewSwitch.textContent=t}setPrevBtnDisabled(t){this.controls.prevBtn.disabled=t}setNextBtnDisabled(t){this.controls.nextBtn.disabled=t}changeView(t){const n=this.currentView,r=this.views[t];return r.id!==n.id&&(this.currentView=r,this._renderMethod="render",an(this.datepicker,"changeView"),this.main.replaceChild(r.element,n.element)),this}changeFocus(t){return this._renderMethod=Xs(this,t)?"render":"refreshFocus",this.views.forEach(n=>{n.updateFocus()}),this}update(){const t=zs(this.datepicker);return this._renderMethod=Xs(this,t)?"render":"refresh",this.views.forEach(n=>{n.updateFocus(),n.updateSelection()}),this}render(t=!0){const n=t&&this._renderMethod||"render";delete this._renderMethod,this.currentView[n]()}}function oo(e,t,n,r,i,l){if(!!_i(e,i,l)){if(r(e)){const c=t(e,n);return oo(c,t,n,r,i,l)}return e}}function $n(e,t,n,r){const i=e.picker,l=i.currentView,c=l.step||1;let u=i.viewDate,f,h;switch(l.id){case 0:r?u=rn(u,n*7):t.ctrlKey||t.metaKey?u=sn(u,n):u=rn(u,n),f=rn,h=p=>l.disabled.includes(p);break;case 1:u=rr(u,r?n*4:n),f=rr,h=p=>{const m=new Date(p),{year:w,disabled:b}=l;return m.getFullYear()===w&&b.includes(m.getMonth())};break;default:u=sn(u,n*(r?4:1)*c),f=sn,h=p=>l.disabled.includes(Pt(p,c))}u=oo(u,f,n<0?-c:c,h,l.minDate,l.maxDate),u!==void 0&&i.changeFocus(u).render()}function Ac(e,t){if(t.key==="Tab"){ao(e);return}const n=e.picker,{id:r,isMinView:i}=n.currentView;if(n.active)if(e.editMode)switch(t.key){case"Escape":n.hide();break;case"Enter":e.exitEditMode({update:!0,autohide:e.config.autohide});break;default:return}else switch(t.key){case"Escape":n.hide();break;case"ArrowLeft":if(t.ctrlKey||t.metaKey)lr(e,-1);else if(t.shiftKey){e.enterEditMode();return}else $n(e,t,-1,!1);break;case"ArrowRight":if(t.ctrlKey||t.metaKey)lr(e,1);else if(t.shiftKey){e.enterEditMode();return}else $n(e,t,1,!1);break;case"ArrowUp":if(t.ctrlKey||t.metaKey)so(e);else if(t.shiftKey){e.enterEditMode();return}else $n(e,t,-1,!0);break;case"ArrowDown":if(t.shiftKey&&!t.ctrlKey&&!t.metaKey){e.enterEditMode();return}$n(e,t,1,!0);break;case"Enter":i?e.setDate(n.viewDate):n.changeView(r-1).render();break;case"Backspace":case"Delete":e.enterEditMode();return;default:t.key.length===1&&!t.ctrlKey&&!t.metaKey&&e.enterEditMode();return}else switch(t.key){case"ArrowDown":case"Escape":n.show();break;case"Enter":e.update();break;default:return}t.preventDefault(),t.stopPropagation()}function Pc(e){e.config.showOnFocus&&!e._showing&&e.show()}function Lc(e,t){const n=t.target;(e.picker.active||e.config.showOnClick)&&(n._active=n===document.activeElement,n._clicking=setTimeout(()=>{delete n._active,delete n._clicking},2e3))}function Mc(e,t){const n=t.target;!n._clicking||(clearTimeout(n._clicking),delete n._clicking,n._active&&e.enterEditMode(),delete n._active,e.config.showOnClick&&e.show())}function Cc(e,t){t.clipboardData.types.includes("text/plain")&&e.enterEditMode()}function xc(e,t){const n=e.element;if(n!==document.activeElement)return;const r=e.picker.element;io(t,i=>i===n||i===r)||ao(e)}function lo(e,t){return e.map(n=>sr(n,t.format,t.locale)).join(t.dateDelimiter)}function co(e,t,n=!1){const{config:r,dates:i,rangepicker:l}=e;if(t.length===0)return n?[]:void 0;const c=l&&e===l.datepickers[1];let u=t.reduce((f,h)=>{let p=Ln(h,r.format,r.locale);if(p===void 0)return f;if(r.pickLevel>0){const m=new Date(p);r.pickLevel===1?p=c?m.setMonth(m.getMonth()+1,0):m.setDate(1):p=c?m.setFullYear(m.getFullYear()+1,0,0):m.setMonth(0,1)}return _i(p,r.minDate,r.maxDate)&&!f.includes(p)&&!r.datesDisabled.includes(p)&&!r.daysOfWeekDisabled.includes(new Date(p).getDay())&&f.push(p),f},[]);if(u.length!==0)return r.multidate&&!n&&(u=u.reduce((f,h)=>(i.includes(h)||f.push(h),f),i.filter(f=>!u.includes(f)))),r.maxNumberOfDates&&u.length>r.maxNumberOfDates?u.slice(r.maxNumberOfDates*-1):u}function cr(e,t=3,n=!0){const{config:r,picker:i,inputField:l}=e;if(t&2){const c=i.active?r.pickLevel:r.startView;i.update().changeView(c).render(n)}t&1&&l&&(l.value=lo(e.dates,r))}function Ks(e,t,n){let{clear:r,render:i,autohide:l}=n;i===void 0&&(i=!0),i?l===void 0&&(l=e.config.autohide):l=!1;const c=co(e,t,r);!c||(c.toString()!==e.dates.toString()?(e.dates=c,cr(e,i?3:1),an(e,"changeDate")):cr(e,1),l&&e.hide())}class kc{constructor(t,n={},r=void 0){t.datepicker=this,this.element=t;const i=this.config=Object.assign({buttonClass:n.buttonClass&&String(n.buttonClass)||"button",container:document.body,defaultViewDate:Ft(),maxDate:void 0,minDate:void 0},$r(bi,this));this._options=n,Object.assign(i,$r(n,this));const l=this.inline=t.tagName!=="INPUT";let c,u;if(l)i.container=t,u=Ur(t.dataset.date,i.dateDelimiter),delete t.dataset.date;else{const p=n.container?document.querySelector(n.container):null;p&&(i.container=p),c=this.inputField=t,c.classList.add("datepicker-input"),u=Ur(c.value,i.dateDelimiter)}if(r){const p=r.inputs.indexOf(c),m=r.datepickers;if(p<0||p>1||!Array.isArray(m))throw Error("Invalid rangepicker object.");m[p]=this,Object.defineProperty(this,"rangepicker",{get(){return r}})}this.dates=[];const f=co(this,u);f&&f.length>0&&(this.dates=f),c&&(c.value=lo(this.dates,i));const h=this.picker=new Sc(this);if(l)this.show();else{const p=xc.bind(null,this),m=[[c,"keydown",Ac.bind(null,this)],[c,"focus",Pc.bind(null,this)],[c,"mousedown",Lc.bind(null,this)],[c,"click",Mc.bind(null,this)],[c,"paste",Cc.bind(null,this)],[document,"mousedown",p],[document,"touchstart",p],[window,"resize",h.place.bind(h)]];no(this,m)}}static formatDate(t,n,r){return sr(t,n,r&&vn[r]||vn.en)}static parseDate(t,n,r){return Ln(t,n,r&&vn[r]||vn.en)}static get locales(){return vn}get active(){return!!(this.picker&&this.picker.active)}get pickerElement(){return this.picker?this.picker.element:void 0}setOptions(t){const n=this.picker,r=$r(t,this);Object.assign(this._options,t),Object.assign(this.config,r),n.setOptions(r),cr(this,3)}show(){if(this.inputField){if(this.inputField.disabled)return;this.inputField!==document.activeElement&&(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}hide(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}destroy(){return this.hide(),dc(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}getDate(t=void 0){const n=t?r=>sr(r,t,this.config.locale):r=>new Date(r);if(this.config.multidate)return this.dates.map(n);if(this.dates.length>0)return n(this.dates[0])}setDate(...t){const n=[...t],r={},i=Ei(t);typeof i=="object"&&!Array.isArray(i)&&!(i instanceof Date)&&i&&Object.assign(r,n.pop());const l=Array.isArray(n[0])?n[0]:n;Ks(this,l,r)}update(t=void 0){if(this.inline)return;const n={clear:!0,autohide:!!(t&&t.autohide)},r=Ur(this.inputField.value,this.config.dateDelimiter);Ks(this,r,n)}refresh(t=void 0,n=!1){t&&typeof t!="string"&&(n=t,t=void 0);let r;t==="picker"?r=2:t==="input"?r=1:r=3,cr(this,r,!n)}enterEditMode(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit","border-blue-700"))}exitEditMode(t=void 0){if(this.inline||!this.editMode)return;const n=Object.assign({update:!1},t);delete this.editMode,this.inputField.classList.remove("in-edit","border-blue-700"),n.update&&this.update(n)}}/*!
 * FilePond 4.30.4
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Nc=e=>e instanceof HTMLElement,Gc=(e,t=[],n=[])=>{const r={...e},i=[],l=[],c=()=>({...r}),u=()=>{const _=[...i];return i.length=0,_},f=()=>{const _=[...l];l.length=0,_.forEach(({type:v,data:T})=>{h(v,T)})},h=(_,v,T)=>{if(T&&!document.hidden){l.push({type:_,data:v});return}b[_]&&b[_](v),i.push({type:_,data:v})},p=(_,...v)=>w[_]?w[_](...v):null,m={getState:c,processActionQueue:u,processDispatchQueue:f,dispatch:h,query:p};let w={};t.forEach(_=>{w={..._(r),...w}});let b={};return n.forEach(_=>{b={..._(h,p,r),...b}}),m},Fc=(e,t,n)=>{if(typeof n=="function"){e[t]=n;return}Object.defineProperty(e,t,{...n})},be=(e,t)=>{for(const n in e)!e.hasOwnProperty(n)||t(n,e[n])},Tt=e=>{const t={};return be(e,n=>{Fc(t,n,e[n])}),t},Oe=(e,t,n=null)=>{if(n===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,n)},Bc="http://www.w3.org/2000/svg",Vc=["svg","path"],Qs=e=>Vc.includes(e),dr=(e,t,n={})=>{typeof t=="object"&&(n=t,t=null);const r=Qs(e)?document.createElementNS(Bc,e):document.createElement(e);return t&&(Qs(e)?Oe(r,"class",t):r.className=t),be(n,(i,l)=>{Oe(r,i,l)}),r},Uc=e=>(t,n)=>{typeof n<"u"&&e.children[n]?e.insertBefore(t,e.children[n]):e.appendChild(t)},jc=(e,t)=>(n,r)=>(typeof r<"u"?t.splice(r,0,n):t.push(n),n),Hc=(e,t)=>n=>(t.splice(t.indexOf(n),1),n.element.parentNode&&e.removeChild(n.element),n),Wc=(()=>typeof window<"u"&&typeof window.document<"u")(),uo=()=>Wc,$c=uo()?dr("svg"):{},qc="children"in $c?e=>e.children.length:e=>e.childNodes.length,fo=(e,t,n,r)=>{const i=n[0]||e.left,l=n[1]||e.top,c=i+e.width,u=l+e.height*(r[1]||1),f={element:{...e},inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:i,top:l,right:c,bottom:u}};return t.filter(h=>!h.isRectIgnored()).map(h=>h.rect).forEach(h=>{Zs(f.inner,{...h.inner}),Zs(f.outer,{...h.outer})}),Js(f.inner),f.outer.bottom+=f.element.marginBottom,f.outer.right+=f.element.marginRight,Js(f.outer),f},Zs=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},Js=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},Lt=e=>typeof e=="number",Yc=(e,t,n,r=.001)=>Math.abs(e-t)<r&&Math.abs(n)<r,zc=({stiffness:e=.5,damping:t=.75,mass:n=10}={})=>{let r=null,i=null,l=0,c=!1;const h=Tt({interpolate:(p,m)=>{if(c)return;if(!(Lt(r)&&Lt(i))){c=!0,l=0;return}const w=-(i-r)*e;l+=w/n,i+=l,l*=t,Yc(i,r,l)||m?(i=r,l=0,c=!0,h.onupdate(i),h.oncomplete(i)):h.onupdate(i)},target:{set:p=>{if(Lt(p)&&!Lt(i)&&(i=p),r===null&&(r=p,i=p),r=p,i===r||typeof r>"u"){c=!0,l=0,h.onupdate(i),h.oncomplete(i);return}c=!1},get:()=>r},resting:{get:()=>c},onupdate:p=>{},oncomplete:p=>{}});return h},Xc=e=>e<.5?2*e*e:-1+(4-2*e)*e,Kc=({duration:e=500,easing:t=Xc,delay:n=0}={})=>{let r=null,i,l,c=!0,u=!1,f=null;const p=Tt({interpolate:(m,w)=>{c||f===null||(r===null&&(r=m),!(m-r<n)&&(i=m-r-n,i>=e||w?(i=1,l=u?0:1,p.onupdate(l*f),p.oncomplete(l*f),c=!0):(l=i/e,p.onupdate((i>=0?t(u?1-l:l):0)*f))))},target:{get:()=>u?0:f,set:m=>{if(f===null){f=m,p.onupdate(m),p.oncomplete(m);return}m<f?(f=1,u=!0):(u=!1,f=m),c=!1,r=null}},resting:{get:()=>c},onupdate:m=>{},oncomplete:m=>{}});return p},ea={spring:zc,tween:Kc},Qc=(e,t,n)=>{const r=e[t]&&typeof e[t][n]=="object"?e[t][n]:e[t]||e,i=typeof r=="string"?r:r.type,l=typeof r=="object"?{...r}:{};return ea[i]?ea[i](l):null},wi=(e,t,n,r=!1)=>{t=Array.isArray(t)?t:[t],t.forEach(i=>{e.forEach(l=>{let c=l,u=()=>n[l],f=h=>n[l]=h;typeof l=="object"&&(c=l.key,u=l.getter||u,f=l.setter||f),!(i[c]&&!r)&&(i[c]={get:u,set:f})})})},Zc=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r})=>{const i={...t},l=[];return be(e,(c,u)=>{const f=Qc(u);if(!f)return;f.onupdate=p=>{t[c]=p},f.target=i[c],wi([{key:c,setter:p=>{f.target!==p&&(f.target=p)},getter:()=>t[c]}],[n,r],t,!0),l.push(f)}),{write:c=>{let u=document.hidden,f=!0;return l.forEach(h=>{h.resting||(f=!1),h.interpolate(c,u)}),f},destroy:()=>{}}},Jc=e=>(t,n)=>{e.addEventListener(t,n)},ed=e=>(t,n)=>{e.removeEventListener(t,n)},td=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,viewState:i,view:l})=>{const c=[],u=Jc(l.element),f=ed(l.element);return r.on=(h,p)=>{c.push({type:h,fn:p}),u(h,p)},r.off=(h,p)=>{c.splice(c.findIndex(m=>m.type===h&&m.fn===p),1),f(h,p)},{write:()=>!0,destroy:()=>{c.forEach(h=>{f(h.type,h.fn)})}}},nd=({mixinConfig:e,viewProps:t,viewExternalAPI:n})=>{wi(e,n,t)},xe=e=>e!=null,rd={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},id=({mixinConfig:e,viewProps:t,viewInternalAPI:n,viewExternalAPI:r,view:i})=>{const l={...t},c={};wi(e,[n,r],t);const u=()=>[t.translateX||0,t.translateY||0],f=()=>[t.scaleX||0,t.scaleY||0],h=()=>i.rect?fo(i.rect,i.childViews,u(),f()):null;return n.rect={get:h},r.rect={get:h},e.forEach(p=>{t[p]=typeof l[p]>"u"?rd[p]:l[p]}),{write:()=>{if(!!sd(c,t))return ad(i.element,t),Object.assign(c,{...t}),!0},destroy:()=>{}}},sd=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const n in t)if(t[n]!==e[n])return!0;return!1},ad=(e,{opacity:t,perspective:n,translateX:r,translateY:i,scaleX:l,scaleY:c,rotateX:u,rotateY:f,rotateZ:h,originX:p,originY:m,width:w,height:b})=>{let _="",v="";(xe(p)||xe(m))&&(v+=`transform-origin: ${p||0}px ${m||0}px;`),xe(n)&&(_+=`perspective(${n}px) `),(xe(r)||xe(i))&&(_+=`translate3d(${r||0}px, ${i||0}px, 0) `),(xe(l)||xe(c))&&(_+=`scale3d(${xe(l)?l:1}, ${xe(c)?c:1}, 1) `),xe(h)&&(_+=`rotateZ(${h}rad) `),xe(u)&&(_+=`rotateX(${u}rad) `),xe(f)&&(_+=`rotateY(${f}rad) `),_.length&&(v+=`transform:${_};`),xe(t)&&(v+=`opacity:${t};`,t===0&&(v+="visibility:hidden;"),t<1&&(v+="pointer-events:none;")),xe(b)&&(v+=`height:${b}px;`),xe(w)&&(v+=`width:${w}px;`);const T=e.elementCurrentStyle||"";(v.length!==T.length||v!==T)&&(e.style.cssText=v,e.elementCurrentStyle=v)},od={styles:id,listeners:td,animations:Zc,apis:nd},ta=(e={},t={},n={})=>(t.layoutCalculated||(e.paddingTop=parseInt(n.paddingTop,10)||0,e.marginTop=parseInt(n.marginTop,10)||0,e.marginRight=parseInt(n.marginRight,10)||0,e.marginBottom=parseInt(n.marginBottom,10)||0,e.marginLeft=parseInt(n.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e),De=({tag:e="div",name:t=null,attributes:n={},read:r=()=>{},write:i=()=>{},create:l=()=>{},destroy:c=()=>{},filterFrameActionsForChild:u=(b,_)=>_,didCreateView:f=()=>{},didWriteView:h=()=>{},ignoreRect:p=!1,ignoreRectUpdate:m=!1,mixins:w=[]}={})=>(b,_={})=>{const v=dr(e,`filepond--${t}`,n),T=window.getComputedStyle(v,null),D=ta();let y=null,E=!1;const O=[],S=[],G={},$={},L=[i],N=[r],z=[c],j=()=>v,H=()=>O.concat(),ee=()=>G,k=Q=>(_e,We)=>_e(Q,We),Z=()=>y||(y=fo(D,O,[0,0],[1,1]),y),A=()=>T,x=()=>{y=null,O.forEach(We=>We._read()),!(m&&D.width&&D.height)&&ta(D,v,T);const _e={root:fe,props:_,rect:D};N.forEach(We=>We(_e))},W=(Q,_e,We)=>{let Pe=_e.length===0;return L.forEach(ye=>{ye({props:_,root:fe,actions:_e,timestamp:Q,shouldOptimize:We})===!1&&(Pe=!1)}),S.forEach(ye=>{ye.write(Q)===!1&&(Pe=!1)}),O.filter(ye=>!!ye.element.parentNode).forEach(ye=>{ye._write(Q,u(ye,_e),We)||(Pe=!1)}),O.forEach((ye,yt)=>{ye.element.parentNode||(fe.appendChild(ye.element,yt),ye._read(),ye._write(Q,u(ye,_e),We),Pe=!1)}),E=Pe,h({props:_,root:fe,actions:_e,timestamp:Q}),Pe},C=()=>{S.forEach(Q=>Q.destroy()),z.forEach(Q=>{Q({root:fe,props:_})}),O.forEach(Q=>Q._destroy())},F={element:{get:j},style:{get:A},childViews:{get:H}},J={...F,rect:{get:Z},ref:{get:ee},is:Q=>t===Q,appendChild:Uc(v),createChildView:k(b),linkView:Q=>(O.push(Q),Q),unlinkView:Q=>{O.splice(O.indexOf(Q),1)},appendChildView:jc(v,O),removeChildView:Hc(v,O),registerWriter:Q=>L.push(Q),registerReader:Q=>N.push(Q),registerDestroyer:Q=>z.push(Q),invalidateLayout:()=>v.layoutCalculated=!1,dispatch:b.dispatch,query:b.query},ie={element:{get:j},childViews:{get:H},rect:{get:Z},resting:{get:()=>E},isRectIgnored:()=>p,_read:x,_write:W,_destroy:C},pe={...F,rect:{get:()=>D}};Object.keys(w).sort((Q,_e)=>Q==="styles"?1:_e==="styles"?-1:0).forEach(Q=>{const _e=od[Q]({mixinConfig:w[Q],viewProps:_,viewState:$,viewInternalAPI:J,viewExternalAPI:ie,view:Tt(pe)});_e&&S.push(_e)});const fe=Tt(J);l({root:fe,props:_});const he=qc(v);return O.forEach((Q,_e)=>{fe.appendChild(Q.element,he+_e)}),f(fe),Tt(ie)},ld=(e,t,n=60)=>{const r="__framePainter";if(window[r]){window[r].readers.push(e),window[r].writers.push(t);return}window[r]={readers:[e],writers:[t]};const i=window[r],l=1e3/n;let c=null,u=null,f=null,h=null;const p=()=>{document.hidden?(f=()=>window.setTimeout(()=>m(performance.now()),l),h=()=>window.clearTimeout(u)):(f=()=>window.requestAnimationFrame(m),h=()=>window.cancelAnimationFrame(u))};document.addEventListener("visibilitychange",()=>{h&&h(),p(),m(performance.now())});const m=w=>{u=f(m),c||(c=w);const b=w-c;b<=l||(c=w-b%l,i.readers.forEach(_=>_()),i.writers.forEach(_=>_(w)))};return p(),m(performance.now()),{pause:()=>{h(u)}}},Ne=(e,t)=>({root:n,props:r,actions:i=[],timestamp:l,shouldOptimize:c})=>{i.filter(u=>e[u.type]).forEach(u=>e[u.type]({root:n,props:r,action:u.data,timestamp:l,shouldOptimize:c})),t&&t({root:n,props:r,actions:i,timestamp:l,shouldOptimize:c})},na=(e,t)=>t.parentNode.insertBefore(e,t),ra=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),gr=e=>Array.isArray(e),Et=e=>e==null,cd=e=>e.trim(),mr=e=>""+e,dd=(e,t=",")=>Et(e)?[]:gr(e)?e:mr(e).split(t).map(cd).filter(n=>n.length),po=e=>typeof e=="boolean",ho=e=>po(e)?e:e==="true",ke=e=>typeof e=="string",go=e=>Lt(e)?e:ke(e)?mr(e).replace(/[a-z]+/gi,""):0,tr=e=>parseInt(go(e),10),ia=e=>parseFloat(go(e)),un=e=>Lt(e)&&isFinite(e)&&Math.floor(e)===e,sa=(e,t=1e3)=>{if(un(e))return e;let n=mr(e).trim();return/MB$/i.test(n)?(n=n.replace(/MB$i/,"").trim(),tr(n)*t*t):/KB/i.test(n)?(n=n.replace(/KB$i/,"").trim(),tr(n)*t):tr(n)},Mt=e=>typeof e=="function",ud=e=>{let t=self,n=e.split("."),r=null;for(;r=n.shift();)if(t=t[r],!t)return null;return t},aa={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},fd=e=>{const t={};return t.url=ke(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},be(aa,n=>{t[n]=pd(n,e[n],aa[n],t.timeout,t.headers)}),t.process=e.process||ke(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},pd=(e,t,n,r,i)=>{if(t===null)return null;if(typeof t=="function")return t;const l={url:n==="GET"||n==="PATCH"?`?${e}=`:"",method:n,headers:i,withCredentials:!1,timeout:r,onload:null,ondata:null,onerror:null};if(ke(t))return l.url=t,l;if(Object.assign(l,t),ke(l.headers)){const c=l.headers.split(/:(.+)/);l.headers={header:c[0],value:c[1]}}return l.withCredentials=ho(l.withCredentials),l},hd=e=>fd(e),gd=e=>e===null,Ae=e=>typeof e=="object"&&e!==null,md=e=>Ae(e)&&ke(e.url)&&Ae(e.process)&&Ae(e.revert)&&Ae(e.restore)&&Ae(e.fetch),oi=e=>gr(e)?"array":gd(e)?"null":un(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":md(e)?"api":typeof e,Ed=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),_d={array:dd,boolean:ho,int:e=>oi(e)==="bytes"?sa(e):tr(e),number:ia,float:ia,bytes:sa,string:e=>Mt(e)?e:mr(e),function:e=>ud(e),serverapi:hd,object:e=>{try{return JSON.parse(Ed(e))}catch{return null}}},yd=(e,t)=>_d[t](e),mo=(e,t,n)=>{if(e===t)return e;let r=oi(e);if(r!==n){const i=yd(e,n);if(r=oi(i),i===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${n}"`;e=i}return e},bd=(e,t)=>{let n=e;return{enumerable:!0,get:()=>n,set:r=>{n=mo(r,e,t)}}},vd=e=>{const t={};return be(e,n=>{const r=e[n];t[n]=bd(r[0],r[1])}),Tt(t)},wd=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:vd(e)}),Er=(e,t="-")=>e.split(/(?=[A-Z])/).map(n=>n.toLowerCase()).join(t),Id=(e,t)=>{const n={};return be(t,r=>{n[r]={get:()=>e.getState().options[r],set:i=>{e.dispatch(`SET_${Er(r,"_").toUpperCase()}`,{value:i})}}}),n},Td=e=>(t,n,r)=>{const i={};return be(e,l=>{const c=Er(l,"_").toUpperCase();i[`SET_${c}`]=u=>{try{r.options[l]=u.value}catch{}t(`DID_SET_${c}`,{value:r.options[l]})}}),i},Od=e=>t=>{const n={};return be(e,r=>{n[`GET_${Er(r,"_").toUpperCase()}`]=i=>t.options[r]}),n},Ze={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},Ii=()=>Math.random().toString(36).substring(2,11),Ti=(e,t)=>e.splice(t,1),Dd=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},_r=()=>{const e=[],t=(r,i)=>{Ti(e,e.findIndex(l=>l.event===r&&(l.cb===i||!i)))},n=(r,i,l)=>{e.filter(c=>c.event===r).map(c=>c.cb).forEach(c=>Dd(()=>c(...i),l))};return{fireSync:(r,...i)=>{n(r,i,!0)},fire:(r,...i)=>{n(r,i,!1)},on:(r,i)=>{e.push({event:r,cb:i})},onOnce:(r,i)=>{e.push({event:r,cb:(...l)=>{t(r,i),i(...l)}})},off:t}},Eo=(e,t,n)=>{Object.getOwnPropertyNames(e).filter(r=>!n.includes(r)).forEach(r=>Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r)))},Rd=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],Ue=e=>{const t={};return Eo(e,t,Rd),t},Sd=e=>{e.forEach((t,n)=>{t.released&&Ti(e,n)})},K={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},Se={INPUT:1,LIMBO:2,LOCAL:3},_o=e=>/[^0-9]+/.exec(e),yo=()=>_o(1.1 .toLocaleString())[0],Ad=()=>{const e=yo(),t=1e3 .toLocaleString(),n=1e3 .toString();return t!==n?_o(t)[0]:e==="."?",":"."},P={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},Oi=[],it=(e,t,n)=>new Promise((r,i)=>{const l=Oi.filter(u=>u.key===e).map(u=>u.cb);if(l.length===0){r(t);return}const c=l.shift();l.reduce((u,f)=>u.then(h=>f(h,n)),c(t,n)).then(u=>r(u)).catch(u=>i(u))}),Bt=(e,t,n)=>Oi.filter(r=>r.key===e).map(r=>r.cb(t,n)),Pd=(e,t)=>Oi.push({key:e,cb:t}),Ld=e=>Object.assign(en,e),ur=()=>({...en}),Md=e=>{be(e,(t,n)=>{!en[t]||(en[t][0]=mo(n,en[t][0],en[t][1]))})},en={id:[null,P.STRING],name:["filepond",P.STRING],disabled:[!1,P.BOOLEAN],className:[null,P.STRING],required:[!1,P.BOOLEAN],captureMethod:[null,P.STRING],allowSyncAcceptAttribute:[!0,P.BOOLEAN],allowDrop:[!0,P.BOOLEAN],allowBrowse:[!0,P.BOOLEAN],allowPaste:[!0,P.BOOLEAN],allowMultiple:[!1,P.BOOLEAN],allowReplace:[!0,P.BOOLEAN],allowRevert:[!0,P.BOOLEAN],allowRemove:[!0,P.BOOLEAN],allowProcess:[!0,P.BOOLEAN],allowReorder:[!1,P.BOOLEAN],allowDirectoriesOnly:[!1,P.BOOLEAN],storeAsFile:[!1,P.BOOLEAN],forceRevert:[!1,P.BOOLEAN],maxFiles:[null,P.INT],checkValidity:[!1,P.BOOLEAN],itemInsertLocationFreedom:[!0,P.BOOLEAN],itemInsertLocation:["before",P.STRING],itemInsertInterval:[75,P.INT],dropOnPage:[!1,P.BOOLEAN],dropOnElement:[!0,P.BOOLEAN],dropValidation:[!1,P.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],P.ARRAY],instantUpload:[!0,P.BOOLEAN],maxParallelUploads:[2,P.INT],allowMinimumUploadDuration:[!0,P.BOOLEAN],chunkUploads:[!1,P.BOOLEAN],chunkForce:[!1,P.BOOLEAN],chunkSize:[5e6,P.INT],chunkRetryDelays:[[500,1e3,3e3],P.ARRAY],server:[null,P.SERVER_API],fileSizeBase:[1e3,P.INT],labelFileSizeBytes:["bytes",P.STRING],labelFileSizeKilobytes:["KB",P.STRING],labelFileSizeMegabytes:["MB",P.STRING],labelFileSizeGigabytes:["GB",P.STRING],labelDecimalSeparator:[yo(),P.STRING],labelThousandsSeparator:[Ad(),P.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',P.STRING],labelInvalidField:["Field contains invalid files",P.STRING],labelFileWaitingForSize:["Waiting for size",P.STRING],labelFileSizeNotAvailable:["Size not available",P.STRING],labelFileCountSingular:["file in list",P.STRING],labelFileCountPlural:["files in list",P.STRING],labelFileLoading:["Loading",P.STRING],labelFileAdded:["Added",P.STRING],labelFileLoadError:["Error during load",P.STRING],labelFileRemoved:["Removed",P.STRING],labelFileRemoveError:["Error during remove",P.STRING],labelFileProcessing:["Uploading",P.STRING],labelFileProcessingComplete:["Upload complete",P.STRING],labelFileProcessingAborted:["Upload cancelled",P.STRING],labelFileProcessingError:["Error during upload",P.STRING],labelFileProcessingRevertError:["Error during revert",P.STRING],labelTapToCancel:["tap to cancel",P.STRING],labelTapToRetry:["tap to retry",P.STRING],labelTapToUndo:["tap to undo",P.STRING],labelButtonRemoveItem:["Remove",P.STRING],labelButtonAbortItemLoad:["Abort",P.STRING],labelButtonRetryItemLoad:["Retry",P.STRING],labelButtonAbortItemProcessing:["Cancel",P.STRING],labelButtonUndoItemProcessing:["Undo",P.STRING],labelButtonRetryItemProcessing:["Retry",P.STRING],labelButtonProcessItem:["Upload",P.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',P.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',P.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',P.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',P.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',P.STRING],oninit:[null,P.FUNCTION],onwarning:[null,P.FUNCTION],onerror:[null,P.FUNCTION],onactivatefile:[null,P.FUNCTION],oninitfile:[null,P.FUNCTION],onaddfilestart:[null,P.FUNCTION],onaddfileprogress:[null,P.FUNCTION],onaddfile:[null,P.FUNCTION],onprocessfilestart:[null,P.FUNCTION],onprocessfileprogress:[null,P.FUNCTION],onprocessfileabort:[null,P.FUNCTION],onprocessfilerevert:[null,P.FUNCTION],onprocessfile:[null,P.FUNCTION],onprocessfiles:[null,P.FUNCTION],onremovefile:[null,P.FUNCTION],onpreparefile:[null,P.FUNCTION],onupdatefiles:[null,P.FUNCTION],onreorderfiles:[null,P.FUNCTION],beforeDropFile:[null,P.FUNCTION],beforeAddFile:[null,P.FUNCTION],beforeRemoveFile:[null,P.FUNCTION],beforePrepareFile:[null,P.FUNCTION],stylePanelLayout:[null,P.STRING],stylePanelAspectRatio:[null,P.STRING],styleItemPanelAspectRatio:[null,P.STRING],styleButtonRemoveItemPosition:["left",P.STRING],styleButtonProcessItemPosition:["right",P.STRING],styleLoadIndicatorPosition:["right",P.STRING],styleProgressIndicatorPosition:["right",P.STRING],styleButtonRemoveItemAlign:[!1,P.BOOLEAN],files:[[],P.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],P.ARRAY]},Ct=(e,t)=>Et(t)?e[0]||null:un(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(n=>n.id===t)||null),bo=e=>{if(Et(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},st=e=>e.filter(t=>!t.archived),Cd={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let qn=null;const xd=()=>{if(qn===null)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,qn=t.files.length===1}catch{qn=!1}return qn},kd=[K.LOAD_ERROR,K.PROCESSING_ERROR,K.PROCESSING_REVERT_ERROR],Nd=[K.LOADING,K.PROCESSING,K.PROCESSING_QUEUED,K.INIT],Gd=[K.PROCESSING_COMPLETE],Fd=e=>kd.includes(e.status),Bd=e=>Nd.includes(e.status),Vd=e=>Gd.includes(e.status),oa=e=>Ae(e.options.server)&&(Ae(e.options.server.process)||Mt(e.options.server.process)),Ud=e=>({GET_STATUS:()=>{const t=st(e.items),{EMPTY:n,ERROR:r,BUSY:i,IDLE:l,READY:c}=Cd;return t.length===0?n:t.some(Fd)?r:t.some(Bd)?i:t.some(Vd)?c:l},GET_ITEM:t=>Ct(e.items,t),GET_ACTIVE_ITEM:t=>Ct(st(e.items),t),GET_ACTIVE_ITEMS:()=>st(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const n=Ct(e.items,t);return n?n.filename:null},GET_ITEM_SIZE:t=>{const n=Ct(e.items,t);return n?n.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(t=>/^style/.test(t)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:bo(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>st(e.items).filter(n=>n.status===t),GET_TOTAL_ITEMS:()=>st(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&xd()&&!oa(e),IS_ASYNC:()=>oa(e),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),jd=e=>{const t=st(e.items).length;if(!e.options.allowMultiple)return t===0;const n=e.options.maxFiles;return n===null||t<n},vo=(e,t,n)=>Math.max(Math.min(n,e),t),Hd=(e,t,n)=>e.splice(t,0,n),Wd=(e,t,n)=>Et(t)?null:typeof n>"u"?(e.push(t),t):(n=vo(n,0,e.length),Hd(e,n,t),t),li=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),Cn=e=>e.split("/").pop().split("?").shift(),yr=e=>e.split(".").pop(),$d=e=>{if(typeof e!="string")return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},wn=(e,t="")=>(t+e).slice(-t.length),wo=(e=new Date)=>`${e.getFullYear()}-${wn(e.getMonth()+1,"00")}-${wn(e.getDate(),"00")}_${wn(e.getHours(),"00")}-${wn(e.getMinutes(),"00")}-${wn(e.getSeconds(),"00")}`,cn=(e,t,n=null,r=null)=>{const i=typeof n=="string"?e.slice(0,e.size,n):e.slice(0,e.size,e.type);return i.lastModifiedDate=new Date,e._relativePath&&(i._relativePath=e._relativePath),ke(t)||(t=wo()),t&&r===null&&yr(t)?i.name=t:(r=r||$d(i.type),i.name=t+(r?"."+r:"")),i},qd=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,Io=(e,t)=>{const n=qd();if(n){const r=new n;return r.append(e),r.getBlob(t)}return new Blob([e],{type:t})},Yd=(e,t)=>{const n=new ArrayBuffer(e.length),r=new Uint8Array(n);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return Io(n,t)},To=e=>(/^data:(.+);/.exec(e)||[])[1]||null,zd=e=>e.split(",")[1].replace(/\s/g,""),Xd=e=>atob(zd(e)),Kd=e=>{const t=To(e),n=Xd(e);return Yd(n,t)},Qd=(e,t,n)=>cn(Kd(e),t,null,n),Zd=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map(n=>n.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(n=>n.length);return t.length?decodeURI(t[t.length-1]):null},Jd=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},eu=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,Di=e=>{const t={source:null,name:null,size:null},n=e.split(`
`);for(let r of n){const i=Zd(r);if(i){t.name=i;continue}const l=Jd(r);if(l){t.size=l;continue}const c=eu(r);if(c){t.source=c;continue}}return t},tu=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},n=()=>t.progress,r=()=>{t.request&&t.request.abort&&t.request.abort()},i=()=>{const u=t.source;c.fire("init",u),u instanceof File?c.fire("load",u):u instanceof Blob?c.fire("load",cn(u,u.name)):li(u)?c.fire("load",Qd(u)):l(u)},l=u=>{if(!e){c.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(u,f=>{t.duration=Date.now()-t.timestamp,t.complete=!0,f instanceof Blob&&(f=cn(f,f.name||Cn(u))),c.fire("load",f instanceof Blob?f:f?f.body:null)},f=>{c.fire("error",typeof f=="string"?{type:"error",code:0,body:f}:f)},(f,h,p)=>{if(p&&(t.size=p),t.duration=Date.now()-t.timestamp,!f){t.progress=null;return}t.progress=h/p,c.fire("progress",t.progress)},()=>{c.fire("abort")},f=>{const h=Di(typeof f=="string"?f:f.headers);c.fire("meta",{size:t.size||h.size,filename:h.name,source:h.source})})},c={..._r(),setSource:u=>t.source=u,getProgress:n,abort:r,load:i};return c},la=e=>/GET|HEAD/.test(e),xt=(e,t,n)=>{const r={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{i=!0,c.abort()}};let i=!1,l=!1;n={method:"POST",headers:{},withCredentials:!1,...n},t=encodeURI(t),la(n.method)&&e&&(t=`${t}${encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))}`);const c=new XMLHttpRequest,u=la(n.method)?c:c.upload;return u.onprogress=f=>{i||r.onprogress(f.lengthComputable,f.loaded,f.total)},c.onreadystatechange=()=>{c.readyState<2||c.readyState===4&&c.status===0||l||(l=!0,r.onheaders(c))},c.onload=()=>{c.status>=200&&c.status<300?r.onload(c):r.onerror(c)},c.onerror=()=>r.onerror(c),c.onabort=()=>{i=!0,r.onabort()},c.ontimeout=()=>r.ontimeout(c),c.open(n.method,t,!0),un(n.timeout)&&(c.timeout=n.timeout),Object.keys(n.headers).forEach(f=>{const h=unescape(encodeURIComponent(n.headers[f]));c.setRequestHeader(f,h)}),n.responseType&&(c.responseType=n.responseType),n.withCredentials&&(c.withCredentials=!0),c.send(e),r},Ie=(e,t,n,r)=>({type:e,code:t,body:n,headers:r}),kt=e=>t=>{e(Ie("error",0,"Timeout",t.getAllResponseHeaders()))},ca=e=>/\?/.test(e),An=(...e)=>{let t="";return e.forEach(n=>{t+=ca(t)&&ca(n)?n.replace(/\?/,"&"):n}),t},Yr=(e="",t)=>{if(typeof t=="function")return t;if(!t||!ke(t.url))return null;const n=t.onload||(i=>i),r=t.onerror||(i=>null);return(i,l,c,u,f,h)=>{const p=xt(i,An(e,t.url),{...t,responseType:"blob"});return p.onload=m=>{const w=m.getAllResponseHeaders(),b=Di(w).name||Cn(i);l(Ie("load",m.status,t.method==="HEAD"?null:cn(n(m.response),b),w))},p.onerror=m=>{c(Ie("error",m.status,r(m.response)||m.statusText,m.getAllResponseHeaders()))},p.onheaders=m=>{h(Ie("headers",m.status,null,m.getAllResponseHeaders()))},p.ontimeout=kt(c),p.onprogress=u,p.onabort=f,p}},ze={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},nu=(e,t,n,r,i,l,c,u,f,h,p)=>{const m=[],{chunkTransferId:w,chunkServer:b,chunkSize:_,chunkRetryDelays:v}=p,T={serverId:w,aborted:!1},D=t.ondata||(k=>k),y=t.onload||((k,Z)=>Z==="HEAD"?k.getResponseHeader("Upload-Offset"):k.response),E=t.onerror||(k=>null),O=k=>{const Z=new FormData;Ae(i)&&Z.append(n,JSON.stringify(i));const A=typeof t.headers=="function"?t.headers(r,i):{...t.headers,"Upload-Length":r.size},x={...t,headers:A},W=xt(D(Z),An(e,t.url),x);W.onload=C=>k(y(C,x.method)),W.onerror=C=>c(Ie("error",C.status,E(C.response)||C.statusText,C.getAllResponseHeaders())),W.ontimeout=kt(c)},S=k=>{const Z=An(e,b.url,T.serverId),x={headers:typeof t.headers=="function"?t.headers(T.serverId):{...t.headers},method:"HEAD"},W=xt(null,Z,x);W.onload=C=>k(y(C,x.method)),W.onerror=C=>c(Ie("error",C.status,E(C.response)||C.statusText,C.getAllResponseHeaders())),W.ontimeout=kt(c)},G=Math.floor(r.size/_);for(let k=0;k<=G;k++){const Z=k*_,A=r.slice(Z,Z+_,"application/offset+octet-stream");m[k]={index:k,size:A.size,offset:Z,data:A,file:r,progress:0,retries:[...v],status:ze.QUEUED,error:null,request:null,timeout:null}}const $=()=>l(T.serverId),L=k=>k.status===ze.QUEUED||k.status===ze.ERROR,N=k=>{if(T.aborted)return;if(k=k||m.find(L),!k){m.every(F=>F.status===ze.COMPLETE)&&$();return}k.status=ze.PROCESSING,k.progress=null;const Z=b.ondata||(F=>F),A=b.onerror||(F=>null),x=An(e,b.url,T.serverId),W=typeof b.headers=="function"?b.headers(k):{...b.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":k.offset,"Upload-Length":r.size,"Upload-Name":r.name},C=k.request=xt(Z(k.data),x,{...b,headers:W});C.onload=()=>{k.status=ze.COMPLETE,k.request=null,H()},C.onprogress=(F,J,ie)=>{k.progress=F?J:null,j()},C.onerror=F=>{k.status=ze.ERROR,k.request=null,k.error=A(F.response)||F.statusText,z(k)||c(Ie("error",F.status,A(F.response)||F.statusText,F.getAllResponseHeaders()))},C.ontimeout=F=>{k.status=ze.ERROR,k.request=null,z(k)||kt(c)(F)},C.onabort=()=>{k.status=ze.QUEUED,k.request=null,f()}},z=k=>k.retries.length===0?!1:(k.status=ze.WAITING,clearTimeout(k.timeout),k.timeout=setTimeout(()=>{N(k)},k.retries.shift()),!0),j=()=>{const k=m.reduce((A,x)=>A===null||x.progress===null?null:A+x.progress,0);if(k===null)return u(!1,0,0);const Z=m.reduce((A,x)=>A+x.size,0);u(!0,k,Z)},H=()=>{m.filter(Z=>Z.status===ze.PROCESSING).length>=1||N()},ee=()=>{m.forEach(k=>{clearTimeout(k.timeout),k.request&&k.request.abort()})};return T.serverId?S(k=>{T.aborted||(m.filter(Z=>Z.offset<k).forEach(Z=>{Z.status=ze.COMPLETE,Z.progress=Z.size}),H())}):O(k=>{T.aborted||(h(k),T.serverId=k,H())}),{abort:()=>{T.aborted=!0,ee()}}},ru=(e,t,n,r)=>(i,l,c,u,f,h,p)=>{if(!i)return;const m=r.chunkUploads,w=m&&i.size>r.chunkSize,b=m&&(w||r.chunkForce);if(i instanceof Blob&&b)return nu(e,t,n,i,l,c,u,f,h,p,r);const _=t.ondata||(S=>S),v=t.onload||(S=>S),T=t.onerror||(S=>null),D=typeof t.headers=="function"?t.headers(i,l)||{}:{...t.headers},y={...t,headers:D};var E=new FormData;Ae(l)&&E.append(n,JSON.stringify(l)),(i instanceof Blob?[{name:null,file:i}]:i).forEach(S=>{E.append(n,S.file,S.name===null?S.file.name:`${S.name}${S.file.name}`)});const O=xt(_(E),An(e,t.url),y);return O.onload=S=>{c(Ie("load",S.status,v(S.response),S.getAllResponseHeaders()))},O.onerror=S=>{u(Ie("error",S.status,T(S.response)||S.statusText,S.getAllResponseHeaders()))},O.ontimeout=kt(u),O.onprogress=f,O.onabort=h,O},iu=(e="",t,n,r)=>typeof t=="function"?(...i)=>t(n,...i,r):!t||!ke(t.url)?null:ru(e,t,n,r),In=(e="",t)=>{if(typeof t=="function")return t;if(!t||!ke(t.url))return(i,l)=>l();const n=t.onload||(i=>i),r=t.onerror||(i=>null);return(i,l,c)=>{const u=xt(i,e+t.url,t);return u.onload=f=>{l(Ie("load",f.status,n(f.response),f.getAllResponseHeaders()))},u.onerror=f=>{c(Ie("error",f.status,r(f.response)||f.statusText,f.getAllResponseHeaders()))},u.ontimeout=kt(c),u}},Oo=(e=0,t=1)=>e+Math.random()*(t-e),su=(e,t=1e3,n=0,r=25,i=250)=>{let l=null;const c=Date.now(),u=()=>{let f=Date.now()-c,h=Oo(r,i);f+h>t&&(h=f+h-t);let p=f/t;if(p>=1||document.hidden){e(1);return}e(p),l=setTimeout(u,h)};return t>0&&u(),{clear:()=>{clearTimeout(l)}}},au=(e,t)=>{const n={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:r}=t,i=(p,m)=>{const w=()=>{n.duration===0||n.progress===null||h.fire("progress",h.getProgress())},b=()=>{n.complete=!0,h.fire("load-perceived",n.response.body)};h.fire("start"),n.timestamp=Date.now(),n.perceivedPerformanceUpdater=su(_=>{n.perceivedProgress=_,n.perceivedDuration=Date.now()-n.timestamp,w(),n.response&&n.perceivedProgress===1&&!n.complete&&b()},r?Oo(750,1500):0),n.request=e(p,m,_=>{n.response=Ae(_)?_:{type:"load",code:200,body:`${_}`,headers:{}},n.duration=Date.now()-n.timestamp,n.progress=1,h.fire("load",n.response.body),(!r||r&&n.perceivedProgress===1)&&b()},_=>{n.perceivedPerformanceUpdater.clear(),h.fire("error",Ae(_)?_:{type:"error",code:0,body:`${_}`})},(_,v,T)=>{n.duration=Date.now()-n.timestamp,n.progress=_?v/T:null,w()},()=>{n.perceivedPerformanceUpdater.clear(),h.fire("abort",n.response?n.response.body:null)},_=>{h.fire("transfer",_)})},l=()=>{!n.request||(n.perceivedPerformanceUpdater.clear(),n.request.abort&&n.request.abort(),n.complete=!0)},c=()=>{l(),n.complete=!1,n.perceivedProgress=0,n.progress=0,n.timestamp=null,n.perceivedDuration=0,n.duration=0,n.request=null,n.response=null},u=r?()=>n.progress?Math.min(n.progress,n.perceivedProgress):null:()=>n.progress||null,f=r?()=>Math.min(n.duration,n.perceivedDuration):()=>n.duration,h={..._r(),process:i,abort:l,getProgress:u,getDuration:f,reset:c};return h},Do=e=>e.substring(0,e.lastIndexOf("."))||e,ou=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||li(e)?t[0]=e.name||wo():li(e)?(t[1]=e.length,t[2]=To(e)):ke(e)&&(t[0]=Cn(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},dn=e=>!!(e instanceof File||e instanceof Blob&&e.name),Ro=e=>{if(!Ae(e))return e;const t=gr(e)?[]:{};for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n];t[n]=r&&Ae(r)?Ro(r):r}return t},lu=(e=null,t=null,n=null)=>{const r=Ii(),i={archived:!1,frozen:!1,released:!1,source:null,file:n,serverFileReference:t,transferId:null,processingAborted:!1,status:t?K.PROCESSING_COMPLETE:K.INIT,activeLoader:null,activeProcessor:null};let l=null;const c={},u=L=>i.status=L,f=(L,...N)=>{i.released||i.frozen||G.fire(L,...N)},h=()=>yr(i.file.name),p=()=>i.file.type,m=()=>i.file.size,w=()=>i.file,b=(L,N,z)=>{if(i.source=L,G.fireSync("init"),i.file){G.fireSync("load-skip");return}i.file=ou(L),N.on("init",()=>{f("load-init")}),N.on("meta",j=>{i.file.size=j.size,i.file.filename=j.filename,j.source&&(e=Se.LIMBO,i.serverFileReference=j.source,i.status=K.PROCESSING_COMPLETE),f("load-meta")}),N.on("progress",j=>{u(K.LOADING),f("load-progress",j)}),N.on("error",j=>{u(K.LOAD_ERROR),f("load-request-error",j)}),N.on("abort",()=>{u(K.INIT),f("load-abort")}),N.on("load",j=>{i.activeLoader=null;const H=k=>{i.file=dn(k)?k:i.file,e===Se.LIMBO&&i.serverFileReference?u(K.PROCESSING_COMPLETE):u(K.IDLE),f("load")},ee=k=>{i.file=j,f("load-meta"),u(K.LOAD_ERROR),f("load-file-error",k)};if(i.serverFileReference){H(j);return}z(j,H,ee)}),N.setSource(L),i.activeLoader=N,N.load()},_=()=>{!i.activeLoader||i.activeLoader.load()},v=()=>{if(i.activeLoader){i.activeLoader.abort();return}u(K.INIT),f("load-abort")},T=(L,N)=>{if(i.processingAborted){i.processingAborted=!1;return}if(u(K.PROCESSING),l=null,!(i.file instanceof Blob)){G.on("load",()=>{T(L,N)});return}L.on("load",H=>{i.transferId=null,i.serverFileReference=H}),L.on("transfer",H=>{i.transferId=H}),L.on("load-perceived",H=>{i.activeProcessor=null,i.transferId=null,i.serverFileReference=H,u(K.PROCESSING_COMPLETE),f("process-complete",H)}),L.on("start",()=>{f("process-start")}),L.on("error",H=>{i.activeProcessor=null,u(K.PROCESSING_ERROR),f("process-error",H)}),L.on("abort",H=>{i.activeProcessor=null,i.serverFileReference=H,u(K.IDLE),f("process-abort"),l&&l()}),L.on("progress",H=>{f("process-progress",H)});const z=H=>{i.archived||L.process(H,{...c})},j=console.error;N(i.file,z,j),i.activeProcessor=L},D=()=>{i.processingAborted=!1,u(K.PROCESSING_QUEUED)},y=()=>new Promise(L=>{if(!i.activeProcessor){i.processingAborted=!0,u(K.IDLE),f("process-abort"),L();return}l=()=>{L()},i.activeProcessor.abort()}),E=(L,N)=>new Promise((z,j)=>{const H=i.serverFileReference!==null?i.serverFileReference:i.transferId;if(H===null){z();return}L(H,()=>{i.serverFileReference=null,i.transferId=null,z()},ee=>{if(!N){z();return}u(K.PROCESSING_REVERT_ERROR),f("process-revert-error"),j(ee)}),u(K.IDLE),f("process-revert")}),O=(L,N,z)=>{const j=L.split("."),H=j[0],ee=j.pop();let k=c;j.forEach(Z=>k=k[Z]),JSON.stringify(k[ee])!==JSON.stringify(N)&&(k[ee]=N,f("metadata-update",{key:H,value:c[H],silent:z}))},G={id:{get:()=>r},origin:{get:()=>e,set:L=>e=L},serverId:{get:()=>i.serverFileReference},transferId:{get:()=>i.transferId},status:{get:()=>i.status},filename:{get:()=>i.file.name},filenameWithoutExtension:{get:()=>Do(i.file.name)},fileExtension:{get:h},fileType:{get:p},fileSize:{get:m},file:{get:w},relativePath:{get:()=>i.file._relativePath},source:{get:()=>i.source},getMetadata:L=>Ro(L?c[L]:c),setMetadata:(L,N,z)=>{if(Ae(L)){const j=L;return Object.keys(j).forEach(H=>{O(H,j[H],N)}),L}return O(L,N,z),N},extend:(L,N)=>$[L]=N,abortLoad:v,retryLoad:_,requestProcessing:D,abortProcessing:y,load:b,process:T,revert:E,..._r(),freeze:()=>i.frozen=!0,release:()=>i.released=!0,released:{get:()=>i.released},archive:()=>i.archived=!0,archived:{get:()=>i.archived}},$=Tt(G);return $},cu=(e,t)=>Et(t)?0:ke(t)?e.findIndex(n=>n.id===t):-1,da=(e,t)=>{const n=cu(e,t);if(!(n<0))return e[n]||null},ua=(e,t,n,r,i,l)=>{const c=xt(null,e,{method:"GET",responseType:"blob"});return c.onload=u=>{const f=u.getAllResponseHeaders(),h=Di(f).name||Cn(e);t(Ie("load",u.status,cn(u.response,h),f))},c.onerror=u=>{n(Ie("error",u.status,u.statusText,u.getAllResponseHeaders()))},c.onheaders=u=>{l(Ie("headers",u.status,null,u.getAllResponseHeaders()))},c.ontimeout=kt(n),c.onprogress=r,c.onabort=i,c},fa=e=>(e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),du=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&fa(location.href)!==fa(e),Yn=e=>(...t)=>Mt(e)?e(...t):e,uu=e=>!dn(e.file),zr=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:st(t.items)})},0)},pa=(e,...t)=>new Promise(n=>{if(!e)return n(!0);const r=e(...t);if(r==null)return n(!0);if(typeof r=="boolean")return n(r);typeof r.then=="function"&&r.then(n)}),Xr=(e,t)=>{e.items.sort((n,r)=>t(Ue(n),Ue(r)))},Xe=(e,t)=>({query:n,success:r=()=>{},failure:i=()=>{},...l}={})=>{const c=Ct(e.items,n);if(!c){i({error:Ie("error",0,"Item not found"),file:null});return}t(c,r,i,l||{})},fu=(e,t,n)=>({ABORT_ALL:()=>{st(n.items).forEach(r=>{r.freeze(),r.abortLoad(),r.abortProcessing()})},DID_SET_FILES:({value:r=[]})=>{const i=r.map(c=>({source:c.source?c.source:c,options:c.options}));let l=st(n.items);l.forEach(c=>{i.find(u=>u.source===c.source||u.source===c.file)||e("REMOVE_ITEM",{query:c,remove:!1})}),l=st(n.items),i.forEach((c,u)=>{l.find(f=>f.source===c.source||f.file===c.source)||e("ADD_ITEM",{...c,interactionMethod:Ze.NONE,index:u})})},DID_UPDATE_ITEM_METADATA:({id:r,action:i,change:l})=>{l.silent||(clearTimeout(n.itemUpdateTimeout),n.itemUpdateTimeout=setTimeout(()=>{const c=da(n.items,r);if(!t("IS_ASYNC")){it("SHOULD_PREPARE_OUTPUT",!1,{item:c,query:t,action:i,change:l}).then(p=>{const m=t("GET_BEFORE_PREPARE_FILE");m&&(p=m(c,p)),p&&e("REQUEST_PREPARE_OUTPUT",{query:r,item:c,success:w=>{e("DID_PREPARE_OUTPUT",{id:r,file:w})}},!0)});return}c.origin===Se.LOCAL&&e("DID_LOAD_ITEM",{id:c.id,error:null,serverFileReference:c.source});const u=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:r})},32)},f=p=>{c.revert(In(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(p?u:()=>{}).catch(()=>{})},h=p=>{c.abortProcessing().then(p?u:()=>{})};if(c.status===K.PROCESSING_COMPLETE)return f(n.options.instantUpload);if(c.status===K.PROCESSING)return h(n.options.instantUpload);n.options.instantUpload&&u()},0))},MOVE_ITEM:({query:r,index:i})=>{const l=Ct(n.items,r);if(!l)return;const c=n.items.indexOf(l);i=vo(i,0,n.items.length-1),c!==i&&n.items.splice(i,0,n.items.splice(c,1)[0])},SORT:({compare:r})=>{Xr(n,r),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:r,index:i,interactionMethod:l,success:c=()=>{},failure:u=()=>{}})=>{let f=i;if(i===-1||typeof i>"u"){const b=t("GET_ITEM_INSERT_LOCATION"),_=t("GET_TOTAL_ITEMS");f=b==="before"?0:_}const h=t("GET_IGNORED_FILES"),p=b=>dn(b)?!h.includes(b.name.toLowerCase()):!Et(b),w=r.filter(p).map(b=>new Promise((_,v)=>{e("ADD_ITEM",{interactionMethod:l,source:b.source||b,success:_,failure:v,index:f++,options:b.options||{}})}));Promise.all(w).then(c).catch(u)},ADD_ITEM:({source:r,index:i=-1,interactionMethod:l,success:c=()=>{},failure:u=()=>{},options:f={}})=>{if(Et(r)){u({error:Ie("error",0,"No source"),file:null});return}if(dn(r)&&n.options.ignoredFiles.includes(r.name.toLowerCase()))return;if(!jd(n)){if(n.options.allowMultiple||!n.options.allowMultiple&&!n.options.allowReplace){const y=Ie("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:r,error:y}),u({error:y,file:null});return}const D=st(n.items)[0];if(D.status===K.PROCESSING_COMPLETE||D.status===K.PROCESSING_REVERT_ERROR){const y=t("GET_FORCE_REVERT");if(D.revert(In(n.options.server.url,n.options.server.revert),y).then(()=>{!y||e("ADD_ITEM",{source:r,index:i,interactionMethod:l,success:c,failure:u,options:f})}).catch(()=>{}),y)return}e("REMOVE_ITEM",{query:D.id})}const h=f.type==="local"?Se.LOCAL:f.type==="limbo"?Se.LIMBO:Se.INPUT,p=lu(h,h===Se.INPUT?null:r,f.file);Object.keys(f.metadata||{}).forEach(D=>{p.setMetadata(D,f.metadata[D])}),Bt("DID_CREATE_ITEM",p,{query:t,dispatch:e});const m=t("GET_ITEM_INSERT_LOCATION");n.options.itemInsertLocationFreedom||(i=m==="before"?-1:n.items.length),Wd(n.items,p,i),Mt(m)&&r&&Xr(n,m);const w=p.id;p.on("init",()=>{e("DID_INIT_ITEM",{id:w})}),p.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:w})}),p.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:w})}),p.on("load-progress",D=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:w,progress:D})}),p.on("load-request-error",D=>{const y=Yn(n.options.labelFileLoadError)(D);if(D.code>=400&&D.code<500){e("DID_THROW_ITEM_INVALID",{id:w,error:D,status:{main:y,sub:`${D.code} (${D.body})`}}),u({error:D,file:Ue(p)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:w,error:D,status:{main:y,sub:n.options.labelTapToRetry}})}),p.on("load-file-error",D=>{e("DID_THROW_ITEM_INVALID",{id:w,error:D.status,status:D.status}),u({error:D.status,file:Ue(p)})}),p.on("load-abort",()=>{e("REMOVE_ITEM",{query:w})}),p.on("load-skip",()=>{e("COMPLETE_LOAD_ITEM",{query:w,item:p,data:{source:r,success:c}})}),p.on("load",()=>{const D=y=>{if(!y){e("REMOVE_ITEM",{query:w});return}p.on("metadata-update",E=>{e("DID_UPDATE_ITEM_METADATA",{id:w,change:E})}),it("SHOULD_PREPARE_OUTPUT",!1,{item:p,query:t}).then(E=>{const O=t("GET_BEFORE_PREPARE_FILE");O&&(E=O(p,E));const S=()=>{e("COMPLETE_LOAD_ITEM",{query:w,item:p,data:{source:r,success:c}}),zr(e,n)};if(E){e("REQUEST_PREPARE_OUTPUT",{query:w,item:p,success:G=>{e("DID_PREPARE_OUTPUT",{id:w,file:G}),S()}},!0);return}S()})};it("DID_LOAD_ITEM",p,{query:t,dispatch:e}).then(()=>{pa(t("GET_BEFORE_ADD_FILE"),Ue(p)).then(D)}).catch(y=>{if(!y||!y.error||!y.status)return D(!1);e("DID_THROW_ITEM_INVALID",{id:w,error:y.error,status:y.status})})}),p.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:w})}),p.on("process-progress",D=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:w,progress:D})}),p.on("process-error",D=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:w,error:D,status:{main:Yn(n.options.labelFileProcessingError)(D),sub:n.options.labelTapToRetry}})}),p.on("process-revert-error",D=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:w,error:D,status:{main:Yn(n.options.labelFileProcessingRevertError)(D),sub:n.options.labelTapToRetry}})}),p.on("process-complete",D=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:w,error:null,serverFileReference:D}),e("DID_DEFINE_VALUE",{id:w,value:D})}),p.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:w})}),p.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:w}),e("DID_DEFINE_VALUE",{id:w,value:null})}),e("DID_ADD_ITEM",{id:w,index:i,interactionMethod:l}),zr(e,n);const{url:b,load:_,restore:v,fetch:T}=n.options.server||{};p.load(r,tu(h===Se.INPUT?ke(r)&&du(r)&&T?Yr(b,T):ua:h===Se.LIMBO?Yr(b,v):Yr(b,_)),(D,y,E)=>{it("LOAD_FILE",D,{query:t}).then(y).catch(E)})},REQUEST_PREPARE_OUTPUT:({item:r,success:i,failure:l=()=>{}})=>{const c={error:Ie("error",0,"Item not found"),file:null};if(r.archived)return l(c);it("PREPARE_OUTPUT",r.file,{query:t,item:r}).then(u=>{it("COMPLETE_PREPARE_OUTPUT",u,{query:t,item:r}).then(f=>{if(r.archived)return l(c);i(f)})})},COMPLETE_LOAD_ITEM:({item:r,data:i})=>{const{success:l,source:c}=i,u=t("GET_ITEM_INSERT_LOCATION");if(Mt(u)&&c&&Xr(n,u),e("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.origin===Se.INPUT?null:c}),l(Ue(r)),r.origin===Se.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:r.id});return}if(r.origin===Se.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:r.id,error:null,serverFileReference:c}),e("DID_DEFINE_VALUE",{id:r.id,value:r.serverId||c});return}t("IS_ASYNC")&&n.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:r.id})},RETRY_ITEM_LOAD:Xe(n,r=>{r.retryLoad()}),REQUEST_ITEM_PREPARE:Xe(n,(r,i,l)=>{e("REQUEST_PREPARE_OUTPUT",{query:r.id,item:r,success:c=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:c}),i({file:r,output:c})},failure:l},!0)}),REQUEST_ITEM_PROCESSING:Xe(n,(r,i,l)=>{if(!(r.status===K.IDLE||r.status===K.PROCESSING_ERROR)){const u=()=>e("REQUEST_ITEM_PROCESSING",{query:r,success:i,failure:l}),f=()=>document.hidden?u():setTimeout(u,32);r.status===K.PROCESSING_COMPLETE||r.status===K.PROCESSING_REVERT_ERROR?r.revert(In(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(f).catch(()=>{}):r.status===K.PROCESSING&&r.abortProcessing().then(f);return}r.status!==K.PROCESSING_QUEUED&&(r.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:r.id}),e("PROCESS_ITEM",{query:r,success:i,failure:l},!0))}),PROCESS_ITEM:Xe(n,(r,i,l)=>{const c=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",K.PROCESSING).length===c){n.processingQueue.push({id:r.id,success:i,failure:l});return}if(r.status===K.PROCESSING)return;const f=()=>{const p=n.processingQueue.shift();if(!p)return;const{id:m,success:w,failure:b}=p,_=Ct(n.items,m);if(!_||_.archived){f();return}e("PROCESS_ITEM",{query:m,success:w,failure:b},!0)};r.onOnce("process-complete",()=>{i(Ue(r)),f();const p=n.options.server;if(n.options.instantUpload&&r.origin===Se.LOCAL&&Mt(p.remove)){const b=()=>{};r.origin=Se.LIMBO,n.options.server.remove(r.source,b,b)}t("GET_ITEMS_BY_STATUS",K.PROCESSING_COMPLETE).length===n.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),r.onOnce("process-error",p=>{l({error:p,file:Ue(r)}),f()});const h=n.options;r.process(au(iu(h.server.url,h.server.process,h.name,{chunkTransferId:r.transferId,chunkServer:h.server.patch,chunkUploads:h.chunkUploads,chunkForce:h.chunkForce,chunkSize:h.chunkSize,chunkRetryDelays:h.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(p,m,w)=>{it("PREPARE_OUTPUT",p,{query:t,item:r}).then(b=>{e("DID_PREPARE_OUTPUT",{id:r.id,file:b}),m(b)}).catch(w)})}),RETRY_ITEM_PROCESSING:Xe(n,r=>{e("REQUEST_ITEM_PROCESSING",{query:r})}),REQUEST_REMOVE_ITEM:Xe(n,r=>{pa(t("GET_BEFORE_REMOVE_FILE"),Ue(r)).then(i=>{!i||e("REMOVE_ITEM",{query:r})})}),RELEASE_ITEM:Xe(n,r=>{r.release()}),REMOVE_ITEM:Xe(n,(r,i,l,c)=>{const u=()=>{const h=r.id;da(n.items,h).archive(),e("DID_REMOVE_ITEM",{error:null,id:h,item:r}),zr(e,n),i(Ue(r))},f=n.options.server;r.origin===Se.LOCAL&&f&&Mt(f.remove)&&c.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:r.id}),f.remove(r.source,()=>u(),h=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:r.id,error:Ie("error",0,h,null),status:{main:Yn(n.options.labelFileRemoveError)(h),sub:n.options.labelTapToRetry}})})):((c.revert&&r.origin!==Se.LOCAL&&r.serverId!==null||n.options.chunkUploads&&r.file.size>n.options.chunkSize||n.options.chunkUploads&&n.options.chunkForce)&&r.revert(In(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")),u())}),ABORT_ITEM_LOAD:Xe(n,r=>{r.abortLoad()}),ABORT_ITEM_PROCESSING:Xe(n,r=>{if(r.serverId){e("REVERT_ITEM_PROCESSING",{id:r.id});return}r.abortProcessing().then(()=>{n.options.instantUpload&&e("REMOVE_ITEM",{query:r.id})})}),REQUEST_REVERT_ITEM_PROCESSING:Xe(n,r=>{if(!n.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:r});return}const i=u=>{!u||e("REVERT_ITEM_PROCESSING",{query:r})},l=t("GET_BEFORE_REMOVE_FILE");if(!l)return i(!0);const c=l(Ue(r));if(c==null)return i(!0);if(typeof c=="boolean")return i(c);typeof c.then=="function"&&c.then(i)}),REVERT_ITEM_PROCESSING:Xe(n,r=>{r.revert(In(n.options.server.url,n.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(n.options.instantUpload||uu(r))&&e("REMOVE_ITEM",{query:r.id})}).catch(()=>{})}),SET_OPTIONS:({options:r})=>{const i=Object.keys(r),l=pu.filter(u=>i.includes(u));[...l,...Object.keys(r).filter(u=>!l.includes(u))].forEach(u=>{e(`SET_${Er(u,"_").toUpperCase()}`,{value:r[u]})})}}),pu=["server"],Ri=e=>e,_t=e=>document.createElement(e),Te=(e,t)=>{let n=e.childNodes[0];n?t!==n.nodeValue&&(n.nodeValue=t):(n=document.createTextNode(t),e.appendChild(n))},ha=(e,t,n,r)=>{const i=(r%360-90)*Math.PI/180;return{x:e+n*Math.cos(i),y:t+n*Math.sin(i)}},hu=(e,t,n,r,i,l)=>{const c=ha(e,t,n,i),u=ha(e,t,n,r);return["M",c.x,c.y,"A",n,n,0,l,0,u.x,u.y].join(" ")},gu=(e,t,n,r,i)=>{let l=1;return i>r&&i-r<=.5&&(l=0),r>i&&r-i>=.5&&(l=0),hu(e,t,n,Math.min(.9999,r)*360,Math.min(.9999,i)*360,l)},mu=({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const n=dr("svg");e.ref.path=dr("path",{"stroke-width":2,"stroke-linecap":"round"}),n.appendChild(e.ref.path),e.ref.svg=n,e.appendChild(n)},Eu=({root:e,props:t})=>{if(t.opacity===0)return;t.align&&(e.element.dataset.align=t.align);const n=parseInt(Oe(e.ref.path,"stroke-width"),10),r=e.rect.element.width*.5;let i=0,l=0;t.spin?(i=0,l=.5):(i=0,l=t.progress);const c=gu(r,r,r-n,i,l);Oe(e.ref.path,"d",c),Oe(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},ga=De({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:mu,write:Eu,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),_u=({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},yu=({root:e,props:t})=>{const{isDisabled:n}=t,r=e.query("GET_DISABLED")||t.opacity===0;r&&!n?(t.isDisabled=!0,Oe(e.element,"disabled","disabled")):!r&&n&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))},So=De({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:_u,write:yu}),Ao=(e,t=".",n=1e3,r={})=>{const{labelBytes:i="bytes",labelKilobytes:l="KB",labelMegabytes:c="MB",labelGigabytes:u="GB"}=r;e=Math.round(Math.abs(e));const f=n,h=n*n,p=n*n*n;return e<f?`${e} ${i}`:e<h?`${Math.floor(e/f)} ${l}`:e<p?`${ma(e/h,1,t)} ${c}`:`${ma(e/p,2,t)} ${u}`},ma=(e,t,n)=>e.toFixed(t).split(".").filter(r=>r!=="0").join(n),bu=({root:e,props:t})=>{const n=_t("span");n.className="filepond--file-info-main",Oe(n,"aria-hidden","true"),e.appendChild(n),e.ref.fileName=n;const r=_t("span");r.className="filepond--file-info-sub",e.appendChild(r),e.ref.fileSize=r,Te(r,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),Te(n,Ri(e.query("GET_ITEM_NAME",t.id)))},ci=({root:e,props:t})=>{Te(e.ref.fileSize,Ao(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),Te(e.ref.fileName,Ri(e.query("GET_ITEM_NAME",t.id)))},Ea=({root:e,props:t})=>{if(un(e.query("GET_ITEM_SIZE",t.id))){ci({root:e,props:t});return}Te(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},vu=De({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:Ne({DID_LOAD_ITEM:ci,DID_UPDATE_ITEM_META:ci,DID_THROW_ITEM_LOAD_ERROR:Ea,DID_THROW_ITEM_INVALID:Ea}),didCreateView:e=>{Bt("CREATE_VIEW",{...e,view:e})},create:bu,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Po=e=>Math.round(e*100),wu=({root:e})=>{const t=_t("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const n=_t("span");n.className="filepond--file-status-sub",e.appendChild(n),e.ref.sub=n,Lo({root:e,action:{progress:null}})},Lo=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${Po(t.progress)}%`;Te(e.ref.main,n),Te(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Iu=({root:e,action:t})=>{const n=t.progress===null?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${Po(t.progress)}%`;Te(e.ref.main,n),Te(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Tu=({root:e})=>{Te(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),Te(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Ou=({root:e})=>{Te(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),Te(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},Du=({root:e})=>{Te(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),Te(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},_a=({root:e})=>{Te(e.ref.main,""),Te(e.ref.sub,"")},Tn=({root:e,action:t})=>{Te(e.ref.main,t.status.main),Te(e.ref.sub,t.status.sub)},Ru=De({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:Ne({DID_LOAD_ITEM:_a,DID_REVERT_ITEM_PROCESSING:_a,DID_REQUEST_ITEM_PROCESSING:Tu,DID_ABORT_ITEM_PROCESSING:Ou,DID_COMPLETE_ITEM_PROCESSING:Du,DID_UPDATE_ITEM_PROCESS_PROGRESS:Iu,DID_UPDATE_ITEM_LOAD_PROGRESS:Lo,DID_THROW_ITEM_LOAD_ERROR:Tn,DID_THROW_ITEM_INVALID:Tn,DID_THROW_ITEM_PROCESSING_ERROR:Tn,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Tn,DID_THROW_ITEM_REMOVE_ERROR:Tn}),didCreateView:e=>{Bt("CREATE_VIEW",{...e,view:e})},create:wu,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),di={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},ui=[];be(di,e=>{ui.push(e)});const $e=e=>{if(fi(e)==="right")return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Su=e=>e.ref.buttonAbortItemLoad.rect.element.width,zn=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),Au=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),Pu=e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION"),Lu=e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),fi=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),Mu={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:Pu},processProgressIndicator:{opacity:0,align:Lu},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},ya={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:$e},status:{translateX:$e}},Kr={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},tn={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:$e},status:{translateX:$e,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:$e},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:fi},info:{translateX:$e},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:fi},buttonRemoveItem:{opacity:1},info:{translateX:$e},status:{opacity:1,translateX:$e}},DID_LOAD_ITEM:ya,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:$e},status:{translateX:$e}},DID_START_ITEM_PROCESSING:Kr,DID_REQUEST_ITEM_PROCESSING:Kr,DID_UPDATE_ITEM_PROCESS_PROGRESS:Kr,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:$e}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:$e},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:ya},Cu=De({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),xu=({root:e,props:t})=>{const n=Object.keys(di).reduce((_,v)=>(_[v]={...di[v]},_),{}),{id:r}=t,i=e.query("GET_ALLOW_REVERT"),l=e.query("GET_ALLOW_REMOVE"),c=e.query("GET_ALLOW_PROCESS"),u=e.query("GET_INSTANT_UPLOAD"),f=e.query("IS_ASYNC"),h=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let p;f?c&&!i?p=_=>!/RevertItemProcessing/.test(_):!c&&i?p=_=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(_):!c&&!i&&(p=_=>!/Process/.test(_)):p=_=>!/Process/.test(_);const m=p?ui.filter(p):ui.concat();if(u&&i&&(n.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",n.RevertItemProcessing.icon="GET_ICON_REMOVE"),f&&!i){const _=tn.DID_COMPLETE_ITEM_PROCESSING;_.info.translateX=Au,_.info.translateY=zn,_.status.translateY=zn,_.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(f&&!c&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(_=>{tn[_].status.translateY=zn}),tn.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Su),h&&i){n.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const _=tn.DID_COMPLETE_ITEM_PROCESSING;_.info.translateX=$e,_.status.translateY=zn,_.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}l||(n.RemoveItem.disabled=!0),be(n,(_,v)=>{const T=e.createChildView(So,{label:e.query(v.label),icon:e.query(v.icon),opacity:0});m.includes(_)&&e.appendChildView(T),v.disabled&&(T.element.setAttribute("disabled","disabled"),T.element.setAttribute("hidden","hidden")),T.element.dataset.align=e.query(`GET_STYLE_${v.align}`),T.element.classList.add(v.className),T.on("click",D=>{D.stopPropagation(),!v.disabled&&e.dispatch(v.action,{query:r})}),e.ref[`button${_}`]=T}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(Cu)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(vu,{id:r})),e.ref.status=e.appendChildView(e.createChildView(Ru,{id:r}));const w=e.appendChildView(e.createChildView(ga,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));w.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=w;const b=e.appendChildView(e.createChildView(ga,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));b.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=b,e.ref.activeStyles=[]},ku=({root:e,actions:t,props:n})=>{Nu({root:e,actions:t,props:n});let r=t.concat().filter(i=>/^DID_/.test(i.type)).reverse().find(i=>tn[i.type]);if(r){e.ref.activeStyles=[];const i=tn[r.type];be(Mu,(l,c)=>{const u=e.ref[l];be(c,(f,h)=>{const p=i[l]&&typeof i[l][f]<"u"?i[l][f]:h;e.ref.activeStyles.push({control:u,key:f,value:p})})})}e.ref.activeStyles.forEach(({control:i,key:l,value:c})=>{i[l]=typeof c=="function"?c(e):c})},Nu=Ne({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),Gu=De({create:xu,write:ku,didCreateView:e=>{Bt("CREATE_VIEW",{...e,view:e})},name:"file"}),Fu=({root:e,props:t})=>{e.ref.fileName=_t("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(Gu,{id:t.id})),e.ref.data=!1},Bu=({root:e,props:t})=>{Te(e.ref.fileName,Ri(e.query("GET_ITEM_NAME",t.id)))},Vu=De({create:Fu,ignoreRect:!0,write:Ne({DID_LOAD_ITEM:Bu}),didCreateView:e=>{Bt("CREATE_VIEW",{...e,view:e})},tag:"fieldset",name:"file-wrapper"}),ba={type:"spring",damping:.6,mass:7},Uu=({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:ba},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:ba},styles:["translateY"]}}].forEach(n=>{ju(e,n,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},ju=(e,t,n)=>{const r=De({name:`panel-${t.name} filepond--${n}`,mixins:t.mixins,ignoreRectUpdate:!0}),i=e.createChildView(r,t.props);e.ref[t.name]=e.appendChildView(i)},Hu=({root:e,props:t})=>{if((e.ref.scalable===null||t.scalable!==e.ref.scalable)&&(e.ref.scalable=po(t.scalable)?t.scalable:!0,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const n=e.ref.top.rect.element,r=e.ref.bottom.rect.element,i=Math.max(n.height+r.height,t.height);e.ref.center.translateY=n.height,e.ref.center.scaleY=(i-n.height-r.height)/100,e.ref.bottom.translateY=i-r.height},Mo=De({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:Hu,create:Uu,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),Wu=e=>{const t=e.map(r=>r.id);let n;return{setIndex:r=>{n=r},getIndex:()=>n,getItemIndex:r=>t.indexOf(r.id)}},va={type:"spring",stiffness:.75,damping:.45,mass:10},wa="spring",Ia={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},$u=({root:e,props:t})=>{if(e.ref.handleClick=r=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(Vu,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(Mo,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";const n=r=>{if(!r.isPrimary)return;let i=!1;const l={x:r.pageX,y:r.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:r.offsetX,y:r.offsetY};const c=Wu(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:c});const u=h=>{if(!h.isPrimary)return;h.stopPropagation(),h.preventDefault(),t.dragOffset={x:h.pageX-l.x,y:h.pageY-l.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!i&&(i=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:c})},f=h=>{!h.isPrimary||(document.removeEventListener("pointermove",u),document.removeEventListener("pointerup",f),t.dragOffset={x:h.pageX-l.x,y:h.pageY-l.y},e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:c}),i&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0))};document.addEventListener("pointermove",u),document.addEventListener("pointerup",f)};e.element.addEventListener("pointerdown",n)},qu=Ne({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),Yu=Ne({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:n,shouldOptimize:r})=>{e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let i=t.concat().filter(c=>/^DID_/.test(c.type)).reverse().find(c=>Ia[c.type]);i&&i.type!==n.currentState&&(n.currentState=i.type,e.element.dataset.filepondItemState=Ia[n.currentState]||"");const l=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");l?r||(e.height=e.rect.element.width*l):(qu({root:e,actions:t,props:n}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),r&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),zu=De({create:$u,write:Yu,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:wa,scaleY:wa,translateX:va,translateY:va,opacity:{type:"tween",duration:150}}}});var Si=(e,t)=>Math.max(1,Math.floor((e+1)/t));const Ai=(e,t,n)=>{if(!n)return;const r=e.rect.element.width,i=t.length;let l=null;if(i===0||n.top<t[0].rect.element.top)return-1;const u=t[0].rect.element,f=u.marginLeft+u.marginRight,h=u.width+f,p=Si(r,h);if(p===1){for(let b=0;b<i;b++){const _=t[b],v=_.rect.outer.top+_.rect.element.height*.5;if(n.top<v)return b}return i}const m=u.marginTop+u.marginBottom,w=u.height+m;for(let b=0;b<i;b++){const _=b%p,v=Math.floor(b/p),T=_*h,D=v*w,y=D-u.marginTop,E=T+h,O=D+w+u.marginBottom;if(n.top<O&&n.top>y){if(n.left<E)return b;b!==i-1?l=b:l=null}}return l!==null?l:i},Xn={height:0,width:0,get getHeight(){return this.height},set setHeight(e){(this.height===0||e===0)&&(this.height=e)},get getWidth(){return this.width},set setWidth(e){(this.width===0||e===0)&&(this.width=e)},setDimensions:function(e,t){(this.height===0||e===0)&&(this.height=e),(this.width===0||t===0)&&(this.width=t)}},Xu=({root:e})=>{Oe(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},Ku=({root:e,action:t})=>{const{id:n,index:r,interactionMethod:i}=t;e.ref.addIndex=r;const l=Date.now();let c=l,u=1;if(i!==Ze.NONE){u=0;const f=e.query("GET_ITEM_INSERT_INTERVAL"),h=l-e.ref.lastItemSpanwDate;c=h<f?l+(f-h):l}e.ref.lastItemSpanwDate=c,e.appendChildView(e.createChildView(zu,{spawnDate:c,id:n,opacity:u,interactionMethod:i}),r)},Ta=(e,t,n,r=0,i=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=n,Date.now()>e.spawnDate&&(e.opacity===0&&Qu(e,t,n,r,i),e.scaleX=1,e.scaleY=1,e.opacity=1))},Qu=(e,t,n,r,i)=>{e.interactionMethod===Ze.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=n):e.interactionMethod===Ze.DROP?(e.translateX=null,e.translateX=t-r*20,e.translateY=null,e.translateY=n-i*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===Ze.BROWSE?(e.translateY=null,e.translateY=n-30):e.interactionMethod===Ze.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},Zu=({root:e,action:t})=>{const{id:n}=t,r=e.childViews.find(i=>i.id===n);!r||(r.scaleX=.9,r.scaleY=.9,r.opacity=0,r.markedForRemoval=!0)},Qr=e=>e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5,Ju=e=>e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5,ef=({root:e,action:t})=>{const{id:n,dragState:r}=t,i=e.query("GET_ITEM",{id:n}),l=e.childViews.find(T=>T.id===n),c=e.childViews.length,u=r.getItemIndex(i);if(!l)return;const f={x:l.dragOrigin.x+l.dragOffset.x+l.dragCenter.x,y:l.dragOrigin.y+l.dragOffset.y+l.dragCenter.y},h=Qr(l),p=Ju(l);let m=Math.floor(e.rect.outer.width/p);m>c&&(m=c);const w=Math.floor(c/m+1);Xn.setHeight=h*w,Xn.setWidth=p*m;var b={y:Math.floor(f.y/h),x:Math.floor(f.x/p),getGridIndex:function(){return f.y>Xn.getHeight||f.y<0||f.x>Xn.getWidth||f.x<0?u:this.y*m+this.x},getColIndex:function(){const D=e.query("GET_ACTIVE_ITEMS"),y=e.childViews.filter(j=>j.rect.element.height),E=D.map(j=>y.find(H=>H.id===j.id)),O=E.findIndex(j=>j===l),S=Qr(l),G=E.length;let $=G,L=0,N=0,z=0;for(let j=0;j<G;j++)if(L=Qr(E[j]),z=N,N=z+L,f.y<N){if(O>j){if(f.y<z+S){$=j;break}continue}$=j;break}return $}};const _=m>1?b.getGridIndex():b.getColIndex();e.dispatch("MOVE_ITEM",{query:l,index:_});const v=r.getIndex();if(v===void 0||v!==_){if(r.setIndex(_),v===void 0)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:u,target:_})}},tf=Ne({DID_ADD_ITEM:Ku,DID_REMOVE_ITEM:Zu,DID_DRAG_ITEM:ef}),nf=({root:e,props:t,actions:n,shouldOptimize:r})=>{tf({root:e,props:t,actions:n});const{dragCoordinates:i}=t,l=e.rect.element.width,c=e.childViews.filter(E=>E.rect.element.height),u=e.query("GET_ACTIVE_ITEMS").map(E=>c.find(O=>O.id===E.id)).filter(E=>E),f=i?Ai(e,u,i):null,h=e.ref.addIndex||null;e.ref.addIndex=null;let p=0,m=0,w=0;if(u.length===0)return;const b=u[0].rect.element,_=b.marginTop+b.marginBottom,v=b.marginLeft+b.marginRight,T=b.width+v,D=b.height+_,y=Si(l,T);if(y===1){let E=0,O=0;u.forEach((S,G)=>{if(f){let N=G-f;N===-2?O=-_*.25:N===-1?O=-_*.75:N===0?O=_*.75:N===1?O=_*.25:O=0}r&&(S.translateX=null,S.translateY=null),S.markedForRemoval||Ta(S,0,E+O);let L=(S.rect.element.height+_)*(S.markedForRemoval?S.opacity:1);E+=L})}else{let E=0,O=0;u.forEach((S,G)=>{G===f&&(p=1),G===h&&(w+=1),S.markedForRemoval&&S.opacity<.5&&(m-=1);const $=G+w+p+m,L=$%y,N=Math.floor($/y),z=L*T,j=N*D,H=Math.sign(z-E),ee=Math.sign(j-O);E=z,O=j,!S.markedForRemoval&&(r&&(S.translateX=null,S.translateY=null),Ta(S,z,j,H,ee))})}},rf=(e,t)=>t.filter(n=>n.data&&n.data.id?e.id===n.data.id:!0),sf=De({create:Xu,write:nf,tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(t=>t.markedForRemoval&&t.opacity===0&&t.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:rf,mixins:{apis:["dragCoordinates"]}}),af=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(sf)),t.dragCoordinates=null,t.overflowing=!1},of=({root:e,props:t,action:n})=>{!e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")||(t.dragCoordinates={left:n.position.scopeLeft-e.ref.list.rect.element.left,top:n.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},lf=({props:e})=>{e.dragCoordinates=null},cf=Ne({DID_DRAG:of,DID_END_DRAG:lf}),df=({root:e,props:t,actions:n})=>{if(cf({root:e,props:t,actions:n}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const r=Math.round(t.overflow);r!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=r)}},uf=De({create:af,write:df,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),at=(e,t,n,r="")=>{n?Oe(e,t,r):e.removeAttribute(t)},ff=e=>{if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){const t=_t("form"),n=e.parentNode,r=e.nextSibling;t.appendChild(e),t.reset(),r?n.insertBefore(e,r):n.appendChild(e)}}},pf=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,Oe(e.element,"name",e.query("GET_NAME")),Oe(e.element,"aria-controls",`filepond--assistant-${t.id}`),Oe(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),Co({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),xo({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),ko({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),pi({root:e}),No({root:e,action:{value:e.query("GET_REQUIRED")}}),Go({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=n=>{if(!e.element.value)return;const r=Array.from(e.element.files).map(i=>(i._relativePath=i.webkitRelativePath,i));setTimeout(()=>{t.onload(r),ff(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},Co=({root:e,action:t})=>{!e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")||at(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},xo=({root:e,action:t})=>{at(e.element,"multiple",t.value)},ko=({root:e,action:t})=>{at(e.element,"webkitdirectory",t.value)},pi=({root:e})=>{const t=e.query("GET_DISABLED"),n=e.query("GET_ALLOW_BROWSE"),r=t||!n;at(e.element,"disabled",r)},No=({root:e,action:t})=>{t.value?e.query("GET_TOTAL_ITEMS")===0&&at(e.element,"required",!0):at(e.element,"required",!1)},Go=({root:e,action:t})=>{at(e.element,"capture",!!t.value,t.value===!0?"":t.value)},Oa=({root:e})=>{const{element:t}=e;e.query("GET_TOTAL_ITEMS")>0?(at(t,"required",!1),at(t,"name",!1)):(at(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&at(t,"required",!0))},hf=({root:e})=>{!e.query("GET_CHECK_VALIDITY")||e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},gf=De({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:pf,destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:Ne({DID_LOAD_ITEM:Oa,DID_REMOVE_ITEM:Oa,DID_THROW_ITEM_INVALID:hf,DID_SET_DISABLED:pi,DID_SET_ALLOW_BROWSE:pi,DID_SET_ALLOW_DIRECTORIES_ONLY:ko,DID_SET_ALLOW_MULTIPLE:xo,DID_SET_ACCEPTED_FILE_TYPES:Co,DID_SET_CAPTURE_METHOD:Go,DID_SET_REQUIRED:No})}),Da={ENTER:13,SPACE:32},mf=({root:e,props:t})=>{const n=_t("label");Oe(n,"for",`filepond--browser-${t.id}`),Oe(n,"id",`filepond--drop-label-${t.id}`),Oe(n,"aria-hidden","true"),e.ref.handleKeyDown=r=>{(r.keyCode===Da.ENTER||r.keyCode===Da.SPACE)&&(r.preventDefault(),e.ref.label.click())},e.ref.handleClick=r=>{r.target===n||n.contains(r.target)||e.ref.label.click()},n.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),Fo(n,t.caption),e.appendChild(n),e.ref.label=n},Fo=(e,t)=>{e.innerHTML=t;const n=e.querySelector(".filepond--label-action");return n&&Oe(n,"tabindex","0"),t},Ef=De({name:"drop-label",ignoreRect:!0,create:mf,destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:Ne({DID_SET_LABEL_IDLE:({root:e,action:t})=>{Fo(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),_f=De({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),yf=({root:e})=>{const t=e.rect.element.width*.5,n=e.rect.element.height*.5;e.ref.blob=e.appendChildView(e.createChildView(_f,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:n}))},bf=({root:e,action:t})=>{if(!e.ref.blob){yf({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},vf=({root:e})=>{!e.ref.blob||(e.ref.blob.opacity=0)},wf=({root:e})=>{!e.ref.blob||(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},If=({root:e,props:t,actions:n})=>{Tf({root:e,props:t,actions:n});const{blob:r}=e.ref;n.length===0&&r&&r.opacity===0&&(e.removeChildView(r),e.ref.blob=null)},Tf=Ne({DID_DRAG:bf,DID_DROP:wf,DID_END_DRAG:vf}),Of=De({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:If}),Bo=(e,t)=>{try{const n=new DataTransfer;t.forEach(r=>{r instanceof File?n.items.add(r):n.items.add(new File([r],r.name,{type:r.type}))}),e.files=n.files}catch{return!1}return!0},Df=({root:e})=>e.ref.fields={},br=(e,t)=>e.ref.fields[t],Pi=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{!e.ref.fields[t.id]||e.element.appendChild(e.ref.fields[t.id])})},Ra=({root:e})=>Pi(e),Rf=({root:e,action:t})=>{const i=!(e.query("GET_ITEM",t.id).origin===Se.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),l=_t("input");l.type=i?"file":"hidden",l.name=e.query("GET_NAME"),l.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=l,Pi(e)},Sf=({root:e,action:t})=>{const n=br(e,t.id);if(!n||(t.serverFileReference!==null&&(n.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT")))return;const r=e.query("GET_ITEM",t.id);Bo(n,[r.file])},Af=({root:e,action:t})=>{!e.query("SHOULD_UPDATE_FILE_INPUT")||setTimeout(()=>{const n=br(e,t.id);!n||Bo(n,[t.file])},0)},Pf=({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},Lf=({root:e,action:t})=>{const n=br(e,t.id);!n||(n.parentNode&&n.parentNode.removeChild(n),delete e.ref.fields[t.id])},Mf=({root:e,action:t})=>{const n=br(e,t.id);!n||(t.value===null?n.removeAttribute("value"):n.value=t.value,Pi(e))},Cf=Ne({DID_SET_DISABLED:Pf,DID_ADD_ITEM:Rf,DID_LOAD_ITEM:Sf,DID_REMOVE_ITEM:Lf,DID_DEFINE_VALUE:Mf,DID_PREPARE_OUTPUT:Af,DID_REORDER_ITEMS:Ra,DID_SORT_ITEMS:Ra}),xf=De({tag:"fieldset",name:"data",create:Df,write:Cf,ignoreRect:!0}),kf=e=>"getRootNode"in e?e.getRootNode():document,Nf=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],Gf=["css","csv","html","txt"],Ff={zip:"zip|compressed",epub:"application/epub+zip"},Vo=(e="")=>(e=e.toLowerCase(),Nf.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):Gf.includes(e)?"text/"+e:Ff[e]||""),Li=e=>new Promise((t,n)=>{const r=qf(e);if(r.length&&!Bf(e))return t(r);Vf(e).then(t)}),Bf=e=>e.files?e.files.length>0:!1,Vf=e=>new Promise((t,n)=>{const r=(e.items?Array.from(e.items):[]).filter(i=>Uf(i)).map(i=>jf(i));if(!r.length){t(e.files?Array.from(e.files):[]);return}Promise.all(r).then(i=>{const l=[];i.forEach(c=>{l.push.apply(l,c)}),t(l.filter(c=>c).map(c=>(c._relativePath||(c._relativePath=c.webkitRelativePath),c)))}).catch(console.error)}),Uf=e=>{if(Uo(e)){const t=Mi(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},jf=e=>new Promise((t,n)=>{if($f(e)){Hf(Mi(e)).then(t).catch(n);return}t([e.getAsFile()])}),Hf=e=>new Promise((t,n)=>{const r=[];let i=0,l=0;const c=()=>{l===0&&i===0&&t(r)},u=f=>{i++;const h=f.createReader(),p=()=>{h.readEntries(m=>{if(m.length===0){i--,c();return}m.forEach(w=>{w.isDirectory?u(w):(l++,w.file(b=>{const _=Wf(b);w.fullPath&&(_._relativePath=w.fullPath),r.push(_),l--,c()}))}),p()},n)};p()};u(e)}),Wf=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,n=e.name,r=Vo(yr(e.name));return r.length&&(e=e.slice(0,e.size,r),e.name=n,e.lastModifiedDate=t),e},$f=e=>Uo(e)&&(Mi(e)||{}).isDirectory,Uo=e=>"webkitGetAsEntry"in e,Mi=e=>e.webkitGetAsEntry(),qf=e=>{let t=[];try{if(t=zf(e),t.length)return t;t=Yf(e)}catch{}return t},Yf=e=>{let t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},zf=e=>{let t=e.getData("text/html");if(typeof t=="string"&&t.length){const n=t.match(/src\s*=\s*"(.+?)"/);if(n)return[n[1]]}return[]},fr=[],Nt=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),Xf=(e,t,n)=>{const r=Kf(t),i={element:e,filterElement:n,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return i.destroy=r.addListener(i),i},Kf=e=>{const t=fr.find(r=>r.element===e);if(t)return t;const n=Qf(e);return fr.push(n),n},Qf=e=>{const t=[],n={dragenter:Jf,dragover:ep,dragleave:np,drop:tp},r={};be(n,(l,c)=>{r[l]=c(e,t),e.addEventListener(l,r[l],!1)});const i={element:e,addListener:l=>(t.push(l),()=>{t.splice(t.indexOf(l),1),t.length===0&&(fr.splice(fr.indexOf(i),1),be(n,c=>{e.removeEventListener(c,r[c],!1)}))})};return i},Zf=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),Ci=(e,t)=>{const n=kf(t),r=Zf(n,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return r===t||t.contains(r)};let jo=null;const Kn=(e,t)=>{try{e.dropEffect=t}catch{}},Jf=(e,t)=>n=>{n.preventDefault(),jo=n.target,t.forEach(r=>{const{element:i,onenter:l}=r;Ci(n,i)&&(r.state="enter",l(Nt(n)))})},ep=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;Li(r).then(i=>{let l=!1;t.some(c=>{const{filterElement:u,element:f,onenter:h,onexit:p,ondrag:m,allowdrop:w}=c;Kn(r,"copy");const b=w(i);if(!b){Kn(r,"none");return}if(Ci(n,f)){if(l=!0,c.state===null){c.state="enter",h(Nt(n));return}if(c.state="over",u&&!b){Kn(r,"none");return}m(Nt(n))}else u&&!l&&Kn(r,"none"),c.state&&(c.state=null,p(Nt(n)))})})},tp=(e,t)=>n=>{n.preventDefault();const r=n.dataTransfer;Li(r).then(i=>{t.forEach(l=>{const{filterElement:c,element:u,ondrop:f,onexit:h,allowdrop:p}=l;if(l.state=null,!(c&&!Ci(n,u))){if(!p(i))return h(Nt(n));f(Nt(n),i)}})})},np=(e,t)=>n=>{jo===n.target&&t.forEach(r=>{const{onexit:i}=r;r.state=null,i(Nt(n))})},rp=(e,t,n)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:r,requiresDropOnElement:i,filterItems:l=p=>p}=n,c=Xf(e,r?document.documentElement:e,i);let u="",f="";c.allowdrop=p=>t(l(p)),c.ondrop=(p,m)=>{const w=l(m);if(!t(w)){h.ondragend(p);return}f="drag-drop",h.onload(w,p)},c.ondrag=p=>{h.ondrag(p)},c.onenter=p=>{f="drag-over",h.ondragstart(p)},c.onexit=p=>{f="drag-exit",h.ondragend(p)};const h={updateHopperState:()=>{u!==f&&(e.dataset.hopperState=f,u=f)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{c.destroy()}};return h};let hi=!1;const on=[],Ho=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let n=!1,r=t;for(;r!==document.body;){if(r.classList.contains("filepond--root")){n=!0;break}r=r.parentNode}if(!n)return}Li(e.clipboardData).then(n=>{!n.length||on.forEach(r=>r(n))})},ip=e=>{on.includes(e)||(on.push(e),!hi&&(hi=!0,document.addEventListener("paste",Ho)))},sp=e=>{Ti(on,on.indexOf(e)),on.length===0&&(document.removeEventListener("paste",Ho),hi=!1)},ap=()=>{const e=n=>{t.onload(n)},t={destroy:()=>{sp(e)},onload:()=>{}};return ip(e),t},op=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,Oe(e.element,"role","status"),Oe(e.element,"aria-live","polite"),Oe(e.element,"aria-relevant","additions")};let Sa=null,Aa=null;const Zr=[],vr=(e,t)=>{e.element.textContent=t},lp=e=>{e.element.textContent=""},Wo=(e,t,n)=>{const r=e.query("GET_TOTAL_ITEMS");vr(e,`${n} ${t}, ${r} ${r===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(Aa),Aa=setTimeout(()=>{lp(e)},1500)},$o=e=>e.element.parentNode.contains(document.activeElement),cp=({root:e,action:t})=>{if(!$o(e))return;e.element.textContent="";const n=e.query("GET_ITEM",t.id);Zr.push(n.filename),clearTimeout(Sa),Sa=setTimeout(()=>{Wo(e,Zr.join(", "),e.query("GET_LABEL_FILE_ADDED")),Zr.length=0},750)},dp=({root:e,action:t})=>{if(!$o(e))return;const n=t.item;Wo(e,n.filename,e.query("GET_LABEL_FILE_REMOVED"))},up=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");vr(e,`${r} ${i}`)},Pa=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename,i=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");vr(e,`${r} ${i}`)},Qn=({root:e,action:t})=>{const r=e.query("GET_ITEM",t.id).filename;vr(e,`${t.status.main} ${r} ${t.status.sub}`)},fp=De({create:op,ignoreRect:!0,ignoreRectUpdate:!0,write:Ne({DID_LOAD_ITEM:cp,DID_REMOVE_ITEM:dp,DID_COMPLETE_ITEM_PROCESSING:up,DID_ABORT_ITEM_PROCESSING:Pa,DID_REVERT_ITEM_PROCESSING:Pa,DID_THROW_ITEM_REMOVE_ERROR:Qn,DID_THROW_ITEM_LOAD_ERROR:Qn,DID_THROW_ITEM_INVALID:Qn,DID_THROW_ITEM_PROCESSING_ERROR:Qn}),tag:"span",name:"assistant"}),qo=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),n=>n.charAt(1).toUpperCase()),Yo=(e,t=16,n=!0)=>{let r=Date.now(),i=null;return(...l)=>{clearTimeout(i);const c=Date.now()-r,u=()=>{r=Date.now(),e(...l)};c<t?n||(i=setTimeout(u,t-c)):u()}},pp=1e6,pr=e=>e.preventDefault(),hp=({root:e,props:t})=>{const n=e.query("GET_ID");n&&(e.element.id=n);const r=e.query("GET_CLASS_NAME");r&&r.split(" ").filter(f=>f.length).forEach(f=>{e.element.classList.add(f)}),e.ref.label=e.appendChildView(e.createChildView(Ef,{...t,translateY:null,caption:e.query("GET_LABEL_IDLE")})),e.ref.list=e.appendChildView(e.createChildView(uf,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(Mo,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(fp,{...t})),e.ref.data=e.appendChildView(e.createChildView(xf,{...t})),e.ref.measure=_t("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(f=>!Et(f.value)).map(({name:f,value:h})=>{e.element.dataset[f]=h}),e.ref.widthPrevious=null,e.ref.widthUpdated=Yo(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const i=window.matchMedia("(pointer: fine) and (hover: hover)").matches,l="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&l&&!i&&(e.element.addEventListener("touchmove",pr,{passive:!1}),e.element.addEventListener("gesturestart",pr));const c=e.query("GET_CREDITS");if(c.length===2){const f=document.createElement("a");f.className="filepond--credits",f.setAttribute("aria-hidden","true"),f.href=c[0],f.tabindex=-1,f.target="_blank",f.rel="noopener noreferrer",f.textContent=c[1],e.element.appendChild(f),e.ref.credits=f}},gp=({root:e,props:t,actions:n})=>{if(bp({root:e,props:t,actions:n}),n.filter(G=>/^DID_SET_STYLE_/.test(G.type)).filter(G=>!Et(G.data.value)).map(({type:G,data:$})=>{const L=qo(G.substring(8).toLowerCase(),"_");e.element.dataset[L]=$.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let r=e.ref.bounds;r||(r=e.ref.bounds=_p(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:i,label:l,list:c,panel:u}=e.ref;i&&i.updateHopperState();const f=e.query("GET_PANEL_ASPECT_RATIO"),h=e.query("GET_ALLOW_MULTIPLE"),p=e.query("GET_TOTAL_ITEMS"),m=h?e.query("GET_MAX_FILES")||pp:1,w=p===m,b=n.find(G=>G.type==="DID_ADD_ITEM");if(w&&b){const G=b.data.interactionMethod;l.opacity=0,h?l.translateY=-40:G===Ze.API?l.translateX=40:G===Ze.BROWSE?l.translateY=40:l.translateY=30}else w||(l.opacity=1,l.translateX=0,l.translateY=0);const _=mp(e),v=Ep(e),T=l.rect.element.height,D=!h||w?0:T,y=w?c.rect.element.marginTop:0,E=p===0?0:c.rect.element.marginBottom,O=D+y+v.visual+E,S=D+y+v.bounds+E;if(c.translateY=Math.max(0,D-c.rect.element.marginTop)-_.top,f){const G=e.rect.element.width,$=G*f;f!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=f,e.ref.updateHistory=[]);const L=e.ref.updateHistory;L.push(G);const N=2;if(L.length>N*2){const j=L.length,H=j-10;let ee=0;for(let k=j;k>=H;k--)if(L[k]===L[k-2]&&ee++,ee>=N)return}u.scalable=!1,u.height=$;const z=$-D-(E-_.bottom)-(w?y:0);v.visual>z?c.overflow=z:c.overflow=null,e.height=$}else if(r.fixedHeight){u.scalable=!1;const G=r.fixedHeight-D-(E-_.bottom)-(w?y:0);v.visual>G?c.overflow=G:c.overflow=null}else if(r.cappedHeight){const G=O>=r.cappedHeight,$=Math.min(r.cappedHeight,O);u.scalable=!0,u.height=G?$:$-_.top-_.bottom;const L=$-D-(E-_.bottom)-(w?y:0);O>r.cappedHeight&&v.visual>L?c.overflow=L:c.overflow=null,e.height=Math.min(r.cappedHeight,S-_.top-_.bottom)}else{const G=p>0?_.top+_.bottom:0;u.scalable=!0,u.height=Math.max(T,O-G),e.height=Math.max(T,S-G)}e.ref.credits&&u.heightCurrent&&(e.ref.credits.style.transform=`translateY(${u.heightCurrent}px)`)},mp=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},Ep=e=>{let t=0,n=0;const r=e.ref.list,i=r.childViews[0],l=i.childViews.filter(y=>y.rect.element.height),c=e.query("GET_ACTIVE_ITEMS").map(y=>l.find(E=>E.id===y.id)).filter(y=>y);if(c.length===0)return{visual:t,bounds:n};const u=i.rect.element.width,f=Ai(i,c,r.dragCoordinates),h=c[0].rect.element,p=h.marginTop+h.marginBottom,m=h.marginLeft+h.marginRight,w=h.width+m,b=h.height+p,_=typeof f<"u"&&f>=0?1:0,v=c.find(y=>y.markedForRemoval&&y.opacity<.45)?-1:0,T=c.length+_+v,D=Si(u,w);return D===1?c.forEach(y=>{const E=y.rect.element.height+p;n+=E,t+=E*y.opacity}):(n=Math.ceil(T/D)*b,t=n),{visual:t,bounds:n}},_p=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:t===0?null:t}},xi=(e,t)=>{const n=e.query("GET_ALLOW_REPLACE"),r=e.query("GET_ALLOW_MULTIPLE"),i=e.query("GET_TOTAL_ITEMS");let l=e.query("GET_MAX_FILES");const c=t.length;return!r&&c>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:Ie("warning",0,"Max files")}),!0):(l=r?l:1,!r&&n?!1:un(l)&&i+c>l?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:Ie("warning",0,"Max files")}),!0):!1)},yp=(e,t,n)=>{const r=e.childViews[0];return Ai(r,t,{left:n.scopeLeft-r.rect.element.left,top:n.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},La=e=>{const t=e.query("GET_ALLOW_DROP"),n=e.query("GET_DISABLED"),r=t&&!n;if(r&&!e.ref.hopper){const i=rp(e.element,l=>{const c=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return e.query("GET_DROP_VALIDATION")?l.every(f=>Bt("ALLOW_HOPPER_ITEM",f,{query:e.query}).every(h=>h===!0)&&c(f)):!0},{filterItems:l=>{const c=e.query("GET_IGNORED_FILES");return l.filter(u=>dn(u)?!c.includes(u.name.toLowerCase()):!0)},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});i.onload=(l,c)=>{const f=e.ref.list.childViews[0].childViews.filter(p=>p.rect.element.height),h=e.query("GET_ACTIVE_ITEMS").map(p=>f.find(m=>m.id===p.id)).filter(p=>p);it("ADD_ITEMS",l,{dispatch:e.dispatch}).then(p=>{if(xi(e,p))return!1;e.dispatch("ADD_ITEMS",{items:p,index:yp(e.ref.list,h,c),interactionMethod:Ze.DROP})}),e.dispatch("DID_DROP",{position:c}),e.dispatch("DID_END_DRAG",{position:c})},i.ondragstart=l=>{e.dispatch("DID_START_DRAG",{position:l})},i.ondrag=Yo(l=>{e.dispatch("DID_DRAG",{position:l})}),i.ondragend=l=>{e.dispatch("DID_END_DRAG",{position:l})},e.ref.hopper=i,e.ref.drip=e.appendChildView(e.createChildView(Of))}else!r&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},Ma=(e,t)=>{const n=e.query("GET_ALLOW_BROWSE"),r=e.query("GET_DISABLED"),i=n&&!r;i&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(gf,{...t,onload:l=>{it("ADD_ITEMS",l,{dispatch:e.dispatch}).then(c=>{if(xi(e,c))return!1;e.dispatch("ADD_ITEMS",{items:c,index:-1,interactionMethod:Ze.BROWSE})})}}),0):!i&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},Ca=e=>{const t=e.query("GET_ALLOW_PASTE"),n=e.query("GET_DISABLED"),r=t&&!n;r&&!e.ref.paster?(e.ref.paster=ap(),e.ref.paster.onload=i=>{it("ADD_ITEMS",i,{dispatch:e.dispatch}).then(l=>{if(xi(e,l))return!1;e.dispatch("ADD_ITEMS",{items:l,index:-1,interactionMethod:Ze.PASTE})})}):!r&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},bp=Ne({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{Ma(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{La(e)},DID_SET_ALLOW_PASTE:({root:e})=>{Ca(e)},DID_SET_DISABLED:({root:e,props:t})=>{La(e),Ca(e),Ma(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),vp=De({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:hp,write:gp,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",pr),e.element.removeEventListener("gesturestart",pr)},mixins:{styles:["height"]}}),wp=(e={})=>{let t=null;const n=ur(),r=Gc(wd(n),[Ud,Od(n)],[fu,Td(n)]);r.dispatch("SET_OPTIONS",{options:e});const i=()=>{document.hidden||r.dispatch("KICK")};document.addEventListener("visibilitychange",i);let l=null,c=!1,u=!1,f=null,h=null;const p=()=>{c||(c=!0),clearTimeout(l),l=setTimeout(()=>{c=!1,f=null,h=null,u&&(u=!1,r.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",p);const m=vp(r,{id:Ii()});let w=!1,b=!1;const _={_read:()=>{c&&(h=window.innerWidth,f||(f=h),!u&&h!==f&&(r.dispatch("DID_START_RESIZE"),u=!0)),b&&w&&(w=m.element.offsetParent===null),!w&&(m._read(),b=m.rect.element.hidden)},_write:A=>{const x=r.processActionQueue().filter(W=>!/^SET_/.test(W.type));w&&!x.length||(y(x),w=m._write(A,x,u),Sd(r.query("GET_ITEMS")),w&&r.processDispatchQueue())}},v=A=>x=>{const W={type:A};if(!x)return W;if(x.hasOwnProperty("error")&&(W.error=x.error?{...x.error}:null),x.status&&(W.status={...x.status}),x.file&&(W.output=x.file),x.source)W.file=x.source;else if(x.item||x.id){const C=x.item?x.item:r.query("GET_ITEM",x.id);W.file=C?Ue(C):null}return x.items&&(W.items=x.items.map(Ue)),/progress/.test(A)&&(W.progress=x.progress),x.hasOwnProperty("origin")&&x.hasOwnProperty("target")&&(W.origin=x.origin,W.target=x.target),W},T={DID_DESTROY:v("destroy"),DID_INIT:v("init"),DID_THROW_MAX_FILES:v("warning"),DID_INIT_ITEM:v("initfile"),DID_START_ITEM_LOAD:v("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:v("addfileprogress"),DID_LOAD_ITEM:v("addfile"),DID_THROW_ITEM_INVALID:[v("error"),v("addfile")],DID_THROW_ITEM_LOAD_ERROR:[v("error"),v("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[v("error"),v("removefile")],DID_PREPARE_OUTPUT:v("preparefile"),DID_START_ITEM_PROCESSING:v("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:v("processfileprogress"),DID_ABORT_ITEM_PROCESSING:v("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:v("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:v("processfiles"),DID_REVERT_ITEM_PROCESSING:v("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[v("error"),v("processfile")],DID_REMOVE_ITEM:v("removefile"),DID_UPDATE_ITEMS:v("updatefiles"),DID_ACTIVATE_ITEM:v("activatefile"),DID_REORDER_ITEMS:v("reorderfiles")},D=A=>{const x={pond:Z,...A};delete x.type,m.element.dispatchEvent(new CustomEvent(`FilePond:${A.type}`,{detail:x,bubbles:!0,cancelable:!0,composed:!0}));const W=[];A.hasOwnProperty("error")&&W.push(A.error),A.hasOwnProperty("file")&&W.push(A.file);const C=["type","error","file"];Object.keys(A).filter(J=>!C.includes(J)).forEach(J=>W.push(A[J])),Z.fire(A.type,...W);const F=r.query(`GET_ON${A.type.toUpperCase()}`);F&&F(...W)},y=A=>{!A.length||A.filter(x=>T[x.type]).forEach(x=>{const W=T[x.type];(Array.isArray(W)?W:[W]).forEach(C=>{x.type==="DID_INIT_ITEM"?D(C(x.data)):setTimeout(()=>{D(C(x.data))},0)})})},E=A=>r.dispatch("SET_OPTIONS",{options:A}),O=A=>r.query("GET_ACTIVE_ITEM",A),S=A=>new Promise((x,W)=>{r.dispatch("REQUEST_ITEM_PREPARE",{query:A,success:C=>{x(C)},failure:C=>{W(C)}})}),G=(A,x={})=>new Promise((W,C)=>{N([{source:A,options:x}],{index:x.index}).then(F=>W(F&&F[0])).catch(C)}),$=A=>A.file&&A.id,L=(A,x)=>(typeof A=="object"&&!$(A)&&!x&&(x=A,A=void 0),r.dispatch("REMOVE_ITEM",{...x,query:A}),r.query("GET_ACTIVE_ITEM",A)===null),N=(...A)=>new Promise((x,W)=>{const C=[],F={};if(gr(A[0]))C.push.apply(C,A[0]),Object.assign(F,A[1]||{});else{const J=A[A.length-1];typeof J=="object"&&!(J instanceof Blob)&&Object.assign(F,A.pop()),C.push(...A)}r.dispatch("ADD_ITEMS",{items:C,index:F.index,interactionMethod:Ze.API,success:x,failure:W})}),z=()=>r.query("GET_ACTIVE_ITEMS"),j=A=>new Promise((x,W)=>{r.dispatch("REQUEST_ITEM_PROCESSING",{query:A,success:C=>{x(C)},failure:C=>{W(C)}})}),H=(...A)=>{const x=Array.isArray(A[0])?A[0]:A,W=x.length?x:z();return Promise.all(W.map(S))},ee=(...A)=>{const x=Array.isArray(A[0])?A[0]:A;if(!x.length){const W=z().filter(C=>!(C.status===K.IDLE&&C.origin===Se.LOCAL)&&C.status!==K.PROCESSING&&C.status!==K.PROCESSING_COMPLETE&&C.status!==K.PROCESSING_REVERT_ERROR);return Promise.all(W.map(j))}return Promise.all(x.map(j))},k=(...A)=>{const x=Array.isArray(A[0])?A[0]:A;let W;typeof x[x.length-1]=="object"?W=x.pop():Array.isArray(A[0])&&(W=A[1]);const C=z();return x.length?x.map(J=>Lt(J)?C[J]?C[J].id:null:J).filter(J=>J).map(J=>L(J,W)):Promise.all(C.map(J=>L(J,W)))},Z={..._r(),..._,...Id(r,n),setOptions:E,addFile:G,addFiles:N,getFile:O,processFile:j,prepareFile:S,removeFile:L,moveFile:(A,x)=>r.dispatch("MOVE_ITEM",{query:A,index:x}),getFiles:z,processFiles:ee,removeFiles:k,prepareFiles:H,sort:A=>r.dispatch("SORT",{compare:A}),browse:()=>{var A=m.element.querySelector("input[type=file]");A&&A.click()},destroy:()=>{Z.fire("destroy",m.element),r.dispatch("ABORT_ALL"),m._destroy(),window.removeEventListener("resize",p),document.removeEventListener("visibilitychange",i),r.dispatch("DID_DESTROY")},insertBefore:A=>na(m.element,A),insertAfter:A=>ra(m.element,A),appendTo:A=>A.appendChild(m.element),replaceElement:A=>{na(m.element,A),A.parentNode.removeChild(A),t=A},restoreElement:()=>{!t||(ra(t,m.element),m.element.parentNode.removeChild(m.element),t=null)},isAttachedTo:A=>m.element===A||t===A,element:{get:()=>m.element},status:{get:()=>r.query("GET_STATUS")}};return r.dispatch("DID_INIT"),Tt(Z)},zo=(e={})=>{const t={};return be(ur(),(r,i)=>{t[r]=i[0]}),wp({...t,...e})},Ip=e=>e.charAt(0).toLowerCase()+e.slice(1),Tp=e=>qo(e.replace(/^data-/,"")),Xo=(e,t)=>{be(t,(n,r)=>{be(e,(i,l)=>{const c=new RegExp(n);if(!c.test(i)||(delete e[i],r===!1))return;if(ke(r)){e[r]=l;return}const f=r.group;Ae(r)&&!e[f]&&(e[f]={}),e[f][Ip(i.replace(c,""))]=l}),r.mapping&&Xo(e[r.group],r.mapping)})},Op=(e,t={})=>{const n=[];be(e.attributes,i=>{n.push(e.attributes[i])});const r=n.filter(i=>i.name).reduce((i,l)=>{const c=Oe(e,l.name);return i[Tp(l.name)]=c===l.name?!0:c,i},{});return Xo(r,t),r},Dp=(e,t={})=>{const n={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};Bt("SET_ATTRIBUTE_TO_OPTION_MAP",n);const r={...t},i=Op(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,n);Object.keys(i).forEach(c=>{Ae(i[c])?(Ae(r[c])||(r[c]={}),Object.assign(r[c],i[c])):r[c]=i[c]}),r.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(c=>({source:c.value,options:{type:c.dataset.type}})));const l=zo(r);return e.files&&Array.from(e.files).forEach(c=>{l.addFile(c)}),l.replaceElement(e),l},Rp=(...e)=>Nc(e[0])?Dp(...e):zo(...e),Sp=["fire","_read","_write"],xa=e=>{const t={};return Eo(e,t,Sp),t},Ap=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(n,r)=>t[r]),Pp=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),n=URL.createObjectURL(t),r=new Worker(n);return{transfer:(i,l)=>{},post:(i,l,c)=>{const u=Ii();r.onmessage=f=>{f.data.id===u&&l(f.data.message)},r.postMessage({id:u,message:i},c)},terminate:()=>{r.terminate(),URL.revokeObjectURL(n)}}},Lp=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),Ko=(e,t)=>{const n=e.slice(0,e.size,e.type);return n.lastModifiedDate=e.lastModifiedDate,n.name=t,n},Mp=e=>Ko(e,e.name),ka=[],Cp=e=>{if(ka.includes(e))return;ka.push(e);const t=e({addFilter:Pd,utils:{Type:P,forin:be,isString:ke,isFile:dn,toNaturalFileSize:Ao,replaceInString:Ap,getExtensionFromFilename:yr,getFilenameWithoutExtension:Do,guesstimateMimeType:Vo,getFileFromBlob:cn,getFilenameFromURL:Cn,createRoute:Ne,createWorker:Pp,createView:De,createItemAPI:Ue,loadImage:Lp,copyFile:Mp,renameFile:Ko,createBlob:Io,applyFilterChain:it,text:Te,getNumericAspectRatioFromString:bo},views:{fileActionButton:So}});Ld(t.options)},xp=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",kp=()=>"Promise"in window,Np=()=>"slice"in Blob.prototype,Gp=()=>"URL"in window&&"createObjectURL"in window.URL,Fp=()=>"visibilityState"in document,Bp=()=>"performance"in window,Vp=()=>"supports"in(window.CSS||{}),Up=()=>/MSIE|Trident/.test(window.navigator.userAgent),gi=(()=>{const e=uo()&&!xp()&&Fp()&&kp()&&Np()&&Gp()&&Bp()&&(Vp()||Up());return()=>e})(),wt={apps:[]},jp="filepond",Vt=()=>{};let hr={},nr=Vt,Jr=Vt,Na=Vt,Ga=Vt,mi=Vt,Fa=Vt,Ba=Vt;if(gi()){ld(()=>{wt.apps.forEach(n=>n._read())},n=>{wt.apps.forEach(r=>r._write(n))});const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:gi,create:nr,destroy:Jr,parse:Na,find:Ga,registerPlugin:mi,setOptions:Ba}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);const t=()=>be(ur(),(n,r)=>{hr[n]=r[1]});hr={},t(),nr=(...n)=>{const r=Rp(...n);return r.on("destroy",Jr),wt.apps.push(r),xa(r)},Jr=n=>{const r=wt.apps.findIndex(i=>i.isAttachedTo(n));return r>=0?(wt.apps.splice(r,1)[0].restoreElement(),!0):!1},Na=n=>Array.from(n.querySelectorAll(`.${jp}`)).filter(l=>!wt.apps.find(c=>c.isAttachedTo(l))).map(l=>nr(l)),Ga=n=>{const r=wt.apps.find(i=>i.isAttachedTo(n));return r?xa(r):null},mi=(...n)=>{n.forEach(Cp),t()},Fa=()=>{const n={};return be(ur(),(r,i)=>{n[r]=i[0]}),n},Ba=n=>(Ae(n)&&(wt.apps.forEach(r=>{r.setOptions(n)}),Md(n)),Fa())}/*!
 * vue-filepond v7.0.3
 * A handy FilePond adapter component for Vue
 * 
 * Copyright (c) 2022 PQINA
 * https://pqina.nl/filepond
 * 
 * Licensed under the MIT license.
 */const Hp=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"],Wp=gi(),$p=e=>({string:String,boolean:Boolean,array:Array,function:Function,int:Number,serverapi:Object,object:Object})[e],Zn={},ei=[],ti=[];let qp={};const Yp=(...e)=>{mi(...e),ei.length=0;for(const t in hr){if(/^on/.test(t)){ei.push(t);continue}let n=[String,$p(hr[t])];t=="labelFileProcessingError"&&n.push(Function),Zn[t]={type:n,default:void 0}}return{name:"FilePond",props:Zn,render(){const t=Object.entries({id:this.id,name:this.name,type:"file",class:this.className,required:this.required,multiple:this.allowMultiple,accept:this.acceptedFileTypes,capture:this.captureMethod}).reduce((n,[r,i])=>(i!==void 0&&(n[r]=i),n),{});return Ns("div",{class:{"filepond--wrapper":!0}},[Ns("input",t)])},created(){this.watchers=Object.keys(Zn).map(t=>this.$watch(t,n=>{this._pond[t]=n}))},mounted(){if(!Wp)return;this._element=this.$el.querySelector("input");const t=ei.reduce((r,i)=>(r[i]=(...l)=>{this.$emit("input",this._pond?this._pond.getFiles():[]),this.$emit(i.substr(2),...l)},r),{}),n={};Object.keys(Zn).forEach(r=>{this[r]!==void 0&&(n[r]=this[r])}),this._pond=nr(this._element,Object.assign({},qp,t,n)),Object.keys(this._pond).filter(r=>!Hp.includes(r)).forEach(r=>{this[r]=this._pond[r]}),ti.push(this._pond)},beforeUnmount(){const{detached:t}=this.$options;if(!this.$el.offsetParent){t.call(this);return}const n=(i,l)=>{const u=((i[0]||{}).removedNodes||[])[0];!u||!u.contains(this.$el)||(l.disconnect(),t.call(this))};new MutationObserver(n).observe(document.documentElement,{childList:!0,subtree:!0})},detached(){if(this.watchers.forEach(n=>n()),!this._pond)return;this._pond.destroy();const t=ti.indexOf(this._pond);t>=0&&ti.splice(t,1),this._pond=null}}};/*!
 * FilePondPluginFileValidateType 1.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Qo=({addFilter:e,utils:t})=>{const{Type:n,isString:r,replaceInString:i,guesstimateMimeType:l,getExtensionFromFilename:c,getFilenameFromURL:u}=t,f=(b,_)=>{const v=(/^[^/]+/.exec(b)||[]).pop(),T=_.slice(0,-2);return v===T},h=(b,_)=>b.some(v=>/\*$/.test(v)?f(_,v):v===_),p=b=>{let _="";if(r(b)){const v=u(b),T=c(v);T&&(_=l(T))}else _=b.type;return _},m=(b,_,v)=>{if(_.length===0)return!0;const T=p(b);return v?new Promise((D,y)=>{v(b,T).then(E=>{h(_,E)?D():y()}).catch(y)}):h(_,T)},w=b=>_=>b[_]===null?!1:b[_]||_;return e("SET_ATTRIBUTE_TO_OPTION_MAP",b=>Object.assign(b,{accept:"acceptedFileTypes"})),e("ALLOW_HOPPER_ITEM",(b,{query:_})=>_("GET_ALLOW_FILE_TYPE_VALIDATION")?m(b,_("GET_ACCEPTED_FILE_TYPES")):!0),e("LOAD_FILE",(b,{query:_})=>new Promise((v,T)=>{if(!_("GET_ALLOW_FILE_TYPE_VALIDATION")){v(b);return}const D=_("GET_ACCEPTED_FILE_TYPES"),y=_("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),E=m(b,D,y),O=()=>{const S=D.map(w(_("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter($=>$!==!1),G=S.filter(function($,L){return S.indexOf($)===L});T({status:{main:_("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:i(_("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:G.join(", "),allButLastType:G.slice(0,-1).join(", "),lastType:G[S.length-1]})}})};if(typeof E=="boolean")return E?v(b):O();E.then(()=>{v(b)}).catch(O)})),{options:{allowFileTypeValidation:[!0,n.BOOLEAN],acceptedFileTypes:[[],n.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",n.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",n.STRING],fileValidateTypeLabelExpectedTypesMap:[{},n.OBJECT],fileValidateTypeDetectType:[null,n.FUNCTION]}}},zp=typeof window<"u"&&typeof window.document<"u";zp&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Qo}));/*!
 * FilePondPluginImagePreview 4.6.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Xp=e=>/^image/.test(e.type),Va=(e,t)=>Mn(e.x*t,e.y*t),Ua=(e,t)=>Mn(e.x+t.x,e.y+t.y),Kp=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:Mn(e.x/t,e.y/t)},Jn=(e,t,n)=>{const r=Math.cos(t),i=Math.sin(t),l=Mn(e.x-n.x,e.y-n.y);return Mn(n.x+r*l.x-i*l.y,n.y+i*l.x+r*l.y)},Mn=(e=0,t=0)=>({x:e,y:t}),je=(e,t,n=1,r)=>{if(typeof e=="string")return parseFloat(e)*n;if(typeof e=="number")return e*(r?t[r]:Math.min(t.width,t.height))},Qp=(e,t,n)=>{const r=e.borderStyle||e.lineStyle||"solid",i=e.backgroundColor||e.fontColor||"transparent",l=e.borderColor||e.lineColor||"transparent",c=je(e.borderWidth||e.lineWidth,t,n),u=e.lineCap||"round",f=e.lineJoin||"round",h=typeof r=="string"?"":r.map(m=>je(m,t,n)).join(","),p=e.opacity||1;return{"stroke-linecap":u,"stroke-linejoin":f,"stroke-width":c||0,"stroke-dasharray":h,stroke:l,fill:i,opacity:p}},Ke=e=>e!=null,Zp=(e,t,n=1)=>{let r=je(e.x,t,n,"width")||je(e.left,t,n,"width"),i=je(e.y,t,n,"height")||je(e.top,t,n,"height"),l=je(e.width,t,n,"width"),c=je(e.height,t,n,"height"),u=je(e.right,t,n,"width"),f=je(e.bottom,t,n,"height");return Ke(i)||(Ke(c)&&Ke(f)?i=t.height-c-f:i=f),Ke(r)||(Ke(l)&&Ke(u)?r=t.width-l-u:r=u),Ke(l)||(Ke(r)&&Ke(u)?l=t.width-r-u:l=0),Ke(c)||(Ke(i)&&Ke(f)?c=t.height-i-f:c=0),{x:r||0,y:i||0,width:l||0,height:c||0}},Jp=e=>e.map((t,n)=>`${n===0?"M":"L"} ${t.x} ${t.y}`).join(" "),dt=(e,t)=>Object.keys(t).forEach(n=>e.setAttribute(n,t[n])),eh="http://www.w3.org/2000/svg",nn=(e,t)=>{const n=document.createElementNS(eh,e);return t&&dt(n,t),n},th=e=>dt(e,{...e.rect,...e.styles}),nh=e=>{const t=e.rect.x+e.rect.width*.5,n=e.rect.y+e.rect.height*.5,r=e.rect.width*.5,i=e.rect.height*.5;return dt(e,{cx:t,cy:n,rx:r,ry:i,...e.styles})},rh={contain:"xMidYMid meet",cover:"xMidYMid slice"},ih=(e,t)=>{dt(e,{...e.rect,...e.styles,preserveAspectRatio:rh[t.fit]||"none"})},sh={left:"start",center:"middle",right:"end"},ah=(e,t,n,r)=>{const i=je(t.fontSize,n,r),l=t.fontFamily||"sans-serif",c=t.fontWeight||"normal",u=sh[t.textAlign]||"start";dt(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":c,"font-size":i,"font-family":l,"text-anchor":u}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},oh=(e,t,n,r)=>{dt(e,{...e.rect,...e.styles,fill:"none"});const i=e.childNodes[0],l=e.childNodes[1],c=e.childNodes[2],u=e.rect,f={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(dt(i,{x1:u.x,y1:u.y,x2:f.x,y2:f.y}),!t.lineDecoration)return;l.style.display="none",c.style.display="none";const h=Kp({x:f.x-u.x,y:f.y-u.y}),p=je(.05,n,r);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const m=Va(h,p),w=Ua(u,m),b=Jn(u,2,w),_=Jn(u,-2,w);dt(l,{style:"display:block;",d:`M${b.x},${b.y} L${u.x},${u.y} L${_.x},${_.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const m=Va(h,-p),w=Ua(f,m),b=Jn(f,2,w),_=Jn(f,-2,w);dt(c,{style:"display:block;",d:`M${b.x},${b.y} L${f.x},${f.y} L${_.x},${_.y}`})}},lh=(e,t,n,r)=>{dt(e,{...e.styles,fill:"none",d:Jp(t.points.map(i=>({x:je(i.x,n,r,"width"),y:je(i.y,n,r,"height")})))})},er=e=>t=>nn(e,{id:t.id}),ch=e=>{const t=nn("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},dh=e=>{const t=nn("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),n=nn("line");t.appendChild(n);const r=nn("path");t.appendChild(r);const i=nn("path");return t.appendChild(i),t},uh={image:ch,rect:er("rect"),ellipse:er("ellipse"),text:er("text"),path:er("path"),line:dh},fh={rect:th,ellipse:nh,image:ih,text:ah,path:lh,line:oh},ph=(e,t)=>uh[e](t),hh=(e,t,n,r,i)=>{t!=="path"&&(e.rect=Zp(n,r,i)),e.styles=Qp(n,r,i),fh[t](e,n,r,i)},gh=["x","y","left","top","right","bottom","width","height"],mh=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,Eh=e=>{const[t,n]=e,r=n.points?{}:gh.reduce((i,l)=>(i[l]=mh(n[l]),i),{});return[t,{zIndex:0,...n,...r}]},_h=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,yh=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:t,props:n})=>{if(!n.dirty)return;const{crop:r,resize:i,markup:l}=n,c=n.width,u=n.height;let f=r.width,h=r.height;if(i){const{size:b}=i;let _=b&&b.width,v=b&&b.height;const T=i.mode,D=i.upscale;_&&!v&&(v=_),v&&!_&&(_=v);const y=f<_&&h<v;if(!y||y&&D){let E=_/f,O=v/h;if(T==="force")f=_,h=v;else{let S;T==="cover"?S=Math.max(E,O):T==="contain"&&(S=Math.min(E,O)),f=f*S,h=h*S}}}const p={width:c,height:u};t.element.setAttribute("width",p.width),t.element.setAttribute("height",p.height);const m=Math.min(c/f,u/h);t.element.innerHTML="";const w=t.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");l.filter(w).map(Eh).sort(_h).forEach(b=>{const[_,v]=b,T=ph(_,v);hh(T,_,v,p,m),t.element.appendChild(T)})}}),Pn=(e,t)=>({x:e,y:t}),bh=(e,t)=>e.x*t.x+e.y*t.y,ja=(e,t)=>Pn(e.x-t.x,e.y-t.y),vh=(e,t)=>bh(ja(e,t),ja(e,t)),Ha=(e,t)=>Math.sqrt(vh(e,t)),Wa=(e,t)=>{const n=e,r=1.5707963267948966,i=t,l=1.5707963267948966-t,c=Math.sin(r),u=Math.sin(i),f=Math.sin(l),h=Math.cos(l),p=n/c,m=p*u,w=p*f;return Pn(h*m,h*w)},wh=(e,t)=>{const n=e.width,r=e.height,i=Wa(n,t),l=Wa(r,t),c=Pn(e.x+Math.abs(i.x),e.y-Math.abs(i.y)),u=Pn(e.x+e.width+Math.abs(l.y),e.y+Math.abs(l.x)),f=Pn(e.x-Math.abs(l.y),e.y+e.height-Math.abs(l.x));return{width:Ha(c,u),height:Ha(c,f)}},Ih=(e,t,n=1)=>{const r=e.height/e.width;let i=1,l=t,c=1,u=r;u>l&&(u=l,c=u/r);const f=Math.max(i/c,l/u),h=e.width/(n*f*c),p=h*t;return{width:h,height:p}},Zo=(e,t,n,r)=>{const i=r.x>.5?1-r.x:r.x,l=r.y>.5?1-r.y:r.y,c=i*2*e.width,u=l*2*e.height,f=wh(t,n);return Math.max(f.width/c,f.height/u)},Jo=(e,t)=>{let n=e.width,r=n*t;r>e.height&&(r=e.height,n=r/t);const i=(e.width-n)*.5,l=(e.height-r)*.5;return{x:i,y:l,width:n,height:r}},Th=(e,t={})=>{let{zoom:n,rotation:r,center:i,aspectRatio:l}=t;l||(l=e.height/e.width);const c=Ih(e,l,n),u={x:c.width*.5,y:c.height*.5},f={x:0,y:0,width:c.width,height:c.height,center:u},h=typeof t.scaleToFit>"u"||t.scaleToFit,p=Zo(e,Jo(f,l),r,h?i:{x:.5,y:.5}),m=n*p;return{widthFloat:c.width/m,heightFloat:c.height/m,width:Math.round(c.width/m),height:Math.round(c.height/m)}},ct={type:"spring",stiffness:.5,damping:.45,mass:10},Oh=e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:t,props:n})=>{t.appendChild(n.image)}}),Dh=e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:ct,originY:ct,scaleX:ct,scaleY:ct,translateX:ct,translateY:ct,rotateZ:ct}},create:({root:t,props:n})=>{n.width=n.image.width,n.height=n.image.height,t.ref.bitmap=t.appendChildView(t.createChildView(Oh(e),{image:n.image}))},write:({root:t,props:n})=>{const{flip:r}=n.crop,{bitmap:i}=t.ref;i.scaleX=r.horizontal?-1:1,i.scaleY=r.vertical?-1:1}}),Rh=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:t,props:n}){!n.background||(t.element.style.backgroundColor=n.background)},create:({root:t,props:n})=>{t.ref.image=t.appendChildView(t.createChildView(Dh(e),Object.assign({},n))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(yh(e),Object.assign({},n))))},t.ref.destroyMarkup=()=>{!t.ref.markup||(t.removeChildView(t.ref.markup),t.ref.markup=null)};const r=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");r!==null&&(r==="grid"?t.element.dataset.transparencyIndicator=r:t.element.dataset.transparencyIndicator="color")},write:({root:t,props:n,shouldOptimize:r})=>{const{crop:i,markup:l,resize:c,dirty:u,width:f,height:h}=n;t.ref.image.crop=i;const p={x:0,y:0,width:f,height:h,center:{x:f*.5,y:h*.5}},m={width:t.ref.image.width,height:t.ref.image.height},w={x:i.center.x*m.width,y:i.center.y*m.height},b={x:p.center.x-m.width*i.center.x,y:p.center.y-m.height*i.center.y},_=Math.PI*2+i.rotation%(Math.PI*2),v=i.aspectRatio||m.height/m.width,T=typeof i.scaleToFit>"u"||i.scaleToFit,D=Zo(m,Jo(p,v),_,T?i.center:{x:.5,y:.5}),y=i.zoom*D;l&&l.length?(t.ref.createMarkup(),t.ref.markup.width=f,t.ref.markup.height=h,t.ref.markup.resize=c,t.ref.markup.dirty=u,t.ref.markup.markup=l,t.ref.markup.crop=Th(m,i)):t.ref.markup&&t.ref.destroyMarkup();const E=t.ref.image;if(r){E.originX=null,E.originY=null,E.translateX=null,E.translateY=null,E.rotateZ=null,E.scaleX=null,E.scaleY=null;return}E.originX=w.x,E.originY=w.y,E.translateX=b.x,E.translateY=b.y,E.rotateZ=_,E.scaleX=y,E.scaleY=y}}),Sh=e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:ct,scaleY:ct,translateY:ct,opacity:{type:"tween",duration:400}}},create:({root:t,props:n})=>{t.ref.clip=t.appendChildView(t.createChildView(Rh(e),{id:n.id,image:n.image,crop:n.crop,markup:n.markup,resize:n.resize,dirty:n.dirty,background:n.background}))},write:({root:t,props:n,shouldOptimize:r})=>{const{clip:i}=t.ref,{image:l,crop:c,markup:u,resize:f,dirty:h}=n;if(i.crop=c,i.markup=u,i.resize=f,i.dirty=h,i.opacity=r?0:1,r||t.rect.element.hidden)return;const p=l.height/l.width;let m=c.aspectRatio||p;const w=t.rect.inner.width,b=t.rect.inner.height;let _=t.query("GET_IMAGE_PREVIEW_HEIGHT");const v=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),T=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),D=t.query("GET_PANEL_ASPECT_RATIO"),y=t.query("GET_ALLOW_MULTIPLE");D&&!y&&(_=w*D,m=D);let E=_!==null?_:Math.max(v,Math.min(w*m,T)),O=E/m;O>w&&(O=w,E=O*m),E>b&&(E=b,O=b/m),i.width=O,i.height=E}});let Ah=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,$a=0;const Ph=e=>e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:t,props:n})=>{let r=Ah;if(document.querySelector("base")){const i=new URL(window.location.href.replace(window.location.hash,"")).href;r=r.replace(/url\(\#/g,"url("+i+"#")}$a++,t.element.classList.add(`filepond--image-preview-overlay-${n.status}`),t.element.innerHTML=r.replace(/__UID__/g,$a)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),Lh=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then(t=>{self.postMessage({id:e.data.id,message:t},[t])})}},Mh=function(){self.onmessage=e=>{const t=e.data.message.imageData,n=e.data.message.colorMatrix,r=t.data,i=r.length,l=n[0],c=n[1],u=n[2],f=n[3],h=n[4],p=n[5],m=n[6],w=n[7],b=n[8],_=n[9],v=n[10],T=n[11],D=n[12],y=n[13],E=n[14],O=n[15],S=n[16],G=n[17],$=n[18],L=n[19];let N=0,z=0,j=0,H=0,ee=0;for(;N<i;N+=4)z=r[N]/255,j=r[N+1]/255,H=r[N+2]/255,ee=r[N+3]/255,r[N]=Math.max(0,Math.min((z*l+j*c+H*u+ee*f+h)*255,255)),r[N+1]=Math.max(0,Math.min((z*p+j*m+H*w+ee*b+_)*255,255)),r[N+2]=Math.max(0,Math.min((z*v+j*T+H*D+ee*y+E)*255,255)),r[N+3]=Math.max(0,Math.min((z*O+j*S+H*G+ee*$+L)*255,255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},Ch=(e,t)=>{let n=new Image;n.onload=()=>{const r=n.naturalWidth,i=n.naturalHeight;n=null,t(r,i)},n.src=e},xh={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},kh=(e,t,n,r)=>{r!==-1&&e.transform.apply(e,xh[r](t,n))},Nh=(e,t,n,r)=>{t=Math.round(t),n=Math.round(n);const i=document.createElement("canvas");i.width=t,i.height=n;const l=i.getContext("2d");return r>=5&&r<=8&&([t,n]=[n,t]),kh(l,t,n,r),l.drawImage(e,0,0,t,n),i},el=e=>/^image/.test(e.type)&&!/svg/.test(e.type),Gh=10,Fh=10,Bh=e=>{const t=Math.min(Gh/e.width,Fh/e.height),n=document.createElement("canvas"),r=n.getContext("2d"),i=n.width=Math.ceil(e.width*t),l=n.height=Math.ceil(e.height*t);r.drawImage(e,0,0,i,l);let c=null;try{c=r.getImageData(0,0,i,l).data}catch{return null}const u=c.length;let f=0,h=0,p=0,m=0;for(;m<u;m+=4)f+=c[m]*c[m],h+=c[m+1]*c[m+1],p+=c[m+2]*c[m+2];return f=ni(f,u),h=ni(h,u),p=ni(p,u),{r:f,g:h,b:p}},ni=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),Vh=(e,t)=>(t=t||document.createElement("canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t),Uh=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t},jh=e=>new Promise((t,n)=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>{t(r)},r.onerror=i=>{n(i)},r.src=e}),Hh=e=>{const t=Ph(e),n=Sh(e),{createWorker:r}=e.utils,i=(y,E,O)=>new Promise(S=>{y.ref.imageData||(y.ref.imageData=O.getContext("2d").getImageData(0,0,O.width,O.height));const G=Uh(y.ref.imageData);if(!E||E.length!==20)return O.getContext("2d").putImageData(G,0,0),S();const $=r(Mh);$.post({imageData:G,colorMatrix:E},L=>{O.getContext("2d").putImageData(L,0,0),$.terminate(),S()},[G.data.buffer])}),l=(y,E)=>{y.removeChildView(E),E.image.width=1,E.image.height=1,E._destroy()},c=({root:y})=>{const E=y.ref.images.shift();return E.opacity=0,E.translateY=-15,y.ref.imageViewBin.push(E),E},u=({root:y,props:E,image:O})=>{const S=E.id,G=y.query("GET_ITEM",{id:S});if(!G)return;const $=G.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},L=y.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let N,z,j=!1;y.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(N=G.getMetadata("markup")||[],z=G.getMetadata("resize"),j=!0);const H=y.appendChildView(y.createChildView(n,{id:S,image:O,crop:$,resize:z,markup:N,dirty:j,background:L,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),y.childViews.length);y.ref.images.push(H),H.opacity=1,H.scaleX=1,H.scaleY=1,H.translateY=0,setTimeout(()=>{y.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:S})},250)},f=({root:y,props:E})=>{const O=y.query("GET_ITEM",{id:E.id});if(!O)return;const S=y.ref.images[y.ref.images.length-1];S.crop=O.getMetadata("crop"),S.background=y.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),y.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(S.dirty=!0,S.resize=O.getMetadata("resize"),S.markup=O.getMetadata("markup"))},h=({root:y,props:E,action:O})=>{if(!/crop|filter|markup|resize/.test(O.change.key)||!y.ref.images.length)return;const S=y.query("GET_ITEM",{id:E.id});if(!!S){if(/filter/.test(O.change.key)){const G=y.ref.images[y.ref.images.length-1];i(y,O.change.value,G.image);return}if(/crop|markup|resize/.test(O.change.key)){const G=S.getMetadata("crop"),$=y.ref.images[y.ref.images.length-1];if(G&&G.aspectRatio&&$.crop&&$.crop.aspectRatio&&Math.abs(G.aspectRatio-$.crop.aspectRatio)>1e-5){const L=c({root:y});u({root:y,props:E,image:Vh(L.image)})}else f({root:y,props:E})}}},p=y=>{const O=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return(O?parseInt(O[1]):null)<=58?!1:"createImageBitmap"in window&&el(y)},m=({root:y,props:E})=>{const{id:O}=E,S=y.query("GET_ITEM",O);if(!S)return;const G=URL.createObjectURL(S.file);Ch(G,($,L)=>{y.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:O,width:$,height:L})})},w=({root:y,props:E})=>{const{id:O}=E,S=y.query("GET_ITEM",O);if(!S)return;const G=URL.createObjectURL(S.file),$=()=>{jh(G).then(L)},L=N=>{URL.revokeObjectURL(G);const j=(S.getMetadata("exif")||{}).orientation||-1;let{width:H,height:ee}=N;if(!H||!ee)return;j>=5&&j<=8&&([H,ee]=[ee,H]);const k=Math.max(1,window.devicePixelRatio*.75),A=y.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*k,x=ee/H,W=y.rect.element.width,C=y.rect.element.height;let F=W,J=F*x;x>1?(F=Math.min(H,W*A),J=F*x):(J=Math.min(ee,C*A),F=J/x);const ie=Nh(N,F,J,j),pe=()=>{const he=y.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?Bh(data):null;S.setMetadata("color",he,!0),"close"in N&&N.close(),y.ref.overlayShadow.opacity=1,u({root:y,props:E,image:ie})},fe=S.getMetadata("filter");fe?i(y,fe,ie).then(pe):pe()};if(p(S.file)){const N=r(Lh);N.post({file:S.file},z=>{if(N.terminate(),!z){$();return}L(z)})}else $()},b=({root:y})=>{const E=y.ref.images[y.ref.images.length-1];E.translateY=0,E.scaleX=1,E.scaleY=1,E.opacity=1},_=({root:y})=>{y.ref.overlayShadow.opacity=1,y.ref.overlayError.opacity=0,y.ref.overlaySuccess.opacity=0},v=({root:y})=>{y.ref.overlayShadow.opacity=.25,y.ref.overlayError.opacity=1},T=({root:y})=>{y.ref.overlayShadow.opacity=.25,y.ref.overlaySuccess.opacity=1},D=({root:y})=>{y.ref.images=[],y.ref.imageData=null,y.ref.imageViewBin=[],y.ref.overlayShadow=y.appendChildView(y.createChildView(t,{opacity:0,status:"idle"})),y.ref.overlaySuccess=y.appendChildView(y.createChildView(t,{opacity:0,status:"success"})),y.ref.overlayError=y.appendChildView(y.createChildView(t,{opacity:0,status:"failure"}))};return e.utils.createView({name:"image-preview-wrapper",create:D,styles:["height"],apis:["height"],destroy:({root:y})=>{y.ref.images.forEach(E=>{E.image.width=1,E.image.height=1})},didWriteView:({root:y})=>{y.ref.images.forEach(E=>{E.dirty=!1})},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:b,DID_IMAGE_PREVIEW_CONTAINER_CREATE:m,DID_FINISH_CALCULATE_PREVIEWSIZE:w,DID_UPDATE_ITEM_METADATA:h,DID_THROW_ITEM_LOAD_ERROR:v,DID_THROW_ITEM_PROCESSING_ERROR:v,DID_THROW_ITEM_INVALID:v,DID_COMPLETE_ITEM_PROCESSING:T,DID_START_ITEM_PROCESSING:_,DID_REVERT_ITEM_PROCESSING:_},({root:y})=>{const E=y.ref.imageViewBin.filter(O=>O.opacity===0);y.ref.imageViewBin=y.ref.imageViewBin.filter(O=>O.opacity>0),E.forEach(O=>l(y,O)),E.length=0})})},tl=e=>{const{addFilter:t,utils:n}=e,{Type:r,createRoute:i,isFile:l}=n,c=Hh(e);return t("CREATE_VIEW",u=>{const{is:f,view:h,query:p}=u;if(!f("file")||!p("GET_ALLOW_IMAGE_PREVIEW"))return;const m=({root:T,props:D})=>{const{id:y}=D,E=p("GET_ITEM",y);if(!E||!l(E.file)||E.archived)return;const O=E.file;if(!Xp(O)||!p("GET_IMAGE_PREVIEW_FILTER_ITEM")(E))return;const S="createImageBitmap"in(window||{}),G=p("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!S&&G&&O.size>G)return;T.ref.imagePreview=h.appendChildView(h.createChildView(c,{id:y}));const $=T.query("GET_IMAGE_PREVIEW_HEIGHT");$&&T.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:E.id,height:$});const L=!S&&O.size>p("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");T.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:y},L)},w=(T,D)=>{if(!T.ref.imagePreview)return;let{id:y}=D;const E=T.query("GET_ITEM",{id:y});if(!E)return;const O=T.query("GET_PANEL_ASPECT_RATIO"),S=T.query("GET_ITEM_PANEL_ASPECT_RATIO"),G=T.query("GET_IMAGE_PREVIEW_HEIGHT");if(O||S||G)return;let{imageWidth:$,imageHeight:L}=T.ref;if(!$||!L)return;const N=T.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),z=T.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),H=(E.getMetadata("exif")||{}).orientation||-1;if(H>=5&&H<=8&&([$,L]=[L,$]),!el(E.file)||T.query("GET_IMAGE_PREVIEW_UPSCALE")){const W=2048/$;$*=W,L*=W}const ee=L/$,k=(E.getMetadata("crop")||{}).aspectRatio||ee;let Z=Math.max(N,Math.min(L,z));const A=T.rect.element.width,x=Math.min(A*k,Z);T.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:E.id,height:x})},b=({root:T})=>{T.ref.shouldRescale=!0},_=({root:T,action:D})=>{D.change.key==="crop"&&(T.ref.shouldRescale=!0)},v=({root:T,action:D})=>{T.ref.imageWidth=D.width,T.ref.imageHeight=D.height,T.ref.shouldRescale=!0,T.ref.shouldDrawPreview=!0,T.dispatch("KICK")};h.registerWriter(i({DID_RESIZE_ROOT:b,DID_STOP_RESIZE:b,DID_LOAD_ITEM:m,DID_IMAGE_PREVIEW_CALCULATE_SIZE:v,DID_UPDATE_ITEM_METADATA:_},({root:T,props:D})=>{!T.ref.imagePreview||T.rect.element.hidden||(T.ref.shouldRescale&&(w(T,D),T.ref.shouldRescale=!1),T.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{T.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:D.id})})}),T.ref.shouldDrawPreview=!1))}))}),{options:{allowImagePreview:[!0,r.BOOLEAN],imagePreviewFilterItem:[()=>!0,r.FUNCTION],imagePreviewHeight:[null,r.INT],imagePreviewMinHeight:[44,r.INT],imagePreviewMaxHeight:[256,r.INT],imagePreviewMaxFileSize:[null,r.INT],imagePreviewZoomFactor:[2,r.INT],imagePreviewUpscale:[!1,r.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,r.INT],imagePreviewTransparencyIndicator:[null,r.STRING],imagePreviewCalculateAverageImageColor:[!1,r.BOOLEAN],imagePreviewMarkupShow:[!0,r.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,r.FUNCTION]}}},Wh=typeof window<"u"&&typeof window.document<"u";Wh&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:tl}));const $h={class:"mb-4 text-base font-medium"},qh={key:0,class:"p-2 mb-4 rounded-md theme-color"},Yh={class:"mb-2 italic text-tiny"},zh={key:0,class:"flex flex-row gap-2"},Xh={key:0},Kh={key:0,class:"p-2 mb-2 w-full text-white bg-red-500 rounded-md"},Qh={class:"alert-success"},Zh={class:"italic"},Jh={class:"flex flex-row p-2 mb-2 text-white rounded-md button-color"},eg={class:"input-block"},tg=["name"],ng=["placeholder"],rg={class:"-mt-2 input-block"},ig={class:"input-block"},sg={class:"input-block"},ag={class:"flex flex-row gap-x-2 input-block"},og={class:"relative w-full"},lg={class:"flex absolute left-1 top-3.5 items-center pl-2 pointer-events-none"},cg=["placeholder"],dg={key:0,class:"input-block"},ug={for:"is-original-character-toggle",class:"inline-flex relative items-center cursor-pointer"},fg=["checked"],pg=q("div",{class:"toggle peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 peer-checked:bg-blue-600"},null,-1),hg={class:"ml-2"},gg={key:1,class:"input-block"},mg={for:"is-allow-redraw-toggle",class:"inline-flex relative items-center cursor-pointer"},Eg=["checked"],_g=q("div",{class:"toggle peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 peer-checked:bg-blue-600"},null,-1),yg={class:"ml-2"},bg={key:2,class:"input-block"},vg={for:"is-redraw-in-your-style-toggle",class:"inline-flex relative items-center cursor-pointer"},wg=["checked"],Ig=q("div",{class:"toggle peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 peer-checked:bg-blue-600"},null,-1),Tg={class:"ml-2"},Og={class:"input-block"},Dg={for:"explicit-mode-toggle",class:"inline-flex relative items-center cursor-pointer"},Rg=["checked"],Sg=q("div",{class:"toggle peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 peer-checked:bg-blue-600"},null,-1),Ag={class:"ml-2"},Pg={class:"flex flex-row justify-between md:justify-end"},Lg={class:"flex flex-row"},Mg={__name:"ArtworkForm",setup(e){const t=Yp(Qo,tl),n=Vl(),{t:r}=qa(),l=Ul().public.apiUrl,c=jl(),{$router:u}=Ya(),{oApiConfiguration:f,fetchOptions:h}=za(),p=Zl(f,h());Xa(()=>u.query,()=>{w()});const m=Hl(()=>c.query.redrawWorkId);Wl(()=>{n.loggedIn||u.push("/"),_(),m.value&&W();const C=$l().add(1,"day").format("DD/MM/yyyy"),F=document.getElementById("publishDate");new kc(F,{autohide:!0,todayHighlight:!0,format:"dd/mm/yyyy",minDate:C})});const w=()=>{T.value=[],O.value=[],E.value.isExplicit=!1},b=tc(f,h()),_=async()=>{let C=1;n.i502p00r0?C=await b.getSetting("artwork_max_uploads_pro"):C=await b.getSetting("artwork_max_uploads"),$.value=C;const F=await b.getSetting("artwork_max_file_size");G.value=F,v.value="<div class='text-xxs'><div>Pick or drop up to "+$.value+" files here</div><div>PNG, JPG up to "+G.value+"MB</div></div>"},v=Re(""),T=Re([]),D=C=>{T.value=C.map(F=>F.file)},y="artwork-form",E=Re({title:"",description:"",tags:"",isExplicit:!1,isOriginalCharacter:!1,isAllowRedraw:!1,isredrawInMyStyle:!1,publishDate:null,publishTime:null}),O=Re([]),S=Re({showFileTooBig:!1}),G=Re(5),$=Re(1),L=Re(!1),N=Re(!1),z=Re(!1),j=Re(""),H=async()=>{Kl().validate(y,r),Z();const C=document.getElementById("publishDate");let F=null;if(C.value){const pe=C.value.split("/"),fe=`${pe[2]}-${pe[1]}-${pe[0]}`;let he="00:00:00";E.value.publishTime&&(he=`${E.value.publishTime}:00`),F=`${fe} ${he}`}const J=[];O.value.forEach(pe=>{J.push(pe.value)});const ie=new FormData;ie.append("title",E.value.title),ie.append("description",E.value.description),ie.append("tags",J.toString()),ie.append("is_explicit",E.value.isExplicit?1:0),ie.append("is_original_character",E.value.isOriginalCharacter?1:0),ie.append("allow_redraw",E.value.isAllowRedraw?1:0),ie.append("redraw_in_your_style",E.value.isredrawInMyStyle?1:0),m.value&&ie.append("redraw_of",m.value),ie.append("scheduled_post",["",null].includes(F)?null:Yl().formatDateToApi(F));for(let pe=0;pe<T.value.length;pe++)if(T.value[pe].size>G.value*1e6&&(S.value.showFileTooBig=!0),!S.value.showFileTooBig){const fe=T.value[pe];ie.append("files[]",fe),ie.append("file_order[]",pe)}S.value.showFileTooBig||(L.value=!0,N.value=!1,await zl.post(l+"/artworks/post",ie,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${n.a4ht0jen}`}}).then(({data:pe})=>{if(pe.success){const fe=pe.data.id;N.value=!0,setTimeout(()=>{u.push("/a/"+fe)},1e3)}else k()}).catch(pe=>{k()})),L.value=!1},ee=Re(!1),k=()=>{ee.value=!0},Z=()=>{ee.value=!1,L.value=!1,N.value=!1,z.value=!1,j.value=""},A=Re({}),x=Re(!0),W=async()=>{x.value=!0;const[C,F]=await p.getWorkById(m.value);F||(A.value=C),x.value=!1};return(C,F)=>{const J=Jl,ie=Xl,pe=ec,fe=ql("tags-input");return Qe(),pt("div",null,[q("div",$h,Ee(U(m)?C.$t("artworks.add.form.titleRedraw"):C.$t("artworks.add.form.title")),1),U(m)?(Qe(),pt("div",qh,[q("div",null,[q("div",Yh,Ee(C.$t("artworks.redrawedArtwork")),1),U(x)?(Qe(),pt("div",zh,[Me(Dn),Jt(" "+Ee(C.$t("artworks.redrawOriginalLoading")),1)])):(Qe(),ri(ie,{key:1,to:"/a/"+U(m),class:"flex flex-row gap-2"},{default:ii(()=>[U(A).artwork_assets?(Qe(),pt("div",Xh,[Me(J,{preload:"",loading:"lazy",class:"w-40 rounded-md",src:C.artworkThumb(U(A).artwork_assets[0].bucket,U(A).artwork_assets[0].filename,"thumbnail",!1),onError:C.imageLoadError},null,8,["src","onError"])])):At("",!0),q("div",null,[q("span",null,Ee(U(A).title),1)])]),_:1},8,["to"]))])])):At("",!0),q("div",null,[U(z)?(Qe(),pt("div",Kh,Ee(U(j)),1)):At("",!0),Ce(q("div",Qh,[Jt(Ee(C.$t("artworks.add.form.uploadSuccess"))+" ",1),q("span",Zh,Ee(C.$t("artworks.add.form.successRedirect")),1)],512),[[He,U(N)]]),Ce(q("div",Jh,[Me(Dn,{class:"mr-1"}),Jt(" "+Ee(C.$t("artworks.add.form.uploading")),1)],512),[[He,U(L)]]),Ce(q("div",{class:"alert-danger"},Ee(C.$t("artworks.add.form.uploadFailure")),513),[[He,U(ee)]])]),q("form",{id:y,enctype:"multipart/form-data",onSubmit:F[9]||(F[9]=Qa(he=>H(),["prevent"]))},[q("div",eg,[q("n-validate",{for:"title",name:C.$t("title"),class:"input-block"},[Ce(q("input",{"onUpdate:modelValue":F[0]||(F[0]=he=>U(E).title=he),type:"text",rules:"required|max:100",class:ht(["form-input input",{"pointer-events-none cursor-not-allowed":U(L)||U(N)}]),placeholder:C.$t("title")},null,10,ng),[[Gs,U(E).title]])],8,tg)]),q("div",rg,[Me(U(Za.exports.VueEditor),{modelValue:U(E).description,"onUpdate:modelValue":F[1]||(F[1]=he=>U(E).description=he),editorToolbar:[[{size:["normal","large"]}],["bold","italic","underline","strike"],["link"],[{color:[]},{background:[]}],["clean"]],class:ht([{"pointer-events-none cursor-not-allowed":U(L)||U(N)}]),placeholder:C.$t("description")},null,8,["modelValue","class","placeholder"])]),q("div",ig,[Ce(q("div",{class:"p-2 mb-2 text-xs text-white bg-red-400 rounded-md shadow-md"},Ee(C.$t("artworks.add.form.fileTooBig"))+" "+Ee(U(G))+"MB. ",513),[[He,U(S).showFileTooBig]]),Me(pe,null,{default:ii(()=>[Me(U(t),{ref:"pond",name:"files[]","label-idle":U(v),"accepted-file-types":"image/jpeg, image/png","allow-multiple":"true","allow-drop":"true","allow-reorder":"true","allow-process":"true",credits:"false","max-files":U($),"instant-upload":"false",class:ht(["bg-transparent rounded-sm",{"pointer-events-none cursor-not-allowed":U(L)||U(N)}]),onUpdatefiles:D},null,8,["label-idle","max-files","class"])]),_:1})]),q("div",sg,[Me(fe,{modelValue:U(O),"onUpdate:modelValue":F[2]||(F[2]=he=>Ka(O)?O.value=he:null),placeholder:C.$t("tagsInputPlaceholder"),typeahead:!0,"typeahead-style":"dropdown","typeahead-activation-threshold":2,"typeahead-show-on-focus":!0,"typeahead-hide-discard":!0,"typeahead-url":U(l)+"/artworks/tags/search?keyword=:search","add-tags-on-comma":!0,class:ht({"pointer-events-none cursor-not-allowed":U(L)||U(N)})},null,8,["modelValue","placeholder","typeahead-url","class"])]),q("div",ag,[q("div",og,[q("div",lg,[Me(On,{name:"i-bi-calendar3-event"})]),q("input",{id:"publishDate",type:"text",class:"block pl-10 w-full form-input input",placeholder:C.$t("artworks.add.form.publishDate"),autocomplete:"off"},null,8,cg)]),Ce(q("input",{"onUpdate:modelValue":F[3]||(F[3]=he=>U(E).publishTime=he),type:"time",class:"form-input input"},null,512),[[Gs,U(E).publishTime]])]),U(m)?At("",!0):(Qe(),pt("div",dg,[q("label",ug,[q("input",{onClick:F[4]||(F[4]=he=>U(E).isOriginalCharacter=!U(E).isOriginalCharacter),id:"is-original-character-toggle",type:"checkbox",class:"sr-only peer",checked:U(E).isOriginalCharacter},null,8,fg),pg,q("span",hg,Ee(C.$t("artworks.originalCharacter")),1)])])),U(m)?At("",!0):(Qe(),pt("div",gg,[q("label",mg,[q("input",{onClick:F[5]||(F[5]=he=>U(E).isAllowRedraw=!U(E).isAllowRedraw),id:"is-allow-redraw-toggle",type:"checkbox",class:"sr-only peer",checked:U(E).isAllowRedraw},null,8,Eg),_g,q("span",yg,Ee(C.$t("artworks.add.form.allowRedraw")),1)])])),U(m)?(Qe(),pt("div",bg,[q("label",vg,[q("input",{onClick:F[6]||(F[6]=he=>U(E).isredrawInMyStyle=!U(E).isredrawInMyStyle),id:"is-redraw-in-your-style-toggle",type:"checkbox",class:"sr-only peer",checked:U(E).isredrawInMyStyle},null,8,wg),Ig,q("span",Tg,Ee(C.$t("artworks.add.form.redrawInMyStyle")),1)])])):At("",!0),q("div",Og,[q("label",Dg,[q("input",{onClick:F[7]||(F[7]=he=>U(E).isExplicit=!U(E).isExplicit),id:"explicit-mode-toggle",type:"checkbox",class:"sr-only peer",checked:U(E).isExplicit},null,8,Rg),Sg,q("span",Ag,Ee(C.$t("explicitContent")),1)])]),q("div",Pg,[q("button",{class:"mr-2 w-full reset-form-button md:w-auto",type:"reset",onClick:F[8]||(F[8]=he=>w())},"Reset"),q("button",{type:"submit",class:ht(["float-right w-full md:w-auto",{"pointer-events-none cursor-not-allowed":U(L)||U(N)},U(E).title&&U(T).length>0?"primary-button":"disabled-button"])},[q("div",Lg,[U(L)?(Qe(),ri(Dn,{key:0,class:"mr-2"})):At("",!0),Jt(" "+Ee(U(L)?C.$t("artworks.add.form.uploadingButton"):C.$t("artworks.add.form.post").toUpperCase()),1)])],2)])],32)])}}},Cg={class:"mb-4 text-base font-medium"},xg={class:"alert-success"},kg={class:"italic"},Ng={class:"flex flex-row p-2 mb-2 text-white rounded-md button-color"},Gg={class:"flex flex-row justify-between md:justify-end"},Fg={__name:"FeedForm",setup(e){const{oApiConfiguration:t,fetchOptions:n}=za(),r=nc(t,n()),{$router:i}=Ya(),l=Re(""),c=Re(!1),u=Re(!1),f=Re(!1),h=async()=>{c.value=!0;const[p,m,w]=await r.postFeed({text:l.value});if(p){c.value=!1,u.value=!0;const b=m.id;setTimeout(()=>{i.push(`/feed/${b}`)},1e3)}else f.value=!0,c.value=!1;c.value=!1};return(p,m)=>(Qe(),pt("div",null,[q("div",Cg,Ee(p.$t("feeds.form.title")),1),Ce(q("div",xg,[Jt(Ee(p.$t("feeds.form.posted"))+" ",1),q("span",kg,Ee(p.$t("feeds.form.successRedirect")),1)],512),[[He,U(u)]]),Ce(q("div",Ng,[Me(Dn,{class:"mr-2"}),Jt(" "+Ee(p.$t("feeds.form.postingYourUpdate")),1)],512),[[He,U(c)]]),Ce(q("div",{class:"alert-danger"},Ee(p.$t("feeds.form.postFailure")),513),[[He,U(f)]]),Me(U(Za.exports.VueEditor),{modelValue:U(l),"onUpdate:modelValue":m[0]||(m[0]=w=>Ka(l)?l.value=w:null),editorToolbar:[[{size:["normal","large"]}],["bold","italic","underline","strike"],["link"],[{color:[]},{background:[]}],["clean"]],class:ht(["mb-4"]),placeholder:p.$t("typeSomething")},null,8,["modelValue","placeholder"]),q("div",Gg,[q("button",{class:"mr-2 w-full reset-form-button md:w-auto",type:"reset",onClick:m[1]||(m[1]=w=>l.value="")},"Reset"),q("button",{class:ht(["flex flex-row w-full md:w-auto",[U(l)!==""?"primary-button":"disabled-button"]]),onClick:m[2]||(m[2]=Qa(w=>U(l)!==""?h():null,["prevent"]))},[Ce(Me(Dn,{class:"mr-2"},null,512),[[He,U(c)]]),q("span",null,Ee(U(c)?p.$t("posting"):p.$t("post").toUpperCase()),1)],2)])]))}};const Bg={class:"mb-20"},Vg={class:"categories"},Ug={class:"text-sm leading-6"},jg={class:"text-sm leading-6"},Hg={class:"forms"},Wg={__name:"index",setup(e){const{t}=qa(),n=Re("artwork");return Fs({title:n.value==="artwork"?t("meta.title.artwork.post"):t("meta.title.feed.post")}),Xa(()=>n.value,()=>{Fs({title:n.value==="artwork"?t("meta.title.artwork.post"):t("meta.title.feed.post")})}),(r,i)=>(Qe(),ri(Ql,{"with-footer":!1,"hide-side":!1,"hide-right-side":!0},{default:ii(()=>[q("div",Bg,[q("div",Vg,[q("div",{class:ht(["category",[U(n)==="feed"?"button":"theme-color"]]),onClick:i[0]||(i[0]=l=>n.value="feed")},[Ce(Me(On,{name:"i-ion-text-outline","text-size":"texl-xl",class:"mr-3 text-2xl"},null,512),[[He,U(n)!="feed"]]),Ce(Me(On,{name:"i-ion-text-outline","text-size":"texl-xl",class:"mr-3 text-2xl text-white"},null,512),[[He,U(n)=="feed"]]),q("span",Ug,Ee(r.$t("feed")),1)],2),q("div",{class:ht(["category",[U(n)==="artwork"?"button":"theme-color"]]),onClick:i[1]||(i[1]=l=>n.value="artwork")},[Ce(Me(On,{name:"i-ion-images-outline","text-size":"texl-xl",class:"mr-3 text-2xl"},null,512),[[He,U(n)!="artwork"]]),Ce(Me(On,{name:"i-ion-images-outline","text-size":"texl-xl",class:"mr-3 text-2xl text-white"},null,512),[[He,U(n)=="artwork"]]),q("span",jg,Ee(r.$t("artworks.artwork")),1)],2)]),q("div",Hg,[Ce(Me(Fg,null,null,512),[[He,U(n)==="feed"]]),Ce(Me(Mg,{class:"artwork"},null,512),[[He,U(n)==="artwork"]])])])]),_:1}))}},Zg=rc(Wg,[["__scopeId","data-v-6919cb61"]]);export{Zg as default};
