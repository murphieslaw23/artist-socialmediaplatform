import{k as te,j as X,$ as Ye,l as Se,r as p,o,p as a,P as le,Q as ae,q as t,e as d,w as Z,s as V,t as r,x as n,G as Q,b as M,v as A,K as S,u as e,c as H,L as k,H as ee,y as ze,M as $e,N as xe,Y as Me,Z as Ce,C as Ie,F as de,E as Re,m as me,D as je,a2 as Ke,O as Je}from"./entry.15cb71bb.js";import{J as Qe,u as Ae}from"./client-only.407c3fea.js";import{M as we,_ as pe,b as Be,d as ge,P as ie,S as be,c as _e,e as ke,f as Ze}from"./ModalView.8a38a44a.js";import{u as Le,L as Xe}from"./Layout.69b2e7d1.js";import{u as et}from"./useFeed.a800ee91.js";import{I as Te,F as tt}from"./FeedModalView.b0e0320b.js";import{_ as oe}from"./_plugin-vue_export-helper.a1a6add7.js";import{W as Ee}from"./WorkList.d666493b.js";import{_ as re}from"./LoadingEmptyErrorMessage.31b597d2.js";import{u as ot}from"./useSetting.56adc0e9.js";import{u as Oe}from"./useI18n.93778397.js";import{u as Fe}from"./useUser.a738e6b7.js";import{U as Ue}from"./UserList.ab91f14f.js";const ye=m=>($e("data-v-862696fe"),m=m(),xe(),m),st={class:"mx-auto w-full md:w-2/3"},lt={class:"flex flex-row mb-2 rounded-lg border-none shadow-none theme-color-secondary"},at={class:"w-full"},it={key:0,class:"p-4 user-info"},nt=["src"],rt={class:"name"},dt=ye(()=>t("br",null,null,-1)),ct=ye(()=>t("span",{class:"mx-1"},"\xB7",-1)),ut={class:"text-xxs"},mt={class:"px-2 md:px-4"},ft=["id","innerHTML"],pt=["id","onClick"],vt={key:1,class:"my-2 w-full rounded-md theme-color"},ht={key:0,class:"p-2 md:p-4 user-info"},wt=["src"],gt={class:"name"},bt=ye(()=>t("br",null,null,-1)),_t=ye(()=>t("span",{class:"mx-1"},"\xB7",-1)),kt={class:"px-2 mt-2 md:px-4"},yt={class:"text-xs font-semibold"},$t=["id"],xt=["id","onClick"],Mt=["onClick"],Ct={key:0,class:"p-2 mx-auto w-full text-center rounded-md opacity-90 theme-color"},It={class:"mx-auto mt-2 primary-button"},Lt={key:0,class:"p-2 mx-auto w-full text-center rounded-md opacity-90 theme-color"},Et={class:"mx-auto mt-2 primary-button"},At={class:"float-right mx-4 mt-2 interactions"},Ft={key:0,class:"reactions"},Pt=["onClick"],Tt=["onClick"],St={class:"option dropdown"},zt=["onClick"],Rt={class:"option-dropdown dropdown-menu"},jt={id:"option-dropdown-items",class:"w-52 toggler","aria-labelledby":"option-dropdown-buttons",role:"menu"},Bt={class:"menu-wrapper"},Ot={key:0,class:"custom-divider"},Ut=["to"],Vt={class:"mx-auto text-center"},Dt={class:"mx-auto mt-10 text-center"},Nt=ye(()=>t("b",null,"(\u3186_\u3186)",-1)),Ht={class:"mx-auto text-center"},qt={id:"chronological-feed-modal",class:"modal work-view"},Wt={id:"artwork-modal",class:"modal work-view"},Gt={__name:"Feeds",props:{userId:{type:Number,default:0}},setup(m){const P=m,g=te(),{oApiConfiguration:i,fetchOptions:F}=X(),v=et(i,F()),{generateArtworkThumb:w}=Ye();Se();const b=p(0),_=p(0),u=(f,z)=>{b.value=f,_.value=z},j=p([]),y=p({page:0,perPage:10}),l=async({loaded:f})=>{const[z,U]=await v.getFeedByUserId({userId:P.userId,pagination:{page:y.value.page,perPage:y.value.perPage}});y.value.page+=1;for(let c=0;c<z.feeds.length;c++){const W=z.feeds[c];if(W.liked&&I.value.push(W.id),W.artworks){W.artworks.images=[],W.artworks.apply_explicit_filter=!1;for(let D=0;D<W.artworks.artwork_assets.length;D++)if(D<=3){const Y=await w(W.artworks.artwork_assets[D].bucket,W.artworks.artwork_assets[D].filename,"feed");W.artworks.images.push(Y)}W.artworks!=null&&(!g.loggedIn&&W.artworks.is_explicit||W.artworks.is_explicit&&!g.user.user_settings.show_explicit)&&(W.artworks.apply_explicit_filter=!0)}j.value.push(W)}f(z.feeds.length,y.value.perPage)},E=p(null),h=f=>{E.value.view(f),ee().openModal("chronological-feed-modal")},C=p(null),x=(f,z,U)=>{z?j.value[U].artworks.apply_explicit_filter=!1:(C.value.view(f),ee().openModal("artwork-modal"))},I=p([]),B=async f=>{const[z,U]=await v.like({feedId:f});if(z){I.value.push(f);const c=document.getElementById(`profileFeedLikeButton-${f}`);c.classList.add("animate-bounce"),setInterval(()=>{c.classList.remove("animate-bounce")},2500)}},s=async f=>{const[z,U]=await v.unlike({feedId:f});if(z){const c=I.value.indexOf(f);I.value.splice(c,1)}},O=(f,z,U,c)=>{Be().readMore(f,z,U,c)},G=async()=>{const[f,z]=await v.remove(b.value);f&&j.value.splice(_.value,1)};return(f,z)=>{const U=ze;return o(),a("div",st,[(o(!0),a(le,null,ae(e(j),(c,W)=>(o(),a("div",{key:c.id},[t("div",lt,[t("div",at,[c.users?(o(),a("div",it,[d(U,{to:"/profile/"+c.users.username},{default:Z(()=>[t("img",{class:"avatar",src:f.avatarCoverUrl(c.users.avatar_bucket,c.users.avatar_filename),onError:z[0]||(z[0]=(...D)=>f.imageLoadError&&f.imageLoadError(...D))},null,40,nt)]),_:2},1032,["to"]),t("div",rt,[d(U,{to:"/profile/"+c.users.username,class:"fullname"},{default:Z(()=>[V(r(c.users.name),1)]),_:2},1032,["to"]),dt,d(U,{to:"/profile/"+c.users.username,class:"username hover:underline"},{default:Z(()=>[V(" @"+r(c.users.username),1)]),_:2},1032,["to"]),ct,t("span",ut,r(f.formatDate(c.scheduled_post?c.scheduled_post:c.created_at,!0)),1)])])):n("",!0),t("div",mt,[t("p",{id:"feed-text-"+c.id,innerHTML:c.text.split("<br>").length>3&&c.text.length>300?`${c.text.slice(0,300)}...`:c.text},null,8,ft),c.text.split("<br>").length>3&&c.text.length>300?(o(),a("a",{key:0,id:"feed-read-more-"+c.id,class:"href",onClick:Q(D=>O(c.text,c.id,"feed-read-more-","feed-text-"),["prevent"])},r(f.$t("readMore")),9,pt)):n("",!0),c.artworks?(o(),a("div",vt,[c.artworks.users?(o(),a("div",ht,[d(U,{to:"/profile/"+c.artworks.users.username},{default:Z(()=>[t("img",{class:"avatar",src:f.avatarCoverUrl(c.artworks.users.avatar_bucket,c.artworks.users.avatar_filename),onError:z[1]||(z[1]=(...D)=>f.imageLoadError&&f.imageLoadError(...D))},null,40,wt)]),_:2},1032,["to"]),t("div",gt,[d(U,{to:"/profile/"+c.artworks.users.username,class:"fullname hover:href"},{default:Z(()=>[V(r(c.artworks.users.name),1)]),_:2},1032,["to"]),bt,d(U,{to:"/profile/"+c.artworks.users.username,class:"hover:underline text-xxs"},{default:Z(()=>[V(" @"+r(c.artworks.users.username),1)]),_:2},1032,["to"]),_t,d(U,{to:"/a/"+c.artworks.id,class:"hover:underline text-xxs"},{default:Z(()=>[V(r(f.formatDate(c.artworks.scheduled_post?c.artworks.scheduled_post:c.artworks.created_at,!0)),1)]),_:2},1032,["to"])])])):n("",!0),t("div",kt,[t("span",yt,r(c.artworks.title),1),M(t("p",null,[t("span",{id:"feed-description-"+c.artworks.id},r(c.artworks.description.length>300?`${c.artworks.description.slice(0,300)}...`:c.artworks.description),9,$t),c.artworks.description.length>300?(o(),a("a",{key:0,id:"feed-read-more-"+c.artworks.id,class:"href",onClick:Q(D=>O(c.artworks.description,c.artworks.id,"feed-read-more-","feed-description-"),["prevent"])},r(f.$t("readMore")),9,xt)):n("",!0)],512),[[A,c.artworks.description]])]),t("div",null,[f.isMobile()?n("",!0):(o(),a("div",{key:0,class:S(["p-2",{"cursor-pointer":!c.artworks.apply_explicit_filter}]),onClick:Q(D=>x(c.artworks.id,c.artworks.apply_explicit_filter,W),["prevent"])},[t("div",{class:S(["overflow-hidden relative p-2 rounded-md",{"md:mx-2":c.artworks.apply_explicit_filter}])},[d(Te,{class:S([{"blur-3xl unclickable":c.artworks.apply_explicit_filter},c.artworks.apply_explicit_filter?"brightness-50":"brightness-100"]),work:c.artworks},null,8,["class","work"]),c.artworks.apply_explicit_filter?(o(),a("div",Ct,[t("div",null,r(e(g).loggedIn?f.$t("explicitContentAlert"):f.$t("explicitContentAlertForGuest")),1),t("button",It,r(f.$t("explicitShowMeThisContent")),1)])):n("",!0)],2)],10,Mt)),f.isMobile()?(o(),H(U,{key:1,to:c.artworks.apply_explicit_filter?null:"/a/"+c.artworks.id,onClick:Q(D=>x(c.artworks.id,c.artworks.apply_explicit_filter,W),["prevent"]),class:"cursor-pointer"},{default:Z(()=>[t("div",{class:S(["overflow-hidden relative p-2 rounded-md",{"m-2":c.artworks.apply_explicit_filter}])},[d(Te,{class:S([{"blur-3xl unclickable":c.artworks.apply_explicit_filter},c.artworks.apply_explicit_filter?"brightness-50":"brightness-100"]),work:c.artworks},null,8,["class","work"]),c.artworks.apply_explicit_filter?(o(),a("div",Lt,[t("div",null,r(e(g).loggedIn?f.$t("explicitContentAlert"):f.$t("explicitContentAlertForGuest")),1),t("button",Et,r(f.$t("explicitShowMeThisContent")),1)])):n("",!0)],2)]),_:2},1032,["to","onClick"])):n("",!0)])])):n("",!0)]),t("div",At,[e(g).loggedIn?(o(),a("div",Ft,[t("span",{class:"leading-8",onClick:D=>e(I).includes(c.id)?s(c.id):B(c.id)},[M(d(k,{id:"profileFeedLikeButton-"+c.id,name:"i-ion-heart",class:"mr-1 text-red-500 hover:text-red-500"},null,8,["id"]),[[A,e(I).includes(c.id)]]),M(d(k,{name:"i-ri-heart-3-line",class:"mr-1 icon-color hover:text-red-500"},null,512),[[A,!e(I).includes(c.id)]]),V(" "+r(f.thousand(c._count.feed_likes)),1)],8,Pt),t("span",{class:"leading-8",onClick:Q(D=>h(c.id),["prevent"])},[d(k,{name:"i-mdi-comment-multiple-outline",class:"mr-1 icon-color hover:text-blue-500"}),V(" "+r(f.thousand(c._count.feed_comments)),1)],8,Tt),t("div",St,[t("button",{type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"option-dropdown-items",onClick:D=>u(c.id,W)},[t("span",null,[d(k,{name:"i-uit-ellipsis-v",class:"align-middle icon icon-color"})])],8,zt),t("div",Rt,[t("div",jt,[t("div",Bt,[d(U,{to:"/feed/"+c.id,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:Z(()=>[d(k,{name:"i-fluent-arrow-enter-20-filled",class:"mr-2 text-base"}),V(" "+r(f.$t("open")),1)]),_:2},1032,["to"]),d(U,{to:"/feed/"+c.id,target:"_blank",class:"flex z-20 py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:Z(()=>[d(k,{name:"i-ci-external-link",class:"mr-2 text-base"}),V(" "+r(f.$t("openInNewTab")),1)]),_:2},1032,["to"]),e(g).loggedIn&&c.user_id&&e(g).user.id===c.user_id?(o(),a("div",Ot)):n("",!0),e(g).loggedIn&&c.user_id&&e(g).user.id===c.user_id?(o(),a("div",{key:1,to:"/feed/"+c.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 cursor-pointer bg-danger hover:button-color parent-icon hover:text-white",onClick:z[2]||(z[2]=D=>f.openModal("profile-feed-deletion-confirm-modal"))},[d(k,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),V(" "+r(f.$t("delete")),1)],8,Ut)):n("",!0)])])])])])):n("",!0)])])])]))),128)),d(e(Qe),{load:l},{loading:Z(()=>[t("div",Vt,[d(k,{name:"i-line-md-loading-twotone-loop",class:"text-3xl"})])]),"no-results":Z(()=>[t("div",Dt,[Nt,V(" "+r(f.$t("feeds.haventPostedAnyUpdate")),1)])]),"no-more":Z(()=>[t("div",Ht,r(f.$t("youHaveReachedTheEnd")),1)]),_:1}),t("div",qt,[d(tt,{ref_key:"chronologicalFeedModalViewRef",ref:E,section:"chronological-feed"},null,512)]),t("div",Wt,[d(we,{ref_key:"artworkModalViewRef",ref:C,section:"artwork"},null,512)]),d(pe,{id:"profile-feed-deletion-confirm-modal","modal-id":"profile-feed-deletion-confirm-modal",message:`${f.$t("alert.areYouSure")} ${f.$t("alert.youCannotUndoThisAction")}`,class:"modal",onOnAccept:z[3]||(z[3]=c=>G())},null,8,["message"])])}}},Yt=oe(Gt,[["__scopeId","data-v-862696fe"]]);const Kt={id:"lists"},Jt=["id"],Qt={__name:"Artworks",props:{userId:{type:Number,default:0},manageMode:{type:Boolean,default:!1}},emits:["feedSelectedItems","onEmpty"],setup(m,{emit:P}){const g=m,{oApiConfiguration:i,fetchOptions:F}=X(),v=Ae(i,F()),w="profile",b=p(!0);Me(()=>{_()});const _=async()=>{const[U,c]=await y();u.value=U,c.record_total<=j.value.perPage&&h(),c.record_total===0&&B()},u=p([]),j=p({perPage:24,page:0}),y=async()=>{j.value.page===0&&(b.value=!0);const[U,c,W]=await v.getUserArtworks({userId:g.userId,pagination:{page:j.value.page,perPage:j.value.perPage}});if(W)O();else return c.record_total<=j.value.perPage&&h(),c.record_total===0&&B(),j.value.page+=1,l(),[U,c]},l=()=>{b.value=!1,I.value=!1,s.value=!1},E=p(!0),h=()=>{E.value=!1},C=p({delay:!1}),x=async()=>{C.value.delay=!0;const[U,c]=await y();for(let W=0;W<U.length;W++)u.value.push(U[W]);C.value.delay=!1,dataPagination.next_previous.next_page||h(),dataPagination.next_previous.next_page&&dataPagination.current_page===C.maxLoad&&(h(),C.showDiscoveryButton=!0)},I=p(!1),B=()=>{I.value=!0,h(),P("onEmpty")},s=p(!1),O=()=>{b.value=!1,s.value=!0,h()},G=p(null),f=(U,c=!1)=>{G.value.view(U,c),ee().openModal(w+"-modal")},z=U=>{P("feedSelectedItems",U)};return(U,c)=>(o(),a("div",Kt,[M(t("div",null,[(o(),H(Ce,null,[M(d(Ee,{"section-class":"work-grid",works:e(u),view:f,"manage-mode":m.manageMode,onFeedManageList:z},null,8,["works","manage-mode"]),[[A,!e(I)]])],1024)),M(t("div",{class:S(["primary-button",e(C).delay?"animate-pulse":""]),onClick:x},r(U.$t("loadMore")),3),[[A,e(E)]])],512),[[A,!e(b)]]),d(re,{loading:e(b),empty:e(I),error:e(s),fetch:y,"background-color":"theme-color-secondary",class:"mt-2"},null,8,["loading","empty","error"]),t("div",{id:w+"-modal",class:"modal work-view"},[M(d(we,{ref_key:"profileModalViewRef",ref:G,section:w},null,512),[[A,!e(b)]])],8,Jt)]))}},Zt=oe(Qt,[["__scopeId","data-v-dad58f66"]]);const Xt={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},eo={class:"title"},to=["name"],oo=["placeholder"],so=["placeholder"],lo=["for"],ao=t("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),io={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},no=t("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),ro=[no],co={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},uo=t("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),mo=[uo],fo={class:"flex flex-row gap-x-1"},po={class:"flex flex-row gap-2 justify-end mt-2"},vo={type:"submit",class:"primary-button"},ho={__name:"AlbumFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(m,{emit:P}){const g=m,i=te(),{t:F}=Ie(),{oApiConfiguration:v,fetchOptions:w}=X(),b=ge(v,w()),_="create-album-form",u=p({title:"",description:"",isPublic:1,category:"artwork"}),j=async()=>{Le().validate(_,F);try{let y=!1,l={};if(g.category){const[E,h,C]=await b.createAlbum(g.category,u.value);y=E,l=h}y&&(ee().closeModal(g.modalId),P("created",l))}catch{}};return(y,l)=>(o(),a("div",null,[t("div",Xt,[t("div",null,[t("span",eo,r(y.$t("albums.create.form.title")),1),t("form",{id:_,class:"mt-2",onSubmit:l[4]||(l[4]=Q(E=>j(),["prevent"]))},[t("n-validate",{for:"title",name:y.$t("title")},[M(t("input",{"onUpdate:modelValue":l[0]||(l[0]=E=>e(u).title=E),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:y.$t("title")},null,8,oo),[[de,e(u).title]])],8,to),M(t("textarea",{"onUpdate:modelValue":l[1]||(l[1]=E=>e(u).description=E),class:"form-input theme-color-secondary",placeholder:y.$t("description"),"data-gramm":"false"},null,8,so),[[de,e(u).description]]),t("label",{for:e(u).isPublic?"checked":"unchecked",class:"inline-flex items-center"},[t("span",{class:"relative cursor-pointer",onClick:l[2]||(l[2]=E=>e(i).i502p00r0?e(u).isPublic=!e(u).isPublic:e(u).isPublic=!0)},[ao,e(u).isPublic?(o(),a("span",io,ro)):n("",!0),e(u).isPublic?n("",!0):(o(),a("span",co,mo))]),t("div",fo,[t("span",{class:S(["ml-2 inline-block",{"leading-6":!e(i).i502p00r0}])},r(y.$t("private")),3),e(i).i502p00r0?n("",!0):(o(),H(ie,{key:0}))])],8,lo),t("div",po,[t("button",{class:"cancel-button",onClick:l[3]||(l[3]=Q(E=>y.closeModal(m.modalId),["prevent"]))},r(y.$t("cancel")),1),t("button",vo,r(y.$t("create")),1)])],32)])])]))}};const wo={id:"lists"},go={class:"p-4 mb-2 w-full rounded-md theme-color-secondary"},bo={class:"mb-2 text-base font-bold"},_o={class:"mb-2"},ko={class:"italic"},yo=["id"],$o={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1}},emits:["onAlbumEmpty","feedManageList"],setup(m,{expose:P,emit:g}){const i=m,{oApiConfiguration:F,fetchOptions:v}=X(),w=ge(F,v()),b=p(i.id);Re(()=>i.id,(f,z)=>{b.value=f}),me(async()=>{await j()});const _=p(!0),u=p({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:24},list:[],empty:!1}),j=async()=>{_.value=!0,await y(),await l(),_.value=!1},y=async()=>{const[f,z]=await w.getInfo(b.value);u.value.info=f.data},l=async()=>{const[f,z,U]=await w.listAlbumItems({albumId:b.value,pagination:{page:u.value.pagination.page,perPage:u.value.pagination.page===0?u.value.pagination.firstLoad:u.value.pagination.perPage}});z?u.value.pagination.page===0?u.value.pagination.page=u.value.pagination.firstLoad/u.value.pagination.perPage:u.value.pagination.page+=u.value.pagination.page!==0?1:2:u.value.loadMore=!1,f!==null&&f.length?(f.forEach(c=>{u.value.list.push(c.artworks)}),g("onAlbumEmpty",!1)):(u.value.empty=!0,g("onAlbumEmpty",!0))},E=()=>{u.value.loadMore=!0,u.value.pagination.page=0,u.value.list=[]},h=p([]),C=f=>{h.value=f,g("feedManageList",f)},x=p(!1);let I;const B=async()=>{const[f,z]=await w.removeItems(i.id,h.value);f&&(_e().splash(I,x,"item-removed-alert"),E(),await j())},s=p("album"),O=p(null),G=(f,z=!1)=>{O.value.view(f,z),ee().openModal(s.value+"-modal")};return P({fetchInfo:y,removeItems:B}),(f,z)=>(o(),a("div",wo,[t("div",go,[t("div",bo,r(e(u).info.name),1),t("div",_o,r(e(u).info.description),1),t("div",null,[t("b",null,r(f.$t("private"))+":",1),V(),t("span",ko,r(e(u).info.is_public?f.$t("no"):f.$t("yes")),1)]),t("div",null,[t("b",null,r(f.$t("createdAt")),1),V(" "+r(f.formatDate(e(u).info.created_at)),1)])]),M(t("div",null,[(o(),H(Ce,null,[M(d(Ee,{"section-class":"work-grid",works:e(u).list,view:G,"manage-mode":m.manageMode,onFeedManageList:C},null,8,["works","manage-mode"]),[[A,!e(u).empty]])],1024)),M(t("div",{class:"primary-button",onClick:z[0]||(z[0]=U=>l())},r(f.$t("loadMore")),513),[[A,e(u).loadMore]])],512),[[A,!e(_)]]),d(re,{loading:e(_),empty:e(u).empty,error:!1,fetch:j,"background-color":"theme-color-secondary"},null,8,["loading","empty"]),e(_)?n("",!0):(o(),a("div",{key:0,id:e(s)+"-modal",class:"modal work-view"},[d(we,{ref_key:"albumModalViewRef",ref:O,section:e(s)},null,8,["section"])],8,yo)),M(d(be,{id:"item-removed-alert",text:f.$t("albums.itemRemoved")},null,8,["text"]),[[A,e(x)]])]))}},xo=oe($o,[["__scopeId","data-v-060a0096"]]),Mo={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Co={class:"title"},Io=["name"],Lo=["placeholder"],Eo=["placeholder"],Ao=["for"],Fo=t("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),Po={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},To=t("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),So=[To],zo={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Ro=t("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),jo=[Ro],Bo={class:"flex flex-row gap-x-1"},Oo={class:"flex flex-row gap-2 justify-end mt-2"},Uo={type:"submit",class:"primary-button"},Vo={__name:"EditForm",props:{albumId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(m,{expose:P,emit:g}){const i=m,F=te(),{oApiConfiguration:v,fetchOptions:w}=X(),b=ge(v,w()),{t:_}=Ie(),u=p(!0),j=async C=>{if(C){h(),u.value=!0;const[x,I]=await b.getInfo(C),B=x.data;l.value.id=C,l.value.name=B.name,l.value.description=B.description,l.value.isPublic=!!B.is_public,u.value=!1}},y="update-album-form",l=p({id:0,name:"",description:"",isPublic:!1}),E=async()=>{Le().validate(y,_);const[C,x]=await b.update({id:l.value.id,name:l.value.name,description:l.value.description,isPublic:l.value.isPublic?1:0});x||(ee().closeModal(i.modalId),g("updated",l.value),h())},h=()=>{l.value={id:0,name:"",description:"",isPublic:0}};return P({fetch:j}),(C,x)=>(o(),a("div",null,[t("div",Mo,[t("div",null,[t("span",Co,r(C.$t("albums.edit.form.title")),1),e(u)?n("",!0):(o(),a("form",{key:0,id:y,class:"mt-2",onSubmit:x[4]||(x[4]=Q(I=>E(),["prevent"]))},[t("n-validate",{for:"title",name:C.$t("title")},[M(t("input",{"onUpdate:modelValue":x[0]||(x[0]=I=>e(l).name=I),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:C.$t("title")},null,8,Lo),[[de,e(l).name]])],8,Io),M(t("textarea",{"onUpdate:modelValue":x[1]||(x[1]=I=>e(l).description=I),class:"form-input theme-color-secondary",placeholder:C.$t("description"),"data-gramm":"false"},null,8,Eo),[[de,e(l).description]]),t("label",{for:e(l).isPublic?"checked":"unchecked",class:"inline-flex items-center"},[t("span",{class:"relative cursor-pointer",onClick:x[2]||(x[2]=I=>e(F).i502p00r0?e(l).isPublic=!e(l).isPublic:e(l).isPublic=!0)},[Fo,e(l).isPublic?(o(),a("span",Po,So)):n("",!0),e(l).isPublic?n("",!0):(o(),a("span",zo,jo))]),t("div",Bo,[t("span",{class:S(["ml-2",{"leading-6":!e(F).i502p00r0}])},r(C.$t("private")),3),d(ie)])],8,Ao),t("div",Oo,[t("button",{class:"cancel-button",onClick:x[3]||(x[3]=Q(I=>C.closeModal(m.modalId),["prevent"]))},r(C.$t("cancel")),1),t("button",Uo,r(C.$t("save")),1)])],32))])])]))}},Ve=""+new URL("folder.11be08fa.png",import.meta.url).href;const De=m=>($e("data-v-b9b7060a"),m=m(),xe(),m),Do={class:"mb-2"},No={key:0},Ho=["src"],qo={key:1},Wo={class:"relative text-center"},Go={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Yo={class:"overflow-hidden rounded-md"},Ko=["src"],Jo={key:2,class:"imgrid"},Qo={class:"relative text-center"},Zo={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Xo={class:"overflow-hidden rounded-md"},es=["src"],ts=De(()=>t("img",{class:"bg-gray-300 border-none"},null,-1)),os=De(()=>t("img",{class:"bg-gray-300 border-none"},null,-1)),ss={key:3,class:"imgrid"},ls={class:"relative text-center"},as={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},is={class:"overflow-hidden rounded-md"},ns=["src"],rs={key:4,class:"imgrid"},ds={class:"relative text-center"},cs={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},us={class:"overflow-hidden rounded-md"},ms=["src"],fs={key:5,class:"imgrid"},ps={key:0,class:"relative text-center"},vs={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},hs={class:"overflow-hidden rounded-md"},ws=["src"],gs={key:1,class:"relative text-center"},bs={class:"absolute top-1/2 left-1/2 z-10 text-lg font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 md:text-xl lg:text-3xl"},_s={class:"overflow-hidden rounded-md"},ks=["src"],ys={__name:"ArtworkThumbnail",props:{album:{type:Object,default:()=>{}}},setup(m){const P=te(),g={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(i,F)=>(o(),a("div",Do,[!m.album.album_has_artworks||m.album._count.album_has_artworks===0?(o(),a("div",No,[t("img",{src:e(Ve),class:"rounded"},null,8,Ho)])):n("",!0),m.album.album_has_artworks&&m.album._count.album_has_artworks===1?(o(),a("div",qo,[t("div",Wo,[i.applyExplicitFilter(e(P),m.album.album_has_artworks[0].artworks.is_explicit)?(o(),a("span",Go,r(i.$t("explicitContent")),1)):n("",!0),t("div",Yo,[m.album.album_has_artworks&&m.album._count.album_has_artworks===1?(o(),a("img",{key:0,src:i.artworkThumb(m.album.album_has_artworks[0].artworks.artwork_assets[0].bucket,m.album.album_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:S(["object-cover object-top rounded",{"blur-sm brightness-50":i.applyExplicitFilter(e(P),m.album.album_has_artworks[0].artworks.is_explicit)}]),style:{"aspect-ratio":"1/1"},onError:F[0]||(F[0]=(...v)=>i.imageLoadError&&i.imageLoadError(...v))},null,42,Ko)):n("",!0)])])])):n("",!0),m.album.album_has_artworks&&m.album._count.album_has_artworks===2?(o(),a("div",Jo,[(o(!0),a(le,null,ae(m.album.album_has_artworks,(v,w)=>(o(),a("div",{key:w,class:S(g[2][w])},[t("div",Qo,[i.applyExplicitFilter(e(P),v.artworks.is_explicit)?(o(),a("span",Zo,r(i.$t("explicitContent")),1)):n("",!0),t("div",Xo,[t("img",{class:S(["theme-color",{"blur-sm brightness-50":i.applyExplicitFilter(e(P),v.artworks.is_explicit)}]),src:i.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),onError:F[1]||(F[1]=(...b)=>i.imageLoadError&&i.imageLoadError(...b))},null,42,es)])])],2))),128)),ts,os])):n("",!0),m.album.album_has_artworks&&m.album._count.album_has_artworks===3?(o(),a("div",ss,[(o(!0),a(le,null,ae(m.album.album_has_artworks,(v,w)=>(o(),a("div",{key:w,class:S(g[3][w])},[t("div",ls,[i.applyExplicitFilter(e(P),v.artworks.is_explicit)?(o(),a("span",as,r(i.$t("explicitContent")),1)):n("",!0),t("div",is,[t("img",{class:S(["theme-color",{"blur-sm brightness-50":i.applyExplicitFilter(e(P),v.artworks.is_explicit)}]),src:i.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),onError:F[2]||(F[2]=(...b)=>i.imageLoadError&&i.imageLoadError(...b))},null,42,ns)])])],2))),128))])):n("",!0),m.album.album_has_artworks&&m.album._count.album_has_artworks===4?(o(),a("div",rs,[(o(!0),a(le,null,ae(m.album.album_has_artworks,(v,w)=>(o(),a("div",{key:w},[t("div",ds,[i.applyExplicitFilter(e(P),v.artworks.is_explicit)?(o(),a("span",cs,r(i.$t("explicitContent")),1)):n("",!0),t("div",us,[t("img",{class:S(["theme-color",{"blur-sm brightness-50":i.applyExplicitFilter(e(P),v.artworks.is_explicit)}]),src:i.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),onError:F[3]||(F[3]=(...b)=>i.imageLoadError&&i.imageLoadError(...b))},null,42,ms)])])]))),128))])):n("",!0),m.album.album_has_artworks&&m.album._count.album_has_artworks>4?(o(),a("div",fs,[(o(!0),a(le,null,ae(m.album.album_has_artworks,(v,w)=>(o(),a("div",{key:w},[w<3?(o(),a("div",ps,[i.applyExplicitFilter(e(P),v.artworks.is_explicit)?(o(),a("span",vs,r(i.$t("explicitContent")),1)):n("",!0),t("div",hs,[t("img",{class:S(["theme-color",{"blur-sm brightness-50":i.applyExplicitFilter(e(P),v.artworks.is_explicit)}]),src:i.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),onError:F[4]||(F[4]=(...b)=>i.imageLoadError&&i.imageLoadError(...b))},null,42,ws)])])):(o(),a("div",gs,[t("span",bs,"+"+r(m.album._count.album_has_artworks-4),1),t("div",_s,[t("img",{src:i.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),class:S(["z-0 brightness-50",{"blur-sm brightness-50":i.applyExplicitFilter(e(P),v.artworks.is_explicit)}]),onError:F[5]||(F[5]=(...b)=>i.imageLoadError&&i.imageLoadError(...b))},null,42,ks)])]))]))),128))])):n("",!0)]))}},$s=oe(ys,[["__scopeId","data-v-b9b7060a"]]);const xs={class:"mb-2 w-full"},Ms={key:0,class:"flex flex-row justify-between"},Cs={class:"flex flex-row"},Is={key:0},Ls={key:1,class:"flex flex-row justify-between"},Es={class:"flex flex-row"},As={class:"flex flex-row gap-2"},Fs={class:"flex flex-row gap-2"},Ps={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},Ts=["onClick"],Ss={class:"flex flex-row pb-1 mt-4 font-bold"},zs={class:"text-xs font-normal"},Rs={__name:"Album",props:{userId:{type:Number,default:0}},setup(m){const P=m,g=te(),{oApiConfiguration:i,fetchOptions:F}=X(),v=ge(i,F());Me(()=>{j()}),me(()=>{h()});const w=p(!0),b=p("artwork"),_=p(0),u=p(!1),j=async()=>{if(g.i502p00r0)u.value=!0;else{const[T,R]=await v.proCanCreateAlbum({type:b.value});R?u.value=!1:u.value=T}},y=p([]),l=p({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),E=p({artwork:0}),h=async()=>{w.value=!0;const[T,R,q]=await v.fetchAlbums(P.userId,b.value,l.value.pagination.page===0?l.value.pagination.firstLoad:l.value.pagination.perPage,l.value.pagination.page);if(q)s();else{T.length||(l.value.manageMode=!1,I()),T.forEach(fe=>{y.value.push(fe)}),l.value.pagination.page+=l.value.pagination.firstLoad/l.value.pagination.perPage,l.value.showLoadMore=R;const[ue]=await v.countArtworkAlbums(P.userId);E.value.artwork=ue}w.value=!1},C=async()=>await h(),x=p(!1),I=()=>{x.value=!0,l.value.showLoadMore=!1},B=p(!1),s=()=>{w.value=!1,B.value=!0,l.value.showLoadMore=!1},O=async()=>{w.value=!1,x.value=!1,B.value=!1,l.value.pagination.page=0,y.value=[],await h()},G=p(!1);let f;const z=async()=>{await j(),_e().splash(f,G,"created-alert"),await O()},U=p(null),c=()=>{U.value.fetch(_.value),ee().openModal("album-edit-form-modal")},W=p(null),D=T=>{W.value.fetchInfo(),y.value.forEach(R=>{R.id===T.id&&(R.name=T.name,R.description=T.description,R.is_public=T.isPublic)})},Y=()=>{W.value.removeItems()},J=p([]),ve=T=>{J.value=T},K=async()=>{if(_.value!==0){const[T,R]=await v.deleteAlbum(_.value);T&&(await j(),_.value=0,O())}},ne=T=>{l.value.showManageButton=!T,l.value.manageMode=!1},ce=()=>{_.value=0,l.value.showManageButton=!1,l.value.manageMode=!1};return(T,R)=>(o(),a("div",null,[t("div",xs,[e(_)?n("",!0):(o(),a("div",Ms,[t("div",Cs,[t("div",{class:S(["ml-0 primary-button theme-color-secondary",{"button-color text-white":e(b)==="artwork"}]),onClick:R[0]||(R[0]=q=>b.value="artwork")},[V(r(T.$t("artworks.artwork"))+" ",1),t("span",{class:S(["px-1 ml-2 font-normal rounded",e(b)==="artwork"?"theme-color":"button-color text-white"])},r(T.thousand(e(E).artwork)),3)],2)]),e(g).loggedIn&&e(g).user.id===m.userId?(o(),a("div",Is,[t("div",{class:"flex flex-row icon-button",onClick:R[1]||(R[1]=q=>e(u)?T.openModal("album-form-modal"):null)},[d(k,{name:"i-ion-add-outline"}),e(u)?n("",!0):(o(),H(ie,{key:0,class:"ml-1"}))])])):n("",!0)])),e(_)?(o(),a("div",Ls,[t("div",null,[t("div",{class:"ml-0 icon-button",onClick:R[2]||(R[2]=q=>ce())},[d(k,{name:"i-ic-baseline-keyboard-arrow-left"})])]),t("div",Es,[M(t("div",As,[t("button",{onClick:R[3]||(R[3]=q=>e(l).manageMode=!e(l).manageMode),class:S(["action-button",e(l).manageMode?"danger-button":"secondary-button"])},[d(k,{name:e(l).manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),V(" "+r(e(l).manageMode?T.$t("quit"):T.$t("manage")),1)],2),M(t("button",{onClick:R[4]||(R[4]=q=>e(J).length>0?T.openModal("item-deletion-confirm-modal"):null),class:S(["flex flex-row",e(J).length>0?"danger-button":"disabled-button cursor-not-allowed"])},[d(k,{name:"i-akar-icons-trash-bin"}),V(" "+r(T.$t("albums.removeSelected")),1)],2),[[A,e(l).manageMode]])],512),[[A,e(g).loggedIn&&e(g).user.id===m.userId&&e(l).showManageButton]]),M(t("div",Fs,[t("button",{class:"icon-button",onClick:R[5]||(R[5]=q=>c())},[d(k,{name:"i-ph-gear-six"})]),t("button",{class:"danger-button-color b-button",onClick:R[6]||(R[6]=q=>T.openModal("album-deletion-confirm-modal"))},[d(k,{name:"i-akar-icons-trash-bin"})])],512),[[A,e(g).loggedIn&&e(g).user.id===m.userId&&!e(l).manageMode]])])])):n("",!0),M(t("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},r(T.$t("albums.manageModeActiveMessage")),513),[[A,e(l).manageMode]])]),e(_)?n("",!0):(o(),a("div",Ps,[(o(!0),a(le,null,ae(e(y),q=>(o(),a("div",{key:q.id,class:S(["p-3 rounded-md cursor-pointer",q.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:ue=>_.value=q.id},[q.type==="artwork"?(o(),H($s,{key:0,album:q},null,8,["album"])):n("",!0),t("div",Ss,[q.is_public?n("",!0):(o(),H(k,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),t("span",zs,r(q.name),1)])],10,Ts))),128))])),e(l).showLoadMore&&!e(_)?(o(),a("div",{key:1,class:"mt-4 w-full primary-button",onClick:C},r(T.$t("loadMore")),1)):n("",!0),d(re,{loading:e(w),empty:e(x),error:e(B),fetch:h,"background-color":"theme-color-secondary"},null,8,["loading","empty","error"]),!e(w)&&!e(_)?(o(),H(ho,{key:2,id:"album-form-modal","modal-id":"album-form-modal",category:e(b),class:"modal",onCreated:z},null,8,["category"])):n("",!0),M(d(be,{id:"created-alert",text:T.$t("albums.created")},null,8,["text"]),[[A,e(G)]]),!e(w)&&e(_)?(o(),H(Vo,{key:3,id:"album-edit-form-modal",ref_key:"albumEditFormModalRef",ref:U,"modal-id":"album-edit-form-modal","album-id":e(_),class:"modal",onUpdated:D},null,8,["album-id"])):n("",!0),d(pe,{id:"album-deletion-confirm-modal","modal-id":"album-deletion-confirm-modal",message:"All saved items in this album will be deleted. Do you still want to delete this album?",class:"modal",onOnAccept:K},null,8,["message"]),d(pe,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this album. Do you still want to remove them?",class:"modal",onOnAccept:Y},null,8,["message"]),e(_)&&!e(w)?(o(),H(xo,{key:4,id:e(_),ref_key:"albumDetailRef",ref:W,"manage-mode":e(l).manageMode,onOnAlbumEmpty:ne,onFeedManageList:ve},null,8,["id","manage-mode"])):n("",!0)]))}},js=oe(Rs,[["__scopeId","data-v-30b0e13e"]]);const Bs={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Os={class:"title"},Us=["placeholder"],Vs=["placeholder"],Ds=["for"],Ns=t("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),Hs={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},qs=t("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Ws=[qs],Gs={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Ys=t("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Ks=[Ys],Js={class:"flex flex-row gap-x-1"},Qs={class:"flex flex-row gap-2 justify-end mt-2"},Zs={type:"submit",class:"primary-button"},Xs={__name:"CollectionFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(m,{emit:P}){const g=m,i=te(),{oApiConfiguration:F,fetchOptions:v}=X(),w=ke(F,v()),{t:b}=Ie(),_="create-collection-form",u=p({title:"",description:"",isPublic:1,category:"artwork"}),j=async()=>{Le().validate(_,b);try{let y=!1,l={};if(g.category){const[E,h,C]=await w.createCollection(g.category,u.value);C||(y=E,l=h)}y&&(ee().closeModal(g.modalId),P("created",l))}catch{}};return(y,l)=>(o(),a("div",null,[t("div",Bs,[t("div",null,[t("span",Os,r(y.$t("collections.create.form.title")),1),t("form",{id:_,class:"mt-2",onSubmit:l[4]||(l[4]=Q(E=>j(),["prevent"]))},[t("n-validate",null,[M(t("input",{"onUpdate:modelValue":l[0]||(l[0]=E=>e(u).title=E),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:y.$t("title")},null,8,Us),[[de,e(u).title]])]),M(t("textarea",{"onUpdate:modelValue":l[1]||(l[1]=E=>e(u).description=E),class:"form-input theme-color-secondary",placeholder:y.$t("description"),"data-gramm":"false"},null,8,Vs),[[de,e(u).description]]),t("label",{for:e(u).isPublic?"checked":"unchecked",class:"inline-flex items-center"},[t("span",{class:"relative cursor-pointer",onClick:l[2]||(l[2]=E=>e(i).i502p00r0?e(u).isPublic=!e(u).isPublic:e(u).isPublic=!0)},[Ns,e(u).isPublic?(o(),a("span",Hs,Ws)):n("",!0),e(u).isPublic?n("",!0):(o(),a("span",Gs,Ks))]),t("div",Js,[t("span",{class:S(["ml-2 inline-block",{"leading-6":!e(i).i502p00r0}])},r(y.$t("private")),3),e(i).i502p00r0?n("",!0):(o(),H(ie,{key:0}))])],8,Ds),t("div",Qs,[t("button",{class:"cancel-button",onClick:l[3]||(l[3]=Q(E=>y.closeModal(m.modalId),["prevent"]))},r(y.$t("cancel")),1),t("button",Zs,r(y.$t("create")),1)])],32)])])]))}};const el={id:"lists"},tl={class:"p-4 mb-4 w-full rounded-md theme-color-secondary"},ol={class:"text-base font-bold mb-2"},sl={class:"mb-2"},ll={class:"italic"},al=["id"],il={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1},type:{type:String,default:""}},emits:["onCollectionEmpty","feedManageList"],setup(m,{expose:P,emit:g}){const i=m,{oApiConfiguration:F,fetchOptions:v}=X(),w=ke(F,v()),b=p(i.id);Re(()=>i.id,(f,z)=>{b.value=f}),me(async()=>{await j()});const _=p(!0),u=p({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:24},list:[],empty:!1}),j=async()=>{_.value=!0,await y(),await l(),_.value=!1},y=async()=>{const[f,z]=await w.getInfo(b.value);u.value.info=f.data},l=async()=>{const[f,z,U]=await w.listCollectionItems({collectionId:b.value,pagination:{page:u.value.pagination.page,perPage:u.value.pagination.page===0?u.value.pagination.firstLoad:u.value.pagination.perPage}});z?u.value.pagination.page===0?u.value.pagination.page=u.value.pagination.firstLoad/u.value.pagination.perPage:u.value.pagination.page+=u.value.pagination.page!==0?1:2:u.value.loadMore=!1,f!==null&&f.length?(f.forEach(c=>{u.value.list.push(c.artworks)}),g("onCollectionEmpty",!1)):(u.value.empty=!0,g("onCollectionEmpty",!0))},E=()=>{u.value.loadMore=!0,u.value.pagination.page=0,u.value.list=[]},h=p([]),C=f=>{h.value=f,g("feedManageList",f)},x=p(!1);let I;const B=async()=>{const[f,z]=await w.removeItem({collectionId:i.id,type:i.type,workId:h.value});z||(_e().splash(I,x,"item-removed-alert"),E(),await j(),g("feedManageList",[]))},s=p("collection"),O=p(null),G=(f,z=!1)=>{O.value.view(f,z),ee().openModal(s.value+"-modal")};return P({fetchInfo:y,removeItem:B}),(f,z)=>(o(),a("div",el,[t("div",tl,[t("div",ol,r(e(u).info.name),1),t("div",sl,r(e(u).info.description),1),t("div",null,[t("b",null,r(f.$t("private"))+":",1),V(),t("span",ll,r(e(u).info.is_public?f.$t("no"):f.$t("yes")),1)]),t("div",null,[t("b",null,r(f.$t("createdAt")),1),V(" "+r(f.formatDate(e(u).info.created_at)),1)])]),M(t("div",null,[(o(),H(Ce,null,[M(d(Ee,{"section-class":"work-grid",works:e(u).list,view:G,"manage-mode":m.manageMode,onFeedManageList:C},null,8,["works","manage-mode"]),[[A,!e(u).empty]])],1024)),M(t("div",{class:"primary-button",onClick:z[0]||(z[0]=U=>l())},r(f.$t("loadMore")),513),[[A,e(u).loadMore]])],512),[[A,!e(_)]]),d(re,{loading:e(_),empty:e(u).empty,error:!1,fetch:j,"background-color":"theme-color-secondary"},null,8,["loading","empty"]),e(_)?n("",!0):(o(),a("div",{key:0,id:e(s)+"-modal",class:"modal work-view"},[d(we,{ref_key:"collectionModalViewRef",ref:O,section:e(s)},null,8,["section"])],8,al)),M(d(be,{id:"item-removed-alert",text:f.$t("collections.itemRemoved")},null,8,["text"]),[[A,e(x)]])]))}},nl=oe(il,[["__scopeId","data-v-1671dda8"]]),rl={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},dl={class:"title"},cl=["placeholder"],ul=["placeholder"],ml=["for"],fl=t("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),pl={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},vl=t("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),hl=[vl],wl={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},gl=t("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),bl=[gl],_l={class:"flex flex-row gap-x-1"},kl={class:"flex flex-row gap-2 justify-end mt-2"},yl={type:"submit",class:"primary-button"},$l={__name:"EditForm",props:{collectionId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(m,{expose:P,emit:g}){const i=m,F=te(),{oApiConfiguration:v,fetchOptions:w}=X(),b=ke(v,w()),{t:_}=Ie(),u=p(!0),j=async C=>{if(C){h(),u.value=!0;const[x,I]=await b.getInfo(C);if(!I){const B=x.data;l.value.id=C,l.value.name=B.name,l.value.description=B.description,l.value.isPublic=!!B.is_public,u.value=!1}}},y="edit-collection-form",l=p({id:0,name:"",description:"",isPublic:!1}),E=async()=>{Le().validate(y,_);const[C,x]=await b.update({id:l.value.id,name:l.value.name,description:l.value.description,isPublic:l.value.isPublic?1:0});x||(ee().closeModal(i.modalId),g("updated",l.value),h())},h=()=>{l.value={id:0,name:"",description:"",isPublic:0}};return P({fetch:j}),(C,x)=>(o(),a("div",null,[t("div",{class:"hidden",onClick:x[0]||(x[0]=I=>j(0))}),t("div",rl,[t("div",null,[t("span",dl,r(C.$t("collections.edit.form.title")),1),e(u)?n("",!0):(o(),a("form",{key:0,id:y,class:"mt-2",onSubmit:x[5]||(x[5]=Q(I=>E(),["prevent"]))},[t("n-validate",null,[M(t("input",{"onUpdate:modelValue":x[1]||(x[1]=I=>e(l).name=I),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:C.$t("title")},null,8,cl),[[de,e(l).name]])]),M(t("textarea",{"onUpdate:modelValue":x[2]||(x[2]=I=>e(l).description=I),class:"form-input theme-color-secondary",placeholder:C.$t("description"),"data-gramm":"false"},null,8,ul),[[de,e(l).description]]),t("label",{for:e(l).isPublic?"checked":"unchecked",class:"inline-flex items-center"},[t("span",{class:"relative cursor-pointer",onClick:x[3]||(x[3]=I=>e(F).i502p00r0?e(l).isPublic=!e(l).isPublic:e(l).isPublic=!0)},[fl,e(l).isPublic?(o(),a("span",pl,hl)):n("",!0),e(l).isPublic?n("",!0):(o(),a("span",wl,bl))]),t("div",_l,[t("span",{class:S(["ml-2",{"leading-6":!e(F).i502p00r0}])},r(C.$t("private")),3),d(ie)])],8,ml),t("div",kl,[t("button",{class:"cancel-button",onClick:x[4]||(x[4]=Q(I=>C.closeModal(m.modalId),["prevent"]))},r(C.$t("cancel")),1),t("button",yl,r(C.$t("save")),1)])],32))])])]))}};const Ne=m=>($e("data-v-8d6afe3a"),m=m(),xe(),m),xl={class:"mb-2"},Ml={key:0},Cl=["src"],Il={key:1},Ll={class:"relative text-center"},El={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Al={class:"overflow-hidden rounded-md"},Fl=["src"],Pl={key:2,class:"imgrid"},Tl={class:"relative text-center"},Sl={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},zl={class:"overflow-hidden rounded-md"},Rl=["src"],jl=Ne(()=>t("img",{class:"bg-gray-300 border-none"},null,-1)),Bl=Ne(()=>t("img",{class:"bg-gray-300 border-none"},null,-1)),Ol={key:3,class:"imgrid"},Ul={class:"relative text-center"},Vl={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Dl={class:"overflow-hidden rounded-md"},Nl=["src"],Hl={key:4,class:"imgrid"},ql={class:"relative text-center"},Wl={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},Gl={class:"overflow-hidden rounded-md"},Yl=["src"],Kl={key:5,class:"imgrid"},Jl={key:0,class:"relative text-center"},Ql={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},Zl={class:"overflow-hidden rounded-md"},Xl=["src"],ea={key:1,class:"relative text-center"},ta={class:"absolute top-1/2 left-1/2 z-10 text-lg font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 md:text-xl lg:text-3xl"},oa={class:"overflow-hidden rounded-md"},sa=["src"],la={__name:"ArtworkThumbnail",props:{collection:{type:Object,default:()=>{}}},setup(m){const P=te(),g={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(i,F)=>(o(),a("div",xl,[!m.collection.collection_has_artworks||m.collection._count.collection_has_artworks===0?(o(),a("div",Ml,[t("img",{src:e(Ve),class:"rounded"},null,8,Cl)])):n("",!0),m.collection.collection_has_artworks&&m.collection._count.collection_has_artworks===1?(o(),a("div",Il,[t("div",Ll,[i.applyExplicitFilter(e(P),m.collection.collection_has_artworks[0].artworks.is_explicit)?(o(),a("span",El,r(i.$t("explicitContent")),1)):n("",!0),t("div",Al,[m.collection.collection_has_artworks&&m.collection._count.collection_has_artworks===1?(o(),a("img",{key:0,src:i.artworkThumb(m.collection.collection_has_artworks[0].artworks.artwork_assets[0].bucket,m.collection.collection_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:S(["object-cover object-top rounded",{"blur-sm brightness-50":i.applyExplicitFilter(e(P),m.collection.collection_has_artworks[0].artworks.is_explicit)}]),style:{"aspect-ratio":"1/1"},onError:F[0]||(F[0]=(...v)=>i.imageLoadError&&i.imageLoadError(...v))},null,42,Fl)):n("",!0)])])])):n("",!0),m.collection.collection_has_artworks&&m.collection._count.collection_has_artworks===2?(o(),a("div",Pl,[(o(!0),a(le,null,ae(m.collection.collection_has_artworks,(v,w)=>(o(),a("div",{key:w,class:S(g[2][w])},[t("div",Tl,[i.applyExplicitFilter(e(P),v.artworks.is_explicit)?(o(),a("span",Sl,r(i.$t("explicitContent")),1)):n("",!0),t("div",zl,[t("img",{class:S(["theme-color",{"blur-sm brightness-50":i.applyExplicitFilter(e(P),v.artworks.is_explicit)}]),src:i.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),onError:F[1]||(F[1]=(...b)=>i.imageLoadError&&i.imageLoadError(...b))},null,42,Rl)])])],2))),128)),jl,Bl])):n("",!0),m.collection.collection_has_artworks&&m.collection._count.collection_has_artworks===3?(o(),a("div",Ol,[(o(!0),a(le,null,ae(m.collection.collection_has_artworks,(v,w)=>(o(),a("div",{key:w,class:S(g[3][w])},[t("div",Ul,[i.applyExplicitFilter(e(P),v.artworks.is_explicit)?(o(),a("span",Vl,r(i.$t("explicitContent")),1)):n("",!0),t("div",Dl,[t("img",{class:S(["theme-color",{"blur-sm brightness-50":i.applyExplicitFilter(e(P),v.artworks.is_explicit)}]),src:i.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),onError:F[2]||(F[2]=(...b)=>i.imageLoadError&&i.imageLoadError(...b))},null,42,Nl)])])],2))),128))])):n("",!0),m.collection.collection_has_artworks&&m.collection._count.collection_has_artworks===4?(o(),a("div",Hl,[(o(!0),a(le,null,ae(m.collection.collection_has_artworks,(v,w)=>(o(),a("div",{key:w},[t("div",ql,[i.applyExplicitFilter(e(P),v.artworks.is_explicit)?(o(),a("span",Wl,r(i.$t("explicitContent")),1)):n("",!0),t("div",Gl,[t("img",{class:S(["theme-color",{"blur-sm brightness-50":i.applyExplicitFilter(e(P),v.artworks.is_explicit)}]),src:i.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),onError:F[3]||(F[3]=(...b)=>i.imageLoadError&&i.imageLoadError(...b))},null,42,Yl)])])]))),128))])):n("",!0),m.collection.collection_has_artworks&&m.collection._count.collection_has_artworks>4?(o(),a("div",Kl,[(o(!0),a(le,null,ae(m.collection.collection_has_artworks,(v,w)=>(o(),a("div",{key:w},[w<3?(o(),a("div",Jl,[i.applyExplicitFilter(e(P),v.artworks.is_explicit)?(o(),a("span",Ql,r(i.$t("explicitContent")),1)):n("",!0),t("div",Zl,[t("img",{class:S(["theme-color",{"blur-sm brightness-50":i.applyExplicitFilter(e(P),v.artworks.is_explicit)}]),src:i.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),onError:F[4]||(F[4]=(...b)=>i.imageLoadError&&i.imageLoadError(...b))},null,42,Xl)])])):(o(),a("div",ea,[t("span",ta,"+"+r(m.collection._count.collection_has_artworks-4),1),t("div",oa,[t("img",{src:i.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),class:S(["z-0 brightness-50",{"blur-sm brightness-50":i.applyExplicitFilter(e(P),v.artworks.is_explicit)}]),onError:F[5]||(F[5]=(...b)=>i.imageLoadError&&i.imageLoadError(...b))},null,42,sa)])]))]))),128))])):n("",!0)]))}},aa=oe(la,[["__scopeId","data-v-8d6afe3a"]]);const ia={class:"mb-2 w-full"},na={key:0,class:"flex flex-row justify-between"},ra={class:"flex flex-row"},da={key:0},ca={key:1,class:"flex flex-row justify-between"},ua={class:"flex flex-row"},ma={class:"flex flex-row gap-2"},fa={class:"flex flex-row gap-2"},pa={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},va=["onClick"],ha={class:"flex flex-row pb-1 mt-4 font-bold"},wa={class:"text-xs font-normal"},ga={__name:"Collection",props:{userId:{type:Number,default:0}},setup(m){const P=m,g=te();me(()=>{h()});const{oApiConfiguration:i,fetchOptions:F}=X(),v=ke(i,F());Me(()=>{j()});const w=p(!0),b=p("artwork"),_=p(0),u=p(!1),j=async()=>{if(g.i502p00r0)u.value=!0;else{const[T,R]=await v.proCanCreateCollection({type:b.value});R?u.value=!1:u.value=T}},y=p([]),l=p({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),E=p({artwork:0}),h=async()=>{w.value=!0;const[T,R,q]=await v.fetchCollections({userId:P.userId,type:b.value,pagination:{page:l.value.pagination.page,perPage:l.value.pagination.page===0?l.value.pagination.firstLoad:l.value.pagination.perPage}});if(q)s();else{T.length||(l.value.manageMode=!1,I()),T.forEach(fe=>{y.value.push(fe)}),l.value.pagination.page+=l.value.pagination.firstLoad/l.value.pagination.perPage,l.value.showLoadMore=R;const[ue]=await v.countArtworkCollections(P.userId);E.value.artwork=ue}w.value=!1},C=async()=>await h(),x=p(!1),I=()=>{x.value=!0,l.value.showLoadMore=!1},B=p(!1),s=()=>{w.value=!1,B.value=!0,l.value.showLoadMore=!1},O=async()=>{w.value=!1,x.value=!1,B.value=!1,l.value.pagination.page=0,y.value=[],await h()},G=T=>{l.value.showManageButton=!0,T&&(l.value.showManageButton=!1)},f=p(!1);let z;const U=async()=>{await j(),_e().splash(z,f,"created-alert"),await O()},c=p(null),W=()=>{c.value.fetch(_.value),ee().openModal("collection-edit-form-modal")},D=p(null),Y=T=>{D.value.fetchInfo(),y.value.forEach(R=>{R.id===T.id&&(R.name=T.name,R.description=T.description,R.is_public=T.isPublic)})},J=p([]),ve=T=>{J.value=T},K=()=>{D.value.removeItem()},ne=async()=>{if(_.value!==0){const[T,R]=await v.deleteCollection(_.value);T&&(await j(),_.value=0,O())}},ce=()=>{_.value=0,l.value.showManageButton=!1,l.value.manageMode=!1};return(T,R)=>(o(),a("div",null,[t("div",ia,[e(_)?n("",!0):(o(),a("div",na,[t("div",ra,[t("div",{class:S(["ml-0 primary-button theme-color-secondary",{"button-color text-white":e(b)==="artwork"}]),onClick:R[0]||(R[0]=q=>b.value="artwork")},[V(r(T.$t("artworks.artwork"))+" ",1),t("span",{class:S(["px-1 ml-2 font-normal rounded",e(b)==="artwork"?"theme-color":"button-color text-white"])},r(T.thousand(e(E).artwork)),3)],2)]),e(g).loggedIn&&e(g).user.id===m.userId?(o(),a("div",da,[t("div",{class:"flex flex-row icon-button",onClick:R[1]||(R[1]=q=>e(u)?T.openModal("collection-form-modal"):null)},[d(k,{name:"i-ion-add-outline"}),e(u)?n("",!0):(o(),H(ie,{key:0,class:"ml-1"}))])])):n("",!0)])),e(_)?(o(),a("div",ca,[t("div",null,[t("div",{class:"ml-0 icon-button",onClick:R[2]||(R[2]=q=>ce())},[d(k,{name:"i-ic-baseline-keyboard-arrow-left"})])]),t("div",ua,[M(t("div",ma,[t("button",{class:S(["action-button",e(l).manageMode?"danger-button":"secondary-button"]),onClick:R[3]||(R[3]=q=>e(l).manageMode=!e(l).manageMode)},[d(k,{name:e(l).manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),V(" "+r(e(l).manageMode?T.$t("quit"):T.$t("manage")),1)],2),M(t("button",{onClick:R[4]||(R[4]=q=>e(J).length>0?T.openModal("item-deletion-confirm-modal"):null),class:S(["flex flex-row",e(J).length>0?"danger-button":"disabled-button cursor-not-allowed"])},[d(k,{name:"i-akar-icons-trash-bin"}),V(" "+r(T.$t("collections.removeSelected")),1)],2),[[A,e(l).manageMode]])],512),[[A,e(g).loggedIn&&e(g).user.id===m.userId&&e(l).showManageButton]]),M(t("div",fa,[t("button",{class:"icon-button",onClick:R[5]||(R[5]=q=>W())},[d(k,{name:"i-ph-gear-six"})]),t("button",{class:"danger-button-color b-button",onClick:R[6]||(R[6]=q=>T.openModal("collection-deletion-confirm-modal"))},[d(k,{name:"i-akar-icons-trash-bin"})])],512),[[A,e(g).loggedIn&&e(g).user.id===m.userId&&!e(l).manageMode]])])])):n("",!0),M(t("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},r(T.$t("collections.manageModeActiveMessage")),513),[[A,e(l).manageMode]])]),e(_)?n("",!0):(o(),a("div",pa,[(o(!0),a(le,null,ae(e(y),q=>(o(),a("div",{key:q.id,class:S(["p-3 rounded-md cursor-pointer",q.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:ue=>_.value=q.id},[q.type==="artwork"?(o(),H(aa,{key:0,collection:q},null,8,["collection"])):n("",!0),t("div",ha,[q.is_public?n("",!0):(o(),H(k,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),t("span",wa,r(q.name),1)])],10,va))),128))])),e(l).showLoadMore&&!e(_)?(o(),a("div",{key:1,class:"mt-4 w-full primary-button",onClick:C},r(T.$t("loadMore")),1)):n("",!0),d(re,{loading:e(w),empty:e(x),error:e(B),fetch:h,"background-color":"theme-color-secondary"},null,8,["loading","empty","error"]),!e(w)&&!e(_)?(o(),H(Xs,{key:2,id:"collection-form-modal","modal-id":"collection-form-modal",category:e(b),class:"modal",onCreated:U},null,8,["category"])):n("",!0),M(d(be,{id:"created-alert",text:T.$t("collections.created")},null,8,["text"]),[[A,e(f)]]),!e(w)&&e(_)?(o(),H($l,{key:3,id:"collection-edit-form-modal",ref_key:"collectionEditFormModalRef",ref:c,"modal-id":"collection-edit-form-modal","collection-id":e(_),class:"modal",onUpdated:Y},null,8,["collection-id"])):n("",!0),d(pe,{id:"collection-deletion-confirm-modal","modal-id":"collection-deletion-confirm-modal",message:"All saved items in this collection will be deleted. Do you still want to delete this collection?",class:"modal",onOnAccept:ne},null,8,["message"]),d(pe,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this collection. Do you still want to remove them?",class:"modal",onOnAccept:K},null,8,["message"]),e(_)&&!e(w)?(o(),H(nl,{key:4,id:e(_),ref_key:"collectionDetailRef",ref:D,"manage-mode":e(l).manageMode,type:e(b),onOnCollectionEmpty:G,onFeedManageList:ve},null,8,["id","manage-mode","type"])):n("",!0)]))}},ba=oe(ga,[["__scopeId","data-v-56365f74"]]);const _a={id:"lists"},ka=["id"],ya={__name:"Liked",props:{userId:{type:Number,default:0}},setup(m){const P=m,g=te(),{oApiConfiguration:i,fetchOptions:F}=X(),v=Ae(i,F()),w=ot(i,F()),b="profile-liked",_=p(!0),u=p(0),j=je(()=>g.i502p00r0?!0:h.value.page*h.value.perPage<u.value);Me(()=>{g.i502p00r0||y(),l()});const y=async()=>{const D=await w.getSetting("max_free_liked_artworks");u.value=Number(D)},l=async()=>{const[D,Y]=await C();for(let J=0;J<D.length;J++)E.value.push(D[J].artworks);Y.record_total<=h.value.perPage&&B(),Y.record_total===0&&f()},E=p([]),h=p({perPage:24,page:0}),C=async()=>{h.value.page===0&&(_.value=!0);const[D,Y,J]=await v.getUserLikedArtworks({userId:P.userId,pagination:{page:h.value.page,perPage:h.value.perPage}});if(J)U();else return Y.record_total<=h.value.perPage&&B(),Y.record_total===0&&f(),h.value.page+=1,x(),[D,Y]},x=()=>{_.value=!1,G.value=!1,z.value=!1},I=p(!0),B=()=>{I.value=!1},s=p({delay:!1}),O=async()=>{s.value.delay=!0;const[D,Y]=await C();for(let J=0;J<D.length;J++)E.value.push(D[J].artworks);s.value.delay=!1,Y.next_previous.next_page||B(),Y.next_previous.next_page&&Y.current_page===s.maxLoad&&(B(),s.showDiscoveryButton=!0)},G=p(!1),f=()=>{G.value=!0,_.value=!1,B(),emits("onEmpty")},z=p(!1),U=()=>{_.value=!1,z.value=!0,B()},c=p(null),W=(D,Y=!1)=>{c.value.view(D,Y),ee().openModal(b+"-modal")};return(D,Y)=>(o(),a("div",_a,[M(t("div",null,[(o(),H(Ce,null,[M(d(Ee,{"section-class":"work-grid",works:e(E),view:W},null,8,["works"]),[[A,!e(G)]])],1024)),M(t("div",{class:S([e(j)?"primary-button":"disabled-button",{"animate-pulse":e(s).delay},{"inline-block flex-row w-full text-center":!e(j)}]),onClick:Y[0]||(Y[0]=J=>e(j)?O():null)},[V(r(D.$t("loadMore")),1),e(j)?n("",!0):(o(),H(ie,{key:0,class:"ml-2"}))],2),[[A,e(I)]])],512),[[A,!e(_)]]),d(re,{loading:e(_),empty:e(G),error:e(z),fetch:C,"background-color":"theme-color-secondary"},null,8,["loading","empty","error"]),t("div",{id:b+"-modal",class:"modal work-view"},[M(d(we,{ref_key:"artworkModalViewRef",ref:c,section:b},null,512),[[A,!e(_)]])],8,ka)]))}},$a=oe(ya,[["__scopeId","data-v-df7454c7"]]);const xa={class:"flex flex-row justify-between"},Ma={class:"section-title"},Ca=["checked","disabled"],Ia={class:"ml-2"},La={key:0},Ea={__name:"FollowerList",props:{userId:{type:Number,default:0},hide:{type:Boolean,default:!0},userHideFollowerListStatus:{type:Boolean,default:!1}},setup(m){const P=m,g=te(),{oApiConfiguration:i,fetchOptions:F}=X(),v=Fe(i,F()),w=p(!1);me(()=>{w.value=P.userHideFollowerListStatus,P.hide?(_.value=!1,y.value=!0,l.value=Oe().tl("followers.followersHidden")):h()});const b=p([]),_=p(!0),u=p({page:0,perPage:12}),j=p(!1),y=p(!1),l=p(""),E=p(!1),h=async()=>{C(),_.value=!0;const[I,B]=await v.getFollowerList({userId:P.userId,pagination:{page:u.value.page,perPage:u.value.perPage}});B?j.value=!0:(I.followers.length||(y.value=!0),I.followers.forEach(s=>{b.value.push(s)}),u.value.page+=1,I.pagination.next_previous.next_page?E.value=!0:E.value=!1),_.value=!1},C=()=>{y.value=!1,j.value=!1},x=async()=>{if(!g.i502p00r0)return null;const[I,B]=await v.toggleFollowerPrivacy();I?w.value=!w.value:console.error("ERROR: can't toggle follower visibility setting.")};return(I,B)=>(o(),a("div",null,[t("div",xa,[t("div",Ma,r(I.$t("followers.followers")),1),t("div",null,[e(g).loggedIn&&e(g).i502p00r0&&e(g).user.id===m.userId?(o(),a("label",{key:0,onClick:B[0]||(B[0]=Q(s=>x(),["prevent"])),for:"hide-follower-toggle",class:"inline-flex relative flex-row justify-center items-center cursor-pointer"},[t("input",{id:"hide-follower-toggle",type:"checkbox",class:"sr-only peer",checked:e(w),disabled:!e(g).i502p00r0},null,8,Ca),t("div",{class:S(["w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600",{unclickable:!e(g).i502p00r0},e(g).i502p00r0?" after:top-[2px]":" after:top-[4px]"])},null,2),t("span",Ia,r(I.$t("followers.hideMyFollowers")),1),e(g).i502p00r0?n("",!0):(o(),H(ie,{key:0,class:"ml-1"}))])):n("",!0)])]),!m.hide&&!e(_)&&!e(y)&&!e(j)?(o(),a("div",La,[d(Ue,{class:"mt-4",users:e(b),"column-type":3},null,8,["users"]),M(t("div",{class:"mt-4 primary-button",onClick:B[1]||(B[1]=s=>h())},r(I.$t("loadMore")),513),[[A,e(E)]])])):n("",!0),d(re,{class:"mt-4",loading:e(_),empty:e(y),"empty-message":e(l),error:e(j),fetch:h,"background-color":"theme-color-secondary"},null,8,["loading","empty","empty-message","error"])]))}},Aa=oe(Ea,[["__scopeId","data-v-3bd8471b"]]);const Fa={class:"flex flex-row justify-between"},Pa={class:"section-title"},Ta={class:"inline-flex flex-row gap-4"},Sa={class:"flex flex-col justify-center align-middle"},za={class:"mr-1"},Ra=["checked","disabled"],ja={class:"ml-2"},Ba={key:0},Oa={__name:"FollowingList",props:{userId:{type:Number,default:0},hide:{type:Boolean,default:!0},userHideFollowingListStatus:{type:Boolean,default:!1}},setup(m){const P=m,g=te(),{oApiConfiguration:i,fetchOptions:F}=X(),v=Fe(i,F()),w=p(!1);me(()=>{w.value=P.userHideFollowingListStatus,P.hide?(j.value=!1,E.value=!0,h.value=Oe().tl("followings.followingsHidden")):x(!1)});const b=p(!1),_=async s=>{u.value=[],y.value.page=0,b.value=s,await x(s)},u=p([]),j=p(!0),y=p({page:0,perPage:12}),l=p(!1),E=p(!1),h=p(""),C=p(!1),x=async s=>{I(),j.value=!0;const[O,G]=await v.getFollowingList({userId:P.userId,isPrivateOnly:s?1:0,pagination:{page:y.value.page,perPage:y.value.perPage}});G?l.value=!0:(O.followings.length||(E.value=!0),O.followings.forEach(f=>{u.value.push(f)}),y.value.page+=1,O.pagination.next_previous.next_page?C.value=!0:C.value=!1),j.value=!1},I=()=>{E.value=!1,l.value=!1},B=async()=>{if(!g.i502p00r0)return null;const[s,O]=await v.toggleFollowingPrivacy();s?w.value=!w.value:console.error("ERROR: can't toggle following visibility setting.")};return(s,O)=>{const G=Ke("ProBadge");return o(),a("div",null,[t("div",Fa,[t("div",Pa,r(s.$t("followings.followings")),1),t("div",Ta,[t("div",Sa,[e(g).loggedIn&&e(g).i502p00r0&&e(g).user.id==m.userId?(o(),a("div",{key:0,onClick:O[0]||(O[0]=f=>_(!e(b))),class:S(["flex flex-row cursor-pointer href",{"font-bold":e(b)}])},[M(d(k,{name:"i-mdi-eye-check"},null,512),[[A,e(b)]]),t("div",za,[M(d(k,{name:"i-fluent-inprivate-account-16-regular"},null,512),[[A,!e(b)]]),M(d(k,{name:"i-fluent-inprivate-account-16-filled"},null,512),[[A,e(b)]])]),t("span",null,r(s.$t("privateFollow")),1)],2)):n("",!0)]),e(g).loggedIn&&e(g).i502p00r0&&e(g).user.id===m.userId?(o(),a("label",{key:0,onClick:O[1]||(O[1]=Q(f=>B(),["prevent"])),for:"hide-following-toggle",class:"inline-flex relative flex-row justify-center items-center cursor-pointer"},[t("input",{id:"hide-following-toggle",type:"checkbox",class:"inline-block align-middle sr-only peer",checked:e(w),disabled:!e(g).i502p00r0},null,8,Ra),t("div",{class:S(["w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600",{unclickable:!e(g).i502p00r0},e(g).i502p00r0?" after:top-[4px]":" after:top-[6px]"])},null,2),t("span",ja,r(s.$t("followings.hideMyFollowings")),1),e(g).i502p00r0?n("",!0):(o(),H(G,{key:0,class:"ml-1"}))])):n("",!0)])]),!m.hide&&!e(j)&&!e(E)&&!e(l)?(o(),a("div",Ba,[d(Ue,{class:"mt-4",users:e(u),"column-type":3},null,8,["users"]),M(t("div",{class:"mt-4 primary-button",onClick:O[2]||(O[2]=f=>x(!1))},r(s.$t("loadMore")),513),[[A,e(C)]])])):n("",!0),d(re,{class:"mt-4",loading:e(j),empty:e(E),"empty-message":e(h),error:e(l),fetch:_,"background-color":"theme-color-secondary"},null,8,["loading","empty","empty-message","error"])])}}},Ua=oe(Oa,[["__scopeId","data-v-721dae90"]]);const Pe=m=>($e("data-v-3e6fad42"),m=m(),xe(),m),Va=["src"],Da={class:"px-2 pb-4 w-full rounded md:px-6 md:pb-6 theme-color"},Na={class:"flex-row justify-between hidden-md-flex"},Ha={class:"mr-6 w-1/5"},qa=["src"],Wa={class:"mt-2"},Ga={class:"flex flex-row"},Ya={class:"flex flex-row"},Ka={class:"flex flex-row text-center"},Ja={class:"w-full"},Qa=["checked","disabled"],Za=Pe(()=>t("span",{class:"ml-2"},"Follow Privately",-1)),Xa={class:"hidden flex-row justify-between w-full md:flex md:mt-6"},ei={class:"flex flex-col w-full"},ti={class:"flex flex-row w-full"},oi={class:"w-9/12"},si={class:"text-base font-semibold"},li={class:"mr-2 italic"},ai={class:"flex flex-row mt-2"},ii={key:0,class:"mr-1"},ni={class:"flex flex-row"},ri={class:"mr-1"},di={key:0,class:"flex flex-row"},ci={key:1,class:"flex flex-row"},ui={class:"float-right w-3/12 text-right"},mi={class:"flex flex-row shadow-md primary-button"},fi={class:"leading-4"},pi={key:0,class:"flex flex-row gap-3 mt-4 w-full"},vi=["href"],hi=["href"],wi=["href"],gi=["href"],bi=["href"],_i=["href"],ki=["href"],yi=["href"],$i=["href"],xi={key:0,class:"mt-4"},Mi=["id","innerHTML"],Ci=["id"],Ii={class:"flex flex-col text-center md:hidden"},Li=["src"],Ei={class:"mt-4 text-base font-semibold"},Ai={class:"flex flex-row justify-center mt-4"},Fi={key:0,class:"flex flex-row mr-1"},Pi={class:"mr-1"},Ti={key:0,class:"flex flex-row"},Si={key:1,class:"flex flex-row"},zi={key:0,class:"mx-2 mt-4 text-center"},Ri=["id","innerHTML"],ji=["id"],Bi={key:1,class:"flex flex-row gap-x-2 justify-center mt-4"},Oi=["href"],Ui=["href"],Vi=["href"],Di=["href"],Ni=["href"],Hi=["href"],qi=["href"],Wi=["href"],Gi=["href"],Yi={class:"flex flex-row justify-center w-full md:hidden"},Ki={class:"flex flex-row"},Ji={class:"flex flex-row"},Qi={class:"flex flex-row text-center"},Zi={class:"w-full"},Xi=["checked","disabled"],en=Pe(()=>t("span",{class:"ml-2"},"Follow Privately",-1)),tn={class:"mt-2"},on={class:"flex flex-row gap-x-2 justify-center md:hidden"},sn={class:"flex flex-row justify-between mt-2 md:mt-6"},ln={class:"hidden flex-col lg:w-1/5 md:flex"},an={class:"profile-navigation_wrapper"},nn={class:"hidden-lg-flex"},rn=Pe(()=>t("span",{class:"hidden-lg-flex"},null,-1)),dn={class:"profile-navigation_wrapper"},cn={class:"hidden-lg-flex"},un={class:"hidden-lg-flex"},mn={class:"profile-navigation_wrapper"},fn={class:"hidden-lg-flex"},pn={class:"hidden-lg-flex"},vn={key:0,class:"custom-divider"},hn={class:"profile-navigation_wrapper"},wn={class:"hidden-lg-flex"},gn={class:"hidden-lg-flex"},bn={class:"w-full md:ml-6"},_n={key:0},kn={class:"flex flex-row w-full"},yn={class:"flex flex-row gap-2 justify-between w-full md:justify-end"},$n={class:"mt-2"},xn={key:1},Mn={key:2},Cn={key:3},In={key:4},Ln={key:5},En={__name:"Profile",props:{id:{type:Number,default:0},userLogon:{type:Boolean,default:!1}},emits:["setMeta"],setup(m,{emit:P}){const g=m,i=te(),{oApiConfiguration:F,fetchOptions:v}=X(),w=Fe(F,v()),b=ge(F,v()),_=ke(F,v()),u=Ae(F,v()),j=Je(),y=Se(),{o:l}=j.query,E=p(!0),h=l!=null?p(l):p("dashboard"),C=p("artwork"),x=je(()=>g.userLogon&&i.loggedIn?i.user.id:g.id),I=p({manageMode:!1,showManageMode:!0});me(async()=>{await G()});const B=L=>{h.value=L,I.value.manageMode=!1,l!=null&&y.push("/profile")},s=p({}),O=p({feed:0,artwork:0,comic:0,tutorial:0,album:0,collection:0,liked:0,followers:0,followings:0}),G=async()=>{E.value=!0;try{const[L]=await w.getInfo(x.value);if(s.value=L,i.loggedIn&&i.user.id!==x.value){const[he]=await w.isFollowing(x.value);K.value={isFollowing:he.is_following,isPrivate:he.is_private,followingSince:he.following_since}}const[$]=await w.countFeeds(x.value);O.value.feed=$;const[se]=await w.countArtworks(x.value);O.value.artwork=se;const[N]=await w.countFollowers(x.value);O.value.followers=N;const[qe]=await w.countFollowings(x.value);O.value.followings=qe;const[We]=await b.countAlbums(x.value);O.value.album=We;const[Ge]=await _.countCollections(x.value);if(O.value.collection=Ge,i.loggedIn&&i.user.id===s.value.id){const[he]=await u.countUserLikedArtworks({userId:x.value});O.value.liked=he}P("setMeta",{title:`(${s.value.username}) ${s.value.name}`})}catch{}E.value=!1},f=p(null),z=p([]),U=L=>{z.value=L},c=()=>{I.value.showManageMode=!1},W=p(null),D=()=>{ee().openModal("album-selection-modal")},Y=p(!1);let J;const ve=()=>{_e().splash(J,Y,"item-added-to-album-alert")},K=p({isFollowing:!1,isPrivate:!1,followingSince:""}),ne=p(null),ce=p("i-ri-user-follow-fill"),T=(L,$)=>{ce.value=L,ne.value=$},R=async(L,$)=>{let[se,N]=[null,!1];$?[se,N]=await w.followPrivately(L):[se,N]=await w.follow(L),N||(K.value={isFollowing:!0,isPrivate:$!=null?$:!1,followingSince:""})},q=async L=>{const[$,se]=await w.unfollow(L);se||(K.value={isFollowing:!1,isPrivate:!1,followingSince:""})},ue=p(!0),fe=(L,$,se,N)=>{ue.value=!1,Be().readMore(L,$,se,N)},He=()=>{s.value.user_socials&&s.value.user_socials.personal_website&&window.open(s.value.user_socials.personal_website,"_blank")};return(L,$)=>{const se=ze;return o(),H(Xe,{"hide-side":!0,"with-footer":!0,"no-right-side":!0},{default:Z(()=>[t("div",null,[t("img",{preload:"",loading:"lazy",src:L.avatarCoverUrl(e(s).cover_bucket,e(s).cover_filename),class:"object-cover object-top w-full h-32 rounded-t md:h-52 lg:h-72 xl:h-96 unselectable",onError:$[0]||($[0]=(...N)=>L.defaultCoverImage&&L.defaultCoverImage(...N))},null,40,Va),e(i).loggedIn&&e(i).user.id===e(s).id?(o(),H(se,{key:0,to:"/profile/setting",class:"float-right absolute right-4 mt-2 shadow-md icon-button-primary-color flex-md-hidden"},{default:Z(()=>[d(k,{name:"i-ph-gear-six"})]),_:1})):n("",!0)]),t("div",Da,[t("div",Na,[t("div",Ha,[t("img",{preload:"",loading:"lazy",class:"hidden -mt-2 w-full md:-mt-16 avatar md:flex",src:L.avatarCoverUrl(e(s).avatar_bucket,e(s).avatar_filename),onError:$[1]||($[1]=(...N)=>L.defaultCoverImage&&L.defaultCoverImage(...N))},null,40,qa),t("div",Wa,[t("div",{class:S(["flex-row justify-center border hidden-md-flex",e(s).id==e(i).user.id?"rounded-md":"rounded-t-md"])},[t("div",{class:"py-2 w-1/2 text-center cursor-pointer hover:text-colored",onClick:$[2]||($[2]=N=>h.value="followerList")},[t("b",null,r(L.thousand(e(O).followers)),1),V("\xA0 "),t("i",null,r(L.$t("followers.followers").toLowerCase()),1)]),t("div",{class:"py-2 w-1/2 text-center cursor-pointer hover:text-colored",onClick:$[3]||($[3]=N=>h.value="followingList")},[t("b",null,r(L.thousand(e(O).followings)),1),V("\xA0 "),t("i",null,r(L.$t("followings.followings").toLowerCase()),1)])],2),e(i).loggedIn&&e(s).id!==e(i).user.id?(o(),a("div",{key:0,class:S(["primary-button rounded-t-none hover:rounded-t-none",{"hover:danger-button":e(K).isFollowing}]),onClick:$[4]||($[4]=N=>e(K).isFollowing?q(e(s).id):R(e(s).id)),onMouseover:$[5]||($[5]=N=>T("i-ri-user-unfollow-fill",L.$t("unfollow"))),onMouseleave:$[6]||($[6]=N=>T("i-ri-user-follow-fill",L.$t("followings.followings")))},[M(t("div",Ga,[d(k,{name:"i-ri-user-add-fill","text-size":"text-base"}),V(" "+r(L.$t("follow")),1)],512),[[A,!e(K).isFollowing]]),M(t("div",Ya,[d(k,{name:e(ce),"text-size":"text-base"},null,8,["name"]),V(" "+r(e(ne)===null?L.$t("followings.followings"):e(ne)),1)],512),[[A,e(K).isFollowing]])],34)):n("",!0),M(t("div",Ka,[t("div",Ja,[t("label",{onClick:$[7]||($[7]=N=>e(i).i502p00r0?e(K).isPrivate?R(e(s).id,!1):R(e(s).id,!0):null),for:"small-toggle",class:"inline-flex relative flex-row justify-center items-center mt-2 cursor-pointer"},[t("input",{id:"small-toggle",type:"checkbox",class:"sr-only peer",checked:e(K).isPrivate,disabled:!e(i).i502p00r0},null,8,Qa),t("div",{class:S(["w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600",{unclickable:!e(i).i502p00r0},e(i).i502p00r0?" after:top-[2px]":" after:top-[4px]"])},null,2),Za,e(i).i502p00r0?n("",!0):(o(),H(ie,{key:0,class:"ml-1"}))])])],512),[[A,e(K).isFollowing]])])]),t("div",Xa,[t("div",ei,[t("div",ti,[t("div",oi,[t("div",null,[t("span",si,r(e(s).name),1),V("\xA0 "),t("span",li,r(e(s).username),1),e(s).is_pro?(o(),H(ie,{key:0})):n("",!0)]),t("div",ai,[e(s).pen_name&&e(s).pen_name!==""?(o(),a("div",ii,[t("span",ni,[d(k,{name:"i-ion-pencil-outline",class:"mr-1 text-base font-bold"}),V(" "+r(e(s).pen_name),1)])])):n("",!0),t("div",ri,[e(s).gender==="m"?(o(),a("span",di,[d(k,{name:"i-ion-male-outline",class:"mr-1 ml-2 text-base font-bold"}),V(" he/his ")])):n("",!0),e(s).gender==="f"?(o(),a("span",ci,[d(k,{name:"i-ion-female-outline",class:"mr-1 ml-2 text-base font-bold"}),V(" she/her ")])):n("",!0)])])]),t("div",ui,[e(i).loggedIn&&e(i).user.id===e(s).id?(o(),H(se,{key:0,to:"/profile/setting",class:"float-right -mt-20 shadow-md"},{default:Z(()=>[t("button",mi,[d(k,{name:"i-ph-gear-six",class:"mr-2"}),t("span",fi,r(L.$t("profile.setting")),1)])]),_:1})):n("",!0)])]),e(s).user_socials?(o(),a("div",pi,[e(s).user_socials.personal_website?(o(),a("button",{key:0,onClick:$[8]||($[8]=N=>L.openModal("external-website-visit-confirmation-modal")),target:"blank",class:"cursor-pointer"},[d(k,{name:"i-ph-link-simple-break-bold","text-size":"text-xl"})])):n("",!0),e(s).user_socials.patreon?(o(),a("a",{key:1,href:"https://patreon.com/"+e(s).user_socials.patreon+"/",target:"blank",class:"cursor-pointer"},[d(k,{name:"i-gg-patreon","text-size":"text-xl"})],8,vi)):n("",!0),e(s).user_socials.twitch?(o(),a("a",{key:2,href:"https://twitch.com/"+e(s).user_socials.twitch+"/",target:"blank",class:"cursor-pointer"},[d(k,{name:"i-ph-twitch-logo-fill","text-size":"text-xl"})],8,hi)):n("",!0),e(s).user_socials.instagram?(o(),a("a",{key:3,href:"https://instagram.com/"+e(s).user_socials.instagram+"/",target:"blank",class:"cursor-pointer"},[d(k,{name:"i-ion-logo-instagram","text-size":"text-xl"})],8,wi)):n("",!0),e(s).user_socials.twitter?(o(),a("a",{key:4,href:"https://twitter.com/"+e(s).user_socials.twitter,target:"blank",class:"cursor-pointer"},[d(k,{name:"i-ion-logo-twitter","text-size":"text-xl"})],8,gi)):n("",!0),e(s).user_socials.facebook?(o(),a("a",{key:5,href:"https://facebook.com/"+e(s).user_socials.facebook,target:"blank",class:"cursor-pointer"},[d(k,{name:"i-ion-logo-facebook","text-size":"text-xl"})],8,bi)):n("",!0),e(s).user_socials.youtube?(o(),a("a",{key:6,href:e(s).user_socials.youtube,target:"blank",class:"cursor-pointer"},[d(k,{name:"i-ion-logo-youtube","text-size":"text-xl"})],8,_i)):n("",!0),e(s).user_socials.discord?(o(),a("a",{key:7,href:"https://discord.com/"+e(s).user_socials.discord+"/",target:"blank",class:"cursor-pointer"},[d(k,{name:"i-ic-twotone-discord","text-size":"text-xl"})],8,ki)):n("",!0),e(s).user_socials.picarto?(o(),a("a",{key:8,href:"https://picarto.tv/"+e(s).user_socials.picarto+"/",target:"blank",class:"cursor-pointer"},[d(k,{name:"i-cib-picarto-tv","text-size":"text-xl"})],8,yi)):n("",!0),e(s).user_socials.gumroad?(o(),a("a",{key:9,href:"https://"+e(s).user_socials.gumroad+".gumroad.com",target:"blank",class:"cursor-pointer"},[d(k,{name:"i-cib-gumroad","text-size":"text-xl"})],8,$i)):n("",!0)])):n("",!0),t("div",null,[e(s).bio?(o(),a("p",xi,[t("div",{id:"user-bio-"+e(s).id,innerHTML:e(s).bio.length>300?`${e(s).bio.slice(0,300)}...`:e(s).bio},null,8,Mi),e(s).bio.length>300?(o(),a("a",{key:0,id:"user-bio-read-more-"+e(s).id,class:"href",onClick:$[9]||($[9]=Q(N=>fe(e(s).bio,e(s).id,"user-bio-read-more-","user-bio-"),["prevent"]))},r(L.$t("readMore")),9,Ci)):n("",!0)])):n("",!0)])])])]),t("div",Ii,[t("img",{preload:"",loading:"lazy",class:"flex mx-auto -mt-14 w-2/6 sm:-mt-16 sm:w-1/5 avatar md:hidden",src:L.avatarCoverUrl(e(s).avatar_bucket,e(s).avatar_filename),onError:$[10]||($[10]=(...N)=>L.imageLoadError&&L.imageLoadError(...N))},null,40,Li),t("div",Ei,r(e(s).name),1),t("div",null,r(e(s).username),1),t("div",Ai,[e(s).pen_name?(o(),a("span",Fi,[d(k,{name:"i-ion-pencil-outline",class:"mr-1 text-base font-bold"}),V(" "+r(e(s).pen_name&&e(s).pen_name!==""?e(s).pen_name:"-"),1)])):n("",!0),t("div",Pi,[e(s).gender==="m"?(o(),a("span",Ti,[d(k,{name:"i-ion-male-outline",class:"mr-1 ml-2 text-base font-bold"}),V(" he/him/his ")])):n("",!0),e(s).gender==="f"?(o(),a("span",Si,[d(k,{name:"i-ion-female-outline",class:"mr-1 ml-2 text-base font-bold"}),V(" she/her ")])):n("",!0)])]),e(s).bio?(o(),a("div",zi,[t("div",{id:"mobile__user-bio-"+e(s).id,innerHTML:e(s).bio.length>150?`${e(s).bio.slice(0,300)}...`:e(s).bio},null,8,Ri),e(s).bio.length>150?(o(),a("a",{key:0,id:"mobile__user-bio-read-more-"+e(s).id,class:"href",onClick:$[11]||($[11]=Q(N=>fe(e(s).bio,e(s).id,"mobile__user-bio-read-more-","mobile__user-bio-"),["prevent"]))},r(L.$t("readMore")),9,ji)):n("",!0)])):n("",!0),e(s).user_socials?(o(),a("div",Bi,[e(s).user_socials.personal_website?(o(),a("button",{key:0,onClick:$[12]||($[12]=N=>L.openModal("external-website-visit-confirmation-modal")),target:"blank",class:"cursor-pointer"},[d(k,{name:"i-ph-link-simple-break-bold","text-size":"text-xl"})])):n("",!0),e(s).user_socials.patreon?(o(),a("a",{key:1,href:"https://patreon.com/"+e(s).user_socials.patreon+"/",target:"blank",class:"cursor-pointer"},[d(k,{name:"i-gg-patreon","text-size":"text-xl"})],8,Oi)):n("",!0),e(s).user_socials.twitch?(o(),a("a",{key:2,href:"https://twitch.com/"+e(s).user_socials.twitch+"/",target:"blank",class:"cursor-pointer"},[d(k,{name:"i-ph-twitch-logo-fill","text-size":"text-xl"})],8,Ui)):n("",!0),e(s).user_socials.instagram?(o(),a("a",{key:3,href:"https://instagram.com/"+e(s).user_socials.instagram+"/",target:"blank",class:"cursor-pointer"},[d(k,{name:"i-ion-logo-instagram","text-size":"text-xl"})],8,Vi)):n("",!0),e(s).user_socials.twitter?(o(),a("a",{key:4,href:"https://twitter.com/"+e(s).user_socials.twitter,target:"blank",class:"cursor-pointer"},[d(k,{name:"i-ion-logo-twitter","text-size":"text-xl"})],8,Di)):n("",!0),e(s).user_socials.facebook?(o(),a("a",{key:5,href:"https://facebook.com/"+e(s).user_socials.facebook,target:"blank",class:"cursor-pointer"},[d(k,{name:"i-ion-logo-facebook","text-size":"text-xl"})],8,Ni)):n("",!0),e(s).user_socials.youtube?(o(),a("a",{key:6,href:e(s).user_socials.youtube,target:"blank",class:"cursor-pointer"},[d(k,{name:"i-ion-logo-youtube","text-size":"text-xl"})],8,Hi)):n("",!0),e(s).user_socials.discord?(o(),a("a",{key:7,href:"https://discord.com/"+e(s).user_socials.discord+"/",target:"blank",class:"cursor-pointer"},[d(k,{name:"i-ic-twotone-discord","text-size":"text-xl"})],8,qi)):n("",!0),e(s).user_socials.picarto?(o(),a("a",{key:8,href:"https://picarto.tv/"+e(s).user_socials.picarto+"/",target:"blank",class:"cursor-pointer"},[d(k,{name:"i-cib-picarto-tv","text-size":"text-xl"})],8,Wi)):n("",!0),e(s).user_socials.gumroad?(o(),a("a",{key:9,href:"https://"+e(s).user_socials.gumroad+".gumroad.com",target:"blank",class:"cursor-pointer"},[d(k,{name:"i-cib-gumroad","text-size":"text-xl"})],8,Gi)):n("",!0)])):n("",!0),t("div",Yi,[t("div",{class:"p-2 cursor-pointer hover:text-colored",onClick:$[13]||($[13]=N=>h.value="followerList")},[t("b",null,r(L.thousand(e(O).followers)),1),V("\xA0 "),t("i",null,r(L.$t("followers.followers")),1)]),t("div",{class:"p-2 cursor-pointer hover:text-colored",onClick:$[14]||($[14]=N=>h.value="followingList")},[t("b",null,r(L.thousand(e(O).followings)),1),V("\xA0 "),t("i",null,r(L.$t("followings.followings")),1)])]),e(i).loggedIn&&e(s).id!==e(i).user.id?(o(),a("div",{key:2,class:S(["mt-2 w-auto",e(K).isFollowing?"danger-button":"primary-button"]),onClick:$[15]||($[15]=N=>e(K).isFollowing?q(e(s).id):R(e(s).id))},[M(t("div",Ki,[d(k,{name:"i-ri-user-add-fill","text-size":"text-base"}),V(" "+r(L.$t("follow")),1)],512),[[A,!e(K).isFollowing]]),M(t("div",Ji,[d(k,{name:e(ce),"text-size":"text-base"},null,8,["name"]),V(" "+r(e(ne)===null?L.$t("followings.followings"):e(ne)),1)],512),[[A,e(K).isFollowing]])],2)):n("",!0),M(t("div",Qi,[t("div",Zi,[t("label",{onClick:$[16]||($[16]=N=>e(i).i502p00r0?e(K).isPrivate?R(e(s).id,!1):R(e(s).id,!0):null),for:"small-toggle",class:"inline-flex relative flex-row justify-center items-center mt-2 cursor-pointer"},[t("input",{id:"small-toggle",type:"checkbox",class:"sr-only peer",checked:e(K).isPrivate,disabled:!e(i).i502p00r0},null,8,Xi),t("div",{class:S(["w-9 h-5 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-4 after:w-4 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600",{unclickable:!e(i).i502p00r0},e(i).i502p00r0?" after:top-[2px]":" after:top-[4px]"])},null,2),en,e(i).i502p00r0?n("",!0):(o(),H(ie,{key:0,class:"ml-1"}))])])],512),[[A,e(K).isFollowing]])]),t("div",tn,[t("div",on,[t("div",{class:S(["profile-navigation__mobile theme-color-secondary",{"button-color text-white":e(h)=="dashboard"}]),onClick:$[17]||($[17]=N=>B("dashboard"))},[t("div",null,[M(d(k,{name:"i-ion-home-outline",class:"text-white"},null,512),[[A,e(h)=="dashboard"]]),M(d(k,{name:"i-ion-home-outline",class:"hover:text-white"},null,512),[[A,e(h)!="dashboard"]])]),t("span",null,r(L.$t("dashboard")),1)],2),t("div",{class:S(["profile-navigation__mobile theme-color-secondary",{"button-color text-white":e(h)=="albums"}]),onClick:$[18]||($[18]=N=>B("albums"))},[t("div",null,[M(d(k,{name:"i-ion-folder-outline",class:"text-white"},null,512),[[A,e(h)=="albums"]]),M(d(k,{name:"i-ion-folder-outline",class:"hover:text-white"},null,512),[[A,e(h)!="albums"]])]),t("span",null,r(L.$t("albums.album")),1)],2),t("div",{class:S(["profile-navigation__mobile theme-color-secondary",{"button-color text-white":e(h)=="collections"}]),onClick:$[19]||($[19]=N=>B("collections"))},[t("div",null,[M(d(k,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[A,e(h)=="collections"]]),M(d(k,{name:"i-majesticons-bookmark-line",class:"hover:text-white"},null,512),[[A,e(h)!="collections"]])]),t("span",null,r(L.$t("collections.collection")),1)],2),e(i).loggedIn&&e(i).user.id===e(s).id?(o(),a("div",{key:0,class:S(["profile-navigation__mobile theme-color-secondary",{"button-color text-white":e(h)=="liked"}]),onClick:$[20]||($[20]=N=>B("liked"))},[t("div",null,[M(d(k,{name:"i-ri-heart-3-line",class:"text-white"},null,512),[[A,e(h)=="liked"]]),M(d(k,{name:"i-ri-heart-3-line",class:"hover:text-white"},null,512),[[A,e(h)!="liked"]])]),t("span",null,r(L.$t("artworks.liked")),1)],2)):n("",!0)]),t("div",sn,[t("div",ln,[t("div",{class:S(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":e(h)==="dashboard"}]),onClick:$[21]||($[21]=N=>B("dashboard"))},[t("div",an,[M(d(k,{name:"i-humbleicons-dashboard",class:"text-white"},null,512),[[A,e(h)==="dashboard"]]),M(d(k,{name:"i-humbleicons-dashboard"},null,512),[[A,e(h)!=="dashboard"]]),t("label",nn,r(L.$t("dashboard")),1)]),rn],2),t("div",{class:S(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":e(h)==="albums"}]),onClick:$[22]||($[22]=N=>B("albums"))},[t("div",dn,[M(d(k,{name:"i-bx-photo-album",class:"text-white"},null,512),[[A,e(h)==="albums"]]),M(d(k,{name:"i-bx-photo-album"},null,512),[[A,e(h)!=="albums"]]),t("label",cn,r(L.$t("albums.album")),1)]),t("span",un,r(L.thousand(e(O).album)),1)],2),t("div",{class:S(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":e(h)==="collections"}]),onClick:$[23]||($[23]=N=>B("collections"))},[t("div",mn,[M(d(k,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[A,e(h)==="collections"]]),M(d(k,{name:"i-majesticons-bookmark-line"},null,512),[[A,e(h)!=="collections"]]),t("label",fn,r(L.$t("collections.collection")),1)]),t("span",pn,r(L.thousand(e(O).collection)),1)],2),e(i).loggedIn&&e(i).user.id===e(s).id?(o(),a("div",vn)):n("",!0),e(i).loggedIn&&e(i).user.id===e(s).id?(o(),a("div",{key:1,class:S(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":e(h)==="liked"}]),onClick:$[24]||($[24]=N=>B("liked"))},[t("div",hn,[M(d(k,{name:"i-ri-heart-3-line",class:"text-white"},null,512),[[A,e(h)==="liked"]]),M(d(k,{name:"i-ri-heart-3-line"},null,512),[[A,e(h)!=="liked"]]),t("label",wn,r(L.$t("artworks.liked")),1)]),t("span",gn,r(L.thousand(e(O).liked)),1)],2)):n("",!0)]),t("div",bn,[e(h)==="dashboard"?(o(),a("div",_n,[t("div",kn,[t("div",{class:S(["flex flex-row justify-between w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":e(C)==="feed"}]),onClick:$[25]||($[25]=N=>C.value="feed")},[V(r(L.$t("feed"))+" ",1),t("span",{class:S(["px-1 ml-2 rounded",e(C)==="feed"?"theme-color":"button-color text-white"])},r(L.thousand(e(O).feed)),3)],2),t("div",{class:S(["flex flex-row justify-between mr-0 w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":e(C)==="artwork"}]),onClick:$[26]||($[26]=N=>C.value="artwork")},[V(r(L.$t("artworks.artwork"))+" ",1),t("span",{class:S(["px-1 ml-2 rounded",e(C)==="artwork"?"theme-color":"button-color text-white"])},r(L.thousand(e(O).artwork)),3)],2)]),M(t("div",yn,[t("button",{onClick:$[27]||($[27]=N=>e(I).manageMode=!e(I).manageMode),class:S(["w-full action-button md:w-auto mt-2 md:mt-0",e(I).manageMode?"danger-button":"secondary-button"])},[d(k,{name:e(I).manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),V(" "+r(e(I).manageMode?L.$t("quit"):L.$t("manage")),1)],2),M(t("button",{onClick:$[28]||($[28]=N=>D()),class:"w-full primary-button md:w-auto"},[d(k,{name:"i-ion-add-outline"}),V(" "+r(L.$t("albums.addToAlbum")),1)],512),[[A,e(I).manageMode]])],512),[[A,!e(E)&&e(i).loggedIn&&e(i).user.id===e(s).id&&e(C)==="artwork"&&e(I).showManageMode]]),d(re,{loading:e(E),"background-color":"theme-color-secondary"},null,8,["loading"]),M(t("div",{class:"p-2 mt-2 text-black bg-yellow-200 rounded-md"},r(L.$t("profile.manageModeActiveMessage")),513),[[A,e(I).manageMode]]),t("div",$n,[e(C)==="feed"?(o(),H(Yt,{key:0,ref:"feedListRef","user-id":e(s).id},null,8,["user-id"])):n("",!0),!e(E)&&e(C)==="artwork"?(o(),H(Zt,{key:1,ref_key:"artworkListRef",ref:f,"user-id":e(s).id,"manage-mode":e(I).manageMode,onFeedSelectedItems:U,onOnEmpty:c},null,8,["user-id","manage-mode"])):n("",!0)])])):n("",!0),e(h)==="albums"?(o(),a("div",xn,[e(E)?n("",!0):(o(),H(js,{key:0,"user-id":e(s).id},null,8,["user-id"]))])):n("",!0),e(h)==="collections"?(o(),a("div",Mn,[e(E)?n("",!0):(o(),H(ba,{key:0,"user-id":e(s).id},null,8,["user-id"]))])):n("",!0),e(i).loggedIn&&e(i).user.id===e(s).id&&e(h)==="liked"?(o(),a("div",Cn,[e(E)?n("",!0):(o(),H($a,{key:0,"user-id":e(s).id,onOnEmpty:c},null,8,["user-id"]))])):n("",!0),e(h)==="followerList"?(o(),a("div",In,[e(E)?n("",!0):(o(),H(Aa,{key:0,"user-id":e(s).id,hide:e(i).loggedIn?e(s).id!==e(i).user.id:e(s).is_pro&&!!e(s).user_settings.hide_follower_list,"user-hide-follower-list-status":!!e(s).user_settings.hide_follower_list},null,8,["user-id","hide","user-hide-follower-list-status"]))])):n("",!0),e(h)==="followingList"?(o(),a("div",Ln,[e(E)?n("",!0):(o(),H(Ua,{key:0,"user-id":e(s).id,hide:e(i).loggedIn?e(s).id!==e(i).user.id:e(s).is_pro&&!!e(s).user_settings.hide_following_list,"user-hide-following-list-status":!!e(s).user_settings.hide_following_list},null,8,["user-id","hide","user-hide-following-list-status"]))])):n("",!0)])])])]),e(s).user_socials&&e(s).user_socials.personal_website?(o(),H(pe,{key:0,id:"external-website-visit-confirmation-modal",class:"modal","modal-id":"external-website-visit-confirmation-modal",message:"<div>You are going to visit this website, are you sure?</div><div class='text-center w-full italic href mt-4 rounded-md p-2 rounded-md theme-color-secondary'>"+e(s).user_socials.personal_website+"</div>",onOnAccept:He},null,8,["message"])):n("",!0),e(E)?n("",!0):(o(),H(Ze,{key:1,id:"album-selection-modal",ref_key:"albumSelectionModalRef",ref:W,class:"modal","work-ids":e(z),onAddedToAlbum:ve},null,8,["work-ids"])),M(d(be,{id:"item-added-to-album-alert",text:L.$t("albums.itemAdded")},null,8,["text"]),[[A,e(Y)]])]),_:1})}}},Nn=oe(En,[["__scopeId","data-v-3e6fad42"]]);export{Nn as P};
