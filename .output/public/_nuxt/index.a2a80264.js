import{j as Q,k as U,Y as X,r as i,E as Z,J,c as ee,w as te,o as S,q as s,t as a,K as n,u as o,e as r,L as g,s as w,p as F,x as I,b as $,v as _,aw as oe,H as V,M as se,N as ne}from"./entry.e86746f3.js";import{u as ae}from"./nuxt-img.978eb1b8.js";import{L as le}from"./Layout.04566d95.js";import{W as ie}from"./WorkList.0bfb6f77.js";import{M as re}from"./ModalView.e487b658.js";import{_ as ue}from"./LoadingEmptyErrorMessage.30f12734.js";import{_ as pe}from"./TagFilterSelection.b11c8c5f.js";import{_ as de}from"./_plugin-vue_export-helper.a1a6add7.js";import"./useReport.24d86f53.js";import"./Spinner.cfab8439.js";import"./user-counters-api.1e743ca3.js";import"./useFeed.1ec68f4a.js";const ce=h=>(se("data-v-f9702757"),h=h(),ne(),h),me={id:"lists"},ve={class:"navigations"},fe={class:"title"},ge={class:"buttons"},we={class:"filter-buttons"},be={class:"filter-buttons"},he={class:"filter-buttons"},ye={class:"inline-block w-full md:w-52 group"},ke={class:"flex items-center py-2 px-3 w-full rounded-md outline-none md:w-52 theme-color hover:button focus:outline-none"},$e={class:"flex-1 pr-1"},_e=ce(()=>s("span",null,[s("svg",{class:"w-4 h-4 transition duration-150 ease-in-out transform fill-current group-hover:-rotate-180",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[s("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1)),xe={class:"absolute z-10 mt-1 w-full text-center rounded-md transition duration-150 ease-in-out transform origin-top scale-0 md:w-52 theme-color group-hover:scale-100"},Ce={key:0,class:"filter-buttons"},Me={class:"mt-4"},Pe={key:0,class:"art-list-view-paging-control"},Se={id:"popular-modal",class:"modal work-view"},Ve={__name:"index",setup(h){const N=Q(),{oApiConfiguration:j,fetchOptions:z}=U(),W=ae(j,z());X(()=>{p()});const m=i(void 0),x=async t=>{m.value=t,c.page=0,await p()},v=i("daily"),y=async t=>{v.value=t,c.page=0,await p()},A=i(null),D=()=>{A.value.init(oe(C.value)),V().openModal("tag-filter-selection-modal")},B=i(""),C=i(),M=i(0),q=async(t,e)=>{C.value=t,B.value=e,M.value=e!==""?e.split(",").length:0,c.page=0,V().closeModal("tag-filter-selection-modal"),await p()};Z(async()=>C.value,t=>{p()});const L=i([]),f=i({pagination:{enablePrev:!0,enableNext:!0}}),p=async()=>{const t=await H(),e=t.works,l=t.pagination;!e.length&&l.record_total===0?K():(L.value=e,l.next_previous.next_page===null?f.value.pagination.enableNext=!1:f.value.pagination.enableNext=!0,l.next_previous.prev_page===null?f.value.pagination.enablePrev=!1:f.value.pagination.enablePrev=!0)},d=i(!0),c=J({perPage:30,page:i(0)}),H=async()=>{c.page===0&&(d.value=!0);const[t,e]=await W.getMostPopular({pagination:{perPage:c.perPage,page:c.page},range:v.value,rangeMode:u.value,explicitMode:m.value,tags:B.value});if(e)O();else return Y(),t},E=async t=>{t==="prev"?c.page-=1:c.page+=1,await p()},b=i(!1),K=()=>{b.value=!0},k=i(!1),O=()=>{d.value=!1,k.value=!0},Y=()=>{d.value=!1,b.value=!1,k.value=!1},R=i(null),G=(t,e=!1)=>{R.value.view(t,e),V().openModal("popular-modal")},u=i("views"),T=i(""),P=async(t,e)=>{u.value=t,T.value=e,await p()};return(t,e)=>(S(),ee(le,{"with-footer":!0,"hide-side":!0,"no-right-side":!0,fullscreen:!0},{default:te(()=>[s("div",me,[s("div",ve,[s("div",fe,a(t.$t("artworks.popularArtworks")),1),s("div",ge,[s("div",we,[s("button",{class:n(["px-3 rounded-md button-item",o(M)?"button":"theme-color"]),onClick:D},a(o(M))+" "+a(t.$t("tagsApplied")),3)]),s("div",be,[s("p",{class:n(["rounded-l-md button-item",[o(v)==="daily"?"button":"theme-color"]]),onClick:e[0]||(e[0]=l=>y("daily"))},a(t.$t("daily")),3),s("p",{class:n(["button-item",[o(v)==="weekly"?"button":"theme-color"]]),onClick:e[1]||(e[1]=l=>y("weekly"))},a(t.$t("weekly")),3),s("p",{class:n(["button-item",[o(v)==="monthly"?"button":"theme-color"]]),onClick:e[2]||(e[2]=l=>y("monthly"))},a(t.$t("monthly")),3),s("p",{class:n(["rounded-r-md button-item",[o(v)==="all"?"button":"theme-color"]]),onClick:e[3]||(e[3]=l=>y("all"))},a(t.$t("allTime")),3)]),s("div",he,[s("div",ye,[s("button",ke,[s("span",$e,a(o(u)==="views"?t.$t("mostViewed"):o(T)),1),_e]),s("ul",xe,[s("li",{class:n(["flex flex-row justify-between py-2 px-3 cursor-pointer hover:button icon-hover-parent",{button:o(u)==="views"}]),onClick:e[4]||(e[4]=l=>P("views",t.$t("mostViewed")))},[r(g,{name:"i-mi-eye",class:n({"text-white":o(u)==="views"})},null,8,["class"]),w(" "+a(t.$t("mostViewed")),1)],2),s("li",{class:n(["flex flex-row justify-between py-2 px-3 cursor-pointer hover:button icon-hover-parent",{button:o(u)==="likes"}]),onClick:e[5]||(e[5]=l=>P("likes",t.$t("mostLiked")))},[r(g,{name:"i-ri-heart-3-line",class:n({"text-white":o(u)==="likes"})},null,8,["class"]),w(" "+a(t.$t("mostLiked")),1)],2),s("li",{class:n(["flex flex-row justify-between py-2 px-3 rounded-b-md cursor-pointer hover:button icon-hover-parent",{button:o(u)==="comments"}]),onClick:e[6]||(e[6]=l=>P("comments",t.$t("mostCommented")))},[r(g,{name:"i-mdi-comment-multiple-outline",class:n({"text-white":o(u)==="comments"})},null,8,["class"]),w(" "+a(t.$t("mostCommented")),1)],2)])])]),o(N).loggedIn&&o(N).user.user_settings.show_explicit?(S(),F("div",Ce,[s("p",{class:n(["rounded-l-md button-item",[o(m)===void 0?"button":"theme-color"]]),onClick:e[7]||(e[7]=l=>x(void 0))},a(t.$t("default")),3),s("p",{class:n(["button-item",[o(m)==="safe"?"button":"theme-color"]]),onClick:e[8]||(e[8]=l=>x("safe"))},a(t.$t("safe")),3),s("p",{class:n(["rounded-r-md button-item",[o(m)==="explicit"?"button":"theme-color"]]),onClick:e[9]||(e[9]=l=>x("explicit"))},[r(g,{name:"i-material-symbols-explicit-outline",class:n({"text-white":o(m)==="explicit"})},null,8,["class"]),w(" "+a(t.$t("explicit")),1)],2)])):I("",!0)])]),r(ue,{loading:o(d),empty:o(b),error:o(k),fetch:p},null,8,["loading","empty","error"]),$(s("div",Me,[$(r(ie,{"section-class":"work-grid",works:o(L),view:G},null,8,["works"]),[[_,!o(b)]])],512),[[_,!o(d)]]),!o(d)&&!o(b)&&!o(k)?(S(),F("div",Pe,[s("button",{class:n([o(f).pagination.enablePrev?"primary-button":"disabled-button"]),onClick:e[10]||(e[10]=l=>E("prev"))},[r(g,{name:"i-ion-chevron-back-outline"}),w(" "+a(t.$t("pagination.previous")),1)],2),s("button",{class:n([o(f).pagination.enableNext?"primary-button":"disabled-button"]),onClick:e[11]||(e[11]=l=>E("next"))},[w(a(t.$t("pagination.next"))+" ",1),r(g,{name:"i-ion-chevron-forward-outline",class:"md:ml-2",style:{"margin-right":"0 !important"}})],2)])):I("",!0),s("div",Se,[$(r(re,{ref_key:"popularModalViewRef",ref:R,section:"popular"},null,512),[[_,!o(d)]])]),$(r(pe,{id:"tag-filter-selection-modal",ref_key:"tagFilterSelectionModalRef",ref:A,class:"modal",onApply:q},null,512),[[_,!o(d)]])])]),_:1}))}},De=de(Ve,[["__scopeId","data-v-f9702757"]]);export{De as default};
