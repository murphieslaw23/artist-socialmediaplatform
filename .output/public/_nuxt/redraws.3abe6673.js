import{u as $,d as A}from"./ProBadge.e3dc9c3a.js";import{k as L,a as M,p as B,r as g,c as C,w,o as i,b as n,N,f as r,Q as R,s as I,t as l,u as a,q as _,x as f,e as T,v as V,y as D}from"./entry.ea93fdf2.js";import{L as P}from"./Layout.7db09108.js";import{W}from"./WorkList.4a26cf02.js";import{_ as H}from"./LoadingEmptyErrorMessage.118d4a88.js";import{_ as S}from"./_plugin-vue_export-helper.c27b6911.js";const j={class:"flex flex-row justify-start w-full md:w-auto"},q={key:0,class:"p-2 mb-6 w-full rounded-md theme-color"},z={key:0},F={class:"flex flex-col"},O={class:"mb-2 text-lg font-bold"},Q=["innerHTML"],G={class:"title"},J={id:"lists"},K={__name:"redraws",setup(U){const{oApiConfiguration:v,fetchOptions:k}=L(),m=$(v,k()),h=M(),{id:d}=h.params;B(()=>{b(),y()});const o=g({options:{loading:!0},data:{}}),y=async()=>{o.value.options.loading=!0;const[e,s]=await m.getWorkById(d);s||(o.value.data=e),o.value.options.loading=!1},t=g({options:{loading:!0,pagination:{page:0,perPage:24},isEmpty:!1},data:[],pagination:{}}),b=async()=>{t.value.options.pagination.page=0,await p()},x=async()=>{t.value.options.pagination.page+=1,await p()},p=async()=>{t.value.options.loading=!0;const[e,s,c]=await m.getRedraws({workId:d,pagination:{page:t.value.options.pagination.page,perPage:t.value.options.pagination.perPage}});c||(e.forEach(u=>{t.value.data.push(u)}),t.value.pagination=s,t.value.options.isEmpty=!1,s.record_total||(t.value.options.isEmpty=!0)),t.value.options.loading=!1};return(e,s)=>{const c=A,u=D;return i(),C(P,{"with-footer":!0,"hide-side":!0,"no-right-side":!0},{default:w(()=>[n("div",j,[n("a",{class:"mb-4 light-button",onClick:s[0]||(s[0]=N(E=>e.$router.back(),["prevent"]))},[r(R,{name:"i-typcn-arrow-back"}),I(" "+l(e.$t("back")),1)])]),a(o).options.loading?f("",!0):(i(),_("div",q,[r(u,{to:"/a/"+a(d),class:"flex flex-row gap-2"},{default:w(()=>[a(o).data.artwork_assets?(i(),_("div",z,[r(c,{preload:"",loading:"lazy",class:"w-40 rounded-md",src:e.artworkThumb(a(o).data.artwork_assets[0].bucket,a(o).data.artwork_assets[0].filename,"thumbnail",!1),onError:e.imageLoadError},null,8,["src","onError"])])):f("",!0),n("div",F,[n("span",O,l(a(o).data.title),1),n("p",{innerHTML:a(o).data.description.length>200?a(o).data.description.slice(0,200)+"..":a(o).description},null,8,Q)])]),_:1},8,["to"])])),n("div",null,[n("div",G,l(e.$t("artworks.redraws")),1),n("div",J,[T(r(W,{"section-class":"work-grid-6",works:a(t).data,view:null,"hide-redraw-icon":!0},null,8,["works"]),[[V,!a(t).options.isEmpty]]),r(H,{class:"mb-2",loading:a(t).options.loading,empty:a(t).options.isEmpty,error:!1,fetch:p},null,8,["loading","empty"]),a(t).pagination.next_previous&&a(t).pagination.next_previous.next_page?(i(),_("button",{key:0,class:"w-full primary-button",onClick:s[1]||(s[1]=E=>x())},l(e.$t("loadMore")),1)):f("",!0)])])]),_:1})}}},et=S(K,[["__scopeId","data-v-fcb3303f"]]);export{et as default};
