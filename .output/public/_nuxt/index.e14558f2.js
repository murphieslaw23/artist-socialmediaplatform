import{k as J,j as le,O as z,E as W,r as a,Y as Q,o as S,p as R,q as t,t as l,b,v as h,u as e,K as n,e as c,L as g,s as k,x as j,H as re,M as X,N as Z,C as ie,l as ue,f as G,m as ce,c as pe,w as de,F as ve,T as me,U as fe}from"./entry.e86746f3.js";import{L as ge}from"./Layout.04566d95.js";import{u as we}from"./nuxt-img.978eb1b8.js";import{W as be}from"./WorkList.0bfb6f77.js";import{_ as ee}from"./LoadingEmptyErrorMessage.30f12734.js";import{M as ye}from"./ModalView.e487b658.js";import{_ as D}from"./_plugin-vue_export-helper.a1a6add7.js";import{U as he}from"./UserList.f4e99503.js";import{u as ke}from"./useUser.ed68435a.js";import"./Spinner.cfab8439.js";import"./useReport.24d86f53.js";import"./user-counters-api.1e743ca3.js";import"./useFeed.1ec68f4a.js";const te=x=>(X("data-v-01f29fee"),x=x(),Z(),x),_e={class:"navigations"},$e={class:"title"},xe={class:"buttons"},Ce={class:"filter-buttons"},Pe={class:"filter-buttons"},qe={key:0,class:"filter-buttons"},Me={class:"navigations"},Ae=te(()=>t("div",null,null,-1)),Ne={class:"buttons"},Ue={class:"filter-buttons"},Ee={class:"filter-buttons"},Ve={class:"inline-block w-full md:w-52 group"},Ie={class:"flex items-center py-2 px-3 w-full rounded-md outline-none md:w-52 theme-color hover:button focus:outline-none"},Le={class:"flex-1 pr-1"},Se=te(()=>t("span",null,[t("svg",{class:"w-4 h-4 transition duration-150 ease-in-out transform fill-current group-hover:-rotate-180",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[t("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1)),Be={class:"absolute z-10 mt-1 w-full text-center rounded-md transition duration-150 ease-in-out transform origin-top scale-0 md:w-52 theme-color group-hover:scale-100"},Re={class:"mt-4"},Te={key:0,class:"art-list-view-paging-control"},Fe={id:"popular-modal",class:"modal work-view"},Oe={__name:"Artworks",emits:["countArtworks"],setup(x,{emit:A}){const{oApiConfiguration:B,fetchOptions:q}=J(),y=we(B,q()),m=le(),U=z(),{q:I}=U.query;W(()=>U.query.q,(s,o)=>{s!==o&&(N.value=s,_())});const N=a(I);Q(()=>{_()});const v=a("recent"),C=async s=>{v.value=s,await _()},r=a(void 0),p=async s=>{r.value=s,d.value.page=0,await _()},f=a("daily"),E=async s=>{f.value=s,d.value.page=0,await _()},w=a(!1),F=async()=>{w.value=!w.value,d.value.page=0,await _()},V=a([]),P=a({pagination:{enablePrev:!0,enableNext:!0}}),_=async()=>{const s=await $(),o=s.works,i=s.pagination;!o.length&&i.record_total===0?oe():(V.value=o,i.next_previous.next_page===null?P.value.pagination.enableNext=!1:P.value.pagination.enableNext=!0,i.next_previous.prev_page===null?P.value.pagination.enablePrev=!1:P.value.pagination.enablePrev=!0,A("countArtworks",i.record_total))},u=a(!0),d=a({perPage:18,page:a(0)}),$=async()=>{var i;d.value.page===0&&(u.value=!0,L.value=!1);const[s,o]=await y.getSearch({recentMode:v.value==="recent",range:f.value,rangeMode:M.value,explicitMode:r.value,keyword:(i=N.value)!=null?i:"",followingOnly:w.value,pagination:{perPage:d.value.perPage,page:d.value.page}});if(o)se();else return ne(),s},H=async s=>{s==="prev"?d.value.page-=1:d.value.page+=1,await _()},L=a(!1),oe=()=>{L.value=!0,A("countArtworks",0)},T=a(!1),se=()=>{u.value=!1,T.value=!0},ne=()=>{u.value=!1,L.value=!1,T.value=!1},K=a(null),ae=(s,o=!1)=>{K.value.view(s,o),re().openModal("popular-modal")},M=a("views"),Y=a(""),O=async(s,o)=>{M.value=s,Y.value=o,await _()};return(s,o)=>(S(),R("div",null,[t("div",_e,[t("div",$e,l(s.$t("artworks.artworks")),1),t("div",xe,[b(t("div",Ce,[t("button",{class:n(["px-3 rounded-md button-item",e(w)?"button":"theme-color"]),onClick:o[0]||(o[0]=i=>F())},[b(c(g,{name:"i-fluent-people-checkmark-24-regular",class:"text-white"},null,512),[[h,e(w)]]),b(c(g,{name:"i-fluent-people-checkmark-24-regular"},null,512),[[h,!e(w)]]),k(" "+l(s.$t("followings.followings")),1)],2)],512),[[h,e(m).loggedIn]]),t("div",Pe,[t("p",{class:n(["rounded-l-md button-item",[e(v)==="recent"?"button":"theme-color"]]),onClick:o[1]||(o[1]=i=>C("recent"))},l(s.$t("artworks.newest")),3),t("p",{class:n(["rounded-r-md button-item",[e(v)==="popularity"?"button":"theme-color"]]),onClick:o[2]||(o[2]=i=>C("popularity"))},[c(g,{name:"i-icon-park-outline-oval-love-two",class:n([{"text-white":e(v)==="popularity"}])},null,8,["class"]),k(" "+l(s.$t("artworks.mostPopular")),1)],2)]),e(m).loggedIn&&e(m).user.user_settings.show_explicit?(S(),R("div",qe,[t("p",{class:n(["rounded-l-md button-item",[e(r)===void 0?"button":"theme-color"]]),onClick:o[3]||(o[3]=i=>p(void 0))},l(s.$t("default")),3),t("p",{class:n(["button-item",[e(r)==="safe"?"button":"theme-color"]]),onClick:o[4]||(o[4]=i=>p("safe"))},l(s.$t("safe")),3),t("p",{class:n(["rounded-r-md button-item",[e(r)==="explicit"?"button":"theme-color"]]),onClick:o[5]||(o[5]=i=>p("explicit"))},[c(g,{name:"i-material-symbols-explicit-outline",class:n({"text-white":e(r)==="explicit"})},null,8,["class"]),k(" "+l(s.$t("explicit")),1)],2)])):j("",!0)])]),t("div",Me,[Ae,t("div",Ne,[b(t("div",Ue,[t("p",{class:n(["rounded-l-md button-item",[e(f)==="daily"?"button":"theme-color"]]),onClick:o[6]||(o[6]=i=>E("daily"))},l(s.$t("daily")),3),t("p",{class:n(["button-item",[e(f)==="weekly"?"button":"theme-color"]]),onClick:o[7]||(o[7]=i=>E("weekly"))},l(s.$t("weekly")),3),t("p",{class:n(["button-item",[e(f)==="monthly"?"button":"theme-color"]]),onClick:o[8]||(o[8]=i=>E("monthly"))},l(s.$t("monthly")),3),t("p",{class:n(["rounded-r-md button-item",[e(f)==="all"?"button":"theme-color"]]),onClick:o[9]||(o[9]=i=>E("all"))},l(s.$t("allTime")),3)],512),[[h,e(v)==="popularity"]]),b(t("div",Ee,[t("div",Ve,[t("button",Ie,[t("span",Le,l(e(M)==="views"?s.$t("mostViewed"):e(Y)),1),Se]),t("ul",Be,[t("li",{class:n(["flex flex-row justify-between py-2 px-3 cursor-pointer hover:button icon-hover-parent",{button:e(M)==="views"}]),onClick:o[10]||(o[10]=i=>O("views",s.$t("mostViewed")))},[c(g,{name:"i-mi-eye",class:n({"text-white":e(M)==="views"})},null,8,["class"]),k(" "+l(s.$t("mostViewed")),1)],2),t("li",{class:n(["flex flex-row justify-between py-2 px-3 cursor-pointer hover:button icon-hover-parent",{button:e(M)==="likes"}]),onClick:o[11]||(o[11]=i=>O("likes",s.$t("mostLiked")))},[c(g,{name:"i-ri-heart-3-line",class:n({"text-white":e(M)==="likes"})},null,8,["class"]),k(" "+l(s.$t("mostLiked")),1)],2),t("li",{class:n(["flex flex-row justify-between py-2 px-3 rounded-b-md cursor-pointer hover:button icon-hover-parent",{button:e(M)==="comments"}]),onClick:o[12]||(o[12]=i=>O("comments",s.$t("mostCommented")))},[c(g,{name:"i-mdi-comment-multiple-outline",class:n({"text-white":e(M)==="comments"})},null,8,["class"]),k(" "+l(s.$t("mostCommented")),1)],2)])])],512),[[h,e(v)==="popularity"]])])]),c(ee,{loading:e(u),empty:e(L),error:e(T),fetch:_},null,8,["loading","empty","error"]),b(t("div",Re,[b(c(be,{"section-class":"work-grid",works:e(V),view:ae},null,8,["works"]),[[h,!e(L)]])],512),[[h,!e(u)]]),!e(u)&&!e(L)&&!e(T)?(S(),R("div",Te,[t("button",{class:n(["w-full md:w-auto",[e(P).pagination.enablePrev?"primary-button":"disabled-button"]]),onClick:o[13]||(o[13]=i=>e(P).pagination.enablePrev?H("prev"):null)},[c(g,{name:"i-ion-chevron-back-outline"}),k(" "+l(s.$t("pagination.previous")),1)],2),t("button",{class:n(["w-full md:w-auto",e(P).pagination.enableNext?"primary-button":"disabled-button"]),onClick:o[14]||(o[14]=i=>e(P).pagination.enableNext?H("next"):null)},[k(l(s.$t("pagination.next"))+" ",1),c(g,{name:"i-ion-chevron-forward-outline",class:"ml-2",style:{"margin-right":"0 !important"}})],2)])):j("",!0),t("div",Fe,[b(c(ye,{ref_key:"popularModalViewRef",ref:K,section:"popular"},null,512),[[h,!e(u)]])])]))}},je=D(Oe,[["__scopeId","data-v-01f29fee"]]);const ze=x=>(X("data-v-f12477a5"),x=x(),Z(),x),We={class:"navigations"},De={class:"title"},He=ze(()=>t("div",{class:"buttons"},null,-1)),Ke={key:0,class:"art-list-view-paging-control"},Ye={__name:"Users",emits:["countUsers"],setup(x,{emit:A}){const{oApiConfiguration:B,fetchOptions:q}=J(),y=ke(B,q()),m=z(),{q:U}=m.query;W(()=>m.query.q,(u,d)=>{u!==d&&(I.value=u,C())});const I=a(U);Q(()=>{C()});const N=a([]),v=a({pagination:{enablePrev:!0,enableNext:!0}}),C=async()=>{const u=await f(),d=u.users,$=u.pagination;!d.length&&$.record_total===0?F():(N.value=d,$.next_previous.next_page===null?v.value.pagination.enableNext=!1:v.value.pagination.enableNext=!0,$.next_previous.prev_page===null?v.value.pagination.enablePrev=!1:v.value.pagination.enablePrev=!0,A("countUsers",$.record_total))},r=a(!0),p=a({perPage:16,page:a(0)}),f=async()=>{var $;p.value.page===0&&(r.value=!0,w.value=!1);const[u,d]=await y.searchUsers({keyword:($=I.value)!=null?$:"",pagination:{page:p.value.page,perPage:p.value.perPage}});if(d)P();else return _(),u},E=async u=>{u==="prev"?p.value.page-=1:p.value.page+=1,await C()},w=a(!1),F=()=>{w.value=!0,A("countUsers",0)},V=a(!1),P=()=>{r.value=!1,V.value=!0},_=()=>{r.value=!1,w.value=!1,V.value=!1};return(u,d)=>(S(),R("div",null,[t("div",We,[t("div",De,l(u.$t("users.users")),1),He]),c(ee,{loading:e(r),empty:e(w),error:e(V),fetch:C},null,8,["loading","empty","error"]),b(t("div",null,[b(c(he,{users:e(N)},null,8,["users"]),[[h,!e(w)]])],512),[[h,!e(r)]]),!e(r)&&!e(w)&&!e(V)?(S(),R("div",Ke,[t("button",{class:n(["w-full md:w-auto",[e(v).pagination.enablePrev?"primary-button":"disabled-button"]]),onClick:d[0]||(d[0]=$=>e(v).pagination.enablePrev?E("prev"):null)},[c(g,{name:"i-ion-chevron-back-outline"}),k(" "+l(u.$t("pagination.previous")),1)],2),t("button",{class:n(["w-full md:w-auto",e(v).pagination.enableNext?"primary-button":"disabled-button"]),onClick:d[1]||(d[1]=$=>e(v).pagination.enableNext?E("next"):null)},[k(l(u.$t("pagination.next"))+" ",1),c(g,{name:"i-ion-chevron-forward-outline",class:"ml-2",style:{"margin-right":"0 !important"}})],2)])):j("",!0)]))}},Ge=D(Ye,[["__scopeId","data-v-f12477a5"]]);const Je={id:"lists"},Qe={class:"search"},Xe=["placeholder"],Ze={class:"flex flex-row mb-6 w-full"},et={__name:"index",setup(x){const{t:A}=ie(),B=ue(),q=z();G({title:A("search")+(q.query.q?` "${q.query.q}"`:"")});const y=a("");ce(()=>{y.value=q.query.q});const m=a("artworks"),U=a(0),I=r=>{U.value=r},N=a(0),v=r=>{N.value=r};W(()=>q.query,({q:r})=>{y.value=r,G({title:A("search")+(y.value?` "${y.value}"`:q.query.q)})});const C=()=>{B.push({path:"/search",query:{q:y.value},replace:!0,force:!0})};return(r,p)=>(S(),pe(ge,{"with-footer":!0,"hide-side":!0,"no-right-side":!0},{default:de(()=>[t("div",Je,[t("span",Qe,[b(t("input",{"onUpdate:modelValue":p[0]||(p[0]=f=>me(y)?y.value=f:null),type:"text",name:"search",placeholder:r.$t("search"),onKeyup:p[1]||(p[1]=fe(f=>C(),["enter"]))},null,40,Xe),[[ve,e(y)]]),t("span",{class:"search-button",onClick:p[2]||(p[2]=f=>C())},[c(g,{name:"i-ion-search"})])]),t("div",Ze,[t("div",{class:n(["rounded-lg profile-category-button left-menu-link theme-color-secondary",{"button-color text-white":e(m)==="artworks"}]),onClick:p[3]||(p[3]=f=>m.value="artworks")},[c(g,{name:"i-majesticons-image",class:n(["mr-2",{"text-white":e(m)==="artworks"}])},null,8,["class"]),k(" "+l(r.$t("artworks.artworks"))+" ",1),t("span",{class:n(["px-1 ml-2 rounded",e(m)==="artworks"?"theme-color":"bg-gray-600 text-white"])},l(e(U)),3)],2),t("div",{class:n(["rounded-lg profile-category-button left-menu-link theme-color-secondary",{"button-color text-white":e(m)==="users"}]),onClick:p[4]||(p[4]=f=>m.value="users")},[c(g,{name:"i-fluent-person-32-regular",class:n(["mr-2",{"text-white":e(m)==="users"}])},null,8,["class"]),k(" "+l(r.$t("users.users"))+" ",1),t("span",{class:n(["px-1 ml-2 rounded",e(m)==="users"?"theme-color":"bg-gray-600 text-white"])},l(e(N)),3)],2)]),b(t("div",null,[c(je,{onCountArtworks:I})],512),[[h,e(m)==="artworks"]]),b(t("div",null,[c(Ge,{onCountUsers:v})],512),[[h,e(m)==="users"]])])]),_:1}))}},mt=D(et,[["__scopeId","data-v-2a9a884b"]]);export{mt as default};
