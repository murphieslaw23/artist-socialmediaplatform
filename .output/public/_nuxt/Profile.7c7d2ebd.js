import{h as ne,i as X,a2 as Ue,r as p,o as t,l,T as K,U as Q,m as e,b as d,w as W,p as z,t as s,q as i,s as I,v as L,F as H,J as R,u as w,c as q,G as Z,x as we,K as be,L as ge,a7 as Be,a4 as $e,A as _e,E as ae,D as Le,k as ue,aC as Ae,aD as Pe,S as ze,j as Oe,C as Ve}from"./entry.ec82c8a4.js";import{M as ke,W as xe,e as ce,S as me,d as ve,_ as he,f as fe,g as De,b as Ne}from"./ModalView.705bd7e7.js";import{J as qe,u as ye,L as Ge}from"./Layout.a04c6b50.js";import{_ as C,u as We}from"./Icon.12c4779f.js";import{u as He}from"./useFeed.56c6d0a5.js";import{I as Ee,F as Je}from"./FeedModalView.ea9fdff6.js";import{_ as ee}from"./_plugin-vue_export-helper.a1a6add7.js";import{_ as ie}from"./LoadingEmptyErrorMessage.8ae3c568.js";import{u as Me}from"./useUser.d4c8b691.js";const pe=r=>(be("data-v-7e34e61a"),r=r(),ge(),r),Ke={class:"mx-auto w-full md:w-2/3"},Qe={class:"flex flex-row mb-2 rounded-lg border-none shadow-none theme-color-secondary"},Xe={class:"w-full"},Ye={key:0,class:"p-4 user-info"},Ze=["src"],et={class:"name"},tt=pe(()=>e("br",null,null,-1)),ot=pe(()=>e("span",{class:"mx-1"},"\xB7",-1)),lt={class:"text-xxs"},st={class:"px-2 md:px-4"},at={key:0,class:"my-2 w-full rounded-md theme-color"},nt={key:0,class:"p-2 md:p-4 user-info"},it=["src"],rt={class:"name"},ut=pe(()=>e("br",null,null,-1)),dt=pe(()=>e("span",{class:"mx-1"},"\xB7",-1)),ct={class:"px-2 mt-2 md:px-4"},mt={class:"text-xs font-semibold"},vt=["id"],ft=["id","onClick"],pt=["onClick"],ht={key:0,class:"p-2 mx-auto w-full text-center rounded-md opacity-90 theme-color"},wt={class:"mx-auto mt-2 primary-button"},bt={key:0,class:"p-2 mx-auto w-full text-center rounded-md opacity-90 theme-color"},gt={class:"mx-auto mt-2 primary-button"},_t={class:"float-right mx-4 mt-2 interactions"},kt={key:0,class:"reactions"},yt=["onClick"],$t=["onClick"],xt={class:"option dropdown"},Mt={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"option-dropdown-items"},Ct={class:"option-dropdown dropdown-menu"},It={id:"option-dropdown-items",class:"w-52 toggler","aria-labelledby":"option-dropdown-buttons",role:"menu"},Et={class:"menu-wrapper"},Lt={class:"mx-auto text-center"},At={class:"mx-auto mt-10 text-center"},Pt=pe(()=>e("b",null,"(\u3186_\u3186)",-1)),Ft={class:"mx-auto text-center"},St={id:"chronological-feed-modal",class:"modal work-view"},Tt={id:"artwork-modal",class:"modal work-view"},jt={__name:"Feeds",props:{userId:{type:Number,default:0}},setup(r){const F=r,k=ne(),{oApiConfiguration:u,fetchOptions:S}=X(),v=He(u,S()),{generateArtworkThumb:y}=Ue(),_=p([]),m=p({page:0,perPage:10}),f=async({loaded:o})=>{const[$,E]=await v.getFeedByUserId({userId:F.userId,pagination:{page:m.value.page,perPage:m.value.perPage}});m.value.page+=1;for(let c=0;c<$.feeds.length;c++){const O=$.feeds[c];if(O.liked&&g.value.push(O.id),O.artworks){O.artworks.images=[],O.artworks.apply_explicit_filter=!1;for(let x=0;x<O.artworks.artwork_assets.length;x++)if(x<=3){const B=await y(O.artworks.artwork_assets[x].bucket,O.artworks.artwork_assets[x].filename,"feed");O.artworks.images.push(B)}O.artworks!=null&&(!k.loggedIn&&O.artworks.is_explicit||O.artworks.is_explicit&&!k.user.user_settings.show_explicit)&&(O.artworks.apply_explicit_filter=!0)}_.value.push(O)}o($.feeds.length,m.value.perPage)},a=p(null),n=o=>{a.value.view(o),Z().openModal("chronological-feed-modal")},h=p(null),U=(o,$,E)=>{$?(console.log("removing explicit filter.."),_.value[E].artworks.apply_explicit_filter=!1):(h.value.view(o),Z().openModal("artwork-modal"))},g=p([]),b=async o=>{const[$,E]=await v.like({feedId:o});if($){g.value.push(o);const c=document.getElementById(`profileFeedLikeButton-${o}`);c.classList.add("animate-bounce"),setInterval(()=>{c.classList.remove("animate-bounce")},2500)}},M=async o=>{const[$,E]=await v.unlike({feedId:o});if($){const c=g.value.indexOf(o);g.value.splice(c,1)}};return(o,$)=>{const E=we;return t(),l("div",Ke,[(t(!0),l(K,null,Q(_.value,(c,O)=>(t(),l("div",{key:c.id},[e("div",Qe,[e("div",Xe,[c.users?(t(),l("div",Ye,[d(E,{to:"/profile/"+c.users.username},{default:W(()=>[e("img",{class:"avatar",src:o.avatarCoverUrl(c.users.avatar_bucket,c.users.avatar_filename),onError:$[0]||($[0]=(...x)=>o.imageLoadError&&o.imageLoadError(...x))},null,40,Ze)]),_:2},1032,["to"]),e("div",et,[d(E,{to:"/profile/"+c.users.username,class:"fullname"},{default:W(()=>[z(s(c.users.name),1)]),_:2},1032,["to"]),tt,d(E,{to:"/profile/"+c.users.username,class:"username hover:underline"},{default:W(()=>[z(" @"+s(c.users.username),1)]),_:2},1032,["to"]),ot,e("span",lt,s(o.formatDate(c.scheduled_post?c.scheduled_post:c.created_at,!0)),1)])])):i("",!0),e("div",st,[e("p",null,s(c.text),1),c.artworks?(t(),l("div",at,[c.artworks.users?(t(),l("div",nt,[d(E,{to:"/profile/"+c.artworks.users.username},{default:W(()=>[e("img",{class:"avatar",src:o.avatarCoverUrl(c.artworks.users.avatar_bucket,c.artworks.users.avatar_filename),onError:$[1]||($[1]=(...x)=>o.imageLoadError&&o.imageLoadError(...x))},null,40,it)]),_:2},1032,["to"]),e("div",rt,[d(E,{to:"/profile/"+c.artworks.users.username,class:"fullname hover:href"},{default:W(()=>[z(s(c.artworks.users.name),1)]),_:2},1032,["to"]),ut,d(E,{to:"/profile/"+c.artworks.users.username,class:"hover:underline text-xxs"},{default:W(()=>[z(" @"+s(c.artworks.users.username),1)]),_:2},1032,["to"]),dt,d(E,{to:"/a/"+c.artworks.id,class:"hover:underline text-xxs"},{default:W(()=>[z(s(o.formatDate(c.artworks.scheduled_post?c.artworks.scheduled_post:c.artworks.created_at,!0)),1)]),_:2},1032,["to"])])])):i("",!0),e("div",ct,[e("span",mt,s(c.artworks.title),1),I(e("p",null,[e("span",{id:"feed-description-"+c.artworks.id},s(c.artworks.description.length>300?`${c.artworks.description.slice(0,300)}...`:c.artworks.description),9,vt),c.artworks.description.length>300?(t(),l("a",{key:0,id:"feed-read-more-"+c.artworks.id,class:"href",onClick:H(x=>o.readMore(c.artworks.description,c.artworks.id,"feed-read-more-","feed-description-"),["prevent"])},s(o.$t("readMore")),9,ft)):i("",!0)],512),[[L,c.artworks.description]])]),e("div",null,[o.isMobile()?i("",!0):(t(),l("div",{key:0,class:R(["p-2",{"cursor-pointer":!c.artworks.apply_explicit_filter}]),onClick:H(x=>U(c.artworks.id,c.artworks.apply_explicit_filter,O),["prevent"])},[e("div",{class:R(["overflow-hidden relative p-2 rounded-md",{"md:mx-2":c.artworks.apply_explicit_filter}])},[d(Ee,{class:R([{"blur-3xl unclickable":c.artworks.apply_explicit_filter},c.artworks.apply_explicit_filter?"brightness-50":"brightness-100"]),work:c.artworks},null,8,["class","work"]),c.artworks.apply_explicit_filter?(t(),l("div",ht,[e("div",null,s(w(k).loggedIn?o.$t("explicitContentAlert"):o.$t("explicitContentAlertForGuest")),1),e("button",wt,s(o.$t("explicitShowMeThisContent")),1)])):i("",!0)],2)],10,pt)),o.isMobile()?(t(),q(E,{key:1,to:c.artworks.apply_explicit_filter?null:"/a/"+c.artworks.id,onClick:H(x=>U(c.artworks.id,c.artworks.apply_explicit_filter,O),["prevent"]),class:"cursor-pointer"},{default:W(()=>[e("div",{class:R(["overflow-hidden relative p-2 rounded-md",{"m-2":c.artworks.apply_explicit_filter}])},[d(Ee,{class:R([{"blur-3xl unclickable":c.artworks.apply_explicit_filter},c.artworks.apply_explicit_filter?"brightness-50":"brightness-100"]),work:c.artworks},null,8,["class","work"]),c.artworks.apply_explicit_filter?(t(),l("div",bt,[e("div",null,s(w(k).loggedIn?o.$t("explicitContentAlert"):o.$t("explicitContentAlertForGuest")),1),e("button",gt,s(o.$t("explicitShowMeThisContent")),1)])):i("",!0)],2)]),_:2},1032,["to","onClick"])):i("",!0)])])):i("",!0)]),e("div",_t,[w(k).loggedIn?(t(),l("div",kt,[e("span",{class:"leading-8",onClick:x=>g.value.includes(c.id)?M(c.id):b(c.id)},[I(d(C,{id:"profileFeedLikeButton-"+c.id,name:"i-ion-heart",class:"mr-1 text-red-500 hover:text-red-500"},null,8,["id"]),[[L,g.value.includes(c.id)]]),I(d(C,{name:"i-ion-heart-outline",class:"mr-1 icon-color hover:text-red-500"},null,512),[[L,!g.value.includes(c.id)]]),z(" "+s(o.thousand(c._count.feed_likes)),1)],8,yt),e("span",{class:"leading-8",onClick:H(x=>n(c.id),["prevent"])},[d(C,{name:"i-mdi-comment-multiple-outline",class:"mr-1 icon-color hover:text-blue-500"}),z(" "+s(o.thousand(c._count.feed_comments)),1)],8,$t),e("div",xt,[e("button",Mt,[e("span",null,[d(C,{name:"i-uit-ellipsis-v",class:"align-middle icon icon-color"})])]),e("div",Ct,[e("div",It,[e("div",Et,[d(E,{to:"/feed/"+c.id,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:W(()=>[d(C,{name:"i-fluent-arrow-enter-20-filled",class:"mr-2 text-base"}),z(" "+s(o.$t("open")),1)]),_:2},1032,["to"]),d(E,{to:"/feed/"+c.id,target:"_blank",class:"flex z-20 py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:W(()=>[d(C,{name:"i-ci-external-link",class:"mr-2 text-base"}),z(" "+s(o.$t("openInNewTab")),1)]),_:2},1032,["to"])])])])])])):i("",!0)])])])]))),128)),d(w(qe),{load:f},{loading:W(()=>[e("div",Lt,[d(C,{name:"i-line-md-loading-twotone-loop",class:"text-3xl"})])]),"no-results":W(()=>[e("div",At,[Pt,z(" "+s(o.$t("nothingToShow")),1)])]),"no-more":W(()=>[e("div",Ft,s(o.$t("youHaveReachedTheEnd")),1)]),_:1}),e("div",St,[d(Je,{ref_key:"chronologicalFeedModalViewRef",ref:a,section:"chronological-feed"},null,512)]),e("div",Tt,[d(ke,{ref_key:"artworkModalViewRef",ref:h,section:"artwork"},null,512)])])}}},Rt=ee(jt,[["__scopeId","data-v-7e34e61a"]]),Ut={id:"lists"},Bt=["id"],zt={__name:"Artworks",props:{userId:{type:Number,default:0},manageMode:{type:Boolean,default:!1}},emits:["feedSelectedItems","onEmpty"],setup(r,{emit:F}){const k=r,{oApiConfiguration:u,fetchOptions:S}=X(),v=We(u,S()),y="profile",_=p(!0);Be(()=>{m()});const m=async()=>{const[N,G]=await n();f.value=N,G.record_total<=a.value.perPage&&g(),G.record_total===0&&$()},f=p([]),a=p({perPage:24,page:0}),n=async()=>{a.value.page===0&&(_.value=!0);const[N,G,Y]=await v.getUserArtworks({userId:k.userId,pagination:{page:a.value.page,perPage:a.value.perPage}});if(Y)c();else return G.record_total<=a.value.perPage&&g(),G.record_total===0&&$(),a.value.page+=1,h(),[N,G]},h=()=>{_.value=!1,o.value=!1,E.value=!1},U=p(!0),g=()=>{U.value=!1},b=p({delay:!1}),M=async()=>{b.value.delay=!0;const[N,G]=await n();for(let Y=0;Y<N.length;Y++)f.value.push(N[Y]);b.value.delay=!1,dataPagination.next_previous.next_page||g(),dataPagination.next_previous.next_page&&dataPagination.current_page===b.maxLoad&&(g(),b.showDiscoveryButton=!0)},o=p(!1),$=()=>{o.value=!0,g(),F("onEmpty")},E=p(!1),c=()=>{_.value=!1,E.value=!0,g()},O=p(null),x=(N,G=!1)=>{O.value.view(N,G),Z().openModal(y+"-modal")},B=N=>{F("feedSelectedItems",N)};return(N,G)=>(t(),l("div",Ut,[I(e("div",null,[(t(),q($e,null,[I(d(xe,{"section-class":"work-grid",works:f.value,view:x,"manage-mode":r.manageMode,onFeedManageList:B},null,8,["works","manage-mode"]),[[L,!o.value]])],1024)),I(e("div",{class:R(["primary-button",b.value.delay?"animate-pulse":""]),onClick:M},s(N.$t("loadMore")),3),[[L,U.value]])],512),[[L,!_.value]]),d(ie,{loading:_.value,empty:o.value,error:E.value,fetch:n},null,8,["loading","empty","error"]),e("div",{id:y+"-modal",class:"modal work-view"},[I(d(ke,{ref_key:"profileModalViewRef",ref:O,section:y},null,512),[[L,!_.value]])],8,Bt)]))}},Ot=ee(zt,[["__scopeId","data-v-d66e8da0"]]),Vt={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Dt={class:"title"},Nt=["name"],qt=["placeholder"],Gt=["placeholder"],Wt=["for"],Ht=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),Jt={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},Kt=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Qt=[Kt],Xt={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Yt=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Zt=[Yt],eo={class:"ml-2"},to={class:"flex flex-row gap-2 justify-end mt-2"},oo={type:"submit",class:"primary-button"},lo={__name:"AlbumFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(r,{emit:F}){const k=r,{oApiConfiguration:u,fetchOptions:S}=X(),v=ce(u,S()),{t:y}=_e(),_="create-album-form",m=p({title:"",description:"",isPublic:1,category:"artwork"}),f=async()=>{ye().validate(_,y);try{let a=!1,n={};if(k.category){const[h,U,g]=await v.createAlbum(k.category,m.value);a=h,n=U}a&&(Z().closeModal(k.modalId),F("created",n))}catch{}};return(a,n)=>(t(),l("div",null,[e("div",Vt,[e("div",null,[e("span",Dt,s(a.$t("albums.create.form.title")),1),e("form",{id:_,class:"mt-2",onSubmit:n[4]||(n[4]=H(h=>f(),["prevent"]))},[e("n-validate",{for:"title",name:a.$t("title")},[I(e("input",{"onUpdate:modelValue":n[0]||(n[0]=h=>m.value.title=h),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:a.$t("title")},null,8,qt),[[ae,m.value.title]])],8,Nt),I(e("textarea",{"onUpdate:modelValue":n[1]||(n[1]=h=>m.value.description=h),class:"form-input theme-color-secondary",placeholder:a.$t("description"),"data-gramm":"false"},null,8,Gt),[[ae,m.value.description]]),e("label",{for:m.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:n[2]||(n[2]=h=>m.value.isPublic=!m.value.isPublic)},[Ht,m.value.isPublic?(t(),l("span",Jt,Qt)):i("",!0),m.value.isPublic?i("",!0):(t(),l("span",Xt,Zt))]),e("span",eo,s(a.$t("private")),1)],8,Wt),e("div",to,[e("button",{class:"cancel-button",onClick:n[3]||(n[3]=H(h=>a.closeModal(r.modalId),["prevent"]))},s(a.$t("cancel")),1),e("button",oo,s(a.$t("create")),1)])],32)])])]))}},so={id:"lists"},ao={class:"p-4 mb-4 w-full rounded-md theme-color-secondary"},no={class:"mb-2 text-base font-bold"},io={class:"mb-2"},ro=z(),uo={class:"italic"},co=["id"],mo={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1}},emits:["onAlbumEmpty","feedManageList"],setup(r,{expose:F,emit:k}){const u=r,{oApiConfiguration:S,fetchOptions:v}=X(),y=ce(S,v()),_=p(u.id);Le(()=>u.id,(x,B)=>{_.value=x}),ue(async()=>{await a()});const m=p(!0),f=p({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:24},list:[],empty:!1}),a=async()=>{m.value=!0,await n(),await h(),m.value=!1},n=async()=>{const[x,B]=await y.getInfo(_.value);f.value.info=x.data},h=async()=>{const[x,B,N]=await y.listAlbumItems({albumId:_.value,pagination:{page:f.value.pagination.page,perPage:f.value.pagination.page===0?f.value.pagination.firstLoad:f.value.pagination.perPage}});B?f.value.pagination.page===0?f.value.pagination.page=f.value.pagination.firstLoad/f.value.pagination.perPage:f.value.pagination.page+=f.value.pagination.page!==0?1:2:f.value.loadMore=!1,x!==null&&x.length?(x.forEach(G=>{f.value.list.push(G.artworks)}),k("onAlbumEmpty",!1)):(f.value.empty=!0,k("onAlbumEmpty",!0))},U=()=>{f.value.loadMore=!0,f.value.pagination.page=0,f.value.list=[]},g=p([]),b=x=>{g.value=x,k("feedManageList",x)},M=p(!1);let o;const $=async()=>{const[x,B]=await y.removeItems(u.id,g.value);x&&(ve().splash(o,M,"item-removed-alert"),U(),await a())},E=p("album"),c=p(null),O=(x,B=!1)=>{c.value.view(x,B),Z().openModal(E.value+"-modal")};return F({fetchInfo:n,removeItems:$}),(x,B)=>(t(),l("div",so,[e("div",{class:"hidden",onClick:B[0]||(B[0]=N=>n())}),e("div",{class:"hidden",onClick:B[1]||(B[1]=N=>$())}),e("div",ao,[e("div",no,s(f.value.info.name),1),e("div",io,s(f.value.info.description),1),e("div",null,[e("b",null,s(x.$t("private"))+":",1),ro,e("span",uo,s(f.value.info.is_public?x.$t("no"):x.$t("yes")),1)]),e("div",null,[e("b",null,s(x.$t("createdAt")),1),z(" "+s(x.formatDate(f.value.info.created_at)),1)])]),I(e("div",null,[(t(),q($e,null,[I(d(xe,{"section-class":"work-grid",works:f.value.list,view:O,"manage-mode":r.manageMode,onFeedManageList:b},null,8,["works","manage-mode"]),[[L,!f.value.empty]])],1024)),I(e("div",{class:"primary-button",onClick:B[2]||(B[2]=N=>h())},s(x.$t("loadMore")),513),[[L,f.value.loadMore]])],512),[[L,!m.value]]),d(ie,{loading:m.value,empty:f.value.empty,error:!1,fetch:a},null,8,["loading","empty"]),m.value?i("",!0):(t(),l("div",{key:0,id:E.value+"-modal",class:"modal work-view"},[d(ke,{ref_key:"albumModalViewRef",ref:c,section:E.value},null,8,["section"])],8,co)),I(d(me,{id:"item-removed-alert",text:x.$t("albums.itemRemoved")},null,8,["text"]),[[L,M.value]])]))}},vo=ee(mo,[["__scopeId","data-v-cfab43ea"]]),fo={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},po={class:"title"},ho=["name"],wo=["placeholder"],bo=["placeholder"],go=["for"],_o=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),ko={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},yo=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),$o=[yo],xo={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Mo=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Co=[Mo],Io={class:"ml-2"},Eo={class:"flex flex-row gap-2 justify-end mt-2"},Lo={type:"submit",class:"primary-button"},Ao={__name:"EditForm",props:{albumId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(r,{expose:F,emit:k}){const u=r,{oApiConfiguration:S,fetchOptions:v}=X(),y=ce(S,v()),{t:_}=_e(),m=p(!0),f=async g=>{if(g){U(),m.value=!0;const[b,M]=await y.getInfo(g),o=b.data;n.value.id=g,n.value.name=o.name,n.value.description=o.description,n.value.isPublic=!!o.is_public,m.value=!1}},a="update-album-form",n=p({id:0,name:"",description:"",isPublic:!1}),h=async()=>{ye().validate(a,_);const[g,b]=await y.update({id:n.value.id,name:n.value.name,description:n.value.description,isPublic:n.value.isPublic?1:0});b||(Z().closeModal(u.modalId),k("updated",n.value),U())},U=()=>{n.value={id:0,name:"",description:"",isPublic:0}};return F({fetch:f}),(g,b)=>(t(),l("div",null,[e("div",fo,[e("div",null,[e("span",po,s(g.$t("albums.edit.form.title")),1),m.value?i("",!0):(t(),l("form",{key:0,id:a,class:"mt-2",onSubmit:b[4]||(b[4]=H(M=>h(),["prevent"]))},[e("n-validate",{for:"title",name:g.$t("title")},[I(e("input",{"onUpdate:modelValue":b[0]||(b[0]=M=>n.value.name=M),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:g.$t("title")},null,8,wo),[[ae,n.value.name]])],8,ho),I(e("textarea",{"onUpdate:modelValue":b[1]||(b[1]=M=>n.value.description=M),class:"form-input theme-color-secondary",placeholder:g.$t("description"),"data-gramm":"false"},null,8,bo),[[ae,n.value.description]]),e("label",{for:n.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:b[2]||(b[2]=M=>n.value.isPublic=!n.value.isPublic)},[_o,n.value.isPublic?(t(),l("span",ko,$o)):i("",!0),n.value.isPublic?i("",!0):(t(),l("span",xo,Co))]),e("span",Io,s(g.$t("private")),1)],8,go),e("div",Eo,[e("button",{class:"cancel-button",onClick:b[3]||(b[3]=H(M=>g.closeModal(r.modalId),["prevent"]))},s(g.$t("cancel")),1),e("button",Lo,s(g.$t("save")),1)])],32))])])]))}},Fe=""+new URL("folder.11be08fa.png",import.meta.url).href,Ce=r=>(be("data-v-eccd717d"),r=r(),ge(),r),Po={class:"mb-2"},Fo={key:0},So=Ce(()=>e("img",{src:Fe,class:"rounded"},null,-1)),To=[So],jo={key:1},Ro={class:"relative text-center"},Uo={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Bo={class:"overflow-hidden rounded-md"},zo=["src"],Oo={key:2,class:"imgrid"},Vo={class:"relative text-center"},Do={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},No={class:"overflow-hidden rounded-md"},qo=["src"],Go=Ce(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),Wo=Ce(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),Ho={key:3,class:"imgrid"},Jo={class:"relative text-center"},Ko={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Qo={class:"overflow-hidden rounded-md"},Xo=["src"],Yo={key:4,class:"imgrid"},Zo={class:"relative text-center"},el={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},tl={class:"overflow-hidden rounded-md"},ol=["src"],ll={key:5,class:"imgrid"},sl={key:0,class:"relative text-center"},al={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},nl={class:"overflow-hidden rounded-md"},il=["src"],rl={key:1,class:"relative text-center"},ul={class:"absolute top-1/2 left-1/2 z-10 text-lg font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 md:text-xl lg:text-3xl"},dl={class:"overflow-hidden rounded-md"},cl=["src"],ml={__name:"ArtworkThumbnail",props:{album:{type:Object,default:()=>{}}},setup(r){const F=ne(),k={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(u,S)=>(t(),l("div",Po,[!r.album.album_has_artworks||r.album._count.album_has_artworks===0?(t(),l("div",Fo,To)):i("",!0),r.album.album_has_artworks&&r.album._count.album_has_artworks===1?(t(),l("div",jo,[e("div",Ro,[u.applyExplicitFilter(w(F),r.album.album_has_artworks[0].artworks.is_explicit)?(t(),l("span",Uo,s(u.$t("explicitContent")),1)):i("",!0),e("div",Bo,[r.album.album_has_artworks&&r.album._count.album_has_artworks===1?(t(),l("img",{key:0,src:u.artworkThumb(r.album.album_has_artworks[0].artworks.artwork_assets[0].bucket,r.album.album_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:R(["object-cover object-top rounded",{"blur-sm brightness-50":u.applyExplicitFilter(w(F),r.album.album_has_artworks[0].artworks.is_explicit)}]),style:{"aspect-ratio":"1/1"},onError:S[0]||(S[0]=(...v)=>u.imageLoadError&&u.imageLoadError(...v))},null,42,zo)):i("",!0)])])])):i("",!0),r.album.album_has_artworks&&r.album._count.album_has_artworks===2?(t(),l("div",Oo,[(t(!0),l(K,null,Q(r.album.album_has_artworks,(v,y)=>(t(),l("div",{key:y,class:R(k[2][y])},[e("div",Vo,[u.applyExplicitFilter(w(F),v.artworks.is_explicit)?(t(),l("span",Do,s(u.$t("explicitContent")),1)):i("",!0),e("div",No,[e("img",{class:R(["theme-color",{"blur-sm brightness-50":u.applyExplicitFilter(w(F),v.artworks.is_explicit)}]),src:u.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),onError:S[1]||(S[1]=(..._)=>u.imageLoadError&&u.imageLoadError(..._))},null,42,qo)])])],2))),128)),Go,Wo])):i("",!0),r.album.album_has_artworks&&r.album._count.album_has_artworks===3?(t(),l("div",Ho,[(t(!0),l(K,null,Q(r.album.album_has_artworks,(v,y)=>(t(),l("div",{key:y,class:R(k[3][y])},[e("div",Jo,[u.applyExplicitFilter(w(F),v.artworks.is_explicit)?(t(),l("span",Ko,s(u.$t("explicitContent")),1)):i("",!0),e("div",Qo,[e("img",{class:R(["theme-color",{"blur-sm brightness-50":u.applyExplicitFilter(w(F),v.artworks.is_explicit)}]),src:u.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),onError:S[2]||(S[2]=(..._)=>u.imageLoadError&&u.imageLoadError(..._))},null,42,Xo)])])],2))),128))])):i("",!0),r.album.album_has_artworks&&r.album._count.album_has_artworks===4?(t(),l("div",Yo,[(t(!0),l(K,null,Q(r.album.album_has_artworks,(v,y)=>(t(),l("div",{key:y},[e("div",Zo,[u.applyExplicitFilter(w(F),v.artworks.is_explicit)?(t(),l("span",el,s(u.$t("explicitContent")),1)):i("",!0),e("div",tl,[e("img",{class:R(["theme-color",{"blur-sm brightness-50":u.applyExplicitFilter(w(F),v.artworks.is_explicit)}]),src:u.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),onError:S[3]||(S[3]=(..._)=>u.imageLoadError&&u.imageLoadError(..._))},null,42,ol)])])]))),128))])):i("",!0),r.album.album_has_artworks&&r.album._count.album_has_artworks>4?(t(),l("div",ll,[(t(!0),l(K,null,Q(r.album.album_has_artworks,(v,y)=>(t(),l("div",{key:y},[y<3?(t(),l("div",sl,[u.applyExplicitFilter(w(F),v.artworks.is_explicit)?(t(),l("span",al,s(u.$t("explicitContent")),1)):i("",!0),e("div",nl,[e("img",{class:R(["theme-color",{"blur-sm brightness-50":u.applyExplicitFilter(w(F),v.artworks.is_explicit)}]),src:u.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),onError:S[4]||(S[4]=(..._)=>u.imageLoadError&&u.imageLoadError(..._))},null,42,il)])])):(t(),l("div",rl,[e("span",ul,"+"+s(r.album._count.album_has_artworks-4),1),e("div",dl,[e("img",{src:u.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),class:R(["z-0 brightness-50",{"blur-sm brightness-50":u.applyExplicitFilter(w(F),v.artworks.is_explicit)}]),onError:S[5]||(S[5]=(..._)=>u.imageLoadError&&u.imageLoadError(..._))},null,42,cl)])]))]))),128))])):i("",!0)]))}},vl=ee(ml,[["__scopeId","data-v-eccd717d"]]),fl={class:"mb-2 w-full"},pl={key:0,class:"flex flex-row justify-between"},hl={class:"flex flex-row"},wl={key:0},bl={key:1,class:"flex flex-row justify-between"},gl={class:"flex flex-row"},_l={class:"flex flex-row gap-2"},kl={class:"flex flex-row gap-2"},yl={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},$l=["onClick"],xl={class:"flex flex-row pb-1 mt-4 font-bold"},Ml={class:"text-xs font-normal"},Cl={__name:"Album",props:{userId:{type:Number,default:0}},setup(r){const F=r,k=ne(),{oApiConfiguration:u,fetchOptions:S}=X(),v=ce(u,S());ue(()=>{h()});const y=p(!0),_=p("artwork"),m=p(0),f=p([]),a=p({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),n=p({artwork:0}),h=async()=>{y.value=!0;const[T,j,V]=await v.fetchAlbums(F.userId,_.value,a.value.pagination.page===0?a.value.pagination.firstLoad:a.value.pagination.perPage,a.value.pagination.page);if(V)o();else{T.length||(a.value.manageMode=!1,b()),T.forEach(A=>{f.value.push(A)}),a.value.pagination.page+=a.value.pagination.firstLoad/a.value.pagination.perPage,a.value.showLoadMore=j;const[se]=await v.countArtworkAlbums(F.userId);n.value.artwork=se}y.value=!1},U=async()=>await h(),g=p(!1),b=()=>{g.value=!0,a.value.showLoadMore=!1},M=p(!1),o=()=>{y.value=!1,M.value=!0,a.value.showLoadMore=!1},$=async()=>{y.value=!1,g.value=!1,M.value=!1,a.value.pagination.page=0,f.value=[],await h()},E=p(!1);let c;const O=async()=>{ve().splash(c,E,"created-alert"),await $()},x=p(null),B=()=>{x.value.fetch(m.value),Z().openModal("album-edit-form-modal")},N=p(null),G=T=>{N.value.fetchInfo(),f.value.forEach(j=>{j.id===T.id&&(j.name=T.name,j.description=T.description,j.is_public=T.isPublic)})},Y=()=>{N.value.removeItems()},oe=p([]),de=T=>{oe.value=T},J=async()=>{if(m.value!==0){const[T,j]=await v.deleteAlbum(m.value);T&&(m.value=0,$())}},le=T=>{a.value.showManageButton=!T,a.value.manageMode=!1},re=()=>{m.value=0,a.value.showManageButton=!1,a.value.manageMode=!1};return(T,j)=>(t(),l("div",null,[e("div",fl,[m.value?i("",!0):(t(),l("div",pl,[e("div",hl,[e("div",{class:R(["ml-0 primary-button theme-color-secondary",{"button-color text-white":_.value==="artwork"}]),onClick:j[0]||(j[0]=V=>_.value="artwork")},[z(s(T.$t("artworks.artwork"))+" ",1),e("span",{class:R(["px-1 ml-2 font-normal rounded",_.value==="artwork"?"theme-color":"button-color text-white"])},s(n.value.artwork),3)],2)]),w(k).loggedIn&&w(k).user.id===r.userId?(t(),l("div",wl,[e("div",{class:"icon-button",onClick:j[1]||(j[1]=V=>T.openModal("album-form-modal"))},[d(C,{name:"i-ion-add-outline"})])])):i("",!0)])),m.value?(t(),l("div",bl,[e("div",null,[e("div",{class:"ml-0 icon-button",onClick:j[2]||(j[2]=V=>re())},[d(C,{name:"i-ic-baseline-keyboard-arrow-left"})])]),e("div",gl,[I(e("div",_l,[e("button",{class:"action-button secondary-button",onClick:j[3]||(j[3]=V=>a.value.manageMode=!a.value.manageMode)},[d(C,{name:a.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),z(" "+s(a.value.manageMode?T.$t("quit"):T.$t("manage")),1)]),I(e("button",{class:R(["flex flex-row",oe.value.length>0?"danger-button":"disabled-button cursor-not-allowed"]),onClick:j[4]||(j[4]=V=>oe.value.length>0?T.openModal("item-deletion-confirm-modal"):null)},[d(C,{name:"i-akar-icons-trash-bin"}),z(" "+s(T.$t("albums.removeSelected")),1)],2),[[L,a.value.manageMode]])],512),[[L,w(k).loggedIn&&w(k).user.id===r.userId&&a.value.showManageButton]]),I(e("div",kl,[e("button",{class:"icon-button",onClick:j[5]||(j[5]=V=>B())},[d(C,{name:"i-ph-gear-six"})]),e("button",{class:"danger-button-color b-button",onClick:j[6]||(j[6]=V=>T.openModal("album-deletion-confirm-modal"))},[d(C,{name:"i-akar-icons-trash-bin"})])],512),[[L,w(k).loggedIn&&w(k).user.id===r.userId&&!a.value.manageMode]])])])):i("",!0),I(e("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},s(T.$t("albums.manageModeActiveMessage")),513),[[L,a.value.manageMode]])]),m.value?i("",!0):(t(),l("div",yl,[(t(!0),l(K,null,Q(f.value,V=>(t(),l("div",{key:V.id,class:R(["p-3 rounded-md cursor-pointer",V.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:se=>m.value=V.id},[V.type==="artwork"?(t(),q(vl,{key:0,album:V},null,8,["album"])):i("",!0),e("div",xl,[V.is_public?i("",!0):(t(),q(C,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),e("span",Ml,s(V.name),1)])],10,$l))),128))])),a.value.showLoadMore&&!m.value?(t(),l("div",{key:1,class:"mt-4 w-full primary-button",onClick:U},s(T.$t("loadMore")),1)):i("",!0),d(ie,{loading:y.value,empty:g.value,error:M.value,fetch:h},null,8,["loading","empty","error"]),!y.value&&!m.value?(t(),q(lo,{key:2,id:"album-form-modal","modal-id":"album-form-modal",category:_.value,class:"modal",onCreated:O},null,8,["category"])):i("",!0),I(d(me,{id:"created-alert",text:T.$t("albums.created")},null,8,["text"]),[[L,E.value]]),!y.value&&m.value?(t(),q(Ao,{key:3,id:"album-edit-form-modal",ref_key:"albumEditFormModalRef",ref:x,"modal-id":"album-edit-form-modal","album-id":m.value,class:"modal",onUpdated:G},null,8,["album-id"])):i("",!0),d(he,{id:"album-deletion-confirm-modal","modal-id":"album-deletion-confirm-modal",message:"All saved items in this album will be deleted. Do you still want to delete this album?",class:"modal",onOnAccept:J},null,8,["message"]),d(he,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this album. Do you still want to remove them?",class:"modal",onOnAccept:Y},null,8,["message"]),m.value&&!y.value?(t(),q(vo,{key:4,id:m.value,ref_key:"albumDetailRef",ref:N,"manage-mode":a.value.manageMode,onOnAlbumEmpty:le,onFeedManageList:de},null,8,["id","manage-mode"])):i("",!0)]))}},Il=ee(Cl,[["__scopeId","data-v-7bee1255"]]),El={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Ll={class:"title"},Al=["placeholder"],Pl=["placeholder"],Fl=["for"],Sl=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),Tl={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},jl=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Rl=[jl],Ul={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Bl=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),zl=[Bl],Ol={class:"ml-2"},Vl={class:"flex flex-row gap-2 justify-end mt-2"},Dl={type:"submit",class:"primary-button"},Nl={__name:"CollectionFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(r,{emit:F}){const k=r,{oApiConfiguration:u,fetchOptions:S}=X(),v=fe(u,S()),{t:y}=_e(),_="create-collection-form",m=p({title:"",description:"",isPublic:1,category:"artwork"}),f=async()=>{ye().validate(_,y);try{let a=!1,n={};if(k.category){const[h,U,g]=await v.createCollection(k.category,m.value);g||(a=h,n=U)}a&&(Z().closeModal(k.modalId),F("created",n))}catch{}};return(a,n)=>(t(),l("div",null,[e("div",El,[e("div",null,[e("span",Ll,s(a.$t("collections.create.form.title")),1),e("form",{id:_,class:"mt-2",onSubmit:n[4]||(n[4]=H(h=>f(),["prevent"]))},[e("n-validate",null,[I(e("input",{"onUpdate:modelValue":n[0]||(n[0]=h=>m.value.title=h),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:a.$t("title")},null,8,Al),[[ae,m.value.title]])]),I(e("textarea",{"onUpdate:modelValue":n[1]||(n[1]=h=>m.value.description=h),class:"form-input theme-color-secondary",placeholder:a.$t("description"),"data-gramm":"false"},null,8,Pl),[[ae,m.value.description]]),e("label",{for:m.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:n[2]||(n[2]=h=>m.value.isPublic=!m.value.isPublic)},[Sl,m.value.isPublic?(t(),l("span",Tl,Rl)):i("",!0),m.value.isPublic?i("",!0):(t(),l("span",Ul,zl))]),e("span",Ol,s(a.$t("private")),1)],8,Fl),e("div",Vl,[e("button",{class:"cancel-button",onClick:n[3]||(n[3]=H(h=>a.closeModal(r.modalId),["prevent"]))},s(a.$t("cancel")),1),e("button",Dl,s(a.$t("create")),1)])],32)])])]))}},ql={id:"lists"},Gl={class:"p-4 mb-4 w-full rounded-md theme-color-secondary"},Wl={class:"text-base font-bold mb-2"},Hl={class:"mb-2"},Jl=z(),Kl={class:"italic"},Ql=["id"],Xl={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1},type:{type:String,default:""}},emits:["onCollectionEmpty","feedManageList"],setup(r,{expose:F,emit:k}){const u=r,{oApiConfiguration:S,fetchOptions:v}=X(),y=fe(S,v()),_=p(u.id);Le(()=>u.id,(x,B)=>{_.value=x}),ue(async()=>{await a()});const m=p(!0),f=p({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:24},list:[],empty:!1}),a=async()=>{m.value=!0,await n(),await h(),m.value=!1},n=async()=>{const[x,B]=await y.getInfo(_.value);f.value.info=x.data},h=async()=>{const[x,B,N]=await y.listCollectionItems({collectionId:_.value,pagination:{page:f.value.pagination.page,perPage:f.value.pagination.page===0?f.value.pagination.firstLoad:f.value.pagination.perPage}});B?f.value.pagination.page===0?f.value.pagination.page=f.value.pagination.firstLoad/f.value.pagination.perPage:f.value.pagination.page+=f.value.pagination.page!==0?1:2:f.value.loadMore=!1,x!==null&&x.length?(x.forEach(G=>{f.value.list.push(G.artworks)}),k("onCollectionEmpty",!1)):(f.value.empty=!0,k("onCollectionEmpty",!0))},U=()=>{f.value.loadMore=!0,f.value.pagination.page=0,f.value.list=[]},g=p([]),b=x=>{g.value=x,k("feedManageList",x)},M=p(!1);let o;const $=async()=>{const[x,B]=await y.removeItem({collectionId:u.id,type:u.type,workId:g.value});B||(ve().splash(o,M,"item-removed-alert"),U(),await a(),k("feedManageList",[]))},E=p("collection"),c=p(null),O=(x,B=!1)=>{c.value.view(x,B),Z().openModal(E.value+"-modal")};return F({fetchInfo:n,removeItem:$}),(x,B)=>(t(),l("div",ql,[e("div",{class:"hidden",onClick:B[0]||(B[0]=N=>n())}),e("div",{class:"hidden",onClick:B[1]||(B[1]=N=>$())}),e("div",Gl,[e("div",Wl,s(f.value.info.name),1),e("div",Hl,s(f.value.info.description),1),e("div",null,[e("b",null,s(x.$t("private"))+":",1),Jl,e("span",Kl,s(f.value.info.is_public?x.$t("no"):x.$t("yes")),1)]),e("div",null,[e("b",null,s(x.$t("createdAt")),1),z(" "+s(x.formatDate(f.value.info.created_at)),1)])]),I(e("div",null,[(t(),q($e,null,[I(d(xe,{"section-class":"work-grid",works:f.value.list,view:O,"manage-mode":r.manageMode,onFeedManageList:b},null,8,["works","manage-mode"]),[[L,!f.value.empty]])],1024)),I(e("div",{class:"primary-button",onClick:B[2]||(B[2]=N=>h())},s(x.$t("loadMore")),513),[[L,f.value.loadMore]])],512),[[L,!m.value]]),d(ie,{loading:m.value,empty:f.value.empty,error:!1,fetch:a},null,8,["loading","empty"]),m.value?i("",!0):(t(),l("div",{key:0,id:E.value+"-modal",class:"modal work-view"},[d(ke,{ref_key:"collectionModalViewRef",ref:c,section:E.value},null,8,["section"])],8,Ql)),I(d(me,{id:"item-removed-alert",text:x.$t("collections.itemRemoved")},null,8,["text"]),[[L,M.value]])]))}},Yl=ee(Xl,[["__scopeId","data-v-4a542a64"]]),Zl={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},es={class:"title"},ts=["placeholder"],os=["placeholder"],ls=["for"],ss=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),as={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},ns=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),is=[ns],rs={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},us=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),ds=[us],cs={class:"ml-2"},ms={class:"flex flex-row gap-2 justify-end mt-2"},vs={type:"submit",class:"primary-button"},fs={__name:"EditForm",props:{collectionId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(r,{expose:F,emit:k}){const u=r,{t:S}=_e(),{oApiConfiguration:v,fetchOptions:y}=X(),_=fe(v,y()),m=p(!0),f=async g=>{if(g){U(),m.value=!0;const[b,M]=await _.getInfo(g);if(!M){const o=b.data;n.value.id=g,n.value.name=o.name,n.value.description=o.description,n.value.isPublic=!!o.is_public,m.value=!1}}},a="edit-collection-form",n=p({id:0,name:"",description:"",isPublic:!1}),h=async()=>{ye().validate(a,S);const[g,b]=await _.update({id:n.value.id,name:n.value.name,description:n.value.description,isPublic:n.value.isPublic?1:0});b||(Z().closeModal(u.modalId),k("updated",n.value),U())},U=()=>{n.value={id:0,name:"",description:"",isPublic:0}};return F({fetch:f}),(g,b)=>(t(),l("div",null,[e("div",{class:"hidden",onClick:b[0]||(b[0]=M=>f(0))}),e("div",Zl,[e("div",null,[e("span",es,s(g.$t("collections.edit.form.title")),1),m.value?i("",!0):(t(),l("form",{key:0,id:a,class:"mt-2",onSubmit:b[5]||(b[5]=H(M=>h(),["prevent"]))},[e("n-validate",null,[I(e("input",{"onUpdate:modelValue":b[1]||(b[1]=M=>n.value.name=M),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:g.$t("title")},null,8,ts),[[ae,n.value.name]])]),I(e("textarea",{"onUpdate:modelValue":b[2]||(b[2]=M=>n.value.description=M),class:"form-input theme-color-secondary",placeholder:g.$t("description"),"data-gramm":"false"},null,8,os),[[ae,n.value.description]]),e("label",{for:n.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:b[3]||(b[3]=M=>n.value.isPublic=!n.value.isPublic)},[ss,n.value.isPublic?(t(),l("span",as,is)):i("",!0),n.value.isPublic?i("",!0):(t(),l("span",rs,ds))]),e("span",cs,s(g.$t("private")),1)],8,ls),e("div",ms,[e("button",{class:"cancel-button",onClick:b[4]||(b[4]=H(M=>g.closeModal(r.modalId),["prevent"]))},s(g.$t("cancel")),1),e("button",vs,s(g.$t("save")),1)])],32))])])]))}},Ie=r=>(be("data-v-a484fb7b"),r=r(),ge(),r),ps={class:"mb-2"},hs={key:0},ws=Ie(()=>e("img",{src:Fe,class:"rounded"},null,-1)),bs=[ws],gs={key:1},_s={class:"relative text-center"},ks={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},ys={class:"overflow-hidden rounded-md"},$s=["src"],xs={key:2,class:"imgrid"},Ms={class:"relative text-center"},Cs={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Is={class:"overflow-hidden rounded-md"},Es=["src"],Ls=Ie(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),As=Ie(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),Ps={key:3,class:"imgrid"},Fs={class:"relative text-center"},Ss={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Ts={class:"overflow-hidden rounded-md"},js=["src"],Rs={key:4,class:"imgrid"},Us={class:"relative text-center"},Bs={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},zs={class:"overflow-hidden rounded-md"},Os=["src"],Vs={key:5,class:"imgrid"},Ds={key:0,class:"relative text-center"},Ns={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},qs={class:"overflow-hidden rounded-md"},Gs=["src"],Ws={key:1,class:"relative text-center"},Hs={class:"absolute top-1/2 left-1/2 z-10 text-lg font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 md:text-xl lg:text-3xl"},Js={class:"overflow-hidden rounded-md"},Ks=["src"],Qs={__name:"ArtworkThumbnail",props:{collection:{type:Object,default:()=>{}}},setup(r){const F=ne(),k={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(u,S)=>(t(),l("div",ps,[!r.collection.collection_has_artworks||r.collection._count.collection_has_artworks===0?(t(),l("div",hs,bs)):i("",!0),r.collection.collection_has_artworks&&r.collection._count.collection_has_artworks===1?(t(),l("div",gs,[e("div",_s,[u.applyExplicitFilter(w(F),r.collection.collection_has_artworks[0].artworks.is_explicit)?(t(),l("span",ks,s(u.$t("explicitContent")),1)):i("",!0),e("div",ys,[r.collection.collection_has_artworks&&r.collection._count.collection_has_artworks===1?(t(),l("img",{key:0,src:u.artworkThumb(r.collection.collection_has_artworks[0].artworks.artwork_assets[0].bucket,r.collection.collection_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:R(["object-cover object-top rounded",{"blur-sm brightness-50":u.applyExplicitFilter(w(F),r.collection.collection_has_artworks[0].artworks.is_explicit)}]),style:{"aspect-ratio":"1/1"},onError:S[0]||(S[0]=(...v)=>u.imageLoadError&&u.imageLoadError(...v))},null,42,$s)):i("",!0)])])])):i("",!0),r.collection.collection_has_artworks&&r.collection._count.collection_has_artworks===2?(t(),l("div",xs,[(t(!0),l(K,null,Q(r.collection.collection_has_artworks,(v,y)=>(t(),l("div",{key:y,class:R(k[2][y])},[e("div",Ms,[u.applyExplicitFilter(w(F),v.artworks.is_explicit)?(t(),l("span",Cs,s(u.$t("explicitContent")),1)):i("",!0),e("div",Is,[e("img",{class:R(["theme-color",{"blur-sm brightness-50":u.applyExplicitFilter(w(F),v.artworks.is_explicit)}]),src:u.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),onError:S[1]||(S[1]=(..._)=>u.imageLoadError&&u.imageLoadError(..._))},null,42,Es)])])],2))),128)),Ls,As])):i("",!0),r.collection.collection_has_artworks&&r.collection._count.collection_has_artworks===3?(t(),l("div",Ps,[(t(!0),l(K,null,Q(r.collection.collection_has_artworks,(v,y)=>(t(),l("div",{key:y,class:R(k[3][y])},[e("div",Fs,[u.applyExplicitFilter(w(F),v.artworks.is_explicit)?(t(),l("span",Ss,s(u.$t("explicitContent")),1)):i("",!0),e("div",Ts,[e("img",{class:R(["theme-color",{"blur-sm brightness-50":u.applyExplicitFilter(w(F),v.artworks.is_explicit)}]),src:u.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),onError:S[2]||(S[2]=(..._)=>u.imageLoadError&&u.imageLoadError(..._))},null,42,js)])])],2))),128))])):i("",!0),r.collection.collection_has_artworks&&r.collection._count.collection_has_artworks===4?(t(),l("div",Rs,[(t(!0),l(K,null,Q(r.collection.collection_has_artworks,(v,y)=>(t(),l("div",{key:y},[e("div",Us,[u.applyExplicitFilter(w(F),v.artworks.is_explicit)?(t(),l("span",Bs,s(u.$t("explicitContent")),1)):i("",!0),e("div",zs,[e("img",{class:R(["theme-color",{"blur-sm brightness-50":u.applyExplicitFilter(w(F),v.artworks.is_explicit)}]),src:u.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),onError:S[3]||(S[3]=(..._)=>u.imageLoadError&&u.imageLoadError(..._))},null,42,Os)])])]))),128))])):i("",!0),r.collection.collection_has_artworks&&r.collection._count.collection_has_artworks>4?(t(),l("div",Vs,[(t(!0),l(K,null,Q(r.collection.collection_has_artworks,(v,y)=>(t(),l("div",{key:y},[y<3?(t(),l("div",Ds,[u.applyExplicitFilter(w(F),v.artworks.is_explicit)?(t(),l("span",Ns,s(u.$t("explicitContent")),1)):i("",!0),e("div",qs,[e("img",{class:R(["theme-color",{"blur-sm brightness-50":u.applyExplicitFilter(w(F),v.artworks.is_explicit)}]),src:u.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),onError:S[4]||(S[4]=(..._)=>u.imageLoadError&&u.imageLoadError(..._))},null,42,Gs)])])):(t(),l("div",Ws,[e("span",Hs,"+"+s(r.collection._count.collection_has_artworks-4),1),e("div",Js,[e("img",{src:u.artworkThumb(v.artworks.artwork_assets[0].bucket,v.artworks.artwork_assets[0].filename,"thumbnail"),class:R(["z-0 brightness-50",{"blur-sm brightness-50":u.applyExplicitFilter(w(F),v.artworks.is_explicit)}]),onError:S[5]||(S[5]=(..._)=>u.imageLoadError&&u.imageLoadError(..._))},null,42,Ks)])]))]))),128))])):i("",!0)]))}},Xs=ee(Qs,[["__scopeId","data-v-a484fb7b"]]),Ys={class:"mb-2 w-full"},Zs={key:0,class:"flex flex-row justify-between"},ea={class:"flex flex-row"},ta={key:0},oa={key:1,class:"flex flex-row justify-between"},la={class:"flex flex-row"},sa={class:"flex flex-row gap-2"},aa={class:"flex flex-row gap-2"},na={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},ia=["onClick"],ra={class:"flex flex-row pb-1 mt-4 font-bold"},ua={class:"text-xs font-normal"},da={__name:"Collection",props:{userId:{type:Number,default:0}},setup(r){const F=r,k=ne();ue(()=>{h()});const{oApiConfiguration:u,fetchOptions:S}=X(),v=fe(u,S()),y=p(!0),_=p("artwork"),m=p(0),f=p([]),a=p({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),n=p({artwork:0}),h=async()=>{y.value=!0;const[T,j,V]=await v.fetchCollections({userId:F.userId,type:_.value,pagination:{page:a.value.pagination.page,perPage:a.value.pagination.page===0?a.value.pagination.firstLoad:a.value.pagination.perPage}});if(V)o();else{T.length||(a.value.manageMode=!1,b()),T.forEach(A=>{f.value.push(A)}),a.value.pagination.page+=a.value.pagination.firstLoad/a.value.pagination.perPage,a.value.showLoadMore=j;const[se]=await v.countArtworkCollections(F.userId);n.value.artwork=se}y.value=!1},U=async()=>await h(),g=p(!1),b=()=>{g.value=!0,a.value.showLoadMore=!1},M=p(!1),o=()=>{y.value=!1,M.value=!0,a.value.showLoadMore=!1},$=async()=>{y.value=!1,g.value=!1,M.value=!1,a.value.pagination.page=0,f.value=[],await h()},E=T=>{a.value.showManageButton=!0,T&&(a.value.showManageButton=!1)},c=p(!1);let O;const x=async()=>{ve().splash(O,c,"created-alert"),await $()},B=p(null),N=()=>{B.value.fetch(m.value),Z().openModal("collection-edit-form-modal")},G=p(null),Y=T=>{G.value.fetchInfo(),f.value.forEach(j=>{j.id===T.id&&(j.name=T.name,j.description=T.description,j.is_public=T.isPublic)})},oe=p([]),de=T=>{oe.value=T},J=()=>{G.value.removeItem()},le=async()=>{if(m.value!==0){const[T,j]=await v.deleteCollection(m.value);T&&(m.value=0,$())}},re=()=>{m.value=0,a.value.showManageButton=!1,a.value.manageMode=!1};return(T,j)=>(t(),l("div",null,[e("div",Ys,[m.value?i("",!0):(t(),l("div",Zs,[e("div",ea,[e("div",{class:R(["ml-0 primary-button theme-color-secondary",{"button-color text-white":_.value==="artwork"}]),onClick:j[0]||(j[0]=V=>_.value="artwork")},[z(s(T.$t("artworks.artwork"))+" ",1),e("span",{class:R(["px-1 ml-2 font-normal rounded",_.value==="artwork"?"theme-color":"button-color text-white"])},s(n.value.artwork),3)],2)]),w(k).loggedIn&&w(k).user.id===r.userId?(t(),l("div",ta,[e("div",{class:"icon-button",onClick:j[1]||(j[1]=V=>T.openModal("collection-form-modal"))},[d(C,{name:"i-ion-add-outline"})])])):i("",!0)])),m.value?(t(),l("div",oa,[e("div",null,[e("div",{class:"ml-0 icon-button",onClick:j[2]||(j[2]=V=>re())},[d(C,{name:"i-ic-baseline-keyboard-arrow-left"})])]),e("div",la,[I(e("div",sa,[e("button",{class:"action-button secondary-button",onClick:j[3]||(j[3]=V=>a.value.manageMode=!a.value.manageMode)},[d(C,{name:a.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),z(" "+s(a.value.manageMode?T.$t("quit"):T.$t("manage")),1)]),I(e("button",{class:R(["flex flex-row",oe.value.length>0?"danger-button":"disabled-button cursor-not-allowed"]),onClick:j[4]||(j[4]=V=>oe.value.length>0?T.openModal("item-deletion-confirm-modal"):null)},[d(C,{name:"i-akar-icons-trash-bin"}),z(" "+s(T.$t("collections.removeSelected")),1)],2),[[L,a.value.manageMode]])],512),[[L,w(k).loggedIn&&w(k).user.id===r.userId&&a.value.showManageButton]]),I(e("div",aa,[e("button",{class:"icon-button",onClick:j[5]||(j[5]=V=>N())},[d(C,{name:"i-ph-gear-six"})]),e("button",{class:"danger-button-color b-button",onClick:j[6]||(j[6]=V=>T.openModal("collection-deletion-confirm-modal"))},[d(C,{name:"i-akar-icons-trash-bin"})])],512),[[L,w(k).loggedIn&&w(k).user.id===r.userId&&!a.value.manageMode]])])])):i("",!0),I(e("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},s(T.$t("collections.manageModeActiveMessage")),513),[[L,a.value.manageMode]])]),m.value?i("",!0):(t(),l("div",na,[(t(!0),l(K,null,Q(f.value,V=>(t(),l("div",{key:V.id,class:R(["p-3 rounded-md cursor-pointer",V.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:se=>m.value=V.id},[V.type==="artwork"?(t(),q(Xs,{key:0,collection:V},null,8,["collection"])):i("",!0),e("div",ra,[V.is_public?i("",!0):(t(),q(C,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),e("span",ua,s(V.name),1)])],10,ia))),128))])),a.value.showLoadMore&&!m.value?(t(),l("div",{key:1,class:"mt-4 w-full primary-button",onClick:U},s(T.$t("loadMore")),1)):i("",!0),d(ie,{loading:y.value,empty:g.value,error:M.value,fetch:h},null,8,["loading","empty","error"]),!y.value&&!m.value?(t(),q(Nl,{key:2,id:"collection-form-modal","modal-id":"collection-form-modal",category:_.value,class:"modal",onCreated:x},null,8,["category"])):i("",!0),I(d(me,{id:"created-alert",text:T.$t("collections.created")},null,8,["text"]),[[L,c.value]]),!y.value&&m.value?(t(),q(fs,{key:3,id:"collection-edit-form-modal",ref_key:"collectionEditFormModalRef",ref:B,"modal-id":"collection-edit-form-modal","collection-id":m.value,class:"modal",onUpdated:Y},null,8,["collection-id"])):i("",!0),d(he,{id:"collection-deletion-confirm-modal","modal-id":"collection-deletion-confirm-modal",message:"All saved items in this collection will be deleted. Do you still want to delete this collection?",class:"modal",onOnAccept:le},null,8,["message"]),d(he,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this collection. Do you still want to remove them?",class:"modal",onOnAccept:J},null,8,["message"]),m.value&&!y.value?(t(),q(Yl,{key:4,id:m.value,ref_key:"collectionDetailRef",ref:G,"manage-mode":a.value.manageMode,type:_.value,onOnCollectionEmpty:E,onFeedManageList:de},null,8,["id","manage-mode","type"])):i("",!0)]))}},ca=ee(da,[["__scopeId","data-v-52371e9a"]]),ma={class:"text-lg font-bold"},va={class:"grid grid-cols-1 gap-4 mt-4 w-full md:grid-cols-2 lg:grid-cols-3"},fa={class:"flex flex-row w-full"},pa=["src"],ha={class:"flex flex-col justify-between p-3 w-full text-white"},wa={class:"flex flex-col"},ba={class:"font-bold"},ga={class:"text-xxs"},_a={class:"flex flex-row w-full"},ka={key:0,class:"flex flex-row"},ya=["onClick"],$a=["onMouseover","onClick"],xa={__name:"FollowerList",props:{userId:{type:Number,default:0}},setup(r){const F=r,k=ne(),{oApiConfiguration:u,fetchOptions:S}=X(),v=Me(u,S());ue(()=>{h()});const y=p([]),_=p(!0),m=p({page:0,perPage:12}),f=p(!1),a=p(!1),n=p(!1),h=async()=>{U(),_.value=!0;const[b,M]=await v.getFollowerList({userId:F.userId,pagination:{page:m.value.page,perPage:m.value.perPage}});M?f.value=!0:(b.followers.length||(a.value=!0),b.followers.forEach(o=>{y.value.push(o)}),m.value.page+=1,b.pagination.next_previous.next_page?n.value=!0:n.value=!1),_.value=!1},U=()=>{a.value=!1,f.value=!1},g=p(0);return(b,M)=>{const o=we;return t(),l("div",null,[e("div",ma,s(b.$t("followers")),1),e("div",va,[(t(!0),l(K,null,Q(y.value,($,E)=>(t(),q(o,{key:$.id,to:"/profile/"+$.username,class:"flex object-cover flex-row rounded-md shadow-lg cursor-pointer theme-color-secondary hover:shadow-xl",style:Ae($.cover_bucket&&$.cover_filename?"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+b.avatarCoverUrl($.cover_bucket,$.cover_filename)+");background-size:cover;":"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+w(Pe)+");background-size:cover;")},{default:W(()=>[e("div",fa,[e("img",{src:b.avatarCoverUrl($.avatar_bucket,$.avatar_filename),class:"avatar",onError:M[0]||(M[0]=(...c)=>b.imageLoadError&&b.imageLoadError(...c))},null,40,pa),e("div",ha,[e("div",wa,[e("span",ba,s($.name),1),e("span",ga,s($.pen_name),1)]),e("div",_a,[w(k).loggedIn&&$.id!==w(k).user.id?(t(),l("div",ka,[I(e("div",{class:"flex flex-row",onClick:H(c=>b.followUser(E,$.id),["prevent"])},[d(C,{name:"i-ri-user-add-fill",class:"text-gray-300 hover:text-white"})],8,ya),[[L,!$.is_following]]),I(e("div",{class:"flex flex-row",onMouseover:c=>g.value=$.id,onMouseout:M[1]||(M[1]=c=>g.value=0),onClick:H(c=>b.unfollowUser(E,$.id),["prevent"])},[I(d(C,{name:"i-ri-user-follow-fill",class:"text-green-400"},null,512),[[L,g.value!==$.id]]),I(d(C,{name:"i-ri-user-unfollow-fill",class:"text-red-400 hover:text-red-400"},null,512),[[L,g.value&&g.value===$.id]])],40,$a),[[L,$.is_following]])])):i("",!0)])])])]),_:2},1032,["to","style"]))),128))]),I(e("div",{class:"mt-4 primary-button",onClick:M[2]||(M[2]=$=>h())},s(b.$t("loadMore")),513),[[L,n.value]]),d(ie,{loading:_.value,empty:a.value,error:f.value,fetch:h},null,8,["loading","empty","error"])])}}},Ma=ee(xa,[["__scopeId","data-v-b2599f1b"]]),Ca={class:"text-lg font-bold"},Ia={class:"grid grid-cols-1 gap-4 mt-4 w-full md:grid-cols-2 lg:grid-cols-3"},Ea={class:"flex flex-row w-full"},La=["src"],Aa={class:"flex flex-col justify-between p-3 w-full text-white"},Pa={class:"flex flex-col"},Fa={class:"font-bold"},Sa={class:"text-xxs"},Ta={class:"flex flex-row w-full"},ja={key:0,class:"flex flex-row"},Ra=["onClick"],Ua=["onMouseover","onClick"],Ba={__name:"FollowingList",props:{userId:{type:Number,default:0}},setup(r){const F=r,k=ne(),{oApiConfiguration:u,fetchOptions:S}=X(),v=Me(u,S());ue(()=>{U()});const y=async()=>{_.value=[],f.value.page=0,await U()},_=p([]),m=p(!0),f=p({page:0,perPage:12}),a=p(!1),n=p(!1),h=p(!1),U=async()=>{g(),m.value=!0;const[M,o]=await v.getFollowingList({userId:F.userId,pagination:{page:f.value.page,perPage:f.value.perPage}});o?a.value=!0:(M.followings.length||(n.value=!0),M.followings.forEach($=>{_.value.push($)}),f.value.page+=1,M.pagination.next_previous.next_page?h.value=!0:h.value=!1),m.value=!1},g=()=>{n.value=!1,a.value=!1},b=p(0);return(M,o)=>{const $=we;return t(),l("div",null,[e("div",Ca,s(M.$t("followings")),1),e("div",Ia,[(t(!0),l(K,null,Q(_.value,(E,c)=>(t(),q($,{key:E.id,to:"/profile/"+E.username,class:"flex object-cover flex-row rounded-md shadow-lg cursor-pointer theme-color-secondary hover:shadow-xl",style:Ae(E.cover_bucket&&E.cover_filename?"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+M.avatarCoverUrl(E.cover_bucket,E.cover_filename)+");background-size:cover;":"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+w(Pe)+");background-size:cover;")},{default:W(()=>[e("div",Ea,[e("img",{src:M.avatarCoverUrl(E.avatar_bucket,E.avatar_filename),class:"avatar",onError:o[0]||(o[0]=(...O)=>M.imageLoadError&&M.imageLoadError(...O))},null,40,La),e("div",Aa,[e("div",Pa,[e("span",Fa,s(E.name),1),e("span",Sa,s(E.pen_name),1)]),e("div",Ta,[w(k).loggedIn&&E.id!==w(k).user.id?(t(),l("div",ja,[I(e("div",{class:"flex flex-row",onClick:H(O=>M.followUser(c,E.id),["prevent"])},[d(C,{name:"i-ri-user-add-fill",class:"text-gray-300 hover:text-white"})],8,Ra),[[L,!E.is_following]]),I(e("div",{class:"flex flex-row",onMouseover:O=>b.value=E.id,onMouseout:o[1]||(o[1]=O=>b.value=0),onClick:H(O=>M.unfollowUser(c,E.id),["prevent"])},[I(d(C,{name:"i-ri-user-follow-fill",class:"text-green-400"},null,512),[[L,b.value!==E.id]]),I(d(C,{name:"i-ri-user-unfollow-fill",class:"text-red-400 hover:text-red-400"},null,512),[[L,b.value&&b.value===E.id]])],40,Ua),[[L,E.is_following]])])):i("",!0)])])])]),_:2},1032,["to","style"]))),128))]),I(e("div",{class:"primary-button mt-4",onClick:o[2]||(o[2]=E=>U())},s(M.$t("loadMore")),513),[[L,h.value]]),d(ie,{loading:m.value,empty:n.value,error:a.value,fetch:y},null,8,["loading","empty","error"])])}}},za=ee(Ba,[["__scopeId","data-v-5ff9c687"]]),Oa=r=>(be("data-v-51d43998"),r=r(),ge(),r),Va=["src"],Da={class:"px-2 pb-4 w-full rounded md:px-6 md:pb-6 theme-color"},Na={class:"flex-row justify-between hidden-md-flex"},qa={class:"mr-6 w-1/5"},Ga=["src"],Wa={class:"mt-2"},Ha={class:"flex flex-row"},Ja={class:"flex flex-row"},Ka=z("\xA0 "),Qa=z("\xA0 "),Xa={class:"hidden flex-row justify-between w-full md:flex md:mt-6"},Ya={class:"flex flex-col w-full"},Za={class:"flex flex-row w-full"},en={class:"w-9/12"},tn={class:"text-base font-semibold"},on=z("\xA0 "),ln={class:"mr-2 italic"},sn={class:"flex flex-row mt-2"},an={key:0,class:"mr-1"},nn={class:"flex flex-row"},rn={class:"mr-1"},un={key:0,class:"flex flex-row"},dn=z(" he/his "),cn={key:1,class:"flex flex-row"},mn=z(" she/her "),vn={class:"float-right w-3/12 text-right"},fn={class:"flex flex-row shadow-md primary-button"},pn={class:"leading-4"},hn={key:1,class:"mt-4"},wn=["href"],bn=["href"],gn=["href"],_n=["href"],kn=["href"],yn={key:0,class:"mt-4"},$n=["id"],xn=["id"],Mn={class:"flex flex-col text-center md:hidden"},Cn=["src"],In={class:"mt-4 text-base font-semibold"},En={class:"flex flex-row justify-center mt-4"},Ln={key:0,class:"flex flex-row mr-1"},An={class:"mr-1"},Pn={key:0,class:"flex flex-row"},Fn=z(" he/his "),Sn={key:1,class:"flex flex-row"},Tn=z(" she/her "),jn={key:0,class:"mx-2 mt-4 text-center"},Rn=["id"],Un=["id"],Bn={key:1,class:"flex flex-row justify-center mt-4"},zn=["href"],On=["href"],Vn=["href"],Dn=["href"],Nn=["href"],qn={class:"flex flex-row justify-center w-full md:hidden"},Gn=z("\xA0 "),Wn=z("\xA0 "),Hn={class:"flex flex-row"},Jn={class:"flex flex-row"},Kn={class:"mt-2"},Qn={class:"flex flex-row justify-center md:hidden"},Xn={class:"flex flex-row justify-between mt-2 md:mt-6"},Yn={class:"hidden flex-col lg:w-1/5 md:flex"},Zn={class:"profile-navigation_wrapper"},ei={class:"hidden-lg-flex"},ti=Oa(()=>e("span",{class:"hidden-lg-flex"},null,-1)),oi={class:"profile-navigation_wrapper"},li={class:"hidden-lg-flex"},si={class:"hidden-lg-flex"},ai={class:"profile-navigation_wrapper"},ni={class:"hidden-lg-flex"},ii={class:"hidden-lg-flex"},ri={class:"w-full md:ml-6"},ui={key:0},di={class:"flex flex-row w-full"},ci={class:"flex flex-row gap-2 justify-between w-full md:justify-end"},mi={key:1},vi={key:2},fi={key:3},pi={key:4},hi={__name:"Profile",props:{id:{type:Number,default:0},userLogon:{type:Boolean,default:!1}},setup(r){const F=r,k=ne(),{oApiConfiguration:u,fetchOptions:S}=X(),v=Me(u,S()),y=ce(u,S()),_=fe(u,S()),m=ze(),f=Oe(),{o:a}=m.query,n=p(!0),h=a!=null?p(a):p("dashboard"),U=p("artwork"),g=Ve(()=>F.userLogon&&k.loggedIn?k.user.id:F.id),b=p({manageMode:!1,showManageMode:!0});ue(async()=>{await E()});const M=A=>{h.value=A,b.value.manageMode=!1,a!=null&&f.push("/profile")},o=p({}),$=p({feed:0,artwork:0,comic:0,tutorial:0,album:0,followers:0,followings:0}),E=async()=>{n.value=!0;try{const[A]=await v.getInfo(g.value);if(o.value=A,k.loggedIn&&k.user.id!==g.value){const[Re]=await v.isFollowing(g.value);J.value=Re.is_following}const[P]=await v.countFeeds(g.value);$.value.feed=P;const[te]=await v.countArtworks(g.value);$.value.artwork=te;const[D]=await v.countFollowers(g.value);$.value.followers=D;const[Se]=await v.countFollowings(g.value);$.value.followings=Se;const[Te]=await y.countAlbums(g.value);$.value.album=Te;const[je]=await _.countCollections(g.value);$.value.collection=je}catch{}n.value=!1},c=p(null),O=p([]),x=A=>{O.value=A},B=()=>{b.value.showManageMode=!1},N=p(null),G=()=>{Z().openModal("album-selection-modal")},Y=p(!1);let oe;const de=()=>{ve().splash(oe,Y,"item-added-to-album-alert")},J=p(!1),le=p(null),re=p("i-ri-user-follow-fill"),T=(A,P)=>{re.value=A,le.value=P},j=async A=>{const[P,te]=await v.follow(A);te||(J.value=!0)},V=async A=>{const[P,te]=await v.unfollow(A);te||(J.value=!1)},se=(A,P,te,D)=>{Ne().readMore(A,P,te,D)};return(A,P)=>{const te=we;return t(),q(Ge,{"hide-side":!0,"with-footer":!0,"no-right-side":!0},{default:W(()=>[e("div",null,[e("img",{src:A.avatarCoverUrl(o.value.cover_bucket,o.value.cover_filename),class:"object-cover object-top w-full h-32 rounded-t md:h-52 lg:h-72 xl:h-96 unselectable",onError:P[0]||(P[0]=(...D)=>A.defaultCoverImage&&A.defaultCoverImage(...D))},null,40,Va),w(k).loggedIn&&w(k).user.id===o.value.id?(t(),q(te,{key:0,to:"/profile/setting",class:"float-right absolute right-4 mt-2 shadow-md icon-button-primary-color flex-md-hidden"},{default:W(()=>[d(C,{name:"i-ph-gear-six"})]),_:1})):i("",!0)]),e("div",Da,[e("div",Na,[e("div",qa,[e("img",{src:A.avatarCoverUrl(o.value.avatar_bucket,o.value.avatar_filename),class:"hidden -mt-2 w-full md:-mt-16 avatar md:flex",onError:P[1]||(P[1]=(...D)=>A.defaultCoverImage&&A.defaultCoverImage(...D))},null,40,Ga),e("div",Wa,[w(k).loggedIn&&o.value.id!==w(k).user.id?(t(),l("div",{key:0,class:R(["mt-2 primary-button rounded-b-none hover:rounded-b-none",{"hover:danger-button":J.value}]),onClick:P[2]||(P[2]=D=>J.value?V(o.value.id):j(o.value.id)),onMouseover:P[3]||(P[3]=D=>T("i-ri-user-unfollow-fill",A.$t("unfollow"))),onMouseleave:P[4]||(P[4]=D=>T("i-ri-user-follow-fill",A.$t("following")))},[I(e("div",Ha,[d(C,{name:"i-ri-user-add-fill","text-size":"text-base"}),z(" "+s(A.$t("follow")),1)],512),[[L,!J.value]]),I(e("div",Ja,[d(C,{name:re.value,"text-size":"text-base"},null,8,["name"]),z(" "+s(le.value===null?A.$t("following"):le.value),1)],512),[[L,J.value]])],34)):i("",!0),e("div",{class:R(["flex-row justify-center border hidden-md-flex",o.value.id==w(k).user.id?"rounded-md":"rounded-b-md"])},[e("div",{class:"py-2 w-1/2 text-center cursor-pointer hover:text-colored",onClick:P[5]||(P[5]=D=>h.value="followerList")},[e("b",null,s($.value.followers),1),Ka,e("i",null,s(A.$t("followers").toLowerCase()),1)]),e("div",{class:"py-2 w-1/2 text-center cursor-pointer hover:text-colored",onClick:P[6]||(P[6]=D=>h.value="followingList")},[e("b",null,s($.value.followings),1),Qa,e("i",null,s(A.$t("following").toLowerCase()),1)])],2)])]),e("div",Xa,[e("div",Ya,[e("div",Za,[e("div",en,[e("div",null,[e("span",tn,s(o.value.name),1),on,e("span",ln,s(o.value.username),1)]),e("div",sn,[o.value.pen_name&&o.value.pen_name!==""?(t(),l("div",an,[e("span",nn,[d(C,{name:"i-ion-pencil-outline",class:"mr-1 text-base font-bold"}),z(" "+s(o.value.pen_name),1)])])):i("",!0),e("div",rn,[o.value.gender==="m"?(t(),l("span",un,[d(C,{name:"i-ion-male-outline",class:"mr-1 ml-2 text-base font-bold"}),dn])):i("",!0),o.value.gender==="f"?(t(),l("span",cn,[d(C,{name:"i-ion-female-outline",class:"mr-1 ml-2 text-base font-bold"}),mn])):i("",!0)])])]),e("div",vn,[w(k).loggedIn&&w(k).user.id===o.value.id?(t(),q(te,{key:0,to:"/profile/setting",class:"float-right -mt-20 shadow-md"},{default:W(()=>[e("button",fn,[d(C,{name:"i-ph-gear-six",class:"mr-2"}),e("span",pn,s(A.$t("profile.setting")),1)])]),_:1})):i("",!0),o.value.user_socials?(t(),l("div",hn,[o.value.user_socials.facebook?(t(),l("a",{key:0,href:"https://facebook.com/"+o.value.user_socials.facebook,target:"blank",class:"ml-3 cursor-pointer"},[d(C,{name:"i-ion-logo-facebook",class:"text-xl"})],8,wn)):i("",!0),o.value.user_socials.instagram?(t(),l("a",{key:1,href:"https://instagram.com/"+o.value.user_socials.instagram+"/",target:"blank",class:"ml-3 cursor-pointer"},[d(C,{name:"i-ion-logo-instagram",class:"text-xl"})],8,bn)):i("",!0),o.value.user_socials.twitter?(t(),l("a",{key:2,href:"https://twitter.com/"+o.value.user_socials.twitter,target:"blank",class:"ml-3 cursor-pointer"},[d(C,{name:"i-ion-logo-twitter",class:"text-xl"})],8,gn)):i("",!0),o.value.user_socials.youtube?(t(),l("a",{key:3,href:"https://youtube.com/channel/"+o.value.user_socials.youtube,target:"blank",class:"ml-3 cursor-pointer"},[d(C,{name:"i-ion-logo-youtube",class:"text-xl"})],8,_n)):i("",!0),o.value.user_socials.patreon?(t(),l("a",{key:4,href:"https://patreon.com/"+o.value.user_socials.patreon+"/",target:"blank",class:"ml-3 cursor-pointer"},[d(C,{name:"heart",class:"text-xl"})],8,kn)):i("",!0)])):i("",!0)])]),e("div",null,[o.value.bio?(t(),l("p",yn,[e("span",{id:"user-bio-"+o.value.id},s(o.value.bio.length>300?`${o.value.bio.slice(0,300)}...`:o.value.bio),9,$n),o.value.bio.length>300?(t(),l("a",{key:0,id:"user-bio-read-more-"+o.value.id,class:"href",onClick:P[7]||(P[7]=H(D=>se(o.value.bio,o.value.id,"user-bio-read-more-","user-bio-"),["prevent"]))},s(A.$t("readMore")),9,xn)):i("",!0)])):i("",!0)])])])]),e("div",Mn,[e("img",{src:A.avatarCoverUrl(o.value.avatar_bucket,o.value.avatar_filename),class:"flex mx-auto -mt-14 w-2/6 sm:-mt-16 sm:w-1/5 avatar md:hidden",onError:P[8]||(P[8]=(...D)=>A.imageLoadError&&A.imageLoadError(...D))},null,40,Cn),e("div",In,s(o.value.name),1),e("div",null,s(o.value.username),1),e("div",En,[o.value.pen_name?(t(),l("span",Ln,[d(C,{name:"i-ion-pencil-outline",class:"mr-1 text-base font-bold"}),z(" "+s(o.value.pen_name&&o.value.pen_name!==""?o.value.pen_name:"-"),1)])):i("",!0),e("div",An,[o.value.gender==="m"?(t(),l("span",Pn,[d(C,{name:"i-ion-male-outline",class:"mr-1 ml-2 text-base font-bold"}),Fn])):i("",!0),o.value.gender==="f"?(t(),l("span",Sn,[d(C,{name:"i-ion-female-outline",class:"mr-1 ml-2 text-base font-bold"}),Tn])):i("",!0)])]),o.value.bio?(t(),l("div",jn,[e("span",{id:"mobile__user-bio-"+o.value.id},s(o.value.bio.length>150?`${o.value.bio.slice(0,150)}...`:o.value.bio),9,Rn),o.value.bio.length>150?(t(),l("a",{key:0,id:"mobile__user-bio-read-more-"+o.value.id,class:"href",onClick:P[9]||(P[9]=H(D=>se(o.value.bio,o.value.id,"mobile__user-bio-read-more-","mobile__user-bio-"),["prevent"]))},s(A.$t("readMore")),9,Un)):i("",!0)])):i("",!0),o.value.user_socials?(t(),l("div",Bn,[o.value.user_socials.facebook?(t(),l("a",{key:0,href:"https://facebook.com/"+o.value.user_socials.facebook,target:"blank",class:"ml-3 cursor-pointer"},[d(C,{name:"i-ion-logo-facebook",class:"text-xl"})],8,zn)):i("",!0),o.value.user_socials.instagram?(t(),l("a",{key:1,href:"https://instagram.com/"+o.value.user_socials.instagram+"/",target:"blank",class:"ml-3 cursor-pointer"},[d(C,{name:"i-ion-logo-instagram",class:"text-xl"})],8,On)):i("",!0),o.value.user_socials.twitter?(t(),l("a",{key:2,href:"https://twitter.com/"+o.value.user_socials.twitter,target:"blank",class:"ml-3 cursor-pointer"},[d(C,{name:"i-ion-logo-twitter",class:"text-xl"})],8,Vn)):i("",!0),o.value.user_socials.youtube?(t(),l("a",{key:3,href:"https://youtube.com/channel/"+o.value.user_socials.youtube,target:"blank",class:"ml-3 cursor-pointer"},[d(C,{name:"i-ion-logo-youtube",class:"text-xl"})],8,Dn)):i("",!0),o.value.user_socials.patreon?(t(),l("a",{key:4,href:"https://patreon.com/"+o.value.user_socials.patreon+"/",target:"blank",class:"ml-3 cursor-pointer"},[d(C,{name:"i-ion-heart",class:"text-xl"})],8,Nn)):i("",!0)])):i("",!0),e("div",qn,[e("div",{class:"p-2 cursor-pointer hover:text-colored",onClick:P[10]||(P[10]=D=>h.value="followerList")},[e("b",null,s($.value.followers),1),Gn,e("i",null,s(A.$t("followers")),1)]),e("div",{class:"p-2 cursor-pointer hover:text-colored",onClick:P[11]||(P[11]=D=>h.value="followingList")},[e("b",null,s($.value.followings),1),Wn,e("i",null,s(A.$t("following")),1)])]),w(k).loggedIn&&o.value.id!==w(k).user.id?(t(),l("div",{key:2,class:R(["mt-2 w-auto",J.value?"danger-button":"primary-button"]),onClick:P[12]||(P[12]=D=>J.value?V(o.value.id):j(o.value.id))},[I(e("div",Hn,[d(C,{name:"i-ri-user-add-fill","text-size":"text-base"}),z(" "+s(A.$t("follow")),1)],512),[[L,!J.value]]),I(e("div",Jn,[d(C,{name:re.value,"text-size":"text-base"},null,8,["name"]),z(" "+s(le.value===null?A.$t("following"):le.value),1)],512),[[L,J.value]])],2)):i("",!0)]),e("div",Kn,[e("div",Qn,[e("div",{class:R(["mr-2 profile-navigation__mobile theme-color-secondary",{"button-color text-white":w(h)=="dashboard"}]),onClick:P[13]||(P[13]=D=>M("dashboard"))},[e("div",null,[I(d(C,{name:"i-ion-home-outline",class:"text-white"},null,512),[[L,w(h)=="dashboard"]]),I(d(C,{name:"i-ion-home-outline",class:"hover:text-white"},null,512),[[L,w(h)!="dashboard"]])]),e("span",null,s(A.$t("dashboard")),1)],2),e("div",{class:R(["mr-2 profile-navigation__mobile theme-color-secondary",{"button-color text-white":w(h)=="albums"}]),onClick:P[14]||(P[14]=D=>M("albums"))},[e("div",null,[I(d(C,{name:"i-ion-folder-outline",class:"text-white"},null,512),[[L,w(h)=="albums"]]),I(d(C,{name:"i-ion-folder-outline",class:"hover:text-white"},null,512),[[L,w(h)!="albums"]])]),e("span",null,s(A.$t("albums.album")),1)],2),e("div",{class:R(["profile-navigation__mobile theme-color-secondary",{"button-color text-white":w(h)=="collections"}]),onClick:P[15]||(P[15]=D=>M("collections"))},[e("div",null,[I(d(C,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[L,w(h)=="collections"]]),I(d(C,{name:"i-majesticons-bookmark-line",class:"hover:text-white"},null,512),[[L,w(h)!="collections"]])]),e("span",null,s(A.$t("collections.collection")),1)],2)]),e("div",Xn,[e("div",Yn,[e("div",{class:R(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":w(h)==="dashboard"}]),onClick:P[16]||(P[16]=D=>M("dashboard"))},[e("div",Zn,[I(d(C,{name:"i-humbleicons-dashboard",class:"text-white"},null,512),[[L,w(h)==="dashboard"]]),I(d(C,{name:"i-humbleicons-dashboard"},null,512),[[L,w(h)!=="dashboard"]]),e("label",ei,s(A.$t("dashboard")),1)]),ti],2),e("div",{class:R(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":w(h)==="albums"}]),onClick:P[17]||(P[17]=D=>M("albums"))},[e("div",oi,[I(d(C,{name:"i-bx-photo-album",class:"text-white"},null,512),[[L,w(h)==="albums"]]),I(d(C,{name:"i-bx-photo-album"},null,512),[[L,w(h)!=="albums"]]),e("label",li,s(A.$t("albums.album")),1)]),e("span",si,s($.value.album),1)],2),e("div",{class:R(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":w(h)==="collections"}]),onClick:P[18]||(P[18]=D=>M("collections"))},[e("div",ai,[I(d(C,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[L,w(h)==="collections"]]),I(d(C,{name:"i-majesticons-bookmark-line"},null,512),[[L,w(h)!=="collections"]]),e("label",ni,s(A.$t("collections.collection")),1)]),e("span",ii,s($.value.collection),1)],2)]),e("div",ri,[w(h)==="dashboard"?(t(),l("div",ui,[e("div",di,[e("div",{class:R(["flex flex-row justify-between w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":U.value==="feed"}]),onClick:P[19]||(P[19]=D=>U.value="feed")},[z(s(A.$t("feed"))+" ",1),e("span",{class:R(["px-1 ml-2 rounded",U.value==="feed"?"theme-color":"button-color text-white"])},s($.value.feed),3)],2),e("div",{class:R(["flex flex-row justify-between mr-0 w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":U.value==="artwork"}]),onClick:P[20]||(P[20]=D=>U.value="artwork")},[z(s(A.$t("artworks.artwork"))+" ",1),e("span",{class:R(["px-1 ml-2 rounded",U.value==="artwork"?"theme-color":"button-color text-white"])},s($.value.artwork),3)],2)]),I(e("div",ci,[e("button",{class:"w-full action-button secondary-button md:w-auto",onClick:P[21]||(P[21]=D=>b.value.manageMode=!b.value.manageMode)},[d(C,{name:b.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),z(" "+s(b.value.manageMode?A.$t("quit"):A.$t("manage")),1)]),I(e("button",{class:"w-full primary-button md:w-auto",onClick:P[22]||(P[22]=D=>G())},[d(C,{name:"i-ion-add-outline"}),z(" "+s(A.$t("albums.addToAlbum")),1)],512),[[L,b.value.manageMode]])],512),[[L,!n.value&&w(k).loggedIn&&w(k).user.id===o.value.id&&U.value==="artwork"&&b.value.showManageMode]]),d(ie,{loading:n.value},null,8,["loading"]),I(e("div",{class:"p-2 mt-2 text-black bg-yellow-200 rounded-md"},s(A.$t("profile.manageModeActiveMessage")),513),[[L,b.value.manageMode]]),e("div",null,[U.value==="feed"?(t(),q(Rt,{key:0,ref:"feedListRef",class:"mt-2","user-id":o.value.id},null,8,["user-id"])):i("",!0),!n.value&&U.value==="artwork"?(t(),q(Ot,{key:1,ref_key:"artworkListRef",ref:c,"user-id":o.value.id,"manage-mode":b.value.manageMode,onFeedSelectedItems:x,onOnEmpty:B},null,8,["user-id","manage-mode"])):i("",!0)])])):i("",!0),w(h)==="albums"?(t(),l("div",mi,[n.value?i("",!0):(t(),q(Il,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):i("",!0),w(h)==="collections"?(t(),l("div",vi,[n.value?i("",!0):(t(),q(ca,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):i("",!0),w(h)==="followerList"?(t(),l("div",fi,[n.value?i("",!0):(t(),q(Ma,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):i("",!0),w(h)==="followingList"?(t(),l("div",pi,[n.value?i("",!0):(t(),q(za,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):i("",!0)])])])]),n.value?i("",!0):(t(),q(De,{key:0,id:"album-selection-modal",ref_key:"albumSelectionModalRef",ref:N,class:"modal","work-ids":O.value,onAddedToAlbum:de},null,8,["work-ids"])),I(d(me,{id:"item-added-to-album-alert",text:A.$t("albums.itemAdded")},null,8,["text"]),[[L,Y.value]])]),_:1})}}},Ci=ee(hi,[["__scopeId","data-v-51d43998"]]);export{Ci as P};
