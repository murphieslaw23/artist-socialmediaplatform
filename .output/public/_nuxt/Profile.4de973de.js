import{h as ne,i as Q,r as h,o,l,M as J,N as X,m as e,b as c,w as K,p as z,t as a,q as u,u as w,s as x,v as E,F as H,G as Z,x as he,K as be,L as we,X as Re,c as N,a2 as ke,J as R,A as ge,E as ae,D as Ee,k as re,au as Le,ce as Ae,P as Ue,j as Be,C as ze}from"./entry.ece145ee.js";import{W as ye,M as $e,e as ce,S as me,d as ve,_ as pe,f as fe,g as Oe,b as Ve}from"./ModalView.f725dc87.js";import{v as Ne,u as _e,L as De}from"./Layout.811f3195.js";import{_ as $,u as qe}from"./Icon.6574d282.js";import{u as We}from"./useFeed.e93a5333.js";import{F as Ge}from"./FeedModalView.178fac63.js";import{_ as ee}from"./_plugin-vue_export-helper.a1a6add7.js";import{_ as ue}from"./ErrorMessages.988aa1e8.js";import{u as xe}from"./useUser.094e0fe8.js";const Me=i=>(be("data-v-4bb85468"),i=i(),we(),i),He={class:"mx-auto w-full md:w-1/2"},Ke={class:"flex flex-row mb-4 rounded-lg border-none theme-color-secondary shadow-none"},Je={class:"w-full"},Xe={key:0,class:"p-4 user-info"},Qe=["src"],Ye={class:"name"},Ze=Me(()=>e("br",null,null,-1)),et=Me(()=>e("span",{class:"mx-1"},"\xB7",-1)),tt={class:"text-xxs"},ot={class:"px-4 mt-6"},lt={class:"mt-2"},st={class:"float-right m-6 interactions"},at={key:0,class:"reactions"},nt=["onClick"],it=["onClick"],rt={class:"option dropdown"},ut={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"option-dropdown-items"},dt={class:"option-dropdown dropdown-menu"},ct={id:"option-dropdown-items",class:"w-52 toggler","aria-labelledby":"option-dropdown-buttons",role:"menu"},mt={class:"menu-wrapper"},vt={class:"mx-auto text-center"},ft={class:"mx-auto text-center"},pt={class:"mx-auto mt-10 text-center"},ht=Me(()=>e("b",null,"(\u3186_\u3186)",-1)),bt={id:"chronological-feed-modal",class:"modal work-view"},wt={__name:"Feeds",props:{userId:{type:Number,default:0}},setup(i){const L=i,y=ne(),{oApiConfiguration:r,fetchOptions:A}=Q(),m=We(r,A()),_=h([]),g=h({page:0,perPage:10}),f=async({loaded:d})=>{await setTimeout(async()=>{const[p,k]=await m.getFeedByUserId({userId:L.userId,pagination:{page:g.value.page,perPage:g.value.perPage}});p.feeds.length&&(g.value.page+=1,p.feeds.forEach(t=>{_.value.push(t),t.liked&&n.value.push(t.id)})),d(_.value.length,g.value.perPage)},1e3)},v=h(null),s=d=>{v.value.view(d),Z().openModal("chronological-feed-modal")},n=h([]),b=async d=>{const[p,k]=await m.like({feedId:d});if(p){n.value.push(d);const t=document.getElementById(`profileFeedLikeButton-${d}`);t.classList.add("animate-bounce"),setInterval(()=>{t.classList.remove("animate-bounce")},2500)}},T=async d=>{const[p,k]=await m.unlike({feedId:d});if(p){const t=n.value.indexOf(d);n.value.splice(t,1)}};return(d,p)=>{const k=he;return o(),l("div",He,[(o(!0),l(J,null,X(_.value,t=>(o(),l("div",{key:t.id},[e("div",Ke,[e("div",Je,[t.users?(o(),l("div",Xe,[c(k,{to:"/profile/"+t.users.username},{default:K(()=>[e("img",{class:"avatar",src:d.avatarCoverUrl(t.users.avatar_bucket,t.users.avatar_filename),onError:p[0]||(p[0]=(...M)=>d.imageLoadError&&d.imageLoadError(...M))},null,40,Qe)]),_:2},1032,["to"]),e("div",Ye,[c(k,{to:"/profile/"+t.users.username,class:"fullname"},{default:K(()=>[z(a(t.users.name),1)]),_:2},1032,["to"]),Ze,c(k,{to:"/profile/"+t.users.username,class:"username hover:underline"},{default:K(()=>[z(" @"+a(t.users.username),1)]),_:2},1032,["to"]),et,e("span",tt,a(d.formatDate(t.scheduled_post?t.scheduled_post:t.created_at,!0)),1)])])):u("",!0),e("div",ot,[e("p",lt,a(t.text),1)]),e("div",st,[w(y).loggedIn?(o(),l("div",at,[e("span",{class:"leading-8",onClick:M=>n.value.includes(t.id)?T(t.id):b(t.id)},[x(c($,{id:"profileFeedLikeButton-"+t.id,name:"i-ion-heart",class:"mr-1 text-red-500 hover:text-red-500"},null,8,["id"]),[[E,n.value.includes(t.id)]]),x(c($,{name:"i-ion-heart-outline",class:"mr-1 icon-color hover:text-red-500"},null,512),[[E,!n.value.includes(t.id)]]),z(" "+a(d.thousand(t._count.feed_likes)),1)],8,nt),e("span",{class:"leading-8",onClick:H(M=>s(t.id),["prevent"])},[c($,{name:"i-mdi-comment-multiple-outline",class:"mr-1 icon-color hover:text-blue-500"}),z(" "+a(d.thousand(t._count.feed_comments)),1)],8,it),e("div",rt,[e("button",ut,[e("span",null,[c($,{name:"i-uit-ellipsis-v",class:"align-middle icon icon-color"})])]),e("div",dt,[e("div",ct,[e("div",mt,[c(k,{to:"/feed/"+t.id,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:K(()=>[c($,{name:"i-fluent-arrow-enter-20-filled",class:"mr-2 text-base"}),z(" "+a(d.$t("open")),1)]),_:2},1032,["to"]),c(k,{to:"/feed/"+t.id,target:"_blank",class:"flex z-20 py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:K(()=>[c($,{name:"i-ci-external-link",class:"mr-2 text-base"}),z(" "+a(d.$t("openInNewTab")),1)]),_:2},1032,["to"])])])])])])):u("",!0)])])])]))),128)),c(w(Ne.exports.VueEternalLoading),{load:f},{loading:K(()=>[e("div",vt,[c($,{name:"i-line-md-loading-twotone-loop",class:"text-3xl"})])]),"no-more":K(()=>[e("div",ft,a(d.$t("youHaveReachedTheEnd")),1)]),"no-results":K(()=>[e("div",pt,[ht,z(" "+a(d.$t("nothingToShow")),1)])]),_:1}),e("div",bt,[c(Ge,{ref_key:"chronologicalFeedModalViewRef",ref:v,section:"chronological-feed"},null,512)])])}}},gt=ee(wt,[["__scopeId","data-v-4bb85468"]]),_t={id:"lists"},kt=["id"],yt={__name:"Artworks",props:{userId:{type:Number,default:0},manageMode:{type:Boolean,default:!1}},emits:["feedSelectedItems","onEmpty"],setup(i,{emit:L}){const y=i,{oApiConfiguration:r,fetchOptions:A}=Q(),m=qe(r,A()),_="profile",g=h(!1);Re(()=>{f()});const f=async()=>{const[V,q]=await n();v.value=V,q.record_total<=s.value.perPage&&d(),q.record_total===0&&M()},v=h([]),s=h({perPage:24,page:0}),n=async()=>{s.value.page===0&&(g.value=!0);const[V,q,Y]=await m.getUserArtworks({userId:y.userId,pagination:{page:s.value.page,perPage:s.value.perPage}});if(Y)D();else return q.record_total<=s.value.perPage&&d(),q.record_total===0&&M(),s.value.page+=1,b(),[V,q]},b=()=>{g.value=!1,t.value=!1,j.value=!1},T=h(!0),d=()=>{T.value=!1},p=h({delay:!1}),k=async()=>{p.value.delay=!0;const[V,q]=await n();for(let Y=0;Y<V.length;Y++)v.value.push(V[Y]);p.value.delay=!1,dataPagination.next_previous.next_page||d(),dataPagination.next_previous.next_page&&dataPagination.current_page===p.maxLoad&&(d(),p.showDiscoveryButton=!0)},t=h(!1),M=()=>{t.value=!0,d(),L("onEmpty")},j=h(!1),D=()=>{g.value=!1,j.value=!0,d()},W=h(null),P=(V,q=!1)=>{W.value.view(V,q),Z().openModal(_+"-modal")},U=V=>{L("feedSelectedItems",V)};return(V,q)=>(o(),l("div",_t,[x(e("div",null,[(o(),N(ke,null,[x(c(ye,{"section-class":"work-grid",works:v.value,view:P,"manage-mode":i.manageMode,onFeedManageList:U},null,8,["works","manage-mode"]),[[E,!t.value]])],1024)),x(e("div",{class:R(["primary-button",p.value.delay?"animate-pulse":""]),onClick:k},a(V.$t("loadMore")),3),[[E,T.value]])],512),[[E,!g.value]]),c(ue,{loading:g.value,empty:t.value,error:j.value,fetch:n},null,8,["loading","empty","error"]),e("div",{id:_+"-modal",class:"modal work-view"},[x(c($e,{ref_key:"profileModalViewRef",ref:W,section:_},null,512),[[E,!g.value]])],8,kt)]))}},$t=ee(yt,[["__scopeId","data-v-0121f048"]]),xt={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Mt={class:"title"},Ct=["name"],It=["placeholder"],Et=["placeholder"],Lt=["for"],At=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),Pt={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},Ft=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),St=[Ft],jt={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Tt=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Rt=[Tt],Ut={class:"ml-2"},Bt={class:"flex flex-row gap-2 justify-end mt-2"},zt={type:"submit",class:"primary-button"},Ot={__name:"AlbumFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(i,{emit:L}){const y=i,{oApiConfiguration:r,fetchOptions:A}=Q(),m=ce(r,A()),{t:_}=ge(),g="create-album-form",f=h({title:"",description:"",isPublic:1,category:"artwork"}),v=async()=>{_e().validate(g,_);try{let s=!1,n={};if(y.category){const[b,T,d]=await m.createAlbum(y.category,f.value);s=b,n=T}s&&(Z().closeModal(y.modalId),L("created",n))}catch{}};return(s,n)=>(o(),l("div",null,[e("div",xt,[e("div",null,[e("span",Mt,a(s.$t("albums.create.form.title")),1),e("form",{id:g,class:"mt-2",onSubmit:n[4]||(n[4]=H(b=>v(),["prevent"]))},[e("n-validate",{for:"title",name:s.$t("title")},[x(e("input",{"onUpdate:modelValue":n[0]||(n[0]=b=>f.value.title=b),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:s.$t("title")},null,8,It),[[ae,f.value.title]])],8,Ct),x(e("textarea",{"onUpdate:modelValue":n[1]||(n[1]=b=>f.value.description=b),class:"form-input theme-color-secondary",placeholder:s.$t("description"),"data-gramm":"false"},null,8,Et),[[ae,f.value.description]]),e("label",{for:f.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:n[2]||(n[2]=b=>f.value.isPublic=!f.value.isPublic)},[At,f.value.isPublic?(o(),l("span",Pt,St)):u("",!0),f.value.isPublic?u("",!0):(o(),l("span",jt,Rt))]),e("span",Ut,a(s.$t("private")),1)],8,Lt),e("div",Bt,[e("button",{class:"cancel-button",onClick:n[3]||(n[3]=H(b=>s.closeModal(i.modalId),["prevent"]))},a(s.$t("cancel")),1),e("button",zt,a(s.$t("create")),1)])],32)])])]))}},Vt={id:"lists"},Nt={class:"p-4 mb-4 w-full rounded-md theme-color-secondary"},Dt={class:"mb-2 text-base font-bold"},qt={class:"mb-2"},Wt=z(),Gt={class:"italic"},Ht=["id"],Kt={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1}},emits:["onAlbumEmpty","feedManageList"],setup(i,{expose:L,emit:y}){const r=i,{oApiConfiguration:A,fetchOptions:m}=Q(),_=ce(A,m()),g=h(r.id);Ee(()=>r.id,(P,U)=>{g.value=P}),re(async()=>{await s()});const f=h(!1),v=h({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:12},list:[],empty:!1}),s=async()=>{f.value=!0,await n(),await b(),f.value=!1},n=async()=>{const[P,U]=await _.getInfo(g.value);v.value.info=P.data},b=async()=>{const[P,U,V]=await _.listAlbumItems({albumId:g.value,pagination:{page:v.value.pagination.page,perPage:v.value.pagination.page===0?v.value.pagination.firstLoad:v.value.pagination.perPage}});U?v.value.pagination.page===0?v.value.pagination.page=v.value.pagination.firstLoad/v.value.pagination.perPage:v.value.pagination.page+=v.value.pagination.page!==0?1:2:v.value.loadMore=!1,P!==null&&P.length?(P.forEach(q=>{v.value.list.push(q.artworks)}),y("onAlbumEmpty",!1)):(v.value.empty=!0,y("onAlbumEmpty",!0))},T=()=>{v.value.loadMore=!0,v.value.pagination.page=0,v.value.list=[]},d=h([]),p=P=>{d.value=P,y("feedManageList",P)},k=h(!1);let t;const M=async()=>{const[P,U]=await _.removeItems(r.id,d.value);P&&(ve().splash(t,k,"item-removed-alert"),T(),await s())},j=h("album"),D=h(null),W=(P,U=!1)=>{D.value.view(P,U),Z().openModal(j.value+"-modal")};return L({fetchInfo:n,removeItems:M}),(P,U)=>(o(),l("div",Vt,[e("div",{class:"hidden",onClick:U[0]||(U[0]=V=>n())}),e("div",{class:"hidden",onClick:U[1]||(U[1]=V=>M())}),e("div",Nt,[e("div",Dt,a(v.value.info.name),1),e("div",qt,a(v.value.info.description),1),e("div",null,[e("b",null,a(P.$t("private"))+":",1),Wt,e("span",Gt,a(v.value.info.is_public?P.$t("no"):P.$t("yes")),1)]),e("div",null,[e("b",null,a(P.$t("createdAt")),1),z(" "+a(P.formatDate(v.value.info.created_at)),1)])]),x(e("div",null,[(o(),N(ke,null,[x(c(ye,{"section-class":"work-grid",works:v.value.list,view:W,"manage-mode":i.manageMode,onFeedManageList:p},null,8,["works","manage-mode"]),[[E,!v.value.empty]])],1024)),x(e("div",{class:"primary-button",onClick:U[2]||(U[2]=V=>b())},a(P.$t("loadMore")),513),[[E,v.value.loadMore]])],512),[[E,!f.value]]),c(ue,{loading:f.value,empty:v.value.empty,error:!1,fetch:s},null,8,["loading","empty"]),f.value?u("",!0):(o(),l("div",{key:0,id:j.value+"-modal",class:"modal work-view"},[c($e,{ref_key:"albumModalViewRef",ref:D,section:j.value},null,8,["section"])],8,Ht)),x(c(me,{id:"item-removed-alert",text:P.$t("albums.itemRemoved")},null,8,["text"]),[[E,k.value]])]))}},Jt=ee(Kt,[["__scopeId","data-v-cea642c2"]]),Xt={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Qt={class:"title"},Yt=["name"],Zt=["placeholder"],eo=["placeholder"],to=["for"],oo=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),lo={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},so=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),ao=[so],no={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},io=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),ro=[io],uo={class:"ml-2"},co={class:"flex flex-row gap-2 justify-end mt-2"},mo={type:"submit",class:"primary-button"},vo={__name:"EditForm",props:{albumId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(i,{expose:L,emit:y}){const r=i,{oApiConfiguration:A,fetchOptions:m}=Q(),_=ce(A,m()),{t:g}=ge(),f=h(!0),v=async d=>{if(d){T(),f.value=!0;const[p,k]=await _.getInfo(d),t=p.data;n.value.id=d,n.value.name=t.name,n.value.description=t.description,n.value.isPublic=!!t.is_public,f.value=!1}},s="update-album-form",n=h({id:0,name:"",description:"",isPublic:!1}),b=async()=>{_e().validate(s,g);const[d,p]=await _.update({id:n.value.id,name:n.value.name,description:n.value.description,isPublic:n.value.isPublic?1:0});p||(Z().closeModal(r.modalId),y("updated",n.value),T())},T=()=>{n.value={id:0,name:"",description:"",isPublic:0}};return L({fetch:v}),(d,p)=>(o(),l("div",null,[e("div",Xt,[e("div",null,[e("span",Qt,a(d.$t("albums.edit.form.title")),1),f.value?u("",!0):(o(),l("form",{key:0,id:s,class:"mt-2",onSubmit:p[4]||(p[4]=H(k=>b(),["prevent"]))},[e("n-validate",{for:"title",name:d.$t("title")},[x(e("input",{"onUpdate:modelValue":p[0]||(p[0]=k=>n.value.name=k),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:d.$t("title")},null,8,Zt),[[ae,n.value.name]])],8,Yt),x(e("textarea",{"onUpdate:modelValue":p[1]||(p[1]=k=>n.value.description=k),class:"form-input theme-color-secondary",placeholder:d.$t("description"),"data-gramm":"false"},null,8,eo),[[ae,n.value.description]]),e("label",{for:n.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:p[2]||(p[2]=k=>n.value.isPublic=!n.value.isPublic)},[oo,n.value.isPublic?(o(),l("span",lo,ao)):u("",!0),n.value.isPublic?u("",!0):(o(),l("span",no,ro))]),e("span",uo,a(d.$t("private")),1)],8,to),e("div",co,[e("button",{class:"cancel-button",onClick:p[3]||(p[3]=H(k=>d.closeModal(i.modalId),["prevent"]))},a(d.$t("cancel")),1),e("button",mo,a(d.$t("save")),1)])],32))])])]))}},Pe=""+new URL("folder.11be08fa.png",import.meta.url).href,Ce=i=>(be("data-v-c3fbed63"),i=i(),we(),i),fo={class:"mb-2"},po={key:0},ho=Ce(()=>e("img",{src:Pe,class:"rounded"},null,-1)),bo=[ho],wo={key:1},go={class:"relative text-center"},_o={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},ko={class:"overflow-hidden rounded-md"},yo=["src"],$o={key:2,class:"imgrid"},xo={class:"relative text-center"},Mo={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Co={class:"overflow-hidden rounded-md"},Io=["src"],Eo=Ce(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),Lo=Ce(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),Ao={key:3,class:"imgrid"},Po={class:"relative text-center"},Fo={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},So={class:"overflow-hidden rounded-md"},jo=["src"],To={key:4,class:"imgrid"},Ro={class:"relative text-center"},Uo={key:0,class:"absolute top-1/2 left-1/2 z-10 text-tiny font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Bo={class:"overflow-hidden rounded-md"},zo=["src"],Oo={key:5,class:"imgrid"},Vo={key:0,class:"relative text-center"},No={key:0,class:"absolute top-1/2 left-1/2 z-10 text-tiny font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Do={class:"overflow-hidden rounded-md"},qo=["src"],Wo={key:1,class:"relative text-center"},Go={class:"absolute top-1/2 left-1/2 z-10 text-3xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Ho={class:"overflow-hidden rounded-md"},Ko=["src"],Jo={__name:"ArtworkThumbnail",props:{album:{type:Object,default:()=>{}}},setup(i){const L=ne(),y={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(r,A)=>(o(),l("div",fo,[!i.album.album_has_artworks||i.album._count.album_has_artworks===0?(o(),l("div",po,bo)):u("",!0),i.album.album_has_artworks&&i.album._count.album_has_artworks===1?(o(),l("div",wo,[e("div",go,[r.applyExplicitFilter(w(L),i.album.album_has_artworks[0].artworks.is_explicit)?(o(),l("span",_o,a(r.$t("explicitContent")),1)):u("",!0),e("div",ko,[i.album.album_has_artworks&&i.album._count.album_has_artworks===1?(o(),l("img",{key:0,src:r.artworkThumb(i.album.album_has_artworks[0].artworks.artwork_assets[0].bucket,i.album.album_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:R(["object-cover object-top rounded",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),i.album.album_has_artworks[0].artworks.is_explicit)}]),style:{"aspect-ratio":"1/1"},onError:A[0]||(A[0]=(...m)=>r.imageLoadError&&r.imageLoadError(...m))},null,42,yo)):u("",!0)])])])):u("",!0),i.album.album_has_artworks&&i.album._count.album_has_artworks===2?(o(),l("div",$o,[(o(!0),l(J,null,X(i.album.album_has_artworks,(m,_)=>(o(),l("div",{key:_,class:R(y[2][_])},[e("div",xo,[r.applyExplicitFilter(w(L),m.artworks.is_explicit)?(o(),l("span",Mo,a(r.$t("explicitContent")),1)):u("",!0),e("div",Co,[e("img",{class:R(["theme-color",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),m.artworks.is_explicit)}]),src:r.artworkThumb(m.artworks.artwork_assets[0].bucket,m.artworks.artwork_assets[0].filename,"thumbnail"),onError:A[1]||(A[1]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,Io)])])],2))),128)),Eo,Lo])):u("",!0),i.album.album_has_artworks&&i.album._count.album_has_artworks===3?(o(),l("div",Ao,[(o(!0),l(J,null,X(i.album.album_has_artworks,(m,_)=>(o(),l("div",{key:_,class:R(y[3][_])},[e("div",Po,[r.applyExplicitFilter(w(L),m.artworks.is_explicit)?(o(),l("span",Fo,a(r.$t("explicitContent")),1)):u("",!0),e("div",So,[e("img",{class:R(["theme-color",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),m.artworks.is_explicit)}]),src:r.artworkThumb(m.artworks.artwork_assets[0].bucket,m.artworks.artwork_assets[0].filename,"thumbnail"),onError:A[2]||(A[2]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,jo)])])],2))),128))])):u("",!0),i.album.album_has_artworks&&i.album._count.album_has_artworks===4?(o(),l("div",To,[(o(!0),l(J,null,X(i.album.album_has_artworks,(m,_)=>(o(),l("div",{key:_},[e("div",Ro,[r.applyExplicitFilter(w(L),m.artworks.is_explicit)?(o(),l("span",Uo,a(r.$t("explicitContent")),1)):u("",!0),e("div",Bo,[e("img",{class:R(["theme-color",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),m.artworks.is_explicit)}]),src:r.artworkThumb(m.artworks.artwork_assets[0].bucket,m.artworks.artwork_assets[0].filename,"thumbnail"),onError:A[3]||(A[3]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,zo)])])]))),128))])):u("",!0),i.album.album_has_artworks&&i.album._count.album_has_artworks>4?(o(),l("div",Oo,[(o(!0),l(J,null,X(i.album.album_has_artworks,(m,_)=>(o(),l("div",{key:_},[_<3?(o(),l("div",Vo,[r.applyExplicitFilter(w(L),m.artworks.is_explicit)?(o(),l("span",No,a(r.$t("explicitContent")),1)):u("",!0),e("div",Do,[e("img",{class:R(["theme-color",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),m.artworks.is_explicit)}]),src:r.artworkThumb(m.artworks.artwork_assets[0].bucket,m.artworks.artwork_assets[0].filename,"thumbnail"),onError:A[4]||(A[4]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,qo)])])):(o(),l("div",Wo,[e("span",Go,"+"+a(i.album._count.album_has_artworks-4),1),e("div",Ho,[e("img",{src:r.artworkThumb(m.artworks.artwork_assets[0].bucket,m.artworks.artwork_assets[0].filename,"thumbnail"),class:R(["z-0 brightness-50",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),m.artworks.is_explicit)}]),onError:A[5]||(A[5]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,Ko)])]))]))),128))])):u("",!0)]))}},Xo=ee(Jo,[["__scopeId","data-v-c3fbed63"]]),Qo={class:"mb-4 w-full"},Yo={key:0,class:"flex flex-row justify-between"},Zo={class:"flex flex-row"},el={key:0},tl={key:1,class:"flex flex-row justify-between"},ol={class:"flex flex-row"},ll={class:"flex flex-row gap-2"},sl={class:"flex flex-row gap-2"},al={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},nl=["onClick"],il={class:"flex flex-row pb-1 mt-4 font-bold"},rl={class:"text-xs font-normal"},ul={__name:"Album",props:{userId:{type:Number,default:0}},setup(i){const L=i,y=ne(),{oApiConfiguration:r,fetchOptions:A}=Q(),m=ce(r,A());re(()=>{b()});const _=h(!1),g=h("artwork"),f=h(0),v=h([]),s=h({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),n=h({artwork:0}),b=async()=>{_.value=!0;const[F,S,B]=await m.fetchAlbums(L.userId,g.value,s.value.pagination.page===0?s.value.pagination.firstLoad:s.value.pagination.perPage,s.value.pagination.page);if(B)t();else{F.length||(s.value.manageMode=!1,p()),F.forEach(C=>{v.value.push(C)}),s.value.pagination.page+=s.value.pagination.firstLoad/s.value.pagination.perPage,s.value.showLoadMore=S;const[se]=await m.countArtworkAlbums(L.userId);n.value.artwork=se}_.value=!1},T=async()=>await b(),d=h(!1),p=()=>{d.value=!0,s.value.showLoadMore=!1},k=h(!1),t=()=>{_.value=!1,k.value=!0,s.value.showLoadMore=!1},M=async()=>{_.value=!1,d.value=!1,k.value=!1,s.value.pagination.page=0,v.value=[],await b()},j=h(!1);let D;const W=async()=>{ve().splash(D,j,"created-alert"),await M()},P=h(null),U=()=>{P.value.fetch(f.value),Z().openModal("album-edit-form-modal")},V=h(null),q=F=>{V.value.fetchInfo(),v.value.forEach(S=>{S.id===F.id&&(S.name=F.name,S.description=F.description,S.is_public=F.isPublic)})},Y=()=>{V.value.removeItems()},oe=h([]),de=F=>{oe.value=F},G=async()=>{if(f.value!==0){const[F,S]=await m.deleteAlbum(f.value);F&&(f.value=0,M())}},le=F=>{s.value.showManageButton=!F,s.value.manageMode=!1},ie=()=>{f.value=0,s.value.showManageButton=!1,s.value.manageMode=!1};return(F,S)=>(o(),l("div",null,[e("div",Qo,[f.value?u("",!0):(o(),l("div",Yo,[e("div",Zo,[e("div",{class:R(["ml-0 primary-button theme-color-secondary",{"button-color text-white":g.value==="artwork"}]),onClick:S[0]||(S[0]=B=>g.value="artwork")},[z(a(F.$t("artworks.artwork"))+" ",1),e("span",{class:R(["px-1 ml-2 font-normal rounded",g.value==="artwork"?"theme-color":"button-color text-white"])},a(n.value.artwork),3)],2)]),w(y).loggedIn&&w(y).user.id===i.userId?(o(),l("div",el,[e("div",{class:"icon-button",onClick:S[1]||(S[1]=B=>F.openModal("album-form-modal"))},[c($,{name:"i-ion-add-outline"})])])):u("",!0)])),f.value?(o(),l("div",tl,[e("div",null,[e("div",{class:"ml-0 icon-button",onClick:S[2]||(S[2]=B=>ie())},[c($,{name:"i-ic-baseline-keyboard-arrow-left"})])]),e("div",ol,[x(e("div",ll,[e("button",{class:"action-button secondary-button",onClick:S[3]||(S[3]=B=>s.value.manageMode=!s.value.manageMode)},[c($,{name:s.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),z(" "+a(s.value.manageMode?F.$t("quit"):F.$t("manage")),1)]),x(e("button",{class:R(["flex flex-row",oe.value.length>0?"danger-button":"disabled-button cursor-not-allowed"]),onClick:S[4]||(S[4]=B=>oe.value.length>0?F.openModal("item-deletion-confirm-modal"):null)},[c($,{name:"i-akar-icons-trash-bin"}),z(" "+a(F.$t("albums.removeSelected")),1)],2),[[E,s.value.manageMode]])],512),[[E,w(y).loggedIn&&w(y).user.id===i.userId&&s.value.showManageButton]]),x(e("div",sl,[e("button",{class:"icon-button",onClick:S[5]||(S[5]=B=>U())},[c($,{name:"i-ph-gear-six"})]),e("button",{class:"danger-button-color b-button",onClick:S[6]||(S[6]=B=>F.openModal("album-deletion-confirm-modal"))},[c($,{name:"i-akar-icons-trash-bin"})])],512),[[E,w(y).loggedIn&&w(y).user.id===i.userId&&!s.value.manageMode]])])])):u("",!0),x(e("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},a(F.$t("albums.manageModeActiveMessage")),513),[[E,s.value.manageMode]])]),f.value?u("",!0):(o(),l("div",al,[(o(!0),l(J,null,X(v.value,B=>(o(),l("div",{key:B.id,class:R(["p-3 rounded-md cursor-pointer",B.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:se=>f.value=B.id},[B.type==="artwork"?(o(),N(Xo,{key:0,album:B},null,8,["album"])):u("",!0),e("div",il,[B.is_public?u("",!0):(o(),N($,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),e("span",rl,a(B.name),1)])],10,nl))),128))])),s.value.showLoadMore&&!f.value?(o(),l("div",{key:1,class:"mt-4 w-full primary-button",onClick:T},a(F.$t("loadMore")),1)):u("",!0),c(ue,{loading:_.value,empty:d.value,error:k.value,fetch:b},null,8,["loading","empty","error"]),!_.value&&!f.value?(o(),N(Ot,{key:2,id:"album-form-modal","modal-id":"album-form-modal",category:g.value,class:"modal",onCreated:W},null,8,["category"])):u("",!0),x(c(me,{id:"created-alert",text:F.$t("albums.created")},null,8,["text"]),[[E,j.value]]),!_.value&&f.value?(o(),N(vo,{key:3,id:"album-edit-form-modal",ref_key:"albumEditFormModalRef",ref:P,"modal-id":"album-edit-form-modal","album-id":f.value,class:"modal",onUpdated:q},null,8,["album-id"])):u("",!0),c(pe,{id:"album-deletion-confirm-modal","modal-id":"album-deletion-confirm-modal",message:"All saved items in this album will be deleted. Do you still want to delete this album?",class:"modal",onOnAccept:G},null,8,["message"]),c(pe,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this album. Do you still want to remove them?",class:"modal",onOnAccept:Y},null,8,["message"]),f.value&&!_.value?(o(),N(Jt,{key:4,id:f.value,ref_key:"albumDetailRef",ref:V,"manage-mode":s.value.manageMode,onOnAlbumEmpty:le,onFeedManageList:de},null,8,["id","manage-mode"])):u("",!0)]))}},dl=ee(ul,[["__scopeId","data-v-305be548"]]),cl={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},ml={class:"title"},vl=["placeholder"],fl=["placeholder"],pl=["for"],hl=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),bl={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},wl=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),gl=[wl],_l={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},kl=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),yl=[kl],$l={class:"ml-2"},xl={class:"flex flex-row gap-2 justify-end mt-2"},Ml={type:"submit",class:"primary-button"},Cl={__name:"CollectionFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(i,{emit:L}){const y=i,{oApiConfiguration:r,fetchOptions:A}=Q(),m=fe(r,A()),{t:_}=ge(),g="create-collection-form",f=h({title:"",description:"",isPublic:1,category:"artwork"}),v=async()=>{_e().validate(g,_);try{let s=!1,n={};if(y.category){const[b,T,d]=await m.createCollection(y.category,f.value);d||(s=b,n=T)}s&&(Z().closeModal(y.modalId),L("created",n))}catch{}};return(s,n)=>(o(),l("div",null,[e("div",cl,[e("div",null,[e("span",ml,a(s.$t("collections.create.form.title")),1),e("form",{id:g,class:"mt-2",onSubmit:n[4]||(n[4]=H(b=>v(),["prevent"]))},[e("n-validate",null,[x(e("input",{"onUpdate:modelValue":n[0]||(n[0]=b=>f.value.title=b),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:s.$t("title")},null,8,vl),[[ae,f.value.title]])]),x(e("textarea",{"onUpdate:modelValue":n[1]||(n[1]=b=>f.value.description=b),class:"form-input theme-color-secondary",placeholder:s.$t("description"),"data-gramm":"false"},null,8,fl),[[ae,f.value.description]]),e("label",{for:f.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:n[2]||(n[2]=b=>f.value.isPublic=!f.value.isPublic)},[hl,f.value.isPublic?(o(),l("span",bl,gl)):u("",!0),f.value.isPublic?u("",!0):(o(),l("span",_l,yl))]),e("span",$l,a(s.$t("private")),1)],8,pl),e("div",xl,[e("button",{class:"cancel-button",onClick:n[3]||(n[3]=H(b=>s.closeModal(i.modalId),["prevent"]))},a(s.$t("cancel")),1),e("button",Ml,a(s.$t("create")),1)])],32)])])]))}},Il={id:"lists"},El={class:"p-4 mb-4 w-full rounded-md theme-color-secondary"},Ll={class:"text-base font-bold mb-2"},Al={class:"mb-2"},Pl=z(),Fl={class:"italic"},Sl=["id"],jl={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1},type:{type:String,default:""}},emits:["onCollectionEmpty","feedManageList"],setup(i,{expose:L,emit:y}){const r=i,{oApiConfiguration:A,fetchOptions:m}=Q(),_=fe(A,m()),g=h(r.id);Ee(()=>r.id,(P,U)=>{g.value=P}),re(async()=>{await s()});const f=h(!1),v=h({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:12},list:[],empty:!1}),s=async()=>{f.value=!0,await n(),await b(),f.value=!1},n=async()=>{const[P,U]=await _.getInfo(g.value);v.value.info=P.data},b=async()=>{const[P,U,V]=await _.listCollectionItems({collectionId:g.value,pagination:{page:v.value.pagination.page,perPage:v.value.pagination.page===0?v.value.pagination.firstLoad:v.value.pagination.perPage}});U?v.value.pagination.page===0?v.value.pagination.page=v.value.pagination.firstLoad/v.value.pagination.perPage:v.value.pagination.page+=v.value.pagination.page!==0?1:2:v.value.loadMore=!1,P!==null&&P.length?(P.forEach(q=>{v.value.list.push(q.artworks)}),y("onCollectionEmpty",!1)):(v.value.empty=!0,y("onCollectionEmpty",!0))},T=()=>{v.value.loadMore=!0,v.value.pagination.page=0,v.value.list=[]},d=h([]),p=P=>{d.value=P,y("feedManageList",P)},k=h(!1);let t;const M=async()=>{const[P,U]=await _.removeItem({collectionId:r.id,type:r.type,workId:d.value});U||(ve().splash(t,k,"item-removed-alert"),T(),await s(),y("feedManageList",[]))},j=h("collection"),D=h(null),W=(P,U=!1)=>{D.value.view(P,U),Z().openModal(j.value+"-modal")};return L({fetchInfo:n,removeItem:M}),(P,U)=>(o(),l("div",Il,[e("div",{class:"hidden",onClick:U[0]||(U[0]=V=>n())}),e("div",{class:"hidden",onClick:U[1]||(U[1]=V=>M())}),e("div",El,[e("div",Ll,a(v.value.info.name),1),e("div",Al,a(v.value.info.description),1),e("div",null,[e("b",null,a(P.$t("private"))+":",1),Pl,e("span",Fl,a(v.value.info.is_public?P.$t("no"):P.$t("yes")),1)]),e("div",null,[e("b",null,a(P.$t("createdAt")),1),z(" "+a(P.formatDate(v.value.info.created_at)),1)])]),x(e("div",null,[(o(),N(ke,null,[x(c(ye,{"section-class":"work-grid",works:v.value.list,view:W,"manage-mode":i.manageMode,onFeedManageList:p},null,8,["works","manage-mode"]),[[E,!v.value.empty]])],1024)),x(e("div",{class:"primary-button",onClick:U[2]||(U[2]=V=>b())},a(P.$t("loadMore")),513),[[E,v.value.loadMore]])],512),[[E,!f.value]]),c(ue,{loading:f.value,empty:v.value.empty,error:!1,fetch:s},null,8,["loading","empty"]),f.value?u("",!0):(o(),l("div",{key:0,id:j.value+"-modal",class:"modal work-view"},[c($e,{ref_key:"collectionModalViewRef",ref:D,section:j.value},null,8,["section"])],8,Sl)),x(c(me,{id:"item-removed-alert",text:P.$t("collections.itemRemoved")},null,8,["text"]),[[E,k.value]])]))}},Tl=ee(jl,[["__scopeId","data-v-f3ff7e20"]]),Rl={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Ul={class:"title"},Bl=["placeholder"],zl=["placeholder"],Ol=["for"],Vl=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),Nl={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},Dl=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),ql=[Dl],Wl={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Gl=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Hl=[Gl],Kl={class:"ml-2"},Jl={class:"flex flex-row gap-2 justify-end mt-2"},Xl={type:"submit",class:"primary-button"},Ql={__name:"EditForm",props:{collectionId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(i,{expose:L,emit:y}){const r=i,{t:A}=ge(),{oApiConfiguration:m,fetchOptions:_}=Q(),g=fe(m,_()),f=h(!0),v=async d=>{if(d){T(),f.value=!0;const[p,k]=await g.getInfo(d);if(!k){const t=p.data;n.value.id=d,n.value.name=t.name,n.value.description=t.description,n.value.isPublic=!!t.is_public,f.value=!1}}},s="edit-collection-form",n=h({id:0,name:"",description:"",isPublic:!1}),b=async()=>{_e().validate(s,A);const[d,p]=await g.update({id:n.value.id,name:n.value.name,description:n.value.description,isPublic:n.value.isPublic?1:0});p||(Z().closeModal(r.modalId),y("updated",n.value),T())},T=()=>{n.value={id:0,name:"",description:"",isPublic:0}};return L({fetch:v}),(d,p)=>(o(),l("div",null,[e("div",{class:"hidden",onClick:p[0]||(p[0]=k=>v(0))}),e("div",Rl,[e("div",null,[e("span",Ul,a(d.$t("collections.edit.form.title")),1),f.value?u("",!0):(o(),l("form",{key:0,id:s,class:"mt-2",onSubmit:p[5]||(p[5]=H(k=>b(),["prevent"]))},[e("n-validate",null,[x(e("input",{"onUpdate:modelValue":p[1]||(p[1]=k=>n.value.name=k),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:d.$t("title")},null,8,Bl),[[ae,n.value.name]])]),x(e("textarea",{"onUpdate:modelValue":p[2]||(p[2]=k=>n.value.description=k),class:"form-input theme-color-secondary",placeholder:d.$t("description"),"data-gramm":"false"},null,8,zl),[[ae,n.value.description]]),e("label",{for:n.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:p[3]||(p[3]=k=>n.value.isPublic=!n.value.isPublic)},[Vl,n.value.isPublic?(o(),l("span",Nl,ql)):u("",!0),n.value.isPublic?u("",!0):(o(),l("span",Wl,Hl))]),e("span",Kl,a(d.$t("private")),1)],8,Ol),e("div",Jl,[e("button",{class:"cancel-button",onClick:p[4]||(p[4]=H(k=>d.closeModal(i.modalId),["prevent"]))},a(d.$t("cancel")),1),e("button",Xl,a(d.$t("save")),1)])],32))])])]))}},Ie=i=>(be("data-v-f083c4bf"),i=i(),we(),i),Yl={class:"mb-2"},Zl={key:0},es=Ie(()=>e("img",{src:Pe,class:"rounded"},null,-1)),ts=[es],os={key:1},ls={class:"relative text-center"},ss={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},as={class:"overflow-hidden rounded-md"},ns=["src"],is={key:2,class:"imgrid"},rs={class:"relative text-center"},us={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},ds={class:"overflow-hidden rounded-md"},cs=["src"],ms=Ie(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),vs=Ie(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),fs={key:3,class:"imgrid"},ps={class:"relative text-center"},hs={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},bs={class:"overflow-hidden rounded-md"},ws=["src"],gs={key:4,class:"imgrid"},_s={class:"relative text-center"},ks={key:0,class:"absolute top-1/2 left-1/2 z-10 text-tiny font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},ys={class:"overflow-hidden rounded-md"},$s=["src"],xs={key:5,class:"imgrid"},Ms={key:0,class:"relative text-center"},Cs={key:0,class:"absolute top-1/2 left-1/2 z-10 text-tiny font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Is={class:"overflow-hidden rounded-md"},Es=["src"],Ls={key:1,class:"relative text-center"},As={class:"absolute top-1/2 left-1/2 z-10 text-3xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Ps={class:"overflow-hidden rounded-md"},Fs=["src"],Ss={__name:"ArtworkThumbnail",props:{collection:{type:Object,default:()=>{}}},setup(i){const L=ne(),y={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(r,A)=>(o(),l("div",Yl,[!i.collection.collection_has_artworks||i.collection._count.collection_has_artworks===0?(o(),l("div",Zl,ts)):u("",!0),i.collection.collection_has_artworks&&i.collection._count.collection_has_artworks===1?(o(),l("div",os,[e("div",ls,[r.applyExplicitFilter(w(L),i.collection.collection_has_artworks[0].artworks.is_explicit)?(o(),l("span",ss,a(r.$t("explicitContent")),1)):u("",!0),e("div",as,[i.collection.collection_has_artworks&&i.collection._count.collection_has_artworks===1?(o(),l("img",{key:0,src:r.artworkThumb(i.collection.collection_has_artworks[0].artworks.artwork_assets[0].bucket,i.collection.collection_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:R(["object-cover object-top rounded",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),i.collection.collection_has_artworks[0].artworks.is_explicit)}]),style:{"aspect-ratio":"1/1"},onError:A[0]||(A[0]=(...m)=>r.imageLoadError&&r.imageLoadError(...m))},null,42,ns)):u("",!0)])])])):u("",!0),i.collection.collection_has_artworks&&i.collection._count.collection_has_artworks===2?(o(),l("div",is,[(o(!0),l(J,null,X(i.collection.collection_has_artworks,(m,_)=>(o(),l("div",{key:_,class:R(y[2][_])},[e("div",rs,[r.applyExplicitFilter(w(L),m.artworks.is_explicit)?(o(),l("span",us,a(r.$t("explicitContent")),1)):u("",!0),e("div",ds,[e("img",{class:R(["theme-color",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),m.artworks.is_explicit)}]),src:r.artworkThumb(m.artworks.artwork_assets[0].bucket,m.artworks.artwork_assets[0].filename,"thumbnail"),onError:A[1]||(A[1]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,cs)])])],2))),128)),ms,vs])):u("",!0),i.collection.collection_has_artworks&&i.collection._count.collection_has_artworks===3?(o(),l("div",fs,[(o(!0),l(J,null,X(i.collection.collection_has_artworks,(m,_)=>(o(),l("div",{key:_,class:R(y[3][_])},[e("div",ps,[r.applyExplicitFilter(w(L),m.artworks.is_explicit)?(o(),l("span",hs,a(r.$t("explicitContent")),1)):u("",!0),e("div",bs,[e("img",{class:R(["theme-color",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),m.artworks.is_explicit)}]),src:r.artworkThumb(m.artworks.artwork_assets[0].bucket,m.artworks.artwork_assets[0].filename,"thumbnail"),onError:A[2]||(A[2]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,ws)])])],2))),128))])):u("",!0),i.collection.collection_has_artworks&&i.collection._count.collection_has_artworks===4?(o(),l("div",gs,[(o(!0),l(J,null,X(i.collection.collection_has_artworks,(m,_)=>(o(),l("div",{key:_},[e("div",_s,[r.applyExplicitFilter(w(L),m.artworks.is_explicit)?(o(),l("span",ks,a(r.$t("explicitContent")),1)):u("",!0),e("div",ys,[e("img",{class:R(["theme-color",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),m.artworks.is_explicit)}]),src:r.artworkThumb(m.artworks.artwork_assets[0].bucket,m.artworks.artwork_assets[0].filename,"thumbnail"),onError:A[3]||(A[3]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,$s)])])]))),128))])):u("",!0),i.collection.collection_has_artworks&&i.collection._count.collection_has_artworks>4?(o(),l("div",xs,[(o(!0),l(J,null,X(i.collection.collection_has_artworks,(m,_)=>(o(),l("div",{key:_},[_<3?(o(),l("div",Ms,[r.applyExplicitFilter(w(L),m.artworks.is_explicit)?(o(),l("span",Cs,a(r.$t("explicitContent")),1)):u("",!0),e("div",Is,[e("img",{class:R(["theme-color",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),m.artworks.is_explicit)}]),src:r.artworkThumb(m.artworks.artwork_assets[0].bucket,m.artworks.artwork_assets[0].filename,"thumbnail"),onError:A[4]||(A[4]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,Es)])])):(o(),l("div",Ls,[e("span",As,"+"+a(i.collection._count.collection_has_artworks-4),1),e("div",Ps,[e("img",{src:r.artworkThumb(m.artworks.artwork_assets[0].bucket,m.artworks.artwork_assets[0].filename,"thumbnail"),class:R(["z-0 brightness-50",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),m.artworks.is_explicit)}]),onError:A[5]||(A[5]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,Fs)])]))]))),128))])):u("",!0)]))}},js=ee(Ss,[["__scopeId","data-v-f083c4bf"]]),Ts={class:"mb-4 w-full"},Rs={key:0,class:"flex flex-row justify-between"},Us={class:"flex flex-row"},Bs={key:0},zs={key:1,class:"flex flex-row justify-between"},Os={class:"flex flex-row"},Vs={class:"flex flex-row gap-2"},Ns={class:"flex flex-row gap-2"},Ds={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},qs=["onClick"],Ws={class:"flex flex-row pb-1 mt-4 font-bold"},Gs={class:"text-xs font-normal"},Hs={__name:"Collection",props:{userId:{type:Number,default:0}},setup(i){const L=i,y=ne();re(()=>{b()});const{oApiConfiguration:r,fetchOptions:A}=Q(),m=fe(r,A()),_=h(!1),g=h("artwork"),f=h(0),v=h([]),s=h({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),n=h({artwork:0}),b=async()=>{_.value=!0;const[F,S,B]=await m.fetchCollections({userId:L.userId,type:g.value,pagination:{page:s.value.pagination.page,perPage:s.value.pagination.page===0?s.value.pagination.firstLoad:s.value.pagination.perPage}});if(B)t();else{F.length||(s.value.manageMode=!1,p()),F.forEach(C=>{v.value.push(C)}),s.value.pagination.page+=s.value.pagination.firstLoad/s.value.pagination.perPage,s.value.showLoadMore=S;const[se]=await m.countArtworkCollections(L.userId);n.value.artwork=se}_.value=!1},T=async()=>await b(),d=h(!1),p=()=>{d.value=!0,s.value.showLoadMore=!1},k=h(!1),t=()=>{_.value=!1,k.value=!0,s.value.showLoadMore=!1},M=async()=>{_.value=!1,d.value=!1,k.value=!1,s.value.pagination.page=0,v.value=[],await b()},j=F=>{s.value.showManageButton=!0,F&&(s.value.showManageButton=!1)},D=h(!1);let W;const P=async()=>{ve().splash(W,D,"created-alert"),await M()},U=h(null),V=()=>{U.value.fetch(f.value),Z().openModal("collection-edit-form-modal")},q=h(null),Y=F=>{q.value.fetchInfo(),v.value.forEach(S=>{S.id===F.id&&(S.name=F.name,S.description=F.description,S.is_public=F.isPublic)})},oe=h([]),de=F=>{oe.value=F},G=()=>{q.value.removeItem()},le=async()=>{if(f.value!==0){const[F,S]=await m.deleteCollection(f.value);F&&(f.value=0,M())}},ie=()=>{f.value=0,s.value.showManageButton=!1,s.value.manageMode=!1};return(F,S)=>(o(),l("div",null,[e("div",Ts,[f.value?u("",!0):(o(),l("div",Rs,[e("div",Us,[e("div",{class:R(["ml-0 primary-button theme-color-secondary",{"button-color text-white":g.value==="artwork"}]),onClick:S[0]||(S[0]=B=>g.value="artwork")},[z(a(F.$t("artworks.artwork"))+" ",1),e("span",{class:R(["px-1 ml-2 font-normal rounded",g.value==="artwork"?"theme-color":"button-color text-white"])},a(n.value.artwork),3)],2)]),w(y).loggedIn&&w(y).user.id===i.userId?(o(),l("div",Bs,[e("div",{class:"icon-button",onClick:S[1]||(S[1]=B=>F.openModal("collection-form-modal"))},[c($,{name:"i-ion-add-outline"})])])):u("",!0)])),f.value?(o(),l("div",zs,[e("div",null,[e("div",{class:"ml-0 icon-button",onClick:S[2]||(S[2]=B=>ie())},[c($,{name:"i-ic-baseline-keyboard-arrow-left"})])]),e("div",Os,[x(e("div",Vs,[e("button",{class:"action-button secondary-button",onClick:S[3]||(S[3]=B=>s.value.manageMode=!s.value.manageMode)},[c($,{name:s.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),z(" "+a(s.value.manageMode?F.$t("quit"):F.$t("manage")),1)]),x(e("button",{class:R(["flex flex-row",oe.value.length>0?"danger-button":"disabled-button cursor-not-allowed"]),onClick:S[4]||(S[4]=B=>oe.value.length>0?F.openModal("item-deletion-confirm-modal"):null)},[c($,{name:"i-akar-icons-trash-bin"}),z(" "+a(F.$t("collections.removeSelected")),1)],2),[[E,s.value.manageMode]])],512),[[E,w(y).loggedIn&&w(y).user.id===i.userId&&s.value.showManageButton]]),x(e("div",Ns,[e("button",{class:"icon-button",onClick:S[5]||(S[5]=B=>V())},[c($,{name:"i-ph-gear-six"})]),e("button",{class:"danger-button-color b-button",onClick:S[6]||(S[6]=B=>F.openModal("collection-deletion-confirm-modal"))},[c($,{name:"i-akar-icons-trash-bin"})])],512),[[E,w(y).loggedIn&&w(y).user.id===i.userId&&!s.value.manageMode]])])])):u("",!0),x(e("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},a(F.$t("collections.manageModeActiveMessage")),513),[[E,s.value.manageMode]])]),f.value?u("",!0):(o(),l("div",Ds,[(o(!0),l(J,null,X(v.value,B=>(o(),l("div",{key:B.id,class:R(["p-3 rounded-md cursor-pointer",B.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:se=>f.value=B.id},[B.type==="artwork"?(o(),N(js,{key:0,collection:B},null,8,["collection"])):u("",!0),e("div",Ws,[B.is_public?u("",!0):(o(),N($,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),e("span",Gs,a(B.name),1)])],10,qs))),128))])),s.value.showLoadMore&&!f.value?(o(),l("div",{key:1,class:"mt-4 w-full primary-button",onClick:T},a(F.$t("loadMore")),1)):u("",!0),c(ue,{loading:_.value,empty:d.value,error:k.value,fetch:b},null,8,["loading","empty","error"]),!_.value&&!f.value?(o(),N(Cl,{key:2,id:"collection-form-modal","modal-id":"collection-form-modal",category:g.value,class:"modal",onCreated:P},null,8,["category"])):u("",!0),x(c(me,{id:"created-alert",text:F.$t("collections.created")},null,8,["text"]),[[E,D.value]]),!_.value&&f.value?(o(),N(Ql,{key:3,id:"collection-edit-form-modal",ref_key:"collectionEditFormModalRef",ref:U,"modal-id":"collection-edit-form-modal","collection-id":f.value,class:"modal",onUpdated:Y},null,8,["collection-id"])):u("",!0),c(pe,{id:"collection-deletion-confirm-modal","modal-id":"collection-deletion-confirm-modal",message:"All saved items in this collection will be deleted. Do you still want to delete this collection?",class:"modal",onOnAccept:le},null,8,["message"]),c(pe,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this collection. Do you still want to remove them?",class:"modal",onOnAccept:G},null,8,["message"]),f.value&&!_.value?(o(),N(Tl,{key:4,id:f.value,ref_key:"collectionDetailRef",ref:q,"manage-mode":s.value.manageMode,type:g.value,onOnCollectionEmpty:j,onFeedManageList:de},null,8,["id","manage-mode","type"])):u("",!0)]))}},Ks=ee(Hs,[["__scopeId","data-v-90595e53"]]),Js={class:"text-lg font-bold"},Xs={class:"grid grid-cols-1 gap-4 mt-4 w-full md:grid-cols-2 lg:grid-cols-3"},Qs={class:"flex flex-row w-full"},Ys=["src"],Zs={class:"flex flex-col justify-between p-3 w-full text-white"},ea={class:"flex flex-col"},ta={class:"font-bold"},oa={class:"text-xxs"},la={class:"flex flex-row w-full"},sa={key:0,class:"flex flex-row"},aa=["onClick"],na=["onMouseover","onClick"],ia={__name:"FollowerList",props:{userId:{type:Number,default:0}},setup(i){const L=i,y=ne(),{oApiConfiguration:r,fetchOptions:A}=Q(),m=xe(r,A());re(()=>{b()});const _=h([]),g=h(!1),f=h({page:0,perPage:12}),v=h(!1),s=h(!1),n=h(!1),b=async()=>{T(),g.value=!0;const[p,k]=await m.getFollowerList({userId:L.userId,pagination:{page:f.value.page,perPage:f.value.perPage}});k?v.value=!0:(p.followers.length||(s.value=!0),p.followers.forEach(t=>{_.value.push(t)}),f.value.page+=1,p.pagination.next_previous.next_page?n.value=!0:n.value=!1),g.value=!1},T=()=>{s.value=!1,v.value=!1},d=h(0);return(p,k)=>{const t=he;return o(),l("div",null,[e("div",Js,a(p.$t("followers")),1),e("div",Xs,[(o(!0),l(J,null,X(_.value,(M,j)=>(o(),N(t,{key:M.id,to:"/profile/"+M.username,class:"flex object-cover flex-row rounded-md shadow-lg cursor-pointer theme-color-secondary hover:shadow-xl",style:Le(M.cover_bucket&&M.cover_filename?"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+p.avatarCoverUrl(M.cover_bucket,M.cover_filename)+");background-size:cover;":"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+w(Ae)+");background-size:cover;")},{default:K(()=>[e("div",Qs,[e("img",{src:p.avatarCoverUrl(M.avatar_bucket,M.avatar_filename),class:"avatar",onError:k[0]||(k[0]=(...D)=>p.imageLoadError&&p.imageLoadError(...D))},null,40,Ys),e("div",Zs,[e("div",ea,[e("span",ta,a(M.name),1),e("span",oa,a(M.pen_name),1)]),e("div",la,[w(y).loggedIn&&M.id!==w(y).user.id?(o(),l("div",sa,[x(e("div",{class:"flex flex-row",onClick:H(D=>p.followUser(j,M.id),["prevent"])},[c($,{name:"i-fluent-person-32-regular-add",class:"text-gray-300 hover:text-white"})],8,aa),[[E,!M.is_following]]),x(e("div",{class:"flex flex-row",onMouseover:D=>d.value=M.id,onMouseout:k[1]||(k[1]=D=>d.value=0),onClick:H(D=>p.unfollowUser(j,M.id),["prevent"])},[x(c($,{name:"i-fluent-person-32-regular",class:"text-green-400"},null,512),[[E,d.value!==M.id]]),x(c($,{name:"i-fluent-person-32-regular-remove",class:"text-red-400 hover:text-red-400"},null,512),[[E,d.value&&d.value===M.id]])],40,na),[[E,M.is_following]])])):u("",!0)])])])]),_:2},1032,["to","style"]))),128))]),x(e("div",{class:"mt-4 primary-button",onClick:k[2]||(k[2]=M=>b())},a(p.$t("loadMore")),513),[[E,n.value]]),c(ue,{loading:g.value,empty:s.value,error:v.value,fetch:b},null,8,["loading","empty","error"])])}}},ra=ee(ia,[["__scopeId","data-v-7d7b6be2"]]),ua={class:"text-lg font-bold"},da={class:"grid grid-cols-1 gap-4 mt-4 w-full md:grid-cols-2 lg:grid-cols-3"},ca={class:"flex flex-row w-full"},ma=["src"],va={class:"flex flex-col justify-between p-3 w-full text-white"},fa={class:"flex flex-col"},pa={class:"font-bold"},ha={class:"text-xxs"},ba={class:"flex flex-row w-full"},wa={key:0,class:"flex flex-row"},ga=["onClick"],_a=["onMouseover","onClick"],ka={__name:"FollowingList",props:{userId:{type:Number,default:0}},setup(i){const L=i,y=ne(),{oApiConfiguration:r,fetchOptions:A}=Q(),m=xe(r,A());re(()=>{T()});const _=async()=>{g.value=[],v.value.page=0,await T()},g=h([]),f=h(!1),v=h({page:0,perPage:12}),s=h(!1),n=h(!1),b=h(!1),T=async()=>{d(),f.value=!0;const[k,t]=await m.getFollowingList({userId:L.userId,pagination:{page:v.value.page,perPage:v.value.perPage}});t?s.value=!0:(k.followings.length||(n.value=!0),k.followings.forEach(M=>{g.value.push(M)}),v.value.page+=1,k.pagination.next_previous.next_page?b.value=!0:b.value=!1),f.value=!1},d=()=>{n.value=!1,s.value=!1},p=h(0);return(k,t)=>{const M=he;return o(),l("div",null,[e("div",ua,a(k.$t("followings")),1),e("div",da,[(o(!0),l(J,null,X(g.value,(j,D)=>(o(),N(M,{key:j.id,to:"/profile/"+j.username,class:"flex object-cover flex-row rounded-md shadow-lg cursor-pointer theme-color-secondary hover:shadow-xl",style:Le(j.cover_bucket&&j.cover_filename?"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+k.avatarCoverUrl(j.cover_bucket,j.cover_filename)+");background-size:cover;":"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+w(Ae)+");background-size:cover;")},{default:K(()=>[e("div",ca,[e("img",{src:k.avatarCoverUrl(j.avatar_bucket,j.avatar_filename),class:"avatar",onError:t[0]||(t[0]=(...W)=>k.imageLoadError&&k.imageLoadError(...W))},null,40,ma),e("div",va,[e("div",fa,[e("span",pa,a(j.name),1),e("span",ha,a(j.pen_name),1)]),e("div",ba,[w(y).loggedIn&&j.id!==w(y).user.id?(o(),l("div",wa,[x(e("div",{class:"flex flex-row",onClick:H(W=>k.followUser(D,j.id),["prevent"])},[c($,{name:"i-fluent-person-32-regular-add",class:"text-gray-300 hover:text-white"})],8,ga),[[E,!j.is_following]]),x(e("div",{class:"flex flex-row",onMouseover:W=>p.value=j.id,onMouseout:t[1]||(t[1]=W=>p.value=0),onClick:H(W=>k.unfollowUser(D,j.id),["prevent"])},[x(c($,{name:"i-fluent-person-32-regular",class:"text-green-400"},null,512),[[E,p.value!==j.id]]),x(c($,{name:"i-fluent-person-32-regular-remove",class:"text-red-400 hover:text-red-400"},null,512),[[E,p.value&&p.value===j.id]])],40,_a),[[E,j.is_following]])])):u("",!0)])])])]),_:2},1032,["to","style"]))),128))]),x(e("div",{class:"primary-button mt-4",onClick:t[2]||(t[2]=j=>T())},a(k.$t("loadMore")),513),[[E,b.value]]),c(ue,{loading:f.value,empty:n.value,error:s.value,fetch:_},null,8,["loading","empty","error"])])}}},ya=ee(ka,[["__scopeId","data-v-6ea0789b"]]),$a=i=>(be("data-v-3035fc01"),i=i(),we(),i),xa=["src"],Ma={class:"px-2 pb-4 w-full rounded md:px-6 md:pb-6 theme-color"},Ca={class:"flex-row justify-between hidden-md-flex"},Ia={class:"mr-6 w-1/5"},Ea=["src"],La={class:"mt-2"},Aa={class:"flex flex-row"},Pa={class:"flex flex-row"},Fa=z("\xA0 "),Sa=z("\xA0 "),ja={class:"hidden flex-row justify-between w-full md:flex md:mt-6"},Ta={class:"flex flex-col w-full"},Ra={class:"flex flex-row w-full"},Ua={class:"w-9/12"},Ba={class:"text-base font-semibold"},za=z("\xA0 "),Oa={class:"mr-2 italic"},Va={class:"flex flex-row mt-2"},Na={class:"mr-1"},Da={class:"flex flex-row"},qa={class:"mr-1"},Wa={key:0,class:"flex flex-row"},Ga=z(" he/his "),Ha={key:1,class:"flex flex-row"},Ka=z(" she/her "),Ja={class:"float-right w-3/12 text-right"},Xa={class:"flex flex-row primary-button shadow-md"},Qa={class:"leading-4"},Ya={key:1,class:"mt-4"},Za=["href"],en=["href"],tn=["href"],on=["href"],ln=["href"],sn={key:0,class:"mt-4"},an=["id"],nn=["id"],rn={class:"flex flex-col text-center md:hidden"},un=["src"],dn={class:"mt-4 text-base font-semibold"},cn={class:"flex flex-row justify-center mt-4"},mn={key:0,class:"flex flex-row mr-1"},vn={class:"mr-1"},fn={key:0,class:"flex flex-row"},pn=z(" he/his "),hn={key:1,class:"flex flex-row"},bn=z(" she/her "),wn={key:0,class:"mx-2 mt-4 text-center"},gn=["id"],_n=["id"],kn={key:1,class:"flex flex-row justify-center mt-4"},yn=["href"],$n=["href"],xn=["href"],Mn=["href"],Cn=["href"],In={class:"flex flex-row justify-center w-full md:hidden"},En=z("\xA0 "),Ln=z("\xA0 "),An={class:"flex flex-row"},Pn={class:"flex flex-row"},Fn={class:"mt-2"},Sn={class:"flex flex-row justify-center md:hidden"},jn={class:"flex flex-row justify-between mt-2 md:mt-6"},Tn={class:"hidden flex-col lg:w-1/5 md:flex"},Rn={class:"profile-navigation_wrapper"},Un={class:"hidden-lg-flex"},Bn=$a(()=>e("span",{class:"hidden-lg-flex"},null,-1)),zn={class:"profile-navigation_wrapper"},On={class:"hidden-lg-flex"},Vn={class:"hidden-lg-flex"},Nn={class:"profile-navigation_wrapper"},Dn={class:"hidden-lg-flex"},qn={class:"hidden-lg-flex"},Wn={class:"ml-6 w-full"},Gn={key:0},Hn={class:"flex flex-row w-full"},Kn={class:"flex flex-row gap-2 justify-between w-full md:justify-end"},Jn={key:1},Xn={key:2},Qn={key:3},Yn={key:4},Zn={__name:"Profile",props:{id:{type:Number,default:0},userLogon:{type:Boolean,default:!1}},setup(i){const L=i,y=ne(),{oApiConfiguration:r,fetchOptions:A}=Q(),m=xe(r,A()),_=ce(r,A()),g=fe(r,A()),f=Ue(),v=Be(),{o:s}=f.query,n=h(!1),b=s!=null?h(s):h("dashboard"),T=h("artwork"),d=ze(()=>L.userLogon&&y.loggedIn?y.user.id:L.id),p=h({manageMode:!1,showManageMode:!0});re(async()=>{await j()});const k=C=>{b.value=C,p.value.manageMode=!1,s!=null&&v.push("/profile")},t=h({}),M=h({feed:0,artwork:0,comic:0,tutorial:0,album:0,followers:0,followings:0}),j=async()=>{n.value=!0;try{const[C]=await m.getInfo(d.value);if(t.value=C,y.loggedIn&&y.user.id!==d.value){const[Te]=await m.isFollowing(d.value);G.value=Te.is_following}const[I]=await m.countFeeds(d.value);M.value.feed=I;const[te]=await m.countArtworks(d.value);M.value.artwork=te;const[O]=await m.countFollowers(d.value);M.value.followers=O;const[Fe]=await m.countFollowings(d.value);M.value.followings=Fe;const[Se]=await _.countAlbums(d.value);M.value.album=Se;const[je]=await g.countCollections(d.value);M.value.collection=je}catch{}n.value=!1},D=h(null),W=h([]),P=C=>{W.value=C},U=()=>{p.value.showManageMode=!1},V=h(null),q=()=>{Z().openModal("album-selection-modal")},Y=h(!1);let oe;const de=()=>{ve().splash(oe,Y,"item-added-to-album-alert")},G=h(!1),le=h(null),ie=h("i-ri-user-follow-fill"),F=(C,I)=>{ie.value=C,le.value=I},S=async C=>{const[I,te]=await m.follow(C);te||(G.value=!0)},B=async C=>{const[I,te]=await m.unfollow(C);te||(G.value=!1)},se=(C,I,te,O)=>{Ve().readMore(C,I,te,O)};return(C,I)=>{const te=he;return o(),N(De,{"hide-side":!0,"with-footer":!0,"no-right-side":!0},{default:K(()=>[e("div",null,[e("img",{src:C.avatarCoverUrl(t.value.cover_bucket,t.value.cover_filename),class:"object-cover object-top w-full h-32 rounded-t md:h-52 lg:h-72 xl:h-96 unselectable",onError:I[0]||(I[0]=(...O)=>C.defaultCoverImage&&C.defaultCoverImage(...O))},null,40,xa),w(y).loggedIn&&w(y).user.id===t.value.id?(o(),N(te,{key:0,to:"/profile/setting",class:"float-right absolute right-4 mt-2 shadow-md icon-button-primary-color flex-md-hidden"},{default:K(()=>[c($,{name:"i-ph-gear-six"})]),_:1})):u("",!0)]),e("div",Ma,[e("div",Ca,[e("div",Ia,[e("img",{src:C.avatarCoverUrl(t.value.avatar_bucket,t.value.avatar_filename),class:"hidden -mt-2 w-full md:-mt-16 avatar md:flex",onError:I[1]||(I[1]=(...O)=>C.defaultCoverImage&&C.defaultCoverImage(...O))},null,40,Ea),e("div",La,[w(y).loggedIn&&t.value.id!==w(y).user.id?(o(),l("div",{key:0,class:R(["mt-2 primary-button rounded-b-none hover:rounded-b-none",{"hover:danger-button":G.value}]),onClick:I[2]||(I[2]=O=>G.value?B(t.value.id):S(t.value.id)),onMouseover:I[3]||(I[3]=O=>F("i-ri-user-unfollow-fill",C.$t("unfollow"))),onMouseleave:I[4]||(I[4]=O=>F("i-ri-user-follow-fill",C.$t("following")))},[x(e("div",Aa,[c($,{name:"i-ri-user-add-fill","text-size":"text-base"}),z(" "+a(C.$t("follow")),1)],512),[[E,!G.value]]),x(e("div",Pa,[c($,{name:ie.value,"text-size":"text-base"},null,8,["name"]),z(" "+a(le.value===null?C.$t("following"):le.value),1)],512),[[E,G.value]])],34)):u("",!0),e("div",{class:R(["flex-row justify-center border hidden-md-flex",t.value.id==w(y).user.id?"rounded-md":"rounded-b-md"])},[e("div",{class:"py-2 w-1/2 text-center cursor-pointer hover:text-colored",onClick:I[5]||(I[5]=O=>b.value="followerList")},[e("b",null,a(M.value.followers),1),Fa,e("i",null,a(C.$t("followers").toLowerCase()),1)]),e("div",{class:"py-2 w-1/2 text-center cursor-pointer hover:text-colored",onClick:I[6]||(I[6]=O=>b.value="followingList")},[e("b",null,a(M.value.followings),1),Sa,e("i",null,a(C.$t("following").toLowerCase()),1)])],2)])]),e("div",ja,[e("div",Ta,[e("div",Ra,[e("div",Ua,[e("div",null,[e("span",Ba,a(t.value.name),1),za,e("span",Oa,a(t.value.username),1)]),e("div",Va,[e("div",Na,[e("span",Da,[c($,{name:"i-ion-pencil-outline",class:"mr-1 text-base font-bold"}),z(" "+a(t.value.pen_name&&t.value.pen_name!==""?t.value.pen_name:"-"),1)])]),e("div",qa,[t.value.gender==="m"?(o(),l("span",Wa,[c($,{name:"i-ion-male-outline",class:"mr-1 ml-2 text-base font-bold"}),Ga])):u("",!0),t.value.gender==="f"?(o(),l("span",Ha,[c($,{name:"i-ion-female-outline",class:"mr-1 ml-2 text-base font-bold"}),Ka])):u("",!0)])])]),e("div",Ja,[w(y).loggedIn&&w(y).user.id===t.value.id?(o(),N(te,{key:0,to:"/profile/setting",class:"float-right -mt-20 shadow-md"},{default:K(()=>[e("button",Xa,[c($,{name:"i-ph-gear-six",class:"mr-2"}),e("span",Qa,a(C.$t("profile.setting")),1)])]),_:1})):u("",!0),t.value.user_socials?(o(),l("div",Ya,[t.value.user_socials.facebook?(o(),l("a",{key:0,href:"https://facebook.com/"+t.value.user_socials.facebook,target:"blank",class:"ml-3 cursor-pointer"},[c($,{name:"i-ion-logo-facebook",class:"text-xl"})],8,Za)):u("",!0),t.value.user_socials.instagram?(o(),l("a",{key:1,href:"https://instagram.com/"+t.value.user_socials.instagram+"/",target:"blank",class:"ml-3 cursor-pointer"},[c($,{name:"i-ion-logo-instagram",class:"text-xl"})],8,en)):u("",!0),t.value.user_socials.twitter?(o(),l("a",{key:2,href:"https://twitter.com/"+t.value.user_socials.twitter,target:"blank",class:"ml-3 cursor-pointer"},[c($,{name:"i-ion-logo-twitter",class:"text-xl"})],8,tn)):u("",!0),t.value.user_socials.youtube?(o(),l("a",{key:3,href:"https://youtube.com/channel/"+t.value.user_socials.youtube,target:"blank",class:"ml-3 cursor-pointer"},[c($,{name:"i-ion-logo-youtube",class:"text-xl"})],8,on)):u("",!0),t.value.user_socials.patreon?(o(),l("a",{key:4,href:"https://patreon.com/"+t.value.user_socials.patreon+"/",target:"blank",class:"ml-3 cursor-pointer"},[c($,{name:"heart",class:"text-xl"})],8,ln)):u("",!0)])):u("",!0)])]),e("div",null,[t.value.bio?(o(),l("p",sn,[e("span",{id:"user-bio-"+t.value.id},a(t.value.bio.length>300?`${t.value.bio.slice(0,300)}...`:t.value.bio),9,an),t.value.bio.length>300?(o(),l("a",{key:0,id:"user-bio-read-more-"+t.value.id,class:"href",onClick:I[7]||(I[7]=H(O=>se(t.value.bio,t.value.id,"user-bio-read-more-","user-bio-"),["prevent"]))},a(C.$t("readMore")),9,nn)):u("",!0)])):u("",!0)])])])]),e("div",rn,[e("img",{src:C.avatarCoverUrl(t.value.avatar_bucket,t.value.avatar_filename),class:"flex mx-auto -mt-14 w-2/6 sm:-mt-16 sm:w-1/5 avatar md:hidden",onError:I[8]||(I[8]=(...O)=>C.imageLoadError&&C.imageLoadError(...O))},null,40,un),e("div",dn,a(t.value.name),1),e("div",null,a(t.value.username),1),e("div",cn,[t.value.pen_name?(o(),l("span",mn,[c($,{name:"i-ion-pencil-outline",class:"mr-1 text-base font-bold"}),z(" "+a(t.value.pen_name&&t.value.pen_name!==""?t.value.pen_name:"-"),1)])):u("",!0),e("div",vn,[t.value.gender==="m"?(o(),l("span",fn,[c($,{name:"i-ion-male-outline",class:"mr-1 ml-2 text-base font-bold"}),pn])):u("",!0),t.value.gender==="f"?(o(),l("span",hn,[c($,{name:"i-ion-female-outline",class:"mr-1 ml-2 text-base font-bold"}),bn])):u("",!0)])]),t.value.bio?(o(),l("div",wn,[e("span",{id:"mobile__user-bio-"+t.value.id},a(t.value.bio.length>150?`${t.value.bio.slice(0,150)}...`:t.value.bio),9,gn),t.value.bio.length>150?(o(),l("a",{key:0,id:"mobile__user-bio-read-more-"+t.value.id,class:"href",onClick:I[9]||(I[9]=H(O=>se(t.value.bio,t.value.id,"mobile__user-bio-read-more-","mobile__user-bio-"),["prevent"]))},a(C.$t("readMore")),9,_n)):u("",!0)])):u("",!0),t.value.user_socials?(o(),l("div",kn,[t.value.user_socials.facebook?(o(),l("a",{key:0,href:"https://facebook.com/"+t.value.user_socials.facebook,target:"blank",class:"ml-3 cursor-pointer"},[c($,{name:"i-ion-logo-facebook",class:"text-xl"})],8,yn)):u("",!0),t.value.user_socials.instagram?(o(),l("a",{key:1,href:"https://instagram.com/"+t.value.user_socials.instagram+"/",target:"blank",class:"ml-3 cursor-pointer"},[c($,{name:"i-ion-logo-instagram",class:"text-xl"})],8,$n)):u("",!0),t.value.user_socials.twitter?(o(),l("a",{key:2,href:"https://twitter.com/"+t.value.user_socials.twitter,target:"blank",class:"ml-3 cursor-pointer"},[c($,{name:"i-ion-logo-twitter",class:"text-xl"})],8,xn)):u("",!0),t.value.user_socials.youtube?(o(),l("a",{key:3,href:"https://youtube.com/channel/"+t.value.user_socials.youtube,target:"blank",class:"ml-3 cursor-pointer"},[c($,{name:"i-ion-logo-youtube",class:"text-xl"})],8,Mn)):u("",!0),t.value.user_socials.patreon?(o(),l("a",{key:4,href:"https://patreon.com/"+t.value.user_socials.patreon+"/",target:"blank",class:"ml-3 cursor-pointer"},[c($,{name:"i-ion-heart",class:"text-xl"})],8,Cn)):u("",!0)])):u("",!0),e("div",In,[e("div",{class:"p-2 cursor-pointer hover:text-colored",onClick:I[10]||(I[10]=O=>b.value="followerList")},[e("b",null,a(M.value.followers),1),En,e("i",null,a(C.$t("followers")),1)]),e("div",{class:"p-2 cursor-pointer hover:text-colored",onClick:I[11]||(I[11]=O=>b.value="followingList")},[e("b",null,a(M.value.followings),1),Ln,e("i",null,a(C.$t("following")),1)])]),w(y).loggedIn&&t.value.id!==w(y).user.id?(o(),l("div",{key:2,class:R(["mt-2 w-auto",G.value?"danger-button":"primary-button"]),onClick:I[12]||(I[12]=O=>G.value?B(t.value.id):S(t.value.id))},[x(e("div",An,[c($,{name:"i-ri-user-add-fill","text-size":"text-base"}),z(" "+a(C.$t("follow")),1)],512),[[E,!G.value]]),x(e("div",Pn,[c($,{name:ie.value,"text-size":"text-base"},null,8,["name"]),z(" "+a(le.value===null?C.$t("following"):le.value),1)],512),[[E,G.value]])],2)):u("",!0)]),e("div",Fn,[e("div",Sn,[e("div",{class:R(["mr-2 profile-navigation__mobile theme-color-secondary",{"button-color text-white":w(b)=="dashboard"}]),onClick:I[13]||(I[13]=O=>k("dashboard"))},[e("div",null,[x(c($,{name:"i-ion-home-outline",class:"text-white"},null,512),[[E,w(b)=="dashboard"]]),x(c($,{name:"i-ion-home-outline",class:"hover:text-white"},null,512),[[E,w(b)!="dashboard"]])]),e("span",null,a(C.$t("dashboard")),1)],2),e("div",{class:R(["mr-2 profile-navigation__mobile theme-color-secondary",{"button-color text-white":w(b)=="albums"}]),onClick:I[14]||(I[14]=O=>k("albums"))},[e("div",null,[x(c($,{name:"i-ion-folder-outline",class:"text-white"},null,512),[[E,w(b)=="albums"]]),x(c($,{name:"i-ion-folder-outline",class:"hover:text-white"},null,512),[[E,w(b)!="albums"]])]),e("span",null,a(C.$t("albums.album")),1)],2),e("div",{class:R(["profile-navigation__mobile theme-color-secondary",{"button-color text-white":w(b)=="collections"}]),onClick:I[15]||(I[15]=O=>k("collections"))},[e("div",null,[x(c($,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[E,w(b)=="collections"]]),x(c($,{name:"i-majesticons-bookmark-line",class:"hover:text-white"},null,512),[[E,w(b)!="collections"]])]),e("span",null,a(C.$t("collections.collection")),1)],2)]),e("div",jn,[e("div",Tn,[e("div",{class:R(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":w(b)==="dashboard"}]),onClick:I[16]||(I[16]=O=>k("dashboard"))},[e("div",Rn,[x(c($,{name:"i-humbleicons-dashboard",class:"text-white"},null,512),[[E,w(b)==="dashboard"]]),x(c($,{name:"i-humbleicons-dashboard"},null,512),[[E,w(b)!=="dashboard"]]),e("label",Un,a(C.$t("dashboard")),1)]),Bn],2),e("div",{class:R(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":w(b)==="albums"}]),onClick:I[17]||(I[17]=O=>k("albums"))},[e("div",zn,[x(c($,{name:"i-bx-photo-album",class:"text-white"},null,512),[[E,w(b)==="albums"]]),x(c($,{name:"i-bx-photo-album"},null,512),[[E,w(b)!=="albums"]]),e("label",On,a(C.$t("albums.album")),1)]),e("span",Vn,a(M.value.album),1)],2),e("div",{class:R(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":w(b)==="collections"}]),onClick:I[18]||(I[18]=O=>k("collections"))},[e("div",Nn,[x(c($,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[E,w(b)==="collections"]]),x(c($,{name:"i-majesticons-bookmark-line"},null,512),[[E,w(b)!=="collections"]]),e("label",Dn,a(C.$t("collections.collection")),1)]),e("span",qn,a(M.value.collection),1)],2)]),e("div",Wn,[w(b)==="dashboard"?(o(),l("div",Gn,[e("div",Hn,[e("div",{class:R(["flex flex-row justify-between w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":T.value==="feed"}]),onClick:I[19]||(I[19]=O=>T.value="feed")},[z(a(C.$t("feed"))+" ",1),e("span",{class:R(["px-1 ml-2 rounded",T.value==="feed"?"theme-color":"button-color text-white"])},a(M.value.feed),3)],2),e("div",{class:R(["flex flex-row justify-between mr-0 w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":T.value==="artwork"}]),onClick:I[20]||(I[20]=O=>T.value="artwork")},[z(a(C.$t("artworks.artwork"))+" ",1),e("span",{class:R(["px-1 ml-2 rounded",T.value==="artwork"?"theme-color":"button-color text-white"])},a(M.value.artwork),3)],2)]),x(e("div",Kn,[e("button",{class:"w-full action-button secondary-button md:w-auto",onClick:I[21]||(I[21]=O=>p.value.manageMode=!p.value.manageMode)},[c($,{name:p.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),z(" "+a(p.value.manageMode?C.$t("quit"):C.$t("manage")),1)]),x(e("button",{class:"w-full primary-button md:w-auto",onClick:I[22]||(I[22]=O=>q())},[c($,{name:"i-ion-add-outline"}),z(" "+a(C.$t("albums.addToAlbum")),1)],512),[[E,p.value.manageMode]])],512),[[E,w(y).loggedIn&&w(y).user.id===t.value.id&&T.value==="artwork"&&p.value.showManageMode]]),x(e("div",{class:"p-2 mt-2 text-black bg-yellow-200 rounded-md"},a(C.$t("profile.manageModeActiveMessage")),513),[[E,p.value.manageMode]]),e("div",null,[T.value==="feed"?(o(),N(gt,{key:0,ref:"feedListRef",class:"mt-2","user-id":t.value.id},null,8,["user-id"])):u("",!0),!n.value&&T.value==="artwork"?(o(),N($t,{key:1,ref_key:"artworkListRef",ref:D,"user-id":t.value.id,"manage-mode":p.value.manageMode,onFeedSelectedItems:P,onOnEmpty:U},null,8,["user-id","manage-mode"])):u("",!0)])])):u("",!0),w(b)==="albums"?(o(),l("div",Jn,[n.value?u("",!0):(o(),N(dl,{key:0,"user-id":t.value.id},null,8,["user-id"]))])):u("",!0),w(b)==="collections"?(o(),l("div",Xn,[n.value?u("",!0):(o(),N(Ks,{key:0,"user-id":t.value.id},null,8,["user-id"]))])):u("",!0),w(b)==="followerList"?(o(),l("div",Qn,[n.value?u("",!0):(o(),N(ra,{key:0,"user-id":t.value.id},null,8,["user-id"]))])):u("",!0),w(b)==="followingList"?(o(),l("div",Yn,[n.value?u("",!0):(o(),N(ya,{key:0,"user-id":t.value.id},null,8,["user-id"]))])):u("",!0)])])])]),n.value?u("",!0):(o(),N(Oe,{key:0,id:"album-selection-modal",ref_key:"albumSelectionModalRef",ref:V,class:"modal","work-ids":W.value,onAddedToAlbum:de},null,8,["work-ids"])),x(c(me,{id:"item-added-to-album-alert",text:C.$t("albums.itemAdded")},null,8,["text"]),[[E,Y.value]])]),_:1})}}},ui=ee(Zn,[["__scopeId","data-v-3035fc01"]]);export{ui as P};
