import{k as W,l as I,a1 as O,r as a,L as D,H as q,c as z,w as H,o as S,b as s,t as l,I as c,u as o,q as Q,f as p,Q as j,s as G,x as K,e as f,v as m,aw as U,O as y}from"./entry.e59d1677.js";import{u as X}from"./ProBadge.e613df9a.js";import{L as Y}from"./Layout.38bbd337.js";import{W as Z}from"./WorkList.15e244e9.js";import{M as J}from"./ModalView.7f38a5de.js";import{_ as ee}from"./LoadingEmptyErrorMessage.81ae6689.js";import{_ as te}from"./TagFilterSelection.821ba21f.js";import{_ as oe}from"./_plugin-vue_export-helper.a1a6add7.js";import"./useReport.1b995e30.js";import"./index.6cdba04a.js";import"./MiniArtworkPreview.23fe0d3b.js";import"./user-counters-api.efc5c534.js";import"./useSetting.3e22411d.js";import"./useFeed.6f185801.js";const ae={id:"lists"},se={class:"navigations"},le={class:"title"},ie={class:"buttons"},ne={class:"filter-buttons"},re={key:0,class:"filter-buttons"},ce={class:"mt-4"},ue={id:"recent-modal",class:"modal work-view"},de={__name:"index",props:{browseMode:{type:Boolean,default:!1}},setup(pe){const{oApiConfiguration:V,fetchOptions:F}=W(),L=X(V,F()),M=I();O(()=>{d()});const i=a(void 0),g=async e=>{i.value=e,r.value.page=0,await d()},x=a(null),E=()=>{x.value.init(U(_.value)),y().openModal("tag-filter-selection-modal")},b=a(""),_=a(),w=a(0),R=async(e,t)=>{_.value=e,b.value=t,w.value=t!==""?t.split(",").length:0,r.value.page=0,y().closeModal("tag-filter-selection-modal"),await d()};D(async()=>_.value,e=>{d()});const u=a([]),d=async()=>{N();const{works:e,pagination:t}=await C();e.length&&t.record_total&&(u.value=e)},n=a(!0),v=a(!1),$=q(()=>!v.value&&!u.value.length),h=a(!0),r=a({perPage:40,page:0}),C=async()=>{const[e,t]=await L.getLatest({pagination:{perPage:r.value.perPage,page:r.value.page},explicitMode:i.value,tags:b.value});if(n.value=!1,e.pagination.next_previous.next_page||(h.value=!1),t)v.value=!0;else return r.value.page+=1,e},k=a({delay:!1}),T=async()=>{k.value.delay=!0;const{works:e}=await C();e.forEach(t=>{u.value.push(t)}),k.value.delay=!1},N=()=>{u.value=[],h.value=!0,r.value.page=0,n.value=!0,v.value=!1},A=a(null),P=(e,t=!1)=>{A.value.view(e,t),y().openModal("recent-modal")};return(e,t)=>(S(),z(Y,{"with-footer":!0,"hide-side":!0,"no-right-side":!0,fullscreen:!0},{default:H(()=>[s("div",ae,[s("div",se,[s("div",le,l(e.$t("artworks.latestArtworks")),1),s("div",ie,[s("div",ne,[s("button",{class:c(["px-3 rounded-md button-item",o(w)?"button":"theme-color"]),onClick:E},l(o(w))+" "+l(e.$t("tagsApplied")),3)]),o(M).loggedIn&&o(M).user.user_settings.show_explicit?(S(),Q("div",re,[s("p",{class:c(["rounded-l-md button-item",[o(i)===void 0?"button":"theme-color"]]),onClick:t[0]||(t[0]=B=>g(void 0))},l(e.$t("default")),3),s("p",{class:c(["button-item",[o(i)==="safe"?"button":"theme-color"]]),onClick:t[1]||(t[1]=B=>g("safe"))},l(e.$t("safe")),3),s("p",{class:c(["rounded-r-md button-item",[o(i)==="explicit"?"button":"theme-color"]]),onClick:t[2]||(t[2]=B=>g("explicit"))},[p(j,{name:"i-material-symbols-explicit-outline",class:c({"text-white":o(i)==="explicit"})},null,8,["class"]),G(" "+l(e.$t("explicit")),1)],2)])):K("",!0)])]),p(ee,{loading:o(n),empty:o($),error:o(v),fetch:d},null,8,["loading","empty","error"]),f(s("div",ce,[f(p(Z,{"section-class":"work-grid-10",works:o(u),view:P},null,8,["works"]),[[m,!o($)]]),f(s("div",{class:c(["w-full primary-button",o(k).delay?"animate-pulse":""]),onClick:T},l(e.$t("loadMore")),3),[[m,o(h)]])],512),[[m,!o(n)]]),s("div",ue,[f(p(J,{ref_key:"recentModalViewRef",ref:A,section:"recent"},null,512),[[m,!o(n)]])]),f(p(te,{id:"tag-filter-selection-modal",ref_key:"tagFilterSelectionModalRef",ref:x,class:"modal",onApply:R},null,512),[[m,!o(n)]])])]),_:1}))}},Ae=oe(de,[["__scopeId","data-v-7d81f5f5"]]);export{Ae as default};
