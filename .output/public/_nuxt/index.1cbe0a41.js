import{l as $,k as T,p as B,r as d,o as a,q as c,f as i,u as o,b as n,U as I,V as N,c as h,w as b,t as p,x as k,I as f,Q as L,e as V,v as j,y as C,s as D}from"./entry.ea93fdf2.js";import{L as P}from"./Layout.7db09108.js";import{d as S}from"./ProBadge.e3dc9c3a.js";import{u as q}from"./useArtTrade.b7b30853.js";import{_ as O}from"./LoadingEmptyErrorMessage.118d4a88.js";import{_ as F}from"./_plugin-vue_export-helper.c27b6911.js";import{L as Q}from"./LoginMessage.fa865991.js";const U={class:"mt-4"},G={class:"grid grid-cols-1 gap-2 mb-4 md:grid-cols-2 md:gap-4 lg:grid-cols-4"},H={class:"overflow-hidden relative col-span-5 rounded-md"},J={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 md:text-lg"},K={class:"overflow-hidden relative col-span-5 rounded-md"},R={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 md:text-lg"},W={__name:"LatestTrades",setup(M){const r=$(),{oApiConfiguration:u,fetchOptions:v}=T(),m=q(u,v());B(()=>{x()});const y=d([]),s=d({loading:!0,isError:!1,isEmpty:!1,pagination:{page:0,perPage:16}}),x=async()=>{await w(!0)},w=async(t=!1)=>{s.value.loading=!0,s.value.isEmpty=!1,s.value.isError=!1,t&&(s.value.pagination.page=0);const[_,l,g]=await m.getLatestTrades({pagination:{page:s.value.pagination.page,perPage:s.value.pagination.perPage}});if(g)s.value.isError=!0;else{l.record_total||(s.value.isEmpty=!0);for(let e=0;e<_.length;e++)y.value.push(_[e]);E.value=l.next_previous.next_page!==null}s.value.loading=!1},z=d(!1),E=d(!0),A=()=>{s.value.pagination.page+=1,w()};return(t,_)=>{const l=S,g=C;return a(),c("div",U,[i(O,{loading:o(s).loading,empty:o(s).isEmpty,"empty-message":"No art trade yet, be the first one to host your art trade.",error:o(s).isError,fetch:x},null,8,["loading","empty","empty-message","error"]),n("div",G,[(a(!0),c(I,null,N(o(y),e=>(a(),h(g,{key:e.id,to:"/art-trade/view/"+e.id,class:"grid grid-cols-11 gap-2 p-2 rounded-md theme-color hover:shadow-lg trade-item"},{default:b(()=>[n("div",H,[t.applyExplicitFilter(o(r),e.host.submission.is_explicit,e.host.submission.is_gore)?(a(),c("span",J,p(e.host.submission.is_gore?t.$t("goreContent"):t.$t("explicitContent")),1)):k("",!0),i(l,{preload:"",loading:"lazy",src:t.artworkThumb(e.host.submission.bucket,e.host.submission.filename,"thumbnail",!1),class:f(["object-cover unselectable rounded-md w-full h-full",{"blur-3xl brightness-50 unclickable":t.applyExplicitFilter(o(r),e.host.submission.is_explicit,e.host.submission.is_gore)}]),onError:t.imageLoadError},null,8,["src","class","onError"])]),i(L,{name:"i-ant-design-swap-outlined",class:"my-auto mx-auto"}),n("div",K,[t.applyExplicitFilter(o(r),e.participant.submission.is_explicit,e.participant.submission.is_gore)?(a(),c("span",R,p(e.participant.submission.is_gore?t.$t("goreContent"):t.$t("explicitContent")),1)):k("",!0),i(l,{preload:"",loading:"lazy",src:t.artworkThumb(e.participant.submission.bucket,e.participant.submission.filename,"thumbnail",!1),class:f(["object-cover unselectable rounded-md w-full h-full",{"blur-3xl brightness-50 unclickable":t.applyExplicitFilter(o(r),e.participant.submission.is_explicit,e.participant.submission.is_gore)}]),onError:t.imageLoadError},null,8,["src","class","onError"])])]),_:2},1032,["to"]))),128))]),V(n("div",{class:f(["w-full primary-button",o(z)?"animate-pulse":""]),onClick:A},p(t.$t("loadMore")),3),[[j,o(E)]])])}}},X=F(W,[["__scopeId","data-v-65b14925"]]);const Y={class:"px-2"},Z={key:1},ee={class:"flex flex-row justify-between"},te={class:"mt-2 title"},se={__name:"index",setup(M){const r=$();return T(),(u,v)=>{const m=C;return a(),h(P,{"with-footer":!0,"hide-side":!0,"no-right-side":!0},{default:b(()=>[n("div",Y,[o(r).loggedIn?(a(),c("div",Z,[n("div",ee,[n("h2",te,p(u.$t("artTrades.artTrade")),1),i(m,{to:"/art-trade/host",class:"flex flex-row primary-button"},{default:b(()=>[i(L,{name:"i-ion-add"}),D(" "+p(u.$t("artTrades.host")),1)]),_:1})]),i(X)])):(a(),h(Q,{key:0}))])]),_:1})}}},pe=F(se,[["__scopeId","data-v-65877df5"]]);export{pe as default};
