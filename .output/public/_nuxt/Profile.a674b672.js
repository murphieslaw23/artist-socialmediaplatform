import{h as ne,i as X,a2 as Ue,r as w,o as t,l as s,S as K,T as Q,m as e,b as m,w as G,p as j,t as l,q as u,s as M,v as I,F as H,c as N,u as b,G as Z,x as we,K as be,L as ge,a7 as Be,a4 as ye,J as U,A as _e,E as ae,D as Le,k as re,aC as Ae,aD as Pe,V as ze,j as Oe,C as Ve}from"./entry.ad06e1ba.js";import{W as $e,M as xe,e as ce,S as me,d as ve,_ as he,f as fe,g as De,b as Ne}from"./ModalView.c513d210.js";import{J as qe,u as ke,L as We}from"./Layout.6703c364.js";import{_ as x,u as Ge}from"./Icon.e0cdb306.js";import{u as He}from"./useFeed.8d32ccfa.js";import{I as Ee,F as Je}from"./FeedModalView.15cfaec6.js";import{_ as ee}from"./_plugin-vue_export-helper.a1a6add7.js";import{_ as ue}from"./ErrorMessages.3c3f2d85.js";import{u as Me}from"./useUser.121ef881.js";const pe=d=>(be("data-v-98a1c50f"),d=d(),ge(),d),Ke={class:"mx-auto w-full md:w-2/3"},Qe={class:"flex flex-row mb-2 rounded-lg border-none shadow-none theme-color-secondary"},Xe={class:"w-full"},Ye={key:0,class:"p-4 user-info"},Ze=["src"],et={class:"name"},tt=pe(()=>e("br",null,null,-1)),ot=pe(()=>e("span",{class:"mx-1"},"\xB7",-1)),st={class:"text-xxs"},lt={class:"px-2 md:px-4"},at={key:0,class:"my-2 w-full rounded-md theme-color"},nt={key:0,class:"p-2 md:p-4 user-info"},it=["src"],rt={class:"name"},ut=pe(()=>e("br",null,null,-1)),dt=pe(()=>e("span",{class:"mx-1"},"\xB7",-1)),ct={class:"px-2 mt-2 md:px-4"},mt={class:"text-xs font-semibold"},vt=["id"],ft=["id","onClick"],pt=["onClick"],ht={class:"float-right mx-4 mt-2 interactions"},wt={key:0,class:"reactions"},bt=["onClick"],gt=["onClick"],_t={class:"option dropdown"},kt={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"option-dropdown-items"},yt={class:"option-dropdown dropdown-menu"},$t={id:"option-dropdown-items",class:"w-52 toggler","aria-labelledby":"option-dropdown-buttons",role:"menu"},xt={class:"menu-wrapper"},Mt={class:"mx-auto text-center"},Ct={class:"mx-auto mt-10 text-center"},It=pe(()=>e("b",null,"(\u3186_\u3186)",-1)),Et={class:"mx-auto text-center"},Lt={id:"chronological-feed-modal",class:"modal work-view"},At={__name:"Feeds",props:{userId:{type:Number,default:0}},setup(d){const A=d,$=ne(),{oApiConfiguration:c,fetchOptions:P}=X(),f=He(c,P()),{generateArtworkThumb:y}=Ue(),_=w([]),v=w({page:0,perPage:10}),p=async({loaded:i})=>{const[g,o]=await f.getFeedByUserId({userId:A.userId,pagination:{page:v.value.page,perPage:v.value.perPage}});v.value.page+=1;for(let n=0;n<g.feeds.length;n++){const C=g.feeds[n];if(C.liked&&h.value.push(C.id),C.artworks){C.artworks.images=[];for(let O=0;O<C.artworks.artwork_assets.length;O++)if(O<=3){const W=await y(C.artworks.artwork_assets[O].bucket,C.artworks.artwork_assets[O].filename,"feed");C.artworks.images.push(W)}}_.value.push(C)}i(g.feeds.length,v.value.perPage)},a=w(null),r=i=>{a.value.view(i),Z().openModal("chronological-feed-modal")},h=w([]),R=async i=>{const[g,o]=await f.like({feedId:i});if(g){h.value.push(i);const n=document.getElementById(`profileFeedLikeButton-${i}`);n.classList.add("animate-bounce"),setInterval(()=>{n.classList.remove("animate-bounce")},2500)}},k=async i=>{const[g,o]=await f.unlike({feedId:i});if(g){const n=h.value.indexOf(i);h.value.splice(n,1)}};return(i,g)=>{const o=we;return t(),s("div",Ke,[(t(!0),s(K,null,Q(_.value,n=>(t(),s("div",{key:n.id},[e("div",Qe,[e("div",Xe,[n.users?(t(),s("div",Ye,[m(o,{to:"/profile/"+n.users.username},{default:G(()=>[e("img",{class:"avatar",src:i.avatarCoverUrl(n.users.avatar_bucket,n.users.avatar_filename),onError:g[0]||(g[0]=(...C)=>i.imageLoadError&&i.imageLoadError(...C))},null,40,Ze)]),_:2},1032,["to"]),e("div",et,[m(o,{to:"/profile/"+n.users.username,class:"fullname"},{default:G(()=>[j(l(n.users.name),1)]),_:2},1032,["to"]),tt,m(o,{to:"/profile/"+n.users.username,class:"username hover:underline"},{default:G(()=>[j(" @"+l(n.users.username),1)]),_:2},1032,["to"]),ot,e("span",st,l(i.formatDate(n.scheduled_post?n.scheduled_post:n.created_at,!0)),1)])])):u("",!0),e("div",lt,[e("p",null,l(n.text),1),n.artworks?(t(),s("div",at,[n.artworks.users?(t(),s("div",nt,[m(o,{to:"/profile/"+n.artworks.users.username},{default:G(()=>[e("img",{class:"avatar",src:i.avatarCoverUrl(n.artworks.users.avatar_bucket,n.artworks.users.avatar_filename),onError:g[1]||(g[1]=(...C)=>i.imageLoadError&&i.imageLoadError(...C))},null,40,it)]),_:2},1032,["to"]),e("div",rt,[m(o,{to:"/profile/"+n.artworks.users.username,class:"fullname hover:href"},{default:G(()=>[j(l(n.artworks.users.name),1)]),_:2},1032,["to"]),ut,m(o,{to:"/profile/"+n.artworks.users.username,class:"hover:underline text-xxs"},{default:G(()=>[j(" @"+l(n.artworks.users.username),1)]),_:2},1032,["to"]),dt,m(o,{to:"/a/"+n.artworks.id,class:"hover:underline text-xxs"},{default:G(()=>[j(l(i.formatDate(n.artworks.scheduled_post?n.artworks.scheduled_post:n.artworks.created_at,!0)),1)]),_:2},1032,["to"])])])):u("",!0),e("div",ct,[e("span",mt,l(n.artworks.title),1),M(e("p",null,[e("span",{id:"feed-description-"+n.artworks.id},l(n.artworks.description.length>300?`${n.artworks.description.slice(0,300)}...`:n.artworks.description),9,vt),n.artworks.description.length>300?(t(),s("a",{key:0,id:"feed-read-more-"+n.artworks.id,class:"href",onClick:H(C=>i.readMore(n.artworks.description,n.artworks.id,"feed-read-more-","feed-description-"),["prevent"])},l(i.$t("readMore")),9,ft)):u("",!0)],512),[[I,n.artworks.description]])]),e("div",null,[i.isMobile()?(t(),N(o,{key:0,to:"/a/"+n.artworks.id,class:"cursor-pointer"},{default:G(()=>[m(Ee,{class:"p-2",work:n.artworks},null,8,["work"])]),_:2},1032,["to"])):u("",!0),i.isMobile()?u("",!0):(t(),s("div",{key:1,class:"cursor-pointer",onClick:H(C=>i.view(n.artworks.id),["prevent"])},[m(Ee,{class:"p-2 md:p-4",work:n.artworks},null,8,["work"])],8,pt))])])):u("",!0)]),e("div",ht,[b($).loggedIn?(t(),s("div",wt,[e("span",{class:"leading-8",onClick:C=>h.value.includes(n.id)?k(n.id):R(n.id)},[M(m(x,{id:"profileFeedLikeButton-"+n.id,name:"i-ion-heart",class:"mr-1 text-red-500 hover:text-red-500"},null,8,["id"]),[[I,h.value.includes(n.id)]]),M(m(x,{name:"i-ion-heart-outline",class:"mr-1 icon-color hover:text-red-500"},null,512),[[I,!h.value.includes(n.id)]]),j(" "+l(i.thousand(n._count.feed_likes)),1)],8,bt),e("span",{class:"leading-8",onClick:H(C=>r(n.id),["prevent"])},[m(x,{name:"i-mdi-comment-multiple-outline",class:"mr-1 icon-color hover:text-blue-500"}),j(" "+l(i.thousand(n._count.feed_comments)),1)],8,gt),e("div",_t,[e("button",kt,[e("span",null,[m(x,{name:"i-uit-ellipsis-v",class:"align-middle icon icon-color"})])]),e("div",yt,[e("div",$t,[e("div",xt,[m(o,{to:"/feed/"+n.id,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:G(()=>[m(x,{name:"i-fluent-arrow-enter-20-filled",class:"mr-2 text-base"}),j(" "+l(i.$t("open")),1)]),_:2},1032,["to"]),m(o,{to:"/feed/"+n.id,target:"_blank",class:"flex z-20 py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:G(()=>[m(x,{name:"i-ci-external-link",class:"mr-2 text-base"}),j(" "+l(i.$t("openInNewTab")),1)]),_:2},1032,["to"])])])])])])):u("",!0)])])])]))),128)),m(b(qe),{load:p},{loading:G(()=>[e("div",Mt,[m(x,{name:"i-line-md-loading-twotone-loop",class:"text-3xl"})])]),"no-results":G(()=>[e("div",Ct,[It,j(" "+l(i.$t("nothingToShow")),1)])]),"no-more":G(()=>[e("div",Et,l(i.$t("youHaveReachedTheEnd")),1)]),_:1}),e("div",Lt,[m(Je,{ref_key:"chronologicalFeedModalViewRef",ref:a,section:"chronological-feed"},null,512)])])}}},Pt=ee(At,[["__scopeId","data-v-98a1c50f"]]),Ft={id:"lists"},St=["id"],Tt={__name:"Artworks",props:{userId:{type:Number,default:0},manageMode:{type:Boolean,default:!1}},emits:["feedSelectedItems","onEmpty"],setup(d,{emit:A}){const $=d,{oApiConfiguration:c,fetchOptions:P}=X(),f=Ge(c,P()),y="profile",_=w(!0);Be(()=>{v()});const v=async()=>{const[D,q]=await r();p.value=D,q.record_total<=a.value.perPage&&k(),q.record_total===0&&n()},p=w([]),a=w({perPage:24,page:0}),r=async()=>{a.value.page===0&&(_.value=!0);const[D,q,Y]=await f.getUserArtworks({userId:$.userId,pagination:{page:a.value.page,perPage:a.value.perPage}});if(Y)O();else return q.record_total<=a.value.perPage&&k(),q.record_total===0&&n(),a.value.page+=1,h(),[D,q]},h=()=>{_.value=!1,o.value=!1,C.value=!1},R=w(!0),k=()=>{R.value=!1},i=w({delay:!1}),g=async()=>{i.value.delay=!0;const[D,q]=await r();for(let Y=0;Y<D.length;Y++)p.value.push(D[Y]);i.value.delay=!1,dataPagination.next_previous.next_page||k(),dataPagination.next_previous.next_page&&dataPagination.current_page===i.maxLoad&&(k(),i.showDiscoveryButton=!0)},o=w(!1),n=()=>{o.value=!0,k(),A("onEmpty")},C=w(!1),O=()=>{_.value=!1,C.value=!0,k()},W=w(null),F=(D,q=!1)=>{W.value.view(D,q),Z().openModal(y+"-modal")},B=D=>{A("feedSelectedItems",D)};return(D,q)=>(t(),s("div",Ft,[M(e("div",null,[(t(),N(ye,null,[M(m($e,{"section-class":"work-grid",works:p.value,view:F,"manage-mode":d.manageMode,onFeedManageList:B},null,8,["works","manage-mode"]),[[I,!o.value]])],1024)),M(e("div",{class:U(["primary-button",i.value.delay?"animate-pulse":""]),onClick:g},l(D.$t("loadMore")),3),[[I,R.value]])],512),[[I,!_.value]]),m(ue,{loading:_.value,empty:o.value,error:C.value,fetch:r},null,8,["loading","empty","error"]),e("div",{id:y+"-modal",class:"modal work-view"},[M(m(xe,{ref_key:"profileModalViewRef",ref:W,section:y},null,512),[[I,!_.value]])],8,St)]))}},jt=ee(Tt,[["__scopeId","data-v-865112c2"]]),Rt={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Ut={class:"title"},Bt=["name"],zt=["placeholder"],Ot=["placeholder"],Vt=["for"],Dt=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),Nt={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},qt=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Wt=[qt],Gt={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Ht=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Jt=[Ht],Kt={class:"ml-2"},Qt={class:"flex flex-row gap-2 justify-end mt-2"},Xt={type:"submit",class:"primary-button"},Yt={__name:"AlbumFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(d,{emit:A}){const $=d,{oApiConfiguration:c,fetchOptions:P}=X(),f=ce(c,P()),{t:y}=_e(),_="create-album-form",v=w({title:"",description:"",isPublic:1,category:"artwork"}),p=async()=>{ke().validate(_,y);try{let a=!1,r={};if($.category){const[h,R,k]=await f.createAlbum($.category,v.value);a=h,r=R}a&&(Z().closeModal($.modalId),A("created",r))}catch{}};return(a,r)=>(t(),s("div",null,[e("div",Rt,[e("div",null,[e("span",Ut,l(a.$t("albums.create.form.title")),1),e("form",{id:_,class:"mt-2",onSubmit:r[4]||(r[4]=H(h=>p(),["prevent"]))},[e("n-validate",{for:"title",name:a.$t("title")},[M(e("input",{"onUpdate:modelValue":r[0]||(r[0]=h=>v.value.title=h),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:a.$t("title")},null,8,zt),[[ae,v.value.title]])],8,Bt),M(e("textarea",{"onUpdate:modelValue":r[1]||(r[1]=h=>v.value.description=h),class:"form-input theme-color-secondary",placeholder:a.$t("description"),"data-gramm":"false"},null,8,Ot),[[ae,v.value.description]]),e("label",{for:v.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:r[2]||(r[2]=h=>v.value.isPublic=!v.value.isPublic)},[Dt,v.value.isPublic?(t(),s("span",Nt,Wt)):u("",!0),v.value.isPublic?u("",!0):(t(),s("span",Gt,Jt))]),e("span",Kt,l(a.$t("private")),1)],8,Vt),e("div",Qt,[e("button",{class:"cancel-button",onClick:r[3]||(r[3]=H(h=>a.closeModal(d.modalId),["prevent"]))},l(a.$t("cancel")),1),e("button",Xt,l(a.$t("create")),1)])],32)])])]))}},Zt={id:"lists"},eo={class:"p-4 mb-4 w-full rounded-md theme-color-secondary"},to={class:"mb-2 text-base font-bold"},oo={class:"mb-2"},so=j(),lo={class:"italic"},ao=["id"],no={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1}},emits:["onAlbumEmpty","feedManageList"],setup(d,{expose:A,emit:$}){const c=d,{oApiConfiguration:P,fetchOptions:f}=X(),y=ce(P,f()),_=w(c.id);Le(()=>c.id,(F,B)=>{_.value=F}),re(async()=>{await a()});const v=w(!0),p=w({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:24},list:[],empty:!1}),a=async()=>{v.value=!0,await r(),await h(),v.value=!1},r=async()=>{const[F,B]=await y.getInfo(_.value);p.value.info=F.data},h=async()=>{const[F,B,D]=await y.listAlbumItems({albumId:_.value,pagination:{page:p.value.pagination.page,perPage:p.value.pagination.page===0?p.value.pagination.firstLoad:p.value.pagination.perPage}});B?p.value.pagination.page===0?p.value.pagination.page=p.value.pagination.firstLoad/p.value.pagination.perPage:p.value.pagination.page+=p.value.pagination.page!==0?1:2:p.value.loadMore=!1,F!==null&&F.length?(F.forEach(q=>{p.value.list.push(q.artworks)}),$("onAlbumEmpty",!1)):(p.value.empty=!0,$("onAlbumEmpty",!0))},R=()=>{p.value.loadMore=!0,p.value.pagination.page=0,p.value.list=[]},k=w([]),i=F=>{k.value=F,$("feedManageList",F)},g=w(!1);let o;const n=async()=>{const[F,B]=await y.removeItems(c.id,k.value);F&&(ve().splash(o,g,"item-removed-alert"),R(),await a())},C=w("album"),O=w(null),W=(F,B=!1)=>{O.value.view(F,B),Z().openModal(C.value+"-modal")};return A({fetchInfo:r,removeItems:n}),(F,B)=>(t(),s("div",Zt,[e("div",{class:"hidden",onClick:B[0]||(B[0]=D=>r())}),e("div",{class:"hidden",onClick:B[1]||(B[1]=D=>n())}),e("div",eo,[e("div",to,l(p.value.info.name),1),e("div",oo,l(p.value.info.description),1),e("div",null,[e("b",null,l(F.$t("private"))+":",1),so,e("span",lo,l(p.value.info.is_public?F.$t("no"):F.$t("yes")),1)]),e("div",null,[e("b",null,l(F.$t("createdAt")),1),j(" "+l(F.formatDate(p.value.info.created_at)),1)])]),M(e("div",null,[(t(),N(ye,null,[M(m($e,{"section-class":"work-grid",works:p.value.list,view:W,"manage-mode":d.manageMode,onFeedManageList:i},null,8,["works","manage-mode"]),[[I,!p.value.empty]])],1024)),M(e("div",{class:"primary-button",onClick:B[2]||(B[2]=D=>h())},l(F.$t("loadMore")),513),[[I,p.value.loadMore]])],512),[[I,!v.value]]),m(ue,{loading:v.value,empty:p.value.empty,error:!1,fetch:a},null,8,["loading","empty"]),v.value?u("",!0):(t(),s("div",{key:0,id:C.value+"-modal",class:"modal work-view"},[m(xe,{ref_key:"albumModalViewRef",ref:O,section:C.value},null,8,["section"])],8,ao)),M(m(me,{id:"item-removed-alert",text:F.$t("albums.itemRemoved")},null,8,["text"]),[[I,g.value]])]))}},io=ee(no,[["__scopeId","data-v-8e492ab6"]]),ro={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},uo={class:"title"},co=["name"],mo=["placeholder"],vo=["placeholder"],fo=["for"],po=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),ho={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},wo=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),bo=[wo],go={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},_o=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),ko=[_o],yo={class:"ml-2"},$o={class:"flex flex-row gap-2 justify-end mt-2"},xo={type:"submit",class:"primary-button"},Mo={__name:"EditForm",props:{albumId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(d,{expose:A,emit:$}){const c=d,{oApiConfiguration:P,fetchOptions:f}=X(),y=ce(P,f()),{t:_}=_e(),v=w(!0),p=async k=>{if(k){R(),v.value=!0;const[i,g]=await y.getInfo(k),o=i.data;r.value.id=k,r.value.name=o.name,r.value.description=o.description,r.value.isPublic=!!o.is_public,v.value=!1}},a="update-album-form",r=w({id:0,name:"",description:"",isPublic:!1}),h=async()=>{ke().validate(a,_);const[k,i]=await y.update({id:r.value.id,name:r.value.name,description:r.value.description,isPublic:r.value.isPublic?1:0});i||(Z().closeModal(c.modalId),$("updated",r.value),R())},R=()=>{r.value={id:0,name:"",description:"",isPublic:0}};return A({fetch:p}),(k,i)=>(t(),s("div",null,[e("div",ro,[e("div",null,[e("span",uo,l(k.$t("albums.edit.form.title")),1),v.value?u("",!0):(t(),s("form",{key:0,id:a,class:"mt-2",onSubmit:i[4]||(i[4]=H(g=>h(),["prevent"]))},[e("n-validate",{for:"title",name:k.$t("title")},[M(e("input",{"onUpdate:modelValue":i[0]||(i[0]=g=>r.value.name=g),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:k.$t("title")},null,8,mo),[[ae,r.value.name]])],8,co),M(e("textarea",{"onUpdate:modelValue":i[1]||(i[1]=g=>r.value.description=g),class:"form-input theme-color-secondary",placeholder:k.$t("description"),"data-gramm":"false"},null,8,vo),[[ae,r.value.description]]),e("label",{for:r.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:i[2]||(i[2]=g=>r.value.isPublic=!r.value.isPublic)},[po,r.value.isPublic?(t(),s("span",ho,bo)):u("",!0),r.value.isPublic?u("",!0):(t(),s("span",go,ko))]),e("span",yo,l(k.$t("private")),1)],8,fo),e("div",$o,[e("button",{class:"cancel-button",onClick:i[3]||(i[3]=H(g=>k.closeModal(d.modalId),["prevent"]))},l(k.$t("cancel")),1),e("button",xo,l(k.$t("save")),1)])],32))])])]))}},Fe=""+new URL("folder.11be08fa.png",import.meta.url).href,Ce=d=>(be("data-v-c3fbed63"),d=d(),ge(),d),Co={class:"mb-2"},Io={key:0},Eo=Ce(()=>e("img",{src:Fe,class:"rounded"},null,-1)),Lo=[Eo],Ao={key:1},Po={class:"relative text-center"},Fo={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},So={class:"overflow-hidden rounded-md"},To=["src"],jo={key:2,class:"imgrid"},Ro={class:"relative text-center"},Uo={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Bo={class:"overflow-hidden rounded-md"},zo=["src"],Oo=Ce(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),Vo=Ce(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),Do={key:3,class:"imgrid"},No={class:"relative text-center"},qo={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Wo={class:"overflow-hidden rounded-md"},Go=["src"],Ho={key:4,class:"imgrid"},Jo={class:"relative text-center"},Ko={key:0,class:"absolute top-1/2 left-1/2 z-10 text-tiny font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Qo={class:"overflow-hidden rounded-md"},Xo=["src"],Yo={key:5,class:"imgrid"},Zo={key:0,class:"relative text-center"},es={key:0,class:"absolute top-1/2 left-1/2 z-10 text-tiny font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},ts={class:"overflow-hidden rounded-md"},os=["src"],ss={key:1,class:"relative text-center"},ls={class:"absolute top-1/2 left-1/2 z-10 text-3xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},as={class:"overflow-hidden rounded-md"},ns=["src"],is={__name:"ArtworkThumbnail",props:{album:{type:Object,default:()=>{}}},setup(d){const A=ne(),$={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(c,P)=>(t(),s("div",Co,[!d.album.album_has_artworks||d.album._count.album_has_artworks===0?(t(),s("div",Io,Lo)):u("",!0),d.album.album_has_artworks&&d.album._count.album_has_artworks===1?(t(),s("div",Ao,[e("div",Po,[c.applyExplicitFilter(b(A),d.album.album_has_artworks[0].artworks.is_explicit)?(t(),s("span",Fo,l(c.$t("explicitContent")),1)):u("",!0),e("div",So,[d.album.album_has_artworks&&d.album._count.album_has_artworks===1?(t(),s("img",{key:0,src:c.artworkThumb(d.album.album_has_artworks[0].artworks.artwork_assets[0].bucket,d.album.album_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:U(["object-cover object-top rounded",{"blur-sm brightness-50":c.applyExplicitFilter(b(A),d.album.album_has_artworks[0].artworks.is_explicit)}]),style:{"aspect-ratio":"1/1"},onError:P[0]||(P[0]=(...f)=>c.imageLoadError&&c.imageLoadError(...f))},null,42,To)):u("",!0)])])])):u("",!0),d.album.album_has_artworks&&d.album._count.album_has_artworks===2?(t(),s("div",jo,[(t(!0),s(K,null,Q(d.album.album_has_artworks,(f,y)=>(t(),s("div",{key:y,class:U($[2][y])},[e("div",Ro,[c.applyExplicitFilter(b(A),f.artworks.is_explicit)?(t(),s("span",Uo,l(c.$t("explicitContent")),1)):u("",!0),e("div",Bo,[e("img",{class:U(["theme-color",{"blur-sm brightness-50":c.applyExplicitFilter(b(A),f.artworks.is_explicit)}]),src:c.artworkThumb(f.artworks.artwork_assets[0].bucket,f.artworks.artwork_assets[0].filename,"thumbnail"),onError:P[1]||(P[1]=(..._)=>c.imageLoadError&&c.imageLoadError(..._))},null,42,zo)])])],2))),128)),Oo,Vo])):u("",!0),d.album.album_has_artworks&&d.album._count.album_has_artworks===3?(t(),s("div",Do,[(t(!0),s(K,null,Q(d.album.album_has_artworks,(f,y)=>(t(),s("div",{key:y,class:U($[3][y])},[e("div",No,[c.applyExplicitFilter(b(A),f.artworks.is_explicit)?(t(),s("span",qo,l(c.$t("explicitContent")),1)):u("",!0),e("div",Wo,[e("img",{class:U(["theme-color",{"blur-sm brightness-50":c.applyExplicitFilter(b(A),f.artworks.is_explicit)}]),src:c.artworkThumb(f.artworks.artwork_assets[0].bucket,f.artworks.artwork_assets[0].filename,"thumbnail"),onError:P[2]||(P[2]=(..._)=>c.imageLoadError&&c.imageLoadError(..._))},null,42,Go)])])],2))),128))])):u("",!0),d.album.album_has_artworks&&d.album._count.album_has_artworks===4?(t(),s("div",Ho,[(t(!0),s(K,null,Q(d.album.album_has_artworks,(f,y)=>(t(),s("div",{key:y},[e("div",Jo,[c.applyExplicitFilter(b(A),f.artworks.is_explicit)?(t(),s("span",Ko,l(c.$t("explicitContent")),1)):u("",!0),e("div",Qo,[e("img",{class:U(["theme-color",{"blur-sm brightness-50":c.applyExplicitFilter(b(A),f.artworks.is_explicit)}]),src:c.artworkThumb(f.artworks.artwork_assets[0].bucket,f.artworks.artwork_assets[0].filename,"thumbnail"),onError:P[3]||(P[3]=(..._)=>c.imageLoadError&&c.imageLoadError(..._))},null,42,Xo)])])]))),128))])):u("",!0),d.album.album_has_artworks&&d.album._count.album_has_artworks>4?(t(),s("div",Yo,[(t(!0),s(K,null,Q(d.album.album_has_artworks,(f,y)=>(t(),s("div",{key:y},[y<3?(t(),s("div",Zo,[c.applyExplicitFilter(b(A),f.artworks.is_explicit)?(t(),s("span",es,l(c.$t("explicitContent")),1)):u("",!0),e("div",ts,[e("img",{class:U(["theme-color",{"blur-sm brightness-50":c.applyExplicitFilter(b(A),f.artworks.is_explicit)}]),src:c.artworkThumb(f.artworks.artwork_assets[0].bucket,f.artworks.artwork_assets[0].filename,"thumbnail"),onError:P[4]||(P[4]=(..._)=>c.imageLoadError&&c.imageLoadError(..._))},null,42,os)])])):(t(),s("div",ss,[e("span",ls,"+"+l(d.album._count.album_has_artworks-4),1),e("div",as,[e("img",{src:c.artworkThumb(f.artworks.artwork_assets[0].bucket,f.artworks.artwork_assets[0].filename,"thumbnail"),class:U(["z-0 brightness-50",{"blur-sm brightness-50":c.applyExplicitFilter(b(A),f.artworks.is_explicit)}]),onError:P[5]||(P[5]=(..._)=>c.imageLoadError&&c.imageLoadError(..._))},null,42,ns)])]))]))),128))])):u("",!0)]))}},rs=ee(is,[["__scopeId","data-v-c3fbed63"]]),us={class:"mb-2 w-full"},ds={key:0,class:"flex flex-row justify-between"},cs={class:"flex flex-row"},ms={key:0},vs={key:1,class:"flex flex-row justify-between"},fs={class:"flex flex-row"},ps={class:"flex flex-row gap-2"},hs={class:"flex flex-row gap-2"},ws={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},bs=["onClick"],gs={class:"flex flex-row pb-1 mt-4 font-bold"},_s={class:"text-xs font-normal"},ks={__name:"Album",props:{userId:{type:Number,default:0}},setup(d){const A=d,$=ne(),{oApiConfiguration:c,fetchOptions:P}=X(),f=ce(c,P());re(()=>{h()});const y=w(!0),_=w("artwork"),v=w(0),p=w([]),a=w({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),r=w({artwork:0}),h=async()=>{y.value=!0;const[S,T,z]=await f.fetchAlbums(A.userId,_.value,a.value.pagination.page===0?a.value.pagination.firstLoad:a.value.pagination.perPage,a.value.pagination.page);if(z)o();else{S.length||(a.value.manageMode=!1,i()),S.forEach(E=>{p.value.push(E)}),a.value.pagination.page+=a.value.pagination.firstLoad/a.value.pagination.perPage,a.value.showLoadMore=T;const[le]=await f.countArtworkAlbums(A.userId);r.value.artwork=le}y.value=!1},R=async()=>await h(),k=w(!1),i=()=>{k.value=!0,a.value.showLoadMore=!1},g=w(!1),o=()=>{y.value=!1,g.value=!0,a.value.showLoadMore=!1},n=async()=>{y.value=!1,k.value=!1,g.value=!1,a.value.pagination.page=0,p.value=[],await h()},C=w(!1);let O;const W=async()=>{ve().splash(O,C,"created-alert"),await n()},F=w(null),B=()=>{F.value.fetch(v.value),Z().openModal("album-edit-form-modal")},D=w(null),q=S=>{D.value.fetchInfo(),p.value.forEach(T=>{T.id===S.id&&(T.name=S.name,T.description=S.description,T.is_public=S.isPublic)})},Y=()=>{D.value.removeItems()},oe=w([]),de=S=>{oe.value=S},J=async()=>{if(v.value!==0){const[S,T]=await f.deleteAlbum(v.value);S&&(v.value=0,n())}},se=S=>{a.value.showManageButton=!S,a.value.manageMode=!1},ie=()=>{v.value=0,a.value.showManageButton=!1,a.value.manageMode=!1};return(S,T)=>(t(),s("div",null,[e("div",us,[v.value?u("",!0):(t(),s("div",ds,[e("div",cs,[e("div",{class:U(["ml-0 primary-button theme-color-secondary",{"button-color text-white":_.value==="artwork"}]),onClick:T[0]||(T[0]=z=>_.value="artwork")},[j(l(S.$t("artworks.artwork"))+" ",1),e("span",{class:U(["px-1 ml-2 font-normal rounded",_.value==="artwork"?"theme-color":"button-color text-white"])},l(r.value.artwork),3)],2)]),b($).loggedIn&&b($).user.id===d.userId?(t(),s("div",ms,[e("div",{class:"icon-button",onClick:T[1]||(T[1]=z=>S.openModal("album-form-modal"))},[m(x,{name:"i-ion-add-outline"})])])):u("",!0)])),v.value?(t(),s("div",vs,[e("div",null,[e("div",{class:"ml-0 icon-button",onClick:T[2]||(T[2]=z=>ie())},[m(x,{name:"i-ic-baseline-keyboard-arrow-left"})])]),e("div",fs,[M(e("div",ps,[e("button",{class:"action-button secondary-button",onClick:T[3]||(T[3]=z=>a.value.manageMode=!a.value.manageMode)},[m(x,{name:a.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),j(" "+l(a.value.manageMode?S.$t("quit"):S.$t("manage")),1)]),M(e("button",{class:U(["flex flex-row",oe.value.length>0?"danger-button":"disabled-button cursor-not-allowed"]),onClick:T[4]||(T[4]=z=>oe.value.length>0?S.openModal("item-deletion-confirm-modal"):null)},[m(x,{name:"i-akar-icons-trash-bin"}),j(" "+l(S.$t("albums.removeSelected")),1)],2),[[I,a.value.manageMode]])],512),[[I,b($).loggedIn&&b($).user.id===d.userId&&a.value.showManageButton]]),M(e("div",hs,[e("button",{class:"icon-button",onClick:T[5]||(T[5]=z=>B())},[m(x,{name:"i-ph-gear-six"})]),e("button",{class:"danger-button-color b-button",onClick:T[6]||(T[6]=z=>S.openModal("album-deletion-confirm-modal"))},[m(x,{name:"i-akar-icons-trash-bin"})])],512),[[I,b($).loggedIn&&b($).user.id===d.userId&&!a.value.manageMode]])])])):u("",!0),M(e("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},l(S.$t("albums.manageModeActiveMessage")),513),[[I,a.value.manageMode]])]),v.value?u("",!0):(t(),s("div",ws,[(t(!0),s(K,null,Q(p.value,z=>(t(),s("div",{key:z.id,class:U(["p-3 rounded-md cursor-pointer",z.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:le=>v.value=z.id},[z.type==="artwork"?(t(),N(rs,{key:0,album:z},null,8,["album"])):u("",!0),e("div",gs,[z.is_public?u("",!0):(t(),N(x,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),e("span",_s,l(z.name),1)])],10,bs))),128))])),a.value.showLoadMore&&!v.value?(t(),s("div",{key:1,class:"mt-4 w-full primary-button",onClick:R},l(S.$t("loadMore")),1)):u("",!0),m(ue,{loading:y.value,empty:k.value,error:g.value,fetch:h},null,8,["loading","empty","error"]),!y.value&&!v.value?(t(),N(Yt,{key:2,id:"album-form-modal","modal-id":"album-form-modal",category:_.value,class:"modal",onCreated:W},null,8,["category"])):u("",!0),M(m(me,{id:"created-alert",text:S.$t("albums.created")},null,8,["text"]),[[I,C.value]]),!y.value&&v.value?(t(),N(Mo,{key:3,id:"album-edit-form-modal",ref_key:"albumEditFormModalRef",ref:F,"modal-id":"album-edit-form-modal","album-id":v.value,class:"modal",onUpdated:q},null,8,["album-id"])):u("",!0),m(he,{id:"album-deletion-confirm-modal","modal-id":"album-deletion-confirm-modal",message:"All saved items in this album will be deleted. Do you still want to delete this album?",class:"modal",onOnAccept:J},null,8,["message"]),m(he,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this album. Do you still want to remove them?",class:"modal",onOnAccept:Y},null,8,["message"]),v.value&&!y.value?(t(),N(io,{key:4,id:v.value,ref_key:"albumDetailRef",ref:D,"manage-mode":a.value.manageMode,onOnAlbumEmpty:se,onFeedManageList:de},null,8,["id","manage-mode"])):u("",!0)]))}},ys=ee(ks,[["__scopeId","data-v-0fbf1d07"]]),$s={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},xs={class:"title"},Ms=["placeholder"],Cs=["placeholder"],Is=["for"],Es=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),Ls={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},As=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Ps=[As],Fs={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Ss=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Ts=[Ss],js={class:"ml-2"},Rs={class:"flex flex-row gap-2 justify-end mt-2"},Us={type:"submit",class:"primary-button"},Bs={__name:"CollectionFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(d,{emit:A}){const $=d,{oApiConfiguration:c,fetchOptions:P}=X(),f=fe(c,P()),{t:y}=_e(),_="create-collection-form",v=w({title:"",description:"",isPublic:1,category:"artwork"}),p=async()=>{ke().validate(_,y);try{let a=!1,r={};if($.category){const[h,R,k]=await f.createCollection($.category,v.value);k||(a=h,r=R)}a&&(Z().closeModal($.modalId),A("created",r))}catch{}};return(a,r)=>(t(),s("div",null,[e("div",$s,[e("div",null,[e("span",xs,l(a.$t("collections.create.form.title")),1),e("form",{id:_,class:"mt-2",onSubmit:r[4]||(r[4]=H(h=>p(),["prevent"]))},[e("n-validate",null,[M(e("input",{"onUpdate:modelValue":r[0]||(r[0]=h=>v.value.title=h),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:a.$t("title")},null,8,Ms),[[ae,v.value.title]])]),M(e("textarea",{"onUpdate:modelValue":r[1]||(r[1]=h=>v.value.description=h),class:"form-input theme-color-secondary",placeholder:a.$t("description"),"data-gramm":"false"},null,8,Cs),[[ae,v.value.description]]),e("label",{for:v.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:r[2]||(r[2]=h=>v.value.isPublic=!v.value.isPublic)},[Es,v.value.isPublic?(t(),s("span",Ls,Ps)):u("",!0),v.value.isPublic?u("",!0):(t(),s("span",Fs,Ts))]),e("span",js,l(a.$t("private")),1)],8,Is),e("div",Rs,[e("button",{class:"cancel-button",onClick:r[3]||(r[3]=H(h=>a.closeModal(d.modalId),["prevent"]))},l(a.$t("cancel")),1),e("button",Us,l(a.$t("create")),1)])],32)])])]))}},zs={id:"lists"},Os={class:"p-4 mb-4 w-full rounded-md theme-color-secondary"},Vs={class:"text-base font-bold mb-2"},Ds={class:"mb-2"},Ns=j(),qs={class:"italic"},Ws=["id"],Gs={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1},type:{type:String,default:""}},emits:["onCollectionEmpty","feedManageList"],setup(d,{expose:A,emit:$}){const c=d,{oApiConfiguration:P,fetchOptions:f}=X(),y=fe(P,f()),_=w(c.id);Le(()=>c.id,(F,B)=>{_.value=F}),re(async()=>{await a()});const v=w(!0),p=w({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:24},list:[],empty:!1}),a=async()=>{v.value=!0,await r(),await h(),v.value=!1},r=async()=>{const[F,B]=await y.getInfo(_.value);p.value.info=F.data},h=async()=>{const[F,B,D]=await y.listCollectionItems({collectionId:_.value,pagination:{page:p.value.pagination.page,perPage:p.value.pagination.page===0?p.value.pagination.firstLoad:p.value.pagination.perPage}});B?p.value.pagination.page===0?p.value.pagination.page=p.value.pagination.firstLoad/p.value.pagination.perPage:p.value.pagination.page+=p.value.pagination.page!==0?1:2:p.value.loadMore=!1,F!==null&&F.length?(F.forEach(q=>{p.value.list.push(q.artworks)}),$("onCollectionEmpty",!1)):(p.value.empty=!0,$("onCollectionEmpty",!0))},R=()=>{p.value.loadMore=!0,p.value.pagination.page=0,p.value.list=[]},k=w([]),i=F=>{k.value=F,$("feedManageList",F)},g=w(!1);let o;const n=async()=>{const[F,B]=await y.removeItem({collectionId:c.id,type:c.type,workId:k.value});B||(ve().splash(o,g,"item-removed-alert"),R(),await a(),$("feedManageList",[]))},C=w("collection"),O=w(null),W=(F,B=!1)=>{O.value.view(F,B),Z().openModal(C.value+"-modal")};return A({fetchInfo:r,removeItem:n}),(F,B)=>(t(),s("div",zs,[e("div",{class:"hidden",onClick:B[0]||(B[0]=D=>r())}),e("div",{class:"hidden",onClick:B[1]||(B[1]=D=>n())}),e("div",Os,[e("div",Vs,l(p.value.info.name),1),e("div",Ds,l(p.value.info.description),1),e("div",null,[e("b",null,l(F.$t("private"))+":",1),Ns,e("span",qs,l(p.value.info.is_public?F.$t("no"):F.$t("yes")),1)]),e("div",null,[e("b",null,l(F.$t("createdAt")),1),j(" "+l(F.formatDate(p.value.info.created_at)),1)])]),M(e("div",null,[(t(),N(ye,null,[M(m($e,{"section-class":"work-grid",works:p.value.list,view:W,"manage-mode":d.manageMode,onFeedManageList:i},null,8,["works","manage-mode"]),[[I,!p.value.empty]])],1024)),M(e("div",{class:"primary-button",onClick:B[2]||(B[2]=D=>h())},l(F.$t("loadMore")),513),[[I,p.value.loadMore]])],512),[[I,!v.value]]),m(ue,{loading:v.value,empty:p.value.empty,error:!1,fetch:a},null,8,["loading","empty"]),v.value?u("",!0):(t(),s("div",{key:0,id:C.value+"-modal",class:"modal work-view"},[m(xe,{ref_key:"collectionModalViewRef",ref:O,section:C.value},null,8,["section"])],8,Ws)),M(m(me,{id:"item-removed-alert",text:F.$t("collections.itemRemoved")},null,8,["text"]),[[I,g.value]])]))}},Hs=ee(Gs,[["__scopeId","data-v-1df1f9a5"]]),Js={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Ks={class:"title"},Qs=["placeholder"],Xs=["placeholder"],Ys=["for"],Zs=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),el={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},tl=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),ol=[tl],sl={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},ll=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),al=[ll],nl={class:"ml-2"},il={class:"flex flex-row gap-2 justify-end mt-2"},rl={type:"submit",class:"primary-button"},ul={__name:"EditForm",props:{collectionId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(d,{expose:A,emit:$}){const c=d,{t:P}=_e(),{oApiConfiguration:f,fetchOptions:y}=X(),_=fe(f,y()),v=w(!0),p=async k=>{if(k){R(),v.value=!0;const[i,g]=await _.getInfo(k);if(!g){const o=i.data;r.value.id=k,r.value.name=o.name,r.value.description=o.description,r.value.isPublic=!!o.is_public,v.value=!1}}},a="edit-collection-form",r=w({id:0,name:"",description:"",isPublic:!1}),h=async()=>{ke().validate(a,P);const[k,i]=await _.update({id:r.value.id,name:r.value.name,description:r.value.description,isPublic:r.value.isPublic?1:0});i||(Z().closeModal(c.modalId),$("updated",r.value),R())},R=()=>{r.value={id:0,name:"",description:"",isPublic:0}};return A({fetch:p}),(k,i)=>(t(),s("div",null,[e("div",{class:"hidden",onClick:i[0]||(i[0]=g=>p(0))}),e("div",Js,[e("div",null,[e("span",Ks,l(k.$t("collections.edit.form.title")),1),v.value?u("",!0):(t(),s("form",{key:0,id:a,class:"mt-2",onSubmit:i[5]||(i[5]=H(g=>h(),["prevent"]))},[e("n-validate",null,[M(e("input",{"onUpdate:modelValue":i[1]||(i[1]=g=>r.value.name=g),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:k.$t("title")},null,8,Qs),[[ae,r.value.name]])]),M(e("textarea",{"onUpdate:modelValue":i[2]||(i[2]=g=>r.value.description=g),class:"form-input theme-color-secondary",placeholder:k.$t("description"),"data-gramm":"false"},null,8,Xs),[[ae,r.value.description]]),e("label",{for:r.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:i[3]||(i[3]=g=>r.value.isPublic=!r.value.isPublic)},[Zs,r.value.isPublic?(t(),s("span",el,ol)):u("",!0),r.value.isPublic?u("",!0):(t(),s("span",sl,al))]),e("span",nl,l(k.$t("private")),1)],8,Ys),e("div",il,[e("button",{class:"cancel-button",onClick:i[4]||(i[4]=H(g=>k.closeModal(d.modalId),["prevent"]))},l(k.$t("cancel")),1),e("button",rl,l(k.$t("save")),1)])],32))])])]))}},Ie=d=>(be("data-v-f083c4bf"),d=d(),ge(),d),dl={class:"mb-2"},cl={key:0},ml=Ie(()=>e("img",{src:Fe,class:"rounded"},null,-1)),vl=[ml],fl={key:1},pl={class:"relative text-center"},hl={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},wl={class:"overflow-hidden rounded-md"},bl=["src"],gl={key:2,class:"imgrid"},_l={class:"relative text-center"},kl={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},yl={class:"overflow-hidden rounded-md"},$l=["src"],xl=Ie(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),Ml=Ie(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),Cl={key:3,class:"imgrid"},Il={class:"relative text-center"},El={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Ll={class:"overflow-hidden rounded-md"},Al=["src"],Pl={key:4,class:"imgrid"},Fl={class:"relative text-center"},Sl={key:0,class:"absolute top-1/2 left-1/2 z-10 text-tiny font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Tl={class:"overflow-hidden rounded-md"},jl=["src"],Rl={key:5,class:"imgrid"},Ul={key:0,class:"relative text-center"},Bl={key:0,class:"absolute top-1/2 left-1/2 z-10 text-tiny font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},zl={class:"overflow-hidden rounded-md"},Ol=["src"],Vl={key:1,class:"relative text-center"},Dl={class:"absolute top-1/2 left-1/2 z-10 text-3xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Nl={class:"overflow-hidden rounded-md"},ql=["src"],Wl={__name:"ArtworkThumbnail",props:{collection:{type:Object,default:()=>{}}},setup(d){const A=ne(),$={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(c,P)=>(t(),s("div",dl,[!d.collection.collection_has_artworks||d.collection._count.collection_has_artworks===0?(t(),s("div",cl,vl)):u("",!0),d.collection.collection_has_artworks&&d.collection._count.collection_has_artworks===1?(t(),s("div",fl,[e("div",pl,[c.applyExplicitFilter(b(A),d.collection.collection_has_artworks[0].artworks.is_explicit)?(t(),s("span",hl,l(c.$t("explicitContent")),1)):u("",!0),e("div",wl,[d.collection.collection_has_artworks&&d.collection._count.collection_has_artworks===1?(t(),s("img",{key:0,src:c.artworkThumb(d.collection.collection_has_artworks[0].artworks.artwork_assets[0].bucket,d.collection.collection_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:U(["object-cover object-top rounded",{"blur-sm brightness-50":c.applyExplicitFilter(b(A),d.collection.collection_has_artworks[0].artworks.is_explicit)}]),style:{"aspect-ratio":"1/1"},onError:P[0]||(P[0]=(...f)=>c.imageLoadError&&c.imageLoadError(...f))},null,42,bl)):u("",!0)])])])):u("",!0),d.collection.collection_has_artworks&&d.collection._count.collection_has_artworks===2?(t(),s("div",gl,[(t(!0),s(K,null,Q(d.collection.collection_has_artworks,(f,y)=>(t(),s("div",{key:y,class:U($[2][y])},[e("div",_l,[c.applyExplicitFilter(b(A),f.artworks.is_explicit)?(t(),s("span",kl,l(c.$t("explicitContent")),1)):u("",!0),e("div",yl,[e("img",{class:U(["theme-color",{"blur-sm brightness-50":c.applyExplicitFilter(b(A),f.artworks.is_explicit)}]),src:c.artworkThumb(f.artworks.artwork_assets[0].bucket,f.artworks.artwork_assets[0].filename,"thumbnail"),onError:P[1]||(P[1]=(..._)=>c.imageLoadError&&c.imageLoadError(..._))},null,42,$l)])])],2))),128)),xl,Ml])):u("",!0),d.collection.collection_has_artworks&&d.collection._count.collection_has_artworks===3?(t(),s("div",Cl,[(t(!0),s(K,null,Q(d.collection.collection_has_artworks,(f,y)=>(t(),s("div",{key:y,class:U($[3][y])},[e("div",Il,[c.applyExplicitFilter(b(A),f.artworks.is_explicit)?(t(),s("span",El,l(c.$t("explicitContent")),1)):u("",!0),e("div",Ll,[e("img",{class:U(["theme-color",{"blur-sm brightness-50":c.applyExplicitFilter(b(A),f.artworks.is_explicit)}]),src:c.artworkThumb(f.artworks.artwork_assets[0].bucket,f.artworks.artwork_assets[0].filename,"thumbnail"),onError:P[2]||(P[2]=(..._)=>c.imageLoadError&&c.imageLoadError(..._))},null,42,Al)])])],2))),128))])):u("",!0),d.collection.collection_has_artworks&&d.collection._count.collection_has_artworks===4?(t(),s("div",Pl,[(t(!0),s(K,null,Q(d.collection.collection_has_artworks,(f,y)=>(t(),s("div",{key:y},[e("div",Fl,[c.applyExplicitFilter(b(A),f.artworks.is_explicit)?(t(),s("span",Sl,l(c.$t("explicitContent")),1)):u("",!0),e("div",Tl,[e("img",{class:U(["theme-color",{"blur-sm brightness-50":c.applyExplicitFilter(b(A),f.artworks.is_explicit)}]),src:c.artworkThumb(f.artworks.artwork_assets[0].bucket,f.artworks.artwork_assets[0].filename,"thumbnail"),onError:P[3]||(P[3]=(..._)=>c.imageLoadError&&c.imageLoadError(..._))},null,42,jl)])])]))),128))])):u("",!0),d.collection.collection_has_artworks&&d.collection._count.collection_has_artworks>4?(t(),s("div",Rl,[(t(!0),s(K,null,Q(d.collection.collection_has_artworks,(f,y)=>(t(),s("div",{key:y},[y<3?(t(),s("div",Ul,[c.applyExplicitFilter(b(A),f.artworks.is_explicit)?(t(),s("span",Bl,l(c.$t("explicitContent")),1)):u("",!0),e("div",zl,[e("img",{class:U(["theme-color",{"blur-sm brightness-50":c.applyExplicitFilter(b(A),f.artworks.is_explicit)}]),src:c.artworkThumb(f.artworks.artwork_assets[0].bucket,f.artworks.artwork_assets[0].filename,"thumbnail"),onError:P[4]||(P[4]=(..._)=>c.imageLoadError&&c.imageLoadError(..._))},null,42,Ol)])])):(t(),s("div",Vl,[e("span",Dl,"+"+l(d.collection._count.collection_has_artworks-4),1),e("div",Nl,[e("img",{src:c.artworkThumb(f.artworks.artwork_assets[0].bucket,f.artworks.artwork_assets[0].filename,"thumbnail"),class:U(["z-0 brightness-50",{"blur-sm brightness-50":c.applyExplicitFilter(b(A),f.artworks.is_explicit)}]),onError:P[5]||(P[5]=(..._)=>c.imageLoadError&&c.imageLoadError(..._))},null,42,ql)])]))]))),128))])):u("",!0)]))}},Gl=ee(Wl,[["__scopeId","data-v-f083c4bf"]]),Hl={class:"mb-2 w-full"},Jl={key:0,class:"flex flex-row justify-between"},Kl={class:"flex flex-row"},Ql={key:0},Xl={key:1,class:"flex flex-row justify-between"},Yl={class:"flex flex-row"},Zl={class:"flex flex-row gap-2"},ea={class:"flex flex-row gap-2"},ta={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},oa=["onClick"],sa={class:"flex flex-row pb-1 mt-4 font-bold"},la={class:"text-xs font-normal"},aa={__name:"Collection",props:{userId:{type:Number,default:0}},setup(d){const A=d,$=ne();re(()=>{h()});const{oApiConfiguration:c,fetchOptions:P}=X(),f=fe(c,P()),y=w(!0),_=w("artwork"),v=w(0),p=w([]),a=w({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),r=w({artwork:0}),h=async()=>{y.value=!0;const[S,T,z]=await f.fetchCollections({userId:A.userId,type:_.value,pagination:{page:a.value.pagination.page,perPage:a.value.pagination.page===0?a.value.pagination.firstLoad:a.value.pagination.perPage}});if(z)o();else{S.length||(a.value.manageMode=!1,i()),S.forEach(E=>{p.value.push(E)}),a.value.pagination.page+=a.value.pagination.firstLoad/a.value.pagination.perPage,a.value.showLoadMore=T;const[le]=await f.countArtworkCollections(A.userId);r.value.artwork=le}y.value=!1},R=async()=>await h(),k=w(!1),i=()=>{k.value=!0,a.value.showLoadMore=!1},g=w(!1),o=()=>{y.value=!1,g.value=!0,a.value.showLoadMore=!1},n=async()=>{y.value=!1,k.value=!1,g.value=!1,a.value.pagination.page=0,p.value=[],await h()},C=S=>{a.value.showManageButton=!0,S&&(a.value.showManageButton=!1)},O=w(!1);let W;const F=async()=>{ve().splash(W,O,"created-alert"),await n()},B=w(null),D=()=>{B.value.fetch(v.value),Z().openModal("collection-edit-form-modal")},q=w(null),Y=S=>{q.value.fetchInfo(),p.value.forEach(T=>{T.id===S.id&&(T.name=S.name,T.description=S.description,T.is_public=S.isPublic)})},oe=w([]),de=S=>{oe.value=S},J=()=>{q.value.removeItem()},se=async()=>{if(v.value!==0){const[S,T]=await f.deleteCollection(v.value);S&&(v.value=0,n())}},ie=()=>{v.value=0,a.value.showManageButton=!1,a.value.manageMode=!1};return(S,T)=>(t(),s("div",null,[e("div",Hl,[v.value?u("",!0):(t(),s("div",Jl,[e("div",Kl,[e("div",{class:U(["ml-0 primary-button theme-color-secondary",{"button-color text-white":_.value==="artwork"}]),onClick:T[0]||(T[0]=z=>_.value="artwork")},[j(l(S.$t("artworks.artwork"))+" ",1),e("span",{class:U(["px-1 ml-2 font-normal rounded",_.value==="artwork"?"theme-color":"button-color text-white"])},l(r.value.artwork),3)],2)]),b($).loggedIn&&b($).user.id===d.userId?(t(),s("div",Ql,[e("div",{class:"icon-button",onClick:T[1]||(T[1]=z=>S.openModal("collection-form-modal"))},[m(x,{name:"i-ion-add-outline"})])])):u("",!0)])),v.value?(t(),s("div",Xl,[e("div",null,[e("div",{class:"ml-0 icon-button",onClick:T[2]||(T[2]=z=>ie())},[m(x,{name:"i-ic-baseline-keyboard-arrow-left"})])]),e("div",Yl,[M(e("div",Zl,[e("button",{class:"action-button secondary-button",onClick:T[3]||(T[3]=z=>a.value.manageMode=!a.value.manageMode)},[m(x,{name:a.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),j(" "+l(a.value.manageMode?S.$t("quit"):S.$t("manage")),1)]),M(e("button",{class:U(["flex flex-row",oe.value.length>0?"danger-button":"disabled-button cursor-not-allowed"]),onClick:T[4]||(T[4]=z=>oe.value.length>0?S.openModal("item-deletion-confirm-modal"):null)},[m(x,{name:"i-akar-icons-trash-bin"}),j(" "+l(S.$t("collections.removeSelected")),1)],2),[[I,a.value.manageMode]])],512),[[I,b($).loggedIn&&b($).user.id===d.userId&&a.value.showManageButton]]),M(e("div",ea,[e("button",{class:"icon-button",onClick:T[5]||(T[5]=z=>D())},[m(x,{name:"i-ph-gear-six"})]),e("button",{class:"danger-button-color b-button",onClick:T[6]||(T[6]=z=>S.openModal("collection-deletion-confirm-modal"))},[m(x,{name:"i-akar-icons-trash-bin"})])],512),[[I,b($).loggedIn&&b($).user.id===d.userId&&!a.value.manageMode]])])])):u("",!0),M(e("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},l(S.$t("collections.manageModeActiveMessage")),513),[[I,a.value.manageMode]])]),v.value?u("",!0):(t(),s("div",ta,[(t(!0),s(K,null,Q(p.value,z=>(t(),s("div",{key:z.id,class:U(["p-3 rounded-md cursor-pointer",z.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:le=>v.value=z.id},[z.type==="artwork"?(t(),N(Gl,{key:0,collection:z},null,8,["collection"])):u("",!0),e("div",sa,[z.is_public?u("",!0):(t(),N(x,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),e("span",la,l(z.name),1)])],10,oa))),128))])),a.value.showLoadMore&&!v.value?(t(),s("div",{key:1,class:"mt-4 w-full primary-button",onClick:R},l(S.$t("loadMore")),1)):u("",!0),m(ue,{loading:y.value,empty:k.value,error:g.value,fetch:h},null,8,["loading","empty","error"]),!y.value&&!v.value?(t(),N(Bs,{key:2,id:"collection-form-modal","modal-id":"collection-form-modal",category:_.value,class:"modal",onCreated:F},null,8,["category"])):u("",!0),M(m(me,{id:"created-alert",text:S.$t("collections.created")},null,8,["text"]),[[I,O.value]]),!y.value&&v.value?(t(),N(ul,{key:3,id:"collection-edit-form-modal",ref_key:"collectionEditFormModalRef",ref:B,"modal-id":"collection-edit-form-modal","collection-id":v.value,class:"modal",onUpdated:Y},null,8,["collection-id"])):u("",!0),m(he,{id:"collection-deletion-confirm-modal","modal-id":"collection-deletion-confirm-modal",message:"All saved items in this collection will be deleted. Do you still want to delete this collection?",class:"modal",onOnAccept:se},null,8,["message"]),m(he,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this collection. Do you still want to remove them?",class:"modal",onOnAccept:J},null,8,["message"]),v.value&&!y.value?(t(),N(Hs,{key:4,id:v.value,ref_key:"collectionDetailRef",ref:q,"manage-mode":a.value.manageMode,type:_.value,onOnCollectionEmpty:C,onFeedManageList:de},null,8,["id","manage-mode","type"])):u("",!0)]))}},na=ee(aa,[["__scopeId","data-v-853d0a40"]]),ia={class:"text-lg font-bold"},ra={class:"grid grid-cols-1 gap-4 mt-4 w-full md:grid-cols-2 lg:grid-cols-3"},ua={class:"flex flex-row w-full"},da=["src"],ca={class:"flex flex-col justify-between p-3 w-full text-white"},ma={class:"flex flex-col"},va={class:"font-bold"},fa={class:"text-xxs"},pa={class:"flex flex-row w-full"},ha={key:0,class:"flex flex-row"},wa=["onClick"],ba=["onMouseover","onClick"],ga={__name:"FollowerList",props:{userId:{type:Number,default:0}},setup(d){const A=d,$=ne(),{oApiConfiguration:c,fetchOptions:P}=X(),f=Me(c,P());re(()=>{h()});const y=w([]),_=w(!0),v=w({page:0,perPage:12}),p=w(!1),a=w(!1),r=w(!1),h=async()=>{R(),_.value=!0;const[i,g]=await f.getFollowerList({userId:A.userId,pagination:{page:v.value.page,perPage:v.value.perPage}});g?p.value=!0:(i.followers.length||(a.value=!0),i.followers.forEach(o=>{y.value.push(o)}),v.value.page+=1,i.pagination.next_previous.next_page?r.value=!0:r.value=!1),_.value=!1},R=()=>{a.value=!1,p.value=!1},k=w(0);return(i,g)=>{const o=we;return t(),s("div",null,[e("div",ia,l(i.$t("followers")),1),e("div",ra,[(t(!0),s(K,null,Q(y.value,(n,C)=>(t(),N(o,{key:n.id,to:"/profile/"+n.username,class:"flex object-cover flex-row rounded-md shadow-lg cursor-pointer theme-color-secondary hover:shadow-xl",style:Ae(n.cover_bucket&&n.cover_filename?"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+i.avatarCoverUrl(n.cover_bucket,n.cover_filename)+");background-size:cover;":"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+b(Pe)+");background-size:cover;")},{default:G(()=>[e("div",ua,[e("img",{src:i.avatarCoverUrl(n.avatar_bucket,n.avatar_filename),class:"avatar",onError:g[0]||(g[0]=(...O)=>i.imageLoadError&&i.imageLoadError(...O))},null,40,da),e("div",ca,[e("div",ma,[e("span",va,l(n.name),1),e("span",fa,l(n.pen_name),1)]),e("div",pa,[b($).loggedIn&&n.id!==b($).user.id?(t(),s("div",ha,[M(e("div",{class:"flex flex-row",onClick:H(O=>i.followUser(C,n.id),["prevent"])},[m(x,{name:"i-ri-user-add-fill",class:"text-gray-300 hover:text-white"})],8,wa),[[I,!n.is_following]]),M(e("div",{class:"flex flex-row",onMouseover:O=>k.value=n.id,onMouseout:g[1]||(g[1]=O=>k.value=0),onClick:H(O=>i.unfollowUser(C,n.id),["prevent"])},[M(m(x,{name:"i-ri-user-follow-fill",class:"text-green-400"},null,512),[[I,k.value!==n.id]]),M(m(x,{name:"i-ri-user-unfollow-fill",class:"text-red-400 hover:text-red-400"},null,512),[[I,k.value&&k.value===n.id]])],40,ba),[[I,n.is_following]])])):u("",!0)])])])]),_:2},1032,["to","style"]))),128))]),M(e("div",{class:"mt-4 primary-button",onClick:g[2]||(g[2]=n=>h())},l(i.$t("loadMore")),513),[[I,r.value]]),m(ue,{loading:_.value,empty:a.value,error:p.value,fetch:h},null,8,["loading","empty","error"])])}}},_a=ee(ga,[["__scopeId","data-v-4c6ae399"]]),ka={class:"text-lg font-bold"},ya={class:"grid grid-cols-1 gap-4 mt-4 w-full md:grid-cols-2 lg:grid-cols-3"},$a={class:"flex flex-row w-full"},xa=["src"],Ma={class:"flex flex-col justify-between p-3 w-full text-white"},Ca={class:"flex flex-col"},Ia={class:"font-bold"},Ea={class:"text-xxs"},La={class:"flex flex-row w-full"},Aa={key:0,class:"flex flex-row"},Pa=["onClick"],Fa=["onMouseover","onClick"],Sa={__name:"FollowingList",props:{userId:{type:Number,default:0}},setup(d){const A=d,$=ne(),{oApiConfiguration:c,fetchOptions:P}=X(),f=Me(c,P());re(()=>{R()});const y=async()=>{_.value=[],p.value.page=0,await R()},_=w([]),v=w(!0),p=w({page:0,perPage:12}),a=w(!1),r=w(!1),h=w(!1),R=async()=>{k(),v.value=!0;const[g,o]=await f.getFollowingList({userId:A.userId,pagination:{page:p.value.page,perPage:p.value.perPage}});o?a.value=!0:(g.followings.length||(r.value=!0),g.followings.forEach(n=>{_.value.push(n)}),p.value.page+=1,g.pagination.next_previous.next_page?h.value=!0:h.value=!1),v.value=!1},k=()=>{r.value=!1,a.value=!1},i=w(0);return(g,o)=>{const n=we;return t(),s("div",null,[e("div",ka,l(g.$t("followings")),1),e("div",ya,[(t(!0),s(K,null,Q(_.value,(C,O)=>(t(),N(n,{key:C.id,to:"/profile/"+C.username,class:"flex object-cover flex-row rounded-md shadow-lg cursor-pointer theme-color-secondary hover:shadow-xl",style:Ae(C.cover_bucket&&C.cover_filename?"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+g.avatarCoverUrl(C.cover_bucket,C.cover_filename)+");background-size:cover;":"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+b(Pe)+");background-size:cover;")},{default:G(()=>[e("div",$a,[e("img",{src:g.avatarCoverUrl(C.avatar_bucket,C.avatar_filename),class:"avatar",onError:o[0]||(o[0]=(...W)=>g.imageLoadError&&g.imageLoadError(...W))},null,40,xa),e("div",Ma,[e("div",Ca,[e("span",Ia,l(C.name),1),e("span",Ea,l(C.pen_name),1)]),e("div",La,[b($).loggedIn&&C.id!==b($).user.id?(t(),s("div",Aa,[M(e("div",{class:"flex flex-row",onClick:H(W=>g.followUser(O,C.id),["prevent"])},[m(x,{name:"i-ri-user-add-fill",class:"text-gray-300 hover:text-white"})],8,Pa),[[I,!C.is_following]]),M(e("div",{class:"flex flex-row",onMouseover:W=>i.value=C.id,onMouseout:o[1]||(o[1]=W=>i.value=0),onClick:H(W=>g.unfollowUser(O,C.id),["prevent"])},[M(m(x,{name:"i-ri-user-follow-fill",class:"text-green-400"},null,512),[[I,i.value!==C.id]]),M(m(x,{name:"i-ri-user-unfollow-fill",class:"text-red-400 hover:text-red-400"},null,512),[[I,i.value&&i.value===C.id]])],40,Fa),[[I,C.is_following]])])):u("",!0)])])])]),_:2},1032,["to","style"]))),128))]),M(e("div",{class:"primary-button mt-4",onClick:o[2]||(o[2]=C=>R())},l(g.$t("loadMore")),513),[[I,h.value]]),m(ue,{loading:v.value,empty:r.value,error:a.value,fetch:y},null,8,["loading","empty","error"])])}}},Ta=ee(Sa,[["__scopeId","data-v-6f865147"]]),ja=d=>(be("data-v-699764c0"),d=d(),ge(),d),Ra=["src"],Ua={class:"px-2 pb-4 w-full rounded md:px-6 md:pb-6 theme-color"},Ba={class:"flex-row justify-between hidden-md-flex"},za={class:"mr-6 w-1/5"},Oa=["src"],Va={class:"mt-2"},Da={class:"flex flex-row"},Na={class:"flex flex-row"},qa=j("\xA0 "),Wa=j("\xA0 "),Ga={class:"hidden flex-row justify-between w-full md:flex md:mt-6"},Ha={class:"flex flex-col w-full"},Ja={class:"flex flex-row w-full"},Ka={class:"w-9/12"},Qa={class:"text-base font-semibold"},Xa=j("\xA0 "),Ya={class:"mr-2 italic"},Za={class:"flex flex-row mt-2"},en={key:0,class:"mr-1"},tn={class:"flex flex-row"},on={class:"mr-1"},sn={key:0,class:"flex flex-row"},ln=j(" he/his "),an={key:1,class:"flex flex-row"},nn=j(" she/her "),rn={class:"float-right w-3/12 text-right"},un={class:"flex flex-row shadow-md primary-button"},dn={class:"leading-4"},cn={key:1,class:"mt-4"},mn=["href"],vn=["href"],fn=["href"],pn=["href"],hn=["href"],wn={key:0,class:"mt-4"},bn=["id"],gn=["id"],_n={class:"flex flex-col text-center md:hidden"},kn=["src"],yn={class:"mt-4 text-base font-semibold"},$n={class:"flex flex-row justify-center mt-4"},xn={key:0,class:"flex flex-row mr-1"},Mn={class:"mr-1"},Cn={key:0,class:"flex flex-row"},In=j(" he/his "),En={key:1,class:"flex flex-row"},Ln=j(" she/her "),An={key:0,class:"mx-2 mt-4 text-center"},Pn=["id"],Fn=["id"],Sn={key:1,class:"flex flex-row justify-center mt-4"},Tn=["href"],jn=["href"],Rn=["href"],Un=["href"],Bn=["href"],zn={class:"flex flex-row justify-center w-full md:hidden"},On=j("\xA0 "),Vn=j("\xA0 "),Dn={class:"flex flex-row"},Nn={class:"flex flex-row"},qn={class:"mt-2"},Wn={class:"flex flex-row justify-center md:hidden"},Gn={class:"flex flex-row justify-between mt-2 md:mt-6"},Hn={class:"hidden flex-col lg:w-1/5 md:flex"},Jn={class:"profile-navigation_wrapper"},Kn={class:"hidden-lg-flex"},Qn=ja(()=>e("span",{class:"hidden-lg-flex"},null,-1)),Xn={class:"profile-navigation_wrapper"},Yn={class:"hidden-lg-flex"},Zn={class:"hidden-lg-flex"},ei={class:"profile-navigation_wrapper"},ti={class:"hidden-lg-flex"},oi={class:"hidden-lg-flex"},si={class:"w-full md:ml-6"},li={key:0},ai={class:"flex flex-row w-full"},ni={class:"flex flex-row gap-2 justify-between w-full md:justify-end"},ii={key:1},ri={key:2},ui={key:3},di={key:4},ci={__name:"Profile",props:{id:{type:Number,default:0},userLogon:{type:Boolean,default:!1}},setup(d){const A=d,$=ne(),{oApiConfiguration:c,fetchOptions:P}=X(),f=Me(c,P()),y=ce(c,P()),_=fe(c,P()),v=ze(),p=Oe(),{o:a}=v.query,r=w(!0),h=a!=null?w(a):w("dashboard"),R=w("artwork"),k=Ve(()=>A.userLogon&&$.loggedIn?$.user.id:A.id),i=w({manageMode:!1,showManageMode:!0});re(async()=>{await C()});const g=E=>{h.value=E,i.value.manageMode=!1,a!=null&&p.push("/profile")},o=w({}),n=w({feed:0,artwork:0,comic:0,tutorial:0,album:0,followers:0,followings:0}),C=async()=>{r.value=!0;try{const[E]=await f.getInfo(k.value);if(o.value=E,$.loggedIn&&$.user.id!==k.value){const[Re]=await f.isFollowing(k.value);J.value=Re.is_following}const[L]=await f.countFeeds(k.value);n.value.feed=L;const[te]=await f.countArtworks(k.value);n.value.artwork=te;const[V]=await f.countFollowers(k.value);n.value.followers=V;const[Se]=await f.countFollowings(k.value);n.value.followings=Se;const[Te]=await y.countAlbums(k.value);n.value.album=Te;const[je]=await _.countCollections(k.value);n.value.collection=je}catch{}r.value=!1},O=w(null),W=w([]),F=E=>{W.value=E},B=()=>{i.value.showManageMode=!1},D=w(null),q=()=>{Z().openModal("album-selection-modal")},Y=w(!1);let oe;const de=()=>{ve().splash(oe,Y,"item-added-to-album-alert")},J=w(!1),se=w(null),ie=w("i-ri-user-follow-fill"),S=(E,L)=>{ie.value=E,se.value=L},T=async E=>{const[L,te]=await f.follow(E);te||(J.value=!0)},z=async E=>{const[L,te]=await f.unfollow(E);te||(J.value=!1)},le=(E,L,te,V)=>{Ne().readMore(E,L,te,V)};return(E,L)=>{const te=we;return t(),N(We,{"hide-side":!0,"with-footer":!0,"no-right-side":!0},{default:G(()=>[e("div",null,[e("img",{src:E.avatarCoverUrl(o.value.cover_bucket,o.value.cover_filename),class:"object-cover object-top w-full h-32 rounded-t md:h-52 lg:h-72 xl:h-96 unselectable",onError:L[0]||(L[0]=(...V)=>E.defaultCoverImage&&E.defaultCoverImage(...V))},null,40,Ra),b($).loggedIn&&b($).user.id===o.value.id?(t(),N(te,{key:0,to:"/profile/setting",class:"float-right absolute right-4 mt-2 shadow-md icon-button-primary-color flex-md-hidden"},{default:G(()=>[m(x,{name:"i-ph-gear-six"})]),_:1})):u("",!0)]),e("div",Ua,[e("div",Ba,[e("div",za,[e("img",{src:E.avatarCoverUrl(o.value.avatar_bucket,o.value.avatar_filename),class:"hidden -mt-2 w-full md:-mt-16 avatar md:flex",onError:L[1]||(L[1]=(...V)=>E.defaultCoverImage&&E.defaultCoverImage(...V))},null,40,Oa),e("div",Va,[b($).loggedIn&&o.value.id!==b($).user.id?(t(),s("div",{key:0,class:U(["mt-2 primary-button rounded-b-none hover:rounded-b-none",{"hover:danger-button":J.value}]),onClick:L[2]||(L[2]=V=>J.value?z(o.value.id):T(o.value.id)),onMouseover:L[3]||(L[3]=V=>S("i-ri-user-unfollow-fill",E.$t("unfollow"))),onMouseleave:L[4]||(L[4]=V=>S("i-ri-user-follow-fill",E.$t("following")))},[M(e("div",Da,[m(x,{name:"i-ri-user-add-fill","text-size":"text-base"}),j(" "+l(E.$t("follow")),1)],512),[[I,!J.value]]),M(e("div",Na,[m(x,{name:ie.value,"text-size":"text-base"},null,8,["name"]),j(" "+l(se.value===null?E.$t("following"):se.value),1)],512),[[I,J.value]])],34)):u("",!0),e("div",{class:U(["flex-row justify-center border hidden-md-flex",o.value.id==b($).user.id?"rounded-md":"rounded-b-md"])},[e("div",{class:"py-2 w-1/2 text-center cursor-pointer hover:text-colored",onClick:L[5]||(L[5]=V=>h.value="followerList")},[e("b",null,l(n.value.followers),1),qa,e("i",null,l(E.$t("followers").toLowerCase()),1)]),e("div",{class:"py-2 w-1/2 text-center cursor-pointer hover:text-colored",onClick:L[6]||(L[6]=V=>h.value="followingList")},[e("b",null,l(n.value.followings),1),Wa,e("i",null,l(E.$t("following").toLowerCase()),1)])],2)])]),e("div",Ga,[e("div",Ha,[e("div",Ja,[e("div",Ka,[e("div",null,[e("span",Qa,l(o.value.name),1),Xa,e("span",Ya,l(o.value.username),1)]),e("div",Za,[o.value.pen_name&&o.value.pen_name!==""?(t(),s("div",en,[e("span",tn,[m(x,{name:"i-ion-pencil-outline",class:"mr-1 text-base font-bold"}),j(" "+l(o.value.pen_name),1)])])):u("",!0),e("div",on,[o.value.gender==="m"?(t(),s("span",sn,[m(x,{name:"i-ion-male-outline",class:"mr-1 ml-2 text-base font-bold"}),ln])):u("",!0),o.value.gender==="f"?(t(),s("span",an,[m(x,{name:"i-ion-female-outline",class:"mr-1 ml-2 text-base font-bold"}),nn])):u("",!0)])])]),e("div",rn,[b($).loggedIn&&b($).user.id===o.value.id?(t(),N(te,{key:0,to:"/profile/setting",class:"float-right -mt-20 shadow-md"},{default:G(()=>[e("button",un,[m(x,{name:"i-ph-gear-six",class:"mr-2"}),e("span",dn,l(E.$t("profile.setting")),1)])]),_:1})):u("",!0),o.value.user_socials?(t(),s("div",cn,[o.value.user_socials.facebook?(t(),s("a",{key:0,href:"https://facebook.com/"+o.value.user_socials.facebook,target:"blank",class:"ml-3 cursor-pointer"},[m(x,{name:"i-ion-logo-facebook",class:"text-xl"})],8,mn)):u("",!0),o.value.user_socials.instagram?(t(),s("a",{key:1,href:"https://instagram.com/"+o.value.user_socials.instagram+"/",target:"blank",class:"ml-3 cursor-pointer"},[m(x,{name:"i-ion-logo-instagram",class:"text-xl"})],8,vn)):u("",!0),o.value.user_socials.twitter?(t(),s("a",{key:2,href:"https://twitter.com/"+o.value.user_socials.twitter,target:"blank",class:"ml-3 cursor-pointer"},[m(x,{name:"i-ion-logo-twitter",class:"text-xl"})],8,fn)):u("",!0),o.value.user_socials.youtube?(t(),s("a",{key:3,href:"https://youtube.com/channel/"+o.value.user_socials.youtube,target:"blank",class:"ml-3 cursor-pointer"},[m(x,{name:"i-ion-logo-youtube",class:"text-xl"})],8,pn)):u("",!0),o.value.user_socials.patreon?(t(),s("a",{key:4,href:"https://patreon.com/"+o.value.user_socials.patreon+"/",target:"blank",class:"ml-3 cursor-pointer"},[m(x,{name:"heart",class:"text-xl"})],8,hn)):u("",!0)])):u("",!0)])]),e("div",null,[o.value.bio?(t(),s("p",wn,[e("span",{id:"user-bio-"+o.value.id},l(o.value.bio.length>300?`${o.value.bio.slice(0,300)}...`:o.value.bio),9,bn),o.value.bio.length>300?(t(),s("a",{key:0,id:"user-bio-read-more-"+o.value.id,class:"href",onClick:L[7]||(L[7]=H(V=>le(o.value.bio,o.value.id,"user-bio-read-more-","user-bio-"),["prevent"]))},l(E.$t("readMore")),9,gn)):u("",!0)])):u("",!0)])])])]),e("div",_n,[e("img",{src:E.avatarCoverUrl(o.value.avatar_bucket,o.value.avatar_filename),class:"flex mx-auto -mt-14 w-2/6 sm:-mt-16 sm:w-1/5 avatar md:hidden",onError:L[8]||(L[8]=(...V)=>E.imageLoadError&&E.imageLoadError(...V))},null,40,kn),e("div",yn,l(o.value.name),1),e("div",null,l(o.value.username),1),e("div",$n,[o.value.pen_name?(t(),s("span",xn,[m(x,{name:"i-ion-pencil-outline",class:"mr-1 text-base font-bold"}),j(" "+l(o.value.pen_name&&o.value.pen_name!==""?o.value.pen_name:"-"),1)])):u("",!0),e("div",Mn,[o.value.gender==="m"?(t(),s("span",Cn,[m(x,{name:"i-ion-male-outline",class:"mr-1 ml-2 text-base font-bold"}),In])):u("",!0),o.value.gender==="f"?(t(),s("span",En,[m(x,{name:"i-ion-female-outline",class:"mr-1 ml-2 text-base font-bold"}),Ln])):u("",!0)])]),o.value.bio?(t(),s("div",An,[e("span",{id:"mobile__user-bio-"+o.value.id},l(o.value.bio.length>150?`${o.value.bio.slice(0,150)}...`:o.value.bio),9,Pn),o.value.bio.length>150?(t(),s("a",{key:0,id:"mobile__user-bio-read-more-"+o.value.id,class:"href",onClick:L[9]||(L[9]=H(V=>le(o.value.bio,o.value.id,"mobile__user-bio-read-more-","mobile__user-bio-"),["prevent"]))},l(E.$t("readMore")),9,Fn)):u("",!0)])):u("",!0),o.value.user_socials?(t(),s("div",Sn,[o.value.user_socials.facebook?(t(),s("a",{key:0,href:"https://facebook.com/"+o.value.user_socials.facebook,target:"blank",class:"ml-3 cursor-pointer"},[m(x,{name:"i-ion-logo-facebook",class:"text-xl"})],8,Tn)):u("",!0),o.value.user_socials.instagram?(t(),s("a",{key:1,href:"https://instagram.com/"+o.value.user_socials.instagram+"/",target:"blank",class:"ml-3 cursor-pointer"},[m(x,{name:"i-ion-logo-instagram",class:"text-xl"})],8,jn)):u("",!0),o.value.user_socials.twitter?(t(),s("a",{key:2,href:"https://twitter.com/"+o.value.user_socials.twitter,target:"blank",class:"ml-3 cursor-pointer"},[m(x,{name:"i-ion-logo-twitter",class:"text-xl"})],8,Rn)):u("",!0),o.value.user_socials.youtube?(t(),s("a",{key:3,href:"https://youtube.com/channel/"+o.value.user_socials.youtube,target:"blank",class:"ml-3 cursor-pointer"},[m(x,{name:"i-ion-logo-youtube",class:"text-xl"})],8,Un)):u("",!0),o.value.user_socials.patreon?(t(),s("a",{key:4,href:"https://patreon.com/"+o.value.user_socials.patreon+"/",target:"blank",class:"ml-3 cursor-pointer"},[m(x,{name:"i-ion-heart",class:"text-xl"})],8,Bn)):u("",!0)])):u("",!0),e("div",zn,[e("div",{class:"p-2 cursor-pointer hover:text-colored",onClick:L[10]||(L[10]=V=>h.value="followerList")},[e("b",null,l(n.value.followers),1),On,e("i",null,l(E.$t("followers")),1)]),e("div",{class:"p-2 cursor-pointer hover:text-colored",onClick:L[11]||(L[11]=V=>h.value="followingList")},[e("b",null,l(n.value.followings),1),Vn,e("i",null,l(E.$t("following")),1)])]),b($).loggedIn&&o.value.id!==b($).user.id?(t(),s("div",{key:2,class:U(["mt-2 w-auto",J.value?"danger-button":"primary-button"]),onClick:L[12]||(L[12]=V=>J.value?z(o.value.id):T(o.value.id))},[M(e("div",Dn,[m(x,{name:"i-ri-user-add-fill","text-size":"text-base"}),j(" "+l(E.$t("follow")),1)],512),[[I,!J.value]]),M(e("div",Nn,[m(x,{name:ie.value,"text-size":"text-base"},null,8,["name"]),j(" "+l(se.value===null?E.$t("following"):se.value),1)],512),[[I,J.value]])],2)):u("",!0)]),e("div",qn,[e("div",Wn,[e("div",{class:U(["mr-2 profile-navigation__mobile theme-color-secondary",{"button-color text-white":b(h)=="dashboard"}]),onClick:L[13]||(L[13]=V=>g("dashboard"))},[e("div",null,[M(m(x,{name:"i-ion-home-outline",class:"text-white"},null,512),[[I,b(h)=="dashboard"]]),M(m(x,{name:"i-ion-home-outline",class:"hover:text-white"},null,512),[[I,b(h)!="dashboard"]])]),e("span",null,l(E.$t("dashboard")),1)],2),e("div",{class:U(["mr-2 profile-navigation__mobile theme-color-secondary",{"button-color text-white":b(h)=="albums"}]),onClick:L[14]||(L[14]=V=>g("albums"))},[e("div",null,[M(m(x,{name:"i-ion-folder-outline",class:"text-white"},null,512),[[I,b(h)=="albums"]]),M(m(x,{name:"i-ion-folder-outline",class:"hover:text-white"},null,512),[[I,b(h)!="albums"]])]),e("span",null,l(E.$t("albums.album")),1)],2),e("div",{class:U(["profile-navigation__mobile theme-color-secondary",{"button-color text-white":b(h)=="collections"}]),onClick:L[15]||(L[15]=V=>g("collections"))},[e("div",null,[M(m(x,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[I,b(h)=="collections"]]),M(m(x,{name:"i-majesticons-bookmark-line",class:"hover:text-white"},null,512),[[I,b(h)!="collections"]])]),e("span",null,l(E.$t("collections.collection")),1)],2)]),e("div",Gn,[e("div",Hn,[e("div",{class:U(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":b(h)==="dashboard"}]),onClick:L[16]||(L[16]=V=>g("dashboard"))},[e("div",Jn,[M(m(x,{name:"i-humbleicons-dashboard",class:"text-white"},null,512),[[I,b(h)==="dashboard"]]),M(m(x,{name:"i-humbleicons-dashboard"},null,512),[[I,b(h)!=="dashboard"]]),e("label",Kn,l(E.$t("dashboard")),1)]),Qn],2),e("div",{class:U(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":b(h)==="albums"}]),onClick:L[17]||(L[17]=V=>g("albums"))},[e("div",Xn,[M(m(x,{name:"i-bx-photo-album",class:"text-white"},null,512),[[I,b(h)==="albums"]]),M(m(x,{name:"i-bx-photo-album"},null,512),[[I,b(h)!=="albums"]]),e("label",Yn,l(E.$t("albums.album")),1)]),e("span",Zn,l(n.value.album),1)],2),e("div",{class:U(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":b(h)==="collections"}]),onClick:L[18]||(L[18]=V=>g("collections"))},[e("div",ei,[M(m(x,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[I,b(h)==="collections"]]),M(m(x,{name:"i-majesticons-bookmark-line"},null,512),[[I,b(h)!=="collections"]]),e("label",ti,l(E.$t("collections.collection")),1)]),e("span",oi,l(n.value.collection),1)],2)]),e("div",si,[b(h)==="dashboard"?(t(),s("div",li,[e("div",ai,[e("div",{class:U(["flex flex-row justify-between w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":R.value==="feed"}]),onClick:L[19]||(L[19]=V=>R.value="feed")},[j(l(E.$t("feed"))+" ",1),e("span",{class:U(["px-1 ml-2 rounded",R.value==="feed"?"theme-color":"button-color text-white"])},l(n.value.feed),3)],2),e("div",{class:U(["flex flex-row justify-between mr-0 w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":R.value==="artwork"}]),onClick:L[20]||(L[20]=V=>R.value="artwork")},[j(l(E.$t("artworks.artwork"))+" ",1),e("span",{class:U(["px-1 ml-2 rounded",R.value==="artwork"?"theme-color":"button-color text-white"])},l(n.value.artwork),3)],2)]),M(e("div",ni,[e("button",{class:"w-full action-button secondary-button md:w-auto",onClick:L[21]||(L[21]=V=>i.value.manageMode=!i.value.manageMode)},[m(x,{name:i.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),j(" "+l(i.value.manageMode?E.$t("quit"):E.$t("manage")),1)]),M(e("button",{class:"w-full primary-button md:w-auto",onClick:L[22]||(L[22]=V=>q())},[m(x,{name:"i-ion-add-outline"}),j(" "+l(E.$t("albums.addToAlbum")),1)],512),[[I,i.value.manageMode]])],512),[[I,b($).loggedIn&&b($).user.id===o.value.id&&R.value==="artwork"&&i.value.showManageMode]]),M(e("div",{class:"p-2 mt-2 text-black bg-yellow-200 rounded-md"},l(E.$t("profile.manageModeActiveMessage")),513),[[I,i.value.manageMode]]),e("div",null,[R.value==="feed"?(t(),N(Pt,{key:0,ref:"feedListRef",class:"mt-2","user-id":o.value.id},null,8,["user-id"])):u("",!0),!r.value&&R.value==="artwork"?(t(),N(jt,{key:1,ref_key:"artworkListRef",ref:O,"user-id":o.value.id,"manage-mode":i.value.manageMode,onFeedSelectedItems:F,onOnEmpty:B},null,8,["user-id","manage-mode"])):u("",!0)])])):u("",!0),b(h)==="albums"?(t(),s("div",ii,[r.value?u("",!0):(t(),N(ys,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):u("",!0),b(h)==="collections"?(t(),s("div",ri,[r.value?u("",!0):(t(),N(na,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):u("",!0),b(h)==="followerList"?(t(),s("div",ui,[r.value?u("",!0):(t(),N(_a,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):u("",!0),b(h)==="followingList"?(t(),s("div",di,[r.value?u("",!0):(t(),N(Ta,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):u("",!0)])])])]),r.value?u("",!0):(t(),N(De,{key:0,id:"album-selection-modal",ref_key:"albumSelectionModalRef",ref:D,class:"modal","work-ids":W.value,onAddedToAlbum:de},null,8,["work-ids"])),M(m(me,{id:"item-added-to-album-alert",text:E.$t("albums.itemAdded")},null,8,["text"]),[[I,Y.value]])]),_:1})}}},ki=ee(ci,[["__scopeId","data-v-699764c0"]]);export{ki as P};
