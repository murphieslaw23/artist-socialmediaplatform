import{K as q,a as B,m as T,k as x,p as A,r as a,c as C,w as D,o as i,b as o,u as t,q as m,t as d,x as w,e as f,v as E,N as I,W as R,M as P}from"./entry.e59d1677.js";import{L,u as U}from"./Layout.38bbd337.js";import{u as F}from"./useUser.6aeea3ba.js";import{_ as K}from"./_plugin-vue_export-helper.a1a6add7.js";import"./ProBadge.e613df9a.js";import"./user-counters-api.efc5c534.js";const O={class:"p-2 pt-4 mx-auto w-1/3 rounded"},W={class:""},j={key:0,class:"mb-2 text-base"},z={key:1,class:"p-2 mb-2 w-full text-white bg-red-500 rounded-md"},G={key:2,class:"p-2 mb-2 w-full text-white bg-green-500 rounded-md"},H=["name"],J=["placeholder"],Q=["name"],X=["placeholder"],Y={type:"submit",class:"float-right mt-2 primary-button"},Z={__name:"RecoverPassword",setup(ee){const{t:k}=q(),g=B(),v=T(),{iv:h,content:_}=g.params,{oApiConfiguration:N,fetchOptions:$}=x(),y=F(N,$());A(()=>{S()});const S=async()=>{const[e,s]=await y.checkResetPasswordTokenValidity({iv:h,content:_});s?v.push({path:"/"}):e.valid||v.push({path:"/"})},u="password-reset-form",r=a(""),l=a(""),p=a(!1),b=a(""),n=a(!1),V=async()=>{U().validate(u,k),n.value=!1,p.value=!1;const[e,s]=await y.resetPassword({iv:h,content:_,newPassword:r.value});s?M(s):n.value=!0},M=e=>{p.value=!0,b.value=e};return(e,s)=>(i(),C(L,{"with-footer":!1,"hide-side":!0,"no-right-side":!0},{default:D(()=>[o("div",O,[o("div",W,[t(n)?w("",!0):(i(),m("div",j,d(e.$t("accountRecovery.resetPassword")),1)),t(p)?(i(),m("div",z,d(t(b)),1)):w("",!0),t(n)?(i(),m("div",G,d(e.$t("accountRecovery.accountRecovered")),1)):w("",!0),f(o("form",{id:u,onSubmit:s[2]||(s[2]=I(c=>V(u),["prevent"]))},[o("n-validate",{for:"password",name:e.$t("accountRecovery.form.newPassword")},[f(o("input",{"onUpdate:modelValue":s[0]||(s[0]=c=>R(r)?r.value=c:null),type:"password",rules:"required|min:6|containSymbol|containNumber",class:"form-input",placeholder:e.$t("accountRecovery.form.newPassword")},null,8,J),[[P,t(r)]])],8,H),o("n-validate",{for:"retype-password",name:e.$t("accountRecovery.form.retypeNewPassword")},[f(o("input",{"onUpdate:modelValue":s[1]||(s[1]=c=>R(l)?l.value=c:null),type:"password",rules:"required|min:6|containSymbol|containNumber|equalTo:password",class:"form-input",placeholder:e.$t("accountRecovery.form.retypeNewPassword")},null,8,X),[[P,t(l)]])],8,Q),o("button",Y,d(e.$t("reset")),1)],544),[[E,!e.showRecoveryLinkSentDialog]])])])]),_:1}))}},ce=K(Z,[["__scopeId","data-v-8f1c5751"]]);export{ce as default};
