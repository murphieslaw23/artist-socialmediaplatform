import{B as ft,h as G,i as Y,R as H,O as gt,o as b,p as $,q as n,e as _,w as D,s as T,t as g,c as se,x as A,b as P,v as U,G as Re,K as z,P as ve,Q as be,y as Le,j as q,r as R,m as Ee,J as st,L,u as e,k as ot,Y as yt,T as He,F as Oe,H as X,D as at,M as bt,N as kt,I as _t,Z as ss,a as as,E as os,$ as pt,a0 as rs,a1 as ns,a2 as ls}from"./entry.ed1bfc63.js";import{P as Ne,u as Te,J as xt,_ as Ct}from"./ProBadge.dc1cf83d.js";import{u as $t}from"./useReport.8d0e33e2.js";import{W as rt,u as Rt}from"./WorkList.c9cb3145.js";import{_ as _e}from"./_plugin-vue_export-helper.a1a6add7.js";import{_ as Me}from"./LoadingEmptyErrorMessage.caee9811.js";import{S as Fe}from"./Spinner.bfc0b0e5.js";import{U as ze}from"./user-counters-api.0d36adb4.js";import{u as is}from"./useSetting.56e2c71f.js";import{u as cs}from"./useFeed.bd601146.js";const he=function(i){return{addWorkToAlbum:async(s,o={})=>{const a="/albums/add-work",t=new URL(a,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"POST",...r,...o},m={},h={};m["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const v in h)d.set(v,h[v]);for(const v in o.params)d.set(v,o.params[v]);t.search=new URLSearchParams(d).toString();let p=r&&r.headers?r.headers:{};l.headers={...m,...p,...o.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}},countUserAlbumsByType:async(s,o={})=>{const a="/albums/count",t=new URL(a,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"POST",...r,...o},m={},h={};m["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const v in h)d.set(v,h[v]);for(const v in o.params)d.set(v,o.params[v]);t.search=new URLSearchParams(d).toString();let p=r&&r.headers?r.headers:{};l.headers={...m,...p,...o.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}},createAlbum:async(s,o={})=>{const a="/albums/create",t=new URL(a,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"POST",...r,...o},m={},h={};m["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const v in h)d.set(v,h[v]);for(const v in o.params)d.set(v,o.params[v]);t.search=new URLSearchParams(d).toString();let p=r&&r.headers?r.headers:{};l.headers={...m,...p,...o.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}},deleteAlbum:async(s,o={})=>{if(s==null)throw new H("id","Required parameter id was null or undefined when calling deleteAlbum.");const a="/albums/{id}".replace("{id}",encodeURIComponent(String(s))),t=new URL(a,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"DELETE",...r,...o},m={},h={},d=new URLSearchParams(t.search);for(const y in h)d.set(y,h[y]);for(const y in o.params)d.set(y,o.params[y]);t.search=new URLSearchParams(d).toString();let p=r&&r.headers?r.headers:{};return l.headers={...m,...p,...o.headers},{url:t.pathname+t.search+t.hash,options:l}},getAlbumById:async(s,o={})=>{if(s==null)throw new H("id","Required parameter id was null or undefined when calling getAlbumById.");const a="/albums/{id}".replace("{id}",encodeURIComponent(String(s))),t=new URL(a,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"GET",...r,...o},m={},h={},d=new URLSearchParams(t.search);for(const y in h)d.set(y,h[y]);for(const y in o.params)d.set(y,o.params[y]);t.search=new URLSearchParams(d).toString();let p=r&&r.headers?r.headers:{};return l.headers={...m,...p,...o.headers},{url:t.pathname+t.search+t.hash,options:l}},getAlbumItems:async(s,o,a,t={})=>{if(s==null)throw new H("id","Required parameter id was null or undefined when calling getAlbumItems.");if(o==null)throw new H("perPage","Required parameter perPage was null or undefined when calling getAlbumItems.");if(a==null)throw new H("page","Required parameter page was null or undefined when calling getAlbumItems.");const r="/albums/list/{id}".replace("{id}",encodeURIComponent(String(s))),l=new URL(r,"https://example.com");let m;i&&(m=i.baseOptions);const h={method:"GET",...m,...t},d={},p={};o!==void 0&&(p.per_page=o),a!==void 0&&(p.page=a);const y=new URLSearchParams(l.search);for(const k in p)y.set(k,p[k]);for(const k in t.params)y.set(k,t.params[k]);l.search=new URLSearchParams(y).toString();let v=m&&m.headers?m.headers:{};return h.headers={...d,...v,...t.headers},{url:l.pathname+l.search+l.hash,options:h}},getCurrentAlbumSaveInfo:async(s,o,a={})=>{if(s==null)throw new H("type","Required parameter type was null or undefined when calling getCurrentAlbumSaveInfo.");if(o==null)throw new H("workId","Required parameter workId was null or undefined when calling getCurrentAlbumSaveInfo.");const t="/albums/current/{type}/{work_id}".replace("{type}",encodeURIComponent(String(s))).replace("{work_id}",encodeURIComponent(String(o))),r=new URL(t,"https://example.com");let l;i&&(l=i.baseOptions);const m={method:"GET",...l,...a},h={},d={},p=new URLSearchParams(r.search);for(const v in d)p.set(v,d[v]);for(const v in a.params)p.set(v,a.params[v]);r.search=new URLSearchParams(p).toString();let y=l&&l.headers?l.headers:{};return m.headers={...h,...y,...a.headers},{url:r.pathname+r.search+r.hash,options:m}},listUserAlbums:async(s,o,a,t,r={})=>{if(s==null)throw new H("userId","Required parameter userId was null or undefined when calling listUserAlbums.");if(o==null)throw new H("perPage","Required parameter perPage was null or undefined when calling listUserAlbums.");if(a==null)throw new H("page","Required parameter page was null or undefined when calling listUserAlbums.");if(t==null)throw new H("type","Required parameter type was null or undefined when calling listUserAlbums.");const l="/albums/user/{userId}".replace("{userId}",encodeURIComponent(String(s))),m=new URL(l,"https://example.com");let h;i&&(h=i.baseOptions);const d={method:"GET",...h,...r},p={},y={};o!==void 0&&(y.per_page=o),a!==void 0&&(y.page=a),t!==void 0&&(y.type=t);const v=new URLSearchParams(m.search);for(const w in y)v.set(w,y[w]);for(const w in r.params)v.set(w,r.params[w]);m.search=new URLSearchParams(v).toString();let k=h&&h.headers?h.headers:{};return d.headers={...p,...k,...r.headers},{url:m.pathname+m.search+m.hash,options:d}},proLimitIsCanCreateAlbum:async(s,o={})=>{const a="/albums/create/permission",t=new URL(a,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"POST",...r,...o},m={},h={};m["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const v in h)d.set(v,h[v]);for(const v in o.params)d.set(v,o.params[v]);t.search=new URLSearchParams(d).toString();let p=r&&r.headers?r.headers:{};l.headers={...m,...p,...o.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}},removeWorkFromAlbum:async(s,o={})=>{const a="/albums/work/remove",t=new URL(a,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"DELETE",...r,...o},m={},h={};m["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const v in h)d.set(v,h[v]);for(const v in o.params)d.set(v,o.params[v]);t.search=new URLSearchParams(d).toString();let p=r&&r.headers?r.headers:{};l.headers={...m,...p,...o.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}},updateAlbum:async(s,o={})=>{const a="/albums",t=new URL(a,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"PATCH",...r,...o},m={},h={};m["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const v in h)d.set(v,h[v]);for(const v in o.params)d.set(v,o.params[v]);t.search=new URLSearchParams(d).toString();let p=r&&r.headers?r.headers:{};l.headers={...m,...p,...o.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}}}},we=function(i){return{async addWorkToAlbum(s,o){const a=await he(i).addWorkToAlbum(s,o);return(t=G,r=Y)=>{const l={...a.options,url:r+a.url};return t.request(l)}},async countUserAlbumsByType(s,o){const a=await he(i).countUserAlbumsByType(s,o);return(t=G,r=Y)=>{const l={...a.options,url:r+a.url};return t.request(l)}},async createAlbum(s,o){const a=await he(i).createAlbum(s,o);return(t=G,r=Y)=>{const l={...a.options,url:r+a.url};return t.request(l)}},async deleteAlbum(s,o){const a=await he(i).deleteAlbum(s,o);return(t=G,r=Y)=>{const l={...a.options,url:r+a.url};return t.request(l)}},async getAlbumById(s,o){const a=await he(i).getAlbumById(s,o);return(t=G,r=Y)=>{const l={...a.options,url:r+a.url};return t.request(l)}},async getAlbumItems(s,o,a,t){const r=await he(i).getAlbumItems(s,o,a,t);return(l=G,m=Y)=>{const h={...r.options,url:m+r.url};return l.request(h)}},async getCurrentAlbumSaveInfo(s,o,a){const t=await he(i).getCurrentAlbumSaveInfo(s,o,a);return(r=G,l=Y)=>{const m={...t.options,url:l+t.url};return r.request(m)}},async listUserAlbums(s,o,a,t,r){const l=await he(i).listUserAlbums(s,o,a,t,r);return(m=G,h=Y)=>{const d={...l.options,url:h+l.url};return m.request(d)}},async proLimitIsCanCreateAlbum(s,o){const a=await he(i).proLimitIsCanCreateAlbum(s,o);return(t=G,r=Y)=>{const l={...a.options,url:r+a.url};return t.request(l)}},async removeWorkFromAlbum(s,o){const a=await he(i).removeWorkFromAlbum(s,o);return(t=G,r=Y)=>{const l={...a.options,url:r+a.url};return t.request(l)}},async updateAlbum(s,o){const a=await he(i).updateAlbum(s,o);return(t=G,r=Y)=>{const l={...a.options,url:r+a.url};return t.request(l)}}}};class ge extends ft{async addWorkToAlbum(s,o){return we(this.configuration).addWorkToAlbum(s,o).then(a=>a(this.axios,this.basePath))}async countUserAlbumsByType(s,o){return we(this.configuration).countUserAlbumsByType(s,o).then(a=>a(this.axios,this.basePath))}async createAlbum(s,o){return we(this.configuration).createAlbum(s,o).then(a=>a(this.axios,this.basePath))}async deleteAlbum(s,o){return we(this.configuration).deleteAlbum(s,o).then(a=>a(this.axios,this.basePath))}async getAlbumById(s,o){return we(this.configuration).getAlbumById(s,o).then(a=>a(this.axios,this.basePath))}async getAlbumItems(s,o,a,t){return we(this.configuration).getAlbumItems(s,o,a,t).then(r=>r(this.axios,this.basePath))}async getCurrentAlbumSaveInfo(s,o,a){return we(this.configuration).getCurrentAlbumSaveInfo(s,o,a).then(t=>t(this.axios,this.basePath))}async listUserAlbums(s,o,a,t,r){return we(this.configuration).listUserAlbums(s,o,a,t,r).then(l=>l(this.axios,this.basePath))}async proLimitIsCanCreateAlbum(s,o){return we(this.configuration).proLimitIsCanCreateAlbum(s,o).then(a=>a(this.axios,this.basePath))}async removeWorkFromAlbum(s,o){return we(this.configuration).removeWorkFromAlbum(s,o).then(a=>a(this.axios,this.basePath))}async updateAlbum(s,o){return we(this.configuration).updateAlbum(s,o).then(a=>a(this.axios,this.basePath))}}const de=function(i){return{addItemForLater:async(s,o,a={})=>{if(s==null)throw new H("type","Required parameter type was null or undefined when calling addItemForLater.");const t="/collections/later",r=new URL(t,"https://example.com");let l;i&&(l=i.baseOptions);const m={method:"POST",...l,...a},h={},d={};s!==void 0&&(d.type=s),h["Content-Type"]="application/json";const p=new URLSearchParams(r.search);for(const k in d)p.set(k,d[k]);for(const k in a.params)p.set(k,a.params[k]);r.search=new URLSearchParams(p).toString();let y=l&&l.headers?l.headers:{};m.headers={...h,...y,...a.headers};const v=typeof o!="string"||m.headers["Content-Type"]==="application/json";return m.data=v?JSON.stringify(o!==void 0?o:{}):o||"",{url:r.pathname+r.search+r.hash,options:m}},addItemToCollection:async(s,o,a,t={})=>{if(s==null)throw new H("type","Required parameter type was null or undefined when calling addItemToCollection.");if(o==null)throw new H("collectionId","Required parameter collectionId was null or undefined when calling addItemToCollection.");const r="/collections/{collectionId}/items".replace("{collectionId}",encodeURIComponent(String(o))),l=new URL(r,"https://example.com");let m;i&&(m=i.baseOptions);const h={method:"POST",...m,...t},d={},p={};s!==void 0&&(p.type=s),d["Content-Type"]="application/json";const y=new URLSearchParams(l.search);for(const w in p)y.set(w,p[w]);for(const w in t.params)y.set(w,t.params[w]);l.search=new URLSearchParams(y).toString();let v=m&&m.headers?m.headers:{};h.headers={...d,...v,...t.headers};const k=typeof a!="string"||h.headers["Content-Type"]==="application/json";return h.data=k?JSON.stringify(a!==void 0?a:{}):a||"",{url:l.pathname+l.search+l.hash,options:h}},collectionsIdDelete:async(s,o={})=>{if(s==null)throw new H("id","Required parameter id was null or undefined when calling collectionsIdDelete.");const a="/collections/{id}".replace("{id}",encodeURIComponent(String(s))),t=new URL(a,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"DELETE",...r,...o},m={},h={},d=new URLSearchParams(t.search);for(const y in h)d.set(y,h[y]);for(const y in o.params)d.set(y,o.params[y]);t.search=new URLSearchParams(d).toString();let p=r&&r.headers?r.headers:{};return l.headers={...m,...p,...o.headers},{url:t.pathname+t.search+t.hash,options:l}},countUserCollectionsByType:async(s,o={})=>{const a="/collections/count",t=new URL(a,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"POST",...r,...o},m={},h={};m["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const v in h)d.set(v,h[v]);for(const v in o.params)d.set(v,o.params[v]);t.search=new URLSearchParams(d).toString();let p=r&&r.headers?r.headers:{};l.headers={...m,...p,...o.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}},create:async(s,o={})=>{const a="/collections/create",t=new URL(a,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"POST",...r,...o},m={},h={};m["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const v in h)d.set(v,h[v]);for(const v in o.params)d.set(v,o.params[v]);t.search=new URLSearchParams(d).toString();let p=r&&r.headers?r.headers:{};l.headers={...m,...p,...o.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}},detail:async(s,o={})=>{if(s==null)throw new H("id","Required parameter id was null or undefined when calling detail.");const a="/collections/{id}".replace("{id}",encodeURIComponent(String(s))),t=new URL(a,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"GET",...r,...o},m={},h={},d=new URLSearchParams(t.search);for(const y in h)d.set(y,h[y]);for(const y in o.params)d.set(y,o.params[y]);t.search=new URLSearchParams(d).toString();let p=r&&r.headers?r.headers:{};return l.headers={...m,...p,...o.headers},{url:t.pathname+t.search+t.hash,options:l}},getCurrentSaveInfo:async(s,o,a={})=>{if(s==null)throw new H("type","Required parameter type was null or undefined when calling getCurrentSaveInfo.");if(o==null)throw new H("workId","Required parameter workId was null or undefined when calling getCurrentSaveInfo.");const t="/collections/current/{type}/{work_id}".replace("{type}",encodeURIComponent(String(s))).replace("{work_id}",encodeURIComponent(String(o))),r=new URL(t,"https://example.com");let l;i&&(l=i.baseOptions);const m={method:"GET",...l,...a},h={},d={},p=new URLSearchParams(r.search);for(const v in d)p.set(v,d[v]);for(const v in a.params)p.set(v,a.params[v]);r.search=new URLSearchParams(p).toString();let y=l&&l.headers?l.headers:{};return m.headers={...h,...y,...a.headers},{url:r.pathname+r.search+r.hash,options:m}},listCollectionItems:async(s,o,a,t={})=>{if(s==null)throw new H("id","Required parameter id was null or undefined when calling listCollectionItems.");if(o==null)throw new H("perPage","Required parameter perPage was null or undefined when calling listCollectionItems.");if(a==null)throw new H("page","Required parameter page was null or undefined when calling listCollectionItems.");const r="/collections/{id}/items".replace("{id}",encodeURIComponent(String(s))),l=new URL(r,"https://example.com");let m;i&&(m=i.baseOptions);const h={method:"GET",...m,...t},d={},p={};o!==void 0&&(p.per_page=o),a!==void 0&&(p.page=a);const y=new URLSearchParams(l.search);for(const k in p)y.set(k,p[k]);for(const k in t.params)y.set(k,t.params[k]);l.search=new URLSearchParams(y).toString();let v=m&&m.headers?m.headers:{};return h.headers={...d,...v,...t.headers},{url:l.pathname+l.search+l.hash,options:h}},listUserCollections:async(s,o,a,t,r,l={})=>{if(s==null)throw new H("userId","Required parameter userId was null or undefined when calling listUserCollections.");if(o==null)throw new H("type","Required parameter type was null or undefined when calling listUserCollections.");if(a==null)throw new H("page","Required parameter page was null or undefined when calling listUserCollections.");if(t==null)throw new H("perPage","Required parameter perPage was null or undefined when calling listUserCollections.");const m="/collections/user/{userId}".replace("{userId}",encodeURIComponent(String(s))),h=new URL(m,"https://example.com");let d;i&&(d=i.baseOptions);const p={method:"GET",...d,...l},y={},v={};o!==void 0&&(v.type=o),r!==void 0&&(v.name=r),a!==void 0&&(v.page=a),t!==void 0&&(v.per_page=t);const k=new URLSearchParams(h.search);for(const f in v)k.set(f,v[f]);for(const f in l.params)k.set(f,l.params[f]);h.search=new URLSearchParams(k).toString();let w=d&&d.headers?d.headers:{};return p.headers={...y,...w,...l.headers},{url:h.pathname+h.search+h.hash,options:p}},proLimitIsCanCreateCollection:async(s,o={})=>{const a="/collections/create/permission",t=new URL(a,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"POST",...r,...o},m={},h={};m["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const v in h)d.set(v,h[v]);for(const v in o.params)d.set(v,o.params[v]);t.search=new URLSearchParams(d).toString();let p=r&&r.headers?r.headers:{};l.headers={...m,...p,...o.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}},removeItemFromCollection:async(s,o,a,t={})=>{if(s==null)throw new H("type","Required parameter type was null or undefined when calling removeItemFromCollection.");if(o==null)throw new H("collectionId","Required parameter collectionId was null or undefined when calling removeItemFromCollection.");const r="/collections/{collectionId}/items".replace("{collectionId}",encodeURIComponent(String(o))),l=new URL(r,"https://example.com");let m;i&&(m=i.baseOptions);const h={method:"DELETE",...m,...t},d={},p={};s!==void 0&&(p.type=s),d["Content-Type"]="application/json";const y=new URLSearchParams(l.search);for(const w in p)y.set(w,p[w]);for(const w in t.params)y.set(w,t.params[w]);l.search=new URLSearchParams(y).toString();let v=m&&m.headers?m.headers:{};h.headers={...d,...v,...t.headers};const k=typeof a!="string"||h.headers["Content-Type"]==="application/json";return h.data=k?JSON.stringify(a!==void 0?a:{}):a||"",{url:l.pathname+l.search+l.hash,options:h}},updateCollection:async(s,o={})=>{const a="/collections",t=new URL(a,"https://example.com");let r;i&&(r=i.baseOptions);const l={method:"PATCH",...r,...o},m={},h={};m["Content-Type"]="application/json";const d=new URLSearchParams(t.search);for(const v in h)d.set(v,h[v]);for(const v in o.params)d.set(v,o.params[v]);t.search=new URLSearchParams(d).toString();let p=r&&r.headers?r.headers:{};l.headers={...m,...p,...o.headers};const y=typeof s!="string"||l.headers["Content-Type"]==="application/json";return l.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:t.pathname+t.search+t.hash,options:l}}}},ue=function(i){return{async addItemForLater(s,o,a){const t=await de(i).addItemForLater(s,o,a);return(r=G,l=Y)=>{const m={...t.options,url:l+t.url};return r.request(m)}},async addItemToCollection(s,o,a,t){const r=await de(i).addItemToCollection(s,o,a,t);return(l=G,m=Y)=>{const h={...r.options,url:m+r.url};return l.request(h)}},async collectionsIdDelete(s,o){const a=await de(i).collectionsIdDelete(s,o);return(t=G,r=Y)=>{const l={...a.options,url:r+a.url};return t.request(l)}},async countUserCollectionsByType(s,o){const a=await de(i).countUserCollectionsByType(s,o);return(t=G,r=Y)=>{const l={...a.options,url:r+a.url};return t.request(l)}},async create(s,o){const a=await de(i).create(s,o);return(t=G,r=Y)=>{const l={...a.options,url:r+a.url};return t.request(l)}},async detail(s,o){const a=await de(i).detail(s,o);return(t=G,r=Y)=>{const l={...a.options,url:r+a.url};return t.request(l)}},async getCurrentSaveInfo(s,o,a){const t=await de(i).getCurrentSaveInfo(s,o,a);return(r=G,l=Y)=>{const m={...t.options,url:l+t.url};return r.request(m)}},async listCollectionItems(s,o,a,t){const r=await de(i).listCollectionItems(s,o,a,t);return(l=G,m=Y)=>{const h={...r.options,url:m+r.url};return l.request(h)}},async listUserCollections(s,o,a,t,r,l){const m=await de(i).listUserCollections(s,o,a,t,r,l);return(h=G,d=Y)=>{const p={...m.options,url:d+m.url};return h.request(p)}},async proLimitIsCanCreateCollection(s,o){const a=await de(i).proLimitIsCanCreateCollection(s,o);return(t=G,r=Y)=>{const l={...a.options,url:r+a.url};return t.request(l)}},async removeItemFromCollection(s,o,a,t){const r=await de(i).removeItemFromCollection(s,o,a,t);return(l=G,m=Y)=>{const h={...r.options,url:m+r.url};return l.request(h)}},async updateCollection(s,o){const a=await de(i).updateCollection(s,o);return(t=G,r=Y)=>{const l={...a.options,url:r+a.url};return t.request(l)}}}};class ye extends ft{async addItemForLater(s,o,a){return ue(this.configuration).addItemForLater(s,o,a).then(t=>t(this.axios,this.basePath))}async addItemToCollection(s,o,a,t){return ue(this.configuration).addItemToCollection(s,o,a,t).then(r=>r(this.axios,this.basePath))}async collectionsIdDelete(s,o){return ue(this.configuration).collectionsIdDelete(s,o).then(a=>a(this.axios,this.basePath))}async countUserCollectionsByType(s,o){return ue(this.configuration).countUserCollectionsByType(s,o).then(a=>a(this.axios,this.basePath))}async create(s,o){return ue(this.configuration).create(s,o).then(a=>a(this.axios,this.basePath))}async detail(s,o){return ue(this.configuration).detail(s,o).then(a=>a(this.axios,this.basePath))}async getCurrentSaveInfo(s,o,a){return ue(this.configuration).getCurrentSaveInfo(s,o,a).then(t=>t(this.axios,this.basePath))}async listCollectionItems(s,o,a,t){return ue(this.configuration).listCollectionItems(s,o,a,t).then(r=>r(this.axios,this.basePath))}async listUserCollections(s,o,a,t,r,l){return ue(this.configuration).listUserCollections(s,o,a,t,r,l).then(m=>m(this.axios,this.basePath))}async proLimitIsCanCreateCollection(s,o){return ue(this.configuration).proLimitIsCanCreateCollection(s,o).then(a=>a(this.axios,this.basePath))}async removeItemFromCollection(s,o,a,t){return ue(this.configuration).removeItemFromCollection(s,o,a,t).then(r=>r(this.axios,this.basePath))}async updateCollection(s,o){return ue(this.configuration).updateCollection(s,o).then(a=>a(this.axios,this.basePath))}}function ht(){return{animate:o=>{const a=document.getElementById(o);a==null||a.classList.add("animate-bounce"),setInterval(()=>{a==null||a.classList.remove("animate-bounce")},2500)}}}function nt(){const i=(o,a,t)=>{a.value=!1,clearTimeout(o),a.value=!0,o=setTimeout(()=>{a.value=!1,s(t)},2e3)},s=o=>{const a=document.getElementById(o);a==null||a.classList.add("fade"),a==null||a.classList.add("fade-out")};return{splash:i,hide:s}}function ds(){return{readMore:(s,o,a,t)=>{const r=document.getElementById(`${t}${o}`);r!==null&&(r.innerHTML=s);const l=document.getElementById(`${a}${o}`);l==null||l.remove()}}}const us={class:"flex-col info"},ms={key:0,class:"user-info"},ps={class:"flex flex-row gap-2 w-full"},hs=["src"],ws={class:"w-full name"},vs={class:"flex flex-row justify-between"},fs={class:"flex flex-col"},gs={class:"mb-2 section-title"},ys={key:1,class:"mb-4"},bs=["id","innerHTML"],ks=["id"],_s={class:"mb-4"},xs={key:2,class:"tags"},Cs={__name:"ModalViewInfo",props:{section:{type:String,default:""},isModal:{type:Boolean,default:!1},artworkDetail:{type:Object,default:()=>{}},previewMode:{type:Boolean,default:!1},isDesktop:{type:Boolean,default:!1}},setup(i){gt();const s=(o,a,t,r)=>{ds().readMore(o,a,t,r)};return(o,a)=>{const t=Le;return b(),$("section",us,[i.artworkDetail.users?(b(),$("div",ms,[n("div",ps,[_(t,{to:"/u/"+i.artworkDetail.users.username},{default:D(()=>[n("img",{class:"avatar",src:o.avatarCoverUrl(i.artworkDetail.users.avatar_bucket,i.artworkDetail.users.avatar_filename),onError:a[0]||(a[0]=(...r)=>o.imageLoadError&&o.imageLoadError(...r))},null,40,hs)]),_:1},8,["to"]),n("div",ws,[n("div",vs,[n("div",fs,[_(t,{to:"/u/"+i.artworkDetail.users.username,class:"fullname"},{default:D(()=>[T(g(i.artworkDetail.users.name)+" ",1),i.artworkDetail.users.isPro?(b(),se(Ne,{key:0})):A("",!0)]),_:1},8,["to"]),_(t,{to:"/u/"+i.artworkDetail.users.username,class:"username"},{default:D(()=>[T(" @"+g(i.artworkDetail.users.username),1)]),_:1},8,["to"])]),P(n("div",{class:"p-1 h-7 font-bold text-white bg-red-500 rounded-md border-2 border-red-500 cursor-pointer hover:bg-red-600 hover:border-red-600",style:{"font-size":"10px"},onClick:a[1]||(a[1]=r=>o.closeModal(`${i.section}-modal`))}," ESC ",512),[[U,i.isModal]])])])])])):A("",!0),n("div",gs,g(i.artworkDetail.title),1),i.artworkDetail.description?(b(),$("div",ys,[n("span",{id:"mview-"+i.isDesktop+"-description-"+i.artworkDetail.id,innerHTML:i.artworkDetail.description.length>300?`${i.artworkDetail.description.slice(0,300)}...`:i.artworkDetail.description},null,8,bs),i.artworkDetail.description.length>300?(b(),$("a",{key:0,id:"mview-"+i.isDesktop+"-read-more-"+i.artworkDetail.id,class:"href",onClick:a[2]||(a[2]=Re(r=>s(i.artworkDetail.description,i.artworkDetail.id,"mview-"+i.isDesktop+"-read-more-","mview-"+i.isDesktop+"-description-"),["prevent"]))},g(o.$t("readMore")),9,ks)):A("",!0)])):A("",!0),n("div",_s,[n("span",{class:z(["italic text-color-secondary",{"font-bold text-red-400":i.previewMode}])},g(i.previewMode?o.$t("willBePublishedOn"):o.$t("publishedOn")),3),T(" "+g(o.formatDate(i.artworkDetail.scheduled_post)),1)]),i.artworkDetail.artwork_has_tags&&i.artworkDetail.artwork_has_tags.length?(b(),$("div",xs,[(b(!0),$(ve,null,be(i.artworkDetail.artwork_has_tags,r=>(b(),$("span",{key:r.artwork_tags.id,class:"tag"},[_(t,{to:`/artworks/browse?tags=${r.artwork_tags.tag.replaceAll(" ","+")}`,onClick:a[3]||(a[3]=l=>o.closeModal(`${i.section}-modal`))},{default:D(()=>[T(g(r.artwork_tags.tag),1)]),_:2},1032,["to"])]))),128))])):A("",!0)])}}},wt=_e(Cs,[["__scopeId","data-v-26d59a66"]]);const $s={class:"artist-works"},Rs={class:"heading"},Is={key:0,class:"pagination-controller"},As={__name:"ArtistWorks",props:{artworkDetail:{type:Object,default(){return{}}},keepArtistPageNumber:{type:Boolean,default:!1},view:Function,isHref:{type:Boolean,default:!1},paginationPerPage:{type:Number,default:4}},setup(i){const s=i,o=s.artworkDetail,{oApiConfiguration:a,fetchOptions:t}=q(),r=Te(a,t()),l=R(null);Ee(()=>{s.keepArtistPageNumber||(d.page=-1),p(o.users.id)});const m=R(!0),h=R([]),d=st({page:0,perPage:s.paginationPerPage,options:{nextPrevLoading:!1,disableArtistNextButton:!0,disableArtistPrevButton:!0}}),p=async(k,w)=>{m.value=!0,d.options.nextPrevLoading=!0,k!==l.value&&(l.value=k,d.page=-1),w==="prev"?d.page-=1:d.page+=1;const[f,C,O]=await r.getUserArtworks({userId:k,pagination:{page:d.page,perPage:d.perPage}});O?(m.value=!1,v()):(C.next_previous.prev_page===null||C.next_previous.prev_page===void 0?d.options.disableArtistPrevButton=!0:d.options.disableArtistPrevButton=!1,C.next_previous.next_page===null||C.next_previous.next_page===void 0?d.options.disableArtistNextButton=!0:d.options.disableArtistNextButton=!1,h.value=f),d.options.nextPrevLoading=!1,m.value=!1},y=R(!1),v=()=>{y.value=!0};return(k,w)=>{const f=Le;return b(),$("div",$s,[n("div",Rs,[n("span",null,[T(g(k.$t("artworks.moreArtworkBy"))+" ",1),i.artworkDetail.users?(b(),se(f,{key:0,to:"/u/"+i.artworkDetail.users.username,class:"text-colored"},{default:D(()=>[T(" @"+g(i.artworkDetail.users.username)+" <"+g(i.artworkDetail.users.name)+"> ",1)]),_:1},8,["to"])):A("",!0)]),_(f,{to:"/u/"+i.artworkDetail.users.username,target:"_blank",class:"flex flex-row cursor-pointer"},{default:D(()=>[_(L,{name:"i-ci-external-link"})]),_:1},8,["to"])]),_(Me,{loading:e(m),error:e(y),class:"mt-2"},null,8,["loading","error"]),P(_(rt,{class:z(["gap-2 md:gap-4",[e(d).options.nextPrevLoading?"animate-pulse":"",i.paginationPerPage===6?"grid-cols-6":"grid-cols-4"]]),"section-class":"works",works:e(h),view:i.view,"is-href":i.isHref,"is-mini-list":!0,"current-work-id":i.artworkDetail.id},null,8,["class","works","view","is-href","current-work-id"]),[[U,!e(m)&&!e(y)]]),i.artworkDetail.users?P((b(),$("div",Is,[n("span",{onClick:w[0]||(w[0]=C=>e(d).options.disableArtistPrevButton?null:p(i.artworkDetail.users.id,"prev"))},[_(L,{name:"i-ion-chevron-back"})]),n("span",{onClick:w[1]||(w[1]=C=>e(d).options.disableArtistNextButton?null:p(i.artworkDetail.users.id,"next"))},[_(L,{name:"i-ion-chevron-forward"})])],512)),[[U,!e(m)]]):A("",!0)])}}},vt=_e(As,[["__scopeId","data-v-7f650611"]]);const Ss={class:"splash"},Ps={class:"flex flex-row"},Ls={__name:"SplashAlert",props:{text:{type:String,default:""},icon:{type:String,default:"checkmark-outline"}},setup(i){return(s,o)=>(b(),$("div",Ss,[n("div",Ps,[_(L,{name:i.icon,class:"mr-2 text-base"},null,8,["name"]),n("span",null,g(i.text),1)])]))}},lt=_e(Ls,[["__scopeId","data-v-86e964a1"]]);function Us(i,s){return{proCanCreateCollection:async w=>{try{const{data:f}=await new ye(i).proLimitIsCanCreateCollection({type:w.type},s);return[f.data.is_can_create,null]}catch(f){return[null,q().consumeReadableStreamError(f)]}},createCollection:async(w,f)=>{try{const{data:C}=await new ye(i).create({name:f.title,description:f.description,is_public:f.isPublic?1:0,type:w},s);return[C.success,C.data,null]}catch(C){return[null,null,q().consumeReadableStreamError(C)]}},getInfo:async w=>{try{return[(await new ye(i).detail(w,s)).data,null]}catch(f){return[null,q().consumeReadableStreamError(f)]}},countCollections:async w=>{try{const{data:f}=await new ze(i).countUserCollections(w,s);return[f.data.total,null]}catch(f){return[null,q().consumeReadableStreamError(f)]}},countArtworkCollections:async w=>{try{const{data:f}=await new ze(i).countUserArtworkCollections(w,s);return[f.data.total,null]}catch(f){return[null,q().consumeReadableStreamError(f)]}},fetchCollections:async w=>{try{const{data:f}=await new ye(i).listUserCollections(w.userId,w.type,w.pagination.page,w.pagination.perPage,w.name,s),C=f.data.collections,O=f.data.pagination;let V=!0;return O.current_page===O.total_page&&(V=!1),[C,V,null]}catch(f){return[null,!1,q().consumeReadableStreamError(f)]}},listCollectionItems:async w=>{try{const{data:f}=await new ye(i).listCollectionItems(w.collectionId,w.pagination.perPage,w.pagination.page,s),C=f.data.pagination;let O=!0;return C.current_page===C.total_page&&(O=!1),[f.data.items,O,null]}catch(f){return[null,!1,q().consumeReadableStreamError(f)]}},getCurrentSaveInfo:async(w,f)=>{try{const{data:C}=await new ye(i).getCurrentSaveInfo(w,f,s);return[C.data,null]}catch(C){return[null,q().consumeReadableStreamError(C)]}},addItem:async w=>{try{return await new ye(i).addItemToCollection(w.type,w.collectionId,{id:w.workId},s),[!0,null]}catch(f){return[null,q().consumeReadableStreamError(f)]}},removeItem:async w=>{try{const{data:f}=await new ye(i).removeItemFromCollection(w.type,w.collectionId,{id:w.workId},s);return[f.success,null]}catch(f){return[null,q().consumeReadableStreamError(f)]}},update:async w=>{try{const{data:f}=await new ye(i).updateCollection({id:w.id,name:w.name,description:w.description,is_public:w.isPublic},s);return[f.success,null]}catch(f){return[null,q().consumeReadableStreamError(f)]}},deleteCollection:async w=>{try{const{data:f}=await new ye(i).collectionsIdDelete(w,s);return[f.success,null]}catch(f){return[null,q().consumeReadableStreamError(f)]}}}}const Vs={class:"w-full modal-layer xl:w-3/12 lg:w-2/5"},Os={class:"flex flex-row justify-between w-full"},Es={class:"title"},Ts={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},Ms={class:"list"},qs={class:"overflow-y-scroll pr-2 max-h-60"},Bs=["onClick"],js={class:"flex flex-row justify-between"},Ds={class:"flex flex-row"},Fs={key:0,class:"flex flex-row mt-2 w-full"},Hs={class:"leading-6"},Ns={class:"flex float-right flex-row gap-2 mt-4"},zs=["placeholder"],Qs={class:"flex flex-row justify-between mt-2"},Ws={__name:"ManageSave",props:{modalId:{type:String,default:"collection-selection-modal"},workId:{type:Number,default:0}},emits:["save"],setup(i,{expose:s,emit:o}){const a=i,t=ot(),{oApiConfiguration:r,fetchOptions:l}=q(),m=Us(r,l());yt(()=>{d()}),Ee(()=>{w(),C()});const h=R(!1),d=async()=>{if(t.i502p00r0)h.value=!0;else{const[E,B]=await m.proCanCreateCollection({type:"artwork"});B?h.value=!1:h.value=E}},p=R({pagination:{page:0,perPage:10},loading:!1}),y=R(!1),v=R(!1),k=R([]),w=async(E=!1)=>{await d(),k.value=[],E||(p.value.loading=!0);const[B,Q,oe]=await m.fetchCollections({userId:t.user.id,type:"artwork",pagination:{page:p.value.pagination.page,perPage:p.value.pagination.perPage}});p.value.loading=!1,oe&&(y.value=!0),oe||(B&&B.length>0?(Q?(p.value.pagination.page+=1,O.value=!0):O.value=!1,B.forEach(Ie=>{k.value.push(Ie)})):v.value=!0)},f=R([]),C=async()=>{y.value=!1,f.value=[],Z.value=[],W.value=[],await setTimeout(async()=>{const[E,B]=await m.getCurrentSaveInfo("artwork",a.workId);if(B)y.value=!0;else for(const Q of E)Z.value.push(Q.collection_id),f.value.push(Q.collection_id)},300)},O=R(!0),V=async()=>{await w({isLoadMore:!0}),await C()},Z=R([]),W=R([]),ae=E=>{if(Z.value.includes(E)){W.value.push(E);const B=Z.value.indexOf(E);Z.value.splice(B,1)}else if(Z.value.push(E),W.value.includes(E)){const B=W.value.indexOf(E);W.value.splice(B,1)}},x=async()=>{try{for(const B of Z.value)await m.addItem({collectionId:B,type:"artwork",workId:a.workId});if(W.value.length)for(const B of W.value)await m.removeItem({collectionId:B,type:"artwork",workId:a.workId});let E=!1;Z.value.length===0&&f.value.length===W.value.length&&(E=!0),await C(),X().closeModal(a.modalId),o("save",E)}catch{}},J=R(""),le=R(!1),ke=async()=>{le.value=!1;const[E,B,Q]=await m.createCollection("artwork",{title:J.value,isPublic:1,description:""});E?(k.value=[],K(),p.value.pagination.page=0,await w(),await C(),await d(),J.value="",N()):le.value=!0},ie=R(!1);let me;const N=()=>{ie.value=!0,nt().splash(me,ie,"collection-created-alert")},K=()=>{Z.value=[]},F=()=>{X().closeModal(a.modalId),K()};return s({fetchCollection:w,fetchCurrentSaved:C}),(E,B)=>(b(),$("div",null,[n("div",Vs,[n("div",null,[n("div",Os,[n("span",Es,g(E.$t("collections.addItem.form.title")),1),n("div",Ts,[n("div",{class:"modal-close",onClick:B[0]||(B[0]=Q=>F())},[_(L,{name:"i-majesticons-close",class:"text-2xl"})])])]),P(n("div",Ms,[n("div",qs,[(b(!0),$(ve,null,be(e(k),(Q,oe)=>(b(),$("div",{key:Q.id,class:z(["item",{"mt-2":oe!==0},e(Z).includes(Q.id)?"button-color text-white":"theme-color-secondary",Q.is_can_add_more?"cursor-pointer":"cursor-not-allowed"]),onClick:Ie=>Q.is_can_add_more?ae(Q.id):null},[n("div",js,[n("span",null,g(Q.name),1),n("div",Ds,[n("span",{class:z(["ml-2 font-bold",e(Z).includes(Q.id)?"text-white":"text-colored"])},g(Q._count.collection_has_artworks),3)])]),Q.is_can_add_more?A("",!0):(b(),$("div",Fs,[_(Ne,{class:"mr-1"}),n("p",Hs,g(E.$t("collections.maxItemLimitReached")),1)]))],10,Bs))),128))]),P(n("div",{class:"mt-2 primary-button",onClick:B[1]||(B[1]=Q=>V())},[_(L,{name:"chevron-down-outline",class:"mr-2"}),T(" "+g(E.$t("loadMore")),1)],512),[[U,e(O)]]),n("div",Ns,[n("button",{class:"cancel-button",onClick:B[2]||(B[2]=Q=>F())},g(E.$t("cancel")),1),n("button",{class:"primary-button",onClick:B[3]||(B[3]=Q=>x())},g(E.$t("save")),1)])],512),[[U,!e(p).loading&&!e(y)&&!e(v)]]),P(n("div",null,[P(n("input",{"onUpdate:modelValue":B[4]||(B[4]=Q=>He(J)?J.value=Q:null),type:"text",class:z(["mt-4 mb-0 form-input theme-color-secondary",{"border border-red-400":e(le)}]),placeholder:E.$t("collections.createNewCollection")},null,10,zs),[[Oe,e(J)]]),n("div",Qs,[n("div",null,[P(n("span",{class:"font-bold text-red-400 transition-all duration-200 ease-in-out"},g(E.$t("collections.failedToCreateCollection")),513),[[U,e(le)]])]),P(n("button",{class:"flex flex-row primary-button",onClick:B[5]||(B[5]=Q=>e(h)?ke():null)},[n("span",{class:z({"leading-6":!e(h)})},g(E.$t("create")),3),e(h)?A("",!0):(b(),se(Ne,{key:0,class:"ml-1"}))],512),[[U,e(J)&&e(J).length>0]])])],512),[[U,!e(p).loading&&!e(y)&&!e(v)]])]),_(Me,{loading:e(p).loading,empty:e(v),error:e(y),fetch:w},null,8,["loading","empty","error"])]),P(_(lt,{id:"collection-created-alert",text:E.$t("collections.collectionCreated"),icon:"i-bi-check-all"},null,8,["text"]),[[U,e(ie)]])]))}},Js=_e(Ws,[["__scopeId","data-v-7569d44f"]]);function Gs(i,s){return{proCanCreateAlbum:async w=>{try{const{data:f}=await new ge(i).proLimitIsCanCreateAlbum({type:w.type},s);return[f.data.is_can_create,null]}catch(f){return[null,q().consumeReadableStreamError(f)]}},createAlbum:async(w,f)=>{try{const{data:C}=await new ge(i).createAlbum({name:f.title,description:f.description,is_public:f.isPublic?1:0,type:w},s);return[C.success,C.data,null]}catch(C){return[null,null,q().consumeReadableStreamError(C)]}},getInfo:async w=>{try{return[(await new ge(i).getAlbumById(w,s)).data,null]}catch(f){return[null,q().consumeReadableStreamError(f)]}},countAlbums:async w=>{try{const{data:f}=await new ze(i).countUserAlbums(w,s);return[f.data.total,null]}catch(f){return[null,q().consumeReadableStreamError(f)]}},countArtworkAlbums:async w=>{try{const{data:f}=await new ze(i).countUserArtworkAlbums(w,s);return[f.data.total,null]}catch(f){return[null,q().consumeReadableStreamError(f)]}},fetchAlbums:async(w,f,C,O)=>{try{const{data:V}=await new ge(i).listUserAlbums(w,C,O,f,s),Z=V.data.pagination;let W=!0;return Z.current_page===Z.total_page&&(W=!1),[V.data.albums,W,null]}catch(V){return[null,!1,q().consumeReadableStreamError(V)]}},listAlbumItems:async w=>{try{const{data:f}=await new ge(i).getAlbumItems(w.albumId,w.pagination.perPage,w.pagination.page,s),C=f.data.pagination;let O=!0;return C.current_page===C.total_page&&(O=!1),[f.data.works,O,null]}catch(f){return[null,!1,q().consumeReadableStreamError(f)]}},getCurrentSaveInfo:async(w,f)=>{try{const{data:C}=await new ge(i).getCurrentAlbumSaveInfo(w,f,s);return[C.data,null]}catch(C){return[null,q().consumeReadableStreamError(C)]}},addItems:async w=>{try{for(const f of w.albumIds)await new ge(i).addWorkToAlbum({album_id:f,type:w.type,work_ids:w.workIds},s);return[!0,null]}catch(f){return[null,q().consumeReadableStreamError(f)]}},removeItems:async(w,f)=>{try{const{data:C}=await new ge(i).removeWorkFromAlbum({album_id:w,work_ids:f},s);return[C.success,null]}catch(C){return[null,q().consumeReadableStreamError(C)]}},update:async w=>{try{const{data:f}=await new ge(i).updateAlbum({id:w.id,name:w.name,description:w.description,is_public:w.isPublic},s);return[f.success,null]}catch(f){return[null,q().consumeReadableStreamError(f)]}},deleteAlbum:async w=>{try{const{data:f}=await new ge(i).deleteAlbum(w,s);return[f.success,null]}catch(f){return[null,q().consumeReadableStreamError(f)]}}}}const Ys={class:"w-full modal-layer xl:w-3/12 lg:w-2/5"},Ks={class:"flex flex-row justify-between w-full"},Zs={class:"title"},Xs={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},ea={class:"list"},ta={class:"overflow-y-scroll pr-2 max-h-60"},sa=["onClick"],aa={class:"flex flex-row justify-between"},oa={key:0,class:"flex flex-row mt-2 w-full"},ra={class:"leading-6"},na={class:"flex float-right flex-row gap-2 mt-4"},la={__name:"ManageAlbum",props:{modalId:{type:String,default:"album-selection-modal"},workId:{type:Number,default:0},workIds:{type:Array,default:()=>[]}},emits:["addedToAlbum"],setup(i,{expose:s,emit:o}){const a=i,t=ot(),{oApiConfiguration:r,fetchOptions:l}=q(),m=Gs(r,l()),h=is(r,l());yt(async()=>{await p()}),Ee(()=>{O(),a.workIds.length||W()});const d=R(999),p=async()=>{const N=await h.getSetting("max_free_album_items");d.value=N},y=async()=>{v.value=[],k.value.pagination.page=0,V(),await O()},v=R([]),k=R({pagination:{perPage:10,page:0,firstLoad:10},showLoadMore:!0}),w=R(!0),f=R(!1),C=R(!1),O=async()=>{V(),w.value=!0;const[N,K,F]=await m.fetchAlbums(t.user.id,"artwork",k.value.pagination.page===0?k.value.pagination.firstLoad:k.value.pagination.perPage,k.value.pagination.page);F&&(f.value=!0),N.length?(K?(k.value.pagination.page+=1,k.value.showLoadMore=!0):k.value.showLoadMore=!1,N.forEach(E=>{v.value.push(E)})):C.value=!0,w.value=!1},V=()=>{C.value=!1,f.value=!1},Z=R([]),W=async()=>{Z.value=[],x.value=[],J.value=[];const[N,K]=await m.getCurrentSaveInfo("artwork",a.workId);for(const F of N)x.value.push(F.album_id),Z.value.push(F.album_id)},ae=async()=>{await O(),await W()},x=R([]),J=R([]),le=N=>{if(x.value.includes(N)){J.value.push(N);const K=x.value.indexOf(N);x.value.splice(K,1)}else if(x.value.push(N),J.value.includes(N)){const K=J.value.indexOf(N);J.value.splice(K,1)}},ke=async()=>{const[N,K]=await m.addItems({albumIds:x.value,type:"artwork",workIds:a.workIds.length?a.workIds:[a.workId]});if(!a.workIds.length&&J.value.length)for(const F of J.value)await m.removeItems(F,[a.workId]);if(N){let F=!1;a.workIds.length||x.value.length===0&&Z.value.length===J.value.length&&(F=!0),ie(),X().closeModal(a.modalId),o("addedToAlbum",a.workIds.length?!0:F)}},ie=()=>{x.value=[]},me=()=>{X().closeModal(a.modalId),ie()};return s({fetchCurrentSaved:W,fetchAlbums:O}),(N,K)=>(b(),$("div",null,[n("div",Ys,[n("div",null,[n("div",Ks,[n("span",Zs,g(N.$t("albums.selectAlbums")),1),n("div",Xs,[n("div",{class:"modal-close",onClick:K[0]||(K[0]=F=>me())},[_(L,{name:"close",class:"text-2xl"})])])]),n("div",ea,[P(n("div",null,[n("div",ta,[(b(!0),$(ve,null,be(e(v),(F,E)=>(b(),$("div",{key:F.id,class:z(["item",{"mt-2":E!==0},e(x).includes(F.id)?"button-color text-white":"theme-color-secondary",F.is_can_add_more?"cursor-pointer":"cursor-not-allowed"]),onClick:B=>F.is_can_add_more?le(F.id):null},[n("div",aa,[n("span",null,g(F.name),1),n("span",{class:z(["ml-2 font-bold",e(x).includes(F.id)?"text-white":"text-colored"])},g(F._count.album_has_artworks),3)]),!F.is_can_add_more||!e(t).i502p00r0&&F._count.album_has_artworks+a.workIds.length>e(d)?(b(),$("div",oa,[_(Ne,{class:"mr-1"}),n("p",ra,g(N.$t("albums.maxItemLimitReached")),1)])):A("",!0)],10,sa))),128))]),P(n("div",{class:"mt-2 primary-button",onClick:K[1]||(K[1]=F=>ae())}," Load More ",512),[[U,e(k).showLoadMore]]),n("div",na,[n("button",{class:"cancel-button",onClick:K[2]||(K[2]=F=>me())},g(N.$t("cancel")),1),n("button",{class:"primary-button",onClick:K[3]||(K[3]=F=>ke())},g(N.$t("save")),1)])],512),[[U,!e(w)&&!e(C)&&!e(f)]])])]),_(Me,{loading:e(w),empty:e(C),error:e(f),fetch:y},null,8,["loading","empty","error"])])]))}},ia=_e(la,[["__scopeId","data-v-956ee988"]]),ca={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},da=["innerHTML"],ua={class:"flex flex-row justify-end gap-2"},ma={__name:"ConfirmationDialog",props:{modalId:{type:String,default:"confirmation-dialog-modal"},message:{type:String,default:"Are you sure?"},onAccept:{type:Function,default:()=>{}}},emits:"onAccept",setup(i,{emit:s}){const o=i,a=t=>{t&&s("onAccept",!0),X().closeModal(o.modalId)};return(t,r)=>(b(),$("div",null,[n("div",ca,[n("p",{innerHTML:i.message,class:"mb-4"},null,8,da),n("div",ua,[n("button",{class:"cancel-button",onClick:r[0]||(r[0]=l=>a(!1))},g(t.$t("no")),1),n("button",{class:"danger-button",onClick:r[1]||(r[1]=l=>a(!0))},g(t.$t("yes")),1)])])]))}};const It=i=>(bt("data-v-9136ce58"),i=i(),kt(),i),pa={class:"opt-modal modal-layer"},ha={class:"opt-modal__title"},wa={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},va={class:"opt-modal__content"},fa={class:"report"},ga={class:"report__reason_opt"},ya={class:"report__title"},ba=["onClick"],ka={class:"report__title"},_a=["placeholder"],xa={class:"report__buttons"},Ca={class:"text-justify"},$a={class:"mt-2"},Ra=It(()=>n("i",null,"Your report ID:",-1)),Ia=It(()=>n("i",null,"Report date:",-1)),Aa={__name:"ReportModal",props:{type:{type:String,default:""},postId:{type:Number,default:0},reportStatus:{type:Object,default:()=>{}}},setup(i){const s=i,{oApiConfiguration:o,fetchOptions:a}=q(),t=$t(o,a()),r=R(["stolen","spam","hateSpeech","harassment","falseInfo","suicide","terrorism","aiGeneratedArt","somethingElse"]),l=R({selectedReasons:[],reasonDescription:"",enableSubmit:at(()=>l.value.selectedReasons.length>0&&l.value.reasonDescription!=="")}),m=k=>{if(!l.value.selectedReasons.includes(k))l.value.selectedReasons.push(k);else{const w=l.value.selectedReasons.indexOf(k);l.value.selectedReasons.splice(w,1)}},h=R(!1),d=R({}),p=async()=>{h.value=!1,d.value={};const[k,w,f]=await t.createNewReport({type:s.type,postId:s.postId,reasons:l.value.selectedReasons.join(","),description:l.value.reasonDescription});f&&!k||(h.value=!0,d.value=w)},y=()=>{X().closeModal("report-modal"),v()},v=()=>{l.value.selectedReasons=[],l.value.reasonDescription="",h.value=!1};return(k,w)=>{const f=Le;return b(),$("div",null,[n("div",pa,[n("div",ha,[n("h1",null,g(e(h)?k.$t("reports.reportSubmitted"):i.reportStatus.id?k.$t("reports.alreadyReported"):k.$t("reports.title")),1),n("div",wa,[n("div",{class:"modal-close",onClick:w[0]||(w[0]=C=>y())},[_(L,{name:"i-ion-close",class:"text-2xl"})])])]),n("div",va,[P(n("div",fa,[n("div",ga,[n("div",ya,g(k.$t("reports.selectReasons")),1),(b(!0),$(ve,null,be(e(r),C=>(b(),$("span",{key:C,class:z([e(l).selectedReasons.includes(C)?"button-color":"theme-color-secondary"]),onClick:O=>m(C)},[n("div",null,[P(_(L,{name:"i-ion-square-outline",class:"text-color-secondary"},null,512),[[U,!e(l).selectedReasons.includes(C)]]),P(_(L,{name:"i-ion-checkbox-outline",class:"text-green-300"},null,512),[[U,e(l).selectedReasons.includes(C)]])]),n("div",{class:z(["reason",[e(l).selectedReasons.includes(C)?"text-white":"text-color-secondary"]])},g(k.$t("reports.reasons."+C)),3)],10,ba))),128))]),n("div",null,[n("div",ka,g(k.$t("reports.describeReason")),1),P(n("textarea",{"onUpdate:modelValue":w[1]||(w[1]=C=>e(l).reasonDescription=C),class:"report__reason_description",placeholder:k.$t("reports.describeText"),cols:"5",rows:"5"},null,8,_a),[[Oe,e(l).reasonDescription]])]),n("div",xa,[n("button",{class:"cancel-button",onClick:w[2]||(w[2]=C=>y())},g(k.$t("cancel")),1),n("button",{class:z(e(l).enableSubmit?"primary-button":"disabled-button"),onClick:w[3]||(w[3]=C=>e(l).enableSubmit?p():null)},g(k.$t("report")),3)])],512),[[U,!e(h)&&!i.reportStatus.id]]),P(n("div",null,[n("div",Ca,g(k.$t("reports.reportSubmittedMessage")),1),n("div",$a,[n("div",null,[Ra,T("\xA0 "),n("b",null,"#"+g(e(d).id),1)]),n("div",null,[Ia,T("\xA0 "),n("b",null,g(k.formatDate(e(d).created_at)),1)])])],512),[[U,e(h)]]),P(n("div",null,[T(g(k.$t("reports.alreadyReportedDescription"))+" ",1),_(f,{class:"underline href",to:"/reports"},{default:D(()=>[T(g(k.$t("reports.reportStatus")),1)]),_:1})],512),[[U,i.reportStatus.id]])])])])}}},Sa=_e(Aa,[["__scopeId","data-v-9136ce58"]]),Pa={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},La={class:"title"},Ua={class:"mt-2"},Va={class:"alert-success"},Oa={class:"italic"},Ea={class:"flex flex-row p-2 mb-2 text-white rounded-md button-color"},Ta=["placeholder"],Ma={class:"flex flex-row gap-2 justify-end"},qa={class:"flex flex-row justify-between mt-6"},Ba=["value"],ja={__name:"ShareArtworkToFeedModal",props:{postId:{type:Number,default:0}},setup(i){const s=i,{oApiConfiguration:o,fetchOptions:a}=q(),t=cs(o,a()),r=_t(),l=()=>{h.value=""},m=()=>{d.value=!1,p.value=!1,y.value=!1,X().closeModal("share-to-feed-modal"),l()},h=R(""),d=R(!1),p=R(!1),y=R(!1),v=async()=>{d.value=!1,p.value=!0,y.value=!1;const[C,O,V]=await t.shareArtworkToFeed({text:h.value,workId:s.postId});C?(y.value=!0,setTimeout(()=>{m()},500)):d.value=!0,p.value=!1},k=R(!1);let w;const f=C=>{const O=R(C),{copy:V}=Rt({source:O});V(),nt().splash(w,k,"copy-alert")};return(C,O)=>(b(),$("div",null,[n("div",Pa,[n("span",La,g(C.$t("feeds.share.artwork.title")),1),n("div",Ua,[P(n("div",Va,[n("span",Oa,g(C.$t("feeds.share.artwork.success")),1)],512),[[U,e(y)]]),P(n("div",Ea,[_(Fe,{class:"mr-2"}),T(" "+g(C.$t("feeds.form.postingYourUpdate")),1)],512),[[U,e(p)]]),P(n("div",{class:"alert-danger"},g(C.$t("feeds.form.postFailure")),513),[[U,e(d)]]),P(n("textarea",{"onUpdate:modelValue":O[0]||(O[0]=V=>He(h)?h.value=V:null),class:"input form-input textarea",placeholder:C.$t("typeSomething"),cols:"30",rows:"2","data-gramm":"false",maxlength:"2000"},null,8,Ta),[[Oe,e(h)]]),n("div",Ma,[n("button",{class:"cancel-button",onClick:O[1]||(O[1]=V=>m())},g(C.$t("cancel")),1),n("button",{class:z(["primary-button"]),onClick:O[2]||(O[2]=V=>v())},g(C.$t("share")),1)]),n("div",qa,[n("input",{readonly:"",value:e(r).public.appUrl+"/a/"+s.postId,class:"p-3 w-full rounded-md theme-color-secondary"},null,8,Ba),n("button",{class:"icon-button",onClick:O[3]||(O[3]=V=>f(e(r).public.appUrl+"/a/"+i.postId))},[_(L,{name:"i-icon-park-outline-copy"})])])])]),P(_(lt,{id:"copy-alert",text:C.$t("linkCopied"),icon:"i-bi-check-all"},null,8,["text"]),[[U,e(k)]])]))}},Da={class:"w-full modal-layer xl:w-3/12 lg:w-2/5"},Fa={class:"flex flex-row justify-between w-full"},Ha={class:"title"},Na={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},za={class:"grid overflow-y-scroll gap-2 pr-2 max-h-96 grid-cols"},Qa=["src"],Wa=["to"],Ja={class:"mx-auto text-center"},Ga={class:"mx-auto text-center"},Ya={class:"mx-auto text-center"},Ka={__name:"UserLiked",props:{modalId:{type:String,default:"user-liked-modal"},workId:{type:Number,default:0}},setup(i){const s=i,{oApiConfiguration:o,fetchOptions:a}=q(),t=Te(o,a()),r=R({pagination:{page:0,perPage:10}}),l=R([]),m=async({loaded:d})=>{const[p,y]=await t.viewWhoLikedTheArtwork({workId:s.workId,pagination:{page:r.value.pagination.page,perPage:r.value.pagination.perPage}});if(!y){r.value.pagination.page+=1;for(let v=0;v<p.length;v++){const k=p[v];l.value.push(k)}}d(p.length,r.value.pagination.perPage)},h=()=>{X().closeModal(s.modalId)};return(d,p)=>{const y=Le,v=Ct;return b(),$("div",null,[n("div",Da,[n("div",Fa,[n("div",Ha,g(d.$t("artworks.usersLiked")),1),n("div",Na,[n("div",{class:"modal-close",onClick:p[0]||(p[0]=k=>h())},[_(L,{name:"i-majesticons-close",class:"text-2xl"})])])]),n("div",za,[(b(!0),$(ve,null,be(e(l),(k,w)=>(b(),se(y,{key:k.id,to:"/u/"+k.users.username,class:"flex flex-row gap-2 p-2 rounded-md theme-color-secondary hover:button-color hover:text-white img-hover"},{default:D(()=>[n("img",{preload:"",loading:"lazy",class:"w-10 h-10 avatar",src:d.avatarCoverUrl(k.users.avatar_bucket,k.users.avatar_filename),onError:p[1]||(p[1]=(...f)=>d.imageLoadError&&d.imageLoadError(...f))},null,40,Qa),n("span",{to:"/u/"+k.users.username,class:"font-bold leading-10"},g(k.users.name),9,Wa)]),_:2},1032,["to"]))),128)),_(v,null,{default:D(()=>[_(e(xt),{load:m},{loading:D(()=>[n("div",Ja,[_(L,{name:"i-line-md-loading-twotone-loop",class:"text-3xl"})])]),"no-results":D(()=>[n("div",Ga,g(d.$t("users.nothingToShow")),1)]),"no-more":D(()=>[n("div",Ya,g(d.$t("youHaveReachedTheEnd")),1)]),_:1})]),_:1})])])])}}},Za={class:"w-full modal-layer xl:w-3/12 lg:w-2/5"},Xa={class:"flex flex-row justify-between w-full"},eo={class:"title"},to={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},so={class:"grid overflow-y-scroll gap-2 pr-2 max-h-96 grid-cols"},ao=["src"],oo=["to"],ro={class:"mx-auto text-center"},no={class:"mx-auto text-center"},lo={class:"mx-auto text-center"},io={__name:"UserShared",props:{modalId:{type:String,default:"user-shared-modal"},workId:{type:Number,default:0}},setup(i){const s=i,{oApiConfiguration:o,fetchOptions:a}=q(),t=Te(o,a()),r=R({pagination:{page:0,perPage:10}}),l=R([]),m=async({loaded:d})=>{const[p,y]=await t.viewWhoSharedTheArtwork({workId:s.workId,pagination:{page:r.value.pagination.page,perPage:r.value.pagination.perPage}});if(!y){r.value.pagination.page+=1;for(let v=0;v<p.length;v++){const k=p[v];l.value.push(k)}}d(p.length,r.value.pagination.perPage)},h=()=>{X().closeModal(s.modalId)};return(d,p)=>{const y=Le,v=Ct;return b(),$("div",null,[n("div",Za,[n("div",Xa,[n("div",eo,g(d.$t("artworks.usersShared")),1),n("div",to,[n("div",{class:"modal-close",onClick:p[0]||(p[0]=k=>h())},[_(L,{name:"i-majesticons-close",class:"text-2xl"})])])]),n("div",so,[(b(!0),$(ve,null,be(e(l),(k,w)=>(b(),se(y,{key:k.id,to:"/u/"+k.users.username,class:"flex flex-row gap-2 p-2 rounded-md theme-color-secondary hover:button-color hover:text-white img-hover"},{default:D(()=>[n("img",{preload:"",loading:"lazy",class:"w-10 h-10 avatar",src:d.avatarCoverUrl(k.users.avatar_bucket,k.users.avatar_filename),onError:p[1]||(p[1]=(...f)=>d.imageLoadError&&d.imageLoadError(...f))},null,40,ao),n("span",{to:"/u/"+k.users.username,class:"font-bold leading-10"},g(k.users.name),9,oo)]),_:2},1032,["to"]))),128)),_(v,null,{default:D(()=>[_(e(xt),{load:m},{loading:D(()=>[n("div",ro,[_(L,{name:"i-line-md-loading-twotone-loop",class:"text-3xl"})])]),"no-results":D(()=>[n("div",no,g(d.$t("users.nothingToShow")),1)]),"no-more":D(()=>[n("div",lo,g(d.$t("youHaveReachedTheEnd")),1)]),_:1})]),_:1})])])])}}};const co={id:"lists"},uo={key:0},mo={__name:"RelatedArtworks",props:{workId:{type:Number,default:0},view:{type:Function,default:()=>{}},isModal:{type:Boolean,default:!0}},setup(i){const s=i,{oApiConfiguration:o,fetchOptions:a}=q(),t=Te(o,a());Ee(()=>{setTimeout(()=>{l()},2e3)});const r=R({loadings:{first:!0,loading:!0},data:[],options:{isEmpty:!1,isError:!1,paginations:{page:0,perPage:12,showLoadMore:!0}}}),l=async()=>{r.value.loadings.loading=!0,r.value.options.isError=!1,r.value.options.isEmpty=!1;const[h,d,p]=await t.getRelatedArtworks({workId:s.workId,pagination:{page:r.value.options.paginations.page,perPage:r.value.options.paginations.perPage}});if(p)r.value.options.isError=!0;else if(r.value.options.paginations.page==0&&!h.length)r.value.options.isEmpty=!0;else{for(let y=0;y<h.length;y++)r.value.data.push(h[y]);d.next_previous.next_page==null&&(r.value.options.paginations.showLoadMore=!1),r.value.options.paginations.page+=1}r.value.options.paginations.page==1&&(r.value.loadings.first=!1),r.value.loadings.loading=!1},m=()=>{l()};return(h,d)=>(b(),$("div",co,[_(Me,{loading:e(r).loadings.first,empty:e(r).options.isEmpty,error:e(r).options.isError,fetch:l,"background-color":i.isModal?"theme-color-secondary":"theme-color",class:"mt-2"},null,8,["loading","empty","error","background-color"]),e(r).loadings.first?A("",!0):(b(),$("div",uo,[e(r).options.isEmpty?A("",!0):(b(),se(rt,{key:0,"section-class":"work-grid",view:i.view,works:e(r).data,"is-href":!i.isModal,"direct-open":!0},null,8,["view","works","is-href"])),P(n("div",{class:z(["primary-button",e(r).loadings.loading?"animate-pulse":""]),onClick:m},g(h.$t("loadMore")),3),[[U,e(r).options.paginations.showLoadMore]])]))]))}},po=_e(mo,[["__scopeId","data-v-1e285ebc"]]);const Qe=i=>(bt("data-v-d0277ca1"),i=i(),kt(),i),ho={class:"mx-auto w-full align-middle md:w-1/2"},wo={class:"flex flex-col w-full lg:flex-row"},vo={class:"left-side"},fo={key:0,class:"text-right"},go={key:1,class:"p-4 mb-4 w-full text-center text-black bg-yellow-200 rounded-md theme-color-secondary"},yo={class:"flex flex-row justify-center mb-2"},bo={class:"font-bold cursor-pointer"},ko={class:"mr-2 font-normal"},_o={class:"italic"},xo={key:2,class:"alert-success"},Co={key:0,class:"mr-4"},$o={key:1,class:"mr-4"},Ro={class:"image-list"},Io={key:0,class:"flex flex-row mb-2"},Ao=["src"],So={class:"font-bold"},Po=["src"],Lo={class:"font-bold"},Uo={class:"flex flex-row gap-2"},Vo={key:0,class:"sticky top-0 flex-col gap-2 w-1/6 hidden-md-flex"},Oo={class:"sticky top-0"},Eo=["href"],To=["src"],Mo=["id","src","data-source"],qo={class:"flex flex-row gap-2 mb-4"},Bo={key:1,class:z(["py-2 px-3 font-bold rounded-md bg-red-400 text-white"])},jo={key:2,class:"flex flex-row p-2 rounded-full theme-colored"},Do={class:"interactions"},Fo={class:"reaction-counters"},Ho={class:"counter"},No={key:0,class:"reactions"},zo={key:0},Qo={key:0},Wo={key:3},Jo={class:"inline-block relative z-30 dropdown"},Go={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options"},Yo={class:"invisible rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 dropdown-menu"},Ko={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 p-1 mt-2 w-56 rounded-md shadow-lg origin-top-right outline-none theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},Zo={key:2,class:"custom-divider"},Xo={key:4,class:"custom-divider"},er=["to"],tr={class:"right-side"},sr={key:1},ar={class:"mb-2 italic title"},or={key:0,class:"flex flex-row gap-2"},rr=["href"],nr={key:0},lr=["src"],ir={class:"w-2/3"},cr={class:"title"},dr=["innerHTML"],ur={key:2,class:"custom-divider"},mr={key:3,class:"flex flex-col gap-4"},pr={class:"section-title"},hr={key:0,class:"flex flex-row gap-2 justify-between w-full"},wr={key:1},vr={key:2},fr={class:"title"},gr={key:0,class:"w-1/3"},yr=["src"],br={class:"w-2/3"},kr={class:"title"},_r=["innerHTML"],xr={class:"italic"},Cr=Qe(()=>n("div",{class:"custom-divider"},null,-1)),$r={class:"comments"},Rr={key:0,class:"comment-box"},Ir={class:"flex flex-col"},Ar={class:"flex relative flex-col"},Sr=["readonly","rows","placeholder"],Pr={key:1,class:"p-4 mb-4 text-center rounded-md theme-color-secondary"},Lr={id:"comments",class:"comment-content"},Ur={class:"flex flex-row justify-end mb-2"},Vr={key:0},Or=["src"],Er={class:"w-full"},Tr={class:"flex justify-between"},Mr={class:"comment-time"},qr={class:"mt-4 reactions"},Br=["onClick"],jr={key:0},Dr={key:0,class:"flex flex-row"},Fr=["onClick"],Hr=["onClick"],Nr={class:"inline-block relative ml-2 dropdown"},zr={class:"invisible z-50 rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 cursor-pointer dropdown-menu"},Qr={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 p-1 mt-2 w-56 rounded-md border shadow-lg origin-top-right outline-none border-color theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},Wr=["onClick"],Jr={key:0,class:"-mb-4 comment-box"},Gr={class:"flex flex-col"},Yr={class:"flex relative flex-col"},Kr=["id","readonly","rows","placeholder"],Zr=["onClick"],Xr=["id"],en={key:0,class:"w-full"},tn={class:"float-left mb-2 text-xs italic text-color-secondary"},sn=["onClick"],an={class:"flex flex-row justify-between"},on=["src"],rn={class:"transition-all duration-150 cursor-pointer hover:font-bold"},nn={class:"leading-6 comment-time"},ln={class:"mt-2"},cn={key:0,class:"mt-2 reactions"},dn=Qe(()=>n("span",null,null,-1)),un={class:"flex flex-row"},mn=["onClick"],pn={class:"inline-block relative ml-2 dropdown"},hn={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options"},wn={class:"invisible z-50 rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 cursor-pointer dropdown-menu"},vn={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 z-50 p-1 mt-2 w-56 rounded-md border shadow-lg origin-top-right outline-none border-color theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},fn=["onClick"],gn=["onClick"],yn={key:3,class:"mt-4 w-full text-xs italic text-center"},bn=Qe(()=>n("div",{class:"custom-divider"},null,-1)),kn={class:"mt-4 w-full"},_n=Qe(()=>n("div",{class:"section-title"},"Similar Artworks",-1)),xn={__name:"ModalView",props:{id:{type:Number,default:0},section:{type:String,default:""}},emits:["setMeta","stopLoading","showEmpty","showError"],setup(i,{expose:s,emit:o}){const a=i,t=ot(),{oApiConfiguration:r,fetchOptions:l}=q(),{applyExplicitFilter:m,removeExplicitFilter:h,generateSemiCompressedArtworkUrl:d}=ss(),p=Te(r,l()),y=$t(r,l()),v=_t(),{$router:k}=as(),w=gt();os(()=>w.query,()=>{setTimeout(()=>{f(),X().closeModal("collection-selection-modal"),X().closeModal("album-selection-modal"),X().closeModal("report-modal")},1)}),Ee(()=>{a.id!==0&&me(a.id),window.addEventListener("keydown",c=>{const u=document.getElementById("collection-selection-modal"),S=document.getElementById("album-selection-modal"),j=document.getElementById("report-modal"),ne=document.querySelectorAll(".viewer-in");c.key==="Escape"&&(!u||u.style.display!="flex")&&(!S||S.style.display!="flex")&&(!j||j.style.display!="flex")&&!ne.length&&f()})});const f=()=>{X().closeModal(`${a.section}-modal`)},C=R(!1),O=()=>{C.value=!1,h()},V=a.id===0,Z=async c=>{await p.incraseViewCount(c)},W=R(!1),ae=R(!0),x=R({}),J=R(!1),le=R(!1),ke=R(!1),ie=R([]),me=async c=>{ee.value="",oe.value=[],fe.value=[],ae.value=!0;const[u,S]=await p.getWorkById(c);S?S=="Work not found"?o("showEmpty"):o("showError"):(x.value=u,ie.value=[],u.artwork_assets.forEach(ne=>{ie.value.push({thumbnail:d(ne.bucket,ne.filename,!0),source:d(ne.bucket,ne.filename,!1)})}),!t.loggedIn&&u.is_explicit||u.is_explicit&&!t.user.user_settings.show_explicit||u.is_gore&&!t.user.user_settings.show_gore?(C.value=!0,m()):C.value=!1,J.value=u.liked,le.value=u.saved,ke.value=u.in_album,pt().formatApiToWeb(u.scheduled_post)<pt().currentUtcTime()?(await At(c),t.loggedIn&&await K(c),(!t.loggedIn||t.user.id!==u.users.id)&&await Z(c),u.redraw_of&&ts(u.redraw_of),await Zt(),await Xt(u.id),t.loggedIn&&await es(u.id)):t.user.id!==u.users.id?k.push("/"):W.value=!0,a.id!==0&&o("setMeta",{title:x.value.title})),ae.value=!1,o("stopLoading")},N=R({}),K=async c=>{const[u,S]=await y.getReportStatus({type:"artwork",postId:c});S||(u.length?N.value=u[0]:N.value={})},F=async()=>{const[c,u]=await p.like({workId:x.value.id});if(c){J.value=!0;const S=document.getElementById("like-button");S.classList.add("animate-bounce"),setInterval(()=>{S.classList.remove("animate-bounce")},2500)}},E=()=>{X().openModal("user-liked-modal")},B=()=>{X().openModal("user-shared-modal")},Q=async()=>{const[c,u]=await p.unlike({workId:x.value.id});c&&(J.value=!1)},oe=R([]),Ie=st({perPage:3,page:0}),Ue=R([]),it=async c=>{const[u,S]=await p.getComments({workId:c,pagination:{page:Ie.page,perPage:Ie.perPage}});if(u)return u.pagination.current_page===u.pagination.first_last.last_page?qe.value=!1:qe.value=!0,u.comments.forEach(j=>{j.liked&&xe.value.push(j.id),Ue.value.push(j.id)}),u.comments},At=async c=>{try{(await it(c)).forEach(S=>oe.value.push(S))}catch{}},qe=R(!1),St=async c=>{try{Ie.page+=1,(await it(c)).forEach(S=>oe.value.push(S))}catch{}},ee=R(),We=200,Pt=at(()=>ee.value!=null&&ee.value!==""?We-ee.value.length:We),Ae=R(!1),Lt=async()=>{Ae.value=!0;try{const[c,u,S]=await p.addComment({workId:x.value.id,comment:ee.value});c&&(ee.value="",oe.value.splice(0,0,u),oe.value.join(),Ue.value.splice(0,0,u.id),Ue.value.join())}catch{}Ae.value=!1},Ut=async c=>{const[u,S]=await p.deleteComment({commentId:c});if(u){const j=Ue.value.indexOf(c);oe.value.splice(j,1),Ue.value.splice(j,1)}},xe=R([]),Vt=async c=>{const[u,S]=await p.likeComment({commentId:c});if(u){xe.value.push(c);const j=document.getElementById(`comment-like-button-${c}`);j.classList.add("animate-bounce"),setInterval(()=>{j.classList.remove("animate-bounce")},2500)}},Ot=async c=>{const[u,S]=await p.unlikeComment({commentId:c});if(u){const j=xe.value.indexOf(c);xe.value.splice(j,1)}},Je=st({perPage:2,page:0}),fe=R([]),Se=R([]),Ge=R(!0),ct=async c=>{const[u,S,j]=await p.getCommentReplies({commentId:c,pagination:{page:Je.page,perPage:Je.perPage}});if(!j)return S.current_page===S.first_last.last_page&&(Ge.value=!1),u.map(ne=>Se.value.push(ne.id)),u},Ve=R(0),Ye=async c=>{Ge.value=!0,Se.value=[];try{const u=await ct(c);fe.value={[c]:u},u.forEach(j=>{j.liked&&Ce.value.push(j.id)}),Ve.value&&Ke(Ve.value);const S=document.getElementById(`comment-replies-${c}`);S.classList.add("flex"),S.classList.remove("hidden"),Ve.value=c}catch{}},Ke=c=>{const u=document.getElementById(`comment-replies-${c}`);u.classList.remove("flex"),u.classList.add("hidden"),Ve.value=0},Et=async c=>{Je.page+=1;try{(await ct(c)).forEach(S=>{fe.value[c].push(S)})}catch{}},Be=R(0),Tt=async c=>{await Ye(c),Be.value=c},re=R(),Ze=200,Mt=at(()=>re.value!=null&&re.value!==""?Ze-re.value.length:Ze),Pe=R(!1),qt=async c=>{Pe.value=!0;try{const[u,S,j]=await p.addReply({commentId:c,reply:re.value});u&&(Ye(c),re.value="",fe.value[c].splice(0,0,S),fe.value[c].join(),Be.value=0,Se.value.splice(0,0,S.id),Se.value.join())}catch{}Pe.value=!1},Bt=async(c,u)=>{const[S,j]=await p.deleteReply({replyId:u});if(S){const ne=Se.value.indexOf(u);fe.value[c].splice(ne,1),Se.value.splice(ne,1)}},Ce=R([]),jt=async c=>{const[u,S]=await p.likeReply({replyId:c});if(u){Ce.value.push(c);const j=document.getElementById(`reply-like-button-${c}`);j.classList.add("animate-bounce"),setInterval(()=>{j.classList.remove("animate-bounce")},2500)}},Dt=async c=>{const[u,S]=await p.unlikeReply({replyId:c});if(u){const j=Ce.value.indexOf(c);Ce.value.splice(j,1)}},Xe=R(!1),et=R(!1),dt=async c=>{const[u,S]=await p.deleteWork({workId:[c]});u&&(et.value=!0,setTimeout(()=>{k.push("/")},1500))},tt=R(null),Ft=()=>{X().openModal("collection-selection-modal"),tt.value.fetchCollection(),tt.value.fetchCurrentSaved()},Ht=c=>{c?le.value=!1:le.value=!0,ht().animate("save-to-collection-button")},ut=R(null),Nt=()=>{X().openModal("album-selection-modal"),ut.value.fetchCurrentSaved()},zt=c=>{c?ke.value=!1:ke.value=!0,ht().animate("save-to-album-button")},Qt=()=>{X().openModal("share-to-feed-modal")},mt=R(!1);let Wt;const Jt=c=>{const u=R(v.public.appUrl+c),{copy:S}=Rt({source:u});S(),nt().splash(Wt,mt,"copy-alert")},Gt=R(null),Yt=()=>{X().openModal("report-modal")},je=rs().isMobile()?19:25,Kt=R(0),Zt=async()=>{const[c,u]=await p.countRedraws(x.value.id);Kt.value=c},pe=R({data:[],pagination:{}}),Xt=async c=>{const[u,S,j]=await p.getRedraws({workId:c,pagination:{page:0,perPage:8}});j||(pe.value.data=u,pe.value.pagination=S)},ce=R({}),es=async c=>{const[u,S]=await p.getMyRedraw({workId:c});S||(ce.value=u)},te=R({}),De=R(!0),ts=async c=>{De.value=!0;const[u,S]=await p.getWorkById(c);S||(te.value=u),De.value=!1};return s({view:me}),(c,u)=>{const S=Le,j=ns("viewer"),ne=ls("auto-animate");return b(),$(ve,null,[P(n("div",ho,[_(Me,{loading:e(ae)},null,8,["loading"])],512),[[U,e(ae)&&V]]),P(n("div",{class:z(["work-container work-view",{"2xl:w-4/6 2xl:mx-auto p-2 md:p-6 overflow-y-scroll theme-color":V}])},[n("div",wo,[n("div",vo,[V&&c.isMobileDevice()?(b(),$("div",fo,[_(L,{name:"i-ion-close-outline","text-size":"text-3xl",onClick:u[0]||(u[0]=I=>c.closeModal(i.section+"-modal"))})])):A("",!0),e(W)&&!e(et)?(b(),$("div",go,[n("div",yo,[_(L,{name:"i-ion-alert-outline"}),n("div",null,g(c.$t("artworks.previewModeMessage")),1)]),n("div",bo,[n("span",{class:"text-red-500",onClick:u[1]||(u[1]=I=>Xe.value=!0)},g(c.$t("artworks.deleteArtwork")),1),P(n("div",null,[n("span",ko,[T(g(c.$t("alert.areYouSure"))+" ",1),n("span",_o,"("+g(c.$t("alert.youCannotUndoThisAction"))+")",1)]),n("span",{class:"mr-2 text-red-500 hover:underline",onClick:u[2]||(u[2]=I=>dt(e(x).id))},g(c.$t("yes")),1),n("span",{class:"hover:underline",onClick:u[3]||(u[3]=I=>Xe.value=!1)},g(c.$t("no")),1)],512),[[U,e(Xe)]])])])):A("",!0),e(et)?(b(),$("div",xo,g(c.$t("artworks.successDelete")),1)):A("",!0),P(n("div",{class:z(["flex flex-row justify-between p-3 mb-2 text-black align-middle rounded",e(x).is_gore?"bg-red-200":"bg-yellow-200"])},[e(x).is_explicit&&!e(x).is_gore?(b(),$("span",Co,g(e(t).loggedIn?c.$t("explicitContentAlert"):c.$t("explicitContentAlertForGuest")),1)):A("",!0),e(x).is_gore?(b(),$("span",$o,g(e(t).loggedIn?c.$t("goreContentAlert"):c.$t("goreContentAlertForGuest")),1)):A("",!0),n("button",{class:"light-bordered-button",onClick:u[4]||(u[4]=Re(I=>O(),["prevent"]))},g(c.$t("show")),1)],2),[[U,e(C)]]),n("div",Ro,[e(x).redraw_of&&!e(De)?(b(),$("div",Io,[_(S,{to:"/a/"+e(te).id,class:"inline-block z-10 flex-row gap-2 p-1 pr-6 rounded-l-md rounded-r-full theme-colored hover:cursor-pointer"},{default:D(()=>[n("img",{preload:"",loading:"lazy",class:"inline-block mr-2 w-8 rounded-md",src:c.artworkThumb(e(te).artwork_assets[0].bucket,e(te).artwork_assets[0].filename,"thumbnail",!1),onError:u[5]||(u[5]=(...I)=>c.imageLoadError&&c.imageLoadError(...I))},null,40,Ao),n("span",So,g(e(te).title.length>e(je)?e(te).title.slice(0,e(je))+"..":e(te).title),1)]),_:1},8,["to"]),n("div",{class:z(["inline-block flex-row gap-2 p-1 pr-2 pl-6 -ml-4 rounded-md",V?"theme-color-secondary":"theme-color"])},[n("img",{preload:"",loading:"lazy",class:"inline-block mr-2 w-8 rounded-md",src:c.artworkThumb(e(x).artwork_assets[0].bucket,e(x).artwork_assets[0].filename,"thumbnail",!1),onError:u[6]||(u[6]=(...I)=>c.imageLoadError&&c.imageLoadError(...I))},null,40,Po),n("span",Lo,g(e(x).title.length>e(je)?e(x).title.slice(0,e(je))+"..":e(x).title),1)],2)])):A("",!0),n("div",Uo,[!V&&!e(C)?(b(),$("div",Vo,[n("div",Oo,[(b(!0),$(ve,null,be(e(ie),(I,M)=>(b(),$("a",{key:c.image,href:"#image_"+M,class:"cursor-pointer"},[n("img",{preload:"",loading:"lazy",src:I.thumbnail,onError:u[7]||(u[7]=(...$e)=>c.imageLoadError&&c.imageLoadError(...$e)),class:"mb-2 rounded-md hover:shadow-md"},null,40,To)],8,Eo))),128))])])):A("",!0),_(j,{options:{url:"data-source"},images:e(ie),class:"overflow-hidden w-full rounded-md"},{default:D(()=>[(b(!0),$(ve,null,be(e(ie),(I,M)=>(b(),$("img",{key:I.thumbnail,id:"image_"+M,preload:"",loading:"lazy",src:I.thumbnail,"data-source":I.source,class:z(["overflow-hidden mb-2 rounded cursor-pointer image image-layer unselectable w-full",{"blur-lg unclickable":e(C)},e(C)?"brightness-50":"brightness-100"]),onError:u[8]||(u[8]=(...$e)=>c.imageLoadError&&c.imageLoadError(...$e))},null,42,Mo))),128))]),_:1},8,["images"])])]),n("div",qo,[e(x).is_explicit?(b(),$("div",{key:0,class:z(["py-2 px-3 font-bold rounded-md",V?"theme-color-secondary":"bg-tag"])}," E ",2)):A("",!0),e(x).is_gore?(b(),$("div",Bo," G ")):A("",!0),e(x).is_original_character?(b(),$("div",jo,[_(L,{name:"i-clarity-cursor-hand-click-line","text-size":"text-sm"}),T("\xA0 "+g(c.$t("artworks.originalCharacter")),1)])):A("",!0)]),n("div",Do,[n("div",Fo,[P(n("span",Ho,[_(L,{name:"i-mi-eye"}),n("b",null,g(c.shortNumber(e(x).views)),1)],512),[[U,e(x).views>0]]),e(x)._count?P((b(),$("span",{key:0,onClick:u[9]||(u[9]=I=>E()),class:"counter hover:href hover:underline"},[n("b",null,g(c.thousand(e(x)._count.artwork_likes)),1),T(" "+g(e(x)._count.artwork_likes>1?c.$t("count.likes"):c.$t("count.like")),1)],512)),[[U,e(x)._count.artwork_likes>0]]):A("",!0),e(x)._count?P((b(),$("span",{key:1,onClick:u[10]||(u[10]=I=>B()),class:"counter hover:href hover:underline"},[n("b",null,g(c.thousand(e(x)._count.feeds)),1),T(" "+g(c.$t("count.share")),1)],512)),[[U,e(x)._count.feeds>0]]):A("",!0)]),e(W)?A("",!0):(b(),$("div",No,[e(t).loggedIn?(b(),$("span",zo,[n("span",{onClick:u[11]||(u[11]=I=>e(J)?Q():F())},[P(_(L,{id:"like-button",name:"i-ion-heart",class:"text-red-500 hover:text-red-500"},null,512),[[U,e(J)]]),P(_(L,{name:"i-ri-heart-3-line",class:"hover:text-red-500"},null,512),[[U,!e(J)]])])])):A("",!0),e(t).loggedIn?(b(),$("span",{key:1,onClick:u[12]||(u[12]=I=>Ft())},[P(_(L,{id:"save-to-collection-button",name:"i-majesticons-bookmark",class:"text-blue-500 hover:text-blue-500"},null,512),[[U,e(le)]]),P(_(L,{name:"i-majesticons-bookmark-line",class:"hover:text-blue-500"},null,512),[[U,!e(le)]]),e(x)._count&&e(x)._count.collection_has_artworks?(b(),$("span",Qo,g(c.thousand(e(x)._count.collection_has_artworks)),1)):A("",!0)])):A("",!0),e(t).loggedIn&&e(x).users&&e(t).user.id===e(x).users.id?(b(),$("span",{key:2,onClick:u[13]||(u[13]=I=>Nt())},[P(_(L,{id:"save-to-album-button",name:"i-ion-folder-open",class:"text-green-500 hover:text-green-500"},null,512),[[U,e(ke)]]),P(_(L,{name:"i-bx-photo-album",class:"hover:text-blue-500"},null,512),[[U,!e(ke)]])])):A("",!0),e(t).loggedIn?(b(),$("span",Wo,[_(L,{name:"i-uil-share",onClick:u[14]||(u[14]=I=>Qt()),class:"hover:text-blue-500"})])):A("",!0),n("div",Jo,[n("button",Go,[n("span",null,[_(L,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),n("div",Yo,[n("div",Ko,[V?(b(),se(S,{key:0,to:"/a/"+e(x).id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:D(()=>[_(L,{name:"i-fluent-arrow-enter-20-filled",class:"mr-2 text-base"}),T(" "+g(c.$t("open")),1)]),_:1},8,["to"])):A("",!0),V?(b(),se(S,{key:1,to:"/a/"+e(x).id,target:"_blank",class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:D(()=>[_(L,{name:"i-ci-external-link",class:"mr-2 text-base"}),T(" "+g(c.$t("openInNewTab")),1)]),_:1},8,["to"])):A("",!0),V?(b(),$("div",Zo)):A("",!0),e(t).loggedIn&&e(x).users&&e(t).user.id!=e(x).users.id&&!e(t).user.is_admin&&!e(t).user.is_moderator?(b(),$("div",{key:3,to:"#",class:z(["flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",{"rounded-t-md":!V}]),onClick:u[15]||(u[15]=I=>Yt())},[_(L,{name:"i-akar-icons-flag",class:"mr-2 text-base"}),T(" "+g(c.$t("report")),1)],2)):A("",!0),n("div",{class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 cursor-pointer theme-color hover:button-color parent-icon hover:text-white",onClick:u[16]||(u[16]=I=>Jt("/a/"+e(x).id))},[_(L,{name:"i-icon-park-outline-copy",class:"mr-2 text-base"}),T(" "+g(c.$t("copySharableLink")),1)]),e(t).loggedIn&&e(x).users&&e(t).user.id===e(x).users.id?(b(),$("div",Xo)):A("",!0),e(t).loggedIn&&e(x).users&&e(t).user.id===e(x).users.id?(b(),se(S,{key:5,to:"/artworks/update/"+e(x).id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:D(()=>[_(L,{name:"i-ion-settings-outline",class:"mr-2 text-base"}),T(" "+g(c.$t("update")),1)]),_:1},8,["to"])):A("",!0),e(t).loggedIn&&e(x).users&&e(t).user.id===e(x).users.id?(b(),$("div",{key:6,to:"/a/"+e(x).id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 cursor-pointer bg-danger hover:button-color parent-icon hover:text-white",onClick:u[17]||(u[17]=I=>c.openModal("work-deletion-confirm-modal"))},[_(L,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),T(" "+g(c.$t("delete")),1)],8,er)):A("",!0)])])])]))]),_(wt,{section:i.section,class:"flex-md-hidden","is-modal":V,"artwork-detail":e(x),"preview-mode":e(W),"is-desktop":!0},null,8,["section","artwork-detail","preview-mode"]),e(ae)?A("",!0):(b(),se(vt,{key:3,class:"mb-6 hidden-md-flex","artwork-detail":e(x),view:me,"is-href":!V,"keep-artist-page-number":!0,"pagination-per-page":4},null,8,["artwork-detail","is-href","pagination-per-page"]))]),n("div",tr,[_(wt,{section:i.section,class:"hidden-md-flex","is-modal":V,"artwork-detail":e(x),"preview-mode":e(W),"is-desktop":!1},null,8,["section","artwork-detail","preview-mode"]),e(ae)?A("",!0):(b(),se(vt,{key:0,class:"flex-md-hidden","artwork-detail":e(x),view:me,"is-href":!V,"keep-artist-page-number":!0,"pagination-per-page":4},null,8,["artwork-detail","is-href","pagination-per-page"])),e(x).redraw_of?(b(),$("div",sr,[n("div",ar,g(c.$t("artworks.originalArtwork")),1),e(De)?(b(),$("div",or,[_(Fe),T(" "+g(c.$t("artworks.redrawOriginalLoading")),1)])):(b(),$("a",{key:1,href:"/a/"+e(x).redraw_of,target:"_blank",class:"flex flex-row gap-2 w-full"},[e(te).artwork_assets?(b(),$("div",nr,[n("img",{preload:"",loading:"lazy",class:"w-40 rounded-md",src:c.artworkThumb(e(te).artwork_assets[0].bucket,e(te).artwork_assets[0].filename,"thumbnail",!1),onError:u[18]||(u[18]=(...I)=>c.imageLoadError&&c.imageLoadError(...I))},null,40,lr)])):A("",!0),n("div",ir,[n("span",cr,g(e(te).title),1),n("p",{innerHTML:e(te).description.length>200?e(te).description.slice(0,200)+"..":e(te).description},null,8,dr)])],8,rr))])):A("",!0),e(x).allow_redraw?(b(),$("div",ur)):A("",!0),e(x).allow_redraw||e(pe).data&&e(pe).data.length?(b(),$("div",mr,[n("span",pr,g(c.$t("artworks.redraws"))+" ("+g(e(pe).pagination&&e(pe).pagination.record_total?e(pe).pagination.record_total:0)+") ",1),e(t).loggedIn&&!e(ce)?(b(),$("div",hr,[_(S,{to:"/post?redrawWorkId="+e(x).id,class:z([V?"secondary-button":"light-button"])},{default:D(()=>[_(L,{name:"i-typcn-brush"}),T(" "+g(c.$t("artworks.redrawThisArtwork")),1)]),_:1},8,["to","class"])])):A("",!0),e(pe).data&&e(pe).data.length?(b(),$("div",wr,[_(rt,{"section-class":"redraw-works",works:e(pe).data,view:me,"is-href":c.isHref,"is-mini-list":!0,"current-work-id":e(x).id,"direct-open":!0,"hide-redraw-icon":!0},null,8,["works","is-href","current-work-id"]),e(pe).pagination.next_previous.next_page?(b(),se(S,{key:0,to:"/a/"+e(x).id+"/redraws",class:"mt-2 primary-button"},{default:D(()=>[_(L,{name:"i-fluent-arrow-enter-20-filled",class:"mr-1 text-white hover:text-white"}),T(" "+g(c.$t("seeMore")),1)]),_:1},8,["to"])):A("",!0)])):A("",!0),e(t).loggedIn&&e(ce)?(b(),$("div",vr,[n("span",fr,g(c.$t("artworks.myRedraw")),1),_(S,{to:"/a/"+e(ce).id,class:"flex flex-row gap-2 mt-2 w-full"},{default:D(()=>[e(ce).artwork_assets?(b(),$("div",gr,[n("img",{preload:"",loading:"lazy",class:"w-40 rounded-md",src:c.artworkThumb(e(ce).artwork_assets[0].bucket,e(ce).artwork_assets[0].filename,"thumbnail",!1),onError:u[19]||(u[19]=(...I)=>c.imageLoadError&&c.imageLoadError(...I))},null,40,yr)])):A("",!0),n("div",br,[n("span",kr,g(e(ce).title),1),n("p",{innerHTML:e(ce).description?e(ce).description.length>100?e(ce).description.slice(0,100)+"..":e(te).description:c.$t("artworks.noDescription"),class:"mb-2"},null,8,_r),n("span",xr,g(c.formatDate(e(ce).scheduled_post)),1)])]),_:1},8,["to"])])):A("",!0)])):A("",!0),Cr,n("section",$r,[e(t).loggedIn&&!e(W)?(b(),$("div",Rr,[n("div",Ir,[n("div",Ar,[P(n("textarea",{"onUpdate:modelValue":u[20]||(u[20]=I=>He(ee)?ee.value=I:null),cols:"30","data-gramm":"false",class:z(["input form-input",{"cursor-not-allowed":e(Ae)},{"theme-color-secondary textarea":V}]),readonly:e(Ae),rows:e(ee)!=null&&e(ee)!=""?"4":"0",placeholder:c.$t("comments.inputPlaceholder"),maxlength:We},null,10,Sr),[[Oe,e(ee)]]),P(n("span",{class:"absolute left-4 bottom-6 py-1 px-2 text-white rounded-md button-color"},g(e(Pt)),513),[[U,e(ee)!=null&&e(ee)!=""]]),n("span",{class:"absolute right-2 bottom-5 py-1 px-2",onClick:u[21]||(u[21]=Re(I=>Lt(),["prevent"]))},[P(_(L,{name:"i-carbon-send-filled",class:"text-xl transition-all duration-100 cursor-pointer text-colored"},null,512),[[U,e(ee)!=null&&e(ee)!=""&&!e(Ae)]]),P(_(Fe,null,null,512),[[U,e(Ae)]])])])])])):A("",!0),e(t).loggedIn?A("",!0):(b(),$("div",Pr,g(c.$t("comments.loginOrRegisterToLeaveComment")),1)),n("div",Lr,[n("div",Ur,[e(x)._count&&e(x)._count.artwork_comments?(b(),$("div",Vr,[n("b",null,g(c.thousand(e(x)._count.artwork_comments)),1),T(" "+g(e(x)._count.artwork_comments>1?c.$t("count.comments"):c.$t("count.comment")),1)])):A("",!0)]),(b(!0),$(ve,null,be(e(oe),I=>P((b(),$("div",{key:I.id,class:"flex flex-row w-full comment-item"},[_(S,{class:"mr-2",to:"/u/"+I.users.username},{default:D(()=>[n("img",{class:"w-10 h-10 avatar",src:c.avatarCoverUrl(I.users.avatar_bucket,I.users.avatar_filename),onError:u[22]||(u[22]=(...M)=>c.imageLoadError&&c.imageLoadError(...M))},null,40,Or)]),_:2},1032,["to"]),n("div",Er,[n("div",{class:z(["p-3 w-full rounded-md",V?"theme-color-secondary":"theme-color"])},[n("div",Tr,[_(S,{to:"/u/"+I.users.username,class:"mb-2 text-xs font-semibold transition-all duration-150 cursor-pointer"},{default:D(()=>[T(g(I.users.name),1)]),_:2},1032,["to"]),n("div",Mr,g(c.formatDate(I.created_at,!0)),1)]),n("div",null,g(I.comment),1),n("div",qr,[n("div",{class:"cursor-pointer hover:underline",onClick:M=>e(Ve)==I.id?Ke(I.id):Ye(I.id)},[I._count.artwork_comment_has_replies>0?(b(),$("span",jr,[n("b",null,g(c.shortNumber(I._count.artwork_comment_has_replies)),1),T(" "+g(I._count.artwork_comment_has_replies>1?c.$t("comments.replies.replies").toLowerCase():c.$t("comments.replies.reply").toLowerCase()),1)])):A("",!0)],8,Br),e(t).loggedIn?(b(),$("div",Dr,[n("span",{class:"reaction",onClick:M=>e(xe).includes(I.id)?Ot(I.id):Vt(I.id)},[P(_(L,{name:"i-ri-heart-3-line",class:"text-gray-500 hover:text-red-500"},null,512),[[U,!e(xe).includes(I.id)]]),P(_(L,{id:"comment-like-button-"+I.id,name:"i-ion-heart",class:"text-red-500 hover:text-red-500"},null,8,["id"]),[[U,e(xe).includes(I.id)]]),T(" "+g(c.shortNumber(I._count.artwork_comment_has_likes)),1)],8,Fr),n("span",{class:"reaction",onClick:M=>Tt(I.id)},[_(L,{name:"i-quill-reply",class:"text-gray-500 hover:text-blue-500"})],8,Hr),n("div",Nr,[n("button",{type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options",onClick:u[23]||(u[23]=M=>Be.value=0)},[n("span",null,[_(L,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),n("div",zr,[n("div",Qr,[_(S,{to:"/u/"+I.users.username,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:u[24]||(u[24]=Re(()=>{},["prevent"]))},{default:D(()=>[_(L,{name:"i-fluent-person-32-regular",class:"mr-2 text-base"}),T(" "+g(c.$t("viewProfile")),1)]),_:2},1032,["to"]),e(t).loggedIn&&e(t).user.id===I.users.id?(b(),$("div",{key:0,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:M=>Ut(I.id)},[_(L,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),T(" "+g(c.$t("delete")),1)],8,Wr)):A("",!0)])])])])):A("",!0)])],2),e(t).loggedIn?P((b(),$("div",Jr,[n("div",Gr,[n("div",Yr,[P(n("textarea",{id:"reply-"+I.id,"onUpdate:modelValue":u[25]||(u[25]=M=>He(re)?re.value=M:null),class:z(["mt-2 w-full input form-input",[{"cursor-not-allowed":e(Pe)},{"theme-color-secondary textarea":V}]]),readonly:e(Pe),cols:"30",rows:e(re)!=null&&e(re)!=""?"4":"0",placeholder:c.$t("comments.replies.write"),maxlength:Ze,"data-gramm":"false"},null,10,Kr),[[Oe,e(re)]]),P(n("span",{class:"absolute left-4 bottom-6 py-1 px-2 text-white rounded-md button-color"},g(e(Mt)),513),[[U,e(re)!=null&&e(re)!=""]]),n("span",{class:"absolute right-2 bottom-5 py-1 px-2",onClick:Re(M=>qt(I.id),["prevent"])},[P(_(L,{name:"i-carbon-send-filled",class:"text-xl transition-all duration-100 cursor-pointer text-colored"},null,512),[[U,e(re)!=null&&e(re)!=""&&!e(Pe)]]),P(_(Fe,null,null,512),[[U,e(Pe)]])],8,Zr)])])],512)),[[U,e(Be)===I.id]]):A("",!0),n("div",{id:"comment-replies-"+I.id,class:"hidden flex-col mt-2"},[e(fe)[I.id]&&e(fe)[I.id].length?(b(),$("div",en,[n("span",tn,g(c.$t("comments.replies.replies")),1),n("span",{class:"float-right text-xs cursor-pointer hover:font-semibold",onClick:M=>Ke(I.id)},g(c.$t("hide")),9,sn)])):A("",!0),(b(!0),$(ve,null,be(e(fe)[I.id],M=>(b(),$("div",{key:M.id,class:z(["p-3 mb-2 w-full rounded-md border-l-4",V?"theme-color-secondary":"theme-color"])},[n("div",an,[_(S,{to:"/u/"+M.users.username,class:"flex flex-row leading-6"},{default:D(()=>[n("img",{class:"mr-2 w-6 h-6 rounded-full",src:c.avatarCoverUrl(M.users.avatar_bucket,M.users.avatar_filename),onError:u[26]||(u[26]=(...$e)=>c.imageLoadError&&c.imageLoadError(...$e))},null,40,on),n("span",rn,g(M.users.name),1)]),_:2},1032,["to"]),n("span",nn,g(c.formatDate(M.created_at,!0)),1)]),n("div",ln,g(M.content),1),e(t).loggedIn?(b(),$("div",cn,[dn,n("div",un,[n("span",{class:"reaction",onClick:$e=>e(Ce).includes(M.id)?Dt(M.id):jt(M.id)},[P(_(L,{id:"reply-like-button-"+M.id,name:"i-ion-heart",class:"text-red-500 hover:text-red-500"},null,8,["id"]),[[U,e(Ce).includes(M.id)]]),P(_(L,{name:"i-ri-heart-3-line",class:"text-gray-500 hover:text-red-500"},null,512),[[U,!e(Ce).includes(M.id)]]),T(" "+g(c.shortNumber(M._count.artwork_comment_reply_has_likes)),1)],8,mn),n("div",pn,[n("button",hn,[n("span",null,[_(L,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),n("div",wn,[n("div",vn,[_(S,{to:"/u/"+M.users.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:u[27]||(u[27]=Re(()=>{},["prevent"]))},{default:D(()=>[_(L,{name:"i-fluent-person-32-regular",class:"mr-2 text-base"}),T(" "+g(c.$t("viewProfile")),1)]),_:2},1032,["to"]),e(t).loggedIn&&e(t).user.id===M.users.id?(b(),$("div",{key:0,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:$e=>Bt(I.id,M.id)},[_(L,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),T(" "+g(c.$t("delete")),1)],8,fn)):A("",!0)])])])])])):A("",!0)],2))),128)),e(fe)[I.id]&&e(Ge)?(b(),$("div",{key:1,class:"mb-1 text-center transition ease-in-out delay-75 cursor-pointer hover:font-semibold hover:underline text-color-secondary href",onClick:M=>Et(I.id)},g(c.$t("comments.replies.loadMore")),9,gn)):A("",!0)],8,Xr)])])),[[ne]])),128))]),e(x)._count?P((b(),$("div",{key:2,class:"text-center capitalize href",onClick:u[28]||(u[28]=Re(I=>St(e(x).id),["prevent"]))},g(c.$t("comments.loadOlder")),513)),[[U,e(x)._count.artwork_comments>3&&e(qe)]]):A("",!0),P(n("div",{class:"w-full text-xs italic text-center"},g(c.$t("comments.reachedTheEnd")),513),[[U,e(oe).length&&!e(qe)]]),e(t).loggedIn&&!e(oe).length&&!e(W)?(b(),$("div",yn,g(c.$t("comments.noCommentYet")),1)):A("",!0)])])]),bn,n("div",kn,[_n,e(ae)?A("",!0):(b(),se(po,{key:0,"work-id":e(x).id,"is-modal":V,view:me},null,8,["work-id"]))]),e(ae)?A("",!0):(b(),se(Js,{key:0,id:"collection-selection-modal","modal-id":"collection-selection-modal",ref_key:"collectionSelectionModalRef",ref:tt,"work-id":e(x).id,class:"modal",onSave:Ht},null,8,["work-id"])),!e(ae)&&e(t).loggedIn&&e(x).users&&e(t).user.id==e(x).users.id?(b(),se(e(ia),{key:1,id:"album-selection-modal",ref_key:"albumSelectionModalRef",ref:ut,class:"modal","modal-id":"album-selection-modal","work-id":e(x).id,onAddedToAlbum:zt},null,8,["work-id"])):A("",!0),_(ma,{id:"work-deletion-confirm-modal",class:"modal","modal-id":"work-deletion-confirm-modal",message:`${c.$t("alert.areYouSure")} ${c.$t("alert.youCannotUndoThisAction")}`,onOnAccept:u[29]||(u[29]=I=>dt(e(x).id))},null,8,["message"]),_(Sa,{id:"report-modal",ref_key:"reportModalRef",ref:Gt,class:"modal",type:"artwork","post-id":e(x).id,"report-status":e(N)},null,8,["post-id","report-status"]),_(ja,{id:"share-to-feed-modal",ref:"shareToFeedModalRef",class:"modal","post-id":e(x).id},null,8,["post-id"]),_(Ka,{id:"user-liked-modal",class:"modal","work-id":e(x).id},null,8,["work-id"]),_(io,{id:"user-shared-modal",class:"modal","work-id":e(x).id},null,8,["work-id"]),P(_(lt,{id:"copy-alert",text:c.$t("linkCopied"),icon:"i-bi-check-all"},null,8,["text"]),[[U,e(mt)]])],2),[[U,!e(ae)]])],64)}}},On=_e(xn,[["__scopeId","data-v-d0277ca1"]]);export{On as M,lt as S,ma as _,Js as a,ds as b,nt as c,Gs as d,Us as e,ia as f,ht as u};
