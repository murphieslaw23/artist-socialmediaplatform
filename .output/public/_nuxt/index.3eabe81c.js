import{aS as zs,k as eo,j as mr,C as Er,I as to,O as io,a as _r,r as X,D as so,m as no,bT as ro,E as Ir,a1 as ao,o as z,p as be,q as N,u as A,s as Ze,t as q,e as ne,L as oe,x as Pe,b as re,v as de,F as js,K as ce,w as zi,c as Ie,T as vr,G as Xe,$ as oo,h as lo,M as co,N as uo,f as Xs}from"./entry.ed1bfc63.js";import{u as fo,L as ho}from"./Layout.c894869a.js";import{u as po,_ as go}from"./ProBadge.dc1cf83d.js";import{u as mo}from"./useSetting.56e2c71f.js";import{q as Tr,v as yr}from"./text-editor.47d3431a.js";import{S as Ct}from"./Spinner.bfc0b0e5.js";import{_ as wr}from"./_plugin-vue_export-helper.a1a6add7.js";import{u as Eo}from"./useFeed.bd601146.js";const ji={alwaysOpen:!1,activeClasses:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactiveClasses:"text-gray-500 dark:text-gray-400",onOpen:()=>{},onClose:()=>{},onToggle:()=>{}};class br{constructor(t=[],i={}){this._items=t,this._options={...ji,...i},this._init()}_init(){this._items.length&&this._items.map(t=>{t.active&&this.open(t.id),t.triggerEl.addEventListener("click",()=>{this.toggle(t.id)})})}getItem(t){return this._items.filter(i=>i.id===t)[0]}open(t){const i=this.getItem(t);this._options.alwaysOpen||this._items.map(s=>{s!==i&&(s.triggerEl.classList.remove(...this._options.activeClasses.split(" ")),s.triggerEl.classList.add(...this._options.inactiveClasses.split(" ")),s.targetEl.classList.add("hidden"),s.triggerEl.setAttribute("aria-expanded",!1),s.active=!1,s.iconEl&&s.iconEl.classList.remove("rotate-180"))}),i.triggerEl.classList.add(...this._options.activeClasses.split(" ")),i.triggerEl.classList.remove(...this._options.inactiveClasses.split(" ")),i.triggerEl.setAttribute("aria-expanded",!0),i.targetEl.classList.remove("hidden"),i.active=!0,i.iconEl&&i.iconEl.classList.add("rotate-180"),this._options.onOpen(this,i)}toggle(t){const i=this.getItem(t);i.active?this.close(t):this.open(t),this._options.onToggle(this,i)}close(t){const i=this.getItem(t);i.triggerEl.classList.remove(...this._options.activeClasses.split(" ")),i.triggerEl.classList.add(...this._options.inactiveClasses.split(" ")),i.targetEl.classList.add("hidden"),i.triggerEl.setAttribute("aria-expanded",!1),i.active=!1,i.iconEl&&i.iconEl.classList.remove("rotate-180"),this._options.onClose(this,i)}}window.Accordion=br;function _o(){document.querySelectorAll("[data-accordion]").forEach(e=>{const t=e.getAttribute("data-accordion"),i=e.getAttribute("data-active-classes"),s=e.getAttribute("data-inactive-classes"),n=[];e.querySelectorAll("[data-accordion-target]").forEach(r=>{const a={id:r.getAttribute("data-accordion-target"),triggerEl:r,targetEl:document.querySelector(r.getAttribute("data-accordion-target")),iconEl:r.querySelector("[data-accordion-icon]"),active:r.getAttribute("aria-expanded")==="true"};n.push(a)}),new br(n,{alwaysOpen:t==="open",activeClasses:i||ji.activeClasses,inactiveClasses:s||ji.inactiveClasses})})}const Ks={triggerEl:null,onCollapse:()=>{},onExpand:()=>{},onToggle:()=>{}};class Dr{constructor(t=null,i={}){this._targetEl=t,this._triggerEl=i.triggerEl||Ks.triggerEl,this._options={...Ks,...i},this._visible=!1,this._init()}_init(){this._triggerEl&&(this._triggerEl.hasAttribute("aria-expanded")?this._visible=this._triggerEl.getAttribute("aria-expanded")==="true":this._visible=!this._targetEl.classList.contains("hidden"),this._triggerEl.addEventListener("click",()=>{this._visible?this.collapse():this.expand()}))}collapse(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onCollapse(this)}expand(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onExpand(this)}toggle(){this._visible?this.collapse():this.expand()}}window.Collapse=Dr;function Io(){document.querySelectorAll("[data-collapse-toggle]").forEach(e=>{const t=document.getElementById(e.getAttribute("data-collapse-toggle"));!t||new Dr(t,{triggerEl:e})})}const Xi={defaultPosition:0,indicators:{items:[],activeClasses:"bg-white dark:bg-gray-800",inactiveClasses:"bg-white/50 dark:bg-gray-800/50 hover:bg-white dark:hover:bg-gray-800"},interval:3e3,onNext:()=>{},onPrev:()=>{},onChange:()=>{}};class Rr{constructor(t=[],i={}){this._items=t,this._options={...Xi,...i,indicators:{...Xi.indicators,...i.indicators}},this._activeItem=this.getItem(this._options.defaultPosition),this._indicators=this._options.indicators.items,this._interval=null,this._init()}_init(){this._items.map(t=>{t.el.classList.add("absolute","inset-0","transition-all","transform")}),this._getActiveItem()?this.slideTo(this._getActiveItem().position):this.slideTo(0),this._indicators.map((t,i)=>{t.el.addEventListener("click",()=>{this.slideTo(i)})})}getItem(t){return this._items[t]}slideTo(t){const i=this._items[t],s={left:i.position===0?this._items[this._items.length-1]:this._items[i.position-1],middle:i,right:i.position===this._items.length-1?this._items[0]:this._items[i.position+1]};this._rotate(s),this._setActiveItem(i.position),this._interval&&(this.pause(),this.cycle()),this._options.onChange(this)}next(){const t=this._getActiveItem();let i=null;t.position===this._items.length-1?i=this._items[0]:i=this._items[t.position+1],this.slideTo(i.position),this._options.onNext(this)}prev(){const t=this._getActiveItem();let i=null;t.position===0?i=this._items[this._items.length-1]:i=this._items[t.position-1],this.slideTo(i.position),this._options.onPrev(this)}_rotate(t){this._items.map(i=>{i.el.classList.add("hidden")}),t.left.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),t.left.el.classList.add("-translate-x-full","z-10"),t.middle.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-10"),t.middle.el.classList.add("translate-x-0","z-20"),t.right.el.classList.remove("-translate-x-full","translate-x-full","translate-x-0","hidden","z-20"),t.right.el.classList.add("translate-x-full","z-10")}cycle(){this._interval=setInterval(()=>{this.next()},this._options.interval)}pause(){clearInterval(this._interval)}_getActiveItem(){return this._activeItem}_setActiveItem(t){this._activeItem=this._items[t],this._indicators.length&&(this._indicators.map(i=>{i.el.setAttribute("aria-current","false"),i.el.classList.remove(...this._options.indicators.activeClasses.split(" ")),i.el.classList.add(...this._options.indicators.inactiveClasses.split(" "))}),this._indicators[t].el.classList.add(...this._options.indicators.activeClasses.split(" ")),this._indicators[t].el.classList.remove(...this._options.indicators.inactiveClasses.split(" ")),this._indicators[t].el.setAttribute("aria-current","true"))}}window.Carousel=Rr;function vo(){document.querySelectorAll("[data-carousel]").forEach(e=>{const t=e.getAttribute("data-carousel-interval"),i=e.getAttribute("data-carousel")==="slide",s=[];let n=0;e.querySelectorAll("[data-carousel-item]").length&&[...e.querySelectorAll("[data-carousel-item]")].map((d,c)=>{s.push({position:c,el:d}),d.getAttribute("data-carousel-item")==="active"&&(n=c)});const r=[];e.querySelectorAll("[data-carousel-slide-to]").length&&[...e.querySelectorAll("[data-carousel-slide-to]")].map(d=>{r.push({position:d.getAttribute("data-carousel-slide-to"),el:d})});const a=new Rr(s,{defaultPosition:n,indicators:{items:r},interval:t||Xi.interval});i&&a.cycle();const o=e.querySelector("[data-carousel-next]"),l=e.querySelector("[data-carousel-prev]");o&&o.addEventListener("click",()=>{a.next()}),l&&l.addEventListener("click",()=>{a.prev()})})}const Zs={triggerEl:null,transition:"transition-opacity",duration:300,timing:"ease-out",onHide:()=>{}};class Or{constructor(t=null,i={}){this._targetEl=t,this._triggerEl=i.triggerEl||Zs.triggerEl,this._options={...Zs,...i},this._init()}_init(){this._triggerEl&&this._triggerEl.addEventListener("click",()=>{this.hide()})}hide(){this._targetEl.classList.add(this._options.transition,`duration-${this._options.duration}`,this._options.timing,"opacity-0"),setTimeout(()=>{this._targetEl.classList.add("hidden")},this._options.duration),this._options.onHide(this,this._targetEl)}}window.Dismiss=Or;function To(){document.querySelectorAll("[data-dismiss-target]").forEach(e=>{const t=document.querySelector(e.getAttribute("data-dismiss-target"));new Or(t,{triggerEl:e})})}var me="top",Oe="bottom",Se="right",Ee="left",fs="auto",Ht=[me,Oe,Se,Ee],_t="start",Bt="end",yo="clippingParents",Sr="viewport",Rt="popper",wo="reference",Qs=Ht.reduce(function(e,t){return e.concat([t+"-"+_t,t+"-"+Bt])},[]),Ar=[].concat(Ht,[fs]).reduce(function(e,t){return e.concat([t,t+"-"+_t,t+"-"+Bt])},[]),bo="beforeRead",Do="read",Ro="afterRead",Oo="beforeMain",So="main",Ao="afterMain",Lo="beforeWrite",Mo="write",Co="afterWrite",Po=[bo,Do,Ro,Oo,So,Ao,Lo,Mo,Co];function Ge(e){return e?(e.nodeName||"").toLowerCase():null}function Ae(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function rt(e){var t=Ae(e).Element;return e instanceof t||e instanceof Element}function Re(e){var t=Ae(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function hs(e){if(typeof ShadowRoot>"u")return!1;var t=Ae(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function xo(e){var t=e.state;Object.keys(t.elements).forEach(function(i){var s=t.styles[i]||{},n=t.attributes[i]||{},r=t.elements[i];!Re(r)||!Ge(r)||(Object.assign(r.style,s),Object.keys(n).forEach(function(a){var o=n[a];o===!1?r.removeAttribute(a):r.setAttribute(a,o===!0?"":o)}))})}function No(e){var t=e.state,i={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,i.popper),t.styles=i,t.elements.arrow&&Object.assign(t.elements.arrow.style,i.arrow),function(){Object.keys(t.elements).forEach(function(s){var n=t.elements[s],r=t.attributes[s]||{},a=Object.keys(t.styles.hasOwnProperty(s)?t.styles[s]:i[s]),o=a.reduce(function(l,d){return l[d]="",l},{});!Re(n)||!Ge(n)||(Object.assign(n.style,o),Object.keys(r).forEach(function(l){n.removeAttribute(l)}))})}}const ko={name:"applyStyles",enabled:!0,phase:"write",fn:xo,effect:No,requires:["computeStyles"]};function ke(e){return e.split("-")[0]}var tt=Math.max,ci=Math.min,It=Math.round;function Ki(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Lr(){return!/^((?!chrome|android).)*safari/i.test(Ki())}function vt(e,t,i){t===void 0&&(t=!1),i===void 0&&(i=!1);var s=e.getBoundingClientRect(),n=1,r=1;t&&Re(e)&&(n=e.offsetWidth>0&&It(s.width)/e.offsetWidth||1,r=e.offsetHeight>0&&It(s.height)/e.offsetHeight||1);var a=rt(e)?Ae(e):window,o=a.visualViewport,l=!Lr()&&i,d=(s.left+(l&&o?o.offsetLeft:0))/n,c=(s.top+(l&&o?o.offsetTop:0))/r,u=s.width/n,m=s.height/r;return{width:u,height:m,top:c,right:d+u,bottom:c+m,left:d,x:d,y:c}}function ps(e){var t=vt(e),i=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-i)<=1&&(i=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:i,height:s}}function Mr(e,t){var i=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(i&&hs(i)){var s=t;do{if(s&&e.isSameNode(s))return!0;s=s.parentNode||s.host}while(s)}return!1}function Fe(e){return Ae(e).getComputedStyle(e)}function Go(e){return["table","td","th"].indexOf(Ge(e))>=0}function ze(e){return((rt(e)?e.ownerDocument:e.document)||window.document).documentElement}function yi(e){return Ge(e)==="html"?e:e.assignedSlot||e.parentNode||(hs(e)?e.host:null)||ze(e)}function Js(e){return!Re(e)||Fe(e).position==="fixed"?null:e.offsetParent}function Fo(e){var t=/firefox/i.test(Ki()),i=/Trident/i.test(Ki());if(i&&Re(e)){var s=Fe(e);if(s.position==="fixed")return null}var n=yi(e);for(hs(n)&&(n=n.host);Re(n)&&["html","body"].indexOf(Ge(n))<0;){var r=Fe(n);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return n;n=n.parentNode}return null}function Wt(e){for(var t=Ae(e),i=Js(e);i&&Go(i)&&Fe(i).position==="static";)i=Js(i);return i&&(Ge(i)==="html"||Ge(i)==="body"&&Fe(i).position==="static")?t:i||Fo(e)||t}function gs(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Pt(e,t,i){return tt(e,ci(t,i))}function Bo(e,t,i){var s=Pt(e,t,i);return s>i?i:s}function Cr(){return{top:0,right:0,bottom:0,left:0}}function Pr(e){return Object.assign({},Cr(),e)}function xr(e,t){return t.reduce(function(i,s){return i[s]=e,i},{})}var Vo=function(t,i){return t=typeof t=="function"?t(Object.assign({},i.rects,{placement:i.placement})):t,Pr(typeof t!="number"?t:xr(t,Ht))};function Uo(e){var t,i=e.state,s=e.name,n=e.options,r=i.elements.arrow,a=i.modifiersData.popperOffsets,o=ke(i.placement),l=gs(o),d=[Ee,Se].indexOf(o)>=0,c=d?"height":"width";if(!(!r||!a)){var u=Vo(n.padding,i),m=ps(r),g=l==="y"?me:Ee,f=l==="y"?Oe:Se,_=i.rects.reference[c]+i.rects.reference[l]-a[l]-i.rects.popper[c],I=a[l]-i.rects.reference[l],v=Wt(r),h=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,p=_/2-I/2,E=u[g],T=h-m[c]-u[f],b=h/2-m[c]/2+p,M=Pt(E,b,T),w=l;i.modifiersData[s]=(t={},t[w]=M,t.centerOffset=M-b,t)}}function $o(e){var t=e.state,i=e.options,s=i.element,n=s===void 0?"[data-popper-arrow]":s;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||!Mr(t.elements.popper,n)||(t.elements.arrow=n))}const Ho={name:"arrow",enabled:!0,phase:"main",fn:Uo,effect:$o,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Tt(e){return e.split("-")[1]}var Wo={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Yo(e){var t=e.x,i=e.y,s=window,n=s.devicePixelRatio||1;return{x:It(t*n)/n||0,y:It(i*n)/n||0}}function en(e){var t,i=e.popper,s=e.popperRect,n=e.placement,r=e.variation,a=e.offsets,o=e.position,l=e.gpuAcceleration,d=e.adaptive,c=e.roundOffsets,u=e.isFixed,m=a.x,g=m===void 0?0:m,f=a.y,_=f===void 0?0:f,I=typeof c=="function"?c({x:g,y:_}):{x:g,y:_};g=I.x,_=I.y;var v=a.hasOwnProperty("x"),h=a.hasOwnProperty("y"),p=Ee,E=me,T=window;if(d){var b=Wt(i),M="clientHeight",w="clientWidth";if(b===Ae(i)&&(b=ze(i),Fe(b).position!=="static"&&o==="absolute"&&(M="scrollHeight",w="scrollWidth")),b=b,n===me||(n===Ee||n===Se)&&r===Bt){E=Oe;var R=u&&b===T&&T.visualViewport?T.visualViewport.height:b[M];_-=R-s.height,_*=l?1:-1}if(n===Ee||(n===me||n===Oe)&&r===Bt){p=Se;var C=u&&b===T&&T.visualViewport?T.visualViewport.width:b[w];g-=C-s.width,g*=l?1:-1}}var L=Object.assign({position:o},d&&Wo),P=c===!0?Yo({x:g,y:_}):{x:g,y:_};if(g=P.x,_=P.y,l){var U;return Object.assign({},L,(U={},U[E]=h?"0":"",U[p]=v?"0":"",U.transform=(T.devicePixelRatio||1)<=1?"translate("+g+"px, "+_+"px)":"translate3d("+g+"px, "+_+"px, 0)",U))}return Object.assign({},L,(t={},t[E]=h?_+"px":"",t[p]=v?g+"px":"",t.transform="",t))}function qo(e){var t=e.state,i=e.options,s=i.gpuAcceleration,n=s===void 0?!0:s,r=i.adaptive,a=r===void 0?!0:r,o=i.roundOffsets,l=o===void 0?!0:o,d={placement:ke(t.placement),variation:Tt(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,en(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,en(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const zo={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:qo,data:{}};var zt={passive:!0};function jo(e){var t=e.state,i=e.instance,s=e.options,n=s.scroll,r=n===void 0?!0:n,a=s.resize,o=a===void 0?!0:a,l=Ae(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&d.forEach(function(c){c.addEventListener("scroll",i.update,zt)}),o&&l.addEventListener("resize",i.update,zt),function(){r&&d.forEach(function(c){c.removeEventListener("scroll",i.update,zt)}),o&&l.removeEventListener("resize",i.update,zt)}}const Xo={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:jo,data:{}};var Ko={left:"right",right:"left",bottom:"top",top:"bottom"};function ri(e){return e.replace(/left|right|bottom|top/g,function(t){return Ko[t]})}var Zo={start:"end",end:"start"};function tn(e){return e.replace(/start|end/g,function(t){return Zo[t]})}function ms(e){var t=Ae(e),i=t.pageXOffset,s=t.pageYOffset;return{scrollLeft:i,scrollTop:s}}function Es(e){return vt(ze(e)).left+ms(e).scrollLeft}function Qo(e,t){var i=Ae(e),s=ze(e),n=i.visualViewport,r=s.clientWidth,a=s.clientHeight,o=0,l=0;if(n){r=n.width,a=n.height;var d=Lr();(d||!d&&t==="fixed")&&(o=n.offsetLeft,l=n.offsetTop)}return{width:r,height:a,x:o+Es(e),y:l}}function Jo(e){var t,i=ze(e),s=ms(e),n=(t=e.ownerDocument)==null?void 0:t.body,r=tt(i.scrollWidth,i.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),a=tt(i.scrollHeight,i.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),o=-s.scrollLeft+Es(e),l=-s.scrollTop;return Fe(n||i).direction==="rtl"&&(o+=tt(i.clientWidth,n?n.clientWidth:0)-r),{width:r,height:a,x:o,y:l}}function _s(e){var t=Fe(e),i=t.overflow,s=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(i+n+s)}function Nr(e){return["html","body","#document"].indexOf(Ge(e))>=0?e.ownerDocument.body:Re(e)&&_s(e)?e:Nr(yi(e))}function xt(e,t){var i;t===void 0&&(t=[]);var s=Nr(e),n=s===((i=e.ownerDocument)==null?void 0:i.body),r=Ae(s),a=n?[r].concat(r.visualViewport||[],_s(s)?s:[]):s,o=t.concat(a);return n?o:o.concat(xt(yi(a)))}function Zi(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function el(e,t){var i=vt(e,!1,t==="fixed");return i.top=i.top+e.clientTop,i.left=i.left+e.clientLeft,i.bottom=i.top+e.clientHeight,i.right=i.left+e.clientWidth,i.width=e.clientWidth,i.height=e.clientHeight,i.x=i.left,i.y=i.top,i}function sn(e,t,i){return t===Sr?Zi(Qo(e,i)):rt(t)?el(t,i):Zi(Jo(ze(e)))}function tl(e){var t=xt(yi(e)),i=["absolute","fixed"].indexOf(Fe(e).position)>=0,s=i&&Re(e)?Wt(e):e;return rt(s)?t.filter(function(n){return rt(n)&&Mr(n,s)&&Ge(n)!=="body"}):[]}function il(e,t,i,s){var n=t==="clippingParents"?tl(e):[].concat(t),r=[].concat(n,[i]),a=r[0],o=r.reduce(function(l,d){var c=sn(e,d,s);return l.top=tt(c.top,l.top),l.right=ci(c.right,l.right),l.bottom=ci(c.bottom,l.bottom),l.left=tt(c.left,l.left),l},sn(e,a,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function kr(e){var t=e.reference,i=e.element,s=e.placement,n=s?ke(s):null,r=s?Tt(s):null,a=t.x+t.width/2-i.width/2,o=t.y+t.height/2-i.height/2,l;switch(n){case me:l={x:a,y:t.y-i.height};break;case Oe:l={x:a,y:t.y+t.height};break;case Se:l={x:t.x+t.width,y:o};break;case Ee:l={x:t.x-i.width,y:o};break;default:l={x:t.x,y:t.y}}var d=n?gs(n):null;if(d!=null){var c=d==="y"?"height":"width";switch(r){case _t:l[d]=l[d]-(t[c]/2-i[c]/2);break;case Bt:l[d]=l[d]+(t[c]/2-i[c]/2);break}}return l}function Vt(e,t){t===void 0&&(t={});var i=t,s=i.placement,n=s===void 0?e.placement:s,r=i.strategy,a=r===void 0?e.strategy:r,o=i.boundary,l=o===void 0?yo:o,d=i.rootBoundary,c=d===void 0?Sr:d,u=i.elementContext,m=u===void 0?Rt:u,g=i.altBoundary,f=g===void 0?!1:g,_=i.padding,I=_===void 0?0:_,v=Pr(typeof I!="number"?I:xr(I,Ht)),h=m===Rt?wo:Rt,p=e.rects.popper,E=e.elements[f?h:m],T=il(rt(E)?E:E.contextElement||ze(e.elements.popper),l,c,a),b=vt(e.elements.reference),M=kr({reference:b,element:p,strategy:"absolute",placement:n}),w=Zi(Object.assign({},p,M)),R=m===Rt?w:b,C={top:T.top-R.top+v.top,bottom:R.bottom-T.bottom+v.bottom,left:T.left-R.left+v.left,right:R.right-T.right+v.right},L=e.modifiersData.offset;if(m===Rt&&L){var P=L[n];Object.keys(C).forEach(function(U){var S=[Se,Oe].indexOf(U)>=0?1:-1,$=[me,Oe].indexOf(U)>=0?"y":"x";C[U]+=P[$]*S})}return C}function sl(e,t){t===void 0&&(t={});var i=t,s=i.placement,n=i.boundary,r=i.rootBoundary,a=i.padding,o=i.flipVariations,l=i.allowedAutoPlacements,d=l===void 0?Ar:l,c=Tt(s),u=c?o?Qs:Qs.filter(function(f){return Tt(f)===c}):Ht,m=u.filter(function(f){return d.indexOf(f)>=0});m.length===0&&(m=u);var g=m.reduce(function(f,_){return f[_]=Vt(e,{placement:_,boundary:n,rootBoundary:r,padding:a})[ke(_)],f},{});return Object.keys(g).sort(function(f,_){return g[f]-g[_]})}function nl(e){if(ke(e)===fs)return[];var t=ri(e);return[tn(e),t,tn(t)]}function rl(e){var t=e.state,i=e.options,s=e.name;if(!t.modifiersData[s]._skip){for(var n=i.mainAxis,r=n===void 0?!0:n,a=i.altAxis,o=a===void 0?!0:a,l=i.fallbackPlacements,d=i.padding,c=i.boundary,u=i.rootBoundary,m=i.altBoundary,g=i.flipVariations,f=g===void 0?!0:g,_=i.allowedAutoPlacements,I=t.options.placement,v=ke(I),h=v===I,p=l||(h||!f?[ri(I)]:nl(I)),E=[I].concat(p).reduce(function(G,te){return G.concat(ke(te)===fs?sl(t,{placement:te,boundary:c,rootBoundary:u,padding:d,flipVariations:f,allowedAutoPlacements:_}):te)},[]),T=t.rects.reference,b=t.rects.popper,M=new Map,w=!0,R=E[0],C=0;C<E.length;C++){var L=E[C],P=ke(L),U=Tt(L)===_t,S=[me,Oe].indexOf(P)>=0,$=S?"width":"height",y=Vt(t,{placement:L,boundary:c,rootBoundary:u,altBoundary:m,padding:d}),O=S?U?Se:Ee:U?Oe:me;T[$]>b[$]&&(O=ri(O));var x=ri(O),k=[];if(r&&k.push(y[P]<=0),o&&k.push(y[O]<=0,y[x]<=0),k.every(function(G){return G})){R=L,w=!1;break}M.set(L,k)}if(w)for(var H=f?3:1,Y=function(te){var F=E.find(function(B){var j=M.get(B);if(j)return j.slice(0,te).every(function(_e){return _e})});if(F)return R=F,"break"},he=H;he>0;he--){var V=Y(he);if(V==="break")break}t.placement!==R&&(t.modifiersData[s]._skip=!0,t.placement=R,t.reset=!0)}}const al={name:"flip",enabled:!0,phase:"main",fn:rl,requiresIfExists:["offset"],data:{_skip:!1}};function nn(e,t,i){return i===void 0&&(i={x:0,y:0}),{top:e.top-t.height-i.y,right:e.right-t.width+i.x,bottom:e.bottom-t.height+i.y,left:e.left-t.width-i.x}}function rn(e){return[me,Se,Oe,Ee].some(function(t){return e[t]>=0})}function ol(e){var t=e.state,i=e.name,s=t.rects.reference,n=t.rects.popper,r=t.modifiersData.preventOverflow,a=Vt(t,{elementContext:"reference"}),o=Vt(t,{altBoundary:!0}),l=nn(a,s),d=nn(o,n,r),c=rn(l),u=rn(d);t.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:c,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":u})}const ll={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ol};function cl(e,t,i){var s=ke(e),n=[Ee,me].indexOf(s)>=0?-1:1,r=typeof i=="function"?i(Object.assign({},t,{placement:e})):i,a=r[0],o=r[1];return a=a||0,o=(o||0)*n,[Ee,Se].indexOf(s)>=0?{x:o,y:a}:{x:a,y:o}}function dl(e){var t=e.state,i=e.options,s=e.name,n=i.offset,r=n===void 0?[0,0]:n,a=Ar.reduce(function(c,u){return c[u]=cl(u,t.rects,r),c},{}),o=a[t.placement],l=o.x,d=o.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=d),t.modifiersData[s]=a}const ul={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:dl};function fl(e){var t=e.state,i=e.name;t.modifiersData[i]=kr({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const hl={name:"popperOffsets",enabled:!0,phase:"read",fn:fl,data:{}};function pl(e){return e==="x"?"y":"x"}function gl(e){var t=e.state,i=e.options,s=e.name,n=i.mainAxis,r=n===void 0?!0:n,a=i.altAxis,o=a===void 0?!1:a,l=i.boundary,d=i.rootBoundary,c=i.altBoundary,u=i.padding,m=i.tether,g=m===void 0?!0:m,f=i.tetherOffset,_=f===void 0?0:f,I=Vt(t,{boundary:l,rootBoundary:d,padding:u,altBoundary:c}),v=ke(t.placement),h=Tt(t.placement),p=!h,E=gs(v),T=pl(E),b=t.modifiersData.popperOffsets,M=t.rects.reference,w=t.rects.popper,R=typeof _=="function"?_(Object.assign({},t.rects,{placement:t.placement})):_,C=typeof R=="number"?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),L=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,P={x:0,y:0};if(!!b){if(r){var U,S=E==="y"?me:Ee,$=E==="y"?Oe:Se,y=E==="y"?"height":"width",O=b[E],x=O+I[S],k=O-I[$],H=g?-w[y]/2:0,Y=h===_t?M[y]:w[y],he=h===_t?-w[y]:-M[y],V=t.elements.arrow,G=g&&V?ps(V):{width:0,height:0},te=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Cr(),F=te[S],B=te[$],j=Pt(0,M[y],G[y]),_e=p?M[y]/2-H-j-F-C.mainAxis:Y-j-F-C.mainAxis,ae=p?-M[y]/2+H+j+B+C.mainAxis:he+j+B+C.mainAxis,He=t.elements.arrow&&Wt(t.elements.arrow),Xa=He?E==="y"?He.clientTop||0:He.clientLeft||0:0,Fs=(U=L==null?void 0:L[E])!=null?U:0,Ka=O+_e-Fs-Xa,Za=O+ae-Fs,Bs=Pt(g?ci(x,Ka):x,O,g?tt(k,Za):k);b[E]=Bs,P[E]=Bs-O}if(o){var Vs,Qa=E==="x"?me:Ee,Ja=E==="x"?Oe:Se,je=b[T],qt=T==="y"?"height":"width",Us=je+I[Qa],$s=je-I[Ja],Li=[me,Ee].indexOf(v)!==-1,Hs=(Vs=L==null?void 0:L[T])!=null?Vs:0,Ws=Li?Us:je-M[qt]-w[qt]-Hs+C.altAxis,Ys=Li?je+M[qt]+w[qt]-Hs-C.altAxis:$s,qs=g&&Li?Bo(Ws,je,Ys):Pt(g?Ws:Us,je,g?Ys:$s);b[T]=qs,P[T]=qs-je}t.modifiersData[s]=P}}const ml={name:"preventOverflow",enabled:!0,phase:"main",fn:gl,requiresIfExists:["offset"]};function El(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function _l(e){return e===Ae(e)||!Re(e)?ms(e):El(e)}function Il(e){var t=e.getBoundingClientRect(),i=It(t.width)/e.offsetWidth||1,s=It(t.height)/e.offsetHeight||1;return i!==1||s!==1}function vl(e,t,i){i===void 0&&(i=!1);var s=Re(t),n=Re(t)&&Il(t),r=ze(t),a=vt(e,n,i),o={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(s||!s&&!i)&&((Ge(t)!=="body"||_s(r))&&(o=_l(t)),Re(t)?(l=vt(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=Es(r))),{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}function Tl(e){var t=new Map,i=new Set,s=[];e.forEach(function(r){t.set(r.name,r)});function n(r){i.add(r.name);var a=[].concat(r.requires||[],r.requiresIfExists||[]);a.forEach(function(o){if(!i.has(o)){var l=t.get(o);l&&n(l)}}),s.push(r)}return e.forEach(function(r){i.has(r.name)||n(r)}),s}function yl(e){var t=Tl(e);return Po.reduce(function(i,s){return i.concat(t.filter(function(n){return n.phase===s}))},[])}function wl(e){var t;return function(){return t||(t=new Promise(function(i){Promise.resolve().then(function(){t=void 0,i(e())})})),t}}function bl(e){var t=e.reduce(function(i,s){var n=i[s.name];return i[s.name]=n?Object.assign({},n,s,{options:Object.assign({},n.options,s.options),data:Object.assign({},n.data,s.data)}):s,i},{});return Object.keys(t).map(function(i){return t[i]})}var an={placement:"bottom",modifiers:[],strategy:"absolute"};function on(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return!t.some(function(s){return!(s&&typeof s.getBoundingClientRect=="function")})}function Dl(e){e===void 0&&(e={});var t=e,i=t.defaultModifiers,s=i===void 0?[]:i,n=t.defaultOptions,r=n===void 0?an:n;return function(o,l,d){d===void 0&&(d=r);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},an,r),modifiersData:{},elements:{reference:o,popper:l},attributes:{},styles:{}},u=[],m=!1,g={state:c,setOptions:function(v){var h=typeof v=="function"?v(c.options):v;_(),c.options=Object.assign({},r,c.options,h),c.scrollParents={reference:rt(o)?xt(o):o.contextElement?xt(o.contextElement):[],popper:xt(l)};var p=yl(bl([].concat(s,c.options.modifiers)));return c.orderedModifiers=p.filter(function(E){return E.enabled}),f(),g.update()},forceUpdate:function(){if(!m){var v=c.elements,h=v.reference,p=v.popper;if(!!on(h,p)){c.rects={reference:vl(h,Wt(p),c.options.strategy==="fixed"),popper:ps(p)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(C){return c.modifiersData[C.name]=Object.assign({},C.data)});for(var E=0;E<c.orderedModifiers.length;E++){if(c.reset===!0){c.reset=!1,E=-1;continue}var T=c.orderedModifiers[E],b=T.fn,M=T.options,w=M===void 0?{}:M,R=T.name;typeof b=="function"&&(c=b({state:c,options:w,name:R,instance:g})||c)}}}},update:wl(function(){return new Promise(function(I){g.forceUpdate(),I(c)})}),destroy:function(){_(),m=!0}};if(!on(o,l))return g;g.setOptions(d).then(function(I){!m&&d.onFirstUpdate&&d.onFirstUpdate(I)});function f(){c.orderedModifiers.forEach(function(I){var v=I.name,h=I.options,p=h===void 0?{}:h,E=I.effect;if(typeof E=="function"){var T=E({state:c,name:v,instance:g,options:p}),b=function(){};u.push(T||b)}})}function _(){u.forEach(function(I){return I()}),u=[]}return g}}var Rl=[Xo,hl,zo,ko,ul,al,ml,Ho,ll],Is=Dl({defaultModifiers:Rl});const Gr={placement:"bottom",triggerType:"click",onShow:()=>{},onHide:()=>{}};class Fr{constructor(t=null,i=null,s={}){this._targetEl=t,this._triggerEl=i,this._options={...Gr,...s},this._popperInstance=this._createPopperInstace(),this._visible=!1,this._init()}_init(){this._triggerEl&&this._triggerEl.addEventListener("click",()=>{this.toggle()})}_createPopperInstace(){return Is(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,10]}}]})}_handleClickOutside(t,i){const s=t.target;s!==i&&!i.contains(s)&&!this._triggerEl.contains(s)&&this._visible&&this.hide(),document.body.removeEventListener("click",this._handleClickOutside,!0)}toggle(){this._visible?(this.hide(),document.body.removeEventListener("click",this._handleClickOutside,!0)):this.show()}show(){this._targetEl.classList.remove("hidden"),this._targetEl.classList.add("block"),this._popperInstance.setOptions(t=>({...t,modifiers:[...t.modifiers,{name:"eventListeners",enabled:!0}]})),document.body.addEventListener("click",t=>{this._handleClickOutside(t,this._targetEl)},!0),this._popperInstance.update(),this._visible=!0,this._options.onShow(this)}hide(){this._targetEl.classList.remove("block"),this._targetEl.classList.add("hidden"),this._popperInstance.setOptions(t=>({...t,modifiers:[...t.modifiers,{name:"eventListeners",enabled:!1}]})),this._visible=!1,this._options.onHide(this)}}window.Dropdown=Fr;function Ol(){document.querySelectorAll("[data-dropdown-toggle]").forEach(e=>{const t=document.getElementById(e.getAttribute("data-dropdown-toggle")),i=e.getAttribute("data-dropdown-placement");new Fr(t,e,{placement:i||Gr.placement})})}const Qi={placement:"center",backdropClasses:"bg-gray-900 bg-opacity-50 dark:bg-opacity-80 fixed inset-0 z-40",backdrop:"dynamic",onHide:()=>{},onShow:()=>{},onToggle:()=>{}};class Br{constructor(t=null,i={}){this._targetEl=t,this._options={...Qi,...i},this._isHidden=!0,this._backdropEl=null,this._init()}_init(){this._targetEl&&(this._getPlacementClasses().map(t=>{this._targetEl.classList.add(t)}),this._targetEl.addEventListener("click",t=>{this._handleOutsideClick(t.target)}),this._targetEl.addEventListener("keydown",t=>{t.key==="Escape"&&this.hide()}))}_createBackdrop(){if(this._isHidden){const t=document.createElement("div");t.setAttribute("modal-backdrop",""),t.classList.add(...this._options.backdropClasses.split(" ")),document.querySelector("body").append(t),this._backdropEl=t}}_destroyBackdropEl(){this._isHidden||document.querySelector("[modal-backdrop]").remove()}_handleOutsideClick(t){this._options.backdrop==="dynamic"&&(t===this._targetEl||t===this._backdropEl)&&this.hide()}_getPlacementClasses(){switch(this._options.placement){case"top-left":return["justify-start","items-start"];case"top-center":return["justify-center","items-start"];case"top-right":return["justify-end","items-start"];case"center-left":return["justify-start","items-center"];case"center":return["justify-center","items-center"];case"center-right":return["justify-end","items-center"];case"bottom-left":return["justify-start","items-end"];case"bottom-center":return["justify-center","items-end"];case"bottom-right":return["justify-end","items-end"];default:return["justify-center","items-center"]}}toggle(){this._isHidden?this.show():this.hide(),this._options.onToggle(this)}show(){this._targetEl.classList.add("flex"),this._targetEl.classList.remove("hidden"),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._createBackdrop(),this._isHidden=!1,document.body.classList.add("overflow-hidden"),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.hide()}),this._options.onShow(this)}hide(){this._targetEl.classList.add("hidden"),this._targetEl.classList.remove("flex"),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._destroyBackdropEl(),this._isHidden=!0,document.body.classList.remove("overflow-hidden"),this._options.onHide(this)}isHidden(){return this._isHidden}}window.Modal=Br;const ln=(e,t)=>t.some(i=>i.id===e)?t.find(i=>i.id===e):!1;function Sl(){let e=[];document.querySelectorAll("[data-modal-toggle]").forEach(t=>{const i=t.getAttribute("data-modal-toggle"),s=document.getElementById(i),n=s.getAttribute("data-modal-placement"),r=s.getAttribute("data-modal-backdrop");s&&!s.hasAttribute("aria-hidden")&&!s.hasAttribute("aria-modal")&&s.setAttribute("aria-hidden","true");let a=null;ln(i,e)?(a=ln(i,e),a=a.object):(a=new Br(s,{placement:n||Qi.placement,backdrop:r||Qi.backdrop}),e.push({id:i,object:a})),s.hasAttribute("data-modal-show")&&s.getAttribute("data-modal-show")==="true"&&a.show(),t.addEventListener("click",()=>{a.toggle()})})}const dt={placement:"left",bodyScrolling:!1,backdrop:!0,edge:!1,edgeOffset:"bottom-[60px]",backdropClasses:"bg-gray-900 bg-opacity-50 dark:bg-opacity-80 fixed inset-0 z-30",onShow:()=>{},onHide:()=>{},onToggle:()=>{}};class Vr{constructor(t=null,i){this._targetEl=t,this._options={...dt,...i},this._visible=!1,this._init()}_init(){this._targetEl&&(this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.classList.add("transition-transform")),this._getPlacementClasses(this._options.placement).base.map(t=>{this._targetEl.classList.add(t)}),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.isVisible()&&this.hide()})}isVisible(){return this._visible}hide(){this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(t=>{this._targetEl.classList.remove(t)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(t=>{this._targetEl.classList.add(t)})):(this._getPlacementClasses(this._options.placement).active.map(t=>{this._targetEl.classList.remove(t)}),this._getPlacementClasses(this._options.placement).inactive.map(t=>{this._targetEl.classList.add(t)})),this._targetEl.setAttribute("aria-hidden","true"),this._targetEl.removeAttribute("aria-modal"),this._targetEl.removeAttribute("role"),this._options.bodyScrolling||document.body.classList.remove("overflow-hidden"),this._options.backdrop&&this._destroyBackdropEl(),this._visible=!1,this._options.onHide(this)}show(){this._options.edge?(this._getPlacementClasses(this._options.placement+"-edge").active.map(t=>{this._targetEl.classList.add(t)}),this._getPlacementClasses(this._options.placement+"-edge").inactive.map(t=>{this._targetEl.classList.remove(t)})):(this._getPlacementClasses(this._options.placement).active.map(t=>{this._targetEl.classList.add(t)}),this._getPlacementClasses(this._options.placement).inactive.map(t=>{this._targetEl.classList.remove(t)})),this._targetEl.setAttribute("aria-modal","true"),this._targetEl.setAttribute("role","dialog"),this._targetEl.removeAttribute("aria-hidden"),this._options.bodyScrolling||document.body.classList.add("overflow-hidden"),this._options.backdrop&&this._createBackdrop(),this._visible=!0,this._options.onShow(this)}toggle(){this.isVisible()?this.hide():this.show()}_createBackdrop(){if(!this._visible){const t=document.createElement("div");t.setAttribute("drawer-backdrop",""),t.classList.add(...this._options.backdropClasses.split(" ")),document.querySelector("body").append(t),t.addEventListener("click",()=>{this.hide()})}}_destroyBackdropEl(){this._visible&&document.querySelector("[drawer-backdrop]").remove()}_getPlacementClasses(t){switch(t){case"top":return{base:["top-0","left-0","right-0"],active:["transform-none"],inactive:["-translate-y-full"]};case"right":return{base:["right-0","top-0"],active:["transform-none"],inactive:["translate-x-full"]};case"bottom":return{base:["bottom-0","left-0","right-0"],active:["transform-none"],inactive:["translate-y-full"]};case"left":return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]};case"bottom-edge":return{base:["left-0","top-0"],active:["transform-none"],inactive:["translate-y-full",this._options.edgeOffset]};default:return{base:["left-0","top-0"],active:["transform-none"],inactive:["-translate-x-full"]}}}}window.Drawer=Vr;const Ot=(e,t)=>t.some(i=>i.id===e)?t.find(i=>i.id===e):!1;function Al(){let e=[];document.querySelectorAll("[data-drawer-target]").forEach(t=>{const i=document.getElementById(t.getAttribute("data-drawer-target")),s=i.id,n=t.getAttribute("data-drawer-placement"),r=t.getAttribute("data-drawer-body-scrolling"),a=t.getAttribute("data-drawer-backdrop"),o=t.getAttribute("data-drawer-edge"),l=t.getAttribute("data-drawer-edge-offset");let d=null;Ot(s,e)?(d=Ot(s,e),d=d.object):(d=new Vr(i,{placement:n||dt.placement,bodyScrolling:r?r==="true":dt.bodyScrolling,backdrop:a?a==="true":dt.backdrop,edge:o?o==="true":dt.edge,edgeOffset:l||dt.edgeOffset}),e.push({id:s,object:d}))}),document.querySelectorAll("[data-drawer-toggle]").forEach(t=>{const s=document.getElementById(t.getAttribute("data-drawer-toggle")).id,n=Ot(s,e);t.addEventListener("click",()=>{n.object.isVisible()?n.object.hide():n.object.show()})}),document.querySelectorAll("[data-drawer-dismiss]").forEach(t=>{const s=document.getElementById(t.getAttribute("data-drawer-dismiss")).id,n=Ot(s,e);t.addEventListener("click",()=>{n.object.hide()})}),document.querySelectorAll("[data-drawer-show]").forEach(t=>{const s=document.getElementById(t.getAttribute("data-drawer-show")).id,n=Ot(s,e);t.addEventListener("click",()=>{n.object.show()})})}const Ll={defaultTabId:null,activeClasses:"text-blue-600 hover:text-blue-600 dark:text-blue-500 dark:hover:text-blue-500 border-blue-600 dark:border-blue-500",inactiveClasses:"dark:border-transparent text-gray-500 hover:text-gray-600 dark:text-gray-400 border-gray-100 hover:border-gray-300 dark:border-gray-700 dark:hover:text-gray-300",onShow:()=>{}};class Ur{constructor(t=[],i={}){this._items=t,this._activeTab=i?this.getTab(i.defaultTabId):null,this._options={...Ll,...i},this._init()}_init(){this._items.length&&(this._activeTab||this._setActiveTab(this._items[0]),this.show(this._activeTab.id,!0),this._items.map(t=>{t.triggerEl.addEventListener("click",()=>{this.show(t.id)})}))}getActiveTab(){return this._activeTab}_setActiveTab(t){this._activeTab=t}getTab(t){return this._items.filter(i=>i.id===t)[0]}show(t,i=!1){const s=this.getTab(t);s===this._activeTab&&!i||(this._items.map(n=>{n!==s&&(n.triggerEl.classList.remove(...this._options.activeClasses.split(" ")),n.triggerEl.classList.add(...this._options.inactiveClasses.split(" ")),n.targetEl.classList.add("hidden"),n.triggerEl.setAttribute("aria-selected",!1))}),s.triggerEl.classList.add(...this._options.activeClasses.split(" ")),s.triggerEl.classList.remove(...this._options.inactiveClasses.split(" ")),s.triggerEl.setAttribute("aria-selected",!0),s.targetEl.classList.remove("hidden"),this._setActiveTab(s),this._options.onShow(this,s))}}window.Tabs=Ur;function Ml(){document.querySelectorAll("[data-tabs-toggle]").forEach(e=>{const t=[];let i=null;e.querySelectorAll('[role="tab"]').forEach(s=>{const n=s.getAttribute("aria-selected")==="true",r={id:s.getAttribute("data-tabs-target"),triggerEl:s,targetEl:document.querySelector(s.getAttribute("data-tabs-target"))};t.push(r),n&&(i=r.id)}),new Ur(t,{defaultTabId:i})})}const Ji={placement:"top",triggerType:"hover",onShow:()=>{},onHide:()=>{}};class $r{constructor(t=null,i=null,s={}){this._targetEl=t,this._triggerEl=i,this._options={...Ji,...s},this._popperInstance=this._createPopperInstace(),this._init()}_init(){if(this._triggerEl){const t=this._getTriggerEvents();t.showEvents.forEach(i=>{this._triggerEl.addEventListener(i,()=>{this.show()})}),t.hideEvents.forEach(i=>{this._triggerEl.addEventListener(i,()=>{this.hide()})})}}_createPopperInstace(){return Is(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,8]}}]})}_getTriggerEvents(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}}show(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(t=>({...t,modifiers:[...t.modifiers,{name:"eventListeners",enabled:!0}]})),this._popperInstance.update(),this._options.onShow(this)}hide(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(t=>({...t,modifiers:[...t.modifiers,{name:"eventListeners",enabled:!1}]})),this._options.onHide(this)}}window.Tooltip=$r;function Cl(){document.querySelectorAll("[data-tooltip-target]").forEach(e=>{const t=document.getElementById(e.getAttribute("data-tooltip-target")),i=e.getAttribute("data-tooltip-trigger"),s=e.getAttribute("data-tooltip-placement");new $r(t,e,{placement:s||Ji.placement,triggerType:i||Ji.triggerType})})}const ai={placement:"top",offset:10,triggerType:"hover",onShow:()=>{},onHide:()=>{}};class Hr{constructor(t=null,i=null,s={}){this._targetEl=t,this._triggerEl=i,this._options={...ai,...s},this._popperInstance=this._createPopperInstace(),this._init()}_init(){if(this._triggerEl){const t=this._getTriggerEvents();t.showEvents.forEach(i=>{this._triggerEl.addEventListener(i,()=>{this.show()}),this._targetEl.addEventListener(i,()=>{this.show()})}),t.hideEvents.forEach(i=>{this._triggerEl.addEventListener(i,()=>{setTimeout(()=>{this._targetEl.matches(":hover")||this.hide()},100)}),this._targetEl.addEventListener(i,()=>{setTimeout(()=>{this._triggerEl.matches(":hover")||this.hide()},100)})})}}_createPopperInstace(){return Is(this._triggerEl,this._targetEl,{placement:this._options.placement,modifiers:[{name:"offset",options:{offset:[0,this._options.offset]}}]})}_getTriggerEvents(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}}show(){this._targetEl.classList.remove("opacity-0","invisible"),this._targetEl.classList.add("opacity-100","visible"),this._popperInstance.setOptions(t=>({...t,modifiers:[...t.modifiers,{name:"eventListeners",enabled:!0}]})),this._popperInstance.update(),this._options.onShow(this)}hide(){this._targetEl.classList.remove("opacity-100","visible"),this._targetEl.classList.add("opacity-0","invisible"),this._popperInstance.setOptions(t=>({...t,modifiers:[...t.modifiers,{name:"eventListeners",enabled:!1}]})),this._options.onHide(this)}}window.Popover=Hr;function Pl(){document.querySelectorAll("[data-popover-target]").forEach(e=>{const t=document.getElementById(e.getAttribute("data-popover-target")),i=e.getAttribute("data-popover-trigger"),s=e.getAttribute("data-popover-placement"),n=e.getAttribute("data-popover-offset");new Hr(t,e,{placement:s||ai.placement,offset:n?parseInt(n):ai.offset,triggerType:i||ai.triggerType})})}const Wr={triggerType:"hover",onShow:()=>{},onHide:()=>{},onToggle:()=>{}};class Yr{constructor(t=null,i=null,s=null,n){this._parentEl=t,this._triggerEl=i,this._targetEl=s,this._options={...Wr,...n},this._visible=!1,this._init()}_init(){if(this._triggerEl){const t=this._getTriggerEvents();t.showEvents.forEach(i=>{this._triggerEl.addEventListener(i,()=>{this.show()}),this._targetEl.addEventListener(i,()=>{this.show()})}),t.hideEvents.forEach(i=>{this._parentEl.addEventListener(i,()=>{setTimeout(()=>{this._parentEl.matches(":hover")||this.hide()},100)})})}}hide(){this._targetEl.classList.add("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","false"),this._visible=!1,this._options.onHide(this)}show(){this._targetEl.classList.remove("hidden"),this._triggerEl&&this._triggerEl.setAttribute("aria-expanded","true"),this._visible=!0,this._options.onShow(this)}toggle(){this._visible?this.hide():this.show()}_getTriggerEvents(){switch(this._options.triggerType){case"hover":return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]};case"click":return{showEvents:["click","focus"],hideEvents:["focusout","blur"]};default:return{showEvents:["mouseenter","focus"],hideEvents:["mouseleave","blur"]}}}}window.Dial=Yr;function xl(){document.querySelectorAll("[data-dial-init]").forEach(e=>{const t=e.querySelector("[data-dial-toggle]"),i=document.getElementById(t.getAttribute("data-dial-toggle")),s=t.getAttribute("data-dial-trigger");new Yr(e,t,i,{triggerType:s||Wr.triggerType})})}class Nl{constructor(t,i=[]){this._eventType=t,this._eventFunctions=i}init(){this._eventFunctions.forEach(t=>{window.addEventListener(this._eventType,t)})}}const kl=new Nl("load",[_o,Io,vo,To,Ol,Sl,Al,Ml,Cl,Pl,xl]);kl.init();/*!
 * FilePond 4.30.4
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Gl=e=>e instanceof HTMLElement,Fl=(e,t=[],i=[])=>{const s={...e},n=[],r=[],a=()=>({...s}),o=()=>{const f=[...n];return n.length=0,f},l=()=>{const f=[...r];r.length=0,f.forEach(({type:_,data:I})=>{d(_,I)})},d=(f,_,I)=>{if(I&&!document.hidden){r.push({type:f,data:_});return}g[f]&&g[f](_),n.push({type:f,data:_})},c=(f,..._)=>m[f]?m[f](..._):null,u={getState:a,processActionQueue:o,processDispatchQueue:l,dispatch:d,query:c};let m={};t.forEach(f=>{m={...f(s),...m}});let g={};return i.forEach(f=>{g={...f(d,c,s),...g}}),u},Bl=(e,t,i)=>{if(typeof i=="function"){e[t]=i;return}Object.defineProperty(e,t,{...i})},K=(e,t)=>{for(const i in e)!e.hasOwnProperty(i)||t(i,e[i])},Ye=e=>{const t={};return K(e,i=>{Bl(t,i,e[i])}),t},J=(e,t,i=null)=>{if(i===null)return e.getAttribute(t)||e.hasAttribute(t);e.setAttribute(t,i)},Vl="http://www.w3.org/2000/svg",Ul=["svg","path"],cn=e=>Ul.includes(e),di=(e,t,i={})=>{typeof t=="object"&&(i=t,t=null);const s=cn(e)?document.createElementNS(Vl,e):document.createElement(e);return t&&(cn(e)?J(s,"class",t):s.className=t),K(i,(n,r)=>{J(s,n,r)}),s},$l=e=>(t,i)=>{typeof i<"u"&&e.children[i]?e.insertBefore(t,e.children[i]):e.appendChild(t)},Hl=(e,t)=>(i,s)=>(typeof s<"u"?t.splice(s,0,i):t.push(i),i),Wl=(e,t)=>i=>(t.splice(t.indexOf(i),1),i.element.parentNode&&e.removeChild(i.element),i),Yl=(()=>typeof window<"u"&&typeof window.document<"u")(),qr=()=>Yl,ql=qr()?di("svg"):{},zl="children"in ql?e=>e.children.length:e=>e.childNodes.length,zr=(e,t,i,s)=>{const n=i[0]||e.left,r=i[1]||e.top,a=n+e.width,o=r+e.height*(s[1]||1),l={element:{...e},inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:n,top:r,right:a,bottom:o}};return t.filter(d=>!d.isRectIgnored()).map(d=>d.rect).forEach(d=>{dn(l.inner,{...d.inner}),dn(l.outer,{...d.outer})}),un(l.inner),l.outer.bottom+=l.element.marginBottom,l.outer.right+=l.element.marginRight,un(l.outer),l},dn=(e,t)=>{t.top+=e.top,t.right+=e.left,t.bottom+=e.top,t.left+=e.left,t.bottom>e.bottom&&(e.bottom=t.bottom),t.right>e.right&&(e.right=t.right)},un=e=>{e.width=e.right-e.left,e.height=e.bottom-e.top},Qe=e=>typeof e=="number",jl=(e,t,i,s=.001)=>Math.abs(e-t)<s&&Math.abs(i)<s,Xl=({stiffness:e=.5,damping:t=.75,mass:i=10}={})=>{let s=null,n=null,r=0,a=!1;const d=Ye({interpolate:(c,u)=>{if(a)return;if(!(Qe(s)&&Qe(n))){a=!0,r=0;return}const m=-(n-s)*e;r+=m/i,n+=r,r*=t,jl(n,s,r)||u?(n=s,r=0,a=!0,d.onupdate(n),d.oncomplete(n)):d.onupdate(n)},target:{set:c=>{if(Qe(c)&&!Qe(n)&&(n=c),s===null&&(s=c,n=c),s=c,n===s||typeof s>"u"){a=!0,r=0,d.onupdate(n),d.oncomplete(n);return}a=!1},get:()=>s},resting:{get:()=>a},onupdate:c=>{},oncomplete:c=>{}});return d},Kl=e=>e<.5?2*e*e:-1+(4-2*e)*e,Zl=({duration:e=500,easing:t=Kl,delay:i=0}={})=>{let s=null,n,r,a=!0,o=!1,l=null;const c=Ye({interpolate:(u,m)=>{a||l===null||(s===null&&(s=u),!(u-s<i)&&(n=u-s-i,n>=e||m?(n=1,r=o?0:1,c.onupdate(r*l),c.oncomplete(r*l),a=!0):(r=n/e,c.onupdate((n>=0?t(o?1-r:r):0)*l))))},target:{get:()=>o?0:l,set:u=>{if(l===null){l=u,c.onupdate(u),c.oncomplete(u);return}u<l?(l=1,o=!0):(o=!1,l=u),a=!1,s=null}},resting:{get:()=>a},onupdate:u=>{},oncomplete:u=>{}});return c},fn={spring:Xl,tween:Zl},Ql=(e,t,i)=>{const s=e[t]&&typeof e[t][i]=="object"?e[t][i]:e[t]||e,n=typeof s=="string"?s:s.type,r=typeof s=="object"?{...s}:{};return fn[n]?fn[n](r):null},vs=(e,t,i,s=!1)=>{t=Array.isArray(t)?t:[t],t.forEach(n=>{e.forEach(r=>{let a=r,o=()=>i[r],l=d=>i[r]=d;typeof r=="object"&&(a=r.key,o=r.getter||o,l=r.setter||l),!(n[a]&&!s)&&(n[a]={get:o,set:l})})})},Jl=({mixinConfig:e,viewProps:t,viewInternalAPI:i,viewExternalAPI:s})=>{const n={...t},r=[];return K(e,(a,o)=>{const l=Ql(o);if(!l)return;l.onupdate=c=>{t[a]=c},l.target=n[a],vs([{key:a,setter:c=>{l.target!==c&&(l.target=c)},getter:()=>t[a]}],[i,s],t,!0),r.push(l)}),{write:a=>{let o=document.hidden,l=!0;return r.forEach(d=>{d.resting||(l=!1),d.interpolate(a,o)}),l},destroy:()=>{}}},ec=e=>(t,i)=>{e.addEventListener(t,i)},tc=e=>(t,i)=>{e.removeEventListener(t,i)},ic=({mixinConfig:e,viewProps:t,viewInternalAPI:i,viewExternalAPI:s,viewState:n,view:r})=>{const a=[],o=ec(r.element),l=tc(r.element);return s.on=(d,c)=>{a.push({type:d,fn:c}),o(d,c)},s.off=(d,c)=>{a.splice(a.findIndex(u=>u.type===d&&u.fn===c),1),l(d,c)},{write:()=>!0,destroy:()=>{a.forEach(d=>{l(d.type,d.fn)})}}},sc=({mixinConfig:e,viewProps:t,viewExternalAPI:i})=>{vs(e,i,t)},le=e=>e!=null,nc={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},rc=({mixinConfig:e,viewProps:t,viewInternalAPI:i,viewExternalAPI:s,view:n})=>{const r={...t},a={};vs(e,[i,s],t);const o=()=>[t.translateX||0,t.translateY||0],l=()=>[t.scaleX||0,t.scaleY||0],d=()=>n.rect?zr(n.rect,n.childViews,o(),l()):null;return i.rect={get:d},s.rect={get:d},e.forEach(c=>{t[c]=typeof r[c]>"u"?nc[c]:r[c]}),{write:()=>{if(!!ac(a,t))return oc(n.element,t),Object.assign(a,{...t}),!0},destroy:()=>{}}},ac=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const i in t)if(t[i]!==e[i])return!0;return!1},oc=(e,{opacity:t,perspective:i,translateX:s,translateY:n,scaleX:r,scaleY:a,rotateX:o,rotateY:l,rotateZ:d,originX:c,originY:u,width:m,height:g})=>{let f="",_="";(le(c)||le(u))&&(_+=`transform-origin: ${c||0}px ${u||0}px;`),le(i)&&(f+=`perspective(${i}px) `),(le(s)||le(n))&&(f+=`translate3d(${s||0}px, ${n||0}px, 0) `),(le(r)||le(a))&&(f+=`scale3d(${le(r)?r:1}, ${le(a)?a:1}, 1) `),le(d)&&(f+=`rotateZ(${d}rad) `),le(o)&&(f+=`rotateX(${o}rad) `),le(l)&&(f+=`rotateY(${l}rad) `),f.length&&(_+=`transform:${f};`),le(t)&&(_+=`opacity:${t};`,t===0&&(_+="visibility:hidden;"),t<1&&(_+="pointer-events:none;")),le(g)&&(_+=`height:${g}px;`),le(m)&&(_+=`width:${m}px;`);const I=e.elementCurrentStyle||"";(_.length!==I.length||_!==I)&&(e.style.cssText=_,e.elementCurrentStyle=_)},lc={styles:rc,listeners:ic,animations:Jl,apis:sc},hn=(e={},t={},i={})=>(t.layoutCalculated||(e.paddingTop=parseInt(i.paddingTop,10)||0,e.marginTop=parseInt(i.marginTop,10)||0,e.marginRight=parseInt(i.marginRight,10)||0,e.marginBottom=parseInt(i.marginBottom,10)||0,e.marginLeft=parseInt(i.marginLeft,10)||0,t.layoutCalculated=!0),e.left=t.offsetLeft||0,e.top=t.offsetTop||0,e.width=t.offsetWidth||0,e.height=t.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=t.scrollTop,e.hidden=t.offsetParent===null,e),ee=({tag:e="div",name:t=null,attributes:i={},read:s=()=>{},write:n=()=>{},create:r=()=>{},destroy:a=()=>{},filterFrameActionsForChild:o=(g,f)=>f,didCreateView:l=()=>{},didWriteView:d=()=>{},ignoreRect:c=!1,ignoreRectUpdate:u=!1,mixins:m=[]}={})=>(g,f={})=>{const _=di(e,`filepond--${t}`,i),I=window.getComputedStyle(_,null),v=hn();let h=null,p=!1;const E=[],T=[],b={},M={},w=[n],R=[s],C=[a],L=()=>_,P=()=>E.concat(),U=()=>b,S=F=>(B,j)=>B(F,j),$=()=>h||(h=zr(v,E,[0,0],[1,1]),h),y=()=>I,O=()=>{h=null,E.forEach(j=>j._read()),!(u&&v.width&&v.height)&&hn(v,_,I);const B={root:G,props:f,rect:v};R.forEach(j=>j(B))},x=(F,B,j)=>{let _e=B.length===0;return w.forEach(ae=>{ae({props:f,root:G,actions:B,timestamp:F,shouldOptimize:j})===!1&&(_e=!1)}),T.forEach(ae=>{ae.write(F)===!1&&(_e=!1)}),E.filter(ae=>!!ae.element.parentNode).forEach(ae=>{ae._write(F,o(ae,B),j)||(_e=!1)}),E.forEach((ae,He)=>{ae.element.parentNode||(G.appendChild(ae.element,He),ae._read(),ae._write(F,o(ae,B),j),_e=!1)}),p=_e,d({props:f,root:G,actions:B,timestamp:F}),_e},k=()=>{T.forEach(F=>F.destroy()),C.forEach(F=>{F({root:G,props:f})}),E.forEach(F=>F._destroy())},H={element:{get:L},style:{get:y},childViews:{get:P}},Y={...H,rect:{get:$},ref:{get:U},is:F=>t===F,appendChild:$l(_),createChildView:S(g),linkView:F=>(E.push(F),F),unlinkView:F=>{E.splice(E.indexOf(F),1)},appendChildView:Hl(_,E),removeChildView:Wl(_,E),registerWriter:F=>w.push(F),registerReader:F=>R.push(F),registerDestroyer:F=>C.push(F),invalidateLayout:()=>_.layoutCalculated=!1,dispatch:g.dispatch,query:g.query},he={element:{get:L},childViews:{get:P},rect:{get:$},resting:{get:()=>p},isRectIgnored:()=>c,_read:O,_write:x,_destroy:k},V={...H,rect:{get:()=>v}};Object.keys(m).sort((F,B)=>F==="styles"?1:B==="styles"?-1:0).forEach(F=>{const B=lc[F]({mixinConfig:m[F],viewProps:f,viewState:M,viewInternalAPI:Y,viewExternalAPI:he,view:Ye(V)});B&&T.push(B)});const G=Ye(Y);r({root:G,props:f});const te=zl(_);return E.forEach((F,B)=>{G.appendChild(F.element,te+B)}),l(G),Ye(he)},cc=(e,t,i=60)=>{const s="__framePainter";if(window[s]){window[s].readers.push(e),window[s].writers.push(t);return}window[s]={readers:[e],writers:[t]};const n=window[s],r=1e3/i;let a=null,o=null,l=null,d=null;const c=()=>{document.hidden?(l=()=>window.setTimeout(()=>u(performance.now()),r),d=()=>window.clearTimeout(o)):(l=()=>window.requestAnimationFrame(u),d=()=>window.cancelAnimationFrame(o))};document.addEventListener("visibilitychange",()=>{d&&d(),c(),u(performance.now())});const u=m=>{o=l(u),a||(a=m);const g=m-a;g<=r||(a=m-g%r,n.readers.forEach(f=>f()),n.writers.forEach(f=>f(m)))};return c(),u(performance.now()),{pause:()=>{d(o)}}},fe=(e,t)=>({root:i,props:s,actions:n=[],timestamp:r,shouldOptimize:a})=>{n.filter(o=>e[o.type]).forEach(o=>e[o.type]({root:i,props:s,action:o.data,timestamp:r,shouldOptimize:a})),t&&t({root:i,props:s,actions:n,timestamp:r,shouldOptimize:a})},pn=(e,t)=>t.parentNode.insertBefore(e,t),gn=(e,t)=>t.parentNode.insertBefore(e,t.nextSibling),wi=e=>Array.isArray(e),Be=e=>e==null,dc=e=>e.trim(),bi=e=>""+e,uc=(e,t=",")=>Be(e)?[]:wi(e)?e:bi(e).split(t).map(dc).filter(i=>i.length),jr=e=>typeof e=="boolean",Xr=e=>jr(e)?e:e==="true",ue=e=>typeof e=="string",Kr=e=>Qe(e)?e:ue(e)?bi(e).replace(/[a-z]+/gi,""):0,oi=e=>parseInt(Kr(e),10),mn=e=>parseFloat(Kr(e)),Dt=e=>Qe(e)&&isFinite(e)&&Math.floor(e)===e,En=(e,t=1e3)=>{if(Dt(e))return e;let i=bi(e).trim();return/MB$/i.test(i)?(i=i.replace(/MB$i/,"").trim(),oi(i)*t*t):/KB/i.test(i)?(i=i.replace(/KB$i/,"").trim(),oi(i)*t):oi(i)},Je=e=>typeof e=="function",fc=e=>{let t=self,i=e.split("."),s=null;for(;s=i.shift();)if(t=t[s],!t)return null;return t},_n={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},hc=e=>{const t={};return t.url=ue(e)?e:e.url||"",t.timeout=e.timeout?parseInt(e.timeout,10):0,t.headers=e.headers?e.headers:{},K(_n,i=>{t[i]=pc(i,e[i],_n[i],t.timeout,t.headers)}),t.process=e.process||ue(e)||e.url?t.process:null,t.remove=e.remove||null,delete t.headers,t},pc=(e,t,i,s,n)=>{if(t===null)return null;if(typeof t=="function")return t;const r={url:i==="GET"||i==="PATCH"?`?${e}=`:"",method:i,headers:n,withCredentials:!1,timeout:s,onload:null,ondata:null,onerror:null};if(ue(t))return r.url=t,r;if(Object.assign(r,t),ue(r.headers)){const a=r.headers.split(/:(.+)/);r.headers={header:a[0],value:a[1]}}return r.withCredentials=Xr(r.withCredentials),r},gc=e=>hc(e),mc=e=>e===null,se=e=>typeof e=="object"&&e!==null,Ec=e=>se(e)&&ue(e.url)&&se(e.process)&&se(e.revert)&&se(e.restore)&&se(e.fetch),es=e=>wi(e)?"array":mc(e)?"null":Dt(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":Ec(e)?"api":typeof e,_c=e=>e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'),Ic={array:uc,boolean:Xr,int:e=>es(e)==="bytes"?En(e):oi(e),number:mn,float:mn,bytes:En,string:e=>Je(e)?e:bi(e),function:e=>fc(e),serverapi:gc,object:e=>{try{return JSON.parse(_c(e))}catch{return null}}},vc=(e,t)=>Ic[t](e),Zr=(e,t,i)=>{if(e===t)return e;let s=es(e);if(s!==i){const n=vc(e,i);if(s=es(n),n===null)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${i}"`;e=n}return e},Tc=(e,t)=>{let i=e;return{enumerable:!0,get:()=>i,set:s=>{i=Zr(s,e,t)}}},yc=e=>{const t={};return K(e,i=>{const s=e[i];t[i]=Tc(s[0],s[1])}),Ye(t)},wc=e=>({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:yc(e)}),Di=(e,t="-")=>e.split(/(?=[A-Z])/).map(i=>i.toLowerCase()).join(t),bc=(e,t)=>{const i={};return K(t,s=>{i[s]={get:()=>e.getState().options[s],set:n=>{e.dispatch(`SET_${Di(s,"_").toUpperCase()}`,{value:n})}}}),i},Dc=e=>(t,i,s)=>{const n={};return K(e,r=>{const a=Di(r,"_").toUpperCase();n[`SET_${a}`]=o=>{try{s.options[r]=o.value}catch{}t(`DID_SET_${a}`,{value:s.options[r]})}}),n},Rc=e=>t=>{const i={};return K(e,s=>{i[`GET_${Di(s,"_").toUpperCase()}`]=n=>t.options[s]}),i},De={API:1,DROP:2,BROWSE:3,PASTE:4,NONE:5},Ts=()=>Math.random().toString(36).substring(2,11),ys=(e,t)=>e.splice(t,1),Oc=(e,t)=>{t?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)},Ri=()=>{const e=[],t=(s,n)=>{ys(e,e.findIndex(r=>r.event===s&&(r.cb===n||!n)))},i=(s,n,r)=>{e.filter(a=>a.event===s).map(a=>a.cb).forEach(a=>Oc(()=>a(...n),r))};return{fireSync:(s,...n)=>{i(s,n,!0)},fire:(s,...n)=>{i(s,n,!1)},on:(s,n)=>{e.push({event:s,cb:n})},onOnce:(s,n)=>{e.push({event:s,cb:(...r)=>{t(s,n),n(...r)}})},off:t}},Qr=(e,t,i)=>{Object.getOwnPropertyNames(e).filter(s=>!i.includes(s)).forEach(s=>Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(e,s)))},Sc=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],pe=e=>{const t={};return Qr(e,t,Sc),t},Ac=e=>{e.forEach((t,i)=>{t.released&&ys(e,i)})},W={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},ie={INPUT:1,LIMBO:2,LOCAL:3},Jr=e=>/[^0-9]+/.exec(e),ea=()=>Jr(1.1 .toLocaleString())[0],Lc=()=>{const e=ea(),t=1e3 .toLocaleString(),i=1e3 .toString();return t!==i?Jr(t)[0]:e==="."?",":"."},D={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},ws=[],Le=(e,t,i)=>new Promise((s,n)=>{const r=ws.filter(o=>o.key===e).map(o=>o.cb);if(r.length===0){s(t);return}const a=r.shift();r.reduce((o,l)=>o.then(d=>l(d,i)),a(t,i)).then(o=>s(o)).catch(o=>n(o))}),ot=(e,t,i)=>ws.filter(s=>s.key===e).map(s=>s.cb(t,i)),Mc=(e,t)=>ws.push({key:e,cb:t}),Cc=e=>Object.assign(ut,e),ui=()=>({...ut}),Pc=e=>{K(e,(t,i)=>{!ut[t]||(ut[t][0]=Zr(i,ut[t][0],ut[t][1]))})},ut={id:[null,D.STRING],name:["filepond",D.STRING],disabled:[!1,D.BOOLEAN],className:[null,D.STRING],required:[!1,D.BOOLEAN],captureMethod:[null,D.STRING],allowSyncAcceptAttribute:[!0,D.BOOLEAN],allowDrop:[!0,D.BOOLEAN],allowBrowse:[!0,D.BOOLEAN],allowPaste:[!0,D.BOOLEAN],allowMultiple:[!1,D.BOOLEAN],allowReplace:[!0,D.BOOLEAN],allowRevert:[!0,D.BOOLEAN],allowRemove:[!0,D.BOOLEAN],allowProcess:[!0,D.BOOLEAN],allowReorder:[!1,D.BOOLEAN],allowDirectoriesOnly:[!1,D.BOOLEAN],storeAsFile:[!1,D.BOOLEAN],forceRevert:[!1,D.BOOLEAN],maxFiles:[null,D.INT],checkValidity:[!1,D.BOOLEAN],itemInsertLocationFreedom:[!0,D.BOOLEAN],itemInsertLocation:["before",D.STRING],itemInsertInterval:[75,D.INT],dropOnPage:[!1,D.BOOLEAN],dropOnElement:[!0,D.BOOLEAN],dropValidation:[!1,D.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],D.ARRAY],instantUpload:[!0,D.BOOLEAN],maxParallelUploads:[2,D.INT],allowMinimumUploadDuration:[!0,D.BOOLEAN],chunkUploads:[!1,D.BOOLEAN],chunkForce:[!1,D.BOOLEAN],chunkSize:[5e6,D.INT],chunkRetryDelays:[[500,1e3,3e3],D.ARRAY],server:[null,D.SERVER_API],fileSizeBase:[1e3,D.INT],labelFileSizeBytes:["bytes",D.STRING],labelFileSizeKilobytes:["KB",D.STRING],labelFileSizeMegabytes:["MB",D.STRING],labelFileSizeGigabytes:["GB",D.STRING],labelDecimalSeparator:[ea(),D.STRING],labelThousandsSeparator:[Lc(),D.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',D.STRING],labelInvalidField:["Field contains invalid files",D.STRING],labelFileWaitingForSize:["Waiting for size",D.STRING],labelFileSizeNotAvailable:["Size not available",D.STRING],labelFileCountSingular:["file in list",D.STRING],labelFileCountPlural:["files in list",D.STRING],labelFileLoading:["Loading",D.STRING],labelFileAdded:["Added",D.STRING],labelFileLoadError:["Error during load",D.STRING],labelFileRemoved:["Removed",D.STRING],labelFileRemoveError:["Error during remove",D.STRING],labelFileProcessing:["Uploading",D.STRING],labelFileProcessingComplete:["Upload complete",D.STRING],labelFileProcessingAborted:["Upload cancelled",D.STRING],labelFileProcessingError:["Error during upload",D.STRING],labelFileProcessingRevertError:["Error during revert",D.STRING],labelTapToCancel:["tap to cancel",D.STRING],labelTapToRetry:["tap to retry",D.STRING],labelTapToUndo:["tap to undo",D.STRING],labelButtonRemoveItem:["Remove",D.STRING],labelButtonAbortItemLoad:["Abort",D.STRING],labelButtonRetryItemLoad:["Retry",D.STRING],labelButtonAbortItemProcessing:["Cancel",D.STRING],labelButtonUndoItemProcessing:["Undo",D.STRING],labelButtonRetryItemProcessing:["Retry",D.STRING],labelButtonProcessItem:["Upload",D.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',D.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',D.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',D.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',D.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',D.STRING],oninit:[null,D.FUNCTION],onwarning:[null,D.FUNCTION],onerror:[null,D.FUNCTION],onactivatefile:[null,D.FUNCTION],oninitfile:[null,D.FUNCTION],onaddfilestart:[null,D.FUNCTION],onaddfileprogress:[null,D.FUNCTION],onaddfile:[null,D.FUNCTION],onprocessfilestart:[null,D.FUNCTION],onprocessfileprogress:[null,D.FUNCTION],onprocessfileabort:[null,D.FUNCTION],onprocessfilerevert:[null,D.FUNCTION],onprocessfile:[null,D.FUNCTION],onprocessfiles:[null,D.FUNCTION],onremovefile:[null,D.FUNCTION],onpreparefile:[null,D.FUNCTION],onupdatefiles:[null,D.FUNCTION],onreorderfiles:[null,D.FUNCTION],beforeDropFile:[null,D.FUNCTION],beforeAddFile:[null,D.FUNCTION],beforeRemoveFile:[null,D.FUNCTION],beforePrepareFile:[null,D.FUNCTION],stylePanelLayout:[null,D.STRING],stylePanelAspectRatio:[null,D.STRING],styleItemPanelAspectRatio:[null,D.STRING],styleButtonRemoveItemPosition:["left",D.STRING],styleButtonProcessItemPosition:["right",D.STRING],styleLoadIndicatorPosition:["right",D.STRING],styleProgressIndicatorPosition:["right",D.STRING],styleButtonRemoveItemAlign:[!1,D.BOOLEAN],files:[[],D.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],D.ARRAY]},et=(e,t)=>Be(t)?e[0]||null:Dt(t)?e[t]||null:(typeof t=="object"&&(t=t.id),e.find(i=>i.id===t)||null),ta=e=>{if(Be(e))return e;if(/:/.test(e)){const t=e.split(":");return t[1]/t[0]}return parseFloat(e)},Me=e=>e.filter(t=>!t.archived),xc={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let jt=null;const Nc=()=>{if(jt===null)try{const e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));const t=document.createElement("input");t.setAttribute("type","file"),t.files=e.files,jt=t.files.length===1}catch{jt=!1}return jt},kc=[W.LOAD_ERROR,W.PROCESSING_ERROR,W.PROCESSING_REVERT_ERROR],Gc=[W.LOADING,W.PROCESSING,W.PROCESSING_QUEUED,W.INIT],Fc=[W.PROCESSING_COMPLETE],Bc=e=>kc.includes(e.status),Vc=e=>Gc.includes(e.status),Uc=e=>Fc.includes(e.status),In=e=>se(e.options.server)&&(se(e.options.server.process)||Je(e.options.server.process)),$c=e=>({GET_STATUS:()=>{const t=Me(e.items),{EMPTY:i,ERROR:s,BUSY:n,IDLE:r,READY:a}=xc;return t.length===0?i:t.some(Bc)?s:t.some(Vc)?n:t.some(Uc)?a:r},GET_ITEM:t=>et(e.items,t),GET_ACTIVE_ITEM:t=>et(Me(e.items),t),GET_ACTIVE_ITEMS:()=>Me(e.items),GET_ITEMS:()=>e.items,GET_ITEM_NAME:t=>{const i=et(e.items,t);return i?i.filename:null},GET_ITEM_SIZE:t=>{const i=et(e.items,t);return i?i.fileSize:null},GET_STYLES:()=>Object.keys(e.options).filter(t=>/^style/.test(t)).map(t=>({name:t,value:e.options[t]})),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(e.options.stylePanelLayout)?1:ta(e.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>e.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:t=>Me(e.items).filter(i=>i.status===t),GET_TOTAL_ITEMS:()=>Me(e.items).length,SHOULD_UPDATE_FILE_INPUT:()=>e.options.storeAsFile&&Nc()&&!In(e),IS_ASYNC:()=>In(e),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),Hc=e=>{const t=Me(e.items).length;if(!e.options.allowMultiple)return t===0;const i=e.options.maxFiles;return i===null||t<i},ia=(e,t,i)=>Math.max(Math.min(i,e),t),Wc=(e,t,i)=>e.splice(t,0,i),Yc=(e,t,i)=>Be(t)?null:typeof i>"u"?(e.push(t),t):(i=ia(i,0,e.length),Wc(e,i,t),t),ts=e=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e),Yt=e=>e.split("/").pop().split("?").shift(),Oi=e=>e.split(".").pop(),qc=e=>{if(typeof e!="string")return"";const t=e.split("/").pop();return/svg/.test(t)?"svg":/zip|compressed/.test(t)?"zip":/plain/.test(t)?"txt":/msword/.test(t)?"doc":/[a-z]+/.test(t)?t==="jpeg"?"jpg":t:""},St=(e,t="")=>(t+e).slice(-t.length),sa=(e=new Date)=>`${e.getFullYear()}-${St(e.getMonth()+1,"00")}-${St(e.getDate(),"00")}_${St(e.getHours(),"00")}-${St(e.getMinutes(),"00")}-${St(e.getSeconds(),"00")}`,yt=(e,t,i=null,s=null)=>{const n=typeof i=="string"?e.slice(0,e.size,i):e.slice(0,e.size,e.type);return n.lastModifiedDate=new Date,e._relativePath&&(n._relativePath=e._relativePath),ue(t)||(t=sa()),t&&s===null&&Oi(t)?n.name=t:(s=s||qc(n.type),n.name=t+(s?"."+s:"")),n},zc=()=>window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,na=(e,t)=>{const i=zc();if(i){const s=new i;return s.append(e),s.getBlob(t)}return new Blob([e],{type:t})},jc=(e,t)=>{const i=new ArrayBuffer(e.length),s=new Uint8Array(i);for(let n=0;n<e.length;n++)s[n]=e.charCodeAt(n);return na(i,t)},ra=e=>(/^data:(.+);/.exec(e)||[])[1]||null,Xc=e=>e.split(",")[1].replace(/\s/g,""),Kc=e=>atob(Xc(e)),Zc=e=>{const t=ra(e),i=Kc(e);return jc(i,t)},Qc=(e,t,i)=>yt(Zc(e),t,null,i),Jc=e=>{if(!/^content-disposition:/i.test(e))return null;const t=e.split(/filename=|filename\*=.+''/).splice(1).map(i=>i.trim().replace(/^["']|[;"']{0,2}$/g,"")).filter(i=>i.length);return t.length?decodeURI(t[t.length-1]):null},ed=e=>{if(/content-length:/i.test(e)){const t=e.match(/[0-9]+/)[0];return t?parseInt(t,10):null}return null},td=e=>/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null,bs=e=>{const t={source:null,name:null,size:null},i=e.split(`
`);for(let s of i){const n=Jc(s);if(n){t.name=n;continue}const r=ed(s);if(r){t.size=r;continue}const a=td(s);if(a){t.source=a;continue}}return t},id=e=>{const t={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},i=()=>t.progress,s=()=>{t.request&&t.request.abort&&t.request.abort()},n=()=>{const o=t.source;a.fire("init",o),o instanceof File?a.fire("load",o):o instanceof Blob?a.fire("load",yt(o,o.name)):ts(o)?a.fire("load",Qc(o)):r(o)},r=o=>{if(!e){a.fire("error",{type:"error",body:"Can't load URL",code:400});return}t.timestamp=Date.now(),t.request=e(o,l=>{t.duration=Date.now()-t.timestamp,t.complete=!0,l instanceof Blob&&(l=yt(l,l.name||Yt(o))),a.fire("load",l instanceof Blob?l:l?l.body:null)},l=>{a.fire("error",typeof l=="string"?{type:"error",code:0,body:l}:l)},(l,d,c)=>{if(c&&(t.size=c),t.duration=Date.now()-t.timestamp,!l){t.progress=null;return}t.progress=d/c,a.fire("progress",t.progress)},()=>{a.fire("abort")},l=>{const d=bs(typeof l=="string"?l:l.headers);a.fire("meta",{size:t.size||d.size,filename:d.name,source:d.source})})},a={...Ri(),setSource:o=>t.source=o,getProgress:i,abort:s,load:n};return a},vn=e=>/GET|HEAD/.test(e),it=(e,t,i)=>{const s={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{n=!0,a.abort()}};let n=!1,r=!1;i={method:"POST",headers:{},withCredentials:!1,...i},t=encodeURI(t),vn(i.method)&&e&&(t=`${t}${encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))}`);const a=new XMLHttpRequest,o=vn(i.method)?a:a.upload;return o.onprogress=l=>{n||s.onprogress(l.lengthComputable,l.loaded,l.total)},a.onreadystatechange=()=>{a.readyState<2||a.readyState===4&&a.status===0||r||(r=!0,s.onheaders(a))},a.onload=()=>{a.status>=200&&a.status<300?s.onload(a):s.onerror(a)},a.onerror=()=>s.onerror(a),a.onabort=()=>{n=!0,s.onabort()},a.ontimeout=()=>s.ontimeout(a),a.open(i.method,t,!0),Dt(i.timeout)&&(a.timeout=i.timeout),Object.keys(i.headers).forEach(l=>{const d=unescape(encodeURIComponent(i.headers[l]));a.setRequestHeader(l,d)}),i.responseType&&(a.responseType=i.responseType),i.withCredentials&&(a.withCredentials=!0),a.send(e),s},Z=(e,t,i,s)=>({type:e,code:t,body:i,headers:s}),st=e=>t=>{e(Z("error",0,"Timeout",t.getAllResponseHeaders()))},Tn=e=>/\?/.test(e),Nt=(...e)=>{let t="";return e.forEach(i=>{t+=Tn(t)&&Tn(i)?i.replace(/\?/,"&"):i}),t},Mi=(e="",t)=>{if(typeof t=="function")return t;if(!t||!ue(t.url))return null;const i=t.onload||(n=>n),s=t.onerror||(n=>null);return(n,r,a,o,l,d)=>{const c=it(n,Nt(e,t.url),{...t,responseType:"blob"});return c.onload=u=>{const m=u.getAllResponseHeaders(),g=bs(m).name||Yt(n);r(Z("load",u.status,t.method==="HEAD"?null:yt(i(u.response),g),m))},c.onerror=u=>{a(Z("error",u.status,s(u.response)||u.statusText,u.getAllResponseHeaders()))},c.onheaders=u=>{d(Z("headers",u.status,null,u.getAllResponseHeaders()))},c.ontimeout=st(a),c.onprogress=o,c.onabort=l,c}},Te={QUEUED:0,COMPLETE:1,PROCESSING:2,ERROR:3,WAITING:4},sd=(e,t,i,s,n,r,a,o,l,d,c)=>{const u=[],{chunkTransferId:m,chunkServer:g,chunkSize:f,chunkRetryDelays:_}=c,I={serverId:m,aborted:!1},v=t.ondata||(S=>S),h=t.onload||((S,$)=>$==="HEAD"?S.getResponseHeader("Upload-Offset"):S.response),p=t.onerror||(S=>null),E=S=>{const $=new FormData;se(n)&&$.append(i,JSON.stringify(n));const y=typeof t.headers=="function"?t.headers(s,n):{...t.headers,"Upload-Length":s.size},O={...t,headers:y},x=it(v($),Nt(e,t.url),O);x.onload=k=>S(h(k,O.method)),x.onerror=k=>a(Z("error",k.status,p(k.response)||k.statusText,k.getAllResponseHeaders())),x.ontimeout=st(a)},T=S=>{const $=Nt(e,g.url,I.serverId),O={headers:typeof t.headers=="function"?t.headers(I.serverId):{...t.headers},method:"HEAD"},x=it(null,$,O);x.onload=k=>S(h(k,O.method)),x.onerror=k=>a(Z("error",k.status,p(k.response)||k.statusText,k.getAllResponseHeaders())),x.ontimeout=st(a)},b=Math.floor(s.size/f);for(let S=0;S<=b;S++){const $=S*f,y=s.slice($,$+f,"application/offset+octet-stream");u[S]={index:S,size:y.size,offset:$,data:y,file:s,progress:0,retries:[..._],status:Te.QUEUED,error:null,request:null,timeout:null}}const M=()=>r(I.serverId),w=S=>S.status===Te.QUEUED||S.status===Te.ERROR,R=S=>{if(I.aborted)return;if(S=S||u.find(w),!S){u.every(H=>H.status===Te.COMPLETE)&&M();return}S.status=Te.PROCESSING,S.progress=null;const $=g.ondata||(H=>H),y=g.onerror||(H=>null),O=Nt(e,g.url,I.serverId),x=typeof g.headers=="function"?g.headers(S):{...g.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":S.offset,"Upload-Length":s.size,"Upload-Name":s.name},k=S.request=it($(S.data),O,{...g,headers:x});k.onload=()=>{S.status=Te.COMPLETE,S.request=null,P()},k.onprogress=(H,Y,he)=>{S.progress=H?Y:null,L()},k.onerror=H=>{S.status=Te.ERROR,S.request=null,S.error=y(H.response)||H.statusText,C(S)||a(Z("error",H.status,y(H.response)||H.statusText,H.getAllResponseHeaders()))},k.ontimeout=H=>{S.status=Te.ERROR,S.request=null,C(S)||st(a)(H)},k.onabort=()=>{S.status=Te.QUEUED,S.request=null,l()}},C=S=>S.retries.length===0?!1:(S.status=Te.WAITING,clearTimeout(S.timeout),S.timeout=setTimeout(()=>{R(S)},S.retries.shift()),!0),L=()=>{const S=u.reduce((y,O)=>y===null||O.progress===null?null:y+O.progress,0);if(S===null)return o(!1,0,0);const $=u.reduce((y,O)=>y+O.size,0);o(!0,S,$)},P=()=>{u.filter($=>$.status===Te.PROCESSING).length>=1||R()},U=()=>{u.forEach(S=>{clearTimeout(S.timeout),S.request&&S.request.abort()})};return I.serverId?T(S=>{I.aborted||(u.filter($=>$.offset<S).forEach($=>{$.status=Te.COMPLETE,$.progress=$.size}),P())}):E(S=>{I.aborted||(d(S),I.serverId=S,P())}),{abort:()=>{I.aborted=!0,U()}}},nd=(e,t,i,s)=>(n,r,a,o,l,d,c)=>{if(!n)return;const u=s.chunkUploads,m=u&&n.size>s.chunkSize,g=u&&(m||s.chunkForce);if(n instanceof Blob&&g)return sd(e,t,i,n,r,a,o,l,d,c,s);const f=t.ondata||(T=>T),_=t.onload||(T=>T),I=t.onerror||(T=>null),v=typeof t.headers=="function"?t.headers(n,r)||{}:{...t.headers},h={...t,headers:v};var p=new FormData;se(r)&&p.append(i,JSON.stringify(r)),(n instanceof Blob?[{name:null,file:n}]:n).forEach(T=>{p.append(i,T.file,T.name===null?T.file.name:`${T.name}${T.file.name}`)});const E=it(f(p),Nt(e,t.url),h);return E.onload=T=>{a(Z("load",T.status,_(T.response),T.getAllResponseHeaders()))},E.onerror=T=>{o(Z("error",T.status,I(T.response)||T.statusText,T.getAllResponseHeaders()))},E.ontimeout=st(o),E.onprogress=l,E.onabort=d,E},rd=(e="",t,i,s)=>typeof t=="function"?(...n)=>t(i,...n,s):!t||!ue(t.url)?null:nd(e,t,i,s),At=(e="",t)=>{if(typeof t=="function")return t;if(!t||!ue(t.url))return(n,r)=>r();const i=t.onload||(n=>n),s=t.onerror||(n=>null);return(n,r,a)=>{const o=it(n,e+t.url,t);return o.onload=l=>{r(Z("load",l.status,i(l.response),l.getAllResponseHeaders()))},o.onerror=l=>{a(Z("error",l.status,s(l.response)||l.statusText,l.getAllResponseHeaders()))},o.ontimeout=st(a),o}},aa=(e=0,t=1)=>e+Math.random()*(t-e),ad=(e,t=1e3,i=0,s=25,n=250)=>{let r=null;const a=Date.now(),o=()=>{let l=Date.now()-a,d=aa(s,n);l+d>t&&(d=l+d-t);let c=l/t;if(c>=1||document.hidden){e(1);return}e(c),r=setTimeout(o,d)};return t>0&&o(),{clear:()=>{clearTimeout(r)}}},od=(e,t)=>{const i={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:s}=t,n=(c,u)=>{const m=()=>{i.duration===0||i.progress===null||d.fire("progress",d.getProgress())},g=()=>{i.complete=!0,d.fire("load-perceived",i.response.body)};d.fire("start"),i.timestamp=Date.now(),i.perceivedPerformanceUpdater=ad(f=>{i.perceivedProgress=f,i.perceivedDuration=Date.now()-i.timestamp,m(),i.response&&i.perceivedProgress===1&&!i.complete&&g()},s?aa(750,1500):0),i.request=e(c,u,f=>{i.response=se(f)?f:{type:"load",code:200,body:`${f}`,headers:{}},i.duration=Date.now()-i.timestamp,i.progress=1,d.fire("load",i.response.body),(!s||s&&i.perceivedProgress===1)&&g()},f=>{i.perceivedPerformanceUpdater.clear(),d.fire("error",se(f)?f:{type:"error",code:0,body:`${f}`})},(f,_,I)=>{i.duration=Date.now()-i.timestamp,i.progress=f?_/I:null,m()},()=>{i.perceivedPerformanceUpdater.clear(),d.fire("abort",i.response?i.response.body:null)},f=>{d.fire("transfer",f)})},r=()=>{!i.request||(i.perceivedPerformanceUpdater.clear(),i.request.abort&&i.request.abort(),i.complete=!0)},a=()=>{r(),i.complete=!1,i.perceivedProgress=0,i.progress=0,i.timestamp=null,i.perceivedDuration=0,i.duration=0,i.request=null,i.response=null},o=s?()=>i.progress?Math.min(i.progress,i.perceivedProgress):null:()=>i.progress||null,l=s?()=>Math.min(i.duration,i.perceivedDuration):()=>i.duration,d={...Ri(),process:n,abort:r,getProgress:o,getDuration:l,reset:a};return d},oa=e=>e.substring(0,e.lastIndexOf("."))||e,ld=e=>{let t=[e.name,e.size,e.type];return e instanceof Blob||ts(e)?t[0]=e.name||sa():ts(e)?(t[1]=e.length,t[2]=ra(e)):ue(e)&&(t[0]=Yt(e),t[1]=0,t[2]="application/octet-stream"),{name:t[0],size:t[1],type:t[2]}},wt=e=>!!(e instanceof File||e instanceof Blob&&e.name),la=e=>{if(!se(e))return e;const t=wi(e)?[]:{};for(const i in e){if(!e.hasOwnProperty(i))continue;const s=e[i];t[i]=s&&se(s)?la(s):s}return t},cd=(e=null,t=null,i=null)=>{const s=Ts(),n={archived:!1,frozen:!1,released:!1,source:null,file:i,serverFileReference:t,transferId:null,processingAborted:!1,status:t?W.PROCESSING_COMPLETE:W.INIT,activeLoader:null,activeProcessor:null};let r=null;const a={},o=w=>n.status=w,l=(w,...R)=>{n.released||n.frozen||b.fire(w,...R)},d=()=>Oi(n.file.name),c=()=>n.file.type,u=()=>n.file.size,m=()=>n.file,g=(w,R,C)=>{if(n.source=w,b.fireSync("init"),n.file){b.fireSync("load-skip");return}n.file=ld(w),R.on("init",()=>{l("load-init")}),R.on("meta",L=>{n.file.size=L.size,n.file.filename=L.filename,L.source&&(e=ie.LIMBO,n.serverFileReference=L.source,n.status=W.PROCESSING_COMPLETE),l("load-meta")}),R.on("progress",L=>{o(W.LOADING),l("load-progress",L)}),R.on("error",L=>{o(W.LOAD_ERROR),l("load-request-error",L)}),R.on("abort",()=>{o(W.INIT),l("load-abort")}),R.on("load",L=>{n.activeLoader=null;const P=S=>{n.file=wt(S)?S:n.file,e===ie.LIMBO&&n.serverFileReference?o(W.PROCESSING_COMPLETE):o(W.IDLE),l("load")},U=S=>{n.file=L,l("load-meta"),o(W.LOAD_ERROR),l("load-file-error",S)};if(n.serverFileReference){P(L);return}C(L,P,U)}),R.setSource(w),n.activeLoader=R,R.load()},f=()=>{!n.activeLoader||n.activeLoader.load()},_=()=>{if(n.activeLoader){n.activeLoader.abort();return}o(W.INIT),l("load-abort")},I=(w,R)=>{if(n.processingAborted){n.processingAborted=!1;return}if(o(W.PROCESSING),r=null,!(n.file instanceof Blob)){b.on("load",()=>{I(w,R)});return}w.on("load",P=>{n.transferId=null,n.serverFileReference=P}),w.on("transfer",P=>{n.transferId=P}),w.on("load-perceived",P=>{n.activeProcessor=null,n.transferId=null,n.serverFileReference=P,o(W.PROCESSING_COMPLETE),l("process-complete",P)}),w.on("start",()=>{l("process-start")}),w.on("error",P=>{n.activeProcessor=null,o(W.PROCESSING_ERROR),l("process-error",P)}),w.on("abort",P=>{n.activeProcessor=null,n.serverFileReference=P,o(W.IDLE),l("process-abort"),r&&r()}),w.on("progress",P=>{l("process-progress",P)});const C=P=>{n.archived||w.process(P,{...a})},L=console.error;R(n.file,C,L),n.activeProcessor=w},v=()=>{n.processingAborted=!1,o(W.PROCESSING_QUEUED)},h=()=>new Promise(w=>{if(!n.activeProcessor){n.processingAborted=!0,o(W.IDLE),l("process-abort"),w();return}r=()=>{w()},n.activeProcessor.abort()}),p=(w,R)=>new Promise((C,L)=>{const P=n.serverFileReference!==null?n.serverFileReference:n.transferId;if(P===null){C();return}w(P,()=>{n.serverFileReference=null,n.transferId=null,C()},U=>{if(!R){C();return}o(W.PROCESSING_REVERT_ERROR),l("process-revert-error"),L(U)}),o(W.IDLE),l("process-revert")}),E=(w,R,C)=>{const L=w.split("."),P=L[0],U=L.pop();let S=a;L.forEach($=>S=S[$]),JSON.stringify(S[U])!==JSON.stringify(R)&&(S[U]=R,l("metadata-update",{key:P,value:a[P],silent:C}))},b={id:{get:()=>s},origin:{get:()=>e,set:w=>e=w},serverId:{get:()=>n.serverFileReference},transferId:{get:()=>n.transferId},status:{get:()=>n.status},filename:{get:()=>n.file.name},filenameWithoutExtension:{get:()=>oa(n.file.name)},fileExtension:{get:d},fileType:{get:c},fileSize:{get:u},file:{get:m},relativePath:{get:()=>n.file._relativePath},source:{get:()=>n.source},getMetadata:w=>la(w?a[w]:a),setMetadata:(w,R,C)=>{if(se(w)){const L=w;return Object.keys(L).forEach(P=>{E(P,L[P],R)}),w}return E(w,R,C),R},extend:(w,R)=>M[w]=R,abortLoad:_,retryLoad:f,requestProcessing:v,abortProcessing:h,load:g,process:I,revert:p,...Ri(),freeze:()=>n.frozen=!0,release:()=>n.released=!0,released:{get:()=>n.released},archive:()=>n.archived=!0,archived:{get:()=>n.archived}},M=Ye(b);return M},dd=(e,t)=>Be(t)?0:ue(t)?e.findIndex(i=>i.id===t):-1,yn=(e,t)=>{const i=dd(e,t);if(!(i<0))return e[i]||null},wn=(e,t,i,s,n,r)=>{const a=it(null,e,{method:"GET",responseType:"blob"});return a.onload=o=>{const l=o.getAllResponseHeaders(),d=bs(l).name||Yt(e);t(Z("load",o.status,yt(o.response,d),l))},a.onerror=o=>{i(Z("error",o.status,o.statusText,o.getAllResponseHeaders()))},a.onheaders=o=>{r(Z("headers",o.status,null,o.getAllResponseHeaders()))},a.ontimeout=st(i),a.onprogress=s,a.onabort=n,a},bn=e=>(e.indexOf("//")===0&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),ud=e=>(e.indexOf(":")>-1||e.indexOf("//")>-1)&&bn(location.href)!==bn(e),Xt=e=>(...t)=>Je(e)?e(...t):e,fd=e=>!wt(e.file),Ci=(e,t)=>{clearTimeout(t.listUpdateTimeout),t.listUpdateTimeout=setTimeout(()=>{e("DID_UPDATE_ITEMS",{items:Me(t.items)})},0)},Dn=(e,...t)=>new Promise(i=>{if(!e)return i(!0);const s=e(...t);if(s==null)return i(!0);if(typeof s=="boolean")return i(s);typeof s.then=="function"&&s.then(i)}),Pi=(e,t)=>{e.items.sort((i,s)=>t(pe(i),pe(s)))},ye=(e,t)=>({query:i,success:s=()=>{},failure:n=()=>{},...r}={})=>{const a=et(e.items,i);if(!a){n({error:Z("error",0,"Item not found"),file:null});return}t(a,s,n,r||{})},hd=(e,t,i)=>({ABORT_ALL:()=>{Me(i.items).forEach(s=>{s.freeze(),s.abortLoad(),s.abortProcessing()})},DID_SET_FILES:({value:s=[]})=>{const n=s.map(a=>({source:a.source?a.source:a,options:a.options}));let r=Me(i.items);r.forEach(a=>{n.find(o=>o.source===a.source||o.source===a.file)||e("REMOVE_ITEM",{query:a,remove:!1})}),r=Me(i.items),n.forEach((a,o)=>{r.find(l=>l.source===a.source||l.file===a.source)||e("ADD_ITEM",{...a,interactionMethod:De.NONE,index:o})})},DID_UPDATE_ITEM_METADATA:({id:s,action:n,change:r})=>{r.silent||(clearTimeout(i.itemUpdateTimeout),i.itemUpdateTimeout=setTimeout(()=>{const a=yn(i.items,s);if(!t("IS_ASYNC")){Le("SHOULD_PREPARE_OUTPUT",!1,{item:a,query:t,action:n,change:r}).then(c=>{const u=t("GET_BEFORE_PREPARE_FILE");u&&(c=u(a,c)),c&&e("REQUEST_PREPARE_OUTPUT",{query:s,item:a,success:m=>{e("DID_PREPARE_OUTPUT",{id:s,file:m})}},!0)});return}a.origin===ie.LOCAL&&e("DID_LOAD_ITEM",{id:a.id,error:null,serverFileReference:a.source});const o=()=>{setTimeout(()=>{e("REQUEST_ITEM_PROCESSING",{query:s})},32)},l=c=>{a.revert(At(i.options.server.url,i.options.server.revert),t("GET_FORCE_REVERT")).then(c?o:()=>{}).catch(()=>{})},d=c=>{a.abortProcessing().then(c?o:()=>{})};if(a.status===W.PROCESSING_COMPLETE)return l(i.options.instantUpload);if(a.status===W.PROCESSING)return d(i.options.instantUpload);i.options.instantUpload&&o()},0))},MOVE_ITEM:({query:s,index:n})=>{const r=et(i.items,s);if(!r)return;const a=i.items.indexOf(r);n=ia(n,0,i.items.length-1),a!==n&&i.items.splice(n,0,i.items.splice(a,1)[0])},SORT:({compare:s})=>{Pi(i,s),e("DID_SORT_ITEMS",{items:t("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:s,index:n,interactionMethod:r,success:a=()=>{},failure:o=()=>{}})=>{let l=n;if(n===-1||typeof n>"u"){const g=t("GET_ITEM_INSERT_LOCATION"),f=t("GET_TOTAL_ITEMS");l=g==="before"?0:f}const d=t("GET_IGNORED_FILES"),c=g=>wt(g)?!d.includes(g.name.toLowerCase()):!Be(g),m=s.filter(c).map(g=>new Promise((f,_)=>{e("ADD_ITEM",{interactionMethod:r,source:g.source||g,success:f,failure:_,index:l++,options:g.options||{}})}));Promise.all(m).then(a).catch(o)},ADD_ITEM:({source:s,index:n=-1,interactionMethod:r,success:a=()=>{},failure:o=()=>{},options:l={}})=>{if(Be(s)){o({error:Z("error",0,"No source"),file:null});return}if(wt(s)&&i.options.ignoredFiles.includes(s.name.toLowerCase()))return;if(!Hc(i)){if(i.options.allowMultiple||!i.options.allowMultiple&&!i.options.allowReplace){const h=Z("warning",0,"Max files");e("DID_THROW_MAX_FILES",{source:s,error:h}),o({error:h,file:null});return}const v=Me(i.items)[0];if(v.status===W.PROCESSING_COMPLETE||v.status===W.PROCESSING_REVERT_ERROR){const h=t("GET_FORCE_REVERT");if(v.revert(At(i.options.server.url,i.options.server.revert),h).then(()=>{!h||e("ADD_ITEM",{source:s,index:n,interactionMethod:r,success:a,failure:o,options:l})}).catch(()=>{}),h)return}e("REMOVE_ITEM",{query:v.id})}const d=l.type==="local"?ie.LOCAL:l.type==="limbo"?ie.LIMBO:ie.INPUT,c=cd(d,d===ie.INPUT?null:s,l.file);Object.keys(l.metadata||{}).forEach(v=>{c.setMetadata(v,l.metadata[v])}),ot("DID_CREATE_ITEM",c,{query:t,dispatch:e});const u=t("GET_ITEM_INSERT_LOCATION");i.options.itemInsertLocationFreedom||(n=u==="before"?-1:i.items.length),Yc(i.items,c,n),Je(u)&&s&&Pi(i,u);const m=c.id;c.on("init",()=>{e("DID_INIT_ITEM",{id:m})}),c.on("load-init",()=>{e("DID_START_ITEM_LOAD",{id:m})}),c.on("load-meta",()=>{e("DID_UPDATE_ITEM_META",{id:m})}),c.on("load-progress",v=>{e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:m,progress:v})}),c.on("load-request-error",v=>{const h=Xt(i.options.labelFileLoadError)(v);if(v.code>=400&&v.code<500){e("DID_THROW_ITEM_INVALID",{id:m,error:v,status:{main:h,sub:`${v.code} (${v.body})`}}),o({error:v,file:pe(c)});return}e("DID_THROW_ITEM_LOAD_ERROR",{id:m,error:v,status:{main:h,sub:i.options.labelTapToRetry}})}),c.on("load-file-error",v=>{e("DID_THROW_ITEM_INVALID",{id:m,error:v.status,status:v.status}),o({error:v.status,file:pe(c)})}),c.on("load-abort",()=>{e("REMOVE_ITEM",{query:m})}),c.on("load-skip",()=>{e("COMPLETE_LOAD_ITEM",{query:m,item:c,data:{source:s,success:a}})}),c.on("load",()=>{const v=h=>{if(!h){e("REMOVE_ITEM",{query:m});return}c.on("metadata-update",p=>{e("DID_UPDATE_ITEM_METADATA",{id:m,change:p})}),Le("SHOULD_PREPARE_OUTPUT",!1,{item:c,query:t}).then(p=>{const E=t("GET_BEFORE_PREPARE_FILE");E&&(p=E(c,p));const T=()=>{e("COMPLETE_LOAD_ITEM",{query:m,item:c,data:{source:s,success:a}}),Ci(e,i)};if(p){e("REQUEST_PREPARE_OUTPUT",{query:m,item:c,success:b=>{e("DID_PREPARE_OUTPUT",{id:m,file:b}),T()}},!0);return}T()})};Le("DID_LOAD_ITEM",c,{query:t,dispatch:e}).then(()=>{Dn(t("GET_BEFORE_ADD_FILE"),pe(c)).then(v)}).catch(h=>{if(!h||!h.error||!h.status)return v(!1);e("DID_THROW_ITEM_INVALID",{id:m,error:h.error,status:h.status})})}),c.on("process-start",()=>{e("DID_START_ITEM_PROCESSING",{id:m})}),c.on("process-progress",v=>{e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:m,progress:v})}),c.on("process-error",v=>{e("DID_THROW_ITEM_PROCESSING_ERROR",{id:m,error:v,status:{main:Xt(i.options.labelFileProcessingError)(v),sub:i.options.labelTapToRetry}})}),c.on("process-revert-error",v=>{e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:m,error:v,status:{main:Xt(i.options.labelFileProcessingRevertError)(v),sub:i.options.labelTapToRetry}})}),c.on("process-complete",v=>{e("DID_COMPLETE_ITEM_PROCESSING",{id:m,error:null,serverFileReference:v}),e("DID_DEFINE_VALUE",{id:m,value:v})}),c.on("process-abort",()=>{e("DID_ABORT_ITEM_PROCESSING",{id:m})}),c.on("process-revert",()=>{e("DID_REVERT_ITEM_PROCESSING",{id:m}),e("DID_DEFINE_VALUE",{id:m,value:null})}),e("DID_ADD_ITEM",{id:m,index:n,interactionMethod:r}),Ci(e,i);const{url:g,load:f,restore:_,fetch:I}=i.options.server||{};c.load(s,id(d===ie.INPUT?ue(s)&&ud(s)&&I?Mi(g,I):wn:d===ie.LIMBO?Mi(g,_):Mi(g,f)),(v,h,p)=>{Le("LOAD_FILE",v,{query:t}).then(h).catch(p)})},REQUEST_PREPARE_OUTPUT:({item:s,success:n,failure:r=()=>{}})=>{const a={error:Z("error",0,"Item not found"),file:null};if(s.archived)return r(a);Le("PREPARE_OUTPUT",s.file,{query:t,item:s}).then(o=>{Le("COMPLETE_PREPARE_OUTPUT",o,{query:t,item:s}).then(l=>{if(s.archived)return r(a);n(l)})})},COMPLETE_LOAD_ITEM:({item:s,data:n})=>{const{success:r,source:a}=n,o=t("GET_ITEM_INSERT_LOCATION");if(Je(o)&&a&&Pi(i,o),e("DID_LOAD_ITEM",{id:s.id,error:null,serverFileReference:s.origin===ie.INPUT?null:a}),r(pe(s)),s.origin===ie.LOCAL){e("DID_LOAD_LOCAL_ITEM",{id:s.id});return}if(s.origin===ie.LIMBO){e("DID_COMPLETE_ITEM_PROCESSING",{id:s.id,error:null,serverFileReference:a}),e("DID_DEFINE_VALUE",{id:s.id,value:s.serverId||a});return}t("IS_ASYNC")&&i.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:s.id})},RETRY_ITEM_LOAD:ye(i,s=>{s.retryLoad()}),REQUEST_ITEM_PREPARE:ye(i,(s,n,r)=>{e("REQUEST_PREPARE_OUTPUT",{query:s.id,item:s,success:a=>{e("DID_PREPARE_OUTPUT",{id:s.id,file:a}),n({file:s,output:a})},failure:r},!0)}),REQUEST_ITEM_PROCESSING:ye(i,(s,n,r)=>{if(!(s.status===W.IDLE||s.status===W.PROCESSING_ERROR)){const o=()=>e("REQUEST_ITEM_PROCESSING",{query:s,success:n,failure:r}),l=()=>document.hidden?o():setTimeout(o,32);s.status===W.PROCESSING_COMPLETE||s.status===W.PROCESSING_REVERT_ERROR?s.revert(At(i.options.server.url,i.options.server.revert),t("GET_FORCE_REVERT")).then(l).catch(()=>{}):s.status===W.PROCESSING&&s.abortProcessing().then(l);return}s.status!==W.PROCESSING_QUEUED&&(s.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:s.id}),e("PROCESS_ITEM",{query:s,success:n,failure:r},!0))}),PROCESS_ITEM:ye(i,(s,n,r)=>{const a=t("GET_MAX_PARALLEL_UPLOADS");if(t("GET_ITEMS_BY_STATUS",W.PROCESSING).length===a){i.processingQueue.push({id:s.id,success:n,failure:r});return}if(s.status===W.PROCESSING)return;const l=()=>{const c=i.processingQueue.shift();if(!c)return;const{id:u,success:m,failure:g}=c,f=et(i.items,u);if(!f||f.archived){l();return}e("PROCESS_ITEM",{query:u,success:m,failure:g},!0)};s.onOnce("process-complete",()=>{n(pe(s)),l();const c=i.options.server;if(i.options.instantUpload&&s.origin===ie.LOCAL&&Je(c.remove)){const g=()=>{};s.origin=ie.LIMBO,i.options.server.remove(s.source,g,g)}t("GET_ITEMS_BY_STATUS",W.PROCESSING_COMPLETE).length===i.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")}),s.onOnce("process-error",c=>{r({error:c,file:pe(s)}),l()});const d=i.options;s.process(od(rd(d.server.url,d.server.process,d.name,{chunkTransferId:s.transferId,chunkServer:d.server.patch,chunkUploads:d.chunkUploads,chunkForce:d.chunkForce,chunkSize:d.chunkSize,chunkRetryDelays:d.chunkRetryDelays}),{allowMinimumUploadDuration:t("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(c,u,m)=>{Le("PREPARE_OUTPUT",c,{query:t,item:s}).then(g=>{e("DID_PREPARE_OUTPUT",{id:s.id,file:g}),u(g)}).catch(m)})}),RETRY_ITEM_PROCESSING:ye(i,s=>{e("REQUEST_ITEM_PROCESSING",{query:s})}),REQUEST_REMOVE_ITEM:ye(i,s=>{Dn(t("GET_BEFORE_REMOVE_FILE"),pe(s)).then(n=>{!n||e("REMOVE_ITEM",{query:s})})}),RELEASE_ITEM:ye(i,s=>{s.release()}),REMOVE_ITEM:ye(i,(s,n,r,a)=>{const o=()=>{const d=s.id;yn(i.items,d).archive(),e("DID_REMOVE_ITEM",{error:null,id:d,item:s}),Ci(e,i),n(pe(s))},l=i.options.server;s.origin===ie.LOCAL&&l&&Je(l.remove)&&a.remove!==!1?(e("DID_START_ITEM_REMOVE",{id:s.id}),l.remove(s.source,()=>o(),d=>{e("DID_THROW_ITEM_REMOVE_ERROR",{id:s.id,error:Z("error",0,d,null),status:{main:Xt(i.options.labelFileRemoveError)(d),sub:i.options.labelTapToRetry}})})):((a.revert&&s.origin!==ie.LOCAL&&s.serverId!==null||i.options.chunkUploads&&s.file.size>i.options.chunkSize||i.options.chunkUploads&&i.options.chunkForce)&&s.revert(At(i.options.server.url,i.options.server.revert),t("GET_FORCE_REVERT")),o())}),ABORT_ITEM_LOAD:ye(i,s=>{s.abortLoad()}),ABORT_ITEM_PROCESSING:ye(i,s=>{if(s.serverId){e("REVERT_ITEM_PROCESSING",{id:s.id});return}s.abortProcessing().then(()=>{i.options.instantUpload&&e("REMOVE_ITEM",{query:s.id})})}),REQUEST_REVERT_ITEM_PROCESSING:ye(i,s=>{if(!i.options.instantUpload){e("REVERT_ITEM_PROCESSING",{query:s});return}const n=o=>{!o||e("REVERT_ITEM_PROCESSING",{query:s})},r=t("GET_BEFORE_REMOVE_FILE");if(!r)return n(!0);const a=r(pe(s));if(a==null)return n(!0);if(typeof a=="boolean")return n(a);typeof a.then=="function"&&a.then(n)}),REVERT_ITEM_PROCESSING:ye(i,s=>{s.revert(At(i.options.server.url,i.options.server.revert),t("GET_FORCE_REVERT")).then(()=>{(i.options.instantUpload||fd(s))&&e("REMOVE_ITEM",{query:s.id})}).catch(()=>{})}),SET_OPTIONS:({options:s})=>{const n=Object.keys(s),r=pd.filter(o=>n.includes(o));[...r,...Object.keys(s).filter(o=>!r.includes(o))].forEach(o=>{e(`SET_${Di(o,"_").toUpperCase()}`,{value:s[o]})})}}),pd=["server"],Ds=e=>e,Ve=e=>document.createElement(e),Q=(e,t)=>{let i=e.childNodes[0];i?t!==i.nodeValue&&(i.nodeValue=t):(i=document.createTextNode(t),e.appendChild(i))},Rn=(e,t,i,s)=>{const n=(s%360-90)*Math.PI/180;return{x:e+i*Math.cos(n),y:t+i*Math.sin(n)}},gd=(e,t,i,s,n,r)=>{const a=Rn(e,t,i,n),o=Rn(e,t,i,s);return["M",a.x,a.y,"A",i,i,0,r,0,o.x,o.y].join(" ")},md=(e,t,i,s,n)=>{let r=1;return n>s&&n-s<=.5&&(r=0),s>n&&s-n>=.5&&(r=0),gd(e,t,i,Math.min(.9999,s)*360,Math.min(.9999,n)*360,r)},Ed=({root:e,props:t})=>{t.spin=!1,t.progress=0,t.opacity=0;const i=di("svg");e.ref.path=di("path",{"stroke-width":2,"stroke-linecap":"round"}),i.appendChild(e.ref.path),e.ref.svg=i,e.appendChild(i)},_d=({root:e,props:t})=>{if(t.opacity===0)return;t.align&&(e.element.dataset.align=t.align);const i=parseInt(J(e.ref.path,"stroke-width"),10),s=e.rect.element.width*.5;let n=0,r=0;t.spin?(n=0,r=.5):(n=0,r=t.progress);const a=md(s,s,s-i,n,r);J(e.ref.path,"d",a),J(e.ref.path,"stroke-opacity",t.spin||t.progress>0?1:0)},On=ee({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:Ed,write:_d,mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Id=({root:e,props:t})=>{e.element.innerHTML=(t.icon||"")+`<span>${t.label}</span>`,t.isDisabled=!1},vd=({root:e,props:t})=>{const{isDisabled:i}=t,s=e.query("GET_DISABLED")||t.opacity===0;s&&!i?(t.isDisabled=!0,J(e.element,"disabled","disabled")):!s&&i&&(t.isDisabled=!1,e.element.removeAttribute("disabled"))},ca=ee({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:Id,write:vd}),da=(e,t=".",i=1e3,s={})=>{const{labelBytes:n="bytes",labelKilobytes:r="KB",labelMegabytes:a="MB",labelGigabytes:o="GB"}=s;e=Math.round(Math.abs(e));const l=i,d=i*i,c=i*i*i;return e<l?`${e} ${n}`:e<d?`${Math.floor(e/l)} ${r}`:e<c?`${Sn(e/d,1,t)} ${a}`:`${Sn(e/c,2,t)} ${o}`},Sn=(e,t,i)=>e.toFixed(t).split(".").filter(s=>s!=="0").join(i),Td=({root:e,props:t})=>{const i=Ve("span");i.className="filepond--file-info-main",J(i,"aria-hidden","true"),e.appendChild(i),e.ref.fileName=i;const s=Ve("span");s.className="filepond--file-info-sub",e.appendChild(s),e.ref.fileSize=s,Q(s,e.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),Q(i,Ds(e.query("GET_ITEM_NAME",t.id)))},is=({root:e,props:t})=>{Q(e.ref.fileSize,da(e.query("GET_ITEM_SIZE",t.id),".",e.query("GET_FILE_SIZE_BASE"),e.query("GET_FILE_SIZE_LABELS",e.query))),Q(e.ref.fileName,Ds(e.query("GET_ITEM_NAME",t.id)))},An=({root:e,props:t})=>{if(Dt(e.query("GET_ITEM_SIZE",t.id))){is({root:e,props:t});return}Q(e.ref.fileSize,e.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},yd=ee({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:fe({DID_LOAD_ITEM:is,DID_UPDATE_ITEM_META:is,DID_THROW_ITEM_LOAD_ERROR:An,DID_THROW_ITEM_INVALID:An}),didCreateView:e=>{ot("CREATE_VIEW",{...e,view:e})},create:Td,mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),ua=e=>Math.round(e*100),wd=({root:e})=>{const t=Ve("span");t.className="filepond--file-status-main",e.appendChild(t),e.ref.main=t;const i=Ve("span");i.className="filepond--file-status-sub",e.appendChild(i),e.ref.sub=i,fa({root:e,action:{progress:null}})},fa=({root:e,action:t})=>{const i=t.progress===null?e.query("GET_LABEL_FILE_LOADING"):`${e.query("GET_LABEL_FILE_LOADING")} ${ua(t.progress)}%`;Q(e.ref.main,i),Q(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},bd=({root:e,action:t})=>{const i=t.progress===null?e.query("GET_LABEL_FILE_PROCESSING"):`${e.query("GET_LABEL_FILE_PROCESSING")} ${ua(t.progress)}%`;Q(e.ref.main,i),Q(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Dd=({root:e})=>{Q(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING")),Q(e.ref.sub,e.query("GET_LABEL_TAP_TO_CANCEL"))},Rd=({root:e})=>{Q(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_ABORTED")),Q(e.ref.sub,e.query("GET_LABEL_TAP_TO_RETRY"))},Od=({root:e})=>{Q(e.ref.main,e.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),Q(e.ref.sub,e.query("GET_LABEL_TAP_TO_UNDO"))},Ln=({root:e})=>{Q(e.ref.main,""),Q(e.ref.sub,"")},Lt=({root:e,action:t})=>{Q(e.ref.main,t.status.main),Q(e.ref.sub,t.status.sub)},Sd=ee({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:fe({DID_LOAD_ITEM:Ln,DID_REVERT_ITEM_PROCESSING:Ln,DID_REQUEST_ITEM_PROCESSING:Dd,DID_ABORT_ITEM_PROCESSING:Rd,DID_COMPLETE_ITEM_PROCESSING:Od,DID_UPDATE_ITEM_PROCESS_PROGRESS:bd,DID_UPDATE_ITEM_LOAD_PROGRESS:fa,DID_THROW_ITEM_LOAD_ERROR:Lt,DID_THROW_ITEM_INVALID:Lt,DID_THROW_ITEM_PROCESSING_ERROR:Lt,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Lt,DID_THROW_ITEM_REMOVE_ERROR:Lt}),didCreateView:e=>{ot("CREATE_VIEW",{...e,view:e})},create:wd,mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),ss={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},ns=[];K(ss,e=>{ns.push(e)});const ve=e=>{if(rs(e)==="right")return 0;const t=e.ref.buttonRemoveItem.rect.element;return t.hidden?null:t.width+t.left},Ad=e=>e.ref.buttonAbortItemLoad.rect.element.width,Kt=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.height/4),Ld=e=>Math.floor(e.ref.buttonRemoveItem.rect.element.left/2),Md=e=>e.query("GET_STYLE_LOAD_INDICATOR_POSITION"),Cd=e=>e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION"),rs=e=>e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),Pd={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:Md},processProgressIndicator:{opacity:0,align:Cd},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Mn={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:ve},status:{translateX:ve}},xi={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},ft={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:ve},status:{translateX:ve,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:ve},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:rs},info:{translateX:ve},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:rs},buttonRemoveItem:{opacity:1},info:{translateX:ve},status:{opacity:1,translateX:ve}},DID_LOAD_ITEM:Mn,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:ve},status:{translateX:ve}},DID_START_ITEM_PROCESSING:xi,DID_REQUEST_ITEM_PROCESSING:xi,DID_UPDATE_ITEM_PROCESS_PROGRESS:xi,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:ve}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:ve},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Mn},xd=ee({create:({root:e})=>{e.element.innerHTML=e.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),Nd=({root:e,props:t})=>{const i=Object.keys(ss).reduce((f,_)=>(f[_]={...ss[_]},f),{}),{id:s}=t,n=e.query("GET_ALLOW_REVERT"),r=e.query("GET_ALLOW_REMOVE"),a=e.query("GET_ALLOW_PROCESS"),o=e.query("GET_INSTANT_UPLOAD"),l=e.query("IS_ASYNC"),d=e.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let c;l?a&&!n?c=f=>!/RevertItemProcessing/.test(f):!a&&n?c=f=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(f):!a&&!n&&(c=f=>!/Process/.test(f)):c=f=>!/Process/.test(f);const u=c?ns.filter(c):ns.concat();if(o&&n&&(i.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",i.RevertItemProcessing.icon="GET_ICON_REMOVE"),l&&!n){const f=ft.DID_COMPLETE_ITEM_PROCESSING;f.info.translateX=Ld,f.info.translateY=Kt,f.status.translateY=Kt,f.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(l&&!a&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach(f=>{ft[f].status.translateY=Kt}),ft.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Ad),d&&n){i.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const f=ft.DID_COMPLETE_ITEM_PROCESSING;f.info.translateX=ve,f.status.translateY=Kt,f.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}r||(i.RemoveItem.disabled=!0),K(i,(f,_)=>{const I=e.createChildView(ca,{label:e.query(_.label),icon:e.query(_.icon),opacity:0});u.includes(f)&&e.appendChildView(I),_.disabled&&(I.element.setAttribute("disabled","disabled"),I.element.setAttribute("hidden","hidden")),I.element.dataset.align=e.query(`GET_STYLE_${_.align}`),I.element.classList.add(_.className),I.on("click",v=>{v.stopPropagation(),!_.disabled&&e.dispatch(_.action,{query:s})}),e.ref[`button${f}`]=I}),e.ref.processingCompleteIndicator=e.appendChildView(e.createChildView(xd)),e.ref.processingCompleteIndicator.element.dataset.align=e.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),e.ref.info=e.appendChildView(e.createChildView(yd,{id:s})),e.ref.status=e.appendChildView(e.createChildView(Sd,{id:s}));const m=e.appendChildView(e.createChildView(On,{opacity:0,align:e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));m.element.classList.add("filepond--load-indicator"),e.ref.loadProgressIndicator=m;const g=e.appendChildView(e.createChildView(On,{opacity:0,align:e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));g.element.classList.add("filepond--process-indicator"),e.ref.processProgressIndicator=g,e.ref.activeStyles=[]},kd=({root:e,actions:t,props:i})=>{Gd({root:e,actions:t,props:i});let s=t.concat().filter(n=>/^DID_/.test(n.type)).reverse().find(n=>ft[n.type]);if(s){e.ref.activeStyles=[];const n=ft[s.type];K(Pd,(r,a)=>{const o=e.ref[r];K(a,(l,d)=>{const c=n[r]&&typeof n[r][l]<"u"?n[r][l]:d;e.ref.activeStyles.push({control:o,key:l,value:c})})})}e.ref.activeStyles.forEach(({control:n,key:r,value:a})=>{n[r]=typeof a=="function"?a(e):a})},Gd=fe({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:e,action:t})=>{e.ref.buttonAbortItemProcessing.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:e,action:t})=>{e.ref.buttonAbortItemLoad.label=t.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:e,action:t})=>{e.ref.buttonAbortItemRemoval.label=t.value},DID_REQUEST_ITEM_PROCESSING:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:e})=>{e.ref.loadProgressIndicator.spin=!0,e.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:e})=>{e.ref.processProgressIndicator.spin=!0,e.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:e,action:t})=>{e.ref.loadProgressIndicator.spin=!1,e.ref.loadProgressIndicator.progress=t.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:e,action:t})=>{e.ref.processProgressIndicator.spin=!1,e.ref.processProgressIndicator.progress=t.progress}}),Fd=ee({create:Nd,write:kd,didCreateView:e=>{ot("CREATE_VIEW",{...e,view:e})},name:"file"}),Bd=({root:e,props:t})=>{e.ref.fileName=Ve("legend"),e.appendChild(e.ref.fileName),e.ref.file=e.appendChildView(e.createChildView(Fd,{id:t.id})),e.ref.data=!1},Vd=({root:e,props:t})=>{Q(e.ref.fileName,Ds(e.query("GET_ITEM_NAME",t.id)))},Ud=ee({create:Bd,ignoreRect:!0,write:fe({DID_LOAD_ITEM:Vd}),didCreateView:e=>{ot("CREATE_VIEW",{...e,view:e})},tag:"fieldset",name:"file-wrapper"}),Cn={type:"spring",damping:.6,mass:7},$d=({root:e,props:t})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:Cn},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:Cn},styles:["translateY"]}}].forEach(i=>{Hd(e,i,t.name)}),e.element.classList.add(`filepond--${t.name}`),e.ref.scalable=null},Hd=(e,t,i)=>{const s=ee({name:`panel-${t.name} filepond--${i}`,mixins:t.mixins,ignoreRectUpdate:!0}),n=e.createChildView(s,t.props);e.ref[t.name]=e.appendChildView(n)},Wd=({root:e,props:t})=>{if((e.ref.scalable===null||t.scalable!==e.ref.scalable)&&(e.ref.scalable=jr(t.scalable)?t.scalable:!0,e.element.dataset.scalable=e.ref.scalable),!t.height)return;const i=e.ref.top.rect.element,s=e.ref.bottom.rect.element,n=Math.max(i.height+s.height,t.height);e.ref.center.translateY=i.height,e.ref.center.scaleY=(n-i.height-s.height)/100,e.ref.bottom.translateY=n-s.height},ha=ee({name:"panel",read:({root:e,props:t})=>t.heightCurrent=e.ref.bottom.translateY,write:Wd,create:$d,ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),Yd=e=>{const t=e.map(s=>s.id);let i;return{setIndex:s=>{i=s},getIndex:()=>i,getItemIndex:s=>t.indexOf(s.id)}},Pn={type:"spring",stiffness:.75,damping:.45,mass:10},xn="spring",Nn={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},qd=({root:e,props:t})=>{if(e.ref.handleClick=s=>e.dispatch("DID_ACTIVATE_ITEM",{id:t.id}),e.element.id=`filepond--item-${t.id}`,e.element.addEventListener("click",e.ref.handleClick),e.ref.container=e.appendChildView(e.createChildView(Ud,{id:t.id})),e.ref.panel=e.appendChildView(e.createChildView(ha,{name:"item-panel"})),e.ref.panel.height=null,t.markedForRemoval=!1,!e.query("GET_ALLOW_REORDER"))return;e.element.dataset.dragState="idle";const i=s=>{if(!s.isPrimary)return;let n=!1;const r={x:s.pageX,y:s.pageY};t.dragOrigin={x:e.translateX,y:e.translateY},t.dragCenter={x:s.offsetX,y:s.offsetY};const a=Yd(e.query("GET_ACTIVE_ITEMS"));e.dispatch("DID_GRAB_ITEM",{id:t.id,dragState:a});const o=d=>{if(!d.isPrimary)return;d.stopPropagation(),d.preventDefault(),t.dragOffset={x:d.pageX-r.x,y:d.pageY-r.y},t.dragOffset.x*t.dragOffset.x+t.dragOffset.y*t.dragOffset.y>16&&!n&&(n=!0,e.element.removeEventListener("click",e.ref.handleClick)),e.dispatch("DID_DRAG_ITEM",{id:t.id,dragState:a})},l=d=>{!d.isPrimary||(document.removeEventListener("pointermove",o),document.removeEventListener("pointerup",l),t.dragOffset={x:d.pageX-r.x,y:d.pageY-r.y},e.dispatch("DID_DROP_ITEM",{id:t.id,dragState:a}),n&&setTimeout(()=>e.element.addEventListener("click",e.ref.handleClick),0))};document.addEventListener("pointermove",o),document.addEventListener("pointerup",l)};e.element.addEventListener("pointerdown",i)},zd=fe({DID_UPDATE_PANEL_HEIGHT:({root:e,action:t})=>{e.height=t.height}}),jd=fe({DID_GRAB_ITEM:({root:e,props:t})=>{t.dragOrigin={x:e.translateX,y:e.translateY}},DID_DRAG_ITEM:({root:e})=>{e.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:e,props:t})=>{t.dragOffset=null,t.dragOrigin=null,e.element.dataset.dragState="drop"}},({root:e,actions:t,props:i,shouldOptimize:s})=>{e.element.dataset.dragState==="drop"&&e.scaleX<=1&&(e.element.dataset.dragState="idle");let n=t.concat().filter(a=>/^DID_/.test(a.type)).reverse().find(a=>Nn[a.type]);n&&n.type!==i.currentState&&(i.currentState=n.type,e.element.dataset.filepondItemState=Nn[i.currentState]||"");const r=e.query("GET_ITEM_PANEL_ASPECT_RATIO")||e.query("GET_PANEL_ASPECT_RATIO");r?s||(e.height=e.rect.element.width*r):(zd({root:e,actions:t,props:i}),!e.height&&e.ref.container.rect.element.height>0&&(e.height=e.ref.container.rect.element.height)),s&&(e.ref.panel.height=null),e.ref.panel.height=e.height}),Xd=ee({create:qd,write:jd,destroy:({root:e,props:t})=>{e.element.removeEventListener("click",e.ref.handleClick),e.dispatch("RELEASE_ITEM",{query:t.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:xn,scaleY:xn,translateX:Pn,translateY:Pn,opacity:{type:"tween",duration:150}}}});var Rs=(e,t)=>Math.max(1,Math.floor((e+1)/t));const Os=(e,t,i)=>{if(!i)return;const s=e.rect.element.width,n=t.length;let r=null;if(n===0||i.top<t[0].rect.element.top)return-1;const o=t[0].rect.element,l=o.marginLeft+o.marginRight,d=o.width+l,c=Rs(s,d);if(c===1){for(let g=0;g<n;g++){const f=t[g],_=f.rect.outer.top+f.rect.element.height*.5;if(i.top<_)return g}return n}const u=o.marginTop+o.marginBottom,m=o.height+u;for(let g=0;g<n;g++){const f=g%c,_=Math.floor(g/c),I=f*d,v=_*m,h=v-o.marginTop,p=I+d,E=v+m+o.marginBottom;if(i.top<E&&i.top>h){if(i.left<p)return g;g!==n-1?r=g:r=null}}return r!==null?r:n},Zt={height:0,width:0,get getHeight(){return this.height},set setHeight(e){(this.height===0||e===0)&&(this.height=e)},get getWidth(){return this.width},set setWidth(e){(this.width===0||e===0)&&(this.width=e)},setDimensions:function(e,t){(this.height===0||e===0)&&(this.height=e),(this.width===0||t===0)&&(this.width=t)}},Kd=({root:e})=>{J(e.element,"role","list"),e.ref.lastItemSpanwDate=Date.now()},Zd=({root:e,action:t})=>{const{id:i,index:s,interactionMethod:n}=t;e.ref.addIndex=s;const r=Date.now();let a=r,o=1;if(n!==De.NONE){o=0;const l=e.query("GET_ITEM_INSERT_INTERVAL"),d=r-e.ref.lastItemSpanwDate;a=d<l?r+(l-d):r}e.ref.lastItemSpanwDate=a,e.appendChildView(e.createChildView(Xd,{spawnDate:a,id:i,opacity:o,interactionMethod:n}),s)},kn=(e,t,i,s=0,n=1)=>{e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=t,e.translateY=i,Date.now()>e.spawnDate&&(e.opacity===0&&Qd(e,t,i,s,n),e.scaleX=1,e.scaleY=1,e.opacity=1))},Qd=(e,t,i,s,n)=>{e.interactionMethod===De.NONE?(e.translateX=null,e.translateX=t,e.translateY=null,e.translateY=i):e.interactionMethod===De.DROP?(e.translateX=null,e.translateX=t-s*20,e.translateY=null,e.translateY=i-n*10,e.scaleX=.8,e.scaleY=.8):e.interactionMethod===De.BROWSE?(e.translateY=null,e.translateY=i-30):e.interactionMethod===De.API&&(e.translateX=null,e.translateX=t-30,e.translateY=null)},Jd=({root:e,action:t})=>{const{id:i}=t,s=e.childViews.find(n=>n.id===i);!s||(s.scaleX=.9,s.scaleY=.9,s.opacity=0,s.markedForRemoval=!0)},Ni=e=>e.rect.element.height+e.rect.element.marginBottom*.5+e.rect.element.marginTop*.5,eu=e=>e.rect.element.width+e.rect.element.marginLeft*.5+e.rect.element.marginRight*.5,tu=({root:e,action:t})=>{const{id:i,dragState:s}=t,n=e.query("GET_ITEM",{id:i}),r=e.childViews.find(I=>I.id===i),a=e.childViews.length,o=s.getItemIndex(n);if(!r)return;const l={x:r.dragOrigin.x+r.dragOffset.x+r.dragCenter.x,y:r.dragOrigin.y+r.dragOffset.y+r.dragCenter.y},d=Ni(r),c=eu(r);let u=Math.floor(e.rect.outer.width/c);u>a&&(u=a);const m=Math.floor(a/u+1);Zt.setHeight=d*m,Zt.setWidth=c*u;var g={y:Math.floor(l.y/d),x:Math.floor(l.x/c),getGridIndex:function(){return l.y>Zt.getHeight||l.y<0||l.x>Zt.getWidth||l.x<0?o:this.y*u+this.x},getColIndex:function(){const v=e.query("GET_ACTIVE_ITEMS"),h=e.childViews.filter(L=>L.rect.element.height),p=v.map(L=>h.find(P=>P.id===L.id)),E=p.findIndex(L=>L===r),T=Ni(r),b=p.length;let M=b,w=0,R=0,C=0;for(let L=0;L<b;L++)if(w=Ni(p[L]),C=R,R=C+w,l.y<R){if(E>L){if(l.y<C+T){M=L;break}continue}M=L;break}return M}};const f=u>1?g.getGridIndex():g.getColIndex();e.dispatch("MOVE_ITEM",{query:r,index:f});const _=s.getIndex();if(_===void 0||_!==f){if(s.setIndex(f),_===void 0)return;e.dispatch("DID_REORDER_ITEMS",{items:e.query("GET_ACTIVE_ITEMS"),origin:o,target:f})}},iu=fe({DID_ADD_ITEM:Zd,DID_REMOVE_ITEM:Jd,DID_DRAG_ITEM:tu}),su=({root:e,props:t,actions:i,shouldOptimize:s})=>{iu({root:e,props:t,actions:i});const{dragCoordinates:n}=t,r=e.rect.element.width,a=e.childViews.filter(p=>p.rect.element.height),o=e.query("GET_ACTIVE_ITEMS").map(p=>a.find(E=>E.id===p.id)).filter(p=>p),l=n?Os(e,o,n):null,d=e.ref.addIndex||null;e.ref.addIndex=null;let c=0,u=0,m=0;if(o.length===0)return;const g=o[0].rect.element,f=g.marginTop+g.marginBottom,_=g.marginLeft+g.marginRight,I=g.width+_,v=g.height+f,h=Rs(r,I);if(h===1){let p=0,E=0;o.forEach((T,b)=>{if(l){let R=b-l;R===-2?E=-f*.25:R===-1?E=-f*.75:R===0?E=f*.75:R===1?E=f*.25:E=0}s&&(T.translateX=null,T.translateY=null),T.markedForRemoval||kn(T,0,p+E);let w=(T.rect.element.height+f)*(T.markedForRemoval?T.opacity:1);p+=w})}else{let p=0,E=0;o.forEach((T,b)=>{b===l&&(c=1),b===d&&(m+=1),T.markedForRemoval&&T.opacity<.5&&(u-=1);const M=b+m+c+u,w=M%h,R=Math.floor(M/h),C=w*I,L=R*v,P=Math.sign(C-p),U=Math.sign(L-E);p=C,E=L,!T.markedForRemoval&&(s&&(T.translateX=null,T.translateY=null),kn(T,C,L,P,U))})}},nu=(e,t)=>t.filter(i=>i.data&&i.data.id?e.id===i.data.id:!0),ru=ee({create:Kd,write:su,tag:"ul",name:"list",didWriteView:({root:e})=>{e.childViews.filter(t=>t.markedForRemoval&&t.opacity===0&&t.resting).forEach(t=>{t._destroy(),e.removeChildView(t)})},filterFrameActionsForChild:nu,mixins:{apis:["dragCoordinates"]}}),au=({root:e,props:t})=>{e.ref.list=e.appendChildView(e.createChildView(ru)),t.dragCoordinates=null,t.overflowing=!1},ou=({root:e,props:t,action:i})=>{!e.query("GET_ITEM_INSERT_LOCATION_FREEDOM")||(t.dragCoordinates={left:i.position.scopeLeft-e.ref.list.rect.element.left,top:i.position.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},lu=({props:e})=>{e.dragCoordinates=null},cu=fe({DID_DRAG:ou,DID_END_DRAG:lu}),du=({root:e,props:t,actions:i})=>{if(cu({root:e,props:t,actions:i}),e.ref.list.dragCoordinates=t.dragCoordinates,t.overflowing&&!t.overflow&&(t.overflowing=!1,e.element.dataset.state="",e.height=null),t.overflow){const s=Math.round(t.overflow);s!==e.height&&(t.overflowing=!0,e.element.dataset.state="overflow",e.height=s)}},uu=ee({create:au,write:du,name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Ce=(e,t,i,s="")=>{i?J(e,t,s):e.removeAttribute(t)},fu=e=>{if(!(!e||e.value==="")){try{e.value=""}catch{}if(e.value){const t=Ve("form"),i=e.parentNode,s=e.nextSibling;t.appendChild(e),t.reset(),s?i.insertBefore(e,s):i.appendChild(e)}}},hu=({root:e,props:t})=>{e.element.id=`filepond--browser-${t.id}`,J(e.element,"name",e.query("GET_NAME")),J(e.element,"aria-controls",`filepond--assistant-${t.id}`),J(e.element,"aria-labelledby",`filepond--drop-label-${t.id}`),pa({root:e,action:{value:e.query("GET_ACCEPTED_FILE_TYPES")}}),ga({root:e,action:{value:e.query("GET_ALLOW_MULTIPLE")}}),ma({root:e,action:{value:e.query("GET_ALLOW_DIRECTORIES_ONLY")}}),as({root:e}),Ea({root:e,action:{value:e.query("GET_REQUIRED")}}),_a({root:e,action:{value:e.query("GET_CAPTURE_METHOD")}}),e.ref.handleChange=i=>{if(!e.element.value)return;const s=Array.from(e.element.files).map(n=>(n._relativePath=n.webkitRelativePath,n));setTimeout(()=>{t.onload(s),fu(e.element)},250)},e.element.addEventListener("change",e.ref.handleChange)},pa=({root:e,action:t})=>{!e.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")||Ce(e.element,"accept",!!t.value,t.value?t.value.join(","):"")},ga=({root:e,action:t})=>{Ce(e.element,"multiple",t.value)},ma=({root:e,action:t})=>{Ce(e.element,"webkitdirectory",t.value)},as=({root:e})=>{const t=e.query("GET_DISABLED"),i=e.query("GET_ALLOW_BROWSE"),s=t||!i;Ce(e.element,"disabled",s)},Ea=({root:e,action:t})=>{t.value?e.query("GET_TOTAL_ITEMS")===0&&Ce(e.element,"required",!0):Ce(e.element,"required",!1)},_a=({root:e,action:t})=>{Ce(e.element,"capture",!!t.value,t.value===!0?"":t.value)},Gn=({root:e})=>{const{element:t}=e;e.query("GET_TOTAL_ITEMS")>0?(Ce(t,"required",!1),Ce(t,"name",!1)):(Ce(t,"name",!0,e.query("GET_NAME")),e.query("GET_CHECK_VALIDITY")&&t.setCustomValidity(""),e.query("GET_REQUIRED")&&Ce(t,"required",!0))},pu=({root:e})=>{!e.query("GET_CHECK_VALIDITY")||e.element.setCustomValidity(e.query("GET_LABEL_INVALID_FIELD"))},gu=ee({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:hu,destroy:({root:e})=>{e.element.removeEventListener("change",e.ref.handleChange)},write:fe({DID_LOAD_ITEM:Gn,DID_REMOVE_ITEM:Gn,DID_THROW_ITEM_INVALID:pu,DID_SET_DISABLED:as,DID_SET_ALLOW_BROWSE:as,DID_SET_ALLOW_DIRECTORIES_ONLY:ma,DID_SET_ALLOW_MULTIPLE:ga,DID_SET_ACCEPTED_FILE_TYPES:pa,DID_SET_CAPTURE_METHOD:_a,DID_SET_REQUIRED:Ea})}),Fn={ENTER:13,SPACE:32},mu=({root:e,props:t})=>{const i=Ve("label");J(i,"for",`filepond--browser-${t.id}`),J(i,"id",`filepond--drop-label-${t.id}`),J(i,"aria-hidden","true"),e.ref.handleKeyDown=s=>{(s.keyCode===Fn.ENTER||s.keyCode===Fn.SPACE)&&(s.preventDefault(),e.ref.label.click())},e.ref.handleClick=s=>{s.target===i||i.contains(s.target)||e.ref.label.click()},i.addEventListener("keydown",e.ref.handleKeyDown),e.element.addEventListener("click",e.ref.handleClick),Ia(i,t.caption),e.appendChild(i),e.ref.label=i},Ia=(e,t)=>{e.innerHTML=t;const i=e.querySelector(".filepond--label-action");return i&&J(i,"tabindex","0"),t},Eu=ee({name:"drop-label",ignoreRect:!0,create:mu,destroy:({root:e})=>{e.ref.label.addEventListener("keydown",e.ref.handleKeyDown),e.element.removeEventListener("click",e.ref.handleClick)},write:fe({DID_SET_LABEL_IDLE:({root:e,action:t})=>{Ia(e.ref.label,t.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),_u=ee({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),Iu=({root:e})=>{const t=e.rect.element.width*.5,i=e.rect.element.height*.5;e.ref.blob=e.appendChildView(e.createChildView(_u,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:t,translateY:i}))},vu=({root:e,action:t})=>{if(!e.ref.blob){Iu({root:e});return}e.ref.blob.translateX=t.position.scopeLeft,e.ref.blob.translateY=t.position.scopeTop,e.ref.blob.scaleX=1,e.ref.blob.scaleY=1,e.ref.blob.opacity=1},Tu=({root:e})=>{!e.ref.blob||(e.ref.blob.opacity=0)},yu=({root:e})=>{!e.ref.blob||(e.ref.blob.scaleX=2.5,e.ref.blob.scaleY=2.5,e.ref.blob.opacity=0)},wu=({root:e,props:t,actions:i})=>{bu({root:e,props:t,actions:i});const{blob:s}=e.ref;i.length===0&&s&&s.opacity===0&&(e.removeChildView(s),e.ref.blob=null)},bu=fe({DID_DRAG:vu,DID_DROP:yu,DID_END_DRAG:Tu}),Du=ee({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:wu}),va=(e,t)=>{try{const i=new DataTransfer;t.forEach(s=>{s instanceof File?i.items.add(s):i.items.add(new File([s],s.name,{type:s.type}))}),e.files=i.files}catch{return!1}return!0},Ru=({root:e})=>e.ref.fields={},Si=(e,t)=>e.ref.fields[t],Ss=e=>{e.query("GET_ACTIVE_ITEMS").forEach(t=>{!e.ref.fields[t.id]||e.element.appendChild(e.ref.fields[t.id])})},Bn=({root:e})=>Ss(e),Ou=({root:e,action:t})=>{const n=!(e.query("GET_ITEM",t.id).origin===ie.LOCAL)&&e.query("SHOULD_UPDATE_FILE_INPUT"),r=Ve("input");r.type=n?"file":"hidden",r.name=e.query("GET_NAME"),r.disabled=e.query("GET_DISABLED"),e.ref.fields[t.id]=r,Ss(e)},Su=({root:e,action:t})=>{const i=Si(e,t.id);if(!i||(t.serverFileReference!==null&&(i.value=t.serverFileReference),!e.query("SHOULD_UPDATE_FILE_INPUT")))return;const s=e.query("GET_ITEM",t.id);va(i,[s.file])},Au=({root:e,action:t})=>{!e.query("SHOULD_UPDATE_FILE_INPUT")||setTimeout(()=>{const i=Si(e,t.id);!i||va(i,[t.file])},0)},Lu=({root:e})=>{e.element.disabled=e.query("GET_DISABLED")},Mu=({root:e,action:t})=>{const i=Si(e,t.id);!i||(i.parentNode&&i.parentNode.removeChild(i),delete e.ref.fields[t.id])},Cu=({root:e,action:t})=>{const i=Si(e,t.id);!i||(t.value===null?i.removeAttribute("value"):i.value=t.value,Ss(e))},Pu=fe({DID_SET_DISABLED:Lu,DID_ADD_ITEM:Ou,DID_LOAD_ITEM:Su,DID_REMOVE_ITEM:Mu,DID_DEFINE_VALUE:Cu,DID_PREPARE_OUTPUT:Au,DID_REORDER_ITEMS:Bn,DID_SORT_ITEMS:Bn}),xu=ee({tag:"fieldset",name:"data",create:Ru,write:Pu,ignoreRect:!0}),Nu=e=>"getRootNode"in e?e.getRootNode():document,ku=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],Gu=["css","csv","html","txt"],Fu={zip:"zip|compressed",epub:"application/epub+zip"},Ta=(e="")=>(e=e.toLowerCase(),ku.includes(e)?"image/"+(e==="jpg"?"jpeg":e==="svg"?"svg+xml":e):Gu.includes(e)?"text/"+e:Fu[e]||""),As=e=>new Promise((t,i)=>{const s=qu(e);if(s.length&&!Bu(e))return t(s);Vu(e).then(t)}),Bu=e=>e.files?e.files.length>0:!1,Vu=e=>new Promise((t,i)=>{const s=(e.items?Array.from(e.items):[]).filter(n=>Uu(n)).map(n=>$u(n));if(!s.length){t(e.files?Array.from(e.files):[]);return}Promise.all(s).then(n=>{const r=[];n.forEach(a=>{r.push.apply(r,a)}),t(r.filter(a=>a).map(a=>(a._relativePath||(a._relativePath=a.webkitRelativePath),a)))}).catch(console.error)}),Uu=e=>{if(ya(e)){const t=Ls(e);if(t)return t.isFile||t.isDirectory}return e.kind==="file"},$u=e=>new Promise((t,i)=>{if(Yu(e)){Hu(Ls(e)).then(t).catch(i);return}t([e.getAsFile()])}),Hu=e=>new Promise((t,i)=>{const s=[];let n=0,r=0;const a=()=>{r===0&&n===0&&t(s)},o=l=>{n++;const d=l.createReader(),c=()=>{d.readEntries(u=>{if(u.length===0){n--,a();return}u.forEach(m=>{m.isDirectory?o(m):(r++,m.file(g=>{const f=Wu(g);m.fullPath&&(f._relativePath=m.fullPath),s.push(f),r--,a()}))}),c()},i)};c()};o(e)}),Wu=e=>{if(e.type.length)return e;const t=e.lastModifiedDate,i=e.name,s=Ta(Oi(e.name));return s.length&&(e=e.slice(0,e.size,s),e.name=i,e.lastModifiedDate=t),e},Yu=e=>ya(e)&&(Ls(e)||{}).isDirectory,ya=e=>"webkitGetAsEntry"in e,Ls=e=>e.webkitGetAsEntry(),qu=e=>{let t=[];try{if(t=ju(e),t.length)return t;t=zu(e)}catch{}return t},zu=e=>{let t=e.getData("url");return typeof t=="string"&&t.length?[t]:[]},ju=e=>{let t=e.getData("text/html");if(typeof t=="string"&&t.length){const i=t.match(/src\s*=\s*"(.+?)"/);if(i)return[i[1]]}return[]},fi=[],nt=e=>({pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}),Xu=(e,t,i)=>{const s=Ku(t),n={element:e,filterElement:i,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return n.destroy=s.addListener(n),n},Ku=e=>{const t=fi.find(s=>s.element===e);if(t)return t;const i=Zu(e);return fi.push(i),i},Zu=e=>{const t=[],i={dragenter:Ju,dragover:ef,dragleave:sf,drop:tf},s={};K(i,(r,a)=>{s[r]=a(e,t),e.addEventListener(r,s[r],!1)});const n={element:e,addListener:r=>(t.push(r),()=>{t.splice(t.indexOf(r),1),t.length===0&&(fi.splice(fi.indexOf(n),1),K(i,a=>{e.removeEventListener(a,s[a],!1)}))})};return n},Qu=(e,t)=>("elementFromPoint"in e||(e=document),e.elementFromPoint(t.x,t.y)),Ms=(e,t)=>{const i=Nu(t),s=Qu(i,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return s===t||t.contains(s)};let wa=null;const Qt=(e,t)=>{try{e.dropEffect=t}catch{}},Ju=(e,t)=>i=>{i.preventDefault(),wa=i.target,t.forEach(s=>{const{element:n,onenter:r}=s;Ms(i,n)&&(s.state="enter",r(nt(i)))})},ef=(e,t)=>i=>{i.preventDefault();const s=i.dataTransfer;As(s).then(n=>{let r=!1;t.some(a=>{const{filterElement:o,element:l,onenter:d,onexit:c,ondrag:u,allowdrop:m}=a;Qt(s,"copy");const g=m(n);if(!g){Qt(s,"none");return}if(Ms(i,l)){if(r=!0,a.state===null){a.state="enter",d(nt(i));return}if(a.state="over",o&&!g){Qt(s,"none");return}u(nt(i))}else o&&!r&&Qt(s,"none"),a.state&&(a.state=null,c(nt(i)))})})},tf=(e,t)=>i=>{i.preventDefault();const s=i.dataTransfer;As(s).then(n=>{t.forEach(r=>{const{filterElement:a,element:o,ondrop:l,onexit:d,allowdrop:c}=r;if(r.state=null,!(a&&!Ms(i,o))){if(!c(n))return d(nt(i));l(nt(i),n)}})})},sf=(e,t)=>i=>{wa===i.target&&t.forEach(s=>{const{onexit:n}=s;s.state=null,n(nt(i))})},nf=(e,t,i)=>{e.classList.add("filepond--hopper");const{catchesDropsOnPage:s,requiresDropOnElement:n,filterItems:r=c=>c}=i,a=Xu(e,s?document.documentElement:e,n);let o="",l="";a.allowdrop=c=>t(r(c)),a.ondrop=(c,u)=>{const m=r(u);if(!t(m)){d.ondragend(c);return}l="drag-drop",d.onload(m,c)},a.ondrag=c=>{d.ondrag(c)},a.onenter=c=>{l="drag-over",d.ondragstart(c)},a.onexit=c=>{l="drag-exit",d.ondragend(c)};const d={updateHopperState:()=>{o!==l&&(e.dataset.hopperState=l,o=l)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{a.destroy()}};return d};let os=!1;const pt=[],ba=e=>{const t=document.activeElement;if(t&&/textarea|input/i.test(t.nodeName)){let i=!1,s=t;for(;s!==document.body;){if(s.classList.contains("filepond--root")){i=!0;break}s=s.parentNode}if(!i)return}As(e.clipboardData).then(i=>{!i.length||pt.forEach(s=>s(i))})},rf=e=>{pt.includes(e)||(pt.push(e),!os&&(os=!0,document.addEventListener("paste",ba)))},af=e=>{ys(pt,pt.indexOf(e)),pt.length===0&&(document.removeEventListener("paste",ba),os=!1)},of=()=>{const e=i=>{t.onload(i)},t={destroy:()=>{af(e)},onload:()=>{}};return rf(e),t},lf=({root:e,props:t})=>{e.element.id=`filepond--assistant-${t.id}`,J(e.element,"role","status"),J(e.element,"aria-live","polite"),J(e.element,"aria-relevant","additions")};let Vn=null,Un=null;const ki=[],Ai=(e,t)=>{e.element.textContent=t},cf=e=>{e.element.textContent=""},Da=(e,t,i)=>{const s=e.query("GET_TOTAL_ITEMS");Ai(e,`${i} ${t}, ${s} ${s===1?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(Un),Un=setTimeout(()=>{cf(e)},1500)},Ra=e=>e.element.parentNode.contains(document.activeElement),df=({root:e,action:t})=>{if(!Ra(e))return;e.element.textContent="";const i=e.query("GET_ITEM",t.id);ki.push(i.filename),clearTimeout(Vn),Vn=setTimeout(()=>{Da(e,ki.join(", "),e.query("GET_LABEL_FILE_ADDED")),ki.length=0},750)},uf=({root:e,action:t})=>{if(!Ra(e))return;const i=t.item;Da(e,i.filename,e.query("GET_LABEL_FILE_REMOVED"))},ff=({root:e,action:t})=>{const s=e.query("GET_ITEM",t.id).filename,n=e.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Ai(e,`${s} ${n}`)},$n=({root:e,action:t})=>{const s=e.query("GET_ITEM",t.id).filename,n=e.query("GET_LABEL_FILE_PROCESSING_ABORTED");Ai(e,`${s} ${n}`)},Jt=({root:e,action:t})=>{const s=e.query("GET_ITEM",t.id).filename;Ai(e,`${t.status.main} ${s} ${t.status.sub}`)},hf=ee({create:lf,ignoreRect:!0,ignoreRectUpdate:!0,write:fe({DID_LOAD_ITEM:df,DID_REMOVE_ITEM:uf,DID_COMPLETE_ITEM_PROCESSING:ff,DID_ABORT_ITEM_PROCESSING:$n,DID_REVERT_ITEM_PROCESSING:$n,DID_THROW_ITEM_REMOVE_ERROR:Jt,DID_THROW_ITEM_LOAD_ERROR:Jt,DID_THROW_ITEM_INVALID:Jt,DID_THROW_ITEM_PROCESSING_ERROR:Jt}),tag:"span",name:"assistant"}),Oa=(e,t="-")=>e.replace(new RegExp(`${t}.`,"g"),i=>i.charAt(1).toUpperCase()),Sa=(e,t=16,i=!0)=>{let s=Date.now(),n=null;return(...r)=>{clearTimeout(n);const a=Date.now()-s,o=()=>{s=Date.now(),e(...r)};a<t?i||(n=setTimeout(o,t-a)):o()}},pf=1e6,hi=e=>e.preventDefault(),gf=({root:e,props:t})=>{const i=e.query("GET_ID");i&&(e.element.id=i);const s=e.query("GET_CLASS_NAME");s&&s.split(" ").filter(l=>l.length).forEach(l=>{e.element.classList.add(l)}),e.ref.label=e.appendChildView(e.createChildView(Eu,{...t,translateY:null,caption:e.query("GET_LABEL_IDLE")})),e.ref.list=e.appendChildView(e.createChildView(uu,{translateY:null})),e.ref.panel=e.appendChildView(e.createChildView(ha,{name:"panel-root"})),e.ref.assistant=e.appendChildView(e.createChildView(hf,{...t})),e.ref.data=e.appendChildView(e.createChildView(xu,{...t})),e.ref.measure=Ve("div"),e.ref.measure.style.height="100%",e.element.appendChild(e.ref.measure),e.ref.bounds=null,e.query("GET_STYLES").filter(l=>!Be(l.value)).map(({name:l,value:d})=>{e.element.dataset[l]=d}),e.ref.widthPrevious=null,e.ref.widthUpdated=Sa(()=>{e.ref.updateHistory=[],e.dispatch("DID_RESIZE_ROOT")},250),e.ref.previousAspectRatio=null,e.ref.updateHistory=[];const n=window.matchMedia("(pointer: fine) and (hover: hover)").matches,r="PointerEvent"in window;e.query("GET_ALLOW_REORDER")&&r&&!n&&(e.element.addEventListener("touchmove",hi,{passive:!1}),e.element.addEventListener("gesturestart",hi));const a=e.query("GET_CREDITS");if(a.length===2){const l=document.createElement("a");l.className="filepond--credits",l.setAttribute("aria-hidden","true"),l.href=a[0],l.tabindex=-1,l.target="_blank",l.rel="noopener noreferrer",l.textContent=a[1],e.element.appendChild(l),e.ref.credits=l}},mf=({root:e,props:t,actions:i})=>{if(Tf({root:e,props:t,actions:i}),i.filter(b=>/^DID_SET_STYLE_/.test(b.type)).filter(b=>!Be(b.data.value)).map(({type:b,data:M})=>{const w=Oa(b.substring(8).toLowerCase(),"_");e.element.dataset[w]=M.value,e.invalidateLayout()}),e.rect.element.hidden)return;e.rect.element.width!==e.ref.widthPrevious&&(e.ref.widthPrevious=e.rect.element.width,e.ref.widthUpdated());let s=e.ref.bounds;s||(s=e.ref.bounds=If(e),e.element.removeChild(e.ref.measure),e.ref.measure=null);const{hopper:n,label:r,list:a,panel:o}=e.ref;n&&n.updateHopperState();const l=e.query("GET_PANEL_ASPECT_RATIO"),d=e.query("GET_ALLOW_MULTIPLE"),c=e.query("GET_TOTAL_ITEMS"),u=d?e.query("GET_MAX_FILES")||pf:1,m=c===u,g=i.find(b=>b.type==="DID_ADD_ITEM");if(m&&g){const b=g.data.interactionMethod;r.opacity=0,d?r.translateY=-40:b===De.API?r.translateX=40:b===De.BROWSE?r.translateY=40:r.translateY=30}else m||(r.opacity=1,r.translateX=0,r.translateY=0);const f=Ef(e),_=_f(e),I=r.rect.element.height,v=!d||m?0:I,h=m?a.rect.element.marginTop:0,p=c===0?0:a.rect.element.marginBottom,E=v+h+_.visual+p,T=v+h+_.bounds+p;if(a.translateY=Math.max(0,v-a.rect.element.marginTop)-f.top,l){const b=e.rect.element.width,M=b*l;l!==e.ref.previousAspectRatio&&(e.ref.previousAspectRatio=l,e.ref.updateHistory=[]);const w=e.ref.updateHistory;w.push(b);const R=2;if(w.length>R*2){const L=w.length,P=L-10;let U=0;for(let S=L;S>=P;S--)if(w[S]===w[S-2]&&U++,U>=R)return}o.scalable=!1,o.height=M;const C=M-v-(p-f.bottom)-(m?h:0);_.visual>C?a.overflow=C:a.overflow=null,e.height=M}else if(s.fixedHeight){o.scalable=!1;const b=s.fixedHeight-v-(p-f.bottom)-(m?h:0);_.visual>b?a.overflow=b:a.overflow=null}else if(s.cappedHeight){const b=E>=s.cappedHeight,M=Math.min(s.cappedHeight,E);o.scalable=!0,o.height=b?M:M-f.top-f.bottom;const w=M-v-(p-f.bottom)-(m?h:0);E>s.cappedHeight&&_.visual>w?a.overflow=w:a.overflow=null,e.height=Math.min(s.cappedHeight,T-f.top-f.bottom)}else{const b=c>0?f.top+f.bottom:0;o.scalable=!0,o.height=Math.max(I,E-b),e.height=Math.max(I,T-b)}e.ref.credits&&o.heightCurrent&&(e.ref.credits.style.transform=`translateY(${o.heightCurrent}px)`)},Ef=e=>{const t=e.ref.list.childViews[0].childViews[0];return t?{top:t.rect.element.marginTop,bottom:t.rect.element.marginBottom}:{top:0,bottom:0}},_f=e=>{let t=0,i=0;const s=e.ref.list,n=s.childViews[0],r=n.childViews.filter(h=>h.rect.element.height),a=e.query("GET_ACTIVE_ITEMS").map(h=>r.find(p=>p.id===h.id)).filter(h=>h);if(a.length===0)return{visual:t,bounds:i};const o=n.rect.element.width,l=Os(n,a,s.dragCoordinates),d=a[0].rect.element,c=d.marginTop+d.marginBottom,u=d.marginLeft+d.marginRight,m=d.width+u,g=d.height+c,f=typeof l<"u"&&l>=0?1:0,_=a.find(h=>h.markedForRemoval&&h.opacity<.45)?-1:0,I=a.length+f+_,v=Rs(o,m);return v===1?a.forEach(h=>{const p=h.rect.element.height+c;i+=p,t+=p*h.opacity}):(i=Math.ceil(I/v)*g,t=i),{visual:t,bounds:i}},If=e=>{const t=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:t===0?null:t}},Cs=(e,t)=>{const i=e.query("GET_ALLOW_REPLACE"),s=e.query("GET_ALLOW_MULTIPLE"),n=e.query("GET_TOTAL_ITEMS");let r=e.query("GET_MAX_FILES");const a=t.length;return!s&&a>1?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:Z("warning",0,"Max files")}),!0):(r=s?r:1,!s&&i?!1:Dt(r)&&n+a>r?(e.dispatch("DID_THROW_MAX_FILES",{source:t,error:Z("warning",0,"Max files")}),!0):!1)},vf=(e,t,i)=>{const s=e.childViews[0];return Os(s,t,{left:i.scopeLeft-s.rect.element.left,top:i.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},Hn=e=>{const t=e.query("GET_ALLOW_DROP"),i=e.query("GET_DISABLED"),s=t&&!i;if(s&&!e.ref.hopper){const n=nf(e.element,r=>{const a=e.query("GET_BEFORE_DROP_FILE")||(()=>!0);return e.query("GET_DROP_VALIDATION")?r.every(l=>ot("ALLOW_HOPPER_ITEM",l,{query:e.query}).every(d=>d===!0)&&a(l)):!0},{filterItems:r=>{const a=e.query("GET_IGNORED_FILES");return r.filter(o=>wt(o)?!a.includes(o.name.toLowerCase()):!0)},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});n.onload=(r,a)=>{const l=e.ref.list.childViews[0].childViews.filter(c=>c.rect.element.height),d=e.query("GET_ACTIVE_ITEMS").map(c=>l.find(u=>u.id===c.id)).filter(c=>c);Le("ADD_ITEMS",r,{dispatch:e.dispatch}).then(c=>{if(Cs(e,c))return!1;e.dispatch("ADD_ITEMS",{items:c,index:vf(e.ref.list,d,a),interactionMethod:De.DROP})}),e.dispatch("DID_DROP",{position:a}),e.dispatch("DID_END_DRAG",{position:a})},n.ondragstart=r=>{e.dispatch("DID_START_DRAG",{position:r})},n.ondrag=Sa(r=>{e.dispatch("DID_DRAG",{position:r})}),n.ondragend=r=>{e.dispatch("DID_END_DRAG",{position:r})},e.ref.hopper=n,e.ref.drip=e.appendChildView(e.createChildView(Du))}else!s&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},Wn=(e,t)=>{const i=e.query("GET_ALLOW_BROWSE"),s=e.query("GET_DISABLED"),n=i&&!s;n&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(gu,{...t,onload:r=>{Le("ADD_ITEMS",r,{dispatch:e.dispatch}).then(a=>{if(Cs(e,a))return!1;e.dispatch("ADD_ITEMS",{items:a,index:-1,interactionMethod:De.BROWSE})})}}),0):!n&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},Yn=e=>{const t=e.query("GET_ALLOW_PASTE"),i=e.query("GET_DISABLED"),s=t&&!i;s&&!e.ref.paster?(e.ref.paster=of(),e.ref.paster.onload=n=>{Le("ADD_ITEMS",n,{dispatch:e.dispatch}).then(r=>{if(Cs(e,r))return!1;e.dispatch("ADD_ITEMS",{items:r,index:-1,interactionMethod:De.PASTE})})}):!s&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},Tf=fe({DID_SET_ALLOW_BROWSE:({root:e,props:t})=>{Wn(e,t)},DID_SET_ALLOW_DROP:({root:e})=>{Hn(e)},DID_SET_ALLOW_PASTE:({root:e})=>{Yn(e)},DID_SET_DISABLED:({root:e,props:t})=>{Hn(e),Yn(e),Wn(e,t),e.query("GET_DISABLED")?e.element.dataset.disabled="disabled":e.element.removeAttribute("data-disabled")}}),yf=ee({name:"root",read:({root:e})=>{e.ref.measure&&(e.ref.measureHeight=e.ref.measure.offsetHeight)},create:gf,write:mf,destroy:({root:e})=>{e.ref.paster&&e.ref.paster.destroy(),e.ref.hopper&&e.ref.hopper.destroy(),e.element.removeEventListener("touchmove",hi),e.element.removeEventListener("gesturestart",hi)},mixins:{styles:["height"]}}),wf=(e={})=>{let t=null;const i=ui(),s=Fl(wc(i),[$c,Rc(i)],[hd,Dc(i)]);s.dispatch("SET_OPTIONS",{options:e});const n=()=>{document.hidden||s.dispatch("KICK")};document.addEventListener("visibilitychange",n);let r=null,a=!1,o=!1,l=null,d=null;const c=()=>{a||(a=!0),clearTimeout(r),r=setTimeout(()=>{a=!1,l=null,d=null,o&&(o=!1,s.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",c);const u=yf(s,{id:Ts()});let m=!1,g=!1;const f={_read:()=>{a&&(d=window.innerWidth,l||(l=d),!o&&d!==l&&(s.dispatch("DID_START_RESIZE"),o=!0)),g&&m&&(m=u.element.offsetParent===null),!m&&(u._read(),g=u.rect.element.hidden)},_write:y=>{const O=s.processActionQueue().filter(x=>!/^SET_/.test(x.type));m&&!O.length||(h(O),m=u._write(y,O,o),Ac(s.query("GET_ITEMS")),m&&s.processDispatchQueue())}},_=y=>O=>{const x={type:y};if(!O)return x;if(O.hasOwnProperty("error")&&(x.error=O.error?{...O.error}:null),O.status&&(x.status={...O.status}),O.file&&(x.output=O.file),O.source)x.file=O.source;else if(O.item||O.id){const k=O.item?O.item:s.query("GET_ITEM",O.id);x.file=k?pe(k):null}return O.items&&(x.items=O.items.map(pe)),/progress/.test(y)&&(x.progress=O.progress),O.hasOwnProperty("origin")&&O.hasOwnProperty("target")&&(x.origin=O.origin,x.target=O.target),x},I={DID_DESTROY:_("destroy"),DID_INIT:_("init"),DID_THROW_MAX_FILES:_("warning"),DID_INIT_ITEM:_("initfile"),DID_START_ITEM_LOAD:_("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:_("addfileprogress"),DID_LOAD_ITEM:_("addfile"),DID_THROW_ITEM_INVALID:[_("error"),_("addfile")],DID_THROW_ITEM_LOAD_ERROR:[_("error"),_("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[_("error"),_("removefile")],DID_PREPARE_OUTPUT:_("preparefile"),DID_START_ITEM_PROCESSING:_("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:_("processfileprogress"),DID_ABORT_ITEM_PROCESSING:_("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:_("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:_("processfiles"),DID_REVERT_ITEM_PROCESSING:_("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[_("error"),_("processfile")],DID_REMOVE_ITEM:_("removefile"),DID_UPDATE_ITEMS:_("updatefiles"),DID_ACTIVATE_ITEM:_("activatefile"),DID_REORDER_ITEMS:_("reorderfiles")},v=y=>{const O={pond:$,...y};delete O.type,u.element.dispatchEvent(new CustomEvent(`FilePond:${y.type}`,{detail:O,bubbles:!0,cancelable:!0,composed:!0}));const x=[];y.hasOwnProperty("error")&&x.push(y.error),y.hasOwnProperty("file")&&x.push(y.file);const k=["type","error","file"];Object.keys(y).filter(Y=>!k.includes(Y)).forEach(Y=>x.push(y[Y])),$.fire(y.type,...x);const H=s.query(`GET_ON${y.type.toUpperCase()}`);H&&H(...x)},h=y=>{!y.length||y.filter(O=>I[O.type]).forEach(O=>{const x=I[O.type];(Array.isArray(x)?x:[x]).forEach(k=>{O.type==="DID_INIT_ITEM"?v(k(O.data)):setTimeout(()=>{v(k(O.data))},0)})})},p=y=>s.dispatch("SET_OPTIONS",{options:y}),E=y=>s.query("GET_ACTIVE_ITEM",y),T=y=>new Promise((O,x)=>{s.dispatch("REQUEST_ITEM_PREPARE",{query:y,success:k=>{O(k)},failure:k=>{x(k)}})}),b=(y,O={})=>new Promise((x,k)=>{R([{source:y,options:O}],{index:O.index}).then(H=>x(H&&H[0])).catch(k)}),M=y=>y.file&&y.id,w=(y,O)=>(typeof y=="object"&&!M(y)&&!O&&(O=y,y=void 0),s.dispatch("REMOVE_ITEM",{...O,query:y}),s.query("GET_ACTIVE_ITEM",y)===null),R=(...y)=>new Promise((O,x)=>{const k=[],H={};if(wi(y[0]))k.push.apply(k,y[0]),Object.assign(H,y[1]||{});else{const Y=y[y.length-1];typeof Y=="object"&&!(Y instanceof Blob)&&Object.assign(H,y.pop()),k.push(...y)}s.dispatch("ADD_ITEMS",{items:k,index:H.index,interactionMethod:De.API,success:O,failure:x})}),C=()=>s.query("GET_ACTIVE_ITEMS"),L=y=>new Promise((O,x)=>{s.dispatch("REQUEST_ITEM_PROCESSING",{query:y,success:k=>{O(k)},failure:k=>{x(k)}})}),P=(...y)=>{const O=Array.isArray(y[0])?y[0]:y,x=O.length?O:C();return Promise.all(x.map(T))},U=(...y)=>{const O=Array.isArray(y[0])?y[0]:y;if(!O.length){const x=C().filter(k=>!(k.status===W.IDLE&&k.origin===ie.LOCAL)&&k.status!==W.PROCESSING&&k.status!==W.PROCESSING_COMPLETE&&k.status!==W.PROCESSING_REVERT_ERROR);return Promise.all(x.map(L))}return Promise.all(O.map(L))},S=(...y)=>{const O=Array.isArray(y[0])?y[0]:y;let x;typeof O[O.length-1]=="object"?x=O.pop():Array.isArray(y[0])&&(x=y[1]);const k=C();return O.length?O.map(Y=>Qe(Y)?k[Y]?k[Y].id:null:Y).filter(Y=>Y).map(Y=>w(Y,x)):Promise.all(k.map(Y=>w(Y,x)))},$={...Ri(),...f,...bc(s,i),setOptions:p,addFile:b,addFiles:R,getFile:E,processFile:L,prepareFile:T,removeFile:w,moveFile:(y,O)=>s.dispatch("MOVE_ITEM",{query:y,index:O}),getFiles:C,processFiles:U,removeFiles:S,prepareFiles:P,sort:y=>s.dispatch("SORT",{compare:y}),browse:()=>{var y=u.element.querySelector("input[type=file]");y&&y.click()},destroy:()=>{$.fire("destroy",u.element),s.dispatch("ABORT_ALL"),u._destroy(),window.removeEventListener("resize",c),document.removeEventListener("visibilitychange",n),s.dispatch("DID_DESTROY")},insertBefore:y=>pn(u.element,y),insertAfter:y=>gn(u.element,y),appendTo:y=>y.appendChild(u.element),replaceElement:y=>{pn(u.element,y),y.parentNode.removeChild(y),t=y},restoreElement:()=>{!t||(gn(t,u.element),u.element.parentNode.removeChild(u.element),t=null)},isAttachedTo:y=>u.element===y||t===y,element:{get:()=>u.element},status:{get:()=>s.query("GET_STATUS")}};return s.dispatch("DID_INIT"),Ye($)},Aa=(e={})=>{const t={};return K(ui(),(s,n)=>{t[s]=n[0]}),wf({...t,...e})},bf=e=>e.charAt(0).toLowerCase()+e.slice(1),Df=e=>Oa(e.replace(/^data-/,"")),La=(e,t)=>{K(t,(i,s)=>{K(e,(n,r)=>{const a=new RegExp(i);if(!a.test(n)||(delete e[n],s===!1))return;if(ue(s)){e[s]=r;return}const l=s.group;se(s)&&!e[l]&&(e[l]={}),e[l][bf(n.replace(a,""))]=r}),s.mapping&&La(e[s.group],s.mapping)})},Rf=(e,t={})=>{const i=[];K(e.attributes,n=>{i.push(e.attributes[n])});const s=i.filter(n=>n.name).reduce((n,r)=>{const a=J(e,r.name);return n[Df(r.name)]=a===r.name?!0:a,n},{});return La(s,t),s},Of=(e,t={})=>{const i={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};ot("SET_ATTRIBUTE_TO_OPTION_MAP",i);const s={...t},n=Rf(e.nodeName==="FIELDSET"?e.querySelector("input[type=file]"):e,i);Object.keys(n).forEach(a=>{se(n[a])?(se(s[a])||(s[a]={}),Object.assign(s[a],n[a])):s[a]=n[a]}),s.files=(t.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map(a=>({source:a.value,options:{type:a.dataset.type}})));const r=Aa(s);return e.files&&Array.from(e.files).forEach(a=>{r.addFile(a)}),r.replaceElement(e),r},Sf=(...e)=>Gl(e[0])?Of(...e):Aa(...e),Af=["fire","_read","_write"],qn=e=>{const t={};return Qr(e,t,Af),t},Lf=(e,t)=>e.replace(/(?:{([a-zA-Z]+)})/g,(i,s)=>t[s]),Mf=e=>{const t=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),i=URL.createObjectURL(t),s=new Worker(i);return{transfer:(n,r)=>{},post:(n,r,a)=>{const o=Ts();s.onmessage=l=>{l.data.id===o&&r(l.data.message)},s.postMessage({id:o,message:n},a)},terminate:()=>{s.terminate(),URL.revokeObjectURL(i)}}},Cf=e=>new Promise((t,i)=>{const s=new Image;s.onload=()=>{t(s)},s.onerror=n=>{i(n)},s.src=e}),Ma=(e,t)=>{const i=e.slice(0,e.size,e.type);return i.lastModifiedDate=e.lastModifiedDate,i.name=t,i},Pf=e=>Ma(e,e.name),zn=[],xf=e=>{if(zn.includes(e))return;zn.push(e);const t=e({addFilter:Mc,utils:{Type:D,forin:K,isString:ue,isFile:wt,toNaturalFileSize:da,replaceInString:Lf,getExtensionFromFilename:Oi,getFilenameWithoutExtension:oa,guesstimateMimeType:Ta,getFileFromBlob:yt,getFilenameFromURL:Yt,createRoute:fe,createWorker:Mf,createView:ee,createItemAPI:pe,loadImage:Cf,copyFile:Pf,renameFile:Ma,createBlob:na,applyFilterChain:Le,text:Q,getNumericAspectRatioFromString:ta},views:{fileActionButton:ca}});Cc(t.options)},Nf=()=>Object.prototype.toString.call(window.operamini)==="[object OperaMini]",kf=()=>"Promise"in window,Gf=()=>"slice"in Blob.prototype,Ff=()=>"URL"in window&&"createObjectURL"in window.URL,Bf=()=>"visibilityState"in document,Vf=()=>"performance"in window,Uf=()=>"supports"in(window.CSS||{}),$f=()=>/MSIE|Trident/.test(window.navigator.userAgent),ls=(()=>{const e=qr()&&!Nf()&&Bf()&&kf()&&Gf()&&Ff()&&Vf()&&(Uf()||$f());return()=>e})(),We={apps:[]},Hf="filepond",lt=()=>{};let pi={},li=lt,Gi=lt,jn=lt,Xn=lt,cs=lt,Kn=lt,Zn=lt;if(ls()){cc(()=>{We.apps.forEach(i=>i._read())},i=>{We.apps.forEach(s=>s._write(i))});const e=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:ls,create:li,destroy:Gi,parse:jn,find:Xn,registerPlugin:cs,setOptions:Zn}})),document.removeEventListener("DOMContentLoaded",e)};document.readyState!=="loading"?setTimeout(()=>e(),0):document.addEventListener("DOMContentLoaded",e);const t=()=>K(ui(),(i,s)=>{pi[i]=s[1]});pi={},t(),li=(...i)=>{const s=Sf(...i);return s.on("destroy",Gi),We.apps.push(s),qn(s)},Gi=i=>{const s=We.apps.findIndex(n=>n.isAttachedTo(i));return s>=0?(We.apps.splice(s,1)[0].restoreElement(),!0):!1},jn=i=>Array.from(i.querySelectorAll(`.${Hf}`)).filter(r=>!We.apps.find(a=>a.isAttachedTo(r))).map(r=>li(r)),Xn=i=>{const s=We.apps.find(n=>n.isAttachedTo(i));return s?qn(s):null},cs=(...i)=>{i.forEach(xf),t()},Kn=()=>{const i={};return K(ui(),(s,n)=>{i[s]=n[0]}),i},Zn=i=>(se(i)&&(We.apps.forEach(s=>{s.setOptions(i)}),Pc(i)),Kn())}/*!
 * vue-filepond v7.0.3
 * A handy FilePond adapter component for Vue
 * 
 * Copyright (c) 2022 PQINA
 * https://pqina.nl/filepond
 * 
 * Licensed under the MIT license.
 */const Wf=["setOptions","on","off","onOnce","appendTo","insertAfter","insertBefore","isAttachedTo","replaceElement","restoreElement","destroy"],Yf=ls(),qf=e=>({string:String,boolean:Boolean,array:Array,function:Function,int:Number,serverapi:Object,object:Object})[e],ei={},Fi=[],Bi=[];let zf={};const jf=(...e)=>{cs(...e),Fi.length=0;for(const t in pi){if(/^on/.test(t)){Fi.push(t);continue}let i=[String,qf(pi[t])];t=="labelFileProcessingError"&&i.push(Function),ei[t]={type:i,default:void 0}}return{name:"FilePond",props:ei,render(){const t=Object.entries({id:this.id,name:this.name,type:"file",class:this.className,required:this.required,multiple:this.allowMultiple,accept:this.acceptedFileTypes,capture:this.captureMethod}).reduce((i,[s,n])=>(n!==void 0&&(i[s]=n),i),{});return zs("div",{class:{"filepond--wrapper":!0}},[zs("input",t)])},created(){this.watchers=Object.keys(ei).map(t=>this.$watch(t,i=>{this._pond[t]=i}))},mounted(){if(!Yf)return;this._element=this.$el.querySelector("input");const t=Fi.reduce((s,n)=>(s[n]=(...r)=>{this.$emit("input",this._pond?this._pond.getFiles():[]),this.$emit(n.substr(2),...r)},s),{}),i={};Object.keys(ei).forEach(s=>{this[s]!==void 0&&(i[s]=this[s])}),this._pond=li(this._element,Object.assign({},zf,t,i)),Object.keys(this._pond).filter(s=>!Wf.includes(s)).forEach(s=>{this[s]=this._pond[s]}),Bi.push(this._pond)},beforeUnmount(){const{detached:t}=this.$options;if(!this.$el.offsetParent){t.call(this);return}const i=(n,r)=>{const o=((n[0]||{}).removedNodes||[])[0];!o||!o.contains(this.$el)||(r.disconnect(),t.call(this))};new MutationObserver(i).observe(document.documentElement,{childList:!0,subtree:!0})},detached(){if(this.watchers.forEach(i=>i()),!this._pond)return;this._pond.destroy();const t=Bi.indexOf(this._pond);t>=0&&Bi.splice(t,1),this._pond=null}}};function Ue(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ps(e){return e[e.length-1]}function at(e,...t){return t.forEach(i=>{e.includes(i)||e.push(i)}),e}function Vi(e,t){return e?e.split(t):[]}function xs(e,t,i){const s=t===void 0||e>=t,n=i===void 0||e<=i;return s&&n}function Ca(e,t,i){return e<t?t:e>i?i:e}function bt(e,t,i={},s=0,n=""){const r=Object.keys(i).reduce((o,l)=>{let d=i[l];return typeof d=="function"&&(d=d(s)),`${o} ${l}="${d}"`},e);n+=`<${r}></${e}>`;const a=s+1;return a<t?bt(e,t,i,a,n):n}function Ns(e){return e.replace(/>\s+/g,">").replace(/\s+</,"<")}function ds(e){return new Date(e).setHours(0,0,0,0)}function ct(){return new Date().setHours(0,0,0,0)}function qe(...e){switch(e.length){case 0:return ct();case 1:return ds(e[0])}const t=new Date(0);return t.setFullYear(...e),t.setHours(0,0,0,0)}function gt(e,t){const i=new Date(e);return i.setDate(i.getDate()+t)}function Xf(e,t){return gt(e,t*7)}function gi(e,t){const i=new Date(e),s=i.getMonth()+t;let n=s%12;n<0&&(n+=12);const r=i.setMonth(s);return i.getMonth()!==n?i.setDate(0):r}function mt(e,t){const i=new Date(e),s=i.getMonth(),n=i.setFullYear(i.getFullYear()+t);return s===1&&i.getMonth()===2?i.setDate(0):n}function Qn(e,t){return(e-t+7)%7}function mi(e,t,i=0){const s=new Date(e).getDay();return gt(e,Qn(t,i)-Qn(s,i))}function Kf(e){const t=mi(e,4,1),i=mi(new Date(t).setMonth(0,4),4,1);return Math.round((t-i)/6048e5)+1}function Ke(e,t){const i=new Date(e).getFullYear();return Math.floor(i/t)*t}const us=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,Zf=/[\s!-/:-@[-`{-~年月日]+/;let Ui={};const Jn={y(e,t){return new Date(e).setFullYear(parseInt(t,10))},m(e,t,i){const s=new Date(e);let n=parseInt(t,10)-1;if(isNaN(n)){if(!t)return NaN;const r=t.toLowerCase(),a=o=>o.toLowerCase().startsWith(r);if(n=i.monthsShort.findIndex(a),n<0&&(n=i.months.findIndex(a)),n<0)return NaN}return s.setMonth(n),s.getMonth()!==Pa(n)?s.setDate(0):s.getTime()},d(e,t){return new Date(e).setDate(parseInt(t,10))}},Qf={d(e){return e.getDate()},dd(e){return ti(e.getDate(),2)},D(e,t){return t.daysShort[e.getDay()]},DD(e,t){return t.days[e.getDay()]},m(e){return e.getMonth()+1},mm(e){return ti(e.getMonth()+1,2)},M(e,t){return t.monthsShort[e.getMonth()]},MM(e,t){return t.months[e.getMonth()]},y(e){return e.getFullYear()},yy(e){return ti(e.getFullYear(),2).slice(-2)},yyyy(e){return ti(e.getFullYear(),4)}};function Pa(e){return e>-1?e%12:Pa(e+12)}function ti(e,t){return e.toString().padStart(t,"0")}function xa(e){if(typeof e!="string")throw new Error("Invalid date format.");if(e in Ui)return Ui[e];const t=e.split(us),i=e.match(new RegExp(us,"g"));if(t.length===0||!i)throw new Error("Invalid date format.");const s=i.map(r=>Qf[r]),n=Object.keys(Jn).reduce((r,a)=>(i.find(l=>l[0]!=="D"&&l[0].toLowerCase()===a)&&r.push(a),r),[]);return Ui[e]={parser(r,a){const o=r.split(Zf).reduce((l,d,c)=>{if(d.length>0&&i[c]){const u=i[c][0];u==="M"?l.m=d:u!=="D"&&(l[u]=d)}return l},{});return n.reduce((l,d)=>{const c=Jn[d](l,o[d],a);return isNaN(c)?l:c},ct())},formatter(r,a){let o=s.reduce((l,d,c)=>l+=`${t[c]}${d(r,a)}`,"");return o+=Ps(t)}}}function Ut(e,t,i){if(e instanceof Date||typeof e=="number"){const s=ds(e);return isNaN(s)?void 0:s}if(!!e){if(e==="today")return ct();if(t&&t.toValue){const s=t.toValue(e,t,i);return isNaN(s)?void 0:ds(s)}return xa(t).parser(e,i)}}function Ei(e,t,i){if(isNaN(e)||!e&&e!==0)return"";const s=typeof e=="number"?new Date(e):e;return t.toDisplay?t.toDisplay(s,t,i):xa(t).formatter(s,i)}const _i=new WeakMap,{addEventListener:Jf,removeEventListener:eh}=EventTarget.prototype;function Na(e,t){let i=_i.get(e);i||(i=[],_i.set(e,i)),t.forEach(s=>{Jf.call(...s),i.push(s)})}function th(e){let t=_i.get(e);!t||(t.forEach(i=>{eh.call(...i)}),_i.delete(e))}if(!Event.prototype.composedPath){const e=(t,i=[])=>{i.push(t);let s;return t.parentNode?s=t.parentNode:t.host?s=t.host:t.defaultView&&(s=t.defaultView),s?e(s,i):i};Event.prototype.composedPath=function(){return e(this.target)}}function ka(e,t,i,s=0){const n=e[s];return t(n)?n:n===i||!n.parentElement?void 0:ka(e,t,i,s+1)}function Ga(e,t){const i=typeof t=="function"?t:s=>s.matches(t);return ka(e.composedPath(),i,e.currentTarget)}const Mt={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},ks={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:'<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',orientation:"auto",pickLevel:0,prevArrow:'<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg>',showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},ih=document.createRange();function $e(e){return ih.createContextualFragment(e)}function kt(e){e.style.display!=="none"&&(e.style.display&&(e.dataset.styleDisplay=e.style.display),e.style.display="none")}function Gt(e){e.style.display==="none"&&(e.dataset.styleDisplay?(e.style.display=e.dataset.styleDisplay,delete e.dataset.styleDisplay):e.style.display="")}function Ii(e){e.firstChild&&(e.removeChild(e.firstChild),Ii(e))}function sh(e,t){Ii(e),t instanceof DocumentFragment?e.appendChild(t):typeof t=="string"?e.appendChild($e(t)):typeof t.forEach=="function"&&t.forEach(i=>{e.appendChild(i)})}const{language:$i,format:nh,weekStart:rh}=ks;function er(e,t){return e.length<6&&t>=0&&t<7?at(e,t):e}function tr(e){return(e+6)%7}function ir(e,t,i,s){const n=Ut(e,t,i);return n!==void 0?n:s}function Hi(e,t,i=3){const s=parseInt(e,10);return s>=0&&s<=i?s:t}function Wi(e,t){const i=Object.assign({},e),s={},n=t.constructor.locales;let{format:r,language:a,locale:o,maxDate:l,maxView:d,minDate:c,pickLevel:u,startView:m,weekStart:g}=t.config||{};if(i.language){let p;if(i.language!==a&&(n[i.language]?p=i.language:(p=i.language.split("-")[0],n[p]===void 0&&(p=!1))),delete i.language,p){a=s.language=p;const E=o||n[$i];o=Object.assign({format:nh,weekStart:rh},n[$i]),a!==$i&&Object.assign(o,n[a]),s.locale=o,r===E.format&&(r=s.format=o.format),g===E.weekStart&&(g=s.weekStart=o.weekStart,s.weekEnd=tr(o.weekStart))}}if(i.format){const p=typeof i.format.toDisplay=="function",E=typeof i.format.toValue=="function",T=us.test(i.format);(p&&E||T)&&(r=s.format=i.format),delete i.format}let f=c,_=l;if(i.minDate!==void 0&&(f=i.minDate===null?qe(0,0,1):ir(i.minDate,r,o,f),delete i.minDate),i.maxDate!==void 0&&(_=i.maxDate===null?void 0:ir(i.maxDate,r,o,_),delete i.maxDate),_<f?(c=s.minDate=_,l=s.maxDate=f):(c!==f&&(c=s.minDate=f),l!==_&&(l=s.maxDate=_)),i.datesDisabled&&(s.datesDisabled=i.datesDisabled.reduce((p,E)=>{const T=Ut(E,r,o);return T!==void 0?at(p,T):p},[]),delete i.datesDisabled),i.defaultViewDate!==void 0){const p=Ut(i.defaultViewDate,r,o);p!==void 0&&(s.defaultViewDate=p),delete i.defaultViewDate}if(i.weekStart!==void 0){const p=Number(i.weekStart)%7;isNaN(p)||(g=s.weekStart=p,s.weekEnd=tr(p)),delete i.weekStart}if(i.daysOfWeekDisabled&&(s.daysOfWeekDisabled=i.daysOfWeekDisabled.reduce(er,[]),delete i.daysOfWeekDisabled),i.daysOfWeekHighlighted&&(s.daysOfWeekHighlighted=i.daysOfWeekHighlighted.reduce(er,[]),delete i.daysOfWeekHighlighted),i.maxNumberOfDates!==void 0){const p=parseInt(i.maxNumberOfDates,10);p>=0&&(s.maxNumberOfDates=p,s.multidate=p!==1),delete i.maxNumberOfDates}i.dateDelimiter&&(s.dateDelimiter=String(i.dateDelimiter),delete i.dateDelimiter);let I=u;i.pickLevel!==void 0&&(I=Hi(i.pickLevel,2),delete i.pickLevel),I!==u&&(u=s.pickLevel=I);let v=d;i.maxView!==void 0&&(v=Hi(i.maxView,d),delete i.maxView),v=u>v?u:v,v!==d&&(d=s.maxView=v);let h=m;if(i.startView!==void 0&&(h=Hi(i.startView,h),delete i.startView),h<u?h=u:h>d&&(h=d),h!==m&&(s.startView=h),i.prevArrow){const p=$e(i.prevArrow);p.childNodes.length>0&&(s.prevArrow=p.childNodes),delete i.prevArrow}if(i.nextArrow){const p=$e(i.nextArrow);p.childNodes.length>0&&(s.nextArrow=p.childNodes),delete i.nextArrow}if(i.disableTouchKeyboard!==void 0&&(s.disableTouchKeyboard="ontouchstart"in document&&!!i.disableTouchKeyboard,delete i.disableTouchKeyboard),i.orientation){const p=i.orientation.toLowerCase().split(/\s+/g);s.orientation={x:p.find(E=>E==="left"||E==="right")||"auto",y:p.find(E=>E==="top"||E==="bottom")||"auto"},delete i.orientation}if(i.todayBtnMode!==void 0){switch(i.todayBtnMode){case 0:case 1:s.todayBtnMode=i.todayBtnMode}delete i.todayBtnMode}return Object.keys(i).forEach(p=>{i[p]!==void 0&&Ue(ks,p)&&(s[p]=i[p])}),s}const ah=Ns(`<div class="datepicker hidden">
  <div class="datepicker-picker inline-block rounded-lg bg-white dark:bg-gray-700 shadow-lg p-4">
    <div class="datepicker-header">
      <div class="datepicker-title bg-white dark:bg-gray-700 dark:text-white px-2 py-3 text-center font-semibold"></div>
      <div class="datepicker-controls flex justify-between mb-2">
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 prev-btn"></button>
        <button type="button" class="text-sm rounded-lg text-gray-900 dark:text-white bg-white dark:bg-gray-700 font-semibold py-2.5 px-5 hover:bg-gray-100 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-200 view-switch"></button>
        <button type="button" class="bg-white dark:bg-gray-700 rounded-lg text-gray-500 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-600 hover:text-gray-900 dark:hover:text-white text-lg p-2.5 focus:outline-none focus:ring-2 focus:ring-gray-200 next-btn"></button>
      </div>
    </div>
    <div class="datepicker-main p-1"></div>
    <div class="datepicker-footer">
      <div class="datepicker-controls flex space-x-2 mt-2">
        <button type="button" class="%buttonClass% today-btn text-white bg-blue-700 dark:bg-blue-600 hover:bg-blue-800 dark:hover:bg-blue-700 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
        <button type="button" class="%buttonClass% clear-btn text-gray-900 dark:text-white bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-100 dark:hover:bg-gray-600 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2 text-center w-1/2"></button>
      </div>
    </div>
  </div>
</div>`),oh=Ns(`<div class="days">
  <div class="days-of-week grid grid-cols-7 mb-1">${bt("span",7,{class:"dow block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"})}</div>
  <div class="datepicker-grid w-64 grid grid-cols-7">${bt("span",42,{class:"block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"})}</div>
</div>`),lh=Ns(`<div class="calendar-weeks">
  <div class="days-of-week flex"><span class="dow h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"></span></div>
  <div class="weeks">${bt("span",6,{class:"week block flex-1 leading-9 border-0 rounded-lg cursor-default text-center text-gray-900 font-semibold text-sm"})}</div>
</div>`);class Gs{constructor(t,i){Object.assign(this,i,{picker:t,element:$e('<div class="datepicker-view flex"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}init(t){t.pickLevel!==void 0&&(this.isMinView=this.id===t.pickLevel),this.setOptions(t),this.updateFocus(),this.updateSelection()}performBeforeHook(t,i,s){let n=this.beforeShow(new Date(s));switch(typeof n){case"boolean":n={enabled:n};break;case"string":n={classes:n}}if(n){if(n.enabled===!1&&(t.classList.add("disabled"),at(this.disabled,i)),n.classes){const r=n.classes.split(/\s+/);t.classList.add(...r),r.includes("disabled")&&at(this.disabled,i)}n.content&&sh(t,n.content)}}}class ch extends Gs{constructor(t){super(t,{id:0,name:"days",cellClass:"day"})}init(t,i=!0){if(i){const s=$e(oh).firstChild;this.dow=s.firstChild,this.grid=s.lastChild,this.element.appendChild(s)}super.init(t)}setOptions(t){let i;if(Ue(t,"minDate")&&(this.minDate=t.minDate),Ue(t,"maxDate")&&(this.maxDate=t.maxDate),t.datesDisabled&&(this.datesDisabled=t.datesDisabled),t.daysOfWeekDisabled&&(this.daysOfWeekDisabled=t.daysOfWeekDisabled,i=!0),t.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=t.daysOfWeekHighlighted),t.todayHighlight!==void 0&&(this.todayHighlight=t.todayHighlight),t.weekStart!==void 0&&(this.weekStart=t.weekStart,this.weekEnd=t.weekEnd,i=!0),t.locale){const s=this.locale=t.locale;this.dayNames=s.daysMin,this.switchLabelFormat=s.titleFormat,i=!0}if(t.beforeShowDay!==void 0&&(this.beforeShow=typeof t.beforeShowDay=="function"?t.beforeShowDay:void 0),t.calendarWeeks!==void 0)if(t.calendarWeeks&&!this.calendarWeeks){const s=$e(lh).firstChild;this.calendarWeeks={element:s,dow:s.firstChild,weeks:s.lastChild},this.element.insertBefore(s,this.element.firstChild)}else this.calendarWeeks&&!t.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);t.showDaysOfWeek!==void 0&&(t.showDaysOfWeek?(Gt(this.dow),this.calendarWeeks&&Gt(this.calendarWeeks.dow)):(kt(this.dow),this.calendarWeeks&&kt(this.calendarWeeks.dow))),i&&Array.from(this.dow.children).forEach((s,n)=>{const r=(this.weekStart+n)%7;s.textContent=this.dayNames[r],s.className=this.daysOfWeekDisabled.includes(r)?"dow disabled text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400 cursor-not-allowed":"dow text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"})}updateFocus(){const t=new Date(this.picker.viewDate),i=t.getFullYear(),s=t.getMonth(),n=qe(i,s,1),r=mi(n,this.weekStart,this.weekStart);this.first=n,this.last=qe(i,s+1,0),this.start=r,this.focused=this.picker.viewDate}updateSelection(){const{dates:t,rangepicker:i}=this.picker.datepicker;this.selected=t,i&&(this.range=i.dates)}render(){this.today=this.todayHighlight?ct():void 0,this.disabled=[...this.datesDisabled];const t=Ei(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(t),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){const i=mi(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach((s,n)=>{s.textContent=Kf(Xf(i,n))})}Array.from(this.grid.children).forEach((i,s)=>{const n=i.classList,r=gt(this.start,s),a=new Date(r),o=a.getDay();if(i.className=`datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ${this.cellClass}`,i.dataset.date=r,i.textContent=a.getDate(),r<this.first?n.add("prev","text-gray-500","dark:text-white"):r>this.last&&n.add("next","text-gray-500","dark:text-white"),this.today===r&&n.add("today","bg-gray-100","dark:bg-gray-600","dark:bg-gray-600"),(r<this.minDate||r>this.maxDate||this.disabled.includes(r))&&n.add("disabled","cursor-not-allowed"),this.daysOfWeekDisabled.includes(o)&&(n.add("disabled","cursor-not-allowed"),at(this.disabled,r)),this.daysOfWeekHighlighted.includes(o)&&n.add("highlighted"),this.range){const[l,d]=this.range;r>l&&r<d&&(n.add("range","bg-gray-200","dark:bg-gray-600"),n.remove("rounded-lg","rounded-l-lg","rounded-r-lg")),r===l&&(n.add("range-start","bg-gray-100","dark:bg-gray-600","rounded-l-lg"),n.remove("rounded-lg","rounded-r-lg")),r===d&&(n.add("range-end","bg-gray-100","dark:bg-gray-600","rounded-r-lg"),n.remove("rounded-lg","rounded-l-lg"))}this.selected.includes(r)&&(n.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),n.remove("text-gray-900","text-gray-500","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),r===this.focused&&n.add("focused"),this.beforeShow&&this.performBeforeHook(i,r,r)})}refresh(){const[t,i]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(s=>{s.classList.remove("range","range-start","range-end","selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white","focused","bg-gray-100","dark:bg-gray-600"),s.classList.add("text-gray-900","rounded-lg","dark:text-white")}),Array.from(this.grid.children).forEach(s=>{const n=Number(s.dataset.date),r=s.classList;n>t&&n<i&&(r.add("range","bg-gray-200","dark:bg-gray-600"),r.remove("rounded-lg")),n===t&&(r.add("range-start","bg-gray-200","dark:bg-gray-600","rounded-l-lg"),r.remove("rounded-lg","rounded-r-lg")),n===i&&(r.add("range-end","bg-gray-200","dark:bg-gray-600","rounded-r-lg"),r.remove("rounded-lg","rounded-l-lg")),this.selected.includes(n)&&(r.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),r.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),n===this.focused&&r.add("focused","bg-gray-100","dark:bg-gray-600")})}refreshFocus(){const t=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach(i=>{i.classList.remove("focused","bg-gray-100","dark:bg-gray-600")}),this.grid.children[t].classList.add("focused","bg-gray-100","dark:bg-gray-600")}}function sr(e,t){if(!e||!e[0]||!e[1])return;const[[i,s],[n,r]]=e;if(!(i>t||n<t))return[i===t?s:-1,n===t?r:12]}class dh extends Gs{constructor(t){super(t,{id:1,name:"months",cellClass:"month"})}init(t,i=!0){i&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild($e(bt("span",12,{"data-month":s=>s})))),super.init(t)}setOptions(t){if(t.locale&&(this.monthNames=t.locale.monthsShort),Ue(t,"minDate"))if(t.minDate===void 0)this.minYear=this.minMonth=this.minDate=void 0;else{const i=new Date(t.minDate);this.minYear=i.getFullYear(),this.minMonth=i.getMonth(),this.minDate=i.setDate(1)}if(Ue(t,"maxDate"))if(t.maxDate===void 0)this.maxYear=this.maxMonth=this.maxDate=void 0;else{const i=new Date(t.maxDate);this.maxYear=i.getFullYear(),this.maxMonth=i.getMonth(),this.maxDate=qe(this.maxYear,this.maxMonth+1,0)}t.beforeShowMonth!==void 0&&(this.beforeShow=typeof t.beforeShowMonth=="function"?t.beforeShowMonth:void 0)}updateFocus(){const t=new Date(this.picker.viewDate);this.year=t.getFullYear(),this.focused=t.getMonth()}updateSelection(){const{dates:t,rangepicker:i}=this.picker.datepicker;this.selected=t.reduce((s,n)=>{const r=new Date(n),a=r.getFullYear(),o=r.getMonth();return s[a]===void 0?s[a]=[o]:at(s[a],o),s},{}),i&&i.dates&&(this.range=i.dates.map(s=>{const n=new Date(s);return isNaN(n)?void 0:[n.getFullYear(),n.getMonth()]}))}render(){this.disabled=[],this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);const t=this.selected[this.year]||[],i=this.year<this.minYear||this.year>this.maxYear,s=this.year===this.minYear,n=this.year===this.maxYear,r=sr(this.range,this.year);Array.from(this.grid.children).forEach((a,o)=>{const l=a.classList,d=qe(this.year,o,1);if(a.className=`datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ${this.cellClass}`,this.isMinView&&(a.dataset.date=d),a.textContent=this.monthNames[o],(i||s&&o<this.minMonth||n&&o>this.maxMonth)&&l.add("disabled"),r){const[c,u]=r;o>c&&o<u&&l.add("range"),o===c&&l.add("range-start"),o===u&&l.add("range-end")}t.includes(o)&&(l.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),l.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),o===this.focused&&l.add("focused","bg-gray-100","dark:bg-gray-600"),this.beforeShow&&this.performBeforeHook(a,o,d)})}refresh(){const t=this.selected[this.year]||[],[i,s]=sr(this.range,this.year)||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(n=>{n.classList.remove("range","range-start","range-end","selected","bg-blue-700","dark:bg-blue-600","dark:text-white","text-white","focused","bg-gray-100","dark:bg-gray-600"),n.classList.add("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")}),Array.from(this.grid.children).forEach((n,r)=>{const a=n.classList;r>i&&r<s&&a.add("range"),r===i&&a.add("range-start"),r===s&&a.add("range-end"),t.includes(r)&&(a.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),a.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),r===this.focused&&a.add("focused","bg-gray-100","dark:bg-gray-600")})}refreshFocus(){this.grid.querySelectorAll(".focused").forEach(t=>{t.classList.remove("focused","bg-gray-100")}),this.grid.children[this.focused].classList.add("focused","bg-gray-100","dark:bg-gray-600")}}function uh(e){return[...e].reduce((t,i,s)=>t+=s?i:i.toUpperCase(),"")}class nr extends Gs{constructor(t,i){super(t,i)}init(t,i=!0){i&&(this.navStep=this.step*10,this.beforeShowOption=`beforeShow${uh(this.cellClass)}`,this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild($e(bt("span",12)))),super.init(t)}setOptions(t){if(Ue(t,"minDate")&&(t.minDate===void 0?this.minYear=this.minDate=void 0:(this.minYear=Ke(t.minDate,this.step),this.minDate=qe(this.minYear,0,1))),Ue(t,"maxDate")&&(t.maxDate===void 0?this.maxYear=this.maxDate=void 0:(this.maxYear=Ke(t.maxDate,this.step),this.maxDate=qe(this.maxYear,11,31))),t[this.beforeShowOption]!==void 0){const i=t[this.beforeShowOption];this.beforeShow=typeof i=="function"?i:void 0}}updateFocus(){const t=new Date(this.picker.viewDate),i=Ke(t,this.navStep),s=i+9*this.step;this.first=i,this.last=s,this.start=i-this.step,this.focused=Ke(t,this.step)}updateSelection(){const{dates:t,rangepicker:i}=this.picker.datepicker;this.selected=t.reduce((s,n)=>at(s,Ke(n,this.step)),[]),i&&i.dates&&(this.range=i.dates.map(s=>{if(s!==void 0)return Ke(s,this.step)}))}render(){this.disabled=[],this.picker.setViewSwitchLabel(`${this.first}-${this.last}`),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach((t,i)=>{const s=t.classList,n=this.start+i*this.step,r=qe(n,0,1);if(t.className=`datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ${this.cellClass}`,this.isMinView&&(t.dataset.date=r),t.textContent=t.dataset.year=n,i===0?s.add("prev"):i===11&&s.add("next"),(n<this.minYear||n>this.maxYear)&&s.add("disabled"),this.range){const[a,o]=this.range;n>a&&n<o&&s.add("range"),n===a&&s.add("range-start"),n===o&&s.add("range-end")}this.selected.includes(n)&&(s.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),s.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),n===this.focused&&s.add("focused","bg-gray-100","dark:bg-gray-600"),this.beforeShow&&this.performBeforeHook(t,n,r)})}refresh(){const[t,i]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(s=>{s.classList.remove("range","range-start","range-end","selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white","focused","bg-gray-100","dark:bg-gray-600")}),Array.from(this.grid.children).forEach(s=>{const n=Number(s.textContent),r=s.classList;n>t&&n<i&&r.add("range"),n===t&&r.add("range-start"),n===i&&r.add("range-end"),this.selected.includes(n)&&(r.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),r.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),n===this.focused&&r.add("focused","bg-gray-100","dark:bg-gray-600")})}refreshFocus(){const t=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach(i=>{i.classList.remove("focused","bg-gray-100","dark:bg-gray-600")}),this.grid.children[t].classList.add("focused","bg-gray-100","dark:bg-gray-600")}}function Et(e,t){const i={date:e.getDate(),viewDate:new Date(e.picker.viewDate),viewId:e.picker.currentView.id,datepicker:e};e.element.dispatchEvent(new CustomEvent(t,{detail:i}))}function vi(e,t){const{minDate:i,maxDate:s}=e.config,{currentView:n,viewDate:r}=e.picker;let a;switch(n.id){case 0:a=gi(r,t);break;case 1:a=mt(r,t);break;default:a=mt(r,t*n.navStep)}a=Ca(a,i,s),e.picker.changeFocus(a).render()}function Fa(e){const t=e.picker.currentView.id;t!==e.config.maxView&&e.picker.changeView(t+1).render()}function Ba(e){e.config.updateOnBlur?e.update({autohide:!0}):(e.refresh("input"),e.hide())}function rr(e,t){const i=e.picker,s=new Date(i.viewDate),n=i.currentView.id,r=n===1?gi(s,t-s.getMonth()):mt(s,t-s.getFullYear());i.changeFocus(r).changeView(n-1).render()}function fh(e){const t=e.picker,i=ct();if(e.config.todayBtnMode===1){if(e.config.autohide){e.setDate(i);return}e.setDate(i,{render:!1}),t.update()}t.viewDate!==i&&t.changeFocus(i),t.changeView(0).render()}function hh(e){e.setDate({clear:!0})}function ph(e){Fa(e)}function gh(e){vi(e,-1)}function mh(e){vi(e,1)}function Eh(e,t){const i=Ga(t,".datepicker-cell");if(!i||i.classList.contains("disabled"))return;const{id:s,isMinView:n}=e.picker.currentView;n?e.setDate(Number(i.dataset.date)):s===1?rr(e,Number(i.dataset.month)):rr(e,Number(i.dataset.year))}function _h(e){!e.inline&&!e.config.disableTouchKeyboard&&e.inputField.focus()}function ar(e,t){if(t.title!==void 0&&(t.title?(e.controls.title.textContent=t.title,Gt(e.controls.title)):(e.controls.title.textContent="",kt(e.controls.title))),t.prevArrow){const i=e.controls.prevBtn;Ii(i),t.prevArrow.forEach(s=>{i.appendChild(s.cloneNode(!0))})}if(t.nextArrow){const i=e.controls.nextBtn;Ii(i),t.nextArrow.forEach(s=>{i.appendChild(s.cloneNode(!0))})}if(t.locale&&(e.controls.todayBtn.textContent=t.locale.today,e.controls.clearBtn.textContent=t.locale.clear),t.todayBtn!==void 0&&(t.todayBtn?Gt(e.controls.todayBtn):kt(e.controls.todayBtn)),Ue(t,"minDate")||Ue(t,"maxDate")){const{minDate:i,maxDate:s}=e.datepicker.config;e.controls.todayBtn.disabled=!xs(ct(),i,s)}t.clearBtn!==void 0&&(t.clearBtn?Gt(e.controls.clearBtn):kt(e.controls.clearBtn))}function or(e){const{dates:t,config:i}=e,s=t.length>0?Ps(t):i.defaultViewDate;return Ca(s,i.minDate,i.maxDate)}function lr(e,t){const i=new Date(e.viewDate),s=new Date(t),{id:n,year:r,first:a,last:o}=e.currentView,l=s.getFullYear();switch(e.viewDate=t,l!==i.getFullYear()&&Et(e.datepicker,"changeYear"),s.getMonth()!==i.getMonth()&&Et(e.datepicker,"changeMonth"),n){case 0:return t<a||t>o;case 1:return l!==r;default:return l<a||l>o}}function Yi(e){return window.getComputedStyle(e).direction}class Ih{constructor(t){this.datepicker=t;const i=ah.replace(/%buttonClass%/g,t.config.buttonClass),s=this.element=$e(i).firstChild,[n,r,a]=s.firstChild.children,o=n.firstElementChild,[l,d,c]=n.lastElementChild.children,[u,m]=a.firstChild.children,g={title:o,prevBtn:l,viewSwitch:d,nextBtn:c,todayBtn:u,clearBtn:m};this.main=r,this.controls=g;const f=t.inline?"inline":"dropdown";s.classList.add(`datepicker-${f}`),f==="dropdown"&&s.classList.add("dropdown","absolute","top-0","left-0","z-20","pt-2"),ar(this,t.config),this.viewDate=or(t),Na(t,[[s,"click",_h.bind(null,t),{capture:!0}],[r,"click",Eh.bind(null,t)],[g.viewSwitch,"click",ph.bind(null,t)],[g.prevBtn,"click",gh.bind(null,t)],[g.nextBtn,"click",mh.bind(null,t)],[g.todayBtn,"click",fh.bind(null,t)],[g.clearBtn,"click",hh.bind(null,t)]]),this.views=[new ch(this),new dh(this),new nr(this,{id:2,name:"years",cellClass:"year",step:1}),new nr(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[t.config.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),t.config.container.appendChild(this.element)}setOptions(t){ar(this,t),this.views.forEach(i=>{i.init(t,!1)}),this.currentView.render()}detach(){this.datepicker.config.container.removeChild(this.element)}show(){if(this.active)return;this.element.classList.add("active","block"),this.element.classList.remove("hidden"),this.active=!0;const t=this.datepicker;if(!t.inline){const i=Yi(t.inputField);i!==Yi(t.config.container)?this.element.dir=i:this.element.dir&&this.element.removeAttribute("dir"),this.place(),t.config.disableTouchKeyboard&&t.inputField.blur()}Et(t,"show")}hide(){!this.active||(this.datepicker.exitEditMode(),this.element.classList.remove("active","block"),this.element.classList.add("active","block","hidden"),this.active=!1,Et(this.datepicker,"hide"))}place(){const{classList:t,style:i}=this.element,{config:s,inputField:n}=this.datepicker,r=s.container,{width:a,height:o}=this.element.getBoundingClientRect(),{left:l,top:d,width:c}=r.getBoundingClientRect(),{left:u,top:m,width:g,height:f}=n.getBoundingClientRect();let{x:_,y:I}=s.orientation,v,h,p;r===document.body?(v=window.scrollY,h=u+window.scrollX,p=m+v):(v=r.scrollTop,h=u-l,p=m-d+v),_==="auto"&&(h<0?(_="left",h=10):h+a>c?_="right":_=Yi(n)==="rtl"?"right":"left"),_==="right"&&(h-=a-g),I==="auto"&&(I=p-o<v?"bottom":"top"),I==="top"?p-=o:p+=f,t.remove("datepicker-orient-top","datepicker-orient-bottom","datepicker-orient-right","datepicker-orient-left"),t.add(`datepicker-orient-${I}`,`datepicker-orient-${_}`),i.top=p&&`${p}px`,i.left=h&&`${h}px`}setViewSwitchLabel(t){this.controls.viewSwitch.textContent=t}setPrevBtnDisabled(t){this.controls.prevBtn.disabled=t}setNextBtnDisabled(t){this.controls.nextBtn.disabled=t}changeView(t){const i=this.currentView,s=this.views[t];return s.id!==i.id&&(this.currentView=s,this._renderMethod="render",Et(this.datepicker,"changeView"),this.main.replaceChild(s.element,i.element)),this}changeFocus(t){return this._renderMethod=lr(this,t)?"render":"refreshFocus",this.views.forEach(i=>{i.updateFocus()}),this}update(){const t=or(this.datepicker);return this._renderMethod=lr(this,t)?"render":"refresh",this.views.forEach(i=>{i.updateFocus(),i.updateSelection()}),this}render(t=!0){const i=t&&this._renderMethod||"render";delete this._renderMethod,this.currentView[i]()}}function Va(e,t,i,s,n,r){if(!!xs(e,n,r)){if(s(e)){const a=t(e,i);return Va(a,t,i,s,n,r)}return e}}function ii(e,t,i,s){const n=e.picker,r=n.currentView,a=r.step||1;let o=n.viewDate,l,d;switch(r.id){case 0:s?o=gt(o,i*7):t.ctrlKey||t.metaKey?o=mt(o,i):o=gt(o,i),l=gt,d=c=>r.disabled.includes(c);break;case 1:o=gi(o,s?i*4:i),l=gi,d=c=>{const u=new Date(c),{year:m,disabled:g}=r;return u.getFullYear()===m&&g.includes(u.getMonth())};break;default:o=mt(o,i*(s?4:1)*a),l=mt,d=c=>r.disabled.includes(Ke(c,a))}o=Va(o,l,i<0?-a:a,d,r.minDate,r.maxDate),o!==void 0&&n.changeFocus(o).render()}function vh(e,t){if(t.key==="Tab"){Ba(e);return}const i=e.picker,{id:s,isMinView:n}=i.currentView;if(i.active)if(e.editMode)switch(t.key){case"Escape":i.hide();break;case"Enter":e.exitEditMode({update:!0,autohide:e.config.autohide});break;default:return}else switch(t.key){case"Escape":i.hide();break;case"ArrowLeft":if(t.ctrlKey||t.metaKey)vi(e,-1);else if(t.shiftKey){e.enterEditMode();return}else ii(e,t,-1,!1);break;case"ArrowRight":if(t.ctrlKey||t.metaKey)vi(e,1);else if(t.shiftKey){e.enterEditMode();return}else ii(e,t,1,!1);break;case"ArrowUp":if(t.ctrlKey||t.metaKey)Fa(e);else if(t.shiftKey){e.enterEditMode();return}else ii(e,t,-1,!0);break;case"ArrowDown":if(t.shiftKey&&!t.ctrlKey&&!t.metaKey){e.enterEditMode();return}ii(e,t,1,!0);break;case"Enter":n?e.setDate(i.viewDate):i.changeView(s-1).render();break;case"Backspace":case"Delete":e.enterEditMode();return;default:t.key.length===1&&!t.ctrlKey&&!t.metaKey&&e.enterEditMode();return}else switch(t.key){case"ArrowDown":case"Escape":i.show();break;case"Enter":e.update();break;default:return}t.preventDefault(),t.stopPropagation()}function Th(e){e.config.showOnFocus&&!e._showing&&e.show()}function yh(e,t){const i=t.target;(e.picker.active||e.config.showOnClick)&&(i._active=i===document.activeElement,i._clicking=setTimeout(()=>{delete i._active,delete i._clicking},2e3))}function wh(e,t){const i=t.target;!i._clicking||(clearTimeout(i._clicking),delete i._clicking,i._active&&e.enterEditMode(),delete i._active,e.config.showOnClick&&e.show())}function bh(e,t){t.clipboardData.types.includes("text/plain")&&e.enterEditMode()}function Dh(e,t){const i=e.element;if(i!==document.activeElement)return;const s=e.picker.element;Ga(t,n=>n===i||n===s)||Ba(e)}function Ua(e,t){return e.map(i=>Ei(i,t.format,t.locale)).join(t.dateDelimiter)}function $a(e,t,i=!1){const{config:s,dates:n,rangepicker:r}=e;if(t.length===0)return i?[]:void 0;const a=r&&e===r.datepickers[1];let o=t.reduce((l,d)=>{let c=Ut(d,s.format,s.locale);if(c===void 0)return l;if(s.pickLevel>0){const u=new Date(c);s.pickLevel===1?c=a?u.setMonth(u.getMonth()+1,0):u.setDate(1):c=a?u.setFullYear(u.getFullYear()+1,0,0):u.setMonth(0,1)}return xs(c,s.minDate,s.maxDate)&&!l.includes(c)&&!s.datesDisabled.includes(c)&&!s.daysOfWeekDisabled.includes(new Date(c).getDay())&&l.push(c),l},[]);if(o.length!==0)return s.multidate&&!i&&(o=o.reduce((l,d)=>(n.includes(d)||l.push(d),l),n.filter(l=>!o.includes(l)))),s.maxNumberOfDates&&o.length>s.maxNumberOfDates?o.slice(s.maxNumberOfDates*-1):o}function Ti(e,t=3,i=!0){const{config:s,picker:n,inputField:r}=e;if(t&2){const a=n.active?s.pickLevel:s.startView;n.update().changeView(a).render(i)}t&1&&r&&(r.value=Ua(e.dates,s))}function cr(e,t,i){let{clear:s,render:n,autohide:r}=i;n===void 0&&(n=!0),n?r===void 0&&(r=e.config.autohide):r=!1;const a=$a(e,t,s);!a||(a.toString()!==e.dates.toString()?(e.dates=a,Ti(e,n?3:1),Et(e,"changeDate")):Ti(e,1),r&&e.hide())}class Rh{constructor(t,i={},s=void 0){t.datepicker=this,this.element=t;const n=this.config=Object.assign({buttonClass:i.buttonClass&&String(i.buttonClass)||"button",container:document.body,defaultViewDate:ct(),maxDate:void 0,minDate:void 0},Wi(ks,this));this._options=i,Object.assign(n,Wi(i,this));const r=this.inline=t.tagName!=="INPUT";let a,o;if(r)n.container=t,o=Vi(t.dataset.date,n.dateDelimiter),delete t.dataset.date;else{const c=i.container?document.querySelector(i.container):null;c&&(n.container=c),a=this.inputField=t,a.classList.add("datepicker-input"),o=Vi(a.value,n.dateDelimiter)}if(s){const c=s.inputs.indexOf(a),u=s.datepickers;if(c<0||c>1||!Array.isArray(u))throw Error("Invalid rangepicker object.");u[c]=this,Object.defineProperty(this,"rangepicker",{get(){return s}})}this.dates=[];const l=$a(this,o);l&&l.length>0&&(this.dates=l),a&&(a.value=Ua(this.dates,n));const d=this.picker=new Ih(this);if(r)this.show();else{const c=Dh.bind(null,this),u=[[a,"keydown",vh.bind(null,this)],[a,"focus",Th.bind(null,this)],[a,"mousedown",yh.bind(null,this)],[a,"click",wh.bind(null,this)],[a,"paste",bh.bind(null,this)],[document,"mousedown",c],[document,"touchstart",c],[window,"resize",d.place.bind(d)]];Na(this,u)}}static formatDate(t,i,s){return Ei(t,i,s&&Mt[s]||Mt.en)}static parseDate(t,i,s){return Ut(t,i,s&&Mt[s]||Mt.en)}static get locales(){return Mt}get active(){return!!(this.picker&&this.picker.active)}get pickerElement(){return this.picker?this.picker.element:void 0}setOptions(t){const i=this.picker,s=Wi(t,this);Object.assign(this._options,t),Object.assign(this.config,s),i.setOptions(s),Ti(this,3)}show(){if(this.inputField){if(this.inputField.disabled)return;this.inputField!==document.activeElement&&(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}hide(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}destroy(){return this.hide(),th(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}getDate(t=void 0){const i=t?s=>Ei(s,t,this.config.locale):s=>new Date(s);if(this.config.multidate)return this.dates.map(i);if(this.dates.length>0)return i(this.dates[0])}setDate(...t){const i=[...t],s={},n=Ps(t);typeof n=="object"&&!Array.isArray(n)&&!(n instanceof Date)&&n&&Object.assign(s,i.pop());const r=Array.isArray(i[0])?i[0]:i;cr(this,r,s)}update(t=void 0){if(this.inline)return;const i={clear:!0,autohide:!!(t&&t.autohide)},s=Vi(this.inputField.value,this.config.dateDelimiter);cr(this,s,i)}refresh(t=void 0,i=!1){t&&typeof t!="string"&&(i=t,t=void 0);let s;t==="picker"?s=2:t==="input"?s=1:s=3,Ti(this,s,!i)}enterEditMode(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit","border-blue-700"))}exitEditMode(t=void 0){if(this.inline||!this.editMode)return;const i=Object.assign({update:!1},t);delete this.editMode,this.inputField.classList.remove("in-edit","border-blue-700"),i.update&&this.update(i)}}/*!
 * FilePondPluginFileValidateType 1.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Ha=({addFilter:e,utils:t})=>{const{Type:i,isString:s,replaceInString:n,guesstimateMimeType:r,getExtensionFromFilename:a,getFilenameFromURL:o}=t,l=(g,f)=>{const _=(/^[^/]+/.exec(g)||[]).pop(),I=f.slice(0,-2);return _===I},d=(g,f)=>g.some(_=>/\*$/.test(_)?l(f,_):_===f),c=g=>{let f="";if(s(g)){const _=o(g),I=a(_);I&&(f=r(I))}else f=g.type;return f},u=(g,f,_)=>{if(f.length===0)return!0;const I=c(g);return _?new Promise((v,h)=>{_(g,I).then(p=>{d(f,p)?v():h()}).catch(h)}):d(f,I)},m=g=>f=>g[f]===null?!1:g[f]||f;return e("SET_ATTRIBUTE_TO_OPTION_MAP",g=>Object.assign(g,{accept:"acceptedFileTypes"})),e("ALLOW_HOPPER_ITEM",(g,{query:f})=>f("GET_ALLOW_FILE_TYPE_VALIDATION")?u(g,f("GET_ACCEPTED_FILE_TYPES")):!0),e("LOAD_FILE",(g,{query:f})=>new Promise((_,I)=>{if(!f("GET_ALLOW_FILE_TYPE_VALIDATION")){_(g);return}const v=f("GET_ACCEPTED_FILE_TYPES"),h=f("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),p=u(g,v,h),E=()=>{const T=v.map(m(f("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter(M=>M!==!1),b=T.filter(function(M,w){return T.indexOf(M)===w});I({status:{main:f("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:n(f("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:b.join(", "),allButLastType:b.slice(0,-1).join(", "),lastType:b[T.length-1]})}})};if(typeof p=="boolean")return p?_(g):E();p.then(()=>{_(g)}).catch(E)})),{options:{allowFileTypeValidation:[!0,i.BOOLEAN],acceptedFileTypes:[[],i.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",i.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",i.STRING],fileValidateTypeLabelExpectedTypesMap:[{},i.OBJECT],fileValidateTypeDetectType:[null,i.FUNCTION]}}},Oh=typeof window<"u"&&typeof window.document<"u";Oh&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Ha}));/*!
 * FilePondPluginFileValidateSize 2.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Wa=({addFilter:e,utils:t})=>{const{Type:i,replaceInString:s,toNaturalFileSize:n}=t;return e("ALLOW_HOPPER_ITEM",(r,{query:a})=>{if(!a("GET_ALLOW_FILE_SIZE_VALIDATION"))return!0;const o=a("GET_MAX_FILE_SIZE");if(o!==null&&r.size>o)return!1;const l=a("GET_MIN_FILE_SIZE");return!(l!==null&&r.size<l)}),e("LOAD_FILE",(r,{query:a})=>new Promise((o,l)=>{if(!a("GET_ALLOW_FILE_SIZE_VALIDATION"))return o(r);const d=a("GET_FILE_VALIDATE_SIZE_FILTER");if(d&&!d(r))return o(r);const c=a("GET_MAX_FILE_SIZE");if(c!==null&&r.size>c){l({status:{main:a("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:s(a("GET_LABEL_MAX_FILE_SIZE"),{filesize:n(c,".",a("GET_FILE_SIZE_BASE"),a("GET_FILE_SIZE_LABELS",a))})}});return}const u=a("GET_MIN_FILE_SIZE");if(u!==null&&r.size<u){l({status:{main:a("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:s(a("GET_LABEL_MIN_FILE_SIZE"),{filesize:n(u,".",a("GET_FILE_SIZE_BASE"),a("GET_FILE_SIZE_LABELS",a))})}});return}const m=a("GET_MAX_TOTAL_FILE_SIZE");if(m!==null&&a("GET_ACTIVE_ITEMS").reduce((f,_)=>f+_.fileSize,0)>m){l({status:{main:a("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:s(a("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:n(m,".",a("GET_FILE_SIZE_BASE"),a("GET_FILE_SIZE_LABELS",a))})}});return}o(r)})),{options:{allowFileSizeValidation:[!0,i.BOOLEAN],maxFileSize:[null,i.INT],minFileSize:[null,i.INT],maxTotalFileSize:[null,i.INT],fileValidateSizeFilter:[null,i.FUNCTION],labelMinFileSizeExceeded:["File is too small",i.STRING],labelMinFileSize:["Minimum file size is {filesize}",i.STRING],labelMaxFileSizeExceeded:["File is too large",i.STRING],labelMaxFileSize:["Maximum file size is {filesize}",i.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",i.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",i.STRING]}}},Sh=typeof window<"u"&&typeof window.document<"u";Sh&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Wa}));/*!
 * FilePondPluginImagePreview 4.6.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Ah=e=>/^image/.test(e.type),dr=(e,t)=>$t(e.x*t,e.y*t),ur=(e,t)=>$t(e.x+t.x,e.y+t.y),Lh=e=>{const t=Math.sqrt(e.x*e.x+e.y*e.y);return t===0?{x:0,y:0}:$t(e.x/t,e.y/t)},si=(e,t,i)=>{const s=Math.cos(t),n=Math.sin(t),r=$t(e.x-i.x,e.y-i.y);return $t(i.x+s*r.x-n*r.y,i.y+n*r.x+s*r.y)},$t=(e=0,t=0)=>({x:e,y:t}),ge=(e,t,i=1,s)=>{if(typeof e=="string")return parseFloat(e)*i;if(typeof e=="number")return e*(s?t[s]:Math.min(t.width,t.height))},Mh=(e,t,i)=>{const s=e.borderStyle||e.lineStyle||"solid",n=e.backgroundColor||e.fontColor||"transparent",r=e.borderColor||e.lineColor||"transparent",a=ge(e.borderWidth||e.lineWidth,t,i),o=e.lineCap||"round",l=e.lineJoin||"round",d=typeof s=="string"?"":s.map(u=>ge(u,t,i)).join(","),c=e.opacity||1;return{"stroke-linecap":o,"stroke-linejoin":l,"stroke-width":a||0,"stroke-dasharray":d,stroke:r,fill:n,opacity:c}},we=e=>e!=null,Ch=(e,t,i=1)=>{let s=ge(e.x,t,i,"width")||ge(e.left,t,i,"width"),n=ge(e.y,t,i,"height")||ge(e.top,t,i,"height"),r=ge(e.width,t,i,"width"),a=ge(e.height,t,i,"height"),o=ge(e.right,t,i,"width"),l=ge(e.bottom,t,i,"height");return we(n)||(we(a)&&we(l)?n=t.height-a-l:n=l),we(s)||(we(r)&&we(o)?s=t.width-r-o:s=o),we(r)||(we(s)&&we(o)?r=t.width-s-o:r=0),we(a)||(we(n)&&we(l)?a=t.height-n-l:a=0),{x:s||0,y:n||0,width:r||0,height:a||0}},Ph=e=>e.map((t,i)=>`${i===0?"M":"L"} ${t.x} ${t.y}`).join(" "),Ne=(e,t)=>Object.keys(t).forEach(i=>e.setAttribute(i,t[i])),xh="http://www.w3.org/2000/svg",ht=(e,t)=>{const i=document.createElementNS(xh,e);return t&&Ne(i,t),i},Nh=e=>Ne(e,{...e.rect,...e.styles}),kh=e=>{const t=e.rect.x+e.rect.width*.5,i=e.rect.y+e.rect.height*.5,s=e.rect.width*.5,n=e.rect.height*.5;return Ne(e,{cx:t,cy:i,rx:s,ry:n,...e.styles})},Gh={contain:"xMidYMid meet",cover:"xMidYMid slice"},Fh=(e,t)=>{Ne(e,{...e.rect,...e.styles,preserveAspectRatio:Gh[t.fit]||"none"})},Bh={left:"start",center:"middle",right:"end"},Vh=(e,t,i,s)=>{const n=ge(t.fontSize,i,s),r=t.fontFamily||"sans-serif",a=t.fontWeight||"normal",o=Bh[t.textAlign]||"start";Ne(e,{...e.rect,...e.styles,"stroke-width":0,"font-weight":a,"font-size":n,"font-family":r,"text-anchor":o}),e.text!==t.text&&(e.text=t.text,e.textContent=t.text.length?t.text:" ")},Uh=(e,t,i,s)=>{Ne(e,{...e.rect,...e.styles,fill:"none"});const n=e.childNodes[0],r=e.childNodes[1],a=e.childNodes[2],o=e.rect,l={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(Ne(n,{x1:o.x,y1:o.y,x2:l.x,y2:l.y}),!t.lineDecoration)return;r.style.display="none",a.style.display="none";const d=Lh({x:l.x-o.x,y:l.y-o.y}),c=ge(.05,i,s);if(t.lineDecoration.indexOf("arrow-begin")!==-1){const u=dr(d,c),m=ur(o,u),g=si(o,2,m),f=si(o,-2,m);Ne(r,{style:"display:block;",d:`M${g.x},${g.y} L${o.x},${o.y} L${f.x},${f.y}`})}if(t.lineDecoration.indexOf("arrow-end")!==-1){const u=dr(d,-c),m=ur(l,u),g=si(l,2,m),f=si(l,-2,m);Ne(a,{style:"display:block;",d:`M${g.x},${g.y} L${l.x},${l.y} L${f.x},${f.y}`})}},$h=(e,t,i,s)=>{Ne(e,{...e.styles,fill:"none",d:Ph(t.points.map(n=>({x:ge(n.x,i,s,"width"),y:ge(n.y,i,s,"height")})))})},ni=e=>t=>ht(e,{id:t.id}),Hh=e=>{const t=ht("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return t.onload=()=>{t.setAttribute("opacity",e.opacity||1)},t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),t},Wh=e=>{const t=ht("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),i=ht("line");t.appendChild(i);const s=ht("path");t.appendChild(s);const n=ht("path");return t.appendChild(n),t},Yh={image:Hh,rect:ni("rect"),ellipse:ni("ellipse"),text:ni("text"),path:ni("path"),line:Wh},qh={rect:Nh,ellipse:kh,image:Fh,text:Vh,path:$h,line:Uh},zh=(e,t)=>Yh[e](t),jh=(e,t,i,s,n)=>{t!=="path"&&(e.rect=Ch(i,s,n)),e.styles=Mh(i,s,n),qh[t](e,i,s,n)},Xh=["x","y","left","top","right","bottom","width","height"],Kh=e=>typeof e=="string"&&/%/.test(e)?parseFloat(e)/100:e,Zh=e=>{const[t,i]=e,s=i.points?{}:Xh.reduce((n,r)=>(n[r]=Kh(i[r]),n),{});return[t,{zIndex:0,...i,...s}]},Qh=(e,t)=>e[1].zIndex>t[1].zIndex?1:e[1].zIndex<t[1].zIndex?-1:0,Jh=e=>e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:t,props:i})=>{if(!i.dirty)return;const{crop:s,resize:n,markup:r}=i,a=i.width,o=i.height;let l=s.width,d=s.height;if(n){const{size:g}=n;let f=g&&g.width,_=g&&g.height;const I=n.mode,v=n.upscale;f&&!_&&(_=f),_&&!f&&(f=_);const h=l<f&&d<_;if(!h||h&&v){let p=f/l,E=_/d;if(I==="force")l=f,d=_;else{let T;I==="cover"?T=Math.max(p,E):I==="contain"&&(T=Math.min(p,E)),l=l*T,d=d*T}}}const c={width:a,height:o};t.element.setAttribute("width",c.width),t.element.setAttribute("height",c.height);const u=Math.min(a/l,o/d);t.element.innerHTML="";const m=t.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");r.filter(m).map(Zh).sort(Qh).forEach(g=>{const[f,_]=g,I=zh(f,_);jh(I,f,_,c,u),t.element.appendChild(I)})}}),Ft=(e,t)=>({x:e,y:t}),ep=(e,t)=>e.x*t.x+e.y*t.y,fr=(e,t)=>Ft(e.x-t.x,e.y-t.y),tp=(e,t)=>ep(fr(e,t),fr(e,t)),hr=(e,t)=>Math.sqrt(tp(e,t)),pr=(e,t)=>{const i=e,s=1.5707963267948966,n=t,r=1.5707963267948966-t,a=Math.sin(s),o=Math.sin(n),l=Math.sin(r),d=Math.cos(r),c=i/a,u=c*o,m=c*l;return Ft(d*u,d*m)},ip=(e,t)=>{const i=e.width,s=e.height,n=pr(i,t),r=pr(s,t),a=Ft(e.x+Math.abs(n.x),e.y-Math.abs(n.y)),o=Ft(e.x+e.width+Math.abs(r.y),e.y+Math.abs(r.x)),l=Ft(e.x-Math.abs(r.y),e.y+e.height-Math.abs(r.x));return{width:hr(a,o),height:hr(a,l)}},sp=(e,t,i=1)=>{const s=e.height/e.width;let n=1,r=t,a=1,o=s;o>r&&(o=r,a=o/s);const l=Math.max(n/a,r/o),d=e.width/(i*l*a),c=d*t;return{width:d,height:c}},Ya=(e,t,i,s)=>{const n=s.x>.5?1-s.x:s.x,r=s.y>.5?1-s.y:s.y,a=n*2*e.width,o=r*2*e.height,l=ip(t,i);return Math.max(l.width/a,l.height/o)},qa=(e,t)=>{let i=e.width,s=i*t;s>e.height&&(s=e.height,i=s/t);const n=(e.width-i)*.5,r=(e.height-s)*.5;return{x:n,y:r,width:i,height:s}},np=(e,t={})=>{let{zoom:i,rotation:s,center:n,aspectRatio:r}=t;r||(r=e.height/e.width);const a=sp(e,r,i),o={x:a.width*.5,y:a.height*.5},l={x:0,y:0,width:a.width,height:a.height,center:o},d=typeof t.scaleToFit>"u"||t.scaleToFit,c=Ya(e,qa(l,r),s,d?n:{x:.5,y:.5}),u=i*c;return{widthFloat:a.width/u,heightFloat:a.height/u,width:Math.round(a.width/u),height:Math.round(a.height/u)}},xe={type:"spring",stiffness:.5,damping:.45,mass:10},rp=e=>e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:t,props:i})=>{t.appendChild(i.image)}}),ap=e=>e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:xe,originY:xe,scaleX:xe,scaleY:xe,translateX:xe,translateY:xe,rotateZ:xe}},create:({root:t,props:i})=>{i.width=i.image.width,i.height=i.image.height,t.ref.bitmap=t.appendChildView(t.createChildView(rp(e),{image:i.image}))},write:({root:t,props:i})=>{const{flip:s}=i.crop,{bitmap:n}=t.ref;n.scaleX=s.horizontal?-1:1,n.scaleY=s.vertical?-1:1}}),op=e=>e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:t,props:i}){!i.background||(t.element.style.backgroundColor=i.background)},create:({root:t,props:i})=>{t.ref.image=t.appendChildView(t.createChildView(ap(e),Object.assign({},i))),t.ref.createMarkup=()=>{t.ref.markup||(t.ref.markup=t.appendChildView(t.createChildView(Jh(e),Object.assign({},i))))},t.ref.destroyMarkup=()=>{!t.ref.markup||(t.removeChildView(t.ref.markup),t.ref.markup=null)};const s=t.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");s!==null&&(s==="grid"?t.element.dataset.transparencyIndicator=s:t.element.dataset.transparencyIndicator="color")},write:({root:t,props:i,shouldOptimize:s})=>{const{crop:n,markup:r,resize:a,dirty:o,width:l,height:d}=i;t.ref.image.crop=n;const c={x:0,y:0,width:l,height:d,center:{x:l*.5,y:d*.5}},u={width:t.ref.image.width,height:t.ref.image.height},m={x:n.center.x*u.width,y:n.center.y*u.height},g={x:c.center.x-u.width*n.center.x,y:c.center.y-u.height*n.center.y},f=Math.PI*2+n.rotation%(Math.PI*2),_=n.aspectRatio||u.height/u.width,I=typeof n.scaleToFit>"u"||n.scaleToFit,v=Ya(u,qa(c,_),f,I?n.center:{x:.5,y:.5}),h=n.zoom*v;r&&r.length?(t.ref.createMarkup(),t.ref.markup.width=l,t.ref.markup.height=d,t.ref.markup.resize=a,t.ref.markup.dirty=o,t.ref.markup.markup=r,t.ref.markup.crop=np(u,n)):t.ref.markup&&t.ref.destroyMarkup();const p=t.ref.image;if(s){p.originX=null,p.originY=null,p.translateX=null,p.translateY=null,p.rotateZ=null,p.scaleX=null,p.scaleY=null;return}p.originX=m.x,p.originY=m.y,p.translateX=g.x,p.translateY=g.y,p.rotateZ=f,p.scaleX=h,p.scaleY=h}}),lp=e=>e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:xe,scaleY:xe,translateY:xe,opacity:{type:"tween",duration:400}}},create:({root:t,props:i})=>{t.ref.clip=t.appendChildView(t.createChildView(op(e),{id:i.id,image:i.image,crop:i.crop,markup:i.markup,resize:i.resize,dirty:i.dirty,background:i.background}))},write:({root:t,props:i,shouldOptimize:s})=>{const{clip:n}=t.ref,{image:r,crop:a,markup:o,resize:l,dirty:d}=i;if(n.crop=a,n.markup=o,n.resize=l,n.dirty=d,n.opacity=s?0:1,s||t.rect.element.hidden)return;const c=r.height/r.width;let u=a.aspectRatio||c;const m=t.rect.inner.width,g=t.rect.inner.height;let f=t.query("GET_IMAGE_PREVIEW_HEIGHT");const _=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),I=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),v=t.query("GET_PANEL_ASPECT_RATIO"),h=t.query("GET_ALLOW_MULTIPLE");v&&!h&&(f=m*v,u=v);let p=f!==null?f:Math.max(_,Math.min(m*u,I)),E=p/u;E>m&&(E=m,p=E*u),p>g&&(p=g,E=g/u),n.width=E,n.height=p}});let cp=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,gr=0;const dp=e=>e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:t,props:i})=>{let s=cp;if(document.querySelector("base")){const n=new URL(window.location.href.replace(window.location.hash,"")).href;s=s.replace(/url\(\#/g,"url("+n+"#")}gr++,t.element.classList.add(`filepond--image-preview-overlay-${i.status}`),t.element.innerHTML=s.replace(/__UID__/g,gr)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),up=function(){self.onmessage=e=>{createImageBitmap(e.data.message.file).then(t=>{self.postMessage({id:e.data.id,message:t},[t])})}},fp=function(){self.onmessage=e=>{const t=e.data.message.imageData,i=e.data.message.colorMatrix,s=t.data,n=s.length,r=i[0],a=i[1],o=i[2],l=i[3],d=i[4],c=i[5],u=i[6],m=i[7],g=i[8],f=i[9],_=i[10],I=i[11],v=i[12],h=i[13],p=i[14],E=i[15],T=i[16],b=i[17],M=i[18],w=i[19];let R=0,C=0,L=0,P=0,U=0;for(;R<n;R+=4)C=s[R]/255,L=s[R+1]/255,P=s[R+2]/255,U=s[R+3]/255,s[R]=Math.max(0,Math.min((C*r+L*a+P*o+U*l+d)*255,255)),s[R+1]=Math.max(0,Math.min((C*c+L*u+P*m+U*g+f)*255,255)),s[R+2]=Math.max(0,Math.min((C*_+L*I+P*v+U*h+p)*255,255)),s[R+3]=Math.max(0,Math.min((C*E+L*T+P*b+U*M+w)*255,255));self.postMessage({id:e.data.id,message:t},[t.data.buffer])}},hp=(e,t)=>{let i=new Image;i.onload=()=>{const s=i.naturalWidth,n=i.naturalHeight;i=null,t(s,n)},i.src=e},pp={1:()=>[1,0,0,1,0,0],2:e=>[-1,0,0,1,e,0],3:(e,t)=>[-1,0,0,-1,e,t],4:(e,t)=>[1,0,0,-1,0,t],5:()=>[0,1,1,0,0,0],6:(e,t)=>[0,1,-1,0,t,0],7:(e,t)=>[0,-1,-1,0,t,e],8:e=>[0,-1,1,0,0,e]},gp=(e,t,i,s)=>{s!==-1&&e.transform.apply(e,pp[s](t,i))},mp=(e,t,i,s)=>{t=Math.round(t),i=Math.round(i);const n=document.createElement("canvas");n.width=t,n.height=i;const r=n.getContext("2d");return s>=5&&s<=8&&([t,i]=[i,t]),gp(r,t,i,s),r.drawImage(e,0,0,t,i),n},za=e=>/^image/.test(e.type)&&!/svg/.test(e.type),Ep=10,_p=10,Ip=e=>{const t=Math.min(Ep/e.width,_p/e.height),i=document.createElement("canvas"),s=i.getContext("2d"),n=i.width=Math.ceil(e.width*t),r=i.height=Math.ceil(e.height*t);s.drawImage(e,0,0,n,r);let a=null;try{a=s.getImageData(0,0,n,r).data}catch{return null}const o=a.length;let l=0,d=0,c=0,u=0;for(;u<o;u+=4)l+=a[u]*a[u],d+=a[u+1]*a[u+1],c+=a[u+2]*a[u+2];return l=qi(l,o),d=qi(d,o),c=qi(c,o),{r:l,g:d,b:c}},qi=(e,t)=>Math.floor(Math.sqrt(e/(t/4))),vp=(e,t)=>(t=t||document.createElement("canvas"),t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t),Tp=e=>{let t;try{t=new ImageData(e.width,e.height)}catch{t=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return t.data.set(new Uint8ClampedArray(e.data)),t},yp=e=>new Promise((t,i)=>{const s=new Image;s.crossOrigin="Anonymous",s.onload=()=>{t(s)},s.onerror=n=>{i(n)},s.src=e}),wp=e=>{const t=dp(e),i=lp(e),{createWorker:s}=e.utils,n=(h,p,E)=>new Promise(T=>{h.ref.imageData||(h.ref.imageData=E.getContext("2d").getImageData(0,0,E.width,E.height));const b=Tp(h.ref.imageData);if(!p||p.length!==20)return E.getContext("2d").putImageData(b,0,0),T();const M=s(fp);M.post({imageData:b,colorMatrix:p},w=>{E.getContext("2d").putImageData(w,0,0),M.terminate(),T()},[b.data.buffer])}),r=(h,p)=>{h.removeChildView(p),p.image.width=1,p.image.height=1,p._destroy()},a=({root:h})=>{const p=h.ref.images.shift();return p.opacity=0,p.translateY=-15,h.ref.imageViewBin.push(p),p},o=({root:h,props:p,image:E})=>{const T=p.id,b=h.query("GET_ITEM",{id:T});if(!b)return;const M=b.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},w=h.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let R,C,L=!1;h.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(R=b.getMetadata("markup")||[],C=b.getMetadata("resize"),L=!0);const P=h.appendChildView(h.createChildView(i,{id:T,image:E,crop:M,resize:C,markup:R,dirty:L,background:w,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),h.childViews.length);h.ref.images.push(P),P.opacity=1,P.scaleX=1,P.scaleY=1,P.translateY=0,setTimeout(()=>{h.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:T})},250)},l=({root:h,props:p})=>{const E=h.query("GET_ITEM",{id:p.id});if(!E)return;const T=h.ref.images[h.ref.images.length-1];T.crop=E.getMetadata("crop"),T.background=h.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),h.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(T.dirty=!0,T.resize=E.getMetadata("resize"),T.markup=E.getMetadata("markup"))},d=({root:h,props:p,action:E})=>{if(!/crop|filter|markup|resize/.test(E.change.key)||!h.ref.images.length)return;const T=h.query("GET_ITEM",{id:p.id});if(!!T){if(/filter/.test(E.change.key)){const b=h.ref.images[h.ref.images.length-1];n(h,E.change.value,b.image);return}if(/crop|markup|resize/.test(E.change.key)){const b=T.getMetadata("crop"),M=h.ref.images[h.ref.images.length-1];if(b&&b.aspectRatio&&M.crop&&M.crop.aspectRatio&&Math.abs(b.aspectRatio-M.crop.aspectRatio)>1e-5){const w=a({root:h});o({root:h,props:p,image:vp(w.image)})}else l({root:h,props:p})}}},c=h=>{const E=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return(E?parseInt(E[1]):null)<=58?!1:"createImageBitmap"in window&&za(h)},u=({root:h,props:p})=>{const{id:E}=p,T=h.query("GET_ITEM",E);if(!T)return;const b=URL.createObjectURL(T.file);hp(b,(M,w)=>{h.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:E,width:M,height:w})})},m=({root:h,props:p})=>{const{id:E}=p,T=h.query("GET_ITEM",E);if(!T)return;const b=URL.createObjectURL(T.file),M=()=>{yp(b).then(w)},w=R=>{URL.revokeObjectURL(b);const L=(T.getMetadata("exif")||{}).orientation||-1;let{width:P,height:U}=R;if(!P||!U)return;L>=5&&L<=8&&([P,U]=[U,P]);const S=Math.max(1,window.devicePixelRatio*.75),y=h.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*S,O=U/P,x=h.rect.element.width,k=h.rect.element.height;let H=x,Y=H*O;O>1?(H=Math.min(P,x*y),Y=H*O):(Y=Math.min(U,k*y),H=Y/O);const he=mp(R,H,Y,L),V=()=>{const te=h.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?Ip(data):null;T.setMetadata("color",te,!0),"close"in R&&R.close(),h.ref.overlayShadow.opacity=1,o({root:h,props:p,image:he})},G=T.getMetadata("filter");G?n(h,G,he).then(V):V()};if(c(T.file)){const R=s(up);R.post({file:T.file},C=>{if(R.terminate(),!C){M();return}w(C)})}else M()},g=({root:h})=>{const p=h.ref.images[h.ref.images.length-1];p.translateY=0,p.scaleX=1,p.scaleY=1,p.opacity=1},f=({root:h})=>{h.ref.overlayShadow.opacity=1,h.ref.overlayError.opacity=0,h.ref.overlaySuccess.opacity=0},_=({root:h})=>{h.ref.overlayShadow.opacity=.25,h.ref.overlayError.opacity=1},I=({root:h})=>{h.ref.overlayShadow.opacity=.25,h.ref.overlaySuccess.opacity=1},v=({root:h})=>{h.ref.images=[],h.ref.imageData=null,h.ref.imageViewBin=[],h.ref.overlayShadow=h.appendChildView(h.createChildView(t,{opacity:0,status:"idle"})),h.ref.overlaySuccess=h.appendChildView(h.createChildView(t,{opacity:0,status:"success"})),h.ref.overlayError=h.appendChildView(h.createChildView(t,{opacity:0,status:"failure"}))};return e.utils.createView({name:"image-preview-wrapper",create:v,styles:["height"],apis:["height"],destroy:({root:h})=>{h.ref.images.forEach(p=>{p.image.width=1,p.image.height=1})},didWriteView:({root:h})=>{h.ref.images.forEach(p=>{p.dirty=!1})},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:g,DID_IMAGE_PREVIEW_CONTAINER_CREATE:u,DID_FINISH_CALCULATE_PREVIEWSIZE:m,DID_UPDATE_ITEM_METADATA:d,DID_THROW_ITEM_LOAD_ERROR:_,DID_THROW_ITEM_PROCESSING_ERROR:_,DID_THROW_ITEM_INVALID:_,DID_COMPLETE_ITEM_PROCESSING:I,DID_START_ITEM_PROCESSING:f,DID_REVERT_ITEM_PROCESSING:f},({root:h})=>{const p=h.ref.imageViewBin.filter(E=>E.opacity===0);h.ref.imageViewBin=h.ref.imageViewBin.filter(E=>E.opacity>0),p.forEach(E=>r(h,E)),p.length=0})})},ja=e=>{const{addFilter:t,utils:i}=e,{Type:s,createRoute:n,isFile:r}=i,a=wp(e);return t("CREATE_VIEW",o=>{const{is:l,view:d,query:c}=o;if(!l("file")||!c("GET_ALLOW_IMAGE_PREVIEW"))return;const u=({root:I,props:v})=>{const{id:h}=v,p=c("GET_ITEM",h);if(!p||!r(p.file)||p.archived)return;const E=p.file;if(!Ah(E)||!c("GET_IMAGE_PREVIEW_FILTER_ITEM")(p))return;const T="createImageBitmap"in(window||{}),b=c("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!T&&b&&E.size>b)return;I.ref.imagePreview=d.appendChildView(d.createChildView(a,{id:h}));const M=I.query("GET_IMAGE_PREVIEW_HEIGHT");M&&I.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:p.id,height:M});const w=!T&&E.size>c("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");I.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:h},w)},m=(I,v)=>{if(!I.ref.imagePreview)return;let{id:h}=v;const p=I.query("GET_ITEM",{id:h});if(!p)return;const E=I.query("GET_PANEL_ASPECT_RATIO"),T=I.query("GET_ITEM_PANEL_ASPECT_RATIO"),b=I.query("GET_IMAGE_PREVIEW_HEIGHT");if(E||T||b)return;let{imageWidth:M,imageHeight:w}=I.ref;if(!M||!w)return;const R=I.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),C=I.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),P=(p.getMetadata("exif")||{}).orientation||-1;if(P>=5&&P<=8&&([M,w]=[w,M]),!za(p.file)||I.query("GET_IMAGE_PREVIEW_UPSCALE")){const x=2048/M;M*=x,w*=x}const U=w/M,S=(p.getMetadata("crop")||{}).aspectRatio||U;let $=Math.max(R,Math.min(w,C));const y=I.rect.element.width,O=Math.min(y*S,$);I.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:p.id,height:O})},g=({root:I})=>{I.ref.shouldRescale=!0},f=({root:I,action:v})=>{v.change.key==="crop"&&(I.ref.shouldRescale=!0)},_=({root:I,action:v})=>{I.ref.imageWidth=v.width,I.ref.imageHeight=v.height,I.ref.shouldRescale=!0,I.ref.shouldDrawPreview=!0,I.dispatch("KICK")};d.registerWriter(n({DID_RESIZE_ROOT:g,DID_STOP_RESIZE:g,DID_LOAD_ITEM:u,DID_IMAGE_PREVIEW_CALCULATE_SIZE:_,DID_UPDATE_ITEM_METADATA:f},({root:I,props:v})=>{!I.ref.imagePreview||I.rect.element.hidden||(I.ref.shouldRescale&&(m(I,v),I.ref.shouldRescale=!1),I.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{I.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:v.id})})}),I.ref.shouldDrawPreview=!1))}))}),{options:{allowImagePreview:[!0,s.BOOLEAN],imagePreviewFilterItem:[()=>!0,s.FUNCTION],imagePreviewHeight:[null,s.INT],imagePreviewMinHeight:[44,s.INT],imagePreviewMaxHeight:[256,s.INT],imagePreviewMaxFileSize:[null,s.INT],imagePreviewZoomFactor:[2,s.INT],imagePreviewUpscale:[!1,s.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,s.INT],imagePreviewTransparencyIndicator:[null,s.STRING],imagePreviewCalculateAverageImageColor:[!1,s.BOOLEAN],imagePreviewMarkupShow:[!0,s.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,s.FUNCTION]}}},bp=typeof window<"u"&&typeof window.document<"u";bp&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:ja}));const Dp=e=>(co("data-v-5ba19fa4"),e=e(),uo(),e),Rp={class:"p-4 mb-6 w-full rounded-md theme-color"},Op=["innerHTML"],Sp={class:"mb-4 section-title"},Ap={key:0,class:"p-2 mb-4 rounded-md theme-color hover:theme-colored"},Lp={class:"mb-2 title"},Mp={key:0,class:"flex flex-row gap-2"},Cp=["href"],Pp={key:0,class:"w-1/5"},xp=["src"],Np={class:"flex flex-col gap-2 w-3/4"},kp={class:"title"},Gp=["innerHTML"],Fp={key:0,class:"p-2 mb-2 w-full text-white bg-red-500 rounded-md"},Bp={class:"alert-success"},Vp={class:"italic"},Up={class:"flex flex-row p-2 mb-2 text-white rounded-md button-color"},$p={class:"input-block"},Hp=["name"],Wp={class:"field"},Yp=["placeholder"],qp={class:"-mt-2 input-block"},zp={class:"input-block"},jp={class:"input-block"},Xp={class:"flex flex-row gap-x-2 input-block"},Kp={class:"relative w-full"},Zp={class:"flex absolute left-1 top-3.5 items-center pl-2 pointer-events-none"},Qp=["placeholder"],Jp={class:"grid grid-cols-1 gap-2 input-block md:grid-cols-2"},eg={class:"toggler-box__icons"},tg={class:"toggler-box__description"},ig={class:"toggler-box__icons"},sg={class:"toggler-box__description"},ng=Dp(()=>N("b",null,"Contain Gore",-1)),rg={class:"toggler-box__icons"},ag={class:"toggler-box__description"},og={class:"toggler-box__icons"},lg={class:"toggler-box__description"},cg={class:"toggler-box__icons"},dg={class:"toggler-box__description"},ug={class:"flex flex-row justify-between md:justify-end"},fg={class:"flex flex-row"},hg={__name:"ArtworkForm",setup(e){const t=jf(Ha,Wa,ja),i=eo(),{oApiConfiguration:s,fetchOptions:n}=mr(),r=po(s,n()),{t:a}=Er(),l=to().public.apiUrl,d=io(),{$router:c}=_r(),u=X(!1),m=so(()=>d.query.redrawWorkId);no(()=>{i.loggedIn||c.push("/"),_(),m.value?he():H.value=!1;const V=ro().add(1,"day").format("DD/MM/yyyy"),G=document.getElementById("publishDate");new Rh(G,{autohide:!0,todayHighlight:!0,format:"dd/mm/yyyy",minDate:V})}),Ir(()=>c.query,()=>{g()});const g=()=>{v.value=[],T.value=[],E.value.isExplicit=!1},f=mo(s,n()),_=async()=>{if(!m.value){let G=1;i.i502p00r0?G=await f.getSetting("artwork_max_uploads_pro"):G=await f.getSetting("artwork_max_uploads"),w.value=G}const V=await f.getSetting("artwork_max_file_size");M.value=V,I.value="<div class='text-xxs'><div>Pick or drop up to "+w.value+" files here</div><div>PNG, JPG up to "+M.value+"MB</div></div>"},I=X(""),v=X([]),h=V=>{v.value=V.map(G=>G.file)},p="artwork-form",E=X({title:"",description:"",tags:"",isExplicit:!1,isGore:!1,isOriginalCharacter:!1,isAllowRedraw:!1,isredrawInMyStyle:!1,publishDate:null,publishTime:null}),T=X([]),b=X({showFileTooBig:!1}),M=X(5),w=X(1),R=X(!1),C=X(!1),L=X(!1),P=X(""),U=async()=>{fo().validate(p,a),O();const V=document.getElementById("publishDate");let G=null;if(V.value){const B=V.value.split("/"),j=`${B[2]}-${B[1]}-${B[0]}`;let _e="00:00:00";E.value.publishTime&&(_e=`${E.value.publishTime}:00`),G=`${j} ${_e}`}const te=[];T.value.forEach(B=>{te.push(B.value)});const F=new FormData;F.append("title",E.value.title),F.append("description",E.value.description),F.append("tags",te.toString()),F.append("is_explicit",E.value.isExplicit?1:0),F.append("is_gore",E.value.isGore?1:0),F.append("is_original_character",E.value.isOriginalCharacter?1:0),F.append("allow_redraw",E.value.isAllowRedraw?1:0),F.append("redraw_in_your_style",E.value.isredrawInMyStyle?1:0),m.value&&F.append("redraw_of",m.value),F.append("scheduled_post",["",null].includes(G)?null:oo().formatDateToApi(G));for(let B=0;B<v.value.length;B++)if(v.value[B].size>M.value*1e6&&(b.value.showFileTooBig=!0),!b.value.showFileTooBig){const j=v.value[B];F.append("files[]",j),F.append("file_order[]",B)}b.value.showFileTooBig||(R.value=!0,C.value=!1,await lo.post(l+"/artworks/post",F,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${i.a4ht0jen}`}}).then(({data:B})=>{if(B.success){const j=B.data.id;C.value=!0,setTimeout(()=>{c.push("/a/"+j)},1e3)}else $()}).catch(B=>{$()})),R.value=!1},S=X(!1),$=()=>{S.value=!0},y=()=>{E.value.isExplicit=!E.value.isExplicit,E.value.isGore=!1},O=()=>{S.value=!1,R.value=!1,C.value=!1,L.value=!1,P.value=""},x=X({}),k=X(!0),H=X(!0),Y=X([]),he=async()=>{k.value=!0,H.value=!0;const[V,G]=await r.getWorkById(m.value);G||(x.value=V,V.artwork_has_tags.length&&(V.artwork_has_tags.forEach(({artwork_tags:F})=>{Y.value.push({key:F.id,value:F.tag})}),T.value=Y.value)),k.value=!1,H.value=!1};return(V,G)=>{const te=go,F=ao("tags-input");return z(),be("div",null,[N("div",Rp,[N("div",{onClick:G[0]||(G[0]=B=>u.value=!A(u)),class:"flex flex-row justify-between w-full cursor-pointer title"},[Ze(q(V.$t("guidelines.title"))+" ",1),ne(oe,{name:"i-material-symbols-keyboard-arrow-down"})]),A(u)?(z(),be("div",{key:0,innerHTML:V.$t("guidelines.content"),class:"guidelines"},null,8,Op)):Pe("",!0)]),N("div",Sp,q(A(m)?V.$t("artworks.add.form.titleRedraw"):V.$t("artworks.add.form.title")),1),A(m)?(z(),be("div",Ap,[N("div",null,[N("div",Lp,q(V.$t("artworks.originalArtwork")),1),A(k)?(z(),be("div",Mp,[ne(Ct),Ze(" "+q(V.$t("artworks.redrawOriginalLoading")),1)])):(z(),be("a",{key:1,href:"/a/"+A(m),target:"_blank",class:"flex flex-row gap-2"},[A(x).artwork_assets?(z(),be("div",Pp,[N("img",{preload:"",loading:"lazy",class:"w-full rounded-md",src:V.artworkThumb(A(x).artwork_assets[0].bucket,A(x).artwork_assets[0].filename,"thumbnail",!1),onError:G[1]||(G[1]=(...B)=>V.imageLoadError&&V.imageLoadError(...B))},null,40,xp)])):Pe("",!0),N("div",Np,[N("span",kp,q(A(x).title),1),N("p",{innerHTML:A(x).description.length>300?A(x).description.slice(0,300)+"..":A(x).description},null,8,Gp)])],8,Cp))])])):Pe("",!0),N("div",null,[A(L)?(z(),be("div",Fp,q(A(P)),1)):Pe("",!0),re(N("div",Bp,[Ze(q(V.$t("artworks.add.form.uploadSuccess"))+" ",1),N("span",Vp,q(V.$t("artworks.add.form.successRedirect")),1)],512),[[de,A(C)]]),re(N("div",Up,[ne(Ct,{class:"mr-1"}),Ze(" "+q(V.$t("artworks.add.form.uploading")),1)],512),[[de,A(R)]]),re(N("div",{class:"alert-danger"},q(V.$t("artworks.add.form.uploadFailure")),513),[[de,A(S)]])]),N("form",{id:p,enctype:"multipart/form-data",onSubmit:G[12]||(G[12]=Xe(B=>U(),["prevent"]))},[N("div",$p,[N("n-validate",{for:"title",name:V.$t("title")},[N("div",Wp,[re(N("input",{"onUpdate:modelValue":G[2]||(G[2]=B=>A(E).title=B),type:"text",rules:"required|max:100",class:ce(["form-input input",{"pointer-events-none cursor-not-allowed":A(R)||A(C)}]),placeholder:V.$t("title")},null,10,Yp),[[js,A(E).title]])])],8,Hp)]),N("div",qp,[ne(A(yr.exports.VueEditor),{modelValue:A(E).description,"onUpdate:modelValue":G[3]||(G[3]=B=>A(E).description=B),editorToolbar:A(Tr),class:ce([{"pointer-events-none cursor-not-allowed":A(R)||A(C)}]),placeholder:V.$t("description")},null,8,["modelValue","editorToolbar","class","placeholder"])]),N("div",zp,[re(N("div",{class:"p-2 mb-2 text-xs text-white bg-red-400 rounded-md shadow-md"},q(V.$t("artworks.add.form.fileTooBig"))+" "+q(A(M))+"MB. ",513),[[de,A(b).showFileTooBig]]),ne(te,null,{default:zi(()=>[ne(A(t),{ref:"pond",onUpdatefiles:h,"label-idle":A(I),"max-files":A(m)?1:A(w),"max-file-size":A(M)*1e6,class:ce(["bg-transparent rounded-sm",{"pointer-events-none cursor-not-allowed":A(R)||A(C)}]),"accepted-file-types":"image/jpeg, image/png","allow-multiple":"true","allow-drop":"true","allow-reorder":"true","allow-process":"true",credits:"false",name:"files[]","instant-upload":"false"},null,8,["label-idle","max-files","max-file-size","class"])]),_:1})]),N("div",jp,[ne(te,null,{default:zi(()=>[A(H)?Pe("",!0):(z(),Ie(F,{key:0,modelValue:A(T),"onUpdate:modelValue":G[4]||(G[4]=B=>vr(T)?T.value=B:null),placeholder:V.$t("tagsInputPlaceholder"),typeahead:!0,"typeahead-style":"dropdown","typeahead-activation-threshold":2,"typeahead-show-on-focus":!0,"typeahead-hide-discard":!0,"typeahead-url":A(l)+"/artworks/tags/search?keyword=:search","add-tags-on-comma":!0,class:ce({"pointer-events-none cursor-not-allowed":A(R)||A(C)}),"initial-value":!A(m)&&!A(H)?[]:A(Y)},null,8,["modelValue","placeholder","typeahead-url","class","initial-value"]))]),_:1})]),re(N("div",Xp,[N("div",Kp,[N("div",Zp,[ne(oe,{name:"i-ion-ios-calendar"})]),N("input",{id:"publishDate",type:"text",class:"block pl-10 mb-0 w-full form-input input",placeholder:V.$t("artworks.add.form.publishDate"),autocomplete:"off"},null,8,Qp)]),re(N("input",{"onUpdate:modelValue":G[5]||(G[5]=B=>A(E).publishTime=B),type:"time",class:"mb-0 form-input input"},null,512),[[js,A(E).publishTime]])],512),[[de,!A(m)]]),N("div",Jp,[N("div",{onClick:G[6]||(G[6]=Xe(B=>y(),["prevent"])),class:ce(["toggler-box",{"toggler-box__active":A(E).isExplicit}])},[N("div",eg,[A(E).isExplicit?(z(),Ie(oe,{key:1,name:"i-ic-outline-check",class:"text-green-500"})):(z(),Ie(oe,{key:0,name:"i-fluent-checkbox-unchecked-20-regular"}))]),N("div",tg,[N("b",null,q(V.$t("explicitContent")),1),N("span",null,q(V.$t("artworks.form.options.explicitMark")),1)])],2),A(E).isExplicit?(z(),be("div",{key:0,onClick:G[7]||(G[7]=Xe(B=>A(E).isGore=!A(E).isGore,["prevent"])),class:ce(["toggler-box",{"toggler-box__active":A(E).isGore}])},[N("div",ig,[A(E).isGore?(z(),Ie(oe,{key:1,name:"i-ic-outline-check",class:"text-green-500"})):(z(),Ie(oe,{key:0,name:"i-fluent-checkbox-unchecked-20-regular"}))]),N("div",sg,[ng,N("span",null,q(V.$t("artworks.form.options.goreMark")),1)])],2)):Pe("",!0)]),N("div",{class:ce(["grid grid-cols-1 gap-2 input-block",A(m)?"md:grid-cols-3":"md:grid-cols-2"])},[A(m)?Pe("",!0):(z(),be("div",{key:0,onClick:G[8]||(G[8]=Xe(B=>A(E).isOriginalCharacter=!A(E).isOriginalCharacter,["prevent"])),class:ce(["toggler-box",{"toggler-box__active":A(E).isOriginalCharacter}])},[N("div",rg,[A(E).isOriginalCharacter?(z(),Ie(oe,{key:1,name:"i-ic-outline-check",class:"text-green-500"})):(z(),Ie(oe,{key:0,name:"i-fluent-checkbox-unchecked-20-regular"}))]),N("div",ag,[N("b",null,q(V.$t("artworks.originalCharacter")),1),N("span",null,q(V.$t("artworks.form.options.originalCharacterMark")),1)])],2)),A(m)?Pe("",!0):(z(),be("div",{key:1,onClick:G[9]||(G[9]=Xe(B=>A(E).isAllowRedraw=!A(E).isAllowRedraw,["prevent"])),class:ce(["toggler-box",{"toggler-box__active":A(E).isAllowRedraw}])},[N("div",og,[A(E).isAllowRedraw?(z(),Ie(oe,{key:1,name:"i-ic-outline-check",class:"text-green-500"})):(z(),Ie(oe,{key:0,name:"i-fluent-checkbox-unchecked-20-regular"}))]),N("div",lg,[N("b",null,q(V.$t("artworks.add.form.allowRedraw")),1),N("span",null,q(V.$t("artworks.form.options.allowRedrawMark")),1)])],2)),A(m)?(z(),be("div",{key:2,onClick:G[10]||(G[10]=Xe(B=>A(E).isredrawInMyStyle=!A(E).isredrawInMyStyle,["prevent"])),class:ce(["toggler-box",{"toggler-box__active":A(E).isredrawInMyStyle}])},[N("div",cg,[A(E).isredrawInMyStyle?(z(),Ie(oe,{key:1,name:"i-ic-outline-check",class:"text-green-500"})):(z(),Ie(oe,{key:0,name:"i-fluent-checkbox-unchecked-20-regular"}))]),N("div",dg,[N("b",null,q(V.$t("artworks.add.form.redrawInMyStyle")),1),N("span",null,q(V.$t("artworks.form.options.allowRedrawMark")),1)])],2)):Pe("",!0)],2),N("div",ug,[N("button",{class:"mr-2 w-full light-button md:w-auto",type:"reset",onClick:G[11]||(G[11]=B=>g())},q(V.$t("reset")),1),N("button",{type:"submit",class:ce(["float-right w-full md:w-auto",{"pointer-events-none cursor-not-allowed":A(R)||A(C)},A(E).title&&A(v).length>0?"primary-button":"disabled-button"])},[N("div",fg,[A(R)?(z(),Ie(Ct,{key:0,class:"mr-2"})):Pe("",!0),Ze(" "+q(A(R)?V.$t("artworks.add.form.uploadingButton"):V.$t("artworks.add.form.post").toUpperCase()),1)])],2)])],32)])}}},pg=wr(hg,[["__scopeId","data-v-5ba19fa4"]]),gg={class:"mb-4 section-title"},mg={class:"alert-success"},Eg={class:"italic"},_g={class:"flex flex-row p-2 mb-2 text-white rounded-md button-color"},Ig={class:"flex flex-row justify-between md:justify-end"},vg={__name:"FeedForm",setup(e){const{oApiConfiguration:t,fetchOptions:i}=mr(),s=Eo(t,i()),{$router:n}=_r(),r=X(""),a=X(!1),o=X(!1),l=X(!1),d=async()=>{a.value=!0;const[c,u,m]=await s.postFeed({text:r.value});if(c){a.value=!1,o.value=!0;const g=u.id;setTimeout(()=>{n.push(`/feed/${g}`)},1e3)}else l.value=!0,a.value=!1;a.value=!1};return(c,u)=>(z(),be("div",null,[N("div",gg,q(c.$t("feeds.form.title")),1),re(N("div",mg,[Ze(q(c.$t("feeds.form.posted"))+" ",1),N("span",Eg,q(c.$t("feeds.form.successRedirect")),1)],512),[[de,A(o)]]),re(N("div",_g,[ne(Ct,{class:"mr-2"}),Ze(" "+q(c.$t("feeds.form.postingYourUpdate")),1)],512),[[de,A(a)]]),re(N("div",{class:"alert-danger"},q(c.$t("feeds.form.postFailure")),513),[[de,A(l)]]),ne(A(yr.exports.VueEditor),{modelValue:A(r),"onUpdate:modelValue":u[0]||(u[0]=m=>vr(r)?r.value=m:null),editorToolbar:A(Tr),class:ce(["mb-4"]),placeholder:c.$t("typeSomething")},null,8,["modelValue","editorToolbar","placeholder"]),N("div",Ig,[N("button",{class:"mr-2 w-full reset-form-button md:w-auto",type:"reset",onClick:u[1]||(u[1]=m=>r.value="")},"Reset"),N("button",{class:ce(["flex flex-row w-full md:w-auto",[A(r)!==""?"primary-button":"disabled-button"]]),onClick:u[2]||(u[2]=Xe(m=>A(r)!==""?d():null,["prevent"]))},[re(ne(Ct,{class:"mr-2"},null,512),[[de,A(a)]]),N("span",null,q(A(a)?c.$t("posting"):c.$t("post").toUpperCase()),1)],2)])]))}};const Tg={class:"mb-20"},yg={class:"categories"},wg={class:"text-sm leading-6"},bg={class:"text-sm leading-6"},Dg={class:"forms"},Rg={__name:"index",setup(e){const{t}=Er(),i=X("artwork");return Xs({title:i.value==="artwork"?t("meta.title.artwork.post"):t("meta.title.feed.post")}),Ir(()=>i.value,()=>{Xs({title:i.value==="artwork"?t("meta.title.artwork.post"):t("meta.title.feed.post")})}),(s,n)=>(z(),Ie(ho,{"with-footer":!1,"hide-side":!1},{default:zi(()=>[N("div",Tg,[N("div",yg,[N("div",{class:ce(["category",[A(i)==="feed"?"button":"theme-color"]]),onClick:n[0]||(n[0]=r=>i.value="feed")},[re(ne(oe,{name:"i-ion-text-outline","text-size":"texl-xl",class:"mr-3 text-2xl"},null,512),[[de,A(i)!="feed"]]),re(ne(oe,{name:"i-ion-text-outline","text-size":"texl-xl",class:"mr-3 text-2xl text-white"},null,512),[[de,A(i)=="feed"]]),N("span",wg,q(s.$t("feed")),1)],2),N("div",{class:ce(["category",[A(i)==="artwork"?"button":"theme-color"]]),onClick:n[1]||(n[1]=r=>i.value="artwork")},[re(ne(oe,{name:"i-ion-images-outline","text-size":"texl-xl",class:"mr-3 text-2xl"},null,512),[[de,A(i)!="artwork"]]),re(ne(oe,{name:"i-ion-images-outline","text-size":"texl-xl",class:"mr-3 text-2xl text-white"},null,512),[[de,A(i)=="artwork"]]),N("span",bg,q(s.$t("artworks.artwork")),1)],2)]),N("div",Dg,[re(ne(vg,null,null,512),[[de,A(i)==="feed"]]),re(ne(pg,{class:"artwork"},null,512),[[de,A(i)==="artwork"]])])])]),_:1}))}},Ng=wr(Rg,[["__scopeId","data-v-f33b8220"]]);export{Ng as default};
