import{j as Y,k as Z,O as W,E as D,r as a,m as H,o as N,p as V,q as t,t as l,b,v as _,u as e,K as n,e as u,L as w,s as $,x as z,H as ie,M as ee,N as te,C as ue,l as ce,f as Q,c as X,w as de,F as pe,T as ve,U as me}from"./entry.15cb71bb.js";import{L as ge}from"./Layout.69b2e7d1.js";import{u as fe}from"./client-only.407c3fea.js";import{W as we}from"./WorkList.d666493b.js";import{_ as oe}from"./LoadingEmptyErrorMessage.31b597d2.js";import{M as he}from"./ModalView.8a38a44a.js";import{_ as F}from"./_plugin-vue_export-helper.a1a6add7.js";import{U as ye}from"./UserList.ab91f14f.js";import{u as be}from"./useUser.a738e6b7.js";import"./Spinner.cb390d69.js";import"./useReport.6a600d64.js";import"./user-counters-api.e38b184e.js";import"./useSetting.56adc0e9.js";import"./useFeed.a800ee91.js";const se=k=>(ee("data-v-3e97e503"),k=k(),te(),k),ke={class:"navigations"},_e={class:"title"},$e={class:"buttons"},xe={class:"filter-buttons"},Ce={class:"filter-buttons"},Pe={key:0,class:"filter-buttons"},qe={class:"navigations"},Me=se(()=>t("div",null,null,-1)),Ae={class:"buttons"},Ne={class:"filter-buttons"},Ue={class:"filter-buttons"},Ee={class:"inline-block w-full md:w-52 group"},Ie={class:"flex items-center py-2 px-3 w-full rounded-md outline-none md:w-52 theme-color hover:button focus:outline-none"},Le={class:"flex-1 pr-1"},Ve=se(()=>t("span",null,[t("svg",{class:"w-4 h-4 transition duration-150 ease-in-out transform fill-current group-hover:-rotate-180",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[t("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1)),Se={class:"absolute z-10 mt-1 w-full text-center rounded-md transition duration-150 ease-in-out transform origin-top scale-0 md:w-52 theme-color group-hover:scale-100"},Te={class:"mt-4"},Be={key:0,class:"art-list-view-paging-control"},Re={id:"popular-modal",class:"modal work-view"},Fe={__name:"Artworks",emits:["countArtworks"],setup(k,{emit:U}){const{oApiConfiguration:S,fetchOptions:B}=Y(),q=fe(S,B()),g=Z(),f=W(),{q:E}=f.query;D(()=>f.query.q,(s,o)=>{s!==o&&(I.value=s,x())});const I=a(E);H(()=>{setTimeout(()=>{x()},1e3)});const d=a("recent"),M=async s=>{d.value=s,await x()},m=a(void 0),p=async s=>{m.value=s,c.value.page=0,await x()},v=a("daily"),h=async s=>{v.value=s,c.value.page=0,await x()},y=a(!1),O=async()=>{y.value=!y.value,c.value.page=0,await x()},L=a([]),P=a({pagination:{enablePrev:!0,enableNext:!0}}),x=async()=>{const s=await C(),o=s.works,r=s.pagination;!o.length&&r.record_total===0?ne():(L.value=o,r.next_previous.next_page===null?P.value.pagination.enableNext=!1:P.value.pagination.enableNext=!0,r.next_previous.prev_page===null?P.value.pagination.enablePrev=!1:P.value.pagination.enablePrev=!0,U("countArtworks",r.record_total))},i=a(!0),c=a({perPage:18,page:a(0)}),C=async()=>{var r;c.value.page===0&&(i.value=!0,T.value=!1);const[s,o]=await q.getSearch({recentMode:d.value==="recent",range:v.value,rangeMode:A.value,explicitMode:m.value,keyword:(r=I.value)!=null?r:"",followingOnly:y.value,pagination:{perPage:c.value.perPage,page:c.value.page}});if(o)ae();else return le(),s},K=async s=>{s==="prev"?c.value.page-=1:c.value.page+=1,await x()},T=a(!1),ne=()=>{T.value=!0,U("countArtworks",0)},R=a(!1),ae=()=>{i.value=!1,R.value=!0},le=()=>{i.value=!1,T.value=!1,R.value=!1},G=a(null),re=(s,o=!1)=>{G.value.view(s,o),ie().openModal("popular-modal")},A=a("views"),J=a(""),j=async(s,o)=>{A.value=s,J.value=o,await x()};return(s,o)=>(N(),V("div",null,[t("div",ke,[t("div",_e,l(s.$t("artworks.artworks")),1),t("div",$e,[b(t("div",xe,[t("button",{class:n(["px-3 rounded-md button-item",e(y)?"button":"theme-color"]),onClick:o[0]||(o[0]=r=>O())},[b(u(w,{name:"i-fluent-people-checkmark-24-regular",class:"text-white"},null,512),[[_,e(y)]]),b(u(w,{name:"i-fluent-people-checkmark-24-regular"},null,512),[[_,!e(y)]]),$(" "+l(s.$t("followings.followings")),1)],2)],512),[[_,e(g).loggedIn]]),t("div",Ce,[t("p",{class:n(["rounded-l-md button-item",[e(d)==="recent"?"button":"theme-color"]]),onClick:o[1]||(o[1]=r=>M("recent"))},l(s.$t("artworks.newest")),3),t("p",{class:n(["rounded-r-md button-item",[e(d)==="popularity"?"button":"theme-color"]]),onClick:o[2]||(o[2]=r=>M("popularity"))},[u(w,{name:"i-icon-park-outline-oval-love-two",class:n([{"text-white":e(d)==="popularity"}])},null,8,["class"]),$(" "+l(s.$t("artworks.mostPopular")),1)],2)]),e(g).loggedIn&&e(g).user.user_settings.show_explicit?(N(),V("div",Pe,[t("p",{class:n(["rounded-l-md button-item",[e(m)===void 0?"button":"theme-color"]]),onClick:o[3]||(o[3]=r=>p(void 0))},l(s.$t("default")),3),t("p",{class:n(["button-item",[e(m)==="safe"?"button":"theme-color"]]),onClick:o[4]||(o[4]=r=>p("safe"))},l(s.$t("safe")),3),t("p",{class:n(["rounded-r-md button-item",[e(m)==="explicit"?"button":"theme-color"]]),onClick:o[5]||(o[5]=r=>p("explicit"))},[u(w,{name:"i-material-symbols-explicit-outline",class:n({"text-white":e(m)==="explicit"})},null,8,["class"]),$(" "+l(s.$t("explicit")),1)],2)])):z("",!0)])]),t("div",qe,[Me,t("div",Ae,[b(t("div",Ne,[t("p",{class:n(["rounded-l-md button-item",[e(v)==="daily"?"button":"theme-color"]]),onClick:o[6]||(o[6]=r=>h("daily"))},l(s.$t("daily")),3),t("p",{class:n(["button-item",[e(v)==="weekly"?"button":"theme-color"]]),onClick:o[7]||(o[7]=r=>h("weekly"))},l(s.$t("weekly")),3),t("p",{class:n(["button-item",[e(v)==="monthly"?"button":"theme-color"]]),onClick:o[8]||(o[8]=r=>h("monthly"))},l(s.$t("monthly")),3),t("p",{class:n(["rounded-r-md button-item",[e(v)==="all"?"button":"theme-color"]]),onClick:o[9]||(o[9]=r=>h("all"))},l(s.$t("allTime")),3)],512),[[_,e(d)==="popularity"]]),b(t("div",Ue,[t("div",Ee,[t("button",Ie,[t("span",Le,l(e(A)==="views"?s.$t("mostViewed"):e(J)),1),Ve]),t("ul",Se,[t("li",{class:n(["flex flex-row justify-between py-2 px-3 cursor-pointer hover:button icon-hover-parent",{button:e(A)==="views"}]),onClick:o[10]||(o[10]=r=>j("views",s.$t("mostViewed")))},[u(w,{name:"i-mi-eye",class:n({"text-white":e(A)==="views"})},null,8,["class"]),$(" "+l(s.$t("mostViewed")),1)],2),t("li",{class:n(["flex flex-row justify-between py-2 px-3 cursor-pointer hover:button icon-hover-parent",{button:e(A)==="likes"}]),onClick:o[11]||(o[11]=r=>j("likes",s.$t("mostLiked")))},[u(w,{name:"i-ri-heart-3-line",class:n({"text-white":e(A)==="likes"})},null,8,["class"]),$(" "+l(s.$t("mostLiked")),1)],2),t("li",{class:n(["flex flex-row justify-between py-2 px-3 rounded-b-md cursor-pointer hover:button icon-hover-parent",{button:e(A)==="comments"}]),onClick:o[12]||(o[12]=r=>j("comments",s.$t("mostCommented")))},[u(w,{name:"i-mdi-comment-multiple-outline",class:n({"text-white":e(A)==="comments"})},null,8,["class"]),$(" "+l(s.$t("mostCommented")),1)],2)])])],512),[[_,e(d)==="popularity"]])])]),u(oe,{loading:e(i),empty:e(T),error:e(R),fetch:x},null,8,["loading","empty","error"]),b(t("div",Te,[b(u(we,{"section-class":"work-grid",works:e(L),view:re},null,8,["works"]),[[_,!e(T)]])],512),[[_,!e(i)]]),!e(i)&&!e(T)&&!e(R)?(N(),V("div",Be,[t("button",{class:n(["w-full md:w-auto",[e(P).pagination.enablePrev?"primary-button":"disabled-button"]]),onClick:o[13]||(o[13]=r=>e(P).pagination.enablePrev?K("prev"):null)},[u(w,{name:"i-ion-chevron-back-outline"}),$(" "+l(s.$t("pagination.previous")),1)],2),t("button",{class:n(["w-full md:w-auto",e(P).pagination.enableNext?"primary-button":"disabled-button"]),onClick:o[14]||(o[14]=r=>e(P).pagination.enableNext?K("next"):null)},[$(l(s.$t("pagination.next"))+" ",1),u(w,{name:"i-ion-chevron-forward-outline",class:"ml-2",style:{"margin-right":"0 !important"}})],2)])):z("",!0),t("div",Re,[b(u(he,{ref_key:"popularModalViewRef",ref:G,section:"popular"},null,512),[[_,!e(i)]])])]))}},Oe=F(Fe,[["__scopeId","data-v-3e97e503"]]);const je=k=>(ee("data-v-d083e571"),k=k(),te(),k),ze={class:"navigations"},We={class:"title"},De=je(()=>t("div",{class:"buttons"},null,-1)),He={key:0,class:"art-list-view-paging-control"},Ke={__name:"Users",emits:["countUsers"],setup(k,{emit:U}){const{oApiConfiguration:S,fetchOptions:B}=Y(),q=be(S,B()),g=W(),{q:f}=g.query;D(()=>g.query.q,(i,c)=>{i!==c&&(E.value=i,M())});const E=a(f);H(()=>{setTimeout(()=>{M()},1e3)});const I=a([]),d=a({pagination:{enablePrev:!0,enableNext:!0}}),M=async()=>{const i=await v(),c=i.users,C=i.pagination;!c.length&&C.record_total===0?O():(I.value=c,C.next_previous.next_page===null?d.value.pagination.enableNext=!1:d.value.pagination.enableNext=!0,C.next_previous.prev_page===null?d.value.pagination.enablePrev=!1:d.value.pagination.enablePrev=!0,U("countUsers",C.record_total))},m=a(!0),p=a({perPage:16,page:a(0)}),v=async()=>{var C;p.value.page===0&&(m.value=!0,y.value=!1);const[i,c]=await q.searchUsers({keyword:(C=E.value)!=null?C:"",pagination:{page:p.value.page,perPage:p.value.perPage}});if(c)P();else return x(),i},h=async i=>{i==="prev"?p.value.page-=1:p.value.page+=1,await M()},y=a(!1),O=()=>{y.value=!0,U("countUsers",0)},L=a(!1),P=()=>{m.value=!1,L.value=!0},x=()=>{m.value=!1,y.value=!1,L.value=!1};return(i,c)=>(N(),V("div",null,[t("div",ze,[t("div",We,l(i.$t("users.users")),1),De]),u(oe,{loading:e(m),empty:e(y),error:e(L),fetch:M},null,8,["loading","empty","error"]),b(t("div",null,[b(u(ye,{users:e(I)},null,8,["users"]),[[_,!e(y)]])],512),[[_,!e(m)]]),!e(m)&&!e(y)&&!e(L)?(N(),V("div",He,[t("button",{class:n(["w-full md:w-auto",[e(d).pagination.enablePrev?"primary-button":"disabled-button"]]),onClick:c[0]||(c[0]=C=>e(d).pagination.enablePrev?h("prev"):null)},[u(w,{name:"i-ion-chevron-back-outline"}),$(" "+l(i.$t("pagination.previous")),1)],2),t("button",{class:n(["w-full md:w-auto",e(d).pagination.enableNext?"primary-button":"disabled-button"]),onClick:c[1]||(c[1]=C=>e(d).pagination.enableNext?h("next"):null)},[$(l(i.$t("pagination.next"))+" ",1),u(w,{name:"i-ion-chevron-forward-outline",class:"ml-2",style:{"margin-right":"0 !important"}})],2)])):z("",!0)]))}},Ge=F(Ke,[["__scopeId","data-v-d083e571"]]),Je={},Qe={class:"p-4 w-full text-center rounded-md theme-color-secondary"};function Xe(k,U){return N(),V("div",Qe,l(k.$t("search.loginMessage")),1)}const Ye=F(Je,[["render",Xe]]);const Ze={key:1,id:"lists"},et={class:"search"},tt=["placeholder"],ot={class:"flex flex-row mb-6 w-full"},st={__name:"index",setup(k){const U=Z(),{t:S}=ue(),B=ce(),q=W();Q({title:S("search.search")+(q.query.q?` "${q.query.q}"`:"")});const g=a("");H(()=>{g.value=q.query.q});const f=a("artworks"),E=a(0),I=p=>{E.value=p},d=a(0),M=p=>{d.value=p};D(()=>q.query,({q:p})=>{g.value=p,Q({title:S("search.search")+(g.value?` "${g.value}"`:q.query.q)})});const m=()=>{B.push({path:"/search",query:{q:g.value},replace:!0,force:!0})};return(p,v)=>(N(),X(ge,{"with-footer":!0,"hide-side":!0,"no-right-side":!0},{default:de(()=>[e(U).loggedIn?(N(),V("div",Ze,[t("span",et,[b(t("input",{"onUpdate:modelValue":v[0]||(v[0]=h=>ve(g)?g.value=h:null),type:"text",name:"search",placeholder:p.$t("search.search"),onKeyup:v[1]||(v[1]=me(h=>m(),["enter"]))},null,40,tt),[[pe,e(g)]]),t("span",{class:"search-button",onClick:v[2]||(v[2]=h=>m())},[u(w,{name:"i-ion-search"})])]),t("div",ot,[t("div",{class:n(["rounded-lg profile-category-button left-menu-link theme-color-secondary",{"button-color text-white":e(f)==="artworks"}]),onClick:v[3]||(v[3]=h=>f.value="artworks")},[u(w,{name:"i-majesticons-image",class:n(["mr-2",{"text-white":e(f)==="artworks"}])},null,8,["class"]),$(" "+l(p.$t("artworks.artworks"))+" ",1),t("span",{class:n(["px-1 ml-2 rounded",e(f)==="artworks"?"theme-color":"bg-gray-600 text-white"])},l(e(E)),3)],2),t("div",{class:n(["rounded-lg profile-category-button left-menu-link theme-color-secondary",{"button-color text-white":e(f)==="users"}]),onClick:v[4]||(v[4]=h=>f.value="users")},[u(w,{name:"i-fluent-person-32-regular",class:n(["mr-2",{"text-white":e(f)==="users"}])},null,8,["class"]),$(" "+l(p.$t("users.users"))+" ",1),t("span",{class:n(["px-1 ml-2 rounded",e(f)==="users"?"theme-color":"bg-gray-600 text-white"])},l(e(d)),3)],2)]),b(t("div",null,[u(Oe,{onCountArtworks:I})],512),[[_,e(f)==="artworks"]]),b(t("div",null,[u(Ge,{onCountUsers:M})],512),[[_,e(f)==="users"]])])):(N(),X(Ye,{key:0}))]),_:1}))}},ht=F(st,[["__scopeId","data-v-97821dc4"]]);export{ht as default};
