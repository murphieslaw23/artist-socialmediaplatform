import{j as z,k as H,Y as K,r as s,E as O,J as Y,c as G,w as Q,o as k,q as a,t as l,K as r,u as o,p as E,e as c,L as y,s as x,x as S,b as g,v as _,av as U,H as M}from"./entry.ae51314b.js";import{u as X}from"./ProBadge.de1f3ff6.js";import{L as Z}from"./Layout.288d44a5.js";import{W as J}from"./WorkList.3a9e5f28.js";import{M as ee}from"./ModalView.7fc791b0.js";import{_ as te}from"./LoadingEmptyErrorMessage.b2b53b6c.js";import{_ as oe}from"./TagFilterSelection.73499a26.js";import{_ as ae}from"./_plugin-vue_export-helper.a1a6add7.js";import"./useReport.9e4f9eb9.js";import"./Spinner.96f551a8.js";import"./user-counters-api.7503204d.js";import"./useSetting.f194dec2.js";import"./useFeed.607ee023.js";const se={id:"lists"},ne={class:"navigations"},ie={class:"title"},le={class:"buttons"},re={class:"filter-buttons"},ce={key:0,class:"filter-buttons"},ue={class:"mt-4"},pe={key:0,class:"art-list-view-paging-control"},de={id:"recent-modal",class:"modal work-view"},fe={__name:"index",props:{browseMode:{type:Boolean,default:!1}},setup(ve){const{oApiConfiguration:V,fetchOptions:T}=z(),F=X(V,T()),$=H();K(()=>{d()});const u=s(void 0),w=async e=>{u.value=e,f.page=0,await d()},C=s(null),L=()=>{C.value.init(U(b.value)),M().openModal("tag-filter-selection-modal")},P=s(""),b=s(),h=s(0),R=async(e,t)=>{b.value=e,P.value=t,h.value=t!==""?t.split(",").length:0,f.page=0,M().closeModal("tag-filter-selection-modal"),await d()};O(async()=>b.value,e=>{d()});const A=s([]),p=s({pagination:{enablePrev:!0,enableNext:!0}}),d=async()=>{const e=await W(),t=e.works,i=e.pagination;!t.length&&i.record_total===0?D():(A.value=t,i.next_previous.next_page===null?p.value.pagination.enableNext=!1:p.value.pagination.enableNext=!0,i.next_previous.prev_page===null?p.value.pagination.enablePrev=!1:p.value.pagination.enablePrev=!0)},n=s(!0),f=Y({perPage:30,page:s(0)}),W=async()=>{n.value=!0,v.value=!1;const[e,t]=await F.getLatest({pagination:{perPage:f.perPage,page:f.page},explicitMode:u.value,tags:P.value});if(t)I();else return j(),e;n.value=!1},N=async e=>{e==="prev"?f.page-=1:f.page+=1,await d(),window.scrollTo(0,0)},v=s(!1),D=()=>{v.value=!0},m=s(!1),I=()=>{n.value=!1,m.value=!0,hideButton()},j=()=>{n.value=!1,v.value=!1,m.value=!1},B=s(null),q=(e,t=!1)=>{B.value.view(e,t),M().openModal("recent-modal")};return(e,t)=>(k(),G(Z,{"with-footer":!0,"hide-side":!0,"no-right-side":!0,fullscreen:!0},{default:Q(()=>[a("div",se,[a("div",ne,[a("div",ie,l(e.$t("artworks.latestArtworks")),1),a("div",le,[a("div",re,[a("button",{class:r(["px-3 rounded-md button-item",o(h)?"button":"theme-color"]),onClick:L},l(o(h))+" "+l(e.$t("tagsApplied")),3)]),o($).loggedIn&&o($).user.user_settings.show_explicit?(k(),E("div",ce,[a("p",{class:r(["rounded-l-md button-item",[o(u)===void 0?"button":"theme-color"]]),onClick:t[0]||(t[0]=i=>w(void 0))},l(e.$t("default")),3),a("p",{class:r(["button-item",[o(u)==="safe"?"button":"theme-color"]]),onClick:t[1]||(t[1]=i=>w("safe"))},l(e.$t("safe")),3),a("p",{class:r(["rounded-r-md button-item",[o(u)==="explicit"?"button":"theme-color"]]),onClick:t[2]||(t[2]=i=>w("explicit"))},[c(y,{name:"i-material-symbols-explicit-outline",class:r({"text-white":o(u)==="explicit"})},null,8,["class"]),x(" "+l(e.$t("explicit")),1)],2)])):S("",!0)])]),c(te,{loading:o(n),empty:o(v),error:o(m),fetch:d},null,8,["loading","empty","error"]),g(a("div",ue,[g(c(J,{"section-class":"work-grid",works:o(A),view:q},null,8,["works"]),[[_,!o(v)]])],512),[[_,!o(n)]]),!o(n)&&!o(v)&&!o(m)?(k(),E("div",pe,[a("button",{class:r([o(p).pagination.enablePrev?"primary-button":"disabled-button"]),onClick:t[3]||(t[3]=i=>N("prev"))},[c(y,{name:"i-ion-chevron-back-outline"}),x(" "+l(e.$t("pagination.previous")),1)],2),a("button",{class:r([o(p).pagination.enableNext?"primary-button":"disabled-button"]),onClick:t[4]||(t[4]=i=>N("next"))},[x(l(e.$t("pagination.next"))+" ",1),c(y,{name:"i-ion-chevron-forward-outline",class:"md:ml-2",style:{"margin-right":"0 !important"}})],2)])):S("",!0),a("div",de,[g(c(ee,{ref_key:"recentModalViewRef",ref:B,section:"recent"},null,512),[[_,!o(n)]])]),g(c(oe,{id:"tag-filter-selection-modal",ref_key:"tagFilterSelectionModalRef",ref:C,class:"modal",onApply:R},null,512),[[_,!o(n)]])])]),_:1}))}},Ae=ae(fe,[["__scopeId","data-v-93666e8d"]]);export{Ae as default};
