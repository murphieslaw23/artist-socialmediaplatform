import{B as ft,f as z,h as W,R as j,a0 as Zt,a1 as ea,r as b,u as O,C as Ue,a2 as ta,l as Se,S as aa,O as sa,D as Ve,T as wt,o as y,m as x,p as r,e as k,w as K,q as B,t as g,b as I,v as R,s as S,F as pe,J as D,U as he,V as ve,x as Pe,i as qe,k as oa,c as ie,j as _e,I as Je,K as V,E as Re,G as X,L as gt,M as yt,H as bt,a3 as la,a as na,a4 as rt,a5 as ra,a6 as ia,a7 as it}from"./entry.b21379e3.js";import{u as kt}from"./useArtwork.99af92ba.js";import{_ as Me,u as xt}from"./LoadingEmptyErrorMessage.00d50695.js";import{_ as fe}from"./_plugin-vue_export-helper.a1a6add7.js";import{S as Ye}from"./Spinner.02b037b7.js";import{U as Ee}from"./user-counters-api.69bfd1b8.js";import{u as ca}from"./useFeed.298bedf0.js";const ce=function(o){return{addWorkToAlbum:async(e,t={})=>{const s="/albums/add-work",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"POST",...l,...t},u={},m={};u["Content-Type"]="application/json";const h=new URLSearchParams(a.search);for(const w in m)h.set(w,m[w]);for(const w in t.params)h.set(w,t.params[w]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};n.headers={...u,...d,...t.headers};const f=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=f?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},createAlbum:async(e,t={})=>{const s="/albums/create",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"POST",...l,...t},u={},m={};u["Content-Type"]="application/json";const h=new URLSearchParams(a.search);for(const w in m)h.set(w,m[w]);for(const w in t.params)h.set(w,t.params[w]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};n.headers={...u,...d,...t.headers};const f=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=f?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},deleteAlbum:async(e,t={})=>{if(e==null)throw new j("id","Required parameter id was null or undefined when calling deleteAlbum.");const s="/albums/{id}".replace("{id}",encodeURIComponent(String(e))),a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"DELETE",...l,...t},u={},m={},h=new URLSearchParams(a.search);for(const f in m)h.set(f,m[f]);for(const f in t.params)h.set(f,t.params[f]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};return n.headers={...u,...d,...t.headers},{url:a.pathname+a.search+a.hash,options:n}},getAlbumById:async(e,t={})=>{if(e==null)throw new j("id","Required parameter id was null or undefined when calling getAlbumById.");const s="/albums/{id}".replace("{id}",encodeURIComponent(String(e))),a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"GET",...l,...t},u={},m={},h=new URLSearchParams(a.search);for(const f in m)h.set(f,m[f]);for(const f in t.params)h.set(f,t.params[f]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};return n.headers={...u,...d,...t.headers},{url:a.pathname+a.search+a.hash,options:n}},getAlbumItems:async(e,t,s,a={})=>{if(e==null)throw new j("id","Required parameter id was null or undefined when calling getAlbumItems.");if(t==null)throw new j("perPage","Required parameter perPage was null or undefined when calling getAlbumItems.");if(s==null)throw new j("page","Required parameter page was null or undefined when calling getAlbumItems.");const l="/albums/list/{id}".replace("{id}",encodeURIComponent(String(e))),n=new URL(l,"https://example.com");let u;o&&(u=o.baseOptions);const m={method:"GET",...u,...a},h={},d={};t!==void 0&&(d.per_page=t),s!==void 0&&(d.page=s);const f=new URLSearchParams(n.search);for(const i in d)f.set(i,d[i]);for(const i in a.params)f.set(i,a.params[i]);n.search=new URLSearchParams(f).toString();let w=u&&u.headers?u.headers:{};return m.headers={...h,...w,...a.headers},{url:n.pathname+n.search+n.hash,options:m}},getCurrentAlbumSaveInfo:async(e,t,s={})=>{if(e==null)throw new j("type","Required parameter type was null or undefined when calling getCurrentAlbumSaveInfo.");if(t==null)throw new j("workId","Required parameter workId was null or undefined when calling getCurrentAlbumSaveInfo.");const a="/albums/current/{type}/{work_id}".replace("{type}",encodeURIComponent(String(e))).replace("{work_id}",encodeURIComponent(String(t))),l=new URL(a,"https://example.com");let n;o&&(n=o.baseOptions);const u={method:"GET",...n,...s},m={},h={},d=new URLSearchParams(l.search);for(const w in h)d.set(w,h[w]);for(const w in s.params)d.set(w,s.params[w]);l.search=new URLSearchParams(d).toString();let f=n&&n.headers?n.headers:{};return u.headers={...m,...f,...s.headers},{url:l.pathname+l.search+l.hash,options:u}},listUserAlbums:async(e,t,s,a,l={})=>{if(e==null)throw new j("userId","Required parameter userId was null or undefined when calling listUserAlbums.");if(t==null)throw new j("perPage","Required parameter perPage was null or undefined when calling listUserAlbums.");if(s==null)throw new j("page","Required parameter page was null or undefined when calling listUserAlbums.");if(a==null)throw new j("type","Required parameter type was null or undefined when calling listUserAlbums.");const n="/albums/user/{userId}".replace("{userId}",encodeURIComponent(String(e))),u=new URL(n,"https://example.com");let m;o&&(m=o.baseOptions);const h={method:"GET",...m,...l},d={},f={};t!==void 0&&(f.per_page=t),s!==void 0&&(f.page=s),a!==void 0&&(f.type=a);const w=new URLSearchParams(u.search);for(const c in f)w.set(c,f[c]);for(const c in l.params)w.set(c,l.params[c]);u.search=new URLSearchParams(w).toString();let i=m&&m.headers?m.headers:{};return h.headers={...d,...i,...l.headers},{url:u.pathname+u.search+u.hash,options:h}},removeWorkFromAlbum:async(e,t={})=>{const s="/albums/work/remove",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"DELETE",...l,...t},u={},m={};u["Content-Type"]="application/json";const h=new URLSearchParams(a.search);for(const w in m)h.set(w,m[w]);for(const w in t.params)h.set(w,t.params[w]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};n.headers={...u,...d,...t.headers};const f=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=f?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},updateAlbum:async(e,t={})=>{const s="/albums",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"PATCH",...l,...t},u={},m={};u["Content-Type"]="application/json";const h=new URLSearchParams(a.search);for(const w in m)h.set(w,m[w]);for(const w in t.params)h.set(w,t.params[w]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};n.headers={...u,...d,...t.headers};const f=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=f?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}}}},ue=function(o){return{async addWorkToAlbum(e,t){const s=await ce(o).addWorkToAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async createAlbum(e,t){const s=await ce(o).createAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async deleteAlbum(e,t){const s=await ce(o).deleteAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async getAlbumById(e,t){const s=await ce(o).getAlbumById(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async getAlbumItems(e,t,s,a){const l=await ce(o).getAlbumItems(e,t,s,a);return(n=z,u=W)=>{const m={...l.options,url:u+l.url};return n.request(m)}},async getCurrentAlbumSaveInfo(e,t,s){const a=await ce(o).getCurrentAlbumSaveInfo(e,t,s);return(l=z,n=W)=>{const u={...a.options,url:n+a.url};return l.request(u)}},async listUserAlbums(e,t,s,a,l){const n=await ce(o).listUserAlbums(e,t,s,a,l);return(u=z,m=W)=>{const h={...n.options,url:m+n.url};return u.request(h)}},async removeWorkFromAlbum(e,t){const s=await ce(o).removeWorkFromAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async updateAlbum(e,t){const s=await ce(o).updateAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}}}};class de extends ft{async addWorkToAlbum(e,t){return ue(this.configuration).addWorkToAlbum(e,t).then(s=>s(this.axios,this.basePath))}async createAlbum(e,t){return ue(this.configuration).createAlbum(e,t).then(s=>s(this.axios,this.basePath))}async deleteAlbum(e,t){return ue(this.configuration).deleteAlbum(e,t).then(s=>s(this.axios,this.basePath))}async getAlbumById(e,t){return ue(this.configuration).getAlbumById(e,t).then(s=>s(this.axios,this.basePath))}async getAlbumItems(e,t,s,a){return ue(this.configuration).getAlbumItems(e,t,s,a).then(l=>l(this.axios,this.basePath))}async getCurrentAlbumSaveInfo(e,t,s){return ue(this.configuration).getCurrentAlbumSaveInfo(e,t,s).then(a=>a(this.axios,this.basePath))}async listUserAlbums(e,t,s,a,l){return ue(this.configuration).listUserAlbums(e,t,s,a,l).then(n=>n(this.axios,this.basePath))}async removeWorkFromAlbum(e,t){return ue(this.configuration).removeWorkFromAlbum(e,t).then(s=>s(this.axios,this.basePath))}async updateAlbum(e,t){return ue(this.configuration).updateAlbum(e,t).then(s=>s(this.axios,this.basePath))}}const ne=function(o){return{addItemForLater:async(e,t,s={})=>{if(e==null)throw new j("type","Required parameter type was null or undefined when calling addItemForLater.");const a="/collections/later",l=new URL(a,"https://example.com");let n;o&&(n=o.baseOptions);const u={method:"POST",...n,...s},m={},h={};e!==void 0&&(h.type=e),m["Content-Type"]="application/json";const d=new URLSearchParams(l.search);for(const i in h)d.set(i,h[i]);for(const i in s.params)d.set(i,s.params[i]);l.search=new URLSearchParams(d).toString();let f=n&&n.headers?n.headers:{};u.headers={...m,...f,...s.headers};const w=typeof t!="string"||u.headers["Content-Type"]==="application/json";return u.data=w?JSON.stringify(t!==void 0?t:{}):t||"",{url:l.pathname+l.search+l.hash,options:u}},addItemToCollection:async(e,t,s,a={})=>{if(e==null)throw new j("type","Required parameter type was null or undefined when calling addItemToCollection.");if(t==null)throw new j("collectionId","Required parameter collectionId was null or undefined when calling addItemToCollection.");const l="/collections/{collectionId}/items".replace("{collectionId}",encodeURIComponent(String(t))),n=new URL(l,"https://example.com");let u;o&&(u=o.baseOptions);const m={method:"POST",...u,...a},h={},d={};e!==void 0&&(d.type=e),h["Content-Type"]="application/json";const f=new URLSearchParams(n.search);for(const c in d)f.set(c,d[c]);for(const c in a.params)f.set(c,a.params[c]);n.search=new URLSearchParams(f).toString();let w=u&&u.headers?u.headers:{};m.headers={...h,...w,...a.headers};const i=typeof s!="string"||m.headers["Content-Type"]==="application/json";return m.data=i?JSON.stringify(s!==void 0?s:{}):s||"",{url:n.pathname+n.search+n.hash,options:m}},collectionsIdDelete:async(e,t={})=>{if(e==null)throw new j("id","Required parameter id was null or undefined when calling collectionsIdDelete.");const s="/collections/{id}".replace("{id}",encodeURIComponent(String(e))),a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"DELETE",...l,...t},u={},m={},h=new URLSearchParams(a.search);for(const f in m)h.set(f,m[f]);for(const f in t.params)h.set(f,t.params[f]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};return n.headers={...u,...d,...t.headers},{url:a.pathname+a.search+a.hash,options:n}},create:async(e,t={})=>{const s="/collections/create",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"POST",...l,...t},u={},m={};u["Content-Type"]="application/json";const h=new URLSearchParams(a.search);for(const w in m)h.set(w,m[w]);for(const w in t.params)h.set(w,t.params[w]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};n.headers={...u,...d,...t.headers};const f=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=f?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},detail:async(e,t={})=>{if(e==null)throw new j("id","Required parameter id was null or undefined when calling detail.");const s="/collections/{id}".replace("{id}",encodeURIComponent(String(e))),a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"GET",...l,...t},u={},m={},h=new URLSearchParams(a.search);for(const f in m)h.set(f,m[f]);for(const f in t.params)h.set(f,t.params[f]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};return n.headers={...u,...d,...t.headers},{url:a.pathname+a.search+a.hash,options:n}},getCurrentSaveInfo:async(e,t,s={})=>{if(e==null)throw new j("type","Required parameter type was null or undefined when calling getCurrentSaveInfo.");if(t==null)throw new j("workId","Required parameter workId was null or undefined when calling getCurrentSaveInfo.");const a="/collections/current/{type}/{work_id}".replace("{type}",encodeURIComponent(String(e))).replace("{work_id}",encodeURIComponent(String(t))),l=new URL(a,"https://example.com");let n;o&&(n=o.baseOptions);const u={method:"GET",...n,...s},m={},h={},d=new URLSearchParams(l.search);for(const w in h)d.set(w,h[w]);for(const w in s.params)d.set(w,s.params[w]);l.search=new URLSearchParams(d).toString();let f=n&&n.headers?n.headers:{};return u.headers={...m,...f,...s.headers},{url:l.pathname+l.search+l.hash,options:u}},listCollectionItems:async(e,t,s,a={})=>{if(e==null)throw new j("id","Required parameter id was null or undefined when calling listCollectionItems.");if(t==null)throw new j("perPage","Required parameter perPage was null or undefined when calling listCollectionItems.");if(s==null)throw new j("page","Required parameter page was null or undefined when calling listCollectionItems.");const l="/collections/{id}/items".replace("{id}",encodeURIComponent(String(e))),n=new URL(l,"https://example.com");let u;o&&(u=o.baseOptions);const m={method:"GET",...u,...a},h={},d={};t!==void 0&&(d.per_page=t),s!==void 0&&(d.page=s);const f=new URLSearchParams(n.search);for(const i in d)f.set(i,d[i]);for(const i in a.params)f.set(i,a.params[i]);n.search=new URLSearchParams(f).toString();let w=u&&u.headers?u.headers:{};return m.headers={...h,...w,...a.headers},{url:n.pathname+n.search+n.hash,options:m}},listUserCollections:async(e,t,s,a,l,n={})=>{if(e==null)throw new j("userId","Required parameter userId was null or undefined when calling listUserCollections.");if(t==null)throw new j("type","Required parameter type was null or undefined when calling listUserCollections.");if(s==null)throw new j("page","Required parameter page was null or undefined when calling listUserCollections.");if(a==null)throw new j("perPage","Required parameter perPage was null or undefined when calling listUserCollections.");const u="/collections/user/{userId}".replace("{userId}",encodeURIComponent(String(e))),m=new URL(u,"https://example.com");let h;o&&(h=o.baseOptions);const d={method:"GET",...h,...n},f={},w={};t!==void 0&&(w.type=t),l!==void 0&&(w.name=l),s!==void 0&&(w.page=s),a!==void 0&&(w.per_page=a);const i=new URLSearchParams(m.search);for(const _ in w)i.set(_,w[_]);for(const _ in n.params)i.set(_,n.params[_]);m.search=new URLSearchParams(i).toString();let c=h&&h.headers?h.headers:{};return d.headers={...f,...c,...n.headers},{url:m.pathname+m.search+m.hash,options:d}},removeItemFromCollection:async(e,t,s,a={})=>{if(e==null)throw new j("type","Required parameter type was null or undefined when calling removeItemFromCollection.");if(t==null)throw new j("collectionId","Required parameter collectionId was null or undefined when calling removeItemFromCollection.");const l="/collections/{collectionId}/items".replace("{collectionId}",encodeURIComponent(String(t))),n=new URL(l,"https://example.com");let u;o&&(u=o.baseOptions);const m={method:"DELETE",...u,...a},h={},d={};e!==void 0&&(d.type=e),h["Content-Type"]="application/json";const f=new URLSearchParams(n.search);for(const c in d)f.set(c,d[c]);for(const c in a.params)f.set(c,a.params[c]);n.search=new URLSearchParams(f).toString();let w=u&&u.headers?u.headers:{};m.headers={...h,...w,...a.headers};const i=typeof s!="string"||m.headers["Content-Type"]==="application/json";return m.data=i?JSON.stringify(s!==void 0?s:{}):s||"",{url:n.pathname+n.search+n.hash,options:m}},updateCollection:async(e,t={})=>{const s="/collections",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"PATCH",...l,...t},u={},m={};u["Content-Type"]="application/json";const h=new URLSearchParams(a.search);for(const w in m)h.set(w,m[w]);for(const w in t.params)h.set(w,t.params[w]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};n.headers={...u,...d,...t.headers};const f=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=f?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}}}},re=function(o){return{async addItemForLater(e,t,s){const a=await ne(o).addItemForLater(e,t,s);return(l=z,n=W)=>{const u={...a.options,url:n+a.url};return l.request(u)}},async addItemToCollection(e,t,s,a){const l=await ne(o).addItemToCollection(e,t,s,a);return(n=z,u=W)=>{const m={...l.options,url:u+l.url};return n.request(m)}},async collectionsIdDelete(e,t){const s=await ne(o).collectionsIdDelete(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async create(e,t){const s=await ne(o).create(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async detail(e,t){const s=await ne(o).detail(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async getCurrentSaveInfo(e,t,s){const a=await ne(o).getCurrentSaveInfo(e,t,s);return(l=z,n=W)=>{const u={...a.options,url:n+a.url};return l.request(u)}},async listCollectionItems(e,t,s,a){const l=await ne(o).listCollectionItems(e,t,s,a);return(n=z,u=W)=>{const m={...l.options,url:u+l.url};return n.request(m)}},async listUserCollections(e,t,s,a,l,n){const u=await ne(o).listUserCollections(e,t,s,a,l,n);return(m=z,h=W)=>{const d={...u.options,url:h+u.url};return m.request(d)}},async removeItemFromCollection(e,t,s,a){const l=await ne(o).removeItemFromCollection(e,t,s,a);return(n=z,u=W)=>{const m={...l.options,url:u+l.url};return n.request(m)}},async updateCollection(e,t){const s=await ne(o).updateCollection(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}}}};class me extends ft{async addItemForLater(e,t,s){return re(this.configuration).addItemForLater(e,t,s).then(a=>a(this.axios,this.basePath))}async addItemToCollection(e,t,s,a){return re(this.configuration).addItemToCollection(e,t,s,a).then(l=>l(this.axios,this.basePath))}async collectionsIdDelete(e,t){return re(this.configuration).collectionsIdDelete(e,t).then(s=>s(this.axios,this.basePath))}async create(e,t){return re(this.configuration).create(e,t).then(s=>s(this.axios,this.basePath))}async detail(e,t){return re(this.configuration).detail(e,t).then(s=>s(this.axios,this.basePath))}async getCurrentSaveInfo(e,t,s){return re(this.configuration).getCurrentSaveInfo(e,t,s).then(a=>a(this.axios,this.basePath))}async listCollectionItems(e,t,s,a){return re(this.configuration).listCollectionItems(e,t,s,a).then(l=>l(this.axios,this.basePath))}async listUserCollections(e,t,s,a,l,n){return re(this.configuration).listUserCollections(e,t,s,a,l,n).then(u=>u(this.axios,this.basePath))}async removeItemFromCollection(e,t,s,a){return re(this.configuration).removeItemFromCollection(e,t,s,a).then(l=>l(this.axios,this.basePath))}async updateCollection(e,t){return re(this.configuration).updateCollection(e,t).then(s=>s(this.axios,this.basePath))}}function ct(){return{animate:t=>{const s=document.getElementById(t);s==null||s.classList.add("animate-bounce"),setInterval(()=>{s==null||s.classList.remove("animate-bounce")},2500)}}}function _t(){const o=(t,s,a)=>{s.value=!1,clearTimeout(t),s.value=!0,t=setTimeout(()=>{s.value=!1,e(a)},2e3)},e=t=>{const s=document.getElementById(t);s==null||s.classList.add("fade"),s==null||s.classList.add("fade-out")};return{splash:o,hide:e}}var ut;const Ce=typeof window<"u",ua=o=>typeof o=="string",Ge=()=>{};Ce&&((ut=window==null?void 0:window.navigator)==null?void 0:ut.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Ze(o){return typeof o=="function"?o():O(o)}function da(o){return o}function et(o){return Zt()?(ea(o),!0):!1}function ma(o){return typeof o=="function"?Ue(o):b(o)}function pa(o,e=!0){ta()?Se(o):e?o():aa(o)}function ha(o,e,t={}){const{immediate:s=!0}=t,a=b(!1);let l=null;function n(){l&&(clearTimeout(l),l=null)}function u(){a.value=!1,n()}function m(...h){n(),a.value=!0,l=setTimeout(()=>{a.value=!1,l=null,o(...h)},Ze(e))}return s&&(a.value=!0,Ce&&m()),et(u),{isPending:a,start:m,stop:u}}function va(o){var e;const t=Ze(o);return(e=t==null?void 0:t.$el)!=null?e:t}const Ct=Ce?window:void 0;Ce&&window.document;const fa=Ce?window.navigator:void 0;Ce&&window.location;function wa(...o){let e,t,s,a;if(ua(o[0])?([t,s,a]=o,e=Ct):[e,t,s,a]=o,!e)return Ge;let l=Ge;const n=Ve(()=>va(e),m=>{l(),m&&(m.addEventListener(t,s,a),l=()=>{m.removeEventListener(t,s,a),l=Ge})},{immediate:!0,flush:"post"}),u=()=>{n(),l()};return et(u),u}function $t(o,e=!1){const t=b(),s=()=>t.value=Boolean(o());return s(),pa(s,e),t}function ga(o,e={}){const{window:t=Ct}=e,s=$t(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let a;const l=b(!1),n=()=>{!a||("removeEventListener"in a?a.removeEventListener("change",u):a.removeListener(u))},u=()=>{!s.value||(n(),a=t.matchMedia(ma(o).value),l.value=a.matches,"addEventListener"in a?a.addEventListener("change",u):a.addListener(u))};return sa(u),et(()=>n()),l}function It(o={}){const{navigator:e=fa,read:t=!1,source:s,copiedDuring:a=1500}=o,l=["copy","cut"],n=$t(()=>e&&"clipboard"in e),u=b(""),m=b(!1),h=ha(()=>m.value=!1,a);function d(){e.clipboard.readText().then(w=>{u.value=w})}if(n.value&&t)for(const w of l)wa(w,d);async function f(w=Ze(s)){n.value&&w!=null&&(await e.clipboard.writeText(w),u.value=w,m.value=!0,h.start())}return{isSupported:n,text:u,copied:m,copy:f}}const Ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xe="__vueuse_ssr_handlers__";Ke[Xe]=Ke[Xe]||{};Ke[Xe];var dt;(function(o){o.UP="UP",o.RIGHT="RIGHT",o.DOWN="DOWN",o.LEFT="LEFT",o.NONE="NONE"})(dt||(dt={}));var ya=Object.defineProperty,mt=Object.getOwnPropertySymbols,ba=Object.prototype.hasOwnProperty,ka=Object.prototype.propertyIsEnumerable,pt=(o,e,t)=>e in o?ya(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,xa=(o,e)=>{for(var t in e||(e={}))ba.call(e,t)&&pt(o,t,e[t]);if(mt)for(var t of mt(e))ka.call(e,t)&&pt(o,t,e[t]);return o};const _a={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};xa({linear:da},_a);function Ca(){return{readMore:(e,t,s,a)=>{const l=document.getElementById(`${a}${t}`);l!==null&&(l.innerHTML=e);const n=document.getElementById(`${s}${t}`);n==null||n.remove()}}}const $a={class:"flex-col info"},Ia={key:0,class:"user-info"},Aa={class:"flex flex-row w-full"},Ra=["src"],Sa={class:"w-full name"},Pa={class:"flex flex-row justify-between"},La={class:"flex flex-col"},Oa={class:"mb-2 text-base font-bold"},Ua={key:1,class:"mb-4"},Va=["id","innerHTML"],Ea=["id"],qa={class:"mb-4"},Ma={key:2,class:"tags"},Ta={__name:"ModalViewInfo",props:{section:{type:String,default:""},isModal:{type:Boolean,default:!1},artworkDetail:{type:Object,default:()=>{}},previewMode:{type:Boolean,default:!1},isDesktop:{type:Boolean,default:!1}},setup(o){wt();const e=(t,s,a,l)=>{Ca().readMore(t,s,a,l)};return(t,s)=>{const a=Pe;return y(),x("section",$a,[o.artworkDetail.users?(y(),x("div",Ia,[r("div",Aa,[k(a,{to:"/profile/"+o.artworkDetail.users.username},{default:K(()=>[r("img",{class:"avatar",src:t.avatarCoverUrl(o.artworkDetail.users.avatar_bucket,o.artworkDetail.users.avatar_filename),onError:s[0]||(s[0]=(...l)=>t.imageLoadError&&t.imageLoadError(...l))},null,40,Ra)]),_:1},8,["to"]),r("div",Sa,[r("div",Pa,[r("div",La,[k(a,{to:"/profile/"+o.artworkDetail.users.username,class:"fullname"},{default:K(()=>[B(g(o.artworkDetail.users.name),1)]),_:1},8,["to"]),k(a,{to:"/profile/"+o.artworkDetail.users.username,class:"username"},{default:K(()=>[B(" @"+g(o.artworkDetail.users.username),1)]),_:1},8,["to"])]),I(r("div",{class:"p-1 h-7 font-bold rounded-md border-2 cursor-pointer hover:shadow-md border-color-primary",style:{"font-size":"10px"},onClick:s[1]||(s[1]=l=>t.closeModal(o.section+"-modal"))}," ESC ",512),[[R,o.isModal]])])])])])):S("",!0),r("div",Oa,g(o.artworkDetail.title),1),o.artworkDetail.description?(y(),x("div",Ua,[r("span",{id:"mview-"+o.isDesktop+"-description-"+o.artworkDetail.id,innerHTML:o.artworkDetail.description.length>300?`${o.artworkDetail.description.slice(0,300)}...`:o.artworkDetail.description},null,8,Va),o.artworkDetail.description.length>300?(y(),x("a",{key:0,id:"mview-"+o.isDesktop+"-read-more-"+o.artworkDetail.id,class:"href",onClick:s[2]||(s[2]=pe(l=>e(o.artworkDetail.description,o.artworkDetail.id,"mview-"+o.isDesktop+"-read-more-","mview-"+o.isDesktop+"-description-"),["prevent"]))},g(t.$t("readMore")),9,Ea)):S("",!0)])):S("",!0),r("div",qa,[r("span",{class:D(["italic text-color-secondary",{"font-bold text-red-400":o.previewMode}])},g(o.previewMode?t.$t("willBePublishedOn"):t.$t("publishedOn")),3),B(" "+g(t.formatDate(o.artworkDetail.scheduled_post)),1)]),o.artworkDetail.artwork_has_tags&&o.artworkDetail.artwork_has_tags.length?(y(),x("div",Ma,[(y(!0),x(he,null,ve(o.artworkDetail.artwork_has_tags,l=>(y(),x("span",{key:l.artwork_tags.id,class:"tag"},[k(a,{to:"/works/browse?tags="+l.artwork_tags.tag.replaceAll(" ","+")},{default:K(()=>[B(g(l.artwork_tags.tag),1)]),_:2},1032,["to"])]))),128))])):S("",!0)])}}},ht=fe(Ta,[["__scopeId","data-v-35c1316f"]]),Ba=["href","onClick"],Fa={class:"overflow-hidden relative text-center rounded-md"},ja={key:0},Da={key:1,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Na=["href"],Ha=["src"],Qa={class:"overflow-hidden relative text-center rounded-md"},za={key:0},Wa={key:1,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Ga=["href"],Ja=["src"],Ya={__name:"WorkList",props:{works:{type:Array,default:()=>[]},view:{type:Function,default:()=>{}},sectionClass:{type:String,default:""},isHref:{type:Boolean,default:!1},manageMode:{type:Boolean,default:!1},isMiniList:{type:Boolean,default:!1},currentWorkId:{type:Number,default:0}},emits:"feedManageList",setup(o,{emit:e}){const t=o,s=qe();Ve(()=>t.currentWorkId,d=>{l.value=d});const a=oa(),l=b(t.currentWorkId),n=ga("(min-width: 1024px)"),u=d=>{n.value&&!t.isMiniList||t.isMiniList?(l.value=d,t.view(d)):a.replace({path:"/a/"+d})},m=b([]),h=d=>{if(m.value.includes(d)){const f=m.value.indexOf(d);m.value.splice(f,1)}else m.value.push(d);e("feedManageList",m.value)};return Ve(()=>t.manageMode,d=>{d===!1&&(m.value=[])}),(d,f)=>{const w=Pe;return y(),x("section",{class:D(o.sectionClass)},[(y(!0),x(he,null,ve(o.works,i=>(y(),x("span",{key:i.id,class:D(["work-thumbnail theme-color-bg rounded-lg",i._count.artwork_assets>1&&l.value!=i.id?"work-multiple":"",{"border-4 border-yellow-400":m.value.includes(i.id)||l.value==i.id}])},[!d.isMobile()&&!o.isHref&&!o.isMiniList?(y(),x("a",{key:0,href:"/a/"+i.id,onClick:pe(c=>o.manageMode?h(i.id):o.view(i.id),["prevent"]),class:"w-full h-full theme-color-bg"},[r("div",Fa,[i._count.artwork_assets>1&&!d.applyExplicitFilter(O(s),i.is_explicit)?(y(),x("p",ja,g(i._count.artwork_assets),1)):S("",!0),d.applyExplicitFilter(O(s),i.is_explicit)?(y(),x("span",Da,g(d.$t("explicitContent")),1)):S("",!0),r("a",{href:"/a/"+i.id,class:D([{"animate-wigglefast":o.manageMode}])},[r("img",{class:D(["object-cover w-full h-full unselectable",{"blur-3xl brightness-50 unclickable":d.applyExplicitFilter(O(s),i.is_explicit)}]),src:d.artworkThumb(i.artwork_assets[0].bucket,i.artwork_assets[0].filename,"thumbnail"),onError:f[0]||(f[0]=(...c)=>d.imageLoadError&&d.imageLoadError(...c))},null,42,Ha)],10,Na)])],8,Ba)):(y(),ie(w,{key:1,onClick:c=>o.manageMode?h(i.id):u(i.id)},{default:K(()=>[r("div",Qa,[i._count.artwork_assets>1&&!d.applyExplicitFilter(O(s),i.is_explicit)?(y(),x("p",za,g(i._count.artwork_assets),1)):S("",!0),d.applyExplicitFilter(O(s),i.is_explicit)?(y(),x("span",Wa,g(d.$t("explicitContent")),1)):S("",!0),r("a",{href:"/a/"+i.id,onClick:f[2]||(f[2]=pe(c=>d.void,["prevent"])),class:D([{"animate-wigglefast":o.manageMode}])},[r("img",{class:D(["object-cover w-full h-full unselectable",{"blur-3xl brightness-50 unclickable":d.applyExplicitFilter(O(s),i.is_explicit)}]),src:d.artworkThumb(i.artwork_assets[0].bucket,i.artwork_assets[0].filename,"thumbnail"),onError:f[1]||(f[1]=(...c)=>d.imageLoadError&&d.imageLoadError(...c))},null,42,Ja)],10,Ga)])]),_:2},1032,["onClick"]))],2))),128))],2)}}},Ka=fe(Ya,[["__scopeId","data-v-a0a41970"]]),Xa={class:"artist-works"},Za={class:"heading"},es={key:0,class:"pagination-controller"},ts={__name:"ArtistWorks",props:{artworkDetail:{type:Object,default(){return{}}},keepArtistPageNumber:{type:Boolean,default:!1},view:Function,isHref:{type:Boolean,default:!1},paginationPerPage:{type:Number,default:4}},setup(o){const e=o,t=e.artworkDetail,{oApiConfiguration:s,fetchOptions:a}=_e(),l=kt(s,a()),n=b(null);Se(()=>{e.keepArtistPageNumber||(h.page=-1),d(t.users.id)});const u=b(!0),m=b([]),h=Je({page:0,perPage:e.paginationPerPage,options:{nextPrevLoading:!1,disableArtistNextButton:!0,disableArtistPrevButton:!0}}),d=async(i,c)=>{u.value=!0,h.options.nextPrevLoading=!0,i!==n.value&&(n.value=i,h.page=-1),c==="prev"?h.page-=1:h.page+=1;const[_,$,L]=await l.getUserArtworks({userId:i,pagination:{page:h.page,perPage:h.perPage}});L?(u.value=!1,w()):($.next_previous.prev_page===null||$.next_previous.prev_page===void 0?h.options.disableArtistPrevButton=!0:h.options.disableArtistPrevButton=!1,$.next_previous.next_page===null||$.next_previous.next_page===void 0?h.options.disableArtistNextButton=!0:h.options.disableArtistNextButton=!1,m.value=_),h.options.nextPrevLoading=!1,u.value=!1},f=b(!1),w=()=>{f.value=!0};return(i,c)=>{const _=Pe;return y(),x("div",Xa,[r("div",Za,[r("span",null,[B(g(i.$t("artworks.moreArtworkBy"))+" ",1),o.artworkDetail.users?(y(),ie(_,{key:0,to:"/profile/"+o.artworkDetail.users.username,class:"text-colored"},{default:K(()=>[B(g(o.artworkDetail.users.username)+" <"+g(o.artworkDetail.users.name)+"> ",1)]),_:1},8,["to"])):S("",!0)]),k(_,{to:"/profile/"+o.artworkDetail.users.username,target:"_blank",class:"flex flex-row cursor-pointer"},{default:K(()=>[k(V,{name:"i-ci-external-link"})]),_:1},8,["to"])]),k(Me,{loading:u.value,error:f.value,class:"mt-2"},null,8,["loading","error"]),I(k(Ka,{class:D(["gap-2 md:gap-4",[h.options.nextPrevLoading?"animate-pulse":"",o.paginationPerPage===6?"grid-cols-6":"grid-cols-4"]]),"section-class":"works",works:m.value,view:o.view,"is-href":o.isHref,"is-mini-list":!0,"current-work-id":o.artworkDetail.id},null,8,["class","works","view","is-href","current-work-id"]),[[R,!u.value&&!f.value]]),o.artworkDetail.users?I((y(),x("div",es,[r("span",{onClick:c[0]||(c[0]=$=>h.options.disableArtistPrevButton?null:d(o.artworkDetail.users.id,"prev"))},[k(V,{name:"i-ion-chevron-back"})]),r("span",{onClick:c[1]||(c[1]=$=>h.options.disableArtistNextButton?null:d(o.artworkDetail.users.id,"next"))},[k(V,{name:"i-ion-chevron-forward"})])],512)),[[R,!u.value]]):S("",!0)])}}},vt=fe(ts,[["__scopeId","data-v-a626d965"]]);function as(o,e){return{createCollection:async(i,c)=>{try{const{data:_}=await new me(o).create({name:c.title,description:c.description,is_public:c.isPublic?1:0,type:i},e);return[_.success,_.data,null]}catch(_){return[null,null,_]}},getInfo:async i=>{try{return[(await new me(o).detail(i,e)).data,null]}catch(c){return[null,c]}},countCollections:async i=>{try{const{data:c}=await new Ee(o).countUserCollections(i,e);return[c.data.total,null]}catch(c){return[null,c]}},countArtworkCollections:async i=>{try{const{data:c}=await new Ee(o).countUserArtworkCollections(i,e);return[c.data.total,null]}catch(c){return[null,c]}},fetchCollections:async i=>{try{const{data:c}=await new me(o).listUserCollections(i.userId,i.type,i.pagination.page,i.pagination.perPage,i.name,e),_=c.data.collections,$=c.data.pagination;let L=!0;return $.current_page===$.total_page&&(L=!1),[_,L,null]}catch(c){return[null,!1,c]}},listCollectionItems:async i=>{try{const{data:c}=await new me(o).listCollectionItems(i.collectionId,i.pagination.perPage,i.pagination.page,e),_=c.data.pagination;let $=!0;return _.current_page===_.total_page&&($=!1),[c.data.items,$,null]}catch(c){return[null,!1,c]}},getCurrentSaveInfo:async(i,c)=>{try{const{data:_}=await new me(o).getCurrentSaveInfo(i,c,e);return[_.data,null]}catch(_){return[null,_]}},addItem:async i=>{try{return await new me(o).addItemToCollection(i.type,i.collectionId,{id:i.workId},e),[!0,null]}catch(c){return[null,c]}},removeItem:async i=>{try{const{data:c}=await new me(o).removeItemFromCollection(i.type,i.collectionId,{id:i.workId},e);return[c.success,null]}catch(c){return[null,c]}},update:async i=>{try{const{data:c}=await new me(o).updateCollection({id:i.id,name:i.name,description:i.description,is_public:i.isPublic},e);return[c.success,null]}catch(c){return[null,c]}},deleteCollection:async i=>{try{const{data:c}=await new me(o).collectionsIdDelete(i,e);return[c.success,null]}catch(c){return[null,c]}}}}const ss={class:"w-full modal-layer xl:w-3/12 lg:w-2/5"},os={class:"flex flex-row justify-between w-full"},ls={class:"title"},ns={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},rs={class:"list"},is={class:"overflow-y-scroll pr-2 max-h-60"},cs=["onClick"],us={class:"flex flex-row justify-between"},ds={class:"flex float-right flex-row gap-2 mt-4"},ms=["placeholder"],ps={class:"flex flex-row justify-between mt-2"},hs={__name:"ManageSave",props:{modalId:{type:String,default:"collection-selection-modal"},workId:{type:Number,default:0}},emits:["save"],setup(o,{expose:e,emit:t}){const s=o,a=qe(),{oApiConfiguration:l,fetchOptions:n}=_e(),u=as(l,n());Se(()=>{w(),c()});const m=b({pagination:{page:0,perPage:10},loading:!1}),h=b(!1),d=b(!1),f=b([]),w=async(q=!1)=>{f.value=[],q||(m.value.loading=!0);const[M,Q,ye]=await u.fetchCollections({userId:a.user.id,type:"artwork",pagination:{page:m.value.pagination.page,perPage:m.value.pagination.perPage}});m.value.loading=!1,ye&&(h.value=!0),ye||(M&&M.length>0?(Q?(m.value.pagination.page+=1,_.value=!0):_.value=!1,M.forEach(se=>{f.value.push(se)})):d.value=!0)},i=b([]),c=async()=>{h.value=!1,i.value=[],L.value=[],P.value=[],await setTimeout(async()=>{const[q,M]=await u.getCurrentSaveInfo("artwork",s.workId);if(M)h.value=!0;else for(const Q of q)L.value.push(Q.collection_id),i.value.push(Q.collection_id)},300)},_=b(!0),$=async()=>{await w({isLoadMore:!0}),await c()},L=b([]),P=b([]),G=q=>{if(L.value.includes(q)){P.value.push(q);const M=L.value.indexOf(q);L.value.splice(M,1)}else if(L.value.push(q),P.value.includes(q)){const M=P.value.indexOf(q);P.value.splice(M,1)}},J=async()=>{try{for(const M of L.value)await u.addItem({collectionId:M,type:"artwork",workId:s.workId});if(P.value.length)for(const M of P.value)await u.removeItem({collectionId:M,type:"artwork",workId:s.workId});let q=!1;L.value.length===0&&i.value.length===P.value.length&&(q=!0),await c(),X().closeModal(s.modalId),t("save",q)}catch{}},Y=b(""),A=b(!1),oe=async()=>{A.value=!1;const[q,M,Q]=await u.createCollection("artwork",{title:Y.value,isPublic:1,description:""});q?(f.value=[],H(),m.value.pagination.page=0,await w(),await c(),Y.value="",N()):A.value=!0},ae=b(!1),N=()=>{ae.value=!0,setInterval(()=>{ae.value=!1},5e3)},H=()=>{L.value=[]},F=()=>{X().closeModal(s.modalId),H()};return e({fetchCollection:w,fetchCurrentSaved:c}),(q,M)=>(y(),x("div",null,[r("div",ss,[r("div",null,[r("div",os,[r("span",ls,g(q.$t("collections.addItem.form.title")),1),r("div",ns,[r("div",{class:"modal-close",onClick:M[0]||(M[0]=Q=>F())},[k(V,{name:"close",class:"text-2xl"})])])]),I(r("div",rs,[r("div",is,[(y(!0),x(he,null,ve(f.value,(Q,ye)=>(y(),x("div",{key:Q.id,class:D(["item",[{"mt-2":ye!==0},L.value.includes(Q.id)?"button-color text-white":"theme-color-secondary"]]),onClick:se=>G(Q.id)},[r("div",us,[r("span",null,g(Q.name),1),r("span",{class:D(["ml-2 font-bold",L.value.includes(Q.id)?"text-white":"text-colored"])},g(Q._count.collection_has_artworks),3)])],10,cs))),128))]),I(r("div",{class:"mt-2 primary-button",onClick:M[1]||(M[1]=Q=>$())},[k(V,{name:"chevron-down-outline",class:"mr-2"}),B(" "+g(q.$t("loadMore")),1)],512),[[R,_.value]]),r("div",ds,[r("button",{class:"cancel-button",onClick:M[2]||(M[2]=Q=>F())},g(q.$t("cancel")),1),r("button",{class:"primary-button",onClick:M[3]||(M[3]=Q=>J())},g(q.$t("save")),1)])],512),[[R,!m.value.loading&&!h.value&&!d.value]]),I(r("div",null,[I(r("input",{"onUpdate:modelValue":M[4]||(M[4]=Q=>Y.value=Q),type:"text",class:D(["mt-4 mb-0 form-input theme-color-secondary",{"border border-red-400":A.value}]),placeholder:q.$t("collections.createNewCollection")},null,10,ms),[[Re,Y.value]]),r("div",ps,[r("div",null,[I(r("span",{class:"font-bold text-green-400 transition-all duration-200 ease-in-out"},g(q.$t("collections.collectionCreated")),513),[[R,ae.value]]),I(r("span",{class:"font-bold text-red-400 transition-all duration-200 ease-in-out"},g(q.$t("collections.failedToCreateCollection")),513),[[R,A.value]])]),I(r("button",{class:"primary-button",onClick:M[5]||(M[5]=Q=>oe())},g(q.$t("create")),513),[[R,Y.value&&Y.value.length>0]])])],512),[[R,!m.value.loading&&!h.value&&!d.value]])]),k(Me,{loading:m.value.loading,empty:d.value,error:h.value,fetch:w},null,8,["loading","empty","error"])])]))}},vs=fe(hs,[["__scopeId","data-v-61879341"]]);function fs(o,e){return{createAlbum:async(i,c)=>{try{const{data:_}=await new de(o).createAlbum({name:c.title,description:c.description,is_public:c.isPublic?1:0,type:i},e);return[_.success,_.data,null]}catch(_){return[null,null,_]}},getInfo:async i=>{try{return[(await new de(o).getAlbumById(i,e)).data,null]}catch(c){return[null,c]}},countAlbums:async i=>{try{const{data:c}=await new Ee(o).countUserAlbums(i,e);return[c.data.total,null]}catch(c){return[null,c]}},countArtworkAlbums:async i=>{try{const{data:c}=await new Ee(o).countUserArtworkAlbums(i,e);return[c.data.total,null]}catch(c){return[null,c]}},fetchAlbums:async(i,c,_,$)=>{try{const{data:L}=await new de(o).listUserAlbums(i,_,$,c,e),P=L.data.pagination;let G=!0;return P.current_page===P.total_page&&(G=!1),[L.data.albums,G,null]}catch(L){return[null,!1,L]}},listAlbumItems:async i=>{try{const{data:c}=await new de(o).getAlbumItems(i.albumId,i.pagination.perPage,i.pagination.page,e),_=c.data.pagination;let $=!0;return _.current_page===_.total_page&&($=!1),[c.data.works,$,null]}catch(c){return[null,!1,c]}},getCurrentSaveInfo:async(i,c)=>{try{const{data:_}=await new de(o).getCurrentAlbumSaveInfo(i,c,e);return[_.data,null]}catch(_){return[null,_]}},addItems:async(i,c)=>{try{for(const _ of i)await new de(o).addWorkToAlbum({album_id:_,work_ids:c},e);return[!0,null]}catch(_){return[null,_]}},removeItems:async(i,c)=>{try{const{data:_}=await new de(o).removeWorkFromAlbum({album_id:i,work_ids:c},e);return[_.success,null]}catch(_){return[null,_]}},update:async i=>{try{const{data:c}=await new de(o).updateAlbum({id:i.id,name:i.name,description:i.description,is_public:i.isPublic},e);return[c.success,null]}catch(c){return[null,c]}},deleteAlbum:async i=>{try{const{data:c}=await new de(o).deleteAlbum(i,e);return[c.success,null]}catch(c){return[null,c]}}}}const ws={class:"w-full modal-layer xl:w-3/12 lg:w-2/5"},gs={class:"flex flex-row justify-between w-full"},ys={class:"title"},bs={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},ks={class:"list"},xs={class:"overflow-y-scroll pr-2 max-h-60"},_s=["onClick"],Cs={class:"flex float-right flex-row gap-2 mt-4"},$s={__name:"ManageAlbum",props:{modalId:{type:String,default:"album-selection-modal"},workId:{type:Number,default:0},workIds:{type:Array,default:()=>[]}},emits:["addedToAlbum"],setup(o,{expose:e,emit:t}){const s=o;Se(()=>{c(),s.workIds.length||L()});const a=qe(),{oApiConfiguration:l,fetchOptions:n}=_e(),u=fs(l,n()),m=async()=>{h.value=[],d.value.pagination.page=0,_(),await c()},h=b([]),d=b({pagination:{perPage:10,page:0,firstLoad:10},showLoadMore:!0}),f=b(!0),w=b(!1),i=b(!1),c=async()=>{_(),f.value=!0;const[N,H,F]=await u.fetchAlbums(a.user.id,"artwork",d.value.pagination.page===0?d.value.pagination.firstLoad:d.value.pagination.perPage,d.value.pagination.page);F&&(w.value=!0),N.length?(H?(d.value.pagination.page+=1,d.value.showLoadMore=!0):d.value.showLoadMore=!1,N.forEach(q=>{h.value.push(q)})):i.value=!0,f.value=!1},_=()=>{i.value=!1,w.value=!1},$=b([]),L=async()=>{$.value=[],G.value=[],J.value=[];const[N,H]=await u.getCurrentSaveInfo("artwork",s.workId);for(const F of N)G.value.push(F.album_id),$.value.push(F.album_id)},P=async()=>{await c(),await L()},G=b([]),J=b([]),Y=N=>{if(G.value.includes(N)){J.value.push(N);const H=G.value.indexOf(N);G.value.splice(H,1)}else if(G.value.push(N),J.value.includes(N)){const H=J.value.indexOf(N);J.value.splice(H,1)}},A=async()=>{const[N,H]=await u.addItems(G.value,s.workIds.length?s.workIds:[s.workId]);if(!s.workIds.length&&J.value.length)for(const F of J.value)await u.removeItems(F,[s.workId]);if(N){let F=!1;s.workIds.length||G.value.length===0&&$.value.length===J.value.length&&(F=!0),oe(),X().closeModal(s.modalId),t("addedToAlbum",s.workIds.length?!0:F)}},oe=()=>{G.value=[]},ae=()=>{X().closeModal(s.modalId),oe()};return e({fetchCurrentSaved:L,fetchAlbums:c}),(N,H)=>(y(),x("div",null,[r("div",ws,[r("div",null,[r("div",gs,[r("span",ys,g(N.$t("albums.selectAlbums")),1),r("div",bs,[r("div",{class:"modal-close",onClick:H[0]||(H[0]=F=>ae())},[k(V,{name:"close",class:"text-2xl"})])])]),r("div",ks,[I(r("div",null,[r("div",xs,[(y(!0),x(he,null,ve(h.value,(F,q)=>(y(),x("div",{key:F.id,class:D(["item",[{"mt-2":q!==0},G.value.includes(F.id)?"button-color text-white":"theme-color-secondary"]]),onClick:M=>Y(F.id)},[r("span",null,g(F.name),1),r("span",{class:D(["ml-2 font-bold",G.value.includes(F.id)?"text-white":"text-colored"])},g(F._count.album_has_artworks),3)],10,_s))),128))]),I(r("div",{class:"mt-2 primary-button",onClick:H[1]||(H[1]=F=>P())}," Load More ",512),[[R,d.value.showLoadMore]]),r("div",Cs,[r("button",{class:"cancel-button",onClick:H[2]||(H[2]=F=>ae())},g(N.$t("cancel")),1),r("button",{class:"primary-button",onClick:H[3]||(H[3]=F=>A())},g(N.$t("save")),1)])],512),[[R,!f.value&&!i.value&&!w.value]])])]),k(Me,{loading:f.value,empty:i.value,error:w.value,fetch:m},null,8,["loading","empty","error"])])]))}},Is=fe($s,[["__scopeId","data-v-92721f88"]]),As={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Rs={class:"mb-4"},Ss={class:"flex flex-row justify-end gap-2"},Ps={__name:"ConfirmationDialog",props:{modalId:{type:String,default:"confirmation-dialog-modal"},message:{type:String,default:"Are you sure?"},onAccept:{type:Function,default:()=>{}}},emits:"onAccept",setup(o,{emit:e}){const t=o,s=a=>{a&&e("onAccept",!0),X().closeModal(t.modalId)};return(a,l)=>(y(),x("div",null,[r("div",As,[r("p",Rs,g(o.message),1),r("div",Ss,[r("button",{class:"cancel-button",onClick:l[0]||(l[0]=n=>s(!1))},g(a.$t("no")),1),r("button",{class:"danger-button",onClick:l[1]||(l[1]=n=>s(!0))},g(a.$t("yes")),1)])])]))}},Ls={class:"splash"},Os={class:"flex flex-row"},Us={__name:"SplashAlert",props:{text:{type:String,default:""},icon:{type:String,default:"checkmark-outline"}},setup(o){return(e,t)=>(y(),x("div",Ls,[r("div",Os,[k(V,{name:o.icon,class:"mr-2 text-base"},null,8,["name"]),r("span",null,g(o.text),1)])]))}},At=fe(Us,[["__scopeId","data-v-86e964a1"]]),Rt=o=>(gt("data-v-93d8d761"),o=o(),yt(),o),Vs={class:"opt-modal modal-layer"},Es={class:"opt-modal__title"},qs={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},Ms={class:"opt-modal__content"},Ts={class:"report"},Bs={class:"report__reason_opt"},Fs={class:"report__title"},js=["onClick"],Ds={class:"report__title"},Ns=["placeholder"],Hs={class:"report__buttons"},Qs={class:"text-justify"},zs={class:"mt-2"},Ws=Rt(()=>r("i",null,"Your report ID:",-1)),Gs=B("\xA0 "),Js=Rt(()=>r("i",null,"Report date:",-1)),Ys=B("\xA0 "),Ks={__name:"ReportModal",props:{type:{type:String,default:""},postId:{type:Number,default:0},reportStatus:{type:Object,default:()=>{}}},setup(o){const e=o,{oApiConfiguration:t,fetchOptions:s}=_e(),a=xt(t,s()),l=b(["stolen","spam","hateSpeech","harassment","falseInfo","suicide","graphic","terrorism","somethingElse"]),n=b({selectedReasons:[],reasonDescription:"",enableSubmit:Ue(()=>n.value.selectedReasons.length>0&&n.value.reasonDescription!=="")}),u=i=>{if(!n.value.selectedReasons.includes(i))n.value.selectedReasons.push(i);else{const c=n.value.selectedReasons.indexOf(i);n.value.selectedReasons.splice(c,1)}},m=b(!1),h=b({}),d=async()=>{m.value=!1,h.value={};const[i,c,_]=await a.createNewReport({type:e.type,postId:e.postId,reasons:n.value.selectedReasons.join(","),description:n.value.reasonDescription});_&&!i||(m.value=!0,h.value=c)},f=()=>{X().closeModal("report-modal"),w()},w=()=>{n.value.selectedReasons=[],n.value.reasonDescription="",m.value=!1};return(i,c)=>{const _=Pe;return y(),x("div",null,[r("div",Vs,[r("div",Es,[r("h1",null,g(m.value?i.$t("reports.reportSubmitted"):o.reportStatus.id?i.$t("reports.alreadyReported"):i.$t("reports.title")),1),r("div",qs,[r("div",{class:"modal-close",onClick:c[0]||(c[0]=$=>f())},[k(V,{name:"i-ion-close",class:"text-2xl"})])])]),r("div",Ms,[I(r("div",Ts,[r("div",Bs,[r("div",Fs,g(i.$t("reports.selectReasons")),1),(y(!0),x(he,null,ve(l.value,$=>(y(),x("span",{key:$,class:D([n.value.selectedReasons.includes($)?"button-color":"theme-color-secondary"]),onClick:L=>u($)},[r("div",null,[I(k(V,{name:"i-ion-square-outline",class:"text-color-secondary"},null,512),[[R,!n.value.selectedReasons.includes($)]]),I(k(V,{name:"i-ion-checkbox-outline",class:"text-green-300"},null,512),[[R,n.value.selectedReasons.includes($)]])]),r("div",{class:D(["reason",[n.value.selectedReasons.includes($)?"text-white":"text-color-secondary"]])},g(i.$t("reports.reasons."+$)),3)],10,js))),128))]),r("div",null,[r("div",Ds,g(i.$t("reports.describeReason")),1),I(r("textarea",{"onUpdate:modelValue":c[1]||(c[1]=$=>n.value.reasonDescription=$),class:"report__reason_description",placeholder:i.$t("reports.describeText"),cols:"5",rows:"5"},null,8,Ns),[[Re,n.value.reasonDescription]])]),r("div",Hs,[r("button",{class:"cancel-button",onClick:c[2]||(c[2]=$=>f())},g(i.$t("cancel")),1),r("button",{class:D(n.value.enableSubmit?"primary-button":"disabled-button"),onClick:c[3]||(c[3]=$=>n.value.enableSubmit?d():null)},g(i.$t("report")),3)])],512),[[R,!m.value&&!o.reportStatus.id]]),I(r("div",null,[r("div",Qs,g(i.$t("reports.reportSubmittedMessage")),1),r("div",zs,[r("div",null,[Ws,Gs,r("b",null,"#"+g(h.value.id),1)]),r("div",null,[Js,Ys,r("b",null,g(i.formatDate(h.value.created_at)),1)])])],512),[[R,m.value]]),I(r("div",null,[B(g(i.$t("reports.alreadyReportedDescription"))+" ",1),k(_,{class:"underline href",to:"/reports"},{default:K(()=>[B(g(i.$t("reports.reportStatus")),1)]),_:1})],512),[[R,o.reportStatus.id]])])])])}}},Xs=fe(Ks,[["__scopeId","data-v-93d8d761"]]),Zs={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},eo={class:"title"},to={class:"mt-2"},ao={class:"alert-success"},so={class:"italic"},oo={class:"flex flex-row p-2 mb-2 text-white rounded-md button-color"},lo=["placeholder"],no={class:"flex flex-row gap-2 justify-end"},ro={class:"flex flex-row justify-between mt-6"},io=["value"],co={__name:"ShareArtworkToFeedModal",props:{postId:{type:Number,default:0}},setup(o){const e=o,{oApiConfiguration:t,fetchOptions:s}=_e(),a=ca(t,s()),l=bt(),n=()=>{m.value=""},u=()=>{h.value=!1,d.value=!1,f.value=!1,X().closeModal("share-to-feed-modal"),n()},m=b(""),h=b(!1),d=b(!1),f=b(!1),w=async()=>{h.value=!1,d.value=!0,f.value=!1;const[$,L,P]=await a.shareArtworkToFeed({text:m.value,workId:e.postId});$?(f.value=!0,setTimeout(()=>{u()},500)):h.value=!0,d.value=!1},i=b(!1);let c;const _=$=>{const L=b($),{copy:P}=It({source:L});P(),_t().splash(c,i,"copy-alert")};return($,L)=>(y(),x("div",null,[r("div",Zs,[r("span",eo,g($.$t("feeds.share.artwork.title")),1),r("div",to,[I(r("div",ao,[r("span",so,g($.$t("feeds.share.artwork.success")),1)],512),[[R,f.value]]),I(r("div",oo,[k(Ye,{class:"mr-2"}),B(" "+g($.$t("feeds.form.postingYourUpdate")),1)],512),[[R,d.value]]),I(r("div",{class:"alert-danger"},g($.$t("feeds.form.postFailure")),513),[[R,h.value]]),I(r("textarea",{"onUpdate:modelValue":L[0]||(L[0]=P=>m.value=P),class:"input form-input textarea",placeholder:$.$t("typeSomething"),cols:"30",rows:"2","data-gramm":"false",maxlength:"2000"},null,8,lo),[[Re,m.value]]),r("div",no,[r("button",{class:"cancel-button",onClick:L[1]||(L[1]=P=>u())},g($.$t("cancel")),1),r("button",{class:D(["primary-button"]),onClick:L[2]||(L[2]=P=>w())},g($.$t("share")),1)]),r("div",ro,[r("input",{readonly:"",value:O(l).public.appUrl+"/a/"+e.postId,class:"p-3 w-full rounded-md theme-color-secondary"},null,8,io),r("button",{class:"icon-button",onClick:L[3]||(L[3]=P=>_(O(l).public.appUrl+"/a/"+o.postId))},[k(V,{name:"i-icon-park-outline-copy"})])])])]),I(k(At,{id:"copy-alert",text:$.$t("linkCopied"),icon:"i-bi-check-all"},null,8,["text"]),[[R,i.value]])]))}},tt=o=>(gt("data-v-9292c707"),o=o(),yt(),o),uo={class:"mx-auto w-full align-middle work-view md:w-1/2"},mo={key:0,class:"p-4 mb-4 w-full text-center text-black bg-yellow-200 rounded-md theme-color-secondary"},po={class:"flex flex-row justify-center mb-2"},ho=tt(()=>r("div",null,"You are currently viewing the preview mode, this work isn't published yet.",-1)),vo={class:"font-bold cursor-pointer"},fo={class:"mr-2 font-normal"},wo={class:"italic"},go={key:1,class:"alert-success"},yo={class:"flex flex-row justify-between p-3 mb-2 text-black align-middle bg-yellow-200 rounded"},bo={class:"mr-4"},ko={class:"image-list"},xo=["src","data-source"],_o={class:"interactions"},Co={class:"reaction-counters"},$o={class:"counter"},Io={key:1,class:"counter"},Ao={key:2,class:"counter"},Ro={key:3,class:"counter"},So={key:0,class:"reactions"},Po={class:"inline-block relative z-30 dropdown"},Lo={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options"},Oo={class:"invisible rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 dropdown-menu"},Uo={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 p-1 mt-2 w-56 rounded-md shadow-lg origin-top-right outline-none theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},Vo={key:2,class:"custom-divider"},Eo={key:4,class:"custom-divider"},qo=["to"],Mo=tt(()=>r("div",{class:"custom-divider"},null,-1)),To={class:"comments"},Bo={key:0,class:"comment-box"},Fo={class:"flex flex-col"},jo={class:"flex relative flex-col"},Do=["readonly","rows","placeholder"],No={key:1,class:"p-4 mb-4 text-center rounded-md theme-color-secondary"},Ho={class:"comment-content"},Qo=["src"],zo={class:"w-full"},Wo={class:"flex justify-between"},Go={class:"comment-time"},Jo={class:"mt-4 reactions"},Yo=["onClick"],Ko={key:0},Xo={key:0,class:"flex flex-row"},Zo=["onClick"],el=["onClick"],tl={class:"inline-block relative ml-2 dropdown"},al={class:"invisible z-50 rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 cursor-pointer dropdown-menu"},sl={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 p-1 mt-2 w-56 rounded-md border shadow-lg origin-top-right outline-none border-color theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},ol=["onClick"],ll={key:0,class:"-mb-4 comment-box"},nl={class:"flex flex-col"},rl={class:"flex relative flex-col"},il=["id","readonly","rows","placeholder"],cl=["onClick"],ul=["id"],dl={key:0,class:"w-full"},ml={class:"float-left mb-2 text-xs italic text-color-secondary"},pl=["onClick"],hl={class:"flex flex-row justify-between"},vl=["src"],fl={class:"transition-all duration-150 cursor-pointer hover:font-bold"},wl={class:"leading-6 comment-time"},gl={class:"mt-2"},yl={key:0,class:"mt-2 reactions"},bl=tt(()=>r("span",null,null,-1)),kl={class:"flex flex-row"},xl=["onClick"],_l={class:"inline-block relative ml-2 dropdown"},Cl={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options"},$l={class:"invisible z-50 rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 cursor-pointer dropdown-menu"},Il={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 z-50 p-1 mt-2 w-56 rounded-md border shadow-lg origin-top-right outline-none border-color theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},Al=["onClick"],Rl=["onClick"],Sl={key:3,class:"mt-4 w-full text-xs italic text-center"},Pl={__name:"ModalView",props:{id:{type:String,default:""},section:{type:String,default:""}},emits:["stopLoading","showEmpty","showError"],setup(o,{expose:e,emit:t}){const s=o,a=qe(),{oApiConfiguration:l,fetchOptions:n}=_e(),{applyExplicitFilter:u,removeExplicitFilter:m,generateSemiCompressedArtworkUrl:h}=la(),d=kt(l,n()),f=xt(l,n()),w=bt(),{$router:i}=na(),c=wt();Ve(()=>c.query,()=>{_(),X().closeModal("collection-selection-modal"),X().closeModal("album-selection-modal"),X().closeModal("report-modal")}),Se(()=>{s.id!==""&&F(s.id),window.addEventListener("keydown",p=>{const v=document.getElementById("collection-selection-modal"),U=document.getElementById("album-selection-modal"),E=document.getElementById("report-modal"),te=document.querySelectorAll(".viewer-in");p.key==="Escape"&&(!v||v.style.display!="flex")&&(!U||U.style.display!="flex")&&(!E||E.style.display!="flex")&&!te.length&&_()})});const _=()=>{X().closeModal(`${s.section}-modal`)},$=b(!1),L=()=>{$.value=!1,m()},P=s.id==="",G=async p=>{await d.incraseViewCount(p)},J=b(!1),Y=b(!0),A=b({}),oe=b(!1),ae=b(!1),N=b(!1),H=b([]),F=async p=>{Z.value="",se.value=[],le.value=[],Y.value=!0;const[v,U]=await d.getWorkById(p);U?U=="Work not found"?t("showEmpty"):t("showError"):(A.value=v,H.value=[],v.artwork_assets.forEach(te=>{H.value.push({thumbnail:h(te.bucket,te.filename,!0),source:h(te.bucket,te.filename,!1)})}),!a.loggedIn&&v.is_explicit||v.is_explicit&&!a.user.user_settings.show_explicit?($.value=!0,u()):$.value=!1,oe.value=v.liked,ae.value=v.saved,N.value=v.in_album,rt().formatApiToWeb(v.scheduled_post)<rt().currentUtcTime()?(await St(p),a.loggedIn&&await M(p),(!a.loggedIn||a.user.id!==v.users.id)&&await G(p)):a.user.id!==v.users.id?i.push("/"):J.value=!0),Y.value=!1,t("stopLoading")},q=b({}),M=async p=>{const[v,U]=await f.getReportStatus({type:"artwork",postId:p});U||(v.length?q.value=v[0]:q.value={})},Q=async()=>{const[p,v]=await d.like({workId:A.value.id});if(p){oe.value=!0;const U=document.getElementById("like-button");U.classList.add("animate-bounce"),setInterval(()=>{U.classList.remove("animate-bounce")},2500)}},ye=async()=>{const[p,v]=await d.unlike({workId:A.value.id});p&&(oe.value=!1)},se=b([]),Te=Je({perPage:3,page:0}),$e=b([]),at=async p=>{const[v,U]=await d.getComments({workId:p,pagination:{page:Te.page,perPage:Te.perPage}});if(v)return v.pagination.current_page===v.pagination.first_last.last_page?Le.value=!1:Le.value=!0,v.comments.forEach(E=>{E.liked&&we.value.push(E.id),$e.value.push(E.id)}),v.comments},St=async p=>{try{(await at(p)).forEach(U=>se.value.push(U))}catch{}},Le=b(!1),Pt=async p=>{try{Te.page+=1,(await at(p)).forEach(U=>se.value.push(U))}catch{}},Z=b(),Be=200,Lt=Ue(()=>Z.value!=null&&Z.value!==""?Be-Z.value.length:Be),be=b(!1),Ot=async()=>{be.value=!0;try{const[p,v,U]=await d.addComment({workId:A.value.id,comment:Z.value});p&&(Z.value="",se.value.splice(0,0,v),se.value.join(),$e.value.splice(0,0,v.id),$e.value.join())}catch{}be.value=!1},Ut=async p=>{const[v,U]=await d.deleteComment({commentId:p});if(v){const E=$e.value.indexOf(p);se.value.splice(E,1),$e.value.splice(E,1)}},we=b([]),Vt=async p=>{const[v,U]=await d.likeComment({commentId:p});if(v){we.value.push(p);const E=document.getElementById(`comment-like-button-${p}`);E.classList.add("animate-bounce"),setInterval(()=>{E.classList.remove("animate-bounce")},2500)}},Et=async p=>{const[v,U]=await d.unlikeComment({commentId:p});if(v){const E=we.value.indexOf(p);we.value.splice(E,1)}},Fe=Je({perPage:2,page:0}),le=b([]),ke=b([]),je=b(!0),st=async p=>{const[v,U,E]=await d.getCommentReplies({commentId:p,pagination:{page:Fe.page,perPage:Fe.perPage}});if(!E)return U.current_page===U.first_last.last_page&&(je.value=!1),v.map(te=>ke.value.push(te.id)),v},Ie=b(0),De=async p=>{je.value=!0,ke.value=[];try{const v=await st(p);le.value={[p]:v},v.forEach(E=>{E.liked&&ge.value.push(E.id)}),Ie.value&&Ne(Ie.value);const U=document.getElementById(`comment-replies-${p}`);U.classList.add("flex"),U.classList.remove("hidden"),Ie.value=p}catch{}},Ne=p=>{const v=document.getElementById(`comment-replies-${p}`);v.classList.remove("flex"),v.classList.add("hidden"),Ie.value=0},qt=async p=>{Fe.page+=1;try{(await st(p)).forEach(U=>{le.value[p].push(U)})}catch{}},Oe=b(0),Mt=async p=>{await De(p),Oe.value=p},ee=b(),He=200,Tt=Ue(()=>ee.value!=null&&ee.value!==""?He-ee.value.length:He),xe=b(!1),Bt=async p=>{xe.value=!0;try{const[v,U,E]=await d.addReply({commentId:p,reply:ee.value});v&&(De(p),ee.value="",le.value[p].splice(0,0,U),le.value[p].join(),Oe.value=0,ke.value.splice(0,0,U.id),ke.value.join())}catch{}xe.value=!1},Ft=async(p,v)=>{const[U,E]=await d.deleteReply({replyId:v});if(U){const te=ke.value.indexOf(v);le.value[p].splice(te,1),ke.value.splice(te,1)}},ge=b([]),jt=async p=>{const[v,U]=await d.likeReply({replyId:p});if(v){ge.value.push(p);const E=document.getElementById(`reply-like-button-${p}`);E.classList.add("animate-bounce"),setInterval(()=>{E.classList.remove("animate-bounce")},2500)}},Dt=async p=>{const[v,U]=await d.unlikeReply({replyId:p});if(v){const E=ge.value.indexOf(p);ge.value.splice(E,1)}},Qe=b(!1),ze=b(!1),ot=async p=>{const[v,U]=await d.deleteWork({workId:[p]});v&&(ze.value=!0,setTimeout(()=>{i.push("/")},1500))},We=b(null),Nt=()=>{X().openModal("collection-selection-modal"),We.value.fetchCollection(),We.value.fetchCurrentSaved()},Ht=p=>{p?ae.value=!1:ae.value=!0,ct().animate("save-to-collection-button")},lt=b(null),Qt=()=>{X().openModal("album-selection-modal"),lt.value.fetchCurrentSaved()},zt=p=>{p?N.value=!1:N.value=!0,ct().animate("save-to-album-button")},Wt=()=>{X().openModal("share-to-feed-modal")},nt=b(!1);let Gt;const Jt=p=>{const v=b(w.public.appUrl+p),{copy:U}=It({source:v});U(),_t().splash(Gt,nt,"copy-alert")},Yt=b(null),Kt=()=>{X().openModal("report-modal")};return e({view:F}),(p,v)=>{const U=ia("viewer"),E=Pe,te=it("lazy"),Xt=it("auto-animate");return y(),x(he,null,[I(r("div",uo,[k(Me,{loading:Y.value},null,8,["loading"])],512),[[R,Y.value&&!p.isMobile()&&P]]),I(r("div",{class:D(["work-container work-view",P?"w-full 2xl:w-4/6 2xl:mx-auto p-2 md:p-6 theme-color":"w-full"])},[r("div",{class:D(["left-side",{"overflow-y-scroll mr-6":P}])},[J.value&&!ze.value?(y(),x("div",mo,[r("div",po,[k(V,{name:"i-ion-alert-outline"}),ho]),r("div",vo,[r("span",{class:"text-red-500",onClick:v[0]||(v[0]=C=>Qe.value=!0)},g(p.$t("artworks.deleteArtwork")),1),I(r("div",null,[r("span",fo,[B(g(p.$t("alert.areYouSure"))+" ",1),r("span",wo,"("+g(p.$t("alert.youCannotUndoThisAction"))+")",1)]),r("span",{class:"mr-2 text-red-500 hover:underline",onClick:v[1]||(v[1]=C=>ot(A.value.id))},g(p.$t("yes")),1),r("span",{class:"hover:underline",onClick:v[2]||(v[2]=C=>Qe.value=!1)},g(p.$t("no")),1)],512),[[R,Qe.value]])])])):S("",!0),ze.value?(y(),x("div",go,g(p.$t("artworks.successDelete")),1)):S("",!0),I(r("div",yo,[r("span",bo,g(O(a).loggedIn?p.$t("explicitContentAlert"):p.$t("explicitContentAlertForGuest")),1),r("button",{class:"primary-button",onClick:v[3]||(v[3]=pe(C=>L(),["prevent"]))},g(p.$t("show")),1)],512),[[R,$.value]]),r("div",ko,[k(U,{options:{url:"data-source"},images:H.value,class:"overflow-hidden rounded-md"},{default:K(()=>[(y(!0),x(he,null,ve(H.value,(C,T)=>I((y(),x("img",{key:C.thumbnail,loading:"lazy",src:C.thumbnail,"data-source":C.source,class:D(["overflow-hidden mb-2 rounded cursor-pointer image image-layer unselectable",{"blur-lg unclickable":$.value},$.value?"brightness-50":"brightness-100"]),onError:v[4]||(v[4]=(...Ae)=>p.imageLoadError&&p.imageLoadError(...Ae))},null,42,xo)),[[te,C.thumbnail]])),128))]),_:1},8,["images"])]),r("div",_o,[r("div",Co,[A.value.is_explicit?(y(),x("span",{key:0,class:D(["py-1 px-2 mr-2 font-bold rounded-md text-xxs",P?"theme-color-secondary":"bg-tag"])},"E",2)):S("",!0),I(r("span",$o,[r("b",null,g(p.shortNumber(A.value.views)),1),B(" "+g(p.$t("count.views")),1)],512),[[R,A.value.views>0]]),A.value._count?I((y(),x("span",Io,[r("b",null,g(p.thousand(A.value._count.artwork_likes)),1),B(" "+g(p.$t("count.likes")),1)],512)),[[R,A.value._count.artwork_likes>0]]):S("",!0),A.value._count?I((y(),x("span",Ao,[r("b",null,g(p.thousand(A.value._count.artwork_comments)),1),B(" "+g(p.$t("count.comments")),1)],512)),[[R,A.value._count.artwork_comments>0]]):S("",!0),A.value._count?I((y(),x("span",Ro,[r("b",null,g(p.thousand(A.value._count.artwork_collection_has_works)),1)],512)),[[R,A.value._count.artwork_collection_has_works]]):S("",!0)]),J.value?S("",!0):(y(),x("div",So,[O(a).loggedIn?(y(),x("span",{key:0,onClick:v[5]||(v[5]=C=>oe.value?ye():Q())},[I(k(V,{id:"like-button",name:"i-ion-heart",class:"text-red-500 hover:text-red-500"},null,512),[[R,oe.value]]),I(k(V,{name:"i-ion-heart-outline",class:"hover:text-red-500"},null,512),[[R,!oe.value]])])):S("",!0),O(a).loggedIn?(y(),x("span",{key:1,onClick:v[6]||(v[6]=C=>Nt())},[I(k(V,{id:"save-to-collection-button",name:"i-majesticons-bookmark",class:"text-blue-500 hover:text-blue-500"},null,512),[[R,ae.value]]),I(k(V,{name:"i-majesticons-bookmark-line",class:"hover:text-blue-500"},null,512),[[R,!ae.value]])])):S("",!0),O(a).loggedIn&&A.value.users&&O(a).user.id===A.value.users.id?(y(),x("span",{key:2,onClick:v[7]||(v[7]=C=>Qt())},[I(k(V,{id:"save-to-album-button",name:"i-ion-folder-open",class:"text-green-500 hover:text-green-500"},null,512),[[R,N.value]]),I(k(V,{name:"i-bx-photo-album",class:"hover:text-blue-500"},null,512),[[R,!N.value]])])):S("",!0),O(a).loggedIn?(y(),x("span",{key:3,onClick:v[8]||(v[8]=C=>Wt())},[k(V,{name:"i-uil-share",class:"hover:text-blue-500"})])):S("",!0),r("div",Po,[r("button",Lo,[r("span",null,[k(V,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),r("div",Oo,[r("div",Uo,[P?(y(),ie(E,{key:0,to:"/a/"+A.value.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:K(()=>[k(V,{name:"i-fluent-arrow-enter-20-filled",class:"mr-2 text-base"}),B(" "+g(p.$t("open")),1)]),_:1},8,["to"])):S("",!0),P?(y(),ie(E,{key:1,to:"/a/"+A.value.id,target:"_blank",class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:K(()=>[k(V,{name:"i-ci-external-link",class:"mr-2 text-base"}),B(" "+g(p.$t("openInNewTab")),1)]),_:1},8,["to"])):S("",!0),P?(y(),x("div",Vo)):S("",!0),O(a).loggedIn&&A.value.users&&O(a).user.id!=A.value.users.id&&!O(a).user.is_admin&&!O(a).user.is_moderator?(y(),x("div",{key:3,to:"#",class:D(["flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",{"rounded-t-md":!P}]),onClick:v[9]||(v[9]=C=>Kt())},[k(V,{name:"i-akar-icons-flag",class:"mr-2 text-base"}),B(" "+g(p.$t("report")),1)],2)):S("",!0),r("div",{class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 cursor-pointer theme-color hover:button-color parent-icon hover:text-white",onClick:v[10]||(v[10]=C=>Jt("/a/"+A.value.id))},[k(V,{name:"i-icon-park-outline-copy",class:"mr-2 text-base"}),B(" "+g(p.$t("copySharableLink")),1)]),O(a).loggedIn&&A.value.users&&O(a).user.id===A.value.users.id?(y(),x("div",Eo)):S("",!0),O(a).loggedIn&&A.value.users&&O(a).user.id===A.value.users.id?(y(),ie(E,{key:5,to:"/works/update/"+A.value.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:K(()=>[k(V,{name:"i-ion-settings-outline",class:"mr-2 text-base"}),B(" "+g(p.$t("update")),1)]),_:1},8,["to"])):S("",!0),O(a).loggedIn&&A.value.users&&O(a).user.id===A.value.users.id?(y(),x("div",{key:6,to:"/a/"+A.value.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 cursor-pointer bg-danger hover:button-color parent-icon hover:text-white",onClick:v[11]||(v[11]=C=>p.openModal("work-deletion-confirm-modal"))},[k(V,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),B(" "+g(p.$t("delete")),1)],8,qo)):S("",!0)])])])]))]),k(ht,{section:o.section,class:"flex-md-hidden","is-modal":P,"artwork-detail":A.value,"preview-mode":J.value,"is-desktop":!0},null,8,["section","artwork-detail","preview-mode"]),(y(),ie(ra,null,[Y.value?S("",!0):(y(),ie(vt,{key:0,class:"mb-6 hidden-md-flex","artwork-detail":A.value,view:F,"is-href":!P,"keep-artist-page-number":!0,"pagination-per-page":4},null,8,["artwork-detail","is-href","pagination-per-page"]))],1024))],2),r("div",{class:D(["right-side",{"pr-3 overflow-y-scroll":P}])},[k(ht,{section:o.section,class:"hidden-md-flex","is-modal":P,"artwork-detail":A.value,"preview-mode":J.value,"is-desktop":!1},null,8,["section","artwork-detail","preview-mode"]),Y.value?S("",!0):(y(),ie(vt,{key:0,class:"flex-md-hidden","artwork-detail":A.value,view:F,"is-href":!P,"keep-artist-page-number":!0,"pagination-per-page":4},null,8,["artwork-detail","is-href","pagination-per-page"])),Mo,r("section",To,[O(a).loggedIn&&!J.value?(y(),x("div",Bo,[r("div",Fo,[r("div",jo,[I(r("textarea",{"onUpdate:modelValue":v[12]||(v[12]=C=>Z.value=C),class:D(["input form-input",[{"cursor-not-allowed":be.value},{"theme-color-secondary textarea":P}]]),readonly:be.value,cols:"30",rows:Z.value!=null&&Z.value!=""?"8":"0",placeholder:p.$t("comments.inputPlaceholder"),maxlength:Be,"data-gramm":"false"},null,10,Do),[[Re,Z.value]]),I(r("span",{class:"absolute left-4 bottom-6 py-1 px-2 text-white rounded-md button-color"},g(O(Lt)),513),[[R,Z.value!=null&&Z.value!=""]]),r("span",{class:"absolute right-2 bottom-5 py-1 px-2",onClick:v[13]||(v[13]=pe(C=>Ot(),["prevent"]))},[I(k(V,{name:"i-ion-prism",class:"text-xl transition-all duration-100 rotate-90 cursor-pointer text-colored"},null,512),[[R,Z.value!=null&&Z.value!=""&&!be.value]]),I(k(Ye,null,null,512),[[R,be.value]])])])])])):S("",!0),O(a).loggedIn?S("",!0):(y(),x("div",No,g(p.$t("comments.loginOrRegisterToLeaveComment")),1)),r("div",Ho,[(y(!0),x(he,null,ve(se.value,C=>I((y(),x("div",{key:C.id,class:"flex flex-row w-full comment-item"},[k(E,{class:"mr-2",to:"/profile/"+C.users.username},{default:K(()=>[r("img",{class:"w-10 h-10 avatar",src:p.avatarCoverUrl(C.users.avatar_bucket,C.users.avatar_filename),onError:v[14]||(v[14]=(...T)=>p.imageLoadError&&p.imageLoadError(...T))},null,40,Qo)]),_:2},1032,["to"]),r("div",zo,[r("div",{class:D(["p-3 w-full rounded-md",P?"theme-color-secondary":"theme-color"])},[r("div",Wo,[k(E,{to:"/profile/"+C.users.username,class:"mb-2 text-xs font-semibold transition-all duration-150 cursor-pointer"},{default:K(()=>[B(g(C.users.name),1)]),_:2},1032,["to"]),r("div",Go,g(p.formatDate(C.created_at,!0)),1)]),r("div",null,g(C.comment),1),r("div",Jo,[r("div",{class:"cursor-pointer hover:underline",onClick:T=>Ie.value==C.id?Ne(C.id):De(C.id)},[C._count.artwork_comment_has_replies>0?(y(),x("span",Ko,[r("b",null,g(p.shortNumber(C._count.artwork_comment_has_replies)),1),B(" "+g(C._count.artwork_comment_has_replies>1?p.$t("comments.replies.replies").toLowerCase():p.$t("comments.replies.reply").toLowerCase()),1)])):S("",!0)],8,Yo),O(a).loggedIn?(y(),x("div",Xo,[r("span",{class:"reaction",onClick:T=>we.value.includes(C.id)?Et(C.id):Vt(C.id)},[I(k(V,{name:"i-ion-heart-outline",class:"text-gray-500 hover:text-red-500"},null,512),[[R,!we.value.includes(C.id)]]),I(k(V,{id:"comment-like-button-"+C.id,name:"i-ion-heart",class:"text-red-500 hover:text-red-500"},null,8,["id"]),[[R,we.value.includes(C.id)]]),B(" "+g(p.shortNumber(C._count.artwork_comment_has_likes)),1)],8,Zo),r("span",{class:"reaction",onClick:T=>Mt(C.id)},[k(V,{name:"i-quill-reply",class:"text-gray-500 hover:text-blue-500"})],8,el),r("div",tl,[r("button",{type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options",onClick:v[15]||(v[15]=T=>Oe.value=0)},[r("span",null,[k(V,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),r("div",al,[r("div",sl,[k(E,{to:"/profile/"+C.users.username,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:v[16]||(v[16]=pe(()=>{},["prevent"]))},{default:K(()=>[k(V,{name:"i-fluent-person-32-regular",class:"mr-2 text-base"}),B(" "+g(p.$t("viewProfile")),1)]),_:2},1032,["to"]),O(a).loggedIn&&O(a).user.id===C.users.id?(y(),x("div",{key:0,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:T=>Ut(C.id)},[k(V,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),B(" "+g(p.$t("delete")),1)],8,ol)):S("",!0)])])])])):S("",!0)])],2),O(a).loggedIn?I((y(),x("div",ll,[r("div",nl,[r("div",rl,[I(r("textarea",{id:"reply-"+C.id,"onUpdate:modelValue":v[17]||(v[17]=T=>ee.value=T),class:D(["mt-2 w-full input form-input",[{"cursor-not-allowed":xe.value},{"theme-color-secondary textarea":P}]]),readonly:xe.value,cols:"30",rows:ee.value!=null&&ee.value!=""?"5":"0",placeholder:p.$t("comments.replies.write"),maxlength:He,"data-gramm":"false"},null,10,il),[[Re,ee.value]]),I(r("span",{class:"absolute left-4 bottom-6 py-1 px-2 text-white rounded-md button-color"},g(O(Tt)),513),[[R,ee.value!=null&&ee.value!=""]]),r("span",{class:"absolute right-2 bottom-5 py-1 px-2",onClick:pe(T=>Bt(C.id),["prevent"])},[I(k(V,{name:"i-ion-prism",class:"text-xl transition-all duration-100 rotate-90 cursor-pointer text-colored"},null,512),[[R,ee.value!=null&&ee.value!=""&&!xe.value]]),I(k(Ye,null,null,512),[[R,xe.value]])],8,cl)])])],512)),[[R,Oe.value===C.id]]):S("",!0),r("div",{id:"comment-replies-"+C.id,class:"hidden flex-col mt-2"},[le.value[C.id]&&le.value[C.id].length?(y(),x("div",dl,[r("span",ml,g(p.$t("comments.replies.replies")),1),r("span",{class:"float-right text-xs cursor-pointer hover:font-semibold",onClick:T=>Ne(C.id)},g(p.$t("hide")),9,pl)])):S("",!0),(y(!0),x(he,null,ve(le.value[C.id],T=>(y(),x("div",{key:T.id,class:D(["p-3 mb-2 w-full rounded-md border-l-4",P?"theme-color-secondary":"theme-color"])},[r("div",hl,[k(E,{to:"/profile/"+T.users.username,class:"flex flex-row leading-6"},{default:K(()=>[r("img",{class:"mr-2 w-6 h-6 rounded-full",src:p.avatarCoverUrl(T.users.avatar_bucket,T.users.avatar_filename),onError:v[18]||(v[18]=(...Ae)=>p.imageLoadError&&p.imageLoadError(...Ae))},null,40,vl),r("span",fl,g(T.users.name),1)]),_:2},1032,["to"]),r("span",wl,g(p.formatDate(T.created_at,!0)),1)]),r("div",gl,g(T.content),1),O(a).loggedIn?(y(),x("div",yl,[bl,r("div",kl,[r("span",{class:"reaction",onClick:Ae=>ge.value.includes(T.id)?Dt(T.id):jt(T.id)},[I(k(V,{id:"reply-like-button-"+T.id,name:"i-ion-heart",class:"text-red-500 hover:text-red-500"},null,8,["id"]),[[R,ge.value.includes(T.id)]]),I(k(V,{name:"i-ion-heart-outline",class:"text-gray-500 hover:text-red-500"},null,512),[[R,!ge.value.includes(T.id)]]),B(" "+g(p.shortNumber(T._count.artwork_comment_reply_has_likes)),1)],8,xl),r("div",_l,[r("button",Cl,[r("span",null,[k(V,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),r("div",$l,[r("div",Il,[k(E,{to:"/profile/"+T.users.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:v[19]||(v[19]=pe(()=>{},["prevent"]))},{default:K(()=>[k(V,{name:"i-fluent-person-32-regular",class:"mr-2 text-base"}),B(" "+g(p.$t("viewProfile")),1)]),_:2},1032,["to"]),O(a).loggedIn&&O(a).user.id===T.users.id?(y(),x("div",{key:0,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:Ae=>Ft(C.id,T.id)},[k(V,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),B(" "+g(p.$t("delete")),1)],8,Al)):S("",!0)])])])])])):S("",!0)],2))),128)),le.value[C.id]&&je.value?(y(),x("div",{key:1,class:"mb-1 text-center transition ease-in-out delay-75 cursor-pointer hover:font-semibold hover:underline text-color-secondary href",onClick:T=>qt(C.id)},g(p.$t("comments.replies.loadMore")),9,Rl)):S("",!0)],8,ul)])])),[[Xt]])),128))]),A.value._count?I((y(),x("div",{key:2,class:"text-center capitalize href",onClick:v[20]||(v[20]=pe(C=>Pt(A.value.id),["prevent"]))},g(p.$t("comments.loadOlder")),513)),[[R,A.value._count.artwork_comments>3&&Le.value]]):S("",!0),I(r("div",{class:"w-full text-xs italic text-center"},g(p.$t("comments.reachedTheEnd")),513),[[R,se.value.length&&!Le.value]]),O(a).loggedIn&&!se.value.length&&!J.value?(y(),x("div",Sl,g(p.$t("comments.noCommentYet")),1)):S("",!0)])],2),Y.value?S("",!0):(y(),ie(vs,{key:0,id:"collection-selection-modal","modal-id":"collection-selection-modal",ref_key:"collectionSelectionModalRef",ref:We,"work-id":A.value.id,class:"modal",onSave:Ht},null,8,["work-id"])),!Y.value&&O(a).loggedIn&&A.value.users&&O(a).user.id==A.value.users.id?(y(),ie(O(Is),{key:1,id:"album-selection-modal",ref_key:"albumSelectionModalRef",ref:lt,"modal-id":"album-selection-modal","work-id":A.value.id,class:"modal",onAddedToAlbum:zt},null,8,["work-id"])):S("",!0),k(Ps,{id:"work-deletion-confirm-modal","modal-id":"work-deletion-confirm-modal",message:`${p.$t("alert.areYouSure")} ${p.$t("alert.youCannotUndoThisAction")}`,class:"modal",onOnAccept:v[21]||(v[21]=C=>ot(A.value.id))},null,8,["message"]),k(Xs,{id:"report-modal",ref_key:"reportModalRef",ref:Yt,class:"modal",type:"artwork","post-id":A.value.id,"report-status":q.value},null,8,["post-id","report-status"]),k(co,{id:"share-to-feed-modal",ref:"shareToFeedModalRef",class:"modal","post-id":A.value.id},null,8,["post-id"]),I(k(At,{id:"copy-alert",text:p.$t("linkCopied"),icon:"i-bi-check-all"},null,8,["text"]),[[R,nt.value]])],2),[[R,!Y.value]])],64)}}},Tl=fe(Pl,[["__scopeId","data-v-9292c707"]]);export{Tl as M,At as S,Ka as W,Ps as _,vs as a,Ca as b,It as c,_t as d,fs as e,as as f,Is as g,ct as u};
