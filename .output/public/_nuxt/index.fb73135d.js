import{j as q,i as z,a7 as O,r as o,D as H,I as K,o as h,c as Q,w as U,p as a,t as l,J as d,u as A,m as N,s as S,e as p,b as g,v as m,q as B,aG as X,G as k}from"./entry.86078af1.js";import{u as Y,_ as T}from"./Icon.5b9a3c46.js";import{L as Z}from"./Layout.46731ff7.js";import{W as J,M as ee}from"./ModalView.7fd3b0ae.js";import{_ as te}from"./LoadingEmptyErrorMessage.5e671d0e.js";import{T as ae}from"./TagFilterSelection.3a2dc849.js";import{_ as oe}from"./_plugin-vue_export-helper.a1a6add7.js";import"./Spinner.cdd2eb1e.js";import"./user-counters-api.6c0f4602.js";import"./useFeed.9a25a969.js";const se={id:"lists"},ne={class:"navigations"},le={class:"title"},ie={class:"buttons"},re={class:"filter-buttons"},ue={key:0,class:"filter-buttons"},ce={class:"mt-4"},de={key:0,class:"art-list-view-paging-control"},pe={id:"recent-modal",class:"modal work-view"},ve={__name:"index",props:{browseMode:{type:Boolean,default:!1}},setup(fe){const{oApiConfiguration:V,fetchOptions:E}=q(),F=Y(V,E()),y=z();O(()=>{r()});const v=o(void 0),_=async e=>{v.value=e,u.page=0,await r()},x=o(null),R=()=>{x.value.init(X(w.value)),k().openModal("tag-filter-selection-modal")},M=o(""),w=o(),b=o(0),L=async(e,t)=>{w.value=e,M.value=t,b.value=t!==""?t.split(",").length:0,u.page=0,k().closeModal("tag-filter-selection-modal"),await r()};H(async()=>w.value,e=>{r()});const $=o([]),i=o({pagination:{enablePrev:!0,enableNext:!0}}),r=async()=>{const e=await D(),t=e.works,n=e.pagination;!t.length&&n.record_total===0?I():($.value=t,n.next_previous.next_page===null?i.value.pagination.enableNext=!1:i.value.pagination.enableNext=!0,n.next_previous.prev_page===null?i.value.pagination.enablePrev=!1:i.value.pagination.enablePrev=!0)},s=o(!0),u=K({perPage:18,page:o(0)}),D=async()=>{s.value=!0,c.value=!1;const[e,t]=await F.getLatest({pagination:{perPage:u.perPage,page:u.page},explicitMode:v.value,tags:M.value});if(t)W();else return G(),e;s.value=!1},C=async e=>{e==="prev"?u.page-=1:u.page+=1,await r()},c=o(!1),I=()=>{c.value=!0},f=o(!1),W=()=>{s.value=!1,f.value=!0,hideButton()},G=()=>{s.value=!1,c.value=!1,f.value=!1},P=o(null),j=(e,t=!1)=>{P.value.view(e,t),k().openModal("recent-modal")};return(e,t)=>(h(),Q(Z,{"with-footer":!0,"hide-side":!0,"no-right-side":!0},{default:U(()=>[a("div",se,[a("div",ne,[a("div",le,l(e.$t("artworks.recentArtworks")),1),a("div",ie,[a("div",re,[a("button",{class:d(["px-3 rounded-md button-item",b.value?"button":"theme-color"]),onClick:R},l(b.value)+" "+l(e.$t("tagsApplied")),3)]),A(y).loggedIn&&A(y).user.user_settings.show_explicit?(h(),N("div",ue,[a("p",{class:d(["rounded-l-md button-item",[v.value===void 0?"button":"theme-color"]]),onClick:t[0]||(t[0]=n=>_(void 0))},l(e.$t("default")),3),a("p",{class:d(["button-item",[v.value==="safe"?"button":"theme-color"]]),onClick:t[1]||(t[1]=n=>_("safe"))},l(e.$t("safe")),3),a("p",{class:d(["rounded-r-md button-item",[v.value==="explicit"?"button":"theme-color"]]),onClick:t[2]||(t[2]=n=>_("explicit"))},l(e.$t("explicit")),3)])):S("",!0)])]),p(te,{loading:s.value,empty:c.value,error:f.value,fetch:r},null,8,["loading","empty","error"]),g(a("div",ce,[g(p(J,{"section-class":"work-grid",works:$.value,view:j},null,8,["works"]),[[m,!c.value]])],512),[[m,!s.value]]),!s.value&&!c.value&&!f.value?(h(),N("div",de,[a("button",{class:d([i.value.pagination.enablePrev?"primary-button":"disabled-button"]),onClick:t[3]||(t[3]=n=>C("prev"))},[p(T,{name:"i-ion-chevron-back-outline"}),B(" "+l(e.$t("pagination.previous")),1)],2),a("button",{class:d([i.value.pagination.enableNext?"primary-button":"disabled-button"]),onClick:t[4]||(t[4]=n=>C("next"))},[B(l(e.$t("pagination.next"))+" ",1),p(T,{name:"i-ion-chevron-forward-outline",class:"md:ml-2",style:{"margin-right":"0 !important"}})],2)])):S("",!0),a("div",pe,[g(p(ee,{ref_key:"recentModalViewRef",ref:P,section:"recent"},null,512),[[m,!s.value]])]),g(p(ae,{id:"tag-filter-selection-modal",ref_key:"tagFilterSelectionModalRef",ref:x,class:"modal",onApply:L},null,512),[[m,!s.value]])])]),_:1}))}},$e=oe(ve,[["__scopeId","data-v-88a0596c"]]);export{$e as default};
