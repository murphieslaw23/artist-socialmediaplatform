import{j as L,O as $,m as A,r as g,c as w,w as v,o as r,q as i,G as M,e as l,L as B,s as C,t as d,u as a,p as f,x as _,Z as R,b as I,v as N,y as T}from"./entry.15cb71bb.js";import{u as V}from"./client-only.407c3fea.js";import{L as D}from"./Layout.69b2e7d1.js";import{W as P}from"./WorkList.d666493b.js";import{_ as W}from"./LoadingEmptyErrorMessage.31b597d2.js";import{_ as j}from"./_plugin-vue_export-helper.a1a6add7.js";import"./Spinner.cb390d69.js";const H={class:"flex flex-row justify-start w-full md:w-auto"},O={key:0,class:"p-2 mb-6 w-full rounded-md theme-color"},S={key:0},q=["src"],z={class:"flex flex-col"},F={class:"mb-2 text-lg font-bold"},G=["innerHTML"],K={class:"section-title"},Z={id:"lists"},J={__name:"redraws",setup(Q){const{oApiConfiguration:k,fetchOptions:h}=L(),m=V(k,h()),y=$(),{id:p}=y.params;A(()=>{x(),b()});const o=g({options:{loading:!0},data:{}}),b=async()=>{o.value.options.loading=!0;const[e,s]=await m.getWorkById(p);s||(o.value.data=e),o.value.options.loading=!1},t=g({options:{loading:!0,pagination:{page:0,perPage:24},isEmpty:!1},data:[],pagination:{}}),x=async()=>{t.value.options.pagination.page=0,await u()},E=async()=>{t.value.options.pagination.page+=1,await u()},u=async()=>{t.value.options.loading=!0;const[e,s,c]=await m.getRedraws({workId:p,pagination:{page:t.value.options.pagination.page,perPage:t.value.options.pagination.perPage}});c||(e.forEach(n=>{t.value.data.push(n)}),t.value.pagination=s,t.value.options.isEmpty=!1,s.record_total||(t.value.options.isEmpty=!0)),t.value.options.loading=!1};return(e,s)=>{const c=T;return r(),w(D,{"with-footer":!0,"hide-side":!0,"no-right-side":!0},{default:v(()=>[i("div",H,[i("a",{onClick:s[0]||(s[0]=M(n=>e.$router.back(),["prevent"])),class:"mb-4 light-button"},[l(B,{name:"i-typcn-arrow-back"}),C(" "+d(e.$t("back")),1)])]),a(o).options.loading?_("",!0):(r(),f("div",O,[l(c,{to:"/a/"+a(p),class:"flex flex-row gap-2"},{default:v(()=>[a(o).data.artwork_assets?(r(),f("div",S,[i("img",{preload:"",loading:"lazy",class:"w-40 rounded-md",src:e.artworkThumb(a(o).data.artwork_assets[0].bucket,a(o).data.artwork_assets[0].filename,"thumbnail",!1),onError:s[1]||(s[1]=(...n)=>e.imageLoadError&&e.imageLoadError(...n))},null,40,q)])):_("",!0),i("div",z,[i("span",F,d(a(o).data.title),1),i("p",{innerHTML:a(o).data.description.length>200?a(o).data.description.slice(0,200)+"..":a(o).description},null,8,G)])]),_:1},8,["to"])])),i("div",null,[i("div",K,d(e.$t("artworks.redraws")),1),i("div",Z,[(r(),w(R,null,[I(l(P,{"section-class":"work-grid",works:a(t).data,view:null,"hide-redraw-icon":!0},null,8,["works"]),[[N,!a(t).options.isEmpty]])],1024)),l(W,{class:"mb-2",loading:a(t).options.loading,empty:a(t).options.isEmpty,error:!1,fetch:u},null,8,["loading","empty"]),a(t).pagination.next_previous&&a(t).pagination.next_previous.next_page?(r(),f("button",{key:0,onClick:s[2]||(s[2]=n=>E()),class:"w-full primary-button"},d(e.$t("loadMore")),1)):_("",!0)])])]),_:1})}}},st=j(J,[["__scopeId","data-v-3b7f7b2a"]]);export{st as default};
