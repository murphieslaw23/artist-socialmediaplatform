import{k as _,l as B,m as b,a1 as k,p as A,r as x,L as C,c as y,w as m,o as c,b as n,I as w,u as s,t as p,q as T,V as M,U as E,aC as L,s as S,y as V}from"./entry.e59d1677.js";import{A as $}from"./ProBadge.e613df9a.js";import{L as j}from"./Layout.38bbd337.js";import"./_plugin-vue_export-helper.a1a6add7.js";function z(g,d){return{getAllTags:async l=>{var u,i;try{const{data:t}=await new $(g).getAllTags(typeof l.orderBy<"u"?l.orderBy:void 0,d);return[(u=t.data)==null?void 0:u.count,(i=t.data)==null?void 0:i.tags,null]}catch(t){return[null,null,_().consumeReadableStreamError(t)]}}}}const D={class:"flex flex-row gap-2 justify-center mb-4 w-full"},q={__name:"index",setup(g){const d=B(),{oApiConfiguration:f,fetchOptions:l}=_(),u=z(f,l()),i=b();k(()=>{d.loggedIn||i.push("/")}),A(()=>{h()});const t=x({total:0,data:[],options:{data:{orderBy:void 0},isError:!1}}),h=async()=>{const[e,o,a]=await u.getAllTags({orderBy:t.value.options.data.orderBy});a?t.value.options.isError=!0:(t.value.total=e,t.value.data=o)};C(()=>t.value.options.data.orderBy,()=>{v()});const v=()=>{t.value.options.data.orderBy=="count"?t.value.data=t.value.data.sort((o,a)=>a._count.artwork_has_tags-o._count.artwork_has_tags):t.value.data=t.value.data.sort((o,a)=>o.tag>a.tag?1:a.tag>o.tag?-1:0)};return(e,o)=>{const a=V;return c(),y(j,{"with-footer":!0,"hide-side":!0,"no-right-side":!0},{default:m(()=>[n("div",D,[n("button",{class:w(s(t).options.data.orderBy==null?"primary-button":"light-button"),onClick:o[0]||(o[0]=r=>s(t).options.data.orderBy=void 0)}," A-Z ",2),n("button",{class:w(s(t).options.data.orderBy=="count"?"primary-button":"light-button"),onClick:o[1]||(o[1]=r=>s(t).options.data.orderBy="count")},p(e.$t("tags.artworkCount")),3)]),n("div",{class:"grid grid-flow-col gap-3 mx-2",style:L(["grid-template-rows: repeat("+Math.round(s(t).total/(e.isMobile()?e.isMobileDevice()?1:2:4))+", minmax(0, 1fr))"])},[(c(!0),T(E,null,M(s(t).data,r=>(c(),y(a,{key:r.id,to:"/artworks/browse?tags="+r.tag.replaceAll(" ","+"),class:"flex flex-row justify-between p-2 w-full rounded-md cursor-pointer button-light hover:theme-colored hover:font-bold"},{default:m(()=>[S(p(r.tag)+" ",1),n("b",null,p(r._count.artwork_has_tags),1)]),_:2},1032,["to"]))),128))],4)]),_:1})}}};export{q as default};
