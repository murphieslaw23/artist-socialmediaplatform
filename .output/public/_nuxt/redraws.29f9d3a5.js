import{u as A,a as L}from"./nuxt-img.978eb1b8.js";import{k as B,O as M,m as R,r as f,c as w,w as v,o as r,u as a,p as u,e as i,x as _,q as n,t as m,a0 as $,b as C,v as I,y as D}from"./entry.e86746f3.js";import{L as N}from"./Layout.04566d95.js";import{W as P}from"./WorkList.0bfb6f77.js";import{_ as T}from"./LoadingEmptyErrorMessage.30f12734.js";import{_ as V}from"./_plugin-vue_export-helper.a1a6add7.js";import"./Spinner.cfab8439.js";const W={key:0,class:"p-2 mb-6 w-full rounded-md theme-color"},H={key:0},O={class:"flex flex-col"},S={class:"mb-2 text-lg font-bold"},q=["innerHTML"],z={class:"section-title"},F={id:"lists"},K={__name:"redraws",setup(j){const{oApiConfiguration:k,fetchOptions:h}=B(),g=A(k,h()),y=M(),{id:l}=y.params;R(()=>{x(),b()});const o=f({options:{loading:!0},data:{}}),b=async()=>{o.value.options.loading=!0;const[e,s]=await g.getWorkById(l);s||(o.value.data=e),o.value.options.loading=!1},t=f({options:{loading:!0,pagination:{page:0,perPage:24},isEmpty:!1},data:[],pagination:{}}),x=async()=>{t.value.options.pagination.page=0,await p()},E=async()=>{t.value.options.pagination.page+=1,await p()},p=async()=>{t.value.options.loading=!0;const[e,s,d]=await g.getRedraws({workId:l,pagination:{page:t.value.options.pagination.page,perPage:t.value.options.pagination.perPage}});d||(e.forEach(c=>{t.value.data.push(c)}),t.value.pagination=s,t.value.options.isEmpty=!1,s.record_total||(t.value.options.isEmpty=!0)),t.value.options.loading=!1};return(e,s)=>{const d=L,c=D;return r(),w(N,{"with-footer":!0,"hide-side":!0,"no-right-side":!0},{default:v(()=>[a(o).options.loading?_("",!0):(r(),u("div",W,[i(c,{to:"/a/"+a(l),class:"flex flex-row gap-2"},{default:v(()=>[a(o).data.artwork_assets?(r(),u("div",H,[i(d,{preload:"",loading:"lazy",class:"w-40 rounded-md",src:e.artworkThumb(a(o).data.artwork_assets[0].bucket,a(o).data.artwork_assets[0].filename,"thumbnail",!1),onError:e.imageLoadError},null,8,["src","onError"])])):_("",!0),n("div",O,[n("span",S,m(a(o).data.title),1),n("p",{innerHTML:a(o).data.description.length>200?a(o).data.description.slice(0,200)+"..":a(o).description},null,8,q)])]),_:1},8,["to"])])),n("div",null,[n("div",z,m(e.$t("artworks.redraws")),1),n("div",F,[(r(),w($,null,[C(i(P,{"section-class":"work-grid",works:a(t).data,view:null},null,8,["works"]),[[I,!a(t).options.isEmpty]])],1024)),i(T,{class:"mb-2",loading:a(t).options.loading,empty:a(t).options.isEmpty,error:!1,fetch:p},null,8,["loading","empty"]),a(t).pagination.next_previous&&a(t).pagination.next_previous.next_page?(r(),u("button",{key:0,onClick:s[0]||(s[0]=G=>E()),class:"w-full primary-button"},m(e.$t("loadMore")),1)):_("",!0)])])]),_:1})}}},at=V(K,[["__scopeId","data-v-44b40ba5"]]);export{at as default};
