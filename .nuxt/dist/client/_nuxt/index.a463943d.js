import{h as Q,i as U,X as Y,r as s,D as Z,I as J,o as x,c as ee,w as te,m as o,t as a,J as l,u as L,l as R,q as E,b as c,s as m,v as f,p as F,ao as oe,G as M,K as ae,L as ne}from"./entry.fc4220be.js";import{u as se,_ as I}from"./Icon.7928b8d2.js";import{L as le}from"./Layout.b986ff28.js";import{W as ie,M as re}from"./ModalView.7c3ba9df.js";import{_ as ue}from"./ErrorMessages.9a2b4b45.js";import{T as pe}from"./TagFilterSelection.671e439f.js";import{_ as de}from"./_plugin-vue_export-helper.a1a6add7.js";import"./Spinner.39585f84.js";import"./user-counters-api.b0bb9dce.js";import"./useFeed.754f0795.js";const ve=b=>(ae("data-v-9f74958e"),b=b(),ne(),b),ce={id:"lists"},me={class:"navigations"},fe={class:"title"},ge={class:"buttons"},we={class:"filter-buttons"},be={class:"filter-buttons"},ye={class:"filter-buttons"},he={class:"inline-block w-full md:w-40 group"},ke={class:"flex items-center py-2 px-3 w-full rounded-md outline-none md:w-40 theme-color hover:button focus:outline-none"},$e={class:"flex-1 pr-1"},_e=ve(()=>o("span",null,[o("svg",{class:"w-4 h-4 transition duration-150 ease-in-out transform fill-current group-hover:-rotate-180",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[o("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1)),Ce={class:"absolute z-10 mt-1 w-full text-center rounded-md transition duration-150 ease-in-out transform origin-top scale-0 md:w-40 theme-color group-hover:scale-100"},xe={key:0,class:"filter-buttons"},Me={class:"mt-4"},Se={key:0,class:"art-list-view-paging-control"},Pe={id:"popular-modal",class:"modal work-view"},Ne={__name:"index",setup(b){const S=Q(),{oApiConfiguration:z,fetchOptions:D}=U(),W=se(z,D());Y(()=>{i()});const g=s(void 0),$=async t=>{g.value=t,u.page=0,await i()},v=s("daily"),y=async t=>{v.value=t,u.page=0,await i()},P=s(null),q=()=>{P.value.init(oe(_.value)),M().openModal("tag-filter-selection-modal")},N=s(""),_=s(),C=s(0),G=async(t,e)=>{_.value=t,N.value=e,C.value=e!==""?e.split(",").length:0,u.page=0,M().closeModal("tag-filter-selection-modal"),await i()};Z(async()=>_.value,t=>{i()});const T=s([]),p=s({pagination:{enablePrev:!0,enableNext:!0}}),i=async()=>{const t=await K(),e=t.works,n=t.pagination;!e.length&&n.record_total===0?O():(T.value=e,n.next_previous.next_page===null?p.value.pagination.enableNext=!1:p.value.pagination.enableNext=!0,n.next_previous.prev_page===null?p.value.pagination.enablePrev=!1:p.value.pagination.enablePrev=!0)},r=s(!0),u=J({perPage:24,page:s(0)}),K=async()=>{u.page===0&&(r.value=!0);const[t,e]=await W.getMostPopular({pagination:{perPage:u.perPage,page:u.page},range:v.value,rangeMode:d.value,explicitMode:g.value,tags:N.value});if(e)X();else return j(),t},V=async t=>{t==="prev"?u.page-=1:u.page+=1,await i()},w=s(!1),O=()=>{w.value=!0},h=s(!1),X=()=>{r.value=!1,h.value=!0},j=()=>{r.value=!1,w.value=!1,h.value=!1},A=s(null),H=(t,e=!1)=>{A.value.view(t,e),M().openModal("popular-modal")},d=s("none"),B=s(""),k=async(t,e)=>{d.value=t,B.value=e,await i()};return(t,e)=>(x(),ee(le,{"with-footer":!0,"hide-side":!0,"no-right-side":!0},{default:te(()=>[o("div",ce,[o("div",me,[o("div",fe,a(t.$t("artworks.popularArtworks")),1),o("div",ge,[o("div",we,[o("button",{class:l(["px-3 rounded-md button-item",C.value?"button":"theme-color"]),onClick:q},a(C.value)+" "+a(t.$t("tagsApplied")),3)]),o("div",be,[o("p",{class:l(["rounded-l-md button-item",[v.value==="daily"?"button":"theme-color"]]),onClick:e[0]||(e[0]=n=>y("daily"))},a(t.$t("daily")),3),o("p",{class:l(["button-item",[v.value==="weekly"?"button":"theme-color"]]),onClick:e[1]||(e[1]=n=>y("weekly"))},a(t.$t("weekly")),3),o("p",{class:l(["button-item",[v.value==="monthly"?"button":"theme-color"]]),onClick:e[2]||(e[2]=n=>y("monthly"))},a(t.$t("monthly")),3),o("p",{class:l(["rounded-r-md button-item",[v.value==="all"?"button":"theme-color"]]),onClick:e[3]||(e[3]=n=>y("all"))},a(t.$t("allTime")),3)]),o("div",ye,[o("div",he,[o("button",ke,[o("span",$e,a(d.value==="none"?t.$t("default"):B.value),1),_e]),o("ul",Ce,[o("li",{class:l(["py-2 px-3 rounded-t-md cursor-pointer hover:button",{button:d.value==="none"}]),onClick:e[4]||(e[4]=n=>k("none",t.$t("default")))},a(t.$t("default")),3),o("li",{class:l(["py-2 px-3 cursor-pointer hover:button",{button:d.value==="views"}]),onClick:e[5]||(e[5]=n=>k("views",t.$t("mostViewed")))},a(t.$t("mostViewed")),3),o("li",{class:l(["py-2 px-3 cursor-pointer hover:button",{button:d.value==="likes"}]),onClick:e[6]||(e[6]=n=>k("likes",t.$t("mostLiked")))},a(t.$t("mostLiked")),3),o("li",{class:l(["py-2 px-3 rounded-b-md cursor-pointer hover:button",{button:d.value==="comments"}]),onClick:e[7]||(e[7]=n=>k("comments",t.$t("mostCommented")))},a(t.$t("mostCommented")),3)])])]),L(S).loggedIn&&L(S).user.user_settings.show_explicit?(x(),R("div",xe,[o("p",{class:l(["rounded-l-md button-item",[g.value===void 0?"button":"theme-color"]]),onClick:e[8]||(e[8]=n=>$(void 0))},a(t.$t("default")),3),o("p",{class:l(["button-item",[g.value==="safe"?"button":"theme-color"]]),onClick:e[9]||(e[9]=n=>$("safe"))},a(t.$t("safe")),3),o("p",{class:l(["rounded-r-md button-item",[g.value==="explicit"?"button":"theme-color"]]),onClick:e[10]||(e[10]=n=>$("explicit"))},a(t.$t("explicit")),3)])):E("",!0)])]),c(ue,{loading:r.value,empty:w.value,error:h.value,fetch:i},null,8,["loading","empty","error"]),m(o("div",Me,[m(c(ie,{"section-class":"work-grid",works:T.value,view:H},null,8,["works"]),[[f,!w.value]])],512),[[f,!r.value]]),!r.value&&!w.value&&!h.value?(x(),R("div",Se,[m(o("button",{class:l(["primary-button",{"mr-2":p.value.pagination.enableNext}]),onClick:e[11]||(e[11]=n=>V("prev"))},[c(I,{name:"i-ion-chevron-back-outline"}),F(" "+a(t.$t("pagination.previous")),1)],2),[[f,p.value.pagination.enablePrev]]),m(o("button",{class:"primary-button",onClick:e[12]||(e[12]=n=>V("next"))},[F(a(t.$t("pagination.next"))+" ",1),c(I,{name:"i-ion-chevron-forward-outline",class:"ml-2",style:{"margin-right":"0 !important"}})],512),[[f,p.value.pagination.enableNext]])])):E("",!0),o("div",Pe,[m(c(re,{ref_key:"popularModalViewRef",ref:A,section:"popular"},null,512),[[f,!r.value]])]),m(c(pe,{id:"tag-filter-selection-modal",ref_key:"tagFilterSelectionModalRef",ref:P,class:"modal",onApply:G},null,512),[[f,!r.value]])])]),_:1}))}},De=de(Ne,[["__scopeId","data-v-9f74958e"]]);export{De as default};
