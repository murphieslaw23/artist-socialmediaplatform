import{j as D,i as Q,T as W,D as G,r as n,a3 as X,o as U,m as L,p as e,t as l,b as m,v as b,u as V,J as u,e as g,K as A,q as B,s as O,G as ce,L as Z,M as ee,C as de,a as ve,U as pe,V as fe,c as te,w as oe,F as H,aF as me,aG as ge,x as we,k as be,l as he,E as ke,Y as ye}from"./entry.879fa290.js";import{L as _e}from"./Layout.b50292ba.js";import{u as $e}from"./useArtwork.23f2471a.js";import{W as xe,M as Ce}from"./ModalView.20a27763.js";import{_ as se}from"./LoadingEmptyErrorMessage.c774b096.js";import{_ as R}from"./_plugin-vue_export-helper.a1a6add7.js";import{u as ae}from"./useUser.c1a51eb5.js";import"./Spinner.cf543d74.js";import"./user-counters-api.55343b8b.js";import"./useFeed.ea08ed29.js";const ne=k=>(Z("data-v-fe4c7d44"),k=k(),ee(),k),Me={class:"navigations"},Pe={class:"title"},Ue={class:"buttons"},Ae={class:"filter-buttons"},Ne={class:"filter-buttons"},qe={key:0,class:"filter-buttons"},Ee={class:"navigations"},Le=ne(()=>e("div",null,null,-1)),Ie={class:"buttons"},Se={class:"filter-buttons"},Ve={class:"filter-buttons"},Be={class:"inline-block w-full md:w-40 group"},Fe={class:"flex items-center py-2 px-3 w-full rounded-md outline-none md:w-40 theme-color hover:button focus:outline-none"},Te={class:"flex-1 pr-1"},ze=ne(()=>e("span",null,[e("svg",{class:"w-4 h-4 transition duration-150 ease-in-out transform fill-current group-hover:-rotate-180",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})])],-1)),Oe={class:"absolute z-10 mt-1 w-full text-center rounded-md transition duration-150 ease-in-out transform origin-top scale-0 md:w-40 theme-color group-hover:scale-100"},Re={class:"mt-4"},je={key:0,class:"art-list-view-paging-control"},De={id:"popular-modal",class:"modal work-view"},We={__name:"Artworks",emits:["countArtworks"],setup(k,{emit:w}){const{oApiConfiguration:N,fetchOptions:q}=D(),E=$e(N,q()),_=Q(),$=W(),{q:y}=$.query;G(()=>$.query.q,(o,t)=>{o!==t&&(h.value=o,x())});const h=n(y);X(()=>{x()});const d=n("recent"),r=async o=>{d.value=o,await x()},s=n(void 0),p=async o=>{s.value=o,v.value.page=0,await x()},a=n("daily"),M=async o=>{a.value=o,v.value.page=0,await x()},f=n(!1),j=async()=>{f.value=!f.value,v.value.page=0,await x()},I=n([]),P=n({pagination:{enablePrev:!0,enableNext:!0}}),x=async()=>{const o=await C(),t=o.works,i=o.pagination;!t.length&&i.record_total===0?le():(I.value=t,i.next_previous.next_page===null?P.value.pagination.enableNext=!1:P.value.pagination.enableNext=!0,i.next_previous.prev_page===null?P.value.pagination.enablePrev=!1:P.value.pagination.enablePrev=!0,w("countArtworks",i.record_total))},c=n(!0),v=n({perPage:18,page:n(0)}),C=async()=>{var i;v.value.page===0&&(c.value=!0,F.value=!1);const[o,t]=await E.getSearch({recentMode:d.value==="recent",range:a.value,rangeMode:S.value,explicitMode:s.value,keyword:(i=h.value)!=null?i:"",followingOnly:f.value,pagination:{perPage:v.value.perPage,page:v.value.page}});if(t)re();else return ie(),o},K=async o=>{o==="prev"?v.value.page-=1:v.value.page+=1,await x()},F=n(!1),le=()=>{F.value=!0,w("countArtworks",0)},T=n(!1),re=()=>{c.value=!1,T.value=!0},ie=()=>{c.value=!1,F.value=!1,T.value=!1},J=n(null),ue=(o,t=!1)=>{J.value.view(o,t),ce().openModal("popular-modal")},S=n("none"),Y=n(""),z=async(o,t)=>{S.value=o,Y.value=t,await x()};return(o,t)=>(U(),L("div",null,[e("div",Me,[e("div",Pe,l(o.$t("artworks.artworks")),1),e("div",Ue,[m(e("div",Ae,[e("button",{class:u(["px-3 rounded-md button-item",f.value?"button":"theme-color"]),onClick:t[0]||(t[0]=i=>j())},[m(g(A,{name:"i-fluent-people-checkmark-24-regular",class:"text-white"},null,512),[[b,f.value]]),m(g(A,{name:"i-fluent-people-checkmark-24-regular"},null,512),[[b,!f.value]]),B(" "+l(o.$t("following")),1)],2)],512),[[b,V(_).loggedIn]]),e("div",Ne,[e("p",{class:u(["rounded-l-md button-item",[d.value==="recent"?"button":"theme-color"]]),onClick:t[1]||(t[1]=i=>r("recent"))},l(o.$t("artworks.recent")),3),e("p",{class:u(["rounded-r-md button-item",[d.value==="popularity"?"button":"theme-color"]]),onClick:t[2]||(t[2]=i=>r("popularity"))},l(o.$t("artworks.mostPopular")),3)]),V(_).loggedIn&&V(_).user.user_settings.show_explicit?(U(),L("div",qe,[e("p",{class:u(["rounded-l-md button-item",[s.value===void 0?"button":"theme-color"]]),onClick:t[3]||(t[3]=i=>p(void 0))},l(o.$t("default")),3),e("p",{class:u(["button-item",[s.value==="safe"?"button":"theme-color"]]),onClick:t[4]||(t[4]=i=>p("safe"))},l(o.$t("safe")),3),e("p",{class:u(["rounded-r-md button-item",[s.value==="explicit"?"button":"theme-color"]]),onClick:t[5]||(t[5]=i=>p("explicit"))},l(o.$t("explicit")),3)])):O("",!0)])]),e("div",Ee,[Le,e("div",Ie,[m(e("div",Se,[e("p",{class:u(["rounded-l-md button-item",[a.value==="daily"?"button":"theme-color"]]),onClick:t[6]||(t[6]=i=>M("daily"))},l(o.$t("daily")),3),e("p",{class:u(["button-item",[a.value==="weekly"?"button":"theme-color"]]),onClick:t[7]||(t[7]=i=>M("weekly"))},l(o.$t("weekly")),3),e("p",{class:u(["button-item",[a.value==="monthly"?"button":"theme-color"]]),onClick:t[8]||(t[8]=i=>M("monthly"))},l(o.$t("monthly")),3),e("p",{class:u(["rounded-r-md button-item",[a.value==="all"?"button":"theme-color"]]),onClick:t[9]||(t[9]=i=>M("all"))},l(o.$t("allTime")),3)],512),[[b,d.value==="popularity"]]),m(e("div",Ve,[e("div",Be,[e("button",Fe,[e("span",Te,l(S.value==="none"?o.$t("default"):Y.value),1),ze]),e("ul",Oe,[e("li",{class:u(["py-2 px-3 rounded-t-md cursor-pointer hover:button",{button:S.value==="none"}]),onClick:t[10]||(t[10]=i=>z("none",o.$t("default")))},l(o.$t("default")),3),e("li",{class:u(["py-2 px-3 cursor-pointer hover:button",{button:S.value==="views"}]),onClick:t[11]||(t[11]=i=>z("views",o.$t("mostViewed")))},l(o.$t("mostViewed")),3),e("li",{class:u(["py-2 px-3 cursor-pointer hover:button",{button:S.value==="likes"}]),onClick:t[12]||(t[12]=i=>z("likes",o.$t("mostLiked")))},l(o.$t("mostLiked")),3),e("li",{class:u(["py-2 px-3 rounded-b-md cursor-pointer hover:button",{button:S.value==="comments"}]),onClick:t[13]||(t[13]=i=>z("comments",o.$t("mostCommented")))},l(o.$t("mostCommented")),3)])])],512),[[b,d.value==="popularity"]])])]),g(se,{loading:c.value,empty:F.value,error:T.value,fetch:x},null,8,["loading","empty","error"]),m(e("div",Re,[m(g(xe,{"section-class":"work-grid",works:I.value,view:ue},null,8,["works"]),[[b,!F.value]])],512),[[b,!c.value]]),!c.value&&!F.value&&!T.value?(U(),L("div",je,[e("button",{class:u(["w-full md:w-auto",[P.value.pagination.enablePrev?"primary-button":"disabled-button"]]),onClick:t[14]||(t[14]=i=>P.value.pagination.enablePrev?K("prev"):null)},[g(A,{name:"i-ion-chevron-back-outline"}),B(" "+l(o.$t("pagination.previous")),1)],2),e("button",{class:u(["w-full md:w-auto",P.value.pagination.enableNext?"primary-button":"disabled-button"]),onClick:t[15]||(t[15]=i=>P.value.pagination.enableNext?K("next"):null)},[B(l(o.$t("pagination.next"))+" ",1),g(A,{name:"i-ion-chevron-forward-outline",class:"ml-2",style:{"margin-right":"0 !important"}})],2)])):O("",!0),e("div",De,[m(g(Ce,{ref_key:"popularModalViewRef",ref:J,section:"popular"},null,512),[[b,!c.value]])])]))}},Ge=R(We,[["__scopeId","data-v-fe4c7d44"]]),Ke={class:"grid grid-cols-1 gap-4 mb-4 w-full md:grid-cols-2 lg:grid-cols-4"},Je={class:"flex flex-row w-full"},Ye=["src"],He={class:"flex flex-col justify-between p-3 w-full text-white"},Qe={class:"flex flex-col"},Xe={class:"font-bold"},Ze={class:"text-xxs"},et={class:"flex flex-row w-full"},tt={key:0,class:"flex flex-row"},ot=["onClick"],st=["onMouseover","onClick"],at={__name:"UserList",props:{users:{type:Array,default:()=>{}}},setup(k){const w=k,N=Q(),{oApiConfiguration:q,fetchOptions:E}=D(),_=ae(q,E()),$=de(()=>w.users);ve();const y=n(0),h=async(r,s)=>{const[p,a]=await _.follow(s);a||($.value[r].is_following=!0)},d=async(r,s)=>{const[p,a]=await _.unfollow(s);a||($.value[r].is_following=!1)};return(r,s)=>{const p=we;return U(),L("div",Ke,[(U(!0),L(pe,null,fe(V($),(a,M)=>(U(),te(p,{key:a.id,to:"/profile/"+a.username,class:"flex object-cover flex-row rounded-md shadow-lg cursor-pointer theme-color-secondary hover:shadow-xl",style:me(a.cover_bucket&&a.cover_filename?"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+r.avatarCoverUrl(a.cover_bucket,a.cover_filename)+");background-size:cover;":"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+V(ge)+");background-size:cover;")},{default:oe(()=>[e("div",Je,[e("img",{src:r.avatarCoverUrl(a.avatar_bucket,a.avatar_filename),class:"avatar",onError:s[0]||(s[0]=(...f)=>r.imageLoadError&&r.imageLoadError(...f))},null,40,Ye),e("div",He,[e("div",Qe,[e("span",Xe,l(a.name),1),e("span",Ze,l(a.pen_name),1)]),e("div",et,[V(N).loggedIn&&a.id!==V(N).user.id?(U(),L("div",tt,[m(e("div",{class:"flex flex-row",onClick:H(f=>h(M,a.id),["prevent"])},[g(A,{name:"i-ri-user-add-fill",class:"text-gray-300 hover:text-white"})],8,ot),[[b,!a.is_following]]),m(e("div",{class:"flex flex-row",onMouseover:f=>y.value=a.id,onMouseout:s[1]||(s[1]=f=>y.value=0),onClick:H(f=>d(M,a.id),["prevent"])},[m(g(A,{name:"i-ri-user-follow-fill",class:"text-green-400"},null,512),[[b,y.value!==a.id]]),m(g(A,{name:"i-ri-user-unfollow-fill",class:"text-red-400 hover:text-red-400"},null,512),[[b,y.value&&y.value===a.id]])],40,st),[[b,a.is_following]])])):O("",!0)])])])]),_:2},1032,["to","style"]))),128))])}}},nt=R(at,[["__scopeId","data-v-ba38663d"]]),lt=k=>(Z("data-v-473a068f"),k=k(),ee(),k),rt={class:"navigations"},it={class:"title"},ut=lt(()=>e("div",{class:"buttons"},null,-1)),ct={key:0,class:"art-list-view-paging-control"},dt={__name:"Users",emits:["countUsers"],setup(k,{emit:w}){const{oApiConfiguration:N,fetchOptions:q}=D(),E=ae(N,q()),_=W(),{q:$}=_.query;G(()=>_.query.q,(c,v)=>{c!==v&&(y.value=c,r())});const y=n($);X(()=>{r()});const h=n([]),d=n({pagination:{enablePrev:!0,enableNext:!0}}),r=async()=>{const c=await a(),v=c.users,C=c.pagination;!v.length&&C.record_total===0?j():(h.value=v,C.next_previous.next_page===null?d.value.pagination.enableNext=!1:d.value.pagination.enableNext=!0,C.next_previous.prev_page===null?d.value.pagination.enablePrev=!1:d.value.pagination.enablePrev=!0,w("countUsers",C.record_total))},s=n(!0),p=n({perPage:16,page:n(0)}),a=async()=>{var C;p.value.page===0&&(s.value=!0,f.value=!1);const[c,v]=await E.searchUsers({keyword:(C=y.value)!=null?C:"",pagination:{page:p.value.page,perPage:p.value.perPage}});if(v)P();else return x(),c},M=async c=>{c==="prev"?p.value.page-=1:p.value.page+=1,await r()},f=n(!1),j=()=>{f.value=!0,w("countUsers",0)},I=n(!1),P=()=>{s.value=!1,I.value=!0},x=()=>{s.value=!1,f.value=!1,I.value=!1};return(c,v)=>(U(),L("div",null,[e("div",rt,[e("div",it,l(c.$t("users.users")),1),ut]),g(se,{loading:s.value,empty:f.value,error:I.value,fetch:r},null,8,["loading","empty","error"]),m(e("div",null,[m(g(nt,{users:h.value},null,8,["users"]),[[b,!f.value]])],512),[[b,!s.value]]),!s.value&&!f.value&&!I.value?(U(),L("div",ct,[e("button",{class:u(["w-full md:w-auto",[d.value.pagination.enablePrev?"primary-button":"disabled-button"]]),onClick:v[0]||(v[0]=C=>d.value.pagination.enablePrev?M("prev"):null)},[g(A,{name:"i-ion-chevron-back-outline"}),B(" "+l(c.$t("pagination.previous")),1)],2),e("button",{class:u(["w-full md:w-auto",d.value.pagination.enableNext?"primary-button":"disabled-button"]),onClick:v[1]||(v[1]=C=>d.value.pagination.enableNext?M("next"):null)},[B(l(c.$t("pagination.next"))+" ",1),g(A,{name:"i-ion-chevron-forward-outline",class:"ml-2",style:{"margin-right":"0 !important"}})],2)])):O("",!0)]))}},vt=R(dt,[["__scopeId","data-v-473a068f"]]);const pt={id:"lists"},ft={class:"search"},mt=["placeholder"],gt={class:"flex flex-row mb-6 w-full"},wt={__name:"index",setup(k){const w=n("artworks"),N=be(),q=W();he(()=>{h.value=q.query.q});const E=n(0),_=r=>{E.value=r},$=n(0),y=r=>{$.value=r},h=n("");G(()=>q.query,({q:r})=>{h.value=r});const d=()=>{N.push({path:"/search",query:{q:h.value},replace:!0,force:!0})};return(r,s)=>(U(),te(_e,{"with-footer":!0,"hide-side":!0,"no-right-side":!0},{default:oe(()=>[e("div",pt,[e("span",ft,[m(e("input",{"onUpdate:modelValue":s[0]||(s[0]=p=>h.value=p),type:"text",name:"search",placeholder:r.$t("search"),onKeyup:s[1]||(s[1]=ye(p=>d(),["enter"]))},null,40,mt),[[ke,h.value]]),e("span",{class:"search-button",onClick:s[2]||(s[2]=p=>d())},[g(A,{name:"i-ion-search"})])]),e("div",gt,[e("div",{class:u(["rounded-lg profile-category-button left-menu-link theme-color-secondary",{"button-color text-white":w.value==="artworks"}]),onClick:s[3]||(s[3]=p=>w.value="artworks")},[B(l(r.$t("artworks.artworks"))+" ",1),e("span",{class:u(["px-1 ml-2 rounded",w.value==="artworks"?"theme-color":"bg-gray-600 text-white"])},l(E.value),3)],2),e("div",{class:u(["rounded-lg profile-category-button left-menu-link theme-color-secondary",{"button-color text-white":w.value==="users"}]),onClick:s[4]||(s[4]=p=>w.value="users")},[B(l(r.$t("users.users"))+" ",1),e("span",{class:u(["px-1 ml-2 rounded",w.value==="users"?"theme-color":"bg-gray-600 text-white"])},l($.value),3)],2)]),m(e("div",null,[g(Ge,{onCountArtworks:_})],512),[[b,w.value==="artworks"]]),m(e("div",null,[g(vt,{onCountUsers:y})],512),[[b,w.value==="users"]])])]),_:1}))}},Ut=R(wt,[["__scopeId","data-v-b699a709"]]);export{Ut as default};
