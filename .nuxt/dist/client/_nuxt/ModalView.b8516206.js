import{B as vt,f as z,h as W,R as F,a0 as Kt,a1 as Xt,r as k,u as O,C as Ue,a2 as Zt,l as Se,S as ea,O as ta,D as Ve,T as ft,o as b,m as _,p as r,e as x,w as K,q as B,t as g,b as $,v as R,s as P,F as pe,J as D,U as he,V as ve,x as Pe,i as Te,k as aa,c as ce,j as Ce,I as Je,K as V,E as Re,G as X,L as wt,M as yt,H as gt,a3 as sa,a as oa,a4 as rt,a5 as la,a6 as na,a7 as ra}from"./entry.92edb670.js";import{u as bt}from"./useArtwork.e93c25cb.js";import{_ as Ee,u as kt}from"./LoadingEmptyErrorMessage.28898bf3.js";import{_ as fe}from"./_plugin-vue_export-helper.a1a6add7.js";import{S as Ye}from"./Spinner.57763af3.js";import{U as qe}from"./user-counters-api.aee5a618.js";import{u as ia}from"./useFeed.90fc3bf2.js";const ue=function(o){return{addWorkToAlbum:async(e,t={})=>{const s="/albums/add-work",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"POST",...l,...t},c={},m={};c["Content-Type"]="application/json";const u=new URLSearchParams(a.search);for(const h in m)u.set(h,m[h]);for(const h in t.params)u.set(h,t.params[h]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};n.headers={...c,...v,...t.headers};const d=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=d?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},createAlbum:async(e,t={})=>{const s="/albums/create",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"POST",...l,...t},c={},m={};c["Content-Type"]="application/json";const u=new URLSearchParams(a.search);for(const h in m)u.set(h,m[h]);for(const h in t.params)u.set(h,t.params[h]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};n.headers={...c,...v,...t.headers};const d=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=d?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},deleteAlbum:async(e,t={})=>{if(e==null)throw new F("id","Required parameter id was null or undefined when calling deleteAlbum.");const s="/albums/{id}".replace("{id}",encodeURIComponent(String(e))),a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"DELETE",...l,...t},c={},m={},u=new URLSearchParams(a.search);for(const d in m)u.set(d,m[d]);for(const d in t.params)u.set(d,t.params[d]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};return n.headers={...c,...v,...t.headers},{url:a.pathname+a.search+a.hash,options:n}},getAlbumById:async(e,t={})=>{if(e==null)throw new F("id","Required parameter id was null or undefined when calling getAlbumById.");const s="/albums/{id}".replace("{id}",encodeURIComponent(String(e))),a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"GET",...l,...t},c={},m={},u=new URLSearchParams(a.search);for(const d in m)u.set(d,m[d]);for(const d in t.params)u.set(d,t.params[d]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};return n.headers={...c,...v,...t.headers},{url:a.pathname+a.search+a.hash,options:n}},getAlbumItems:async(e,t,s,a={})=>{if(e==null)throw new F("id","Required parameter id was null or undefined when calling getAlbumItems.");if(t==null)throw new F("perPage","Required parameter perPage was null or undefined when calling getAlbumItems.");if(s==null)throw new F("page","Required parameter page was null or undefined when calling getAlbumItems.");const l="/albums/list/{id}".replace("{id}",encodeURIComponent(String(e))),n=new URL(l,"https://example.com");let c;o&&(c=o.baseOptions);const m={method:"GET",...c,...a},u={},v={};t!==void 0&&(v.per_page=t),s!==void 0&&(v.page=s);const d=new URLSearchParams(n.search);for(const y in v)d.set(y,v[y]);for(const y in a.params)d.set(y,a.params[y]);n.search=new URLSearchParams(d).toString();let h=c&&c.headers?c.headers:{};return m.headers={...u,...h,...a.headers},{url:n.pathname+n.search+n.hash,options:m}},getCurrentAlbumSaveInfo:async(e,t,s={})=>{if(e==null)throw new F("type","Required parameter type was null or undefined when calling getCurrentAlbumSaveInfo.");if(t==null)throw new F("workId","Required parameter workId was null or undefined when calling getCurrentAlbumSaveInfo.");const a="/albums/current/{type}/{work_id}".replace("{type}",encodeURIComponent(String(e))).replace("{work_id}",encodeURIComponent(String(t))),l=new URL(a,"https://example.com");let n;o&&(n=o.baseOptions);const c={method:"GET",...n,...s},m={},u={},v=new URLSearchParams(l.search);for(const h in u)v.set(h,u[h]);for(const h in s.params)v.set(h,s.params[h]);l.search=new URLSearchParams(v).toString();let d=n&&n.headers?n.headers:{};return c.headers={...m,...d,...s.headers},{url:l.pathname+l.search+l.hash,options:c}},listUserAlbums:async(e,t,s,a,l={})=>{if(e==null)throw new F("userId","Required parameter userId was null or undefined when calling listUserAlbums.");if(t==null)throw new F("perPage","Required parameter perPage was null or undefined when calling listUserAlbums.");if(s==null)throw new F("page","Required parameter page was null or undefined when calling listUserAlbums.");if(a==null)throw new F("type","Required parameter type was null or undefined when calling listUserAlbums.");const n="/albums/user/{userId}".replace("{userId}",encodeURIComponent(String(e))),c=new URL(n,"https://example.com");let m;o&&(m=o.baseOptions);const u={method:"GET",...m,...l},v={},d={};t!==void 0&&(d.per_page=t),s!==void 0&&(d.page=s),a!==void 0&&(d.type=a);const h=new URLSearchParams(c.search);for(const i in d)h.set(i,d[i]);for(const i in l.params)h.set(i,l.params[i]);c.search=new URLSearchParams(h).toString();let y=m&&m.headers?m.headers:{};return u.headers={...v,...y,...l.headers},{url:c.pathname+c.search+c.hash,options:u}},removeWorkFromAlbum:async(e,t={})=>{const s="/albums/work/remove",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"DELETE",...l,...t},c={},m={};c["Content-Type"]="application/json";const u=new URLSearchParams(a.search);for(const h in m)u.set(h,m[h]);for(const h in t.params)u.set(h,t.params[h]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};n.headers={...c,...v,...t.headers};const d=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=d?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},updateAlbum:async(e,t={})=>{const s="/albums",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"PATCH",...l,...t},c={},m={};c["Content-Type"]="application/json";const u=new URLSearchParams(a.search);for(const h in m)u.set(h,m[h]);for(const h in t.params)u.set(h,t.params[h]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};n.headers={...c,...v,...t.headers};const d=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=d?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}}}},de=function(o){return{async addWorkToAlbum(e,t){const s=await ue(o).addWorkToAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async createAlbum(e,t){const s=await ue(o).createAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async deleteAlbum(e,t){const s=await ue(o).deleteAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async getAlbumById(e,t){const s=await ue(o).getAlbumById(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async getAlbumItems(e,t,s,a){const l=await ue(o).getAlbumItems(e,t,s,a);return(n=z,c=W)=>{const m={...l.options,url:c+l.url};return n.request(m)}},async getCurrentAlbumSaveInfo(e,t,s){const a=await ue(o).getCurrentAlbumSaveInfo(e,t,s);return(l=z,n=W)=>{const c={...a.options,url:n+a.url};return l.request(c)}},async listUserAlbums(e,t,s,a,l){const n=await ue(o).listUserAlbums(e,t,s,a,l);return(c=z,m=W)=>{const u={...n.options,url:m+n.url};return c.request(u)}},async removeWorkFromAlbum(e,t){const s=await ue(o).removeWorkFromAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async updateAlbum(e,t){const s=await ue(o).updateAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}}}};class me extends vt{async addWorkToAlbum(e,t){return de(this.configuration).addWorkToAlbum(e,t).then(s=>s(this.axios,this.basePath))}async createAlbum(e,t){return de(this.configuration).createAlbum(e,t).then(s=>s(this.axios,this.basePath))}async deleteAlbum(e,t){return de(this.configuration).deleteAlbum(e,t).then(s=>s(this.axios,this.basePath))}async getAlbumById(e,t){return de(this.configuration).getAlbumById(e,t).then(s=>s(this.axios,this.basePath))}async getAlbumItems(e,t,s,a){return de(this.configuration).getAlbumItems(e,t,s,a).then(l=>l(this.axios,this.basePath))}async getCurrentAlbumSaveInfo(e,t,s){return de(this.configuration).getCurrentAlbumSaveInfo(e,t,s).then(a=>a(this.axios,this.basePath))}async listUserAlbums(e,t,s,a,l){return de(this.configuration).listUserAlbums(e,t,s,a,l).then(n=>n(this.axios,this.basePath))}async removeWorkFromAlbum(e,t){return de(this.configuration).removeWorkFromAlbum(e,t).then(s=>s(this.axios,this.basePath))}async updateAlbum(e,t){return de(this.configuration).updateAlbum(e,t).then(s=>s(this.axios,this.basePath))}}const oe=function(o){return{addItemForLater:async(e,t,s={})=>{if(e==null)throw new F("type","Required parameter type was null or undefined when calling addItemForLater.");const a="/collections/later",l=new URL(a,"https://example.com");let n;o&&(n=o.baseOptions);const c={method:"POST",...n,...s},m={},u={};e!==void 0&&(u.type=e),m["Content-Type"]="application/json";const v=new URLSearchParams(l.search);for(const y in u)v.set(y,u[y]);for(const y in s.params)v.set(y,s.params[y]);l.search=new URLSearchParams(v).toString();let d=n&&n.headers?n.headers:{};c.headers={...m,...d,...s.headers};const h=typeof t!="string"||c.headers["Content-Type"]==="application/json";return c.data=h?JSON.stringify(t!==void 0?t:{}):t||"",{url:l.pathname+l.search+l.hash,options:c}},addItemToCollection:async(e,t,s,a={})=>{if(e==null)throw new F("type","Required parameter type was null or undefined when calling addItemToCollection.");if(t==null)throw new F("collectionId","Required parameter collectionId was null or undefined when calling addItemToCollection.");const l="/collections/{collectionId}/items".replace("{collectionId}",encodeURIComponent(String(t))),n=new URL(l,"https://example.com");let c;o&&(c=o.baseOptions);const m={method:"POST",...c,...a},u={},v={};e!==void 0&&(v.type=e),u["Content-Type"]="application/json";const d=new URLSearchParams(n.search);for(const i in v)d.set(i,v[i]);for(const i in a.params)d.set(i,a.params[i]);n.search=new URLSearchParams(d).toString();let h=c&&c.headers?c.headers:{};m.headers={...u,...h,...a.headers};const y=typeof s!="string"||m.headers["Content-Type"]==="application/json";return m.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:n.pathname+n.search+n.hash,options:m}},collectionsIdDelete:async(e,t={})=>{if(e==null)throw new F("id","Required parameter id was null or undefined when calling collectionsIdDelete.");const s="/collections/{id}".replace("{id}",encodeURIComponent(String(e))),a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"DELETE",...l,...t},c={},m={},u=new URLSearchParams(a.search);for(const d in m)u.set(d,m[d]);for(const d in t.params)u.set(d,t.params[d]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};return n.headers={...c,...v,...t.headers},{url:a.pathname+a.search+a.hash,options:n}},countUserCollectionsByType:async(e,t={})=>{const s="/collections/count",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"POST",...l,...t},c={},m={};c["Content-Type"]="application/json";const u=new URLSearchParams(a.search);for(const h in m)u.set(h,m[h]);for(const h in t.params)u.set(h,t.params[h]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};n.headers={...c,...v,...t.headers};const d=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=d?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},create:async(e,t={})=>{const s="/collections/create",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"POST",...l,...t},c={},m={};c["Content-Type"]="application/json";const u=new URLSearchParams(a.search);for(const h in m)u.set(h,m[h]);for(const h in t.params)u.set(h,t.params[h]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};n.headers={...c,...v,...t.headers};const d=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=d?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},detail:async(e,t={})=>{if(e==null)throw new F("id","Required parameter id was null or undefined when calling detail.");const s="/collections/{id}".replace("{id}",encodeURIComponent(String(e))),a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"GET",...l,...t},c={},m={},u=new URLSearchParams(a.search);for(const d in m)u.set(d,m[d]);for(const d in t.params)u.set(d,t.params[d]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};return n.headers={...c,...v,...t.headers},{url:a.pathname+a.search+a.hash,options:n}},getCurrentSaveInfo:async(e,t,s={})=>{if(e==null)throw new F("type","Required parameter type was null or undefined when calling getCurrentSaveInfo.");if(t==null)throw new F("workId","Required parameter workId was null or undefined when calling getCurrentSaveInfo.");const a="/collections/current/{type}/{work_id}".replace("{type}",encodeURIComponent(String(e))).replace("{work_id}",encodeURIComponent(String(t))),l=new URL(a,"https://example.com");let n;o&&(n=o.baseOptions);const c={method:"GET",...n,...s},m={},u={},v=new URLSearchParams(l.search);for(const h in u)v.set(h,u[h]);for(const h in s.params)v.set(h,s.params[h]);l.search=new URLSearchParams(v).toString();let d=n&&n.headers?n.headers:{};return c.headers={...m,...d,...s.headers},{url:l.pathname+l.search+l.hash,options:c}},listCollectionItems:async(e,t,s,a={})=>{if(e==null)throw new F("id","Required parameter id was null or undefined when calling listCollectionItems.");if(t==null)throw new F("perPage","Required parameter perPage was null or undefined when calling listCollectionItems.");if(s==null)throw new F("page","Required parameter page was null or undefined when calling listCollectionItems.");const l="/collections/{id}/items".replace("{id}",encodeURIComponent(String(e))),n=new URL(l,"https://example.com");let c;o&&(c=o.baseOptions);const m={method:"GET",...c,...a},u={},v={};t!==void 0&&(v.per_page=t),s!==void 0&&(v.page=s);const d=new URLSearchParams(n.search);for(const y in v)d.set(y,v[y]);for(const y in a.params)d.set(y,a.params[y]);n.search=new URLSearchParams(d).toString();let h=c&&c.headers?c.headers:{};return m.headers={...u,...h,...a.headers},{url:n.pathname+n.search+n.hash,options:m}},listUserCollections:async(e,t,s,a,l,n={})=>{if(e==null)throw new F("userId","Required parameter userId was null or undefined when calling listUserCollections.");if(t==null)throw new F("type","Required parameter type was null or undefined when calling listUserCollections.");if(s==null)throw new F("page","Required parameter page was null or undefined when calling listUserCollections.");if(a==null)throw new F("perPage","Required parameter perPage was null or undefined when calling listUserCollections.");const c="/collections/user/{userId}".replace("{userId}",encodeURIComponent(String(e))),m=new URL(c,"https://example.com");let u;o&&(u=o.baseOptions);const v={method:"GET",...u,...n},d={},h={};t!==void 0&&(h.type=t),l!==void 0&&(h.name=l),s!==void 0&&(h.page=s),a!==void 0&&(h.per_page=a);const y=new URLSearchParams(m.search);for(const w in h)y.set(w,h[w]);for(const w in n.params)y.set(w,n.params[w]);m.search=new URLSearchParams(y).toString();let i=u&&u.headers?u.headers:{};return v.headers={...d,...i,...n.headers},{url:m.pathname+m.search+m.hash,options:v}},proLimitIsCanCreateCollection:async(e,t={})=>{const s="/collections/create/permission",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"POST",...l,...t},c={},m={};c["Content-Type"]="application/json";const u=new URLSearchParams(a.search);for(const h in m)u.set(h,m[h]);for(const h in t.params)u.set(h,t.params[h]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};n.headers={...c,...v,...t.headers};const d=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=d?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},removeItemFromCollection:async(e,t,s,a={})=>{if(e==null)throw new F("type","Required parameter type was null or undefined when calling removeItemFromCollection.");if(t==null)throw new F("collectionId","Required parameter collectionId was null or undefined when calling removeItemFromCollection.");const l="/collections/{collectionId}/items".replace("{collectionId}",encodeURIComponent(String(t))),n=new URL(l,"https://example.com");let c;o&&(c=o.baseOptions);const m={method:"DELETE",...c,...a},u={},v={};e!==void 0&&(v.type=e),u["Content-Type"]="application/json";const d=new URLSearchParams(n.search);for(const i in v)d.set(i,v[i]);for(const i in a.params)d.set(i,a.params[i]);n.search=new URLSearchParams(d).toString();let h=c&&c.headers?c.headers:{};m.headers={...u,...h,...a.headers};const y=typeof s!="string"||m.headers["Content-Type"]==="application/json";return m.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:n.pathname+n.search+n.hash,options:m}},updateCollection:async(e,t={})=>{const s="/collections",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"PATCH",...l,...t},c={},m={};c["Content-Type"]="application/json";const u=new URLSearchParams(a.search);for(const h in m)u.set(h,m[h]);for(const h in t.params)u.set(h,t.params[h]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};n.headers={...c,...v,...t.headers};const d=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=d?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}}}},le=function(o){return{async addItemForLater(e,t,s){const a=await oe(o).addItemForLater(e,t,s);return(l=z,n=W)=>{const c={...a.options,url:n+a.url};return l.request(c)}},async addItemToCollection(e,t,s,a){const l=await oe(o).addItemToCollection(e,t,s,a);return(n=z,c=W)=>{const m={...l.options,url:c+l.url};return n.request(m)}},async collectionsIdDelete(e,t){const s=await oe(o).collectionsIdDelete(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async countUserCollectionsByType(e,t){const s=await oe(o).countUserCollectionsByType(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async create(e,t){const s=await oe(o).create(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async detail(e,t){const s=await oe(o).detail(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async getCurrentSaveInfo(e,t,s){const a=await oe(o).getCurrentSaveInfo(e,t,s);return(l=z,n=W)=>{const c={...a.options,url:n+a.url};return l.request(c)}},async listCollectionItems(e,t,s,a){const l=await oe(o).listCollectionItems(e,t,s,a);return(n=z,c=W)=>{const m={...l.options,url:c+l.url};return n.request(m)}},async listUserCollections(e,t,s,a,l,n){const c=await oe(o).listUserCollections(e,t,s,a,l,n);return(m=z,u=W)=>{const v={...c.options,url:u+c.url};return m.request(v)}},async proLimitIsCanCreateCollection(e,t){const s=await oe(o).proLimitIsCanCreateCollection(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async removeItemFromCollection(e,t,s,a){const l=await oe(o).removeItemFromCollection(e,t,s,a);return(n=z,c=W)=>{const m={...l.options,url:c+l.url};return n.request(m)}},async updateCollection(e,t){const s=await oe(o).updateCollection(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}}}};class ie extends vt{async addItemForLater(e,t,s){return le(this.configuration).addItemForLater(e,t,s).then(a=>a(this.axios,this.basePath))}async addItemToCollection(e,t,s,a){return le(this.configuration).addItemToCollection(e,t,s,a).then(l=>l(this.axios,this.basePath))}async collectionsIdDelete(e,t){return le(this.configuration).collectionsIdDelete(e,t).then(s=>s(this.axios,this.basePath))}async countUserCollectionsByType(e,t){return le(this.configuration).countUserCollectionsByType(e,t).then(s=>s(this.axios,this.basePath))}async create(e,t){return le(this.configuration).create(e,t).then(s=>s(this.axios,this.basePath))}async detail(e,t){return le(this.configuration).detail(e,t).then(s=>s(this.axios,this.basePath))}async getCurrentSaveInfo(e,t,s){return le(this.configuration).getCurrentSaveInfo(e,t,s).then(a=>a(this.axios,this.basePath))}async listCollectionItems(e,t,s,a){return le(this.configuration).listCollectionItems(e,t,s,a).then(l=>l(this.axios,this.basePath))}async listUserCollections(e,t,s,a,l,n){return le(this.configuration).listUserCollections(e,t,s,a,l,n).then(c=>c(this.axios,this.basePath))}async proLimitIsCanCreateCollection(e,t){return le(this.configuration).proLimitIsCanCreateCollection(e,t).then(s=>s(this.axios,this.basePath))}async removeItemFromCollection(e,t,s,a){return le(this.configuration).removeItemFromCollection(e,t,s,a).then(l=>l(this.axios,this.basePath))}async updateCollection(e,t){return le(this.configuration).updateCollection(e,t).then(s=>s(this.axios,this.basePath))}}function it(){return{animate:t=>{const s=document.getElementById(t);s==null||s.classList.add("animate-bounce"),setInterval(()=>{s==null||s.classList.remove("animate-bounce")},2500)}}}function xt(){const o=(t,s,a)=>{s.value=!1,clearTimeout(t),s.value=!0,t=setTimeout(()=>{s.value=!1,e(a)},2e3)},e=t=>{const s=document.getElementById(t);s==null||s.classList.add("fade"),s==null||s.classList.add("fade-out")};return{splash:o,hide:e}}var ct;const _e=typeof window<"u",ca=o=>typeof o=="string",Ge=()=>{};_e&&((ct=window==null?void 0:window.navigator)==null?void 0:ct.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Ze(o){return typeof o=="function"?o():O(o)}function ua(o){return o}function et(o){return Kt()?(Xt(o),!0):!1}function da(o){return typeof o=="function"?Ue(o):k(o)}function ma(o,e=!0){Zt()?Se(o):e?o():ea(o)}function pa(o,e,t={}){const{immediate:s=!0}=t,a=k(!1);let l=null;function n(){l&&(clearTimeout(l),l=null)}function c(){a.value=!1,n()}function m(...u){n(),a.value=!0,l=setTimeout(()=>{a.value=!1,l=null,o(...u)},Ze(e))}return s&&(a.value=!0,_e&&m()),et(c),{isPending:a,start:m,stop:c}}function ha(o){var e;const t=Ze(o);return(e=t==null?void 0:t.$el)!=null?e:t}const Ct=_e?window:void 0;_e&&window.document;const va=_e?window.navigator:void 0;_e&&window.location;function fa(...o){let e,t,s,a;if(ca(o[0])?([t,s,a]=o,e=Ct):[e,t,s,a]=o,!e)return Ge;let l=Ge;const n=Ve(()=>ha(e),m=>{l(),m&&(m.addEventListener(t,s,a),l=()=>{m.removeEventListener(t,s,a),l=Ge})},{immediate:!0,flush:"post"}),c=()=>{n(),l()};return et(c),c}function _t(o,e=!1){const t=k(),s=()=>t.value=Boolean(o());return s(),ma(s,e),t}function wa(o,e={}){const{window:t=Ct}=e,s=_t(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let a;const l=k(!1),n=()=>{!a||("removeEventListener"in a?a.removeEventListener("change",c):a.removeListener(c))},c=()=>{!s.value||(n(),a=t.matchMedia(da(o).value),l.value=a.matches,"addEventListener"in a?a.addEventListener("change",c):a.addListener(c))};return ta(c),et(()=>n()),l}function It(o={}){const{navigator:e=va,read:t=!1,source:s,copiedDuring:a=1500}=o,l=["copy","cut"],n=_t(()=>e&&"clipboard"in e),c=k(""),m=k(!1),u=pa(()=>m.value=!1,a);function v(){e.clipboard.readText().then(h=>{c.value=h})}if(n.value&&t)for(const h of l)fa(h,v);async function d(h=Ze(s)){n.value&&h!=null&&(await e.clipboard.writeText(h),c.value=h,m.value=!0,u.start())}return{isSupported:n,text:c,copied:m,copy:d}}const Ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xe="__vueuse_ssr_handlers__";Ke[Xe]=Ke[Xe]||{};Ke[Xe];var ut;(function(o){o.UP="UP",o.RIGHT="RIGHT",o.DOWN="DOWN",o.LEFT="LEFT",o.NONE="NONE"})(ut||(ut={}));var ya=Object.defineProperty,dt=Object.getOwnPropertySymbols,ga=Object.prototype.hasOwnProperty,ba=Object.prototype.propertyIsEnumerable,mt=(o,e,t)=>e in o?ya(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,ka=(o,e)=>{for(var t in e||(e={}))ga.call(e,t)&&mt(o,t,e[t]);if(dt)for(var t of dt(e))ba.call(e,t)&&mt(o,t,e[t]);return o};const xa={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};ka({linear:ua},xa);function Ca(){return{readMore:(e,t,s,a)=>{const l=document.getElementById(`${a}${t}`);l!==null&&(l.innerHTML=e);const n=document.getElementById(`${s}${t}`);n==null||n.remove()}}}const _a={class:"flex-col info"},Ia={key:0,class:"user-info"},$a={class:"flex flex-row w-full"},Aa=["src"],Ra={class:"w-full name"},Sa={class:"flex flex-row justify-between"},Pa={class:"flex flex-col"},La={class:"mb-2 text-base font-bold"},Oa={key:1,class:"mb-4"},Ua=["id","innerHTML"],Va=["id"],qa={class:"mb-4"},Ta={key:2,class:"tags"},Ea={__name:"ModalViewInfo",props:{section:{type:String,default:""},isModal:{type:Boolean,default:!1},artworkDetail:{type:Object,default:()=>{}},previewMode:{type:Boolean,default:!1},isDesktop:{type:Boolean,default:!1}},setup(o){ft();const e=(t,s,a,l)=>{Ca().readMore(t,s,a,l)};return(t,s)=>{const a=Pe;return b(),_("section",_a,[o.artworkDetail.users?(b(),_("div",Ia,[r("div",$a,[x(a,{to:"/profile/"+o.artworkDetail.users.username},{default:K(()=>[r("img",{class:"avatar",src:t.avatarCoverUrl(o.artworkDetail.users.avatar_bucket,o.artworkDetail.users.avatar_filename),onError:s[0]||(s[0]=(...l)=>t.imageLoadError&&t.imageLoadError(...l))},null,40,Aa)]),_:1},8,["to"]),r("div",Ra,[r("div",Sa,[r("div",Pa,[x(a,{to:"/profile/"+o.artworkDetail.users.username,class:"fullname"},{default:K(()=>[B(g(o.artworkDetail.users.name),1)]),_:1},8,["to"]),x(a,{to:"/profile/"+o.artworkDetail.users.username,class:"username"},{default:K(()=>[B(" @"+g(o.artworkDetail.users.username),1)]),_:1},8,["to"])]),$(r("div",{class:"p-1 h-7 font-bold rounded-md border-2 cursor-pointer hover:shadow-md border-color-primary",style:{"font-size":"10px"},onClick:s[1]||(s[1]=l=>t.closeModal(o.section+"-modal"))}," ESC ",512),[[R,o.isModal]])])])])])):P("",!0),r("div",La,g(o.artworkDetail.title),1),o.artworkDetail.description?(b(),_("div",Oa,[r("span",{id:"mview-"+o.isDesktop+"-description-"+o.artworkDetail.id,innerHTML:o.artworkDetail.description.length>300?`${o.artworkDetail.description.slice(0,300)}...`:o.artworkDetail.description},null,8,Ua),o.artworkDetail.description.length>300?(b(),_("a",{key:0,id:"mview-"+o.isDesktop+"-read-more-"+o.artworkDetail.id,class:"href",onClick:s[2]||(s[2]=pe(l=>e(o.artworkDetail.description,o.artworkDetail.id,"mview-"+o.isDesktop+"-read-more-","mview-"+o.isDesktop+"-description-"),["prevent"]))},g(t.$t("readMore")),9,Va)):P("",!0)])):P("",!0),r("div",qa,[r("span",{class:D(["italic text-color-secondary",{"font-bold text-red-400":o.previewMode}])},g(o.previewMode?t.$t("willBePublishedOn"):t.$t("publishedOn")),3),B(" "+g(t.formatDate(o.artworkDetail.scheduled_post)),1)]),o.artworkDetail.artwork_has_tags&&o.artworkDetail.artwork_has_tags.length?(b(),_("div",Ta,[(b(!0),_(he,null,ve(o.artworkDetail.artwork_has_tags,l=>(b(),_("span",{key:l.artwork_tags.id,class:"tag"},[x(a,{to:"/works/browse?tags="+l.artwork_tags.tag.replaceAll(" ","+")},{default:K(()=>[B(g(l.artwork_tags.tag),1)]),_:2},1032,["to"])]))),128))])):P("",!0)])}}},pt=fe(Ea,[["__scopeId","data-v-35c1316f"]]),Ma=["href","onClick"],Ba={class:"overflow-hidden relative text-center rounded-md"},ja={key:0},Fa={key:1,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Da=["href"],Na=["src"],Ha={class:"overflow-hidden relative text-center rounded-md"},Qa={key:0},za={key:1,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Wa=["href"],Ga=["src"],Ja={__name:"WorkList",props:{works:{type:Array,default:()=>[]},view:{type:Function,default:()=>{}},sectionClass:{type:String,default:""},isHref:{type:Boolean,default:!1},manageMode:{type:Boolean,default:!1},isMiniList:{type:Boolean,default:!1},currentWorkId:{type:Number,default:0}},emits:"feedManageList",setup(o,{emit:e}){const t=o,s=Te();Ve(()=>t.currentWorkId,d=>{n.value=d});const a=aa(),l=k(!1),n=k(t.currentWorkId),c=wa("(min-width: 1024px)"),m=d=>{c.value&&!t.isMiniList||t.isMiniList?(n.value=d,t.view(d)):a.replace({path:"/a/"+d})},u=k([]),v=d=>{if(u.value.includes(d)){const h=u.value.indexOf(d);u.value.splice(h,1)}else u.value.push(d);e("feedManageList",u.value)};return Ve(()=>t.manageMode,d=>{d===!1&&(u.value=[])}),(d,h)=>{const y=Pe;return b(),_("section",{class:D(o.sectionClass)},[(b(!0),_(he,null,ve(o.works,i=>(b(),_("span",{key:i.id,class:D(["work-thumbnail theme-color-bg rounded-lg",i._count.artwork_assets>1&&n.value!=i.id?"work-multiple":"",{"border-4 border-yellow-400":u.value.includes(i.id)||n.value==i.id}])},[!d.isMobile()&&!o.isHref&&!o.isMiniList?(b(),_("a",{key:0,href:"/a/"+i.id,onClick:pe(w=>o.manageMode?v(i.id):o.view(i.id),["prevent"]),class:"w-full h-full theme-color-bg"},[r("div",Ba,[i._count.artwork_assets>1&&!d.applyExplicitFilter(O(s),i.is_explicit)?(b(),_("p",ja,g(i._count.artwork_assets),1)):P("",!0),d.applyExplicitFilter(O(s),i.is_explicit)?(b(),_("span",Fa,g(d.$t("explicitContent")),1)):P("",!0),r("a",{href:"/a/"+i.id,class:D([{"animate-wigglefast":o.manageMode}])},[r("img",{class:D(["w-full h-full unselectable",{"object-cover":!l.value},l.value?"object-contain object-center h-44":"object-cover",{"blur-3xl brightness-50 unclickable":d.applyExplicitFilter(O(s),i.is_explicit)}]),src:d.artworkThumb(i.artwork_assets[0].bucket,i.artwork_assets[0].filename,"thumbnail",l.value),onError:h[0]||(h[0]=(...w)=>d.imageLoadError&&d.imageLoadError(...w))},null,42,Na)],10,Da)])],8,Ma)):(b(),ce(y,{key:1,onClick:w=>o.manageMode?v(i.id):m(i.id)},{default:K(()=>[r("div",Ha,[i._count.artwork_assets>1&&!d.applyExplicitFilter(O(s),i.is_explicit)?(b(),_("p",Qa,g(i._count.artwork_assets),1)):P("",!0),d.applyExplicitFilter(O(s),i.is_explicit)?(b(),_("span",za,g(d.$t("explicitContent")),1)):P("",!0),r("a",{href:"/a/"+i.id,onClick:h[2]||(h[2]=pe(w=>d.void,["prevent"])),class:D([{"animate-wigglefast":o.manageMode}])},[r("img",{class:D(["object-cover w-full h-full unselectable",{"blur-3xl brightness-50 unclickable":d.applyExplicitFilter(O(s),i.is_explicit)}]),src:d.artworkThumb(i.artwork_assets[0].bucket,i.artwork_assets[0].filename,"thumbnail",l.value),onError:h[1]||(h[1]=(...w)=>d.imageLoadError&&d.imageLoadError(...w))},null,42,Ga)],10,Wa)])]),_:2},1032,["onClick"]))],2))),128))],2)}}},Ya=fe(Ja,[["__scopeId","data-v-9442f5f1"]]),Ka={class:"artist-works"},Xa={class:"heading"},Za={key:0,class:"pagination-controller"},es={__name:"ArtistWorks",props:{artworkDetail:{type:Object,default(){return{}}},keepArtistPageNumber:{type:Boolean,default:!1},view:Function,isHref:{type:Boolean,default:!1},paginationPerPage:{type:Number,default:4}},setup(o){const e=o,t=e.artworkDetail,{oApiConfiguration:s,fetchOptions:a}=Ce(),l=bt(s,a()),n=k(null);Se(()=>{e.keepArtistPageNumber||(u.page=-1),v(t.users.id)});const c=k(!0),m=k([]),u=Je({page:0,perPage:e.paginationPerPage,options:{nextPrevLoading:!1,disableArtistNextButton:!0,disableArtistPrevButton:!0}}),v=async(y,i)=>{c.value=!0,u.options.nextPrevLoading=!0,y!==n.value&&(n.value=y,u.page=-1),i==="prev"?u.page-=1:u.page+=1;const[w,C,L]=await l.getUserArtworks({userId:y,pagination:{page:u.page,perPage:u.perPage}});L?(c.value=!1,h()):(C.next_previous.prev_page===null||C.next_previous.prev_page===void 0?u.options.disableArtistPrevButton=!0:u.options.disableArtistPrevButton=!1,C.next_previous.next_page===null||C.next_previous.next_page===void 0?u.options.disableArtistNextButton=!0:u.options.disableArtistNextButton=!1,m.value=w),u.options.nextPrevLoading=!1,c.value=!1},d=k(!1),h=()=>{d.value=!0};return(y,i)=>{const w=Pe;return b(),_("div",Ka,[r("div",Xa,[r("span",null,[B(g(y.$t("artworks.moreArtworkBy"))+" ",1),o.artworkDetail.users?(b(),ce(w,{key:0,to:"/profile/"+o.artworkDetail.users.username,class:"text-colored"},{default:K(()=>[B(g(o.artworkDetail.users.username)+" <"+g(o.artworkDetail.users.name)+"> ",1)]),_:1},8,["to"])):P("",!0)]),x(w,{to:"/profile/"+o.artworkDetail.users.username,target:"_blank",class:"flex flex-row cursor-pointer"},{default:K(()=>[x(V,{name:"i-ci-external-link"})]),_:1},8,["to"])]),x(Ee,{loading:c.value,error:d.value,class:"mt-2"},null,8,["loading","error"]),$(x(Ya,{class:D(["gap-2 md:gap-4",[u.options.nextPrevLoading?"animate-pulse":"",o.paginationPerPage===6?"grid-cols-6":"grid-cols-4"]]),"section-class":"works",works:m.value,view:o.view,"is-href":o.isHref,"is-mini-list":!0,"current-work-id":o.artworkDetail.id},null,8,["class","works","view","is-href","current-work-id"]),[[R,!c.value&&!d.value]]),o.artworkDetail.users?$((b(),_("div",Za,[r("span",{onClick:i[0]||(i[0]=C=>u.options.disableArtistPrevButton?null:v(o.artworkDetail.users.id,"prev"))},[x(V,{name:"i-ion-chevron-back"})]),r("span",{onClick:i[1]||(i[1]=C=>u.options.disableArtistNextButton?null:v(o.artworkDetail.users.id,"next"))},[x(V,{name:"i-ion-chevron-forward"})])],512)),[[R,!c.value]]):P("",!0)])}}},ht=fe(es,[["__scopeId","data-v-a626d965"]]);function ts(o,e){return{proCanCreateCollection:async i=>{try{const{data:w}=await new ie(o).proLimitIsCanCreateCollection({type:i.type},e);return[w.data.is_can_create,null]}catch(w){return[null,w]}},createCollection:async(i,w)=>{try{const{data:C}=await new ie(o).create({name:w.title,description:w.description,is_public:w.isPublic?1:0,type:i},e);return[C.success,C.data,null]}catch(C){return[null,null,C]}},getInfo:async i=>{try{return[(await new ie(o).detail(i,e)).data,null]}catch(w){return[null,w]}},countCollections:async i=>{try{const{data:w}=await new qe(o).countUserCollections(i,e);return[w.data.total,null]}catch(w){return[null,w]}},countArtworkCollections:async i=>{try{const{data:w}=await new qe(o).countUserArtworkCollections(i,e);return[w.data.total,null]}catch(w){return[null,w]}},fetchCollections:async i=>{try{const{data:w}=await new ie(o).listUserCollections(i.userId,i.type,i.pagination.page,i.pagination.perPage,i.name,e),C=w.data.collections,L=w.data.pagination;let S=!0;return L.current_page===L.total_page&&(S=!1),[C,S,null]}catch(w){return[null,!1,w]}},listCollectionItems:async i=>{try{const{data:w}=await new ie(o).listCollectionItems(i.collectionId,i.pagination.perPage,i.pagination.page,e),C=w.data.pagination;let L=!0;return C.current_page===C.total_page&&(L=!1),[w.data.items,L,null]}catch(w){return[null,!1,w]}},getCurrentSaveInfo:async(i,w)=>{try{const{data:C}=await new ie(o).getCurrentSaveInfo(i,w,e);return[C.data,null]}catch(C){return[null,C]}},addItem:async i=>{try{return await new ie(o).addItemToCollection(i.type,i.collectionId,{id:i.workId},e),[!0,null]}catch(w){return[null,w]}},removeItem:async i=>{try{const{data:w}=await new ie(o).removeItemFromCollection(i.type,i.collectionId,{id:i.workId},e);return[w.success,null]}catch(w){return[null,w]}},update:async i=>{try{const{data:w}=await new ie(o).updateCollection({id:i.id,name:i.name,description:i.description,is_public:i.isPublic},e);return[w.success,null]}catch(w){return[null,w]}},deleteCollection:async i=>{try{const{data:w}=await new ie(o).collectionsIdDelete(i,e);return[w.success,null]}catch(w){return[null,w]}}}}const as={class:"w-full modal-layer xl:w-3/12 lg:w-2/5"},ss={class:"flex flex-row justify-between w-full"},os={class:"title"},ls={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},ns={class:"list"},rs={class:"overflow-y-scroll pr-2 max-h-60"},is=["onClick"],cs={class:"flex flex-row justify-between"},us={class:"flex float-right flex-row gap-2 mt-4"},ds=["placeholder"],ms={class:"flex flex-row justify-between mt-2"},ps={__name:"ManageSave",props:{modalId:{type:String,default:"collection-selection-modal"},workId:{type:Number,default:0}},emits:["save"],setup(o,{expose:e,emit:t}){const s=o,a=Te(),{oApiConfiguration:l,fetchOptions:n}=Ce(),c=ts(l,n());Se(()=>{h(),i()});const m=k({pagination:{page:0,perPage:10},loading:!1}),u=k(!1),v=k(!1),d=k([]),h=async(T=!1)=>{d.value=[],T||(m.value.loading=!0);const[E,Q,ge]=await c.fetchCollections({userId:a.user.id,type:"artwork",pagination:{page:m.value.pagination.page,perPage:m.value.pagination.perPage}});m.value.loading=!1,ge&&(u.value=!0),ge||(E&&E.length>0?(Q?(m.value.pagination.page+=1,w.value=!0):w.value=!1,E.forEach(se=>{d.value.push(se)})):v.value=!0)},y=k([]),i=async()=>{u.value=!1,y.value=[],L.value=[],S.value=[],await setTimeout(async()=>{const[T,E]=await c.getCurrentSaveInfo("artwork",s.workId);if(E)u.value=!0;else for(const Q of T)L.value.push(Q.collection_id),y.value.push(Q.collection_id)},300)},w=k(!0),C=async()=>{await h({isLoadMore:!0}),await i()},L=k([]),S=k([]),G=T=>{if(L.value.includes(T)){S.value.push(T);const E=L.value.indexOf(T);L.value.splice(E,1)}else if(L.value.push(T),S.value.includes(T)){const E=S.value.indexOf(T);S.value.splice(E,1)}},J=async()=>{try{for(const E of L.value)await c.addItem({collectionId:E,type:"artwork",workId:s.workId});if(S.value.length)for(const E of S.value)await c.removeItem({collectionId:E,type:"artwork",workId:s.workId});let T=!1;L.value.length===0&&y.value.length===S.value.length&&(T=!0),await i(),X().closeModal(s.modalId),t("save",T)}catch{}},Y=k(""),A=k(!1),ne=async()=>{A.value=!1;const[T,E,Q]=await c.createCollection("artwork",{title:Y.value,isPublic:1,description:""});T?(d.value=[],H(),m.value.pagination.page=0,await h(),await i(),Y.value="",N()):A.value=!0},ae=k(!1),N=()=>{ae.value=!0,setInterval(()=>{ae.value=!1},5e3)},H=()=>{L.value=[]},j=()=>{X().closeModal(s.modalId),H()};return e({fetchCollection:h,fetchCurrentSaved:i}),(T,E)=>(b(),_("div",null,[r("div",as,[r("div",null,[r("div",ss,[r("span",os,g(T.$t("collections.addItem.form.title")),1),r("div",ls,[r("div",{class:"modal-close",onClick:E[0]||(E[0]=Q=>j())},[x(V,{name:"close",class:"text-2xl"})])])]),$(r("div",ns,[r("div",rs,[(b(!0),_(he,null,ve(d.value,(Q,ge)=>(b(),_("div",{key:Q.id,class:D(["item",[{"mt-2":ge!==0},L.value.includes(Q.id)?"button-color text-white":"theme-color-secondary"]]),onClick:se=>G(Q.id)},[r("div",cs,[r("span",null,g(Q.name),1),r("span",{class:D(["ml-2 font-bold",L.value.includes(Q.id)?"text-white":"text-colored"])},g(Q._count.collection_has_artworks),3)])],10,is))),128))]),$(r("div",{class:"mt-2 primary-button",onClick:E[1]||(E[1]=Q=>C())},[x(V,{name:"chevron-down-outline",class:"mr-2"}),B(" "+g(T.$t("loadMore")),1)],512),[[R,w.value]]),r("div",us,[r("button",{class:"cancel-button",onClick:E[2]||(E[2]=Q=>j())},g(T.$t("cancel")),1),r("button",{class:"primary-button",onClick:E[3]||(E[3]=Q=>J())},g(T.$t("save")),1)])],512),[[R,!m.value.loading&&!u.value&&!v.value]]),$(r("div",null,[$(r("input",{"onUpdate:modelValue":E[4]||(E[4]=Q=>Y.value=Q),type:"text",class:D(["mt-4 mb-0 form-input theme-color-secondary",{"border border-red-400":A.value}]),placeholder:T.$t("collections.createNewCollection")},null,10,ds),[[Re,Y.value]]),r("div",ms,[r("div",null,[$(r("span",{class:"font-bold text-green-400 transition-all duration-200 ease-in-out"},g(T.$t("collections.collectionCreated")),513),[[R,ae.value]]),$(r("span",{class:"font-bold text-red-400 transition-all duration-200 ease-in-out"},g(T.$t("collections.failedToCreateCollection")),513),[[R,A.value]])]),$(r("button",{class:"primary-button",onClick:E[5]||(E[5]=Q=>ne())},g(T.$t("create")),513),[[R,Y.value&&Y.value.length>0]])])],512),[[R,!m.value.loading&&!u.value&&!v.value]])]),x(Ee,{loading:m.value.loading,empty:v.value,error:u.value,fetch:h},null,8,["loading","empty","error"])])]))}},hs=fe(ps,[["__scopeId","data-v-61879341"]]);function vs(o,e){return{createAlbum:async(y,i)=>{try{const{data:w}=await new me(o).createAlbum({name:i.title,description:i.description,is_public:i.isPublic?1:0,type:y},e);return[w.success,w.data,null]}catch(w){return[null,null,w]}},getInfo:async y=>{try{return[(await new me(o).getAlbumById(y,e)).data,null]}catch(i){return[null,i]}},countAlbums:async y=>{try{const{data:i}=await new qe(o).countUserAlbums(y,e);return[i.data.total,null]}catch(i){return[null,i]}},countArtworkAlbums:async y=>{try{const{data:i}=await new qe(o).countUserArtworkAlbums(y,e);return[i.data.total,null]}catch(i){return[null,i]}},fetchAlbums:async(y,i,w,C)=>{try{const{data:L}=await new me(o).listUserAlbums(y,w,C,i,e),S=L.data.pagination;let G=!0;return S.current_page===S.total_page&&(G=!1),[L.data.albums,G,null]}catch(L){return[null,!1,L]}},listAlbumItems:async y=>{try{const{data:i}=await new me(o).getAlbumItems(y.albumId,y.pagination.perPage,y.pagination.page,e),w=i.data.pagination;let C=!0;return w.current_page===w.total_page&&(C=!1),[i.data.works,C,null]}catch(i){return[null,!1,i]}},getCurrentSaveInfo:async(y,i)=>{try{const{data:w}=await new me(o).getCurrentAlbumSaveInfo(y,i,e);return[w.data,null]}catch(w){return[null,w]}},addItems:async(y,i)=>{try{for(const w of y)await new me(o).addWorkToAlbum({album_id:w,work_ids:i},e);return[!0,null]}catch(w){return[null,w]}},removeItems:async(y,i)=>{try{const{data:w}=await new me(o).removeWorkFromAlbum({album_id:y,work_ids:i},e);return[w.success,null]}catch(w){return[null,w]}},update:async y=>{try{const{data:i}=await new me(o).updateAlbum({id:y.id,name:y.name,description:y.description,is_public:y.isPublic},e);return[i.success,null]}catch(i){return[null,i]}},deleteAlbum:async y=>{try{const{data:i}=await new me(o).deleteAlbum(y,e);return[i.success,null]}catch(i){return[null,i]}}}}const fs={class:"w-full modal-layer xl:w-3/12 lg:w-2/5"},ws={class:"flex flex-row justify-between w-full"},ys={class:"title"},gs={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},bs={class:"list"},ks={class:"overflow-y-scroll pr-2 max-h-60"},xs=["onClick"],Cs={class:"flex float-right flex-row gap-2 mt-4"},_s={__name:"ManageAlbum",props:{modalId:{type:String,default:"album-selection-modal"},workId:{type:Number,default:0},workIds:{type:Array,default:()=>[]}},emits:["addedToAlbum"],setup(o,{expose:e,emit:t}){const s=o;Se(()=>{i(),s.workIds.length||L()});const a=Te(),{oApiConfiguration:l,fetchOptions:n}=Ce(),c=vs(l,n()),m=async()=>{u.value=[],v.value.pagination.page=0,w(),await i()},u=k([]),v=k({pagination:{perPage:10,page:0,firstLoad:10},showLoadMore:!0}),d=k(!0),h=k(!1),y=k(!1),i=async()=>{w(),d.value=!0;const[N,H,j]=await c.fetchAlbums(a.user.id,"artwork",v.value.pagination.page===0?v.value.pagination.firstLoad:v.value.pagination.perPage,v.value.pagination.page);j&&(h.value=!0),N.length?(H?(v.value.pagination.page+=1,v.value.showLoadMore=!0):v.value.showLoadMore=!1,N.forEach(T=>{u.value.push(T)})):y.value=!0,d.value=!1},w=()=>{y.value=!1,h.value=!1},C=k([]),L=async()=>{C.value=[],G.value=[],J.value=[];const[N,H]=await c.getCurrentSaveInfo("artwork",s.workId);for(const j of N)G.value.push(j.album_id),C.value.push(j.album_id)},S=async()=>{await i(),await L()},G=k([]),J=k([]),Y=N=>{if(G.value.includes(N)){J.value.push(N);const H=G.value.indexOf(N);G.value.splice(H,1)}else if(G.value.push(N),J.value.includes(N)){const H=J.value.indexOf(N);J.value.splice(H,1)}},A=async()=>{const[N,H]=await c.addItems(G.value,s.workIds.length?s.workIds:[s.workId]);if(!s.workIds.length&&J.value.length)for(const j of J.value)await c.removeItems(j,[s.workId]);if(N){let j=!1;s.workIds.length||G.value.length===0&&C.value.length===J.value.length&&(j=!0),ne(),X().closeModal(s.modalId),t("addedToAlbum",s.workIds.length?!0:j)}},ne=()=>{G.value=[]},ae=()=>{X().closeModal(s.modalId),ne()};return e({fetchCurrentSaved:L,fetchAlbums:i}),(N,H)=>(b(),_("div",null,[r("div",fs,[r("div",null,[r("div",ws,[r("span",ys,g(N.$t("albums.selectAlbums")),1),r("div",gs,[r("div",{class:"modal-close",onClick:H[0]||(H[0]=j=>ae())},[x(V,{name:"close",class:"text-2xl"})])])]),r("div",bs,[$(r("div",null,[r("div",ks,[(b(!0),_(he,null,ve(u.value,(j,T)=>(b(),_("div",{key:j.id,class:D(["item",[{"mt-2":T!==0},G.value.includes(j.id)?"button-color text-white":"theme-color-secondary"]]),onClick:E=>Y(j.id)},[r("span",null,g(j.name),1),r("span",{class:D(["ml-2 font-bold",G.value.includes(j.id)?"text-white":"text-colored"])},g(j._count.album_has_artworks),3)],10,xs))),128))]),$(r("div",{class:"mt-2 primary-button",onClick:H[1]||(H[1]=j=>S())}," Load More ",512),[[R,v.value.showLoadMore]]),r("div",Cs,[r("button",{class:"cancel-button",onClick:H[2]||(H[2]=j=>ae())},g(N.$t("cancel")),1),r("button",{class:"primary-button",onClick:H[3]||(H[3]=j=>A())},g(N.$t("save")),1)])],512),[[R,!d.value&&!y.value&&!h.value]])])]),x(Ee,{loading:d.value,empty:y.value,error:h.value,fetch:m},null,8,["loading","empty","error"])])]))}},Is=fe(_s,[["__scopeId","data-v-92721f88"]]),$s={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},As={class:"mb-4"},Rs={class:"flex flex-row justify-end gap-2"},Ss={__name:"ConfirmationDialog",props:{modalId:{type:String,default:"confirmation-dialog-modal"},message:{type:String,default:"Are you sure?"},onAccept:{type:Function,default:()=>{}}},emits:"onAccept",setup(o,{emit:e}){const t=o,s=a=>{a&&e("onAccept",!0),X().closeModal(t.modalId)};return(a,l)=>(b(),_("div",null,[r("div",$s,[r("p",As,g(o.message),1),r("div",Rs,[r("button",{class:"cancel-button",onClick:l[0]||(l[0]=n=>s(!1))},g(a.$t("no")),1),r("button",{class:"danger-button",onClick:l[1]||(l[1]=n=>s(!0))},g(a.$t("yes")),1)])])]))}},Ps={class:"splash"},Ls={class:"flex flex-row"},Os={__name:"SplashAlert",props:{text:{type:String,default:""},icon:{type:String,default:"checkmark-outline"}},setup(o){return(e,t)=>(b(),_("div",Ps,[r("div",Ls,[x(V,{name:o.icon,class:"mr-2 text-base"},null,8,["name"]),r("span",null,g(o.text),1)])]))}},$t=fe(Os,[["__scopeId","data-v-86e964a1"]]),At=o=>(wt("data-v-93d8d761"),o=o(),yt(),o),Us={class:"opt-modal modal-layer"},Vs={class:"opt-modal__title"},qs={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},Ts={class:"opt-modal__content"},Es={class:"report"},Ms={class:"report__reason_opt"},Bs={class:"report__title"},js=["onClick"],Fs={class:"report__title"},Ds=["placeholder"],Ns={class:"report__buttons"},Hs={class:"text-justify"},Qs={class:"mt-2"},zs=At(()=>r("i",null,"Your report ID:",-1)),Ws=B("\xA0 "),Gs=At(()=>r("i",null,"Report date:",-1)),Js=B("\xA0 "),Ys={__name:"ReportModal",props:{type:{type:String,default:""},postId:{type:Number,default:0},reportStatus:{type:Object,default:()=>{}}},setup(o){const e=o,{oApiConfiguration:t,fetchOptions:s}=Ce(),a=kt(t,s()),l=k(["stolen","spam","hateSpeech","harassment","falseInfo","suicide","graphic","terrorism","somethingElse"]),n=k({selectedReasons:[],reasonDescription:"",enableSubmit:Ue(()=>n.value.selectedReasons.length>0&&n.value.reasonDescription!=="")}),c=y=>{if(!n.value.selectedReasons.includes(y))n.value.selectedReasons.push(y);else{const i=n.value.selectedReasons.indexOf(y);n.value.selectedReasons.splice(i,1)}},m=k(!1),u=k({}),v=async()=>{m.value=!1,u.value={};const[y,i,w]=await a.createNewReport({type:e.type,postId:e.postId,reasons:n.value.selectedReasons.join(","),description:n.value.reasonDescription});w&&!y||(m.value=!0,u.value=i)},d=()=>{X().closeModal("report-modal"),h()},h=()=>{n.value.selectedReasons=[],n.value.reasonDescription="",m.value=!1};return(y,i)=>{const w=Pe;return b(),_("div",null,[r("div",Us,[r("div",Vs,[r("h1",null,g(m.value?y.$t("reports.reportSubmitted"):o.reportStatus.id?y.$t("reports.alreadyReported"):y.$t("reports.title")),1),r("div",qs,[r("div",{class:"modal-close",onClick:i[0]||(i[0]=C=>d())},[x(V,{name:"i-ion-close",class:"text-2xl"})])])]),r("div",Ts,[$(r("div",Es,[r("div",Ms,[r("div",Bs,g(y.$t("reports.selectReasons")),1),(b(!0),_(he,null,ve(l.value,C=>(b(),_("span",{key:C,class:D([n.value.selectedReasons.includes(C)?"button-color":"theme-color-secondary"]),onClick:L=>c(C)},[r("div",null,[$(x(V,{name:"i-ion-square-outline",class:"text-color-secondary"},null,512),[[R,!n.value.selectedReasons.includes(C)]]),$(x(V,{name:"i-ion-checkbox-outline",class:"text-green-300"},null,512),[[R,n.value.selectedReasons.includes(C)]])]),r("div",{class:D(["reason",[n.value.selectedReasons.includes(C)?"text-white":"text-color-secondary"]])},g(y.$t("reports.reasons."+C)),3)],10,js))),128))]),r("div",null,[r("div",Fs,g(y.$t("reports.describeReason")),1),$(r("textarea",{"onUpdate:modelValue":i[1]||(i[1]=C=>n.value.reasonDescription=C),class:"report__reason_description",placeholder:y.$t("reports.describeText"),cols:"5",rows:"5"},null,8,Ds),[[Re,n.value.reasonDescription]])]),r("div",Ns,[r("button",{class:"cancel-button",onClick:i[2]||(i[2]=C=>d())},g(y.$t("cancel")),1),r("button",{class:D(n.value.enableSubmit?"primary-button":"disabled-button"),onClick:i[3]||(i[3]=C=>n.value.enableSubmit?v():null)},g(y.$t("report")),3)])],512),[[R,!m.value&&!o.reportStatus.id]]),$(r("div",null,[r("div",Hs,g(y.$t("reports.reportSubmittedMessage")),1),r("div",Qs,[r("div",null,[zs,Ws,r("b",null,"#"+g(u.value.id),1)]),r("div",null,[Gs,Js,r("b",null,g(y.formatDate(u.value.created_at)),1)])])],512),[[R,m.value]]),$(r("div",null,[B(g(y.$t("reports.alreadyReportedDescription"))+" ",1),x(w,{class:"underline href",to:"/reports"},{default:K(()=>[B(g(y.$t("reports.reportStatus")),1)]),_:1})],512),[[R,o.reportStatus.id]])])])])}}},Ks=fe(Ys,[["__scopeId","data-v-93d8d761"]]),Xs={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Zs={class:"title"},eo={class:"mt-2"},to={class:"alert-success"},ao={class:"italic"},so={class:"flex flex-row p-2 mb-2 text-white rounded-md button-color"},oo=["placeholder"],lo={class:"flex flex-row gap-2 justify-end"},no={class:"flex flex-row justify-between mt-6"},ro=["value"],io={__name:"ShareArtworkToFeedModal",props:{postId:{type:Number,default:0}},setup(o){const e=o,{oApiConfiguration:t,fetchOptions:s}=Ce(),a=ia(t,s()),l=gt(),n=()=>{m.value=""},c=()=>{u.value=!1,v.value=!1,d.value=!1,X().closeModal("share-to-feed-modal"),n()},m=k(""),u=k(!1),v=k(!1),d=k(!1),h=async()=>{u.value=!1,v.value=!0,d.value=!1;const[C,L,S]=await a.shareArtworkToFeed({text:m.value,workId:e.postId});C?(d.value=!0,setTimeout(()=>{c()},500)):u.value=!0,v.value=!1},y=k(!1);let i;const w=C=>{const L=k(C),{copy:S}=It({source:L});S(),xt().splash(i,y,"copy-alert")};return(C,L)=>(b(),_("div",null,[r("div",Xs,[r("span",Zs,g(C.$t("feeds.share.artwork.title")),1),r("div",eo,[$(r("div",to,[r("span",ao,g(C.$t("feeds.share.artwork.success")),1)],512),[[R,d.value]]),$(r("div",so,[x(Ye,{class:"mr-2"}),B(" "+g(C.$t("feeds.form.postingYourUpdate")),1)],512),[[R,v.value]]),$(r("div",{class:"alert-danger"},g(C.$t("feeds.form.postFailure")),513),[[R,u.value]]),$(r("textarea",{"onUpdate:modelValue":L[0]||(L[0]=S=>m.value=S),class:"input form-input textarea",placeholder:C.$t("typeSomething"),cols:"30",rows:"2","data-gramm":"false",maxlength:"2000"},null,8,oo),[[Re,m.value]]),r("div",lo,[r("button",{class:"cancel-button",onClick:L[1]||(L[1]=S=>c())},g(C.$t("cancel")),1),r("button",{class:D(["primary-button"]),onClick:L[2]||(L[2]=S=>h())},g(C.$t("share")),1)]),r("div",no,[r("input",{readonly:"",value:O(l).public.appUrl+"/a/"+e.postId,class:"p-3 w-full rounded-md theme-color-secondary"},null,8,ro),r("button",{class:"icon-button",onClick:L[3]||(L[3]=S=>w(O(l).public.appUrl+"/a/"+o.postId))},[x(V,{name:"i-icon-park-outline-copy"})])])])]),$(x($t,{id:"copy-alert",text:C.$t("linkCopied"),icon:"i-bi-check-all"},null,8,["text"]),[[R,y.value]])]))}},tt=o=>(wt("data-v-1bcaa719"),o=o(),yt(),o),co={class:"mx-auto w-full align-middle work-view md:w-1/2"},uo={key:0,class:"p-4 mb-4 w-full text-center text-black bg-yellow-200 rounded-md theme-color-secondary"},mo={class:"flex flex-row justify-center mb-2"},po=tt(()=>r("div",null,"You are currently viewing the preview mode, this work isn't published yet.",-1)),ho={class:"font-bold cursor-pointer"},vo={class:"mr-2 font-normal"},fo={class:"italic"},wo={key:1,class:"alert-success"},yo={class:"flex flex-row justify-between p-3 mb-2 text-black align-middle bg-yellow-200 rounded"},go={class:"mr-4"},bo={class:"image-list"},ko=["src","data-source"],xo={class:"interactions"},Co={class:"reaction-counters"},_o={class:"counter"},Io={key:1,class:"counter"},$o={key:2,class:"counter"},Ao={key:3,class:"counter"},Ro={key:0,class:"reactions"},So={class:"inline-block relative z-30 dropdown"},Po={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options"},Lo={class:"invisible rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 dropdown-menu"},Oo={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 p-1 mt-2 w-56 rounded-md shadow-lg origin-top-right outline-none theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},Uo={key:2,class:"custom-divider"},Vo={key:4,class:"custom-divider"},qo=["to"],To=tt(()=>r("div",{class:"custom-divider"},null,-1)),Eo={class:"comments"},Mo={key:0,class:"comment-box"},Bo={class:"flex flex-col"},jo={class:"flex relative flex-col"},Fo=["readonly","rows","placeholder"],Do={key:1,class:"p-4 mb-4 text-center rounded-md theme-color-secondary"},No={class:"comment-content"},Ho=["src"],Qo={class:"w-full"},zo={class:"flex justify-between"},Wo={class:"comment-time"},Go={class:"mt-4 reactions"},Jo=["onClick"],Yo={key:0},Ko={key:0,class:"flex flex-row"},Xo=["onClick"],Zo=["onClick"],el={class:"inline-block relative ml-2 dropdown"},tl={class:"invisible z-50 rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 cursor-pointer dropdown-menu"},al={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 p-1 mt-2 w-56 rounded-md border shadow-lg origin-top-right outline-none border-color theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},sl=["onClick"],ol={key:0,class:"-mb-4 comment-box"},ll={class:"flex flex-col"},nl={class:"flex relative flex-col"},rl=["id","readonly","rows","placeholder"],il=["onClick"],cl=["id"],ul={key:0,class:"w-full"},dl={class:"float-left mb-2 text-xs italic text-color-secondary"},ml=["onClick"],pl={class:"flex flex-row justify-between"},hl=["src"],vl={class:"transition-all duration-150 cursor-pointer hover:font-bold"},fl={class:"leading-6 comment-time"},wl={class:"mt-2"},yl={key:0,class:"mt-2 reactions"},gl=tt(()=>r("span",null,null,-1)),bl={class:"flex flex-row"},kl=["onClick"],xl={class:"inline-block relative ml-2 dropdown"},Cl={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options"},_l={class:"invisible z-50 rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 cursor-pointer dropdown-menu"},Il={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 z-50 p-1 mt-2 w-56 rounded-md border shadow-lg origin-top-right outline-none border-color theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},$l=["onClick"],Al=["onClick"],Rl={key:3,class:"mt-4 w-full text-xs italic text-center"},Sl={__name:"ModalView",props:{id:{type:String,default:""},section:{type:String,default:""}},emits:["stopLoading","showEmpty","showError"],setup(o,{expose:e,emit:t}){const s=o,a=Te(),{oApiConfiguration:l,fetchOptions:n}=Ce(),{applyExplicitFilter:c,removeExplicitFilter:m,generateSemiCompressedArtworkUrl:u}=sa(),v=bt(l,n()),d=kt(l,n()),h=gt(),{$router:y}=oa(),i=ft();Ve(()=>i.query,()=>{w(),X().closeModal("collection-selection-modal"),X().closeModal("album-selection-modal"),X().closeModal("report-modal")}),Se(()=>{s.id!==""&&j(s.id),window.addEventListener("keydown",p=>{const f=document.getElementById("collection-selection-modal"),U=document.getElementById("album-selection-modal"),q=document.getElementById("report-modal"),te=document.querySelectorAll(".viewer-in");p.key==="Escape"&&(!f||f.style.display!="flex")&&(!U||U.style.display!="flex")&&(!q||q.style.display!="flex")&&!te.length&&w()})});const w=()=>{X().closeModal(`${s.section}-modal`)},C=k(!1),L=()=>{C.value=!1,m()},S=s.id==="",G=async p=>{await v.incraseViewCount(p)},J=k(!1),Y=k(!0),A=k({}),ne=k(!1),ae=k(!1),N=k(!1),H=k([]),j=async p=>{Z.value="",se.value=[],re.value=[],Y.value=!0;const[f,U]=await v.getWorkById(p);U?U=="Work not found"?t("showEmpty"):t("showError"):(A.value=f,H.value=[],f.artwork_assets.forEach(te=>{H.value.push({thumbnail:u(te.bucket,te.filename,!0),source:u(te.bucket,te.filename,!1)})}),!a.loggedIn&&f.is_explicit||f.is_explicit&&!a.user.user_settings.show_explicit?(C.value=!0,c()):C.value=!1,ne.value=f.liked,ae.value=f.saved,N.value=f.in_album,rt().formatApiToWeb(f.scheduled_post)<rt().currentUtcTime()?(await Rt(p),a.loggedIn&&await E(p),(!a.loggedIn||a.user.id!==f.users.id)&&await G(p)):a.user.id!==f.users.id?y.push("/"):J.value=!0),Y.value=!1,t("stopLoading")},T=k({}),E=async p=>{const[f,U]=await d.getReportStatus({type:"artwork",postId:p});U||(f.length?T.value=f[0]:T.value={})},Q=async()=>{const[p,f]=await v.like({workId:A.value.id});if(p){ne.value=!0;const U=document.getElementById("like-button");U.classList.add("animate-bounce"),setInterval(()=>{U.classList.remove("animate-bounce")},2500)}},ge=async()=>{const[p,f]=await v.unlike({workId:A.value.id});p&&(ne.value=!1)},se=k([]),Me=Je({perPage:3,page:0}),Ie=k([]),at=async p=>{const[f,U]=await v.getComments({workId:p,pagination:{page:Me.page,perPage:Me.perPage}});if(f)return f.pagination.current_page===f.pagination.first_last.last_page?Le.value=!1:Le.value=!0,f.comments.forEach(q=>{q.liked&&we.value.push(q.id),Ie.value.push(q.id)}),f.comments},Rt=async p=>{try{(await at(p)).forEach(U=>se.value.push(U))}catch{}},Le=k(!1),St=async p=>{try{Me.page+=1,(await at(p)).forEach(U=>se.value.push(U))}catch{}},Z=k(),Be=200,Pt=Ue(()=>Z.value!=null&&Z.value!==""?Be-Z.value.length:Be),be=k(!1),Lt=async()=>{be.value=!0;try{const[p,f,U]=await v.addComment({workId:A.value.id,comment:Z.value});p&&(Z.value="",se.value.splice(0,0,f),se.value.join(),Ie.value.splice(0,0,f.id),Ie.value.join())}catch{}be.value=!1},Ot=async p=>{const[f,U]=await v.deleteComment({commentId:p});if(f){const q=Ie.value.indexOf(p);se.value.splice(q,1),Ie.value.splice(q,1)}},we=k([]),Ut=async p=>{const[f,U]=await v.likeComment({commentId:p});if(f){we.value.push(p);const q=document.getElementById(`comment-like-button-${p}`);q.classList.add("animate-bounce"),setInterval(()=>{q.classList.remove("animate-bounce")},2500)}},Vt=async p=>{const[f,U]=await v.unlikeComment({commentId:p});if(f){const q=we.value.indexOf(p);we.value.splice(q,1)}},je=Je({perPage:2,page:0}),re=k([]),ke=k([]),Fe=k(!0),st=async p=>{const[f,U,q]=await v.getCommentReplies({commentId:p,pagination:{page:je.page,perPage:je.perPage}});if(!q)return U.current_page===U.first_last.last_page&&(Fe.value=!1),f.map(te=>ke.value.push(te.id)),f},$e=k(0),De=async p=>{Fe.value=!0,ke.value=[];try{const f=await st(p);re.value={[p]:f},f.forEach(q=>{q.liked&&ye.value.push(q.id)}),$e.value&&Ne($e.value);const U=document.getElementById(`comment-replies-${p}`);U.classList.add("flex"),U.classList.remove("hidden"),$e.value=p}catch{}},Ne=p=>{const f=document.getElementById(`comment-replies-${p}`);f.classList.remove("flex"),f.classList.add("hidden"),$e.value=0},qt=async p=>{je.page+=1;try{(await st(p)).forEach(U=>{re.value[p].push(U)})}catch{}},Oe=k(0),Tt=async p=>{await De(p),Oe.value=p},ee=k(),He=200,Et=Ue(()=>ee.value!=null&&ee.value!==""?He-ee.value.length:He),xe=k(!1),Mt=async p=>{xe.value=!0;try{const[f,U,q]=await v.addReply({commentId:p,reply:ee.value});f&&(De(p),ee.value="",re.value[p].splice(0,0,U),re.value[p].join(),Oe.value=0,ke.value.splice(0,0,U.id),ke.value.join())}catch{}xe.value=!1},Bt=async(p,f)=>{const[U,q]=await v.deleteReply({replyId:f});if(U){const te=ke.value.indexOf(f);re.value[p].splice(te,1),ke.value.splice(te,1)}},ye=k([]),jt=async p=>{const[f,U]=await v.likeReply({replyId:p});if(f){ye.value.push(p);const q=document.getElementById(`reply-like-button-${p}`);q.classList.add("animate-bounce"),setInterval(()=>{q.classList.remove("animate-bounce")},2500)}},Ft=async p=>{const[f,U]=await v.unlikeReply({replyId:p});if(f){const q=ye.value.indexOf(p);ye.value.splice(q,1)}},Qe=k(!1),ze=k(!1),ot=async p=>{const[f,U]=await v.deleteWork({workId:[p]});f&&(ze.value=!0,setTimeout(()=>{y.push("/")},1500))},We=k(null),Dt=()=>{X().openModal("collection-selection-modal"),We.value.fetchCollection(),We.value.fetchCurrentSaved()},Nt=p=>{p?ae.value=!1:ae.value=!0,it().animate("save-to-collection-button")},lt=k(null),Ht=()=>{X().openModal("album-selection-modal"),lt.value.fetchCurrentSaved()},Qt=p=>{p?N.value=!1:N.value=!0,it().animate("save-to-album-button")},zt=()=>{X().openModal("share-to-feed-modal")},nt=k(!1);let Wt;const Gt=p=>{const f=k(h.public.appUrl+p),{copy:U}=It({source:f});U(),xt().splash(Wt,nt,"copy-alert")},Jt=k(null),Yt=()=>{X().openModal("report-modal")};return e({view:j}),(p,f)=>{const U=na("viewer"),q=Pe,te=ra("auto-animate");return b(),_(he,null,[$(r("div",co,[x(Ee,{loading:Y.value},null,8,["loading"])],512),[[R,Y.value&&!p.isMobile()&&S]]),$(r("div",{class:D(["work-container work-view",S?"w-full 2xl:w-4/6 2xl:mx-auto p-2 md:p-6 theme-color":"w-full"])},[r("div",{class:D(["left-side",{"overflow-y-scroll mr-6":S}])},[J.value&&!ze.value?(b(),_("div",uo,[r("div",mo,[x(V,{name:"i-ion-alert-outline"}),po]),r("div",ho,[r("span",{class:"text-red-500",onClick:f[0]||(f[0]=I=>Qe.value=!0)},g(p.$t("artworks.deleteArtwork")),1),$(r("div",null,[r("span",vo,[B(g(p.$t("alert.areYouSure"))+" ",1),r("span",fo,"("+g(p.$t("alert.youCannotUndoThisAction"))+")",1)]),r("span",{class:"mr-2 text-red-500 hover:underline",onClick:f[1]||(f[1]=I=>ot(A.value.id))},g(p.$t("yes")),1),r("span",{class:"hover:underline",onClick:f[2]||(f[2]=I=>Qe.value=!1)},g(p.$t("no")),1)],512),[[R,Qe.value]])])])):P("",!0),ze.value?(b(),_("div",wo,g(p.$t("artworks.successDelete")),1)):P("",!0),$(r("div",yo,[r("span",go,g(O(a).loggedIn?p.$t("explicitContentAlert"):p.$t("explicitContentAlertForGuest")),1),r("button",{class:"primary-button",onClick:f[3]||(f[3]=pe(I=>L(),["prevent"]))},g(p.$t("show")),1)],512),[[R,C.value]]),r("div",bo,[x(U,{options:{url:"data-source"},images:H.value,class:"overflow-hidden rounded-md"},{default:K(()=>[(b(!0),_(he,null,ve(H.value,(I,M)=>(b(),_("img",{key:I.thumbnail,src:I.thumbnail,"data-source":I.source,class:D(["overflow-hidden mb-2 rounded cursor-pointer image image-layer unselectable",{"blur-lg unclickable":C.value},C.value?"brightness-50":"brightness-100"]),onError:f[4]||(f[4]=(...Ae)=>p.imageLoadError&&p.imageLoadError(...Ae))},null,42,ko))),128))]),_:1},8,["images"])]),r("div",xo,[r("div",Co,[A.value.is_explicit?(b(),_("span",{key:0,class:D(["py-1 px-2 mr-2 font-bold rounded-md text-xxs",S?"theme-color-secondary":"bg-tag"])},"E",2)):P("",!0),$(r("span",_o,[r("b",null,g(p.shortNumber(A.value.views)),1),B(" "+g(p.$t("count.views")),1)],512),[[R,A.value.views>0]]),A.value._count?$((b(),_("span",Io,[r("b",null,g(p.thousand(A.value._count.artwork_likes)),1),B(" "+g(p.$t("count.likes")),1)],512)),[[R,A.value._count.artwork_likes>0]]):P("",!0),A.value._count?$((b(),_("span",$o,[r("b",null,g(p.thousand(A.value._count.artwork_comments)),1),B(" "+g(p.$t("count.comments")),1)],512)),[[R,A.value._count.artwork_comments>0]]):P("",!0),A.value._count?$((b(),_("span",Ao,[r("b",null,g(p.thousand(A.value._count.artwork_collection_has_works)),1)],512)),[[R,A.value._count.artwork_collection_has_works]]):P("",!0)]),J.value?P("",!0):(b(),_("div",Ro,[O(a).loggedIn?(b(),_("span",{key:0,onClick:f[5]||(f[5]=I=>ne.value?ge():Q())},[$(x(V,{id:"like-button",name:"i-ri-heart-3-line",class:"text-red-500 hover:text-red-500"},null,512),[[R,ne.value]]),$(x(V,{name:"i-ion-heart-outline",class:"hover:text-red-500"},null,512),[[R,!ne.value]])])):P("",!0),O(a).loggedIn?(b(),_("span",{key:1,onClick:f[6]||(f[6]=I=>Dt())},[$(x(V,{id:"save-to-collection-button",name:"i-majesticons-bookmark",class:"text-blue-500 hover:text-blue-500"},null,512),[[R,ae.value]]),$(x(V,{name:"i-majesticons-bookmark-line",class:"hover:text-blue-500"},null,512),[[R,!ae.value]])])):P("",!0),O(a).loggedIn&&A.value.users&&O(a).user.id===A.value.users.id?(b(),_("span",{key:2,onClick:f[7]||(f[7]=I=>Ht())},[$(x(V,{id:"save-to-album-button",name:"i-ion-folder-open",class:"text-green-500 hover:text-green-500"},null,512),[[R,N.value]]),$(x(V,{name:"i-bx-photo-album",class:"hover:text-blue-500"},null,512),[[R,!N.value]])])):P("",!0),O(a).loggedIn?(b(),_("span",{key:3,onClick:f[8]||(f[8]=I=>zt())},[x(V,{name:"i-uil-share",class:"hover:text-blue-500"})])):P("",!0),r("div",So,[r("button",Po,[r("span",null,[x(V,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),r("div",Lo,[r("div",Oo,[S?(b(),ce(q,{key:0,to:"/a/"+A.value.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:K(()=>[x(V,{name:"i-fluent-arrow-enter-20-filled",class:"mr-2 text-base"}),B(" "+g(p.$t("open")),1)]),_:1},8,["to"])):P("",!0),S?(b(),ce(q,{key:1,to:"/a/"+A.value.id,target:"_blank",class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:K(()=>[x(V,{name:"i-ci-external-link",class:"mr-2 text-base"}),B(" "+g(p.$t("openInNewTab")),1)]),_:1},8,["to"])):P("",!0),S?(b(),_("div",Uo)):P("",!0),O(a).loggedIn&&A.value.users&&O(a).user.id!=A.value.users.id&&!O(a).user.is_admin&&!O(a).user.is_moderator?(b(),_("div",{key:3,to:"#",class:D(["flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",{"rounded-t-md":!S}]),onClick:f[9]||(f[9]=I=>Yt())},[x(V,{name:"i-akar-icons-flag",class:"mr-2 text-base"}),B(" "+g(p.$t("report")),1)],2)):P("",!0),r("div",{class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 cursor-pointer theme-color hover:button-color parent-icon hover:text-white",onClick:f[10]||(f[10]=I=>Gt("/a/"+A.value.id))},[x(V,{name:"i-icon-park-outline-copy",class:"mr-2 text-base"}),B(" "+g(p.$t("copySharableLink")),1)]),O(a).loggedIn&&A.value.users&&O(a).user.id===A.value.users.id?(b(),_("div",Vo)):P("",!0),O(a).loggedIn&&A.value.users&&O(a).user.id===A.value.users.id?(b(),ce(q,{key:5,to:"/works/update/"+A.value.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:K(()=>[x(V,{name:"i-ion-settings-outline",class:"mr-2 text-base"}),B(" "+g(p.$t("update")),1)]),_:1},8,["to"])):P("",!0),O(a).loggedIn&&A.value.users&&O(a).user.id===A.value.users.id?(b(),_("div",{key:6,to:"/a/"+A.value.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 cursor-pointer bg-danger hover:button-color parent-icon hover:text-white",onClick:f[11]||(f[11]=I=>p.openModal("work-deletion-confirm-modal"))},[x(V,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),B(" "+g(p.$t("delete")),1)],8,qo)):P("",!0)])])])]))]),x(pt,{section:o.section,class:"flex-md-hidden","is-modal":S,"artwork-detail":A.value,"preview-mode":J.value,"is-desktop":!0},null,8,["section","artwork-detail","preview-mode"]),(b(),ce(la,null,[Y.value?P("",!0):(b(),ce(ht,{key:0,class:"mb-6 hidden-md-flex","artwork-detail":A.value,view:j,"is-href":!S,"keep-artist-page-number":!0,"pagination-per-page":4},null,8,["artwork-detail","is-href","pagination-per-page"]))],1024))],2),r("div",{class:D(["right-side",{"pr-3 overflow-y-scroll":S}])},[x(pt,{section:o.section,class:"hidden-md-flex","is-modal":S,"artwork-detail":A.value,"preview-mode":J.value,"is-desktop":!1},null,8,["section","artwork-detail","preview-mode"]),Y.value?P("",!0):(b(),ce(ht,{key:0,class:"flex-md-hidden","artwork-detail":A.value,view:j,"is-href":!S,"keep-artist-page-number":!0,"pagination-per-page":4},null,8,["artwork-detail","is-href","pagination-per-page"])),To,r("section",Eo,[O(a).loggedIn&&!J.value?(b(),_("div",Mo,[r("div",Bo,[r("div",jo,[$(r("textarea",{"onUpdate:modelValue":f[12]||(f[12]=I=>Z.value=I),class:D(["input form-input",[{"cursor-not-allowed":be.value},{"theme-color-secondary textarea":S}]]),readonly:be.value,cols:"30",rows:Z.value!=null&&Z.value!=""?"8":"0",placeholder:p.$t("comments.inputPlaceholder"),maxlength:Be,"data-gramm":"false"},null,10,Fo),[[Re,Z.value]]),$(r("span",{class:"absolute left-4 bottom-6 py-1 px-2 text-white rounded-md button-color"},g(O(Pt)),513),[[R,Z.value!=null&&Z.value!=""]]),r("span",{class:"absolute right-2 bottom-5 py-1 px-2",onClick:f[13]||(f[13]=pe(I=>Lt(),["prevent"]))},[$(x(V,{name:"i-ion-prism",class:"text-xl transition-all duration-100 rotate-90 cursor-pointer text-colored"},null,512),[[R,Z.value!=null&&Z.value!=""&&!be.value]]),$(x(Ye,null,null,512),[[R,be.value]])])])])])):P("",!0),O(a).loggedIn?P("",!0):(b(),_("div",Do,g(p.$t("comments.loginOrRegisterToLeaveComment")),1)),r("div",No,[(b(!0),_(he,null,ve(se.value,I=>$((b(),_("div",{key:I.id,class:"flex flex-row w-full comment-item"},[x(q,{class:"mr-2",to:"/profile/"+I.users.username},{default:K(()=>[r("img",{class:"w-10 h-10 avatar",src:p.avatarCoverUrl(I.users.avatar_bucket,I.users.avatar_filename),onError:f[14]||(f[14]=(...M)=>p.imageLoadError&&p.imageLoadError(...M))},null,40,Ho)]),_:2},1032,["to"]),r("div",Qo,[r("div",{class:D(["p-3 w-full rounded-md",S?"theme-color-secondary":"theme-color"])},[r("div",zo,[x(q,{to:"/profile/"+I.users.username,class:"mb-2 text-xs font-semibold transition-all duration-150 cursor-pointer"},{default:K(()=>[B(g(I.users.name),1)]),_:2},1032,["to"]),r("div",Wo,g(p.formatDate(I.created_at,!0)),1)]),r("div",null,g(I.comment),1),r("div",Go,[r("div",{class:"cursor-pointer hover:underline",onClick:M=>$e.value==I.id?Ne(I.id):De(I.id)},[I._count.artwork_comment_has_replies>0?(b(),_("span",Yo,[r("b",null,g(p.shortNumber(I._count.artwork_comment_has_replies)),1),B(" "+g(I._count.artwork_comment_has_replies>1?p.$t("comments.replies.replies").toLowerCase():p.$t("comments.replies.reply").toLowerCase()),1)])):P("",!0)],8,Jo),O(a).loggedIn?(b(),_("div",Ko,[r("span",{class:"reaction",onClick:M=>we.value.includes(I.id)?Vt(I.id):Ut(I.id)},[$(x(V,{name:"i-ion-heart-outline",class:"text-gray-500 hover:text-red-500"},null,512),[[R,!we.value.includes(I.id)]]),$(x(V,{id:"comment-like-button-"+I.id,name:"i-ri-heart-3-line",class:"text-red-500 hover:text-red-500"},null,8,["id"]),[[R,we.value.includes(I.id)]]),B(" "+g(p.shortNumber(I._count.artwork_comment_has_likes)),1)],8,Xo),r("span",{class:"reaction",onClick:M=>Tt(I.id)},[x(V,{name:"i-quill-reply",class:"text-gray-500 hover:text-blue-500"})],8,Zo),r("div",el,[r("button",{type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options",onClick:f[15]||(f[15]=M=>Oe.value=0)},[r("span",null,[x(V,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),r("div",tl,[r("div",al,[x(q,{to:"/profile/"+I.users.username,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:f[16]||(f[16]=pe(()=>{},["prevent"]))},{default:K(()=>[x(V,{name:"i-fluent-person-32-regular",class:"mr-2 text-base"}),B(" "+g(p.$t("viewProfile")),1)]),_:2},1032,["to"]),O(a).loggedIn&&O(a).user.id===I.users.id?(b(),_("div",{key:0,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:M=>Ot(I.id)},[x(V,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),B(" "+g(p.$t("delete")),1)],8,sl)):P("",!0)])])])])):P("",!0)])],2),O(a).loggedIn?$((b(),_("div",ol,[r("div",ll,[r("div",nl,[$(r("textarea",{id:"reply-"+I.id,"onUpdate:modelValue":f[17]||(f[17]=M=>ee.value=M),class:D(["mt-2 w-full input form-input",[{"cursor-not-allowed":xe.value},{"theme-color-secondary textarea":S}]]),readonly:xe.value,cols:"30",rows:ee.value!=null&&ee.value!=""?"5":"0",placeholder:p.$t("comments.replies.write"),maxlength:He,"data-gramm":"false"},null,10,rl),[[Re,ee.value]]),$(r("span",{class:"absolute left-4 bottom-6 py-1 px-2 text-white rounded-md button-color"},g(O(Et)),513),[[R,ee.value!=null&&ee.value!=""]]),r("span",{class:"absolute right-2 bottom-5 py-1 px-2",onClick:pe(M=>Mt(I.id),["prevent"])},[$(x(V,{name:"i-ion-prism",class:"text-xl transition-all duration-100 rotate-90 cursor-pointer text-colored"},null,512),[[R,ee.value!=null&&ee.value!=""&&!xe.value]]),$(x(Ye,null,null,512),[[R,xe.value]])],8,il)])])],512)),[[R,Oe.value===I.id]]):P("",!0),r("div",{id:"comment-replies-"+I.id,class:"hidden flex-col mt-2"},[re.value[I.id]&&re.value[I.id].length?(b(),_("div",ul,[r("span",dl,g(p.$t("comments.replies.replies")),1),r("span",{class:"float-right text-xs cursor-pointer hover:font-semibold",onClick:M=>Ne(I.id)},g(p.$t("hide")),9,ml)])):P("",!0),(b(!0),_(he,null,ve(re.value[I.id],M=>(b(),_("div",{key:M.id,class:D(["p-3 mb-2 w-full rounded-md border-l-4",S?"theme-color-secondary":"theme-color"])},[r("div",pl,[x(q,{to:"/profile/"+M.users.username,class:"flex flex-row leading-6"},{default:K(()=>[r("img",{class:"mr-2 w-6 h-6 rounded-full",src:p.avatarCoverUrl(M.users.avatar_bucket,M.users.avatar_filename),onError:f[18]||(f[18]=(...Ae)=>p.imageLoadError&&p.imageLoadError(...Ae))},null,40,hl),r("span",vl,g(M.users.name),1)]),_:2},1032,["to"]),r("span",fl,g(p.formatDate(M.created_at,!0)),1)]),r("div",wl,g(M.content),1),O(a).loggedIn?(b(),_("div",yl,[gl,r("div",bl,[r("span",{class:"reaction",onClick:Ae=>ye.value.includes(M.id)?Ft(M.id):jt(M.id)},[$(x(V,{id:"reply-like-button-"+M.id,name:"i-ri-heart-3-line",class:"text-red-500 hover:text-red-500"},null,8,["id"]),[[R,ye.value.includes(M.id)]]),$(x(V,{name:"i-ion-heart-outline",class:"text-gray-500 hover:text-red-500"},null,512),[[R,!ye.value.includes(M.id)]]),B(" "+g(p.shortNumber(M._count.artwork_comment_reply_has_likes)),1)],8,kl),r("div",xl,[r("button",Cl,[r("span",null,[x(V,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),r("div",_l,[r("div",Il,[x(q,{to:"/profile/"+M.users.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:f[19]||(f[19]=pe(()=>{},["prevent"]))},{default:K(()=>[x(V,{name:"i-fluent-person-32-regular",class:"mr-2 text-base"}),B(" "+g(p.$t("viewProfile")),1)]),_:2},1032,["to"]),O(a).loggedIn&&O(a).user.id===M.users.id?(b(),_("div",{key:0,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:Ae=>Bt(I.id,M.id)},[x(V,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),B(" "+g(p.$t("delete")),1)],8,$l)):P("",!0)])])])])])):P("",!0)],2))),128)),re.value[I.id]&&Fe.value?(b(),_("div",{key:1,class:"mb-1 text-center transition ease-in-out delay-75 cursor-pointer hover:font-semibold hover:underline text-color-secondary href",onClick:M=>qt(I.id)},g(p.$t("comments.replies.loadMore")),9,Al)):P("",!0)],8,cl)])])),[[te]])),128))]),A.value._count?$((b(),_("div",{key:2,class:"text-center capitalize href",onClick:f[20]||(f[20]=pe(I=>St(A.value.id),["prevent"]))},g(p.$t("comments.loadOlder")),513)),[[R,A.value._count.artwork_comments>3&&Le.value]]):P("",!0),$(r("div",{class:"w-full text-xs italic text-center"},g(p.$t("comments.reachedTheEnd")),513),[[R,se.value.length&&!Le.value]]),O(a).loggedIn&&!se.value.length&&!J.value?(b(),_("div",Rl,g(p.$t("comments.noCommentYet")),1)):P("",!0)])],2),Y.value?P("",!0):(b(),ce(hs,{key:0,id:"collection-selection-modal","modal-id":"collection-selection-modal",ref_key:"collectionSelectionModalRef",ref:We,"work-id":A.value.id,class:"modal",onSave:Nt},null,8,["work-id"])),!Y.value&&O(a).loggedIn&&A.value.users&&O(a).user.id==A.value.users.id?(b(),ce(O(Is),{key:1,id:"album-selection-modal",ref_key:"albumSelectionModalRef",ref:lt,"modal-id":"album-selection-modal","work-id":A.value.id,class:"modal",onAddedToAlbum:Qt},null,8,["work-id"])):P("",!0),x(Ss,{id:"work-deletion-confirm-modal","modal-id":"work-deletion-confirm-modal",message:`${p.$t("alert.areYouSure")} ${p.$t("alert.youCannotUndoThisAction")}`,class:"modal",onOnAccept:f[21]||(f[21]=I=>ot(A.value.id))},null,8,["message"]),x(Ks,{id:"report-modal",ref_key:"reportModalRef",ref:Jt,class:"modal",type:"artwork","post-id":A.value.id,"report-status":T.value},null,8,["post-id","report-status"]),x(io,{id:"share-to-feed-modal",ref:"shareToFeedModalRef",class:"modal","post-id":A.value.id},null,8,["post-id"]),$(x($t,{id:"copy-alert",text:p.$t("linkCopied"),icon:"i-bi-check-all"},null,8,["text"]),[[R,nt.value]])],2),[[R,!Y.value]])],64)}}},El=fe(Sl,[["__scopeId","data-v-1bcaa719"]]);export{El as M,$t as S,Ya as W,Ss as _,hs as a,Ca as b,It as c,xt as d,vs as e,ts as f,Is as g,it as u};
