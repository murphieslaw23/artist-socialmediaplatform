import{h as He,watch as Ft,onMounted as Rt,ref as O,resolveComponent as Pt,openBlock as q,createElementBlock as re,toDisplayString as S,createCommentVNode as ge,createElementVNode as v,withDirectives as L,createTextVNode as oe,vShow as F,createVNode as R,withModifiers as ft,normalizeClass as $,vModelText as Ue,unref as Oe,createBlock as gt,pushScopeId as Nt,popScopeId as Wt,withCtx as Bt}from"vue";import{q as Re,r as K,t as U,v as G,w as Gt,x as le,y as ce,z as Yt,C as $t,D as mt,E as pt,F as wt,G as Ht,H as yt,I as ze,J as Pe,K as ke,L as Ut,M as zt,O as je,j as jt,h as qt,c as Kt,u as bt,d as vt,N as Xt,P as xt,o as Zt,a as Jt,l as Qt,p as ei}from"../server.mjs";import{u as ti}from"./useI18n.3d881ce7.js";import{u as ii,L as si}from"./Layout.5e9abb83.js";import{_ as Et,a as J}from"./Icon.9f42b73b.js";import"vue-router";import{u as ai,a as ni}from"./useFeed.a26f6bd0.js";import{S as be}from"./Spinner.dd0d4a18.js";import"#internal/nitro";function Le(i){return new Date(i).setHours(0,0,0,0)}function X(){return new Date().setHours(0,0,0,0)}function H(...i){switch(i.length){case 0:return X();case 1:return Le(i[0])}const e=new Date(0);return e.setFullYear(...i),e.setHours(0,0,0,0)}function ee(i,e){const t=new Date(i);return t.setDate(t.getDate()+e)}function ri(i,e){return ee(i,e*7)}function ve(i,e){const t=new Date(i),s=t.getMonth()+e;let a=s%12;a<0&&(a+=12);const n=t.setMonth(s);return t.getMonth()!==a?t.setDate(0):n}function te(i,e){const t=new Date(i),s=t.getMonth(),a=t.setFullYear(t.getFullYear()+e);return s===1&&t.getMonth()===2?t.setDate(0):a}function qe(i,e){return(i-e+7)%7}function xe(i,e,t=0){const s=new Date(i).getDay();return ee(i,qe(e,t)-qe(s,t))}function oi(i){const e=xe(i,4,1),t=xe(new Date(e).setMonth(0,4),4,1);return Math.round((e-t)/6048e5)+1}function j(i,e){const t=new Date(i).getFullYear();return Math.floor(t/e)*e}const Fe=/dd?|DD?|mm?|MM?|yy?(?:yy)?/,li=/[\s!-/:-@[-`{-~年月日]+/;let Me={};const Ke={y(i,e){return new Date(i).setFullYear(parseInt(e,10))},m(i,e,t){const s=new Date(i);let a=parseInt(e,10)-1;if(isNaN(a)){if(!e)return NaN;const n=e.toLowerCase(),r=l=>l.toLowerCase().startsWith(n);if(a=t.monthsShort.findIndex(r),a<0&&(a=t.months.findIndex(r)),a<0)return NaN}return s.setMonth(a),s.getMonth()!==Dt(a)?s.setDate(0):s.getTime()},d(i,e){return new Date(i).setDate(parseInt(e,10))}},ci={d(i){return i.getDate()},dd(i){return me(i.getDate(),2)},D(i,e){return e.daysShort[i.getDay()]},DD(i,e){return e.days[i.getDay()]},m(i){return i.getMonth()+1},mm(i){return me(i.getMonth()+1,2)},M(i,e){return e.monthsShort[i.getMonth()]},MM(i,e){return e.months[i.getMonth()]},y(i){return i.getFullYear()},yy(i){return me(i.getFullYear(),2).slice(-2)},yyyy(i){return me(i.getFullYear(),4)}};function Dt(i){return i>-1?i%12:Dt(i+12)}function me(i,e){return i.toString().padStart(e,"0")}function _t(i){if(typeof i!="string")throw new Error("Invalid date format.");if(i in Me)return Me[i];const e=i.split(Fe),t=i.match(new RegExp(Fe,"g"));if(e.length===0||!t)throw new Error("Invalid date format.");const s=t.map(n=>ci[n]),a=Object.keys(Ke).reduce((n,r)=>(t.find(d=>d[0]!=="D"&&d[0].toLowerCase()===r)&&n.push(r),n),[]);return Me[i]={parser(n,r){const l=n.split(li).reduce((d,g,h)=>{if(g.length>0&&t[h]){const u=t[h][0];u==="M"?d.m=g:u!=="D"&&(d[u]=g)}return d},{});return a.reduce((d,g)=>{const h=Ke[g](d,l[g],r);return isNaN(h)?d:h},X())},formatter(n,r){let l=s.reduce((d,g,h)=>d+=`${e[h]}${g(n,r)}`,"");return l+=Re(e)}}}function he(i,e,t){if(i instanceof Date||typeof i=="number"){const s=Le(i);return isNaN(s)?void 0:s}if(!!i){if(i==="today")return X();if(e&&e.toValue){const s=e.toValue(i,e,t);return isNaN(s)?void 0:Le(s)}return _t(e).parser(i,t)}}function Ee(i,e,t){if(isNaN(i)||!i&&i!==0)return"";const s=typeof i=="number"?new Date(i):i;return e.toDisplay?e.toDisplay(s,e,t):_t(e).formatter(s,t)}const ne={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM y"}},Ne={autohide:!1,beforeShowDay:null,beforeShowDecade:null,beforeShowMonth:null,beforeShowYear:null,calendarWeeks:!1,clearBtn:!1,dateDelimiter:",",datesDisabled:[],daysOfWeekDisabled:[],daysOfWeekHighlighted:[],defaultViewDate:void 0,disableTouchKeyboard:!1,format:"mm/dd/yyyy",language:"en",maxDate:null,maxNumberOfDates:1,maxView:3,minDate:null,nextArrow:'<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>',orientation:"auto",pickLevel:0,prevArrow:'<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg>',showDaysOfWeek:!0,showOnClick:!0,showOnFocus:!0,startView:0,title:"",todayBtn:!1,todayBtnMode:0,todayHighlight:!1,updateOnBlur:!0,weekStart:0},{language:Ie,format:di,weekStart:hi}=Ne;function Xe(i,e){return i.length<6&&e>=0&&e<7?K(i,e):i}function Ze(i){return(i+6)%7}function Je(i,e,t,s){const a=he(i,e,t);return a!==void 0?a:s}function Te(i,e,t=3){const s=parseInt(i,10);return s>=0&&s<=t?s:e}function Ae(i,e){const t=Object.assign({},i),s={},a=e.constructor.locales;let{format:n,language:r,locale:l,maxDate:d,maxView:g,minDate:h,pickLevel:u,startView:x,weekStart:w}=e.config||{};if(t.language){let o;if(t.language!==r&&(a[t.language]?o=t.language:(o=t.language.split("-")[0],a[o]===void 0&&(o=!1))),delete t.language,o){r=s.language=o;const p=l||a[Ie];l=Object.assign({format:di,weekStart:hi},a[Ie]),r!==Ie&&Object.assign(l,a[r]),s.locale=l,n===p.format&&(n=s.format=l.format),w===p.weekStart&&(w=s.weekStart=l.weekStart,s.weekEnd=Ze(l.weekStart))}}if(t.format){const o=typeof t.format.toDisplay=="function",p=typeof t.format.toValue=="function",b=Fe.test(t.format);(o&&p||b)&&(n=s.format=t.format),delete t.format}let f=h,y=d;if(t.minDate!==void 0&&(f=t.minDate===null?H(0,0,1):Je(t.minDate,n,l,f),delete t.minDate),t.maxDate!==void 0&&(y=t.maxDate===null?void 0:Je(t.maxDate,n,l,y),delete t.maxDate),y<f?(h=s.minDate=y,d=s.maxDate=f):(h!==f&&(h=s.minDate=f),d!==y&&(d=s.maxDate=y)),t.datesDisabled&&(s.datesDisabled=t.datesDisabled.reduce((o,p)=>{const b=he(p,n,l);return b!==void 0?K(o,b):o},[]),delete t.datesDisabled),t.defaultViewDate!==void 0){const o=he(t.defaultViewDate,n,l);o!==void 0&&(s.defaultViewDate=o),delete t.defaultViewDate}if(t.weekStart!==void 0){const o=Number(t.weekStart)%7;isNaN(o)||(w=s.weekStart=o,s.weekEnd=Ze(o)),delete t.weekStart}if(t.daysOfWeekDisabled&&(s.daysOfWeekDisabled=t.daysOfWeekDisabled.reduce(Xe,[]),delete t.daysOfWeekDisabled),t.daysOfWeekHighlighted&&(s.daysOfWeekHighlighted=t.daysOfWeekHighlighted.reduce(Xe,[]),delete t.daysOfWeekHighlighted),t.maxNumberOfDates!==void 0){const o=parseInt(t.maxNumberOfDates,10);o>=0&&(s.maxNumberOfDates=o,s.multidate=o!==1),delete t.maxNumberOfDates}t.dateDelimiter&&(s.dateDelimiter=String(t.dateDelimiter),delete t.dateDelimiter);let m=u;t.pickLevel!==void 0&&(m=Te(t.pickLevel,2),delete t.pickLevel),m!==u&&(u=s.pickLevel=m);let E=g;t.maxView!==void 0&&(E=Te(t.maxView,g),delete t.maxView),E=u>E?u:E,E!==g&&(g=s.maxView=E);let c=x;if(t.startView!==void 0&&(c=Te(t.startView,c),delete t.startView),c<u?c=u:c>g&&(c=g),c!==x&&(s.startView=c),t.prevArrow){const o=U(t.prevArrow);o.childNodes.length>0&&(s.prevArrow=o.childNodes),delete t.prevArrow}if(t.nextArrow){const o=U(t.nextArrow);o.childNodes.length>0&&(s.nextArrow=o.childNodes),delete t.nextArrow}if(t.disableTouchKeyboard!==void 0&&(s.disableTouchKeyboard="ontouchstart"in document&&!!t.disableTouchKeyboard,delete t.disableTouchKeyboard),t.orientation){const o=t.orientation.toLowerCase().split(/\s+/g);s.orientation={x:o.find(p=>p==="left"||p==="right")||"auto",y:o.find(p=>p==="top"||p==="bottom")||"auto"},delete t.orientation}if(t.todayBtnMode!==void 0){switch(t.todayBtnMode){case 0:case 1:s.todayBtnMode=t.todayBtnMode}delete t.todayBtnMode}return Object.keys(t).forEach(o=>{t[o]!==void 0&&G(Ne,o)&&(s[o]=t[o])}),s}class We{constructor(e,t){Object.assign(this,t,{picker:e,element:U('<div class="datepicker-view flex"></div>').firstChild,selected:[]}),this.init(this.picker.datepicker.config)}init(e){e.pickLevel!==void 0&&(this.isMinView=this.id===e.pickLevel),this.setOptions(e),this.updateFocus(),this.updateSelection()}performBeforeHook(e,t,s){let a=this.beforeShow(new Date(s));switch(typeof a){case"boolean":a={enabled:a};break;case"string":a={classes:a}}if(a){if(a.enabled===!1&&(e.classList.add("disabled"),K(this.disabled,t)),a.classes){const n=a.classes.split(/\s+/);e.classList.add(...n),n.includes("disabled")&&K(this.disabled,t)}a.content&&Gt(e,a.content)}}}class ui extends We{constructor(e){super(e,{id:0,name:"days",cellClass:"day"})}init(e,t=!0){if(t){const s=U(Yt).firstChild;this.dow=s.firstChild,this.grid=s.lastChild,this.element.appendChild(s)}super.init(e)}setOptions(e){let t;if(G(e,"minDate")&&(this.minDate=e.minDate),G(e,"maxDate")&&(this.maxDate=e.maxDate),e.datesDisabled&&(this.datesDisabled=e.datesDisabled),e.daysOfWeekDisabled&&(this.daysOfWeekDisabled=e.daysOfWeekDisabled,t=!0),e.daysOfWeekHighlighted&&(this.daysOfWeekHighlighted=e.daysOfWeekHighlighted),e.todayHighlight!==void 0&&(this.todayHighlight=e.todayHighlight),e.weekStart!==void 0&&(this.weekStart=e.weekStart,this.weekEnd=e.weekEnd,t=!0),e.locale){const s=this.locale=e.locale;this.dayNames=s.daysMin,this.switchLabelFormat=s.titleFormat,t=!0}if(e.beforeShowDay!==void 0&&(this.beforeShow=typeof e.beforeShowDay=="function"?e.beforeShowDay:void 0),e.calendarWeeks!==void 0)if(e.calendarWeeks&&!this.calendarWeeks){const s=U($t).firstChild;this.calendarWeeks={element:s,dow:s.firstChild,weeks:s.lastChild},this.element.insertBefore(s,this.element.firstChild)}else this.calendarWeeks&&!e.calendarWeeks&&(this.element.removeChild(this.calendarWeeks.element),this.calendarWeeks=null);e.showDaysOfWeek!==void 0&&(e.showDaysOfWeek?(le(this.dow),this.calendarWeeks&&le(this.calendarWeeks.dow)):(ce(this.dow),this.calendarWeeks&&ce(this.calendarWeeks.dow))),t&&Array.from(this.dow.children).forEach((s,a)=>{const n=(this.weekStart+a)%7;s.textContent=this.dayNames[n],s.className=this.daysOfWeekDisabled.includes(n)?"dow disabled text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400 cursor-not-allowed":"dow text-center h-6 leading-6 text-sm font-medium text-gray-500 dark:text-gray-400"})}updateFocus(){const e=new Date(this.picker.viewDate),t=e.getFullYear(),s=e.getMonth(),a=H(t,s,1),n=xe(a,this.weekStart,this.weekStart);this.first=a,this.last=H(t,s+1,0),this.start=n,this.focused=this.picker.viewDate}updateSelection(){const{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e,t&&(this.range=t.dates)}render(){this.today=this.todayHighlight?X():void 0,this.disabled=[...this.datesDisabled];const e=Ee(this.focused,this.switchLabelFormat,this.locale);if(this.picker.setViewSwitchLabel(e),this.picker.setPrevBtnDisabled(this.first<=this.minDate),this.picker.setNextBtnDisabled(this.last>=this.maxDate),this.calendarWeeks){const t=xe(this.first,1,1);Array.from(this.calendarWeeks.weeks.children).forEach((s,a)=>{s.textContent=oi(ri(t,a))})}Array.from(this.grid.children).forEach((t,s)=>{const a=t.classList,n=ee(this.start,s),r=new Date(n),l=r.getDay();if(t.className=`datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ${this.cellClass}`,t.dataset.date=n,t.textContent=r.getDate(),n<this.first?a.add("prev","text-gray-500","dark:text-white"):n>this.last&&a.add("next","text-gray-500","dark:text-white"),this.today===n&&a.add("today","bg-gray-100","dark:bg-gray-600","dark:bg-gray-600"),(n<this.minDate||n>this.maxDate||this.disabled.includes(n))&&a.add("disabled","cursor-not-allowed"),this.daysOfWeekDisabled.includes(l)&&(a.add("disabled","cursor-not-allowed"),K(this.disabled,n)),this.daysOfWeekHighlighted.includes(l)&&a.add("highlighted"),this.range){const[d,g]=this.range;n>d&&n<g&&(a.add("range","bg-gray-200","dark:bg-gray-600"),a.remove("rounded-lg","rounded-l-lg","rounded-r-lg")),n===d&&(a.add("range-start","bg-gray-100","dark:bg-gray-600","rounded-l-lg"),a.remove("rounded-lg","rounded-r-lg")),n===g&&(a.add("range-end","bg-gray-100","dark:bg-gray-600","rounded-r-lg"),a.remove("rounded-lg","rounded-l-lg"))}this.selected.includes(n)&&(a.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),a.remove("text-gray-900","text-gray-500","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),n===this.focused&&a.add("focused"),this.beforeShow&&this.performBeforeHook(t,n,n)})}refresh(){const[e,t]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(s=>{s.classList.remove("range","range-start","range-end","selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white","focused","bg-gray-100","dark:bg-gray-600"),s.classList.add("text-gray-900","rounded-lg","dark:text-white")}),Array.from(this.grid.children).forEach(s=>{const a=Number(s.dataset.date),n=s.classList;a>e&&a<t&&(n.add("range","bg-gray-200","dark:bg-gray-600"),n.remove("rounded-lg")),a===e&&(n.add("range-start","bg-gray-200","dark:bg-gray-600","rounded-l-lg"),n.remove("rounded-lg","rounded-r-lg")),a===t&&(n.add("range-end","bg-gray-200","dark:bg-gray-600","rounded-r-lg"),n.remove("rounded-lg","rounded-l-lg")),this.selected.includes(a)&&(n.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),n.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),a===this.focused&&n.add("focused","bg-gray-100","dark:bg-gray-600")})}refreshFocus(){const e=Math.round((this.focused-this.start)/864e5);this.grid.querySelectorAll(".focused").forEach(t=>{t.classList.remove("focused","bg-gray-100","dark:bg-gray-600")}),this.grid.children[e].classList.add("focused","bg-gray-100","dark:bg-gray-600")}}function Qe(i,e){if(!i||!i[0]||!i[1])return;const[[t,s],[a,n]]=i;if(!(t>e||a<e))return[t===e?s:-1,a===e?n:12]}class fi extends We{constructor(e){super(e,{id:1,name:"months",cellClass:"month"})}init(e,t=!0){t&&(this.grid=this.element,this.element.classList.add("months","datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(U(mt("span",12,{"data-month":s=>s})))),super.init(e)}setOptions(e){if(e.locale&&(this.monthNames=e.locale.monthsShort),G(e,"minDate"))if(e.minDate===void 0)this.minYear=this.minMonth=this.minDate=void 0;else{const t=new Date(e.minDate);this.minYear=t.getFullYear(),this.minMonth=t.getMonth(),this.minDate=t.setDate(1)}if(G(e,"maxDate"))if(e.maxDate===void 0)this.maxYear=this.maxMonth=this.maxDate=void 0;else{const t=new Date(e.maxDate);this.maxYear=t.getFullYear(),this.maxMonth=t.getMonth(),this.maxDate=H(this.maxYear,this.maxMonth+1,0)}e.beforeShowMonth!==void 0&&(this.beforeShow=typeof e.beforeShowMonth=="function"?e.beforeShowMonth:void 0)}updateFocus(){const e=new Date(this.picker.viewDate);this.year=e.getFullYear(),this.focused=e.getMonth()}updateSelection(){const{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce((s,a)=>{const n=new Date(a),r=n.getFullYear(),l=n.getMonth();return s[r]===void 0?s[r]=[l]:K(s[r],l),s},{}),t&&t.dates&&(this.range=t.dates.map(s=>{const a=new Date(s);return isNaN(a)?void 0:[a.getFullYear(),a.getMonth()]}))}render(){this.disabled=[],this.picker.setViewSwitchLabel(this.year),this.picker.setPrevBtnDisabled(this.year<=this.minYear),this.picker.setNextBtnDisabled(this.year>=this.maxYear);const e=this.selected[this.year]||[],t=this.year<this.minYear||this.year>this.maxYear,s=this.year===this.minYear,a=this.year===this.maxYear,n=Qe(this.range,this.year);Array.from(this.grid.children).forEach((r,l)=>{const d=r.classList,g=H(this.year,l,1);if(r.className=`datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ${this.cellClass}`,this.isMinView&&(r.dataset.date=g),r.textContent=this.monthNames[l],(t||s&&l<this.minMonth||a&&l>this.maxMonth)&&d.add("disabled"),n){const[h,u]=n;l>h&&l<u&&d.add("range"),l===h&&d.add("range-start"),l===u&&d.add("range-end")}e.includes(l)&&(d.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),d.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),l===this.focused&&d.add("focused","bg-gray-100","dark:bg-gray-600"),this.beforeShow&&this.performBeforeHook(r,l,g)})}refresh(){const e=this.selected[this.year]||[],[t,s]=Qe(this.range,this.year)||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(a=>{a.classList.remove("range","range-start","range-end","selected","bg-blue-700","dark:bg-blue-600","dark:text-white","text-white","focused","bg-gray-100","dark:bg-gray-600"),a.classList.add("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")}),Array.from(this.grid.children).forEach((a,n)=>{const r=a.classList;n>t&&n<s&&r.add("range"),n===t&&r.add("range-start"),n===s&&r.add("range-end"),e.includes(n)&&(r.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),r.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),n===this.focused&&r.add("focused","bg-gray-100","dark:bg-gray-600")})}refreshFocus(){this.grid.querySelectorAll(".focused").forEach(e=>{e.classList.remove("focused","bg-gray-100")}),this.grid.children[this.focused].classList.add("focused","bg-gray-100","dark:bg-gray-600")}}function gi(i){return[...i].reduce((e,t,s)=>e+=s?t:t.toUpperCase(),"")}class et extends We{constructor(e,t){super(e,t)}init(e,t=!0){t&&(this.navStep=this.step*10,this.beforeShowOption=`beforeShow${gi(this.cellClass)}`,this.grid=this.element,this.element.classList.add(this.name,"datepicker-grid","w-64","grid","grid-cols-4"),this.grid.appendChild(U(mt("span",12)))),super.init(e)}setOptions(e){if(G(e,"minDate")&&(e.minDate===void 0?this.minYear=this.minDate=void 0:(this.minYear=j(e.minDate,this.step),this.minDate=H(this.minYear,0,1))),G(e,"maxDate")&&(e.maxDate===void 0?this.maxYear=this.maxDate=void 0:(this.maxYear=j(e.maxDate,this.step),this.maxDate=H(this.maxYear,11,31))),e[this.beforeShowOption]!==void 0){const t=e[this.beforeShowOption];this.beforeShow=typeof t=="function"?t:void 0}}updateFocus(){const e=new Date(this.picker.viewDate),t=j(e,this.navStep),s=t+9*this.step;this.first=t,this.last=s,this.start=t-this.step,this.focused=j(e,this.step)}updateSelection(){const{dates:e,rangepicker:t}=this.picker.datepicker;this.selected=e.reduce((s,a)=>K(s,j(a,this.step)),[]),t&&t.dates&&(this.range=t.dates.map(s=>{if(s!==void 0)return j(s,this.step)}))}render(){this.disabled=[],this.picker.setViewSwitchLabel(`${this.first}-${this.last}`),this.picker.setPrevBtnDisabled(this.first<=this.minYear),this.picker.setNextBtnDisabled(this.last>=this.maxYear),Array.from(this.grid.children).forEach((e,t)=>{const s=e.classList,a=this.start+t*this.step,n=H(a,0,1);if(e.className=`datepicker-cell hover:bg-gray-100 dark:hover:bg-gray-600 block flex-1 leading-9 border-0 rounded-lg cursor-pointer text-center text-gray-900 dark:text-white font-semibold text-sm ${this.cellClass}`,this.isMinView&&(e.dataset.date=n),e.textContent=e.dataset.year=a,t===0?s.add("prev"):t===11&&s.add("next"),(a<this.minYear||a>this.maxYear)&&s.add("disabled"),this.range){const[r,l]=this.range;a>r&&a<l&&s.add("range"),a===r&&s.add("range-start"),a===l&&s.add("range-end")}this.selected.includes(a)&&(s.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),s.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),a===this.focused&&s.add("focused","bg-gray-100","dark:bg-gray-600"),this.beforeShow&&this.performBeforeHook(e,a,n)})}refresh(){const[e,t]=this.range||[];this.grid.querySelectorAll(".range, .range-start, .range-end, .selected, .focused").forEach(s=>{s.classList.remove("range","range-start","range-end","selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white","focused","bg-gray-100","dark:bg-gray-600")}),Array.from(this.grid.children).forEach(s=>{const a=Number(s.textContent),n=s.classList;a>e&&a<t&&n.add("range"),a===e&&n.add("range-start"),a===t&&n.add("range-end"),this.selected.includes(a)&&(n.add("selected","bg-blue-700","text-white","dark:bg-blue-600","dark:text-white"),n.remove("text-gray-900","hover:bg-gray-100","dark:text-white","dark:hover:bg-gray-600")),a===this.focused&&n.add("focused","bg-gray-100","dark:bg-gray-600")})}refreshFocus(){const e=Math.round((this.focused-this.start)/this.step);this.grid.querySelectorAll(".focused").forEach(t=>{t.classList.remove("focused","bg-gray-100","dark:bg-gray-600")}),this.grid.children[e].classList.add("focused","bg-gray-100","dark:bg-gray-600")}}function ie(i,e){const t={date:i.getDate(),viewDate:new Date(i.picker.viewDate),viewId:i.picker.currentView.id,datepicker:i};i.element.dispatchEvent(new CustomEvent(e,{detail:t}))}function De(i,e){const{minDate:t,maxDate:s}=i.config,{currentView:a,viewDate:n}=i.picker;let r;switch(a.id){case 0:r=ve(n,e);break;case 1:r=te(n,e);break;default:r=te(n,e*a.navStep)}r=pt(r,t,s),i.picker.changeFocus(r).render()}function kt(i){const e=i.picker.currentView.id;e!==i.config.maxView&&i.picker.changeView(e+1).render()}function Mt(i){i.config.updateOnBlur?i.update({autohide:!0}):(i.refresh("input"),i.hide())}function tt(i,e){const t=i.picker,s=new Date(t.viewDate),a=t.currentView.id,n=a===1?ve(s,e-s.getMonth()):te(s,e-s.getFullYear());t.changeFocus(n).changeView(a-1).render()}function mi(i){const e=i.picker,t=X();if(i.config.todayBtnMode===1){if(i.config.autohide){i.setDate(t);return}i.setDate(t,{render:!1}),e.update()}e.viewDate!==t&&e.changeFocus(t),e.changeView(0).render()}function pi(i){i.setDate({clear:!0})}function wi(i){kt(i)}function yi(i){De(i,-1)}function bi(i){De(i,1)}function vi(i,e){const t=wt(e,".datepicker-cell");if(!t||t.classList.contains("disabled"))return;const{id:s,isMinView:a}=i.picker.currentView;a?i.setDate(Number(t.dataset.date)):s===1?tt(i,Number(t.dataset.month)):tt(i,Number(t.dataset.year))}function xi(i){!i.inline&&!i.config.disableTouchKeyboard&&i.inputField.focus()}function it(i,e){if(e.title!==void 0&&(e.title?(i.controls.title.textContent=e.title,le(i.controls.title)):(i.controls.title.textContent="",ce(i.controls.title))),e.prevArrow){const t=i.controls.prevBtn;ze(t),e.prevArrow.forEach(s=>{t.appendChild(s.cloneNode(!0))})}if(e.nextArrow){const t=i.controls.nextBtn;ze(t),e.nextArrow.forEach(s=>{t.appendChild(s.cloneNode(!0))})}if(e.locale&&(i.controls.todayBtn.textContent=e.locale.today,i.controls.clearBtn.textContent=e.locale.clear),e.todayBtn!==void 0&&(e.todayBtn?le(i.controls.todayBtn):ce(i.controls.todayBtn)),G(e,"minDate")||G(e,"maxDate")){const{minDate:t,maxDate:s}=i.datepicker.config;i.controls.todayBtn.disabled=!Pe(X(),t,s)}e.clearBtn!==void 0&&(e.clearBtn?le(i.controls.clearBtn):ce(i.controls.clearBtn))}function st(i){const{dates:e,config:t}=i,s=e.length>0?Re(e):t.defaultViewDate;return pt(s,t.minDate,t.maxDate)}function at(i,e){const t=new Date(i.viewDate),s=new Date(e),{id:a,year:n,first:r,last:l}=i.currentView,d=s.getFullYear();switch(i.viewDate=e,d!==t.getFullYear()&&ie(i.datepicker,"changeYear"),s.getMonth()!==t.getMonth()&&ie(i.datepicker,"changeMonth"),a){case 0:return e<r||e>l;case 1:return d!==n;default:return d<r||d>l}}function Ce(i){return window.getComputedStyle(i).direction}class Ei{constructor(e){this.datepicker=e;const t=Ht.replace(/%buttonClass%/g,e.config.buttonClass),s=this.element=U(t).firstChild,[a,n,r]=s.firstChild.children,l=a.firstElementChild,[d,g,h]=a.lastElementChild.children,[u,x]=r.firstChild.children,w={title:l,prevBtn:d,viewSwitch:g,nextBtn:h,todayBtn:u,clearBtn:x};this.main=n,this.controls=w;const f=e.inline?"inline":"dropdown";s.classList.add(`datepicker-${f}`),f==="dropdown"&&s.classList.add("dropdown","absolute","top-0","left-0","z-20","pt-2"),it(this,e.config),this.viewDate=st(e),yt(e,[[s,"click",xi.bind(null,e),{capture:!0}],[n,"click",vi.bind(null,e)],[w.viewSwitch,"click",wi.bind(null,e)],[w.prevBtn,"click",yi.bind(null,e)],[w.nextBtn,"click",bi.bind(null,e)],[w.todayBtn,"click",mi.bind(null,e)],[w.clearBtn,"click",pi.bind(null,e)]]),this.views=[new ui(this),new fi(this),new et(this,{id:2,name:"years",cellClass:"year",step:1}),new et(this,{id:3,name:"decades",cellClass:"decade",step:10})],this.currentView=this.views[e.config.startView],this.currentView.render(),this.main.appendChild(this.currentView.element),e.config.container.appendChild(this.element)}setOptions(e){it(this,e),this.views.forEach(t=>{t.init(e,!1)}),this.currentView.render()}detach(){this.datepicker.config.container.removeChild(this.element)}show(){if(this.active)return;this.element.classList.add("active","block"),this.element.classList.remove("hidden"),this.active=!0;const e=this.datepicker;if(!e.inline){const t=Ce(e.inputField);t!==Ce(e.config.container)?this.element.dir=t:this.element.dir&&this.element.removeAttribute("dir"),this.place(),e.config.disableTouchKeyboard&&e.inputField.blur()}ie(e,"show")}hide(){!this.active||(this.datepicker.exitEditMode(),this.element.classList.remove("active","block"),this.element.classList.add("active","block","hidden"),this.active=!1,ie(this.datepicker,"hide"))}place(){const{classList:e,style:t}=this.element,{config:s,inputField:a}=this.datepicker,n=s.container,{width:r,height:l}=this.element.getBoundingClientRect(),{left:d,top:g,width:h}=n.getBoundingClientRect(),{left:u,top:x,width:w,height:f}=a.getBoundingClientRect();let{x:y,y:m}=s.orientation,E,c,o;n===document.body?(E=window.scrollY,c=u+window.scrollX,o=x+E):(E=n.scrollTop,c=u-d,o=x-g+E),y==="auto"&&(c<0?(y="left",c=10):c+r>h?y="right":y=Ce(a)==="rtl"?"right":"left"),y==="right"&&(c-=r-w),m==="auto"&&(m=o-l<E?"bottom":"top"),m==="top"?o-=l:o+=f,e.remove("datepicker-orient-top","datepicker-orient-bottom","datepicker-orient-right","datepicker-orient-left"),e.add(`datepicker-orient-${m}`,`datepicker-orient-${y}`),t.top=o&&`${o}px`,t.left=c&&`${c}px`}setViewSwitchLabel(e){this.controls.viewSwitch.textContent=e}setPrevBtnDisabled(e){this.controls.prevBtn.disabled=e}setNextBtnDisabled(e){this.controls.nextBtn.disabled=e}changeView(e){const t=this.currentView,s=this.views[e];return s.id!==t.id&&(this.currentView=s,this._renderMethod="render",ie(this.datepicker,"changeView"),this.main.replaceChild(s.element,t.element)),this}changeFocus(e){return this._renderMethod=at(this,e)?"render":"refreshFocus",this.views.forEach(t=>{t.updateFocus()}),this}update(){const e=st(this.datepicker);return this._renderMethod=at(this,e)?"render":"refresh",this.views.forEach(t=>{t.updateFocus(),t.updateSelection()}),this}render(e=!0){const t=e&&this._renderMethod||"render";delete this._renderMethod,this.currentView[t]()}}function It(i,e,t,s,a,n){if(!!Pe(i,a,n)){if(s(i)){const r=e(i,t);return It(r,e,t,s,a,n)}return i}}function pe(i,e,t,s){const a=i.picker,n=a.currentView,r=n.step||1;let l=a.viewDate,d,g;switch(n.id){case 0:s?l=ee(l,t*7):e.ctrlKey||e.metaKey?l=te(l,t):l=ee(l,t),d=ee,g=h=>n.disabled.includes(h);break;case 1:l=ve(l,s?t*4:t),d=ve,g=h=>{const u=new Date(h),{year:x,disabled:w}=n;return u.getFullYear()===x&&w.includes(u.getMonth())};break;default:l=te(l,t*(s?4:1)*r),d=te,g=h=>n.disabled.includes(j(h,r))}l=It(l,d,t<0?-r:r,g,n.minDate,n.maxDate),l!==void 0&&a.changeFocus(l).render()}function Di(i,e){if(e.key==="Tab"){Mt(i);return}const t=i.picker,{id:s,isMinView:a}=t.currentView;if(t.active)if(i.editMode)switch(e.key){case"Escape":t.hide();break;case"Enter":i.exitEditMode({update:!0,autohide:i.config.autohide});break;default:return}else switch(e.key){case"Escape":t.hide();break;case"ArrowLeft":if(e.ctrlKey||e.metaKey)De(i,-1);else if(e.shiftKey){i.enterEditMode();return}else pe(i,e,-1,!1);break;case"ArrowRight":if(e.ctrlKey||e.metaKey)De(i,1);else if(e.shiftKey){i.enterEditMode();return}else pe(i,e,1,!1);break;case"ArrowUp":if(e.ctrlKey||e.metaKey)kt(i);else if(e.shiftKey){i.enterEditMode();return}else pe(i,e,-1,!0);break;case"ArrowDown":if(e.shiftKey&&!e.ctrlKey&&!e.metaKey){i.enterEditMode();return}pe(i,e,1,!0);break;case"Enter":a?i.setDate(t.viewDate):t.changeView(s-1).render();break;case"Backspace":case"Delete":i.enterEditMode();return;default:e.key.length===1&&!e.ctrlKey&&!e.metaKey&&i.enterEditMode();return}else switch(e.key){case"ArrowDown":case"Escape":t.show();break;case"Enter":i.update();break;default:return}e.preventDefault(),e.stopPropagation()}function _i(i){i.config.showOnFocus&&!i._showing&&i.show()}function ki(i,e){const t=e.target;(i.picker.active||i.config.showOnClick)&&(t._active=t===document.activeElement,t._clicking=setTimeout(()=>{delete t._active,delete t._clicking},2e3))}function Mi(i,e){const t=e.target;!t._clicking||(clearTimeout(t._clicking),delete t._clicking,t._active&&i.enterEditMode(),delete t._active,i.config.showOnClick&&i.show())}function Ii(i,e){e.clipboardData.types.includes("text/plain")&&i.enterEditMode()}function Ti(i,e){const t=i.element;if(t!==document.activeElement)return;const s=i.picker.element;wt(e,a=>a===t||a===s)||Mt(i)}function Tt(i,e){return i.map(t=>Ee(t,e.format,e.locale)).join(e.dateDelimiter)}function At(i,e,t=!1){const{config:s,dates:a,rangepicker:n}=i;if(e.length===0)return t?[]:void 0;const r=n&&i===n.datepickers[1];let l=e.reduce((d,g)=>{let h=he(g,s.format,s.locale);if(h===void 0)return d;if(s.pickLevel>0){const u=new Date(h);s.pickLevel===1?h=r?u.setMonth(u.getMonth()+1,0):u.setDate(1):h=r?u.setFullYear(u.getFullYear()+1,0,0):u.setMonth(0,1)}return Pe(h,s.minDate,s.maxDate)&&!d.includes(h)&&!s.datesDisabled.includes(h)&&!s.daysOfWeekDisabled.includes(new Date(h).getDay())&&d.push(h),d},[]);if(l.length!==0)return s.multidate&&!t&&(l=l.reduce((d,g)=>(a.includes(g)||d.push(g),d),a.filter(d=>!l.includes(d)))),s.maxNumberOfDates&&l.length>s.maxNumberOfDates?l.slice(s.maxNumberOfDates*-1):l}function _e(i,e=3,t=!0){const{config:s,picker:a,inputField:n}=i;if(e&2){const r=a.active?s.pickLevel:s.startView;a.update().changeView(r).render(t)}e&1&&n&&(n.value=Tt(i.dates,s))}function nt(i,e,t){let{clear:s,render:a,autohide:n}=t;a===void 0&&(a=!0),a?n===void 0&&(n=i.config.autohide):n=!1;const r=At(i,e,s);!r||(r.toString()!==i.dates.toString()?(i.dates=r,_e(i,a?3:1),ie(i,"changeDate")):_e(i,1),n&&i.hide())}class Ai{constructor(e,t={},s=void 0){e.datepicker=this,this.element=e;const a=this.config=Object.assign({buttonClass:t.buttonClass&&String(t.buttonClass)||"button",container:document.body,defaultViewDate:X(),maxDate:void 0,minDate:void 0},Ae(Ne,this));this._options=t,Object.assign(a,Ae(t,this));const n=this.inline=e.tagName!=="INPUT";let r,l;if(n)a.container=e,l=ke(e.dataset.date,a.dateDelimiter),delete e.dataset.date;else{const h=t.container?document.querySelector(t.container):null;h&&(a.container=h),r=this.inputField=e,r.classList.add("datepicker-input"),l=ke(r.value,a.dateDelimiter)}if(s){const h=s.inputs.indexOf(r),u=s.datepickers;if(h<0||h>1||!Array.isArray(u))throw Error("Invalid rangepicker object.");u[h]=this,Object.defineProperty(this,"rangepicker",{get(){return s}})}this.dates=[];const d=At(this,l);d&&d.length>0&&(this.dates=d),r&&(r.value=Tt(this.dates,a));const g=this.picker=new Ei(this);if(n)this.show();else{const h=Ti.bind(null,this),u=[[r,"keydown",Di.bind(null,this)],[r,"focus",_i.bind(null,this)],[r,"mousedown",ki.bind(null,this)],[r,"click",Mi.bind(null,this)],[r,"paste",Ii.bind(null,this)],[document,"mousedown",h],[document,"touchstart",h],[window,"resize",g.place.bind(g)]];yt(this,u)}}static formatDate(e,t,s){return Ee(e,t,s&&ne[s]||ne.en)}static parseDate(e,t,s){return he(e,t,s&&ne[s]||ne.en)}static get locales(){return ne}get active(){return!!(this.picker&&this.picker.active)}get pickerElement(){return this.picker?this.picker.element:void 0}setOptions(e){const t=this.picker,s=Ae(e,this);Object.assign(this._options,e),Object.assign(this.config,s),t.setOptions(s),_e(this,3)}show(){if(this.inputField){if(this.inputField.disabled)return;this.inputField!==document.activeElement&&(this._showing=!0,this.inputField.focus(),delete this._showing)}this.picker.show()}hide(){this.inline||(this.picker.hide(),this.picker.update().changeView(this.config.startView).render())}destroy(){return this.hide(),Ut(this),this.picker.detach(),this.inline||this.inputField.classList.remove("datepicker-input"),delete this.element.datepicker,this}getDate(e=void 0){const t=e?s=>Ee(s,e,this.config.locale):s=>new Date(s);if(this.config.multidate)return this.dates.map(t);if(this.dates.length>0)return t(this.dates[0])}setDate(...e){const t=[...e],s={},a=Re(e);typeof a=="object"&&!Array.isArray(a)&&!(a instanceof Date)&&a&&Object.assign(s,t.pop());const n=Array.isArray(t[0])?t[0]:t;nt(this,n,s)}update(e=void 0){if(this.inline)return;const t={clear:!0,autohide:!!(e&&e.autohide)},s=ke(this.inputField.value,this.config.dateDelimiter);nt(this,s,t)}refresh(e=void 0,t=!1){e&&typeof e!="string"&&(t=e,e=void 0);let s;e==="picker"?s=2:e==="input"?s=1:s=3,_e(this,s,!t)}enterEditMode(){this.inline||!this.picker.active||this.editMode||(this.editMode=!0,this.inputField.classList.add("in-edit","border-blue-700"))}exitEditMode(e=void 0){if(this.inline||!this.editMode)return;const t=Object.assign({update:!1},e);delete this.editMode,this.inputField.classList.remove("in-edit","border-blue-700"),t.update&&this.update(t)}}/*!
 * vue-filepond v7.0.3
 * A handy FilePond adapter component for Vue
 * 
 * Copyright (c) 2022 PQINA
 * https://pqina.nl/filepond
 * 
 * Licensed under the MIT license.
 */const Ci=i=>({string:String,boolean:Boolean,array:Array,function:Function,int:Number,serverapi:Object,object:Object})[i],Ve={},rt=[],Vi=(...i)=>{zt(...i);for(const e in je){if(/^on/.test(e))continue;let t=[String,Ci(je[e])];e=="labelFileProcessingError"&&t.push(Function),Ve[e]={type:t,default:void 0}}return{name:"FilePond",props:Ve,render(){const e=Object.entries({id:this.id,name:this.name,type:"file",class:this.className,required:this.required,multiple:this.allowMultiple,accept:this.acceptedFileTypes,capture:this.captureMethod}).reduce((t,[s,a])=>(a!==void 0&&(t[s]=a),t),{});return He("div",{class:{"filepond--wrapper":!0}},[He("input",e)])},created(){this.watchers=Object.keys(Ve).map(e=>this.$watch(e,t=>{this._pond[e]=t}))},mounted(){},beforeUnmount(){const{detached:e}=this.$options;if(!this.$el.offsetParent){e.call(this);return}const t=(a,n)=>{const l=((a[0]||{}).removedNodes||[])[0];!l||!l.contains(this.$el)||(n.disconnect(),e.call(this))};new MutationObserver(t).observe(document.documentElement,{childList:!0,subtree:!0})},detached(){if(this.watchers.forEach(t=>t()),!this._pond)return;this._pond.destroy();const e=rt.indexOf(this._pond);e>=0&&rt.splice(e,1),this._pond=null}}};/*!
 * FilePondPluginFileValidateType 1.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Si=({addFilter:i,utils:e})=>{const{Type:t,isString:s,replaceInString:a,guesstimateMimeType:n,getExtensionFromFilename:r,getFilenameFromURL:l}=e,d=(w,f)=>{const y=(/^[^/]+/.exec(w)||[]).pop(),m=f.slice(0,-2);return y===m},g=(w,f)=>w.some(y=>/\*$/.test(y)?d(f,y):y===f),h=w=>{let f="";if(s(w)){const y=l(w),m=r(y);m&&(f=n(m))}else f=w.type;return f},u=(w,f,y)=>{if(f.length===0)return!0;const m=h(w);return y?new Promise((E,c)=>{y(w,m).then(o=>{g(f,o)?E():c()}).catch(c)}):g(f,m)},x=w=>f=>w[f]===null?!1:w[f]||f;return i("SET_ATTRIBUTE_TO_OPTION_MAP",w=>Object.assign(w,{accept:"acceptedFileTypes"})),i("ALLOW_HOPPER_ITEM",(w,{query:f})=>f("GET_ALLOW_FILE_TYPE_VALIDATION")?u(w,f("GET_ACCEPTED_FILE_TYPES")):!0),i("LOAD_FILE",(w,{query:f})=>new Promise((y,m)=>{if(!f("GET_ALLOW_FILE_TYPE_VALIDATION")){y(w);return}const E=f("GET_ACCEPTED_FILE_TYPES"),c=f("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),o=u(w,E,c),p=()=>{const b=E.map(x(f("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter(M=>M!==!1),k=b.filter(function(M,T){return b.indexOf(M)===T});m({status:{main:f("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:a(f("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:k.join(", "),allButLastType:k.slice(0,-1).join(", "),lastType:k[b.length-1]})}})};if(typeof o=="boolean")return o?y(w):p();o.then(()=>{y(w)}).catch(p)})),{options:{allowFileTypeValidation:[!0,t.BOOLEAN],acceptedFileTypes:[[],t.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",t.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",t.STRING],fileValidateTypeLabelExpectedTypesMap:[{},t.OBJECT],fileValidateTypeDetectType:[null,t.FUNCTION]}}};/*!
 * FilePondPluginImagePreview 4.6.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const Oi=i=>/^image/.test(i.type),ot=(i,e)=>ue(i.x*e,i.y*e),lt=(i,e)=>ue(i.x+e.x,i.y+e.y),Li=i=>{const e=Math.sqrt(i.x*i.x+i.y*i.y);return e===0?{x:0,y:0}:ue(i.x/e,i.y/e)},we=(i,e,t)=>{const s=Math.cos(e),a=Math.sin(e),n=ue(i.x-t.x,i.y-t.y);return ue(t.x+s*n.x-a*n.y,t.y+a*n.x+s*n.y)},ue=(i=0,e=0)=>({x:i,y:e}),P=(i,e,t=1,s)=>{if(typeof i=="string")return parseFloat(i)*t;if(typeof i=="number")return i*(s?e[s]:Math.min(e.width,e.height))},Fi=(i,e,t)=>{const s=i.borderStyle||i.lineStyle||"solid",a=i.backgroundColor||i.fontColor||"transparent",n=i.borderColor||i.lineColor||"transparent",r=P(i.borderWidth||i.lineWidth,e,t),l=i.lineCap||"round",d=i.lineJoin||"round",g=typeof s=="string"?"":s.map(u=>P(u,e,t)).join(","),h=i.opacity||1;return{"stroke-linecap":l,"stroke-linejoin":d,"stroke-width":r||0,"stroke-dasharray":g,stroke:n,fill:a,opacity:h}},N=i=>i!=null,Ri=(i,e,t=1)=>{let s=P(i.x,e,t,"width")||P(i.left,e,t,"width"),a=P(i.y,e,t,"height")||P(i.top,e,t,"height"),n=P(i.width,e,t,"width"),r=P(i.height,e,t,"height"),l=P(i.right,e,t,"width"),d=P(i.bottom,e,t,"height");return N(a)||(N(r)&&N(d)?a=e.height-r-d:a=d),N(s)||(N(n)&&N(l)?s=e.width-n-l:s=l),N(n)||(N(s)&&N(l)?n=e.width-s-l:n=0),N(r)||(N(a)&&N(d)?r=e.height-a-d:r=0),{x:s||0,y:a||0,width:n||0,height:r||0}},Pi=i=>i.map((e,t)=>`${t===0?"M":"L"} ${e.x} ${e.y}`).join(" "),B=(i,e)=>Object.keys(e).forEach(t=>i.setAttribute(t,e[t])),Ni="http://www.w3.org/2000/svg",Q=(i,e)=>{const t=document.createElementNS(Ni,i);return e&&B(t,e),t},Wi=i=>B(i,{...i.rect,...i.styles}),Bi=i=>{const e=i.rect.x+i.rect.width*.5,t=i.rect.y+i.rect.height*.5,s=i.rect.width*.5,a=i.rect.height*.5;return B(i,{cx:e,cy:t,rx:s,ry:a,...i.styles})},Gi={contain:"xMidYMid meet",cover:"xMidYMid slice"},Yi=(i,e)=>{B(i,{...i.rect,...i.styles,preserveAspectRatio:Gi[e.fit]||"none"})},$i={left:"start",center:"middle",right:"end"},Hi=(i,e,t,s)=>{const a=P(e.fontSize,t,s),n=e.fontFamily||"sans-serif",r=e.fontWeight||"normal",l=$i[e.textAlign]||"start";B(i,{...i.rect,...i.styles,"stroke-width":0,"font-weight":r,"font-size":a,"font-family":n,"text-anchor":l}),i.text!==e.text&&(i.text=e.text,i.textContent=e.text.length?e.text:" ")},Ui=(i,e,t,s)=>{B(i,{...i.rect,...i.styles,fill:"none"});const a=i.childNodes[0],n=i.childNodes[1],r=i.childNodes[2],l=i.rect,d={x:i.rect.x+i.rect.width,y:i.rect.y+i.rect.height};if(B(a,{x1:l.x,y1:l.y,x2:d.x,y2:d.y}),!e.lineDecoration)return;n.style.display="none",r.style.display="none";const g=Li({x:d.x-l.x,y:d.y-l.y}),h=P(.05,t,s);if(e.lineDecoration.indexOf("arrow-begin")!==-1){const u=ot(g,h),x=lt(l,u),w=we(l,2,x),f=we(l,-2,x);B(n,{style:"display:block;",d:`M${w.x},${w.y} L${l.x},${l.y} L${f.x},${f.y}`})}if(e.lineDecoration.indexOf("arrow-end")!==-1){const u=ot(g,-h),x=lt(d,u),w=we(d,2,x),f=we(d,-2,x);B(r,{style:"display:block;",d:`M${w.x},${w.y} L${d.x},${d.y} L${f.x},${f.y}`})}},zi=(i,e,t,s)=>{B(i,{...i.styles,fill:"none",d:Pi(e.points.map(a=>({x:P(a.x,t,s,"width"),y:P(a.y,t,s,"height")})))})},ye=i=>e=>Q(i,{id:e.id}),ji=i=>{const e=Q("image",{id:i.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return e.onload=()=>{e.setAttribute("opacity",i.opacity||1)},e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i.src),e},qi=i=>{const e=Q("g",{id:i.id,"stroke-linecap":"round","stroke-linejoin":"round"}),t=Q("line");e.appendChild(t);const s=Q("path");e.appendChild(s);const a=Q("path");return e.appendChild(a),e},Ki={image:ji,rect:ye("rect"),ellipse:ye("ellipse"),text:ye("text"),path:ye("path"),line:qi},Xi={rect:Wi,ellipse:Bi,image:Yi,text:Hi,path:zi,line:Ui},Zi=(i,e)=>Ki[i](e),Ji=(i,e,t,s,a)=>{e!=="path"&&(i.rect=Ri(t,s,a)),i.styles=Fi(t,s,a),Xi[e](i,t,s,a)},Qi=["x","y","left","top","right","bottom","width","height"],es=i=>typeof i=="string"&&/%/.test(i)?parseFloat(i)/100:i,ts=i=>{const[e,t]=i,s=t.points?{}:Qi.reduce((a,n)=>(a[n]=es(t[n]),a),{});return[e,{zIndex:0,...t,...s}]},is=(i,e)=>i[1].zIndex>e[1].zIndex?1:i[1].zIndex<e[1].zIndex?-1:0,ss=i=>i.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:e,props:t})=>{if(!t.dirty)return;const{crop:s,resize:a,markup:n}=t,r=t.width,l=t.height;let d=s.width,g=s.height;if(a){const{size:w}=a;let f=w&&w.width,y=w&&w.height;const m=a.mode,E=a.upscale;f&&!y&&(y=f),y&&!f&&(f=y);const c=d<f&&g<y;if(!c||c&&E){let o=f/d,p=y/g;if(m==="force")d=f,g=y;else{let b;m==="cover"?b=Math.max(o,p):m==="contain"&&(b=Math.min(o,p)),d=d*b,g=g*b}}}const h={width:r,height:l};e.element.setAttribute("width",h.width),e.element.setAttribute("height",h.height);const u=Math.min(r/d,l/g);e.element.innerHTML="";const x=e.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");n.filter(x).map(ts).sort(is).forEach(w=>{const[f,y]=w,m=Zi(f,y);Ji(m,f,y,h,u),e.element.appendChild(m)})}}),de=(i,e)=>({x:i,y:e}),as=(i,e)=>i.x*e.x+i.y*e.y,ct=(i,e)=>de(i.x-e.x,i.y-e.y),ns=(i,e)=>as(ct(i,e),ct(i,e)),dt=(i,e)=>Math.sqrt(ns(i,e)),ht=(i,e)=>{const t=i,s=1.5707963267948966,a=e,n=1.5707963267948966-e,r=Math.sin(s),l=Math.sin(a),d=Math.sin(n),g=Math.cos(n),h=t/r,u=h*l,x=h*d;return de(g*u,g*x)},rs=(i,e)=>{const t=i.width,s=i.height,a=ht(t,e),n=ht(s,e),r=de(i.x+Math.abs(a.x),i.y-Math.abs(a.y)),l=de(i.x+i.width+Math.abs(n.y),i.y+Math.abs(n.x)),d=de(i.x-Math.abs(n.y),i.y+i.height-Math.abs(n.x));return{width:dt(r,l),height:dt(r,d)}},os=(i,e,t=1)=>{const s=i.height/i.width;let a=1,n=e,r=1,l=s;l>n&&(l=n,r=l/s);const d=Math.max(a/r,n/l),g=i.width/(t*d*r),h=g*e;return{width:g,height:h}},Ct=(i,e,t,s)=>{const a=s.x>.5?1-s.x:s.x,n=s.y>.5?1-s.y:s.y,r=a*2*i.width,l=n*2*i.height,d=rs(e,t);return Math.max(d.width/r,d.height/l)},Vt=(i,e)=>{let t=i.width,s=t*e;s>i.height&&(s=i.height,t=s/e);const a=(i.width-t)*.5,n=(i.height-s)*.5;return{x:a,y:n,width:t,height:s}},ls=(i,e={})=>{let{zoom:t,rotation:s,center:a,aspectRatio:n}=e;n||(n=i.height/i.width);const r=os(i,n,t),l={x:r.width*.5,y:r.height*.5},d={x:0,y:0,width:r.width,height:r.height,center:l},g=typeof e.scaleToFit>"u"||e.scaleToFit,h=Ct(i,Vt(d,n),s,g?a:{x:.5,y:.5}),u=t*h;return{widthFloat:r.width/u,heightFloat:r.height/u,width:Math.round(r.width/u),height:Math.round(r.height/u)}},W={type:"spring",stiffness:.5,damping:.45,mass:10},cs=i=>i.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:e,props:t})=>{e.appendChild(t.image)}}),ds=i=>i.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:W,originY:W,scaleX:W,scaleY:W,translateX:W,translateY:W,rotateZ:W}},create:({root:e,props:t})=>{t.width=t.image.width,t.height=t.image.height,e.ref.bitmap=e.appendChildView(e.createChildView(cs(i),{image:t.image}))},write:({root:e,props:t})=>{const{flip:s}=t.crop,{bitmap:a}=e.ref;a.scaleX=s.horizontal?-1:1,a.scaleY=s.vertical?-1:1}}),hs=i=>i.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:e,props:t}){!t.background||(e.element.style.backgroundColor=t.background)},create:({root:e,props:t})=>{e.ref.image=e.appendChildView(e.createChildView(ds(i),Object.assign({},t))),e.ref.createMarkup=()=>{e.ref.markup||(e.ref.markup=e.appendChildView(e.createChildView(ss(i),Object.assign({},t))))},e.ref.destroyMarkup=()=>{!e.ref.markup||(e.removeChildView(e.ref.markup),e.ref.markup=null)};const s=e.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");s!==null&&(s==="grid"?e.element.dataset.transparencyIndicator=s:e.element.dataset.transparencyIndicator="color")},write:({root:e,props:t,shouldOptimize:s})=>{const{crop:a,markup:n,resize:r,dirty:l,width:d,height:g}=t;e.ref.image.crop=a;const h={x:0,y:0,width:d,height:g,center:{x:d*.5,y:g*.5}},u={width:e.ref.image.width,height:e.ref.image.height},x={x:a.center.x*u.width,y:a.center.y*u.height},w={x:h.center.x-u.width*a.center.x,y:h.center.y-u.height*a.center.y},f=Math.PI*2+a.rotation%(Math.PI*2),y=a.aspectRatio||u.height/u.width,m=typeof a.scaleToFit>"u"||a.scaleToFit,E=Ct(u,Vt(h,y),f,m?a.center:{x:.5,y:.5}),c=a.zoom*E;n&&n.length?(e.ref.createMarkup(),e.ref.markup.width=d,e.ref.markup.height=g,e.ref.markup.resize=r,e.ref.markup.dirty=l,e.ref.markup.markup=n,e.ref.markup.crop=ls(u,a)):e.ref.markup&&e.ref.destroyMarkup();const o=e.ref.image;if(s){o.originX=null,o.originY=null,o.translateX=null,o.translateY=null,o.rotateZ=null,o.scaleX=null,o.scaleY=null;return}o.originX=x.x,o.originY=x.y,o.translateX=w.x,o.translateY=w.y,o.rotateZ=f,o.scaleX=c,o.scaleY=c}}),us=i=>i.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:W,scaleY:W,translateY:W,opacity:{type:"tween",duration:400}}},create:({root:e,props:t})=>{e.ref.clip=e.appendChildView(e.createChildView(hs(i),{id:t.id,image:t.image,crop:t.crop,markup:t.markup,resize:t.resize,dirty:t.dirty,background:t.background}))},write:({root:e,props:t,shouldOptimize:s})=>{const{clip:a}=e.ref,{image:n,crop:r,markup:l,resize:d,dirty:g}=t;if(a.crop=r,a.markup=l,a.resize=d,a.dirty=g,a.opacity=s?0:1,s||e.rect.element.hidden)return;const h=n.height/n.width;let u=r.aspectRatio||h;const x=e.rect.inner.width,w=e.rect.inner.height;let f=e.query("GET_IMAGE_PREVIEW_HEIGHT");const y=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),m=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),E=e.query("GET_PANEL_ASPECT_RATIO"),c=e.query("GET_ALLOW_MULTIPLE");E&&!c&&(f=x*E,u=E);let o=f!==null?f:Math.max(y,Math.min(x*u,m)),p=o/u;p>x&&(p=x,o=p*u),o>w&&(o=w,p=w/u),a.width=p,a.height=o}});let fs=`<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">
    <defs>
        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">
            <stop offset='50%' stop-color='#000000'/>
            <stop offset='56%' stop-color='#0a0a0a'/>
            <stop offset='63%' stop-color='#262626'/>
            <stop offset='69%' stop-color='#4f4f4f'/>
            <stop offset='75%' stop-color='#808080'/>
            <stop offset='81%' stop-color='#b1b1b1'/>
            <stop offset='88%' stop-color='#dadada'/>
            <stop offset='94%' stop-color='#f6f6f6'/>
            <stop offset='100%' stop-color='#ffffff'/>
        </radialGradient>
        <mask id="mask-__UID__">
            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>
        </mask>
    </defs>
    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>
</svg>`,ut=0;const gs=i=>i.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:e,props:t})=>{let s=fs;if(document.querySelector("base")){const a=new URL(window.location.href.replace(window.location.hash,"")).href;s=s.replace(/url\(\#/g,"url("+a+"#")}ut++,e.element.classList.add(`filepond--image-preview-overlay-${t.status}`),e.element.innerHTML=s.replace(/__UID__/g,ut)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),ms=function(){self.onmessage=i=>{createImageBitmap(i.data.message.file).then(e=>{self.postMessage({id:i.data.id,message:e},[e])})}},ps=function(){self.onmessage=i=>{const e=i.data.message.imageData,t=i.data.message.colorMatrix,s=e.data,a=s.length,n=t[0],r=t[1],l=t[2],d=t[3],g=t[4],h=t[5],u=t[6],x=t[7],w=t[8],f=t[9],y=t[10],m=t[11],E=t[12],c=t[13],o=t[14],p=t[15],b=t[16],k=t[17],M=t[18],T=t[19];let A=0,D=0,_=0,C=0,V=0;for(;A<a;A+=4)D=s[A]/255,_=s[A+1]/255,C=s[A+2]/255,V=s[A+3]/255,s[A]=Math.max(0,Math.min((D*n+_*r+C*l+V*d+g)*255,255)),s[A+1]=Math.max(0,Math.min((D*h+_*u+C*x+V*w+f)*255,255)),s[A+2]=Math.max(0,Math.min((D*y+_*m+C*E+V*c+o)*255,255)),s[A+3]=Math.max(0,Math.min((D*p+_*b+C*k+V*M+T)*255,255));self.postMessage({id:i.data.id,message:e},[e.data.buffer])}},ws=(i,e)=>{let t=new Image;t.onload=()=>{const s=t.naturalWidth,a=t.naturalHeight;t=null,e(s,a)},t.src=i},ys={1:()=>[1,0,0,1,0,0],2:i=>[-1,0,0,1,i,0],3:(i,e)=>[-1,0,0,-1,i,e],4:(i,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(i,e)=>[0,1,-1,0,e,0],7:(i,e)=>[0,-1,-1,0,e,i],8:i=>[0,-1,1,0,0,i]},bs=(i,e,t,s)=>{s!==-1&&i.transform.apply(i,ys[s](e,t))},vs=(i,e,t,s)=>{e=Math.round(e),t=Math.round(t);const a=document.createElement("canvas");a.width=e,a.height=t;const n=a.getContext("2d");return s>=5&&s<=8&&([e,t]=[t,e]),bs(n,e,t,s),n.drawImage(i,0,0,e,t),a},St=i=>/^image/.test(i.type)&&!/svg/.test(i.type),xs=10,Es=10,Ds=i=>{const e=Math.min(xs/i.width,Es/i.height),t=document.createElement("canvas"),s=t.getContext("2d"),a=t.width=Math.ceil(i.width*e),n=t.height=Math.ceil(i.height*e);s.drawImage(i,0,0,a,n);let r=null;try{r=s.getImageData(0,0,a,n).data}catch{return null}const l=r.length;let d=0,g=0,h=0,u=0;for(;u<l;u+=4)d+=r[u]*r[u],g+=r[u+1]*r[u+1],h+=r[u+2]*r[u+2];return d=Se(d,l),g=Se(g,l),h=Se(h,l),{r:d,g,b:h}},Se=(i,e)=>Math.floor(Math.sqrt(i/(e/4))),_s=(i,e)=>(e=e||document.createElement("canvas"),e.width=i.width,e.height=i.height,e.getContext("2d").drawImage(i,0,0),e),ks=i=>{let e;try{e=new ImageData(i.width,i.height)}catch{e=document.createElement("canvas").getContext("2d").createImageData(i.width,i.height)}return e.data.set(new Uint8ClampedArray(i.data)),e},Ms=i=>new Promise((e,t)=>{const s=new Image;s.crossOrigin="Anonymous",s.onload=()=>{e(s)},s.onerror=a=>{t(a)},s.src=i}),Is=i=>{const e=gs(i),t=us(i),{createWorker:s}=i.utils,a=(c,o,p)=>new Promise(b=>{c.ref.imageData||(c.ref.imageData=p.getContext("2d").getImageData(0,0,p.width,p.height));const k=ks(c.ref.imageData);if(!o||o.length!==20)return p.getContext("2d").putImageData(k,0,0),b();const M=s(ps);M.post({imageData:k,colorMatrix:o},T=>{p.getContext("2d").putImageData(T,0,0),M.terminate(),b()},[k.data.buffer])}),n=(c,o)=>{c.removeChildView(o),o.image.width=1,o.image.height=1,o._destroy()},r=({root:c})=>{const o=c.ref.images.shift();return o.opacity=0,o.translateY=-15,c.ref.imageViewBin.push(o),o},l=({root:c,props:o,image:p})=>{const b=o.id,k=c.query("GET_ITEM",{id:b});if(!k)return;const M=k.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},T=c.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let A,D,_=!1;c.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(A=k.getMetadata("markup")||[],D=k.getMetadata("resize"),_=!0);const C=c.appendChildView(c.createChildView(t,{id:b,image:p,crop:M,resize:D,markup:A,dirty:_,background:T,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),c.childViews.length);c.ref.images.push(C),C.opacity=1,C.scaleX=1,C.scaleY=1,C.translateY=0,setTimeout(()=>{c.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:b})},250)},d=({root:c,props:o})=>{const p=c.query("GET_ITEM",{id:o.id});if(!p)return;const b=c.ref.images[c.ref.images.length-1];b.crop=p.getMetadata("crop"),b.background=c.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),c.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(b.dirty=!0,b.resize=p.getMetadata("resize"),b.markup=p.getMetadata("markup"))},g=({root:c,props:o,action:p})=>{if(!/crop|filter|markup|resize/.test(p.change.key)||!c.ref.images.length)return;const b=c.query("GET_ITEM",{id:o.id});if(!!b){if(/filter/.test(p.change.key)){const k=c.ref.images[c.ref.images.length-1];a(c,p.change.value,k.image);return}if(/crop|markup|resize/.test(p.change.key)){const k=b.getMetadata("crop"),M=c.ref.images[c.ref.images.length-1];if(k&&k.aspectRatio&&M.crop&&M.crop.aspectRatio&&Math.abs(k.aspectRatio-M.crop.aspectRatio)>1e-5){const T=r({root:c});l({root:c,props:o,image:_s(T.image)})}else d({root:c,props:o})}}},h=c=>{const p=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./);return(p?parseInt(p[1]):null)<=58?!1:"createImageBitmap"in window&&St(c)},u=({root:c,props:o})=>{const{id:p}=o,b=c.query("GET_ITEM",p);if(!b)return;const k=URL.createObjectURL(b.file);ws(k,(M,T)=>{c.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:p,width:M,height:T})})},x=({root:c,props:o})=>{const{id:p}=o,b=c.query("GET_ITEM",p);if(!b)return;const k=URL.createObjectURL(b.file),M=()=>{Ms(k).then(T)},T=A=>{URL.revokeObjectURL(k);const _=(b.getMetadata("exif")||{}).orientation||-1;let{width:C,height:V}=A;if(!C||!V)return;_>=5&&_<=8&&([C,V]=[V,C]);const I=Math.max(1,window.devicePixelRatio*.75),z=c.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*I,Z=V/C,se=c.rect.element.width,Ot=c.rect.element.height;let ae=se,fe=ae*Z;Z>1?(ae=Math.min(C,se*z),fe=ae*Z):(fe=Math.min(V,Ot*z),ae=fe/Z);const Ge=vs(A,ae,fe,_),Ye=()=>{const Lt=c.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?Ds(data):null;b.setMetadata("color",Lt,!0),"close"in A&&A.close(),c.ref.overlayShadow.opacity=1,l({root:c,props:o,image:Ge})},$e=b.getMetadata("filter");$e?a(c,$e,Ge).then(Ye):Ye()};if(h(b.file)){const A=s(ms);A.post({file:b.file},D=>{if(A.terminate(),!D){M();return}T(D)})}else M()},w=({root:c})=>{const o=c.ref.images[c.ref.images.length-1];o.translateY=0,o.scaleX=1,o.scaleY=1,o.opacity=1},f=({root:c})=>{c.ref.overlayShadow.opacity=1,c.ref.overlayError.opacity=0,c.ref.overlaySuccess.opacity=0},y=({root:c})=>{c.ref.overlayShadow.opacity=.25,c.ref.overlayError.opacity=1},m=({root:c})=>{c.ref.overlayShadow.opacity=.25,c.ref.overlaySuccess.opacity=1},E=({root:c})=>{c.ref.images=[],c.ref.imageData=null,c.ref.imageViewBin=[],c.ref.overlayShadow=c.appendChildView(c.createChildView(e,{opacity:0,status:"idle"})),c.ref.overlaySuccess=c.appendChildView(c.createChildView(e,{opacity:0,status:"success"})),c.ref.overlayError=c.appendChildView(c.createChildView(e,{opacity:0,status:"failure"}))};return i.utils.createView({name:"image-preview-wrapper",create:E,styles:["height"],apis:["height"],destroy:({root:c})=>{c.ref.images.forEach(o=>{o.image.width=1,o.image.height=1})},didWriteView:({root:c})=>{c.ref.images.forEach(o=>{o.dirty=!1})},write:i.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:w,DID_IMAGE_PREVIEW_CONTAINER_CREATE:u,DID_FINISH_CALCULATE_PREVIEWSIZE:x,DID_UPDATE_ITEM_METADATA:g,DID_THROW_ITEM_LOAD_ERROR:y,DID_THROW_ITEM_PROCESSING_ERROR:y,DID_THROW_ITEM_INVALID:y,DID_COMPLETE_ITEM_PROCESSING:m,DID_START_ITEM_PROCESSING:f,DID_REVERT_ITEM_PROCESSING:f},({root:c})=>{const o=c.ref.imageViewBin.filter(p=>p.opacity===0);c.ref.imageViewBin=c.ref.imageViewBin.filter(p=>p.opacity>0),o.forEach(p=>n(c,p)),o.length=0})})},Ts=i=>{const{addFilter:e,utils:t}=i,{Type:s,createRoute:a,isFile:n}=t,r=Is(i);return e("CREATE_VIEW",l=>{const{is:d,view:g,query:h}=l;if(!d("file")||!h("GET_ALLOW_IMAGE_PREVIEW"))return;const u=({root:m,props:E})=>{const{id:c}=E,o=h("GET_ITEM",c);if(!o||!n(o.file)||o.archived)return;const p=o.file;if(!Oi(p)||!h("GET_IMAGE_PREVIEW_FILTER_ITEM")(o))return;const b="createImageBitmap"in(window||{}),k=h("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!b&&k&&p.size>k)return;m.ref.imagePreview=g.appendChildView(g.createChildView(r,{id:c}));const M=m.query("GET_IMAGE_PREVIEW_HEIGHT");M&&m.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:o.id,height:M});const T=!b&&p.size>h("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");m.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:c},T)},x=(m,E)=>{if(!m.ref.imagePreview)return;let{id:c}=E;const o=m.query("GET_ITEM",{id:c});if(!o)return;const p=m.query("GET_PANEL_ASPECT_RATIO"),b=m.query("GET_ITEM_PANEL_ASPECT_RATIO"),k=m.query("GET_IMAGE_PREVIEW_HEIGHT");if(p||b||k)return;let{imageWidth:M,imageHeight:T}=m.ref;if(!M||!T)return;const A=m.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),D=m.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),C=(o.getMetadata("exif")||{}).orientation||-1;if(C>=5&&C<=8&&([M,T]=[T,M]),!St(o.file)||m.query("GET_IMAGE_PREVIEW_UPSCALE")){const se=2048/M;M*=se,T*=se}const V=T/M,I=(o.getMetadata("crop")||{}).aspectRatio||V;let Y=Math.max(A,Math.min(T,D));const z=m.rect.element.width,Z=Math.min(z*I,Y);m.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:o.id,height:Z})},w=({root:m})=>{m.ref.shouldRescale=!0},f=({root:m,action:E})=>{E.change.key==="crop"&&(m.ref.shouldRescale=!0)},y=({root:m,action:E})=>{m.ref.imageWidth=E.width,m.ref.imageHeight=E.height,m.ref.shouldRescale=!0,m.ref.shouldDrawPreview=!0,m.dispatch("KICK")};g.registerWriter(a({DID_RESIZE_ROOT:w,DID_STOP_RESIZE:w,DID_LOAD_ITEM:u,DID_IMAGE_PREVIEW_CALCULATE_SIZE:y,DID_UPDATE_ITEM_METADATA:f},({root:m,props:E})=>{!m.ref.imagePreview||m.rect.element.hidden||(m.ref.shouldRescale&&(x(m,E),m.ref.shouldRescale=!1),m.ref.shouldDrawPreview&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{m.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:E.id})})}),m.ref.shouldDrawPreview=!1))}))}),{options:{allowImagePreview:[!0,s.BOOLEAN],imagePreviewFilterItem:[()=>!0,s.FUNCTION],imagePreviewHeight:[null,s.INT],imagePreviewMinHeight:[44,s.INT],imagePreviewMaxHeight:[256,s.INT],imagePreviewMaxFileSize:[null,s.INT],imagePreviewZoomFactor:[2,s.INT],imagePreviewUpscale:[!1,s.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,s.INT],imagePreviewTransparencyIndicator:[null,s.STRING],imagePreviewCalculateAverageImageColor:[!1,s.BOOLEAN],imagePreviewMarkupShow:[!0,s.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,s.FUNCTION]}}},Be=i=>(Nt("data-v-e2fd6f25"),i=i(),Wt(),i),As={key:0,class:"p-2 mb-2 w-full text-white bg-red-500 rounded-md"},Cs={class:"mb-4 text-base font-medium"},Vs={class:"alert-success"},Ss={class:"italic"},Os={class:"flex flex-row p-2 mb-2 text-white rounded-md button-color"},Ls={class:"input-block"},Fs=["name"],Rs=["placeholder"],Ps={class:"-mt-2 input-block"},Ns={class:"input-block"},Ws={class:"input-block"},Bs={class:"input-block"},Gs={class:"mb-3"},Ys=["for"],$s=Be(()=>v("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1)),Hs={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-gray-100 rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},Us=Be(()=>v("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1)),zs=[Us],js={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},qs=Be(()=>v("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1)),Ks=[qs],Xs={class:"ml-2"},Zs={class:"flex flex-row p-2 mt-2 text-white bg-red-400 rounded"},Js={class:"flex flex-row gap-x-2 input-block"},Qs={class:"relative w-full"},ea={class:"flex absolute left-1 top-3.5 items-center pl-2 pointer-events-none"},ta=["placeholder"],ia={class:"flex flex-row justify-between md:justify-end"},sa={class:"flex flex-row"},aa={__name:"ArtworkForm",setup(i){Vi(Si,Ts);const e=jt(),{t}=qt(),s=Kt(),{$router:a}=bt(),n=e.public.apiUrl,{oApiConfiguration:r,fetchOptions:l}=vt();Ft(()=>a.query,()=>{d()}),Rt(()=>{s.loggedIn||a.push("/"),h();const D=Xt().add(1,"day").format("DD/MM/yyyy"),_=document.getElementById("publishDate");new Ai(_,{autohide:!0,todayHighlight:!0,format:"dd/mm/yyyy",minDate:D})});const d=()=>{x.value=[],y.value=[],f.value.isExplicit=!1},g=ai(r,l()),h=async()=>{const D=await g.getSetting("artwork_max_uploads");c.value=D;const _=await g.getSetting("artwork_max_file_size");E.value=_,u.value="<div class='text-xxs'><div>Pick or drop up to "+c.value+" files here</div><div>PNG, JPG up to "+E.value+"MB</div></div>"},u=O(""),x=O([]),w="artwork-form",f=O({title:"",description:"",tags:"",isExplicit:!1,publishDate:null,publishTime:null}),y=O([]),m=O({showFileTooBig:!1}),E=O(5),c=O(1),o=O(!1),p=O(!1),b=O(!1),k=O(""),M=async()=>{ii().validate(w,t),m.value.showFileTooBig=!1;const D=document.getElementById("publishDate");let _=null;if(D.value){const I=D.value.split("/"),Y=`${I[2]}-${I[1]}-${I[0]}`;let z="00:00:00";f.value.publishTime&&(z=`${f.value.publishTime}:00`),_=`${Y} ${z}`}const C=[];y.value.forEach(I=>{C.push(I.value)});const V=new FormData;V.append("title",f.value.title),V.append("description",f.value.description),V.append("tags",C.toString()),V.append("is_explicit",f.value.isExplicit?1:0),V.append("scheduled_post",["",null].includes(_)?null:Zt().formatDateToApi(_));for(let I=0;I<x.value.length;I++)if(x.value[I].size>E.value*1e6&&(m.value.showFileTooBig=!0),!m.value.showFileTooBig){const Y=x.value[I];V.append("files[]",Y),V.append("file_order[]",I)}m.value.showFileTooBig||(o.value=!0,p.value=!1,await Jt.post(n+"/artworks/post",V,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${s.a4ht0jen}`}}).then(({data:I})=>{if(I.success){const Y=I.data.id;p.value=!0,setTimeout(()=>{a.push("/a/"+Y)},1e3)}else A()}).catch(I=>{A()})),o.value=!1},T=O(!1),A=()=>{T.value=!0};return(D,_)=>{const C=Qt,V=Pt("tags-input");return q(),re("div",null,[b.value?(q(),re("div",As,S(k.value),1)):ge("",!0),v("div",Cs,S(D.$t("artworks.add.form.title")),1),L(v("div",Vs,[oe(S(D.$t("artworks.add.form.uploadSuccess"))+" ",1),v("span",Ss,S(D.$t("artworks.add.form.successRedirect")),1)],512),[[F,p.value]]),L(v("div",Os,[R(be,{class:"mr-1"}),oe(" "+S(D.$t("artworks.add.form.uploading")),1)],512),[[F,o.value]]),L(v("div",{class:"alert-danger"},S(D.$t("artworks.add.form.uploadFailure")),513),[[F,T.value]]),v("form",{id:w,enctype:"multipart/form-data",onSubmit:_[6]||(_[6]=ft(I=>M(),["prevent"]))},[v("div",Ls,[v("n-validate",{for:"title",name:D.$t("title"),class:"input-block"},[L(v("input",{"onUpdate:modelValue":_[0]||(_[0]=I=>f.value.title=I),type:"text",class:$(["form-input input",{"pointer-events-none cursor-not-allowed":o.value||p.value}]),placeholder:D.$t("title")},null,10,Rs),[[Ue,f.value.title]])],8,Fs)]),v("div",Ps,[R(Oe(xt.exports.VueEditor),{modelValue:f.value.description,"onUpdate:modelValue":_[1]||(_[1]=I=>f.value.description=I),editorToolbar:[[{size:["normal","large"]}],["bold","italic","underline","strike"],["link"],[{color:[]},{background:[]}],["clean"]],class:$([{"pointer-events-none cursor-not-allowed":o.value||p.value}]),placeholder:D.$t("description")},null,8,["modelValue","class","placeholder"])]),v("div",Ns,[L(v("div",{class:"p-2 mb-2 text-xs text-white bg-red-400 rounded-md shadow-md"},S(D.$t("artworks.add.form.fileTooBig"))+" "+S(E.value)+"MB. ",513),[[F,m.value.showFileTooBig]]),R(C)]),v("div",Ws,[R(V,{modelValue:y.value,"onUpdate:modelValue":_[2]||(_[2]=I=>y.value=I),placeholder:D.$t("tagsInputPlaceholder"),typeahead:!0,"typeahead-style":"dropdown","typeahead-activation-threshold":2,"typeahead-show-on-focus":!0,"typeahead-hide-discard":!0,"typeahead-url":Oe(n)+"/artworks/tags/search?keyword=:search","add-tags-on-comma":!0,class:$({"pointer-events-none cursor-not-allowed":o.value||p.value})},null,8,["modelValue","placeholder","typeahead-url","class"])]),v("div",Bs,[v("div",Gs,[v("label",{for:f.value.isExplicit?"unchecked":"checked",class:"inline-flex items-center mt-2"},[v("span",{class:"relative cursor-pointer",onClick:_[3]||(_[3]=I=>f.value.isExplicit=!f.value.isExplicit)},[$s,f.value.isExplicit?ge("",!0):(q(),re("span",Hs,zs)),f.value.isExplicit?(q(),re("span",js,Ks)):ge("",!0)]),v("span",Xs,S(D.$t("explicitContent")),1)],8,Ys),L(v("div",Zs,[R(J,{name:"alert-outline",class:"mr-1 text-white"}),v("span",null,S(D.$t("artworks.add.form.prohibitChildExplicitContent")),1)],512),[[F,f.value.isExplicit]])])]),v("div",Js,[v("div",Qs,[v("div",ea,[R(J,{name:"i-bi-calendar3-event"})]),v("input",{id:"publishDate",type:"text",class:"block pl-10 w-full form-input input",placeholder:D.$t("artworks.add.form.publishDate"),autocomplete:"off"},null,8,ta)]),L(v("input",{"onUpdate:modelValue":_[4]||(_[4]=I=>f.value.publishTime=I),type:"time",class:"form-input input"},null,512),[[Ue,f.value.publishTime]])]),v("div",ia,[v("button",{class:"mr-2 w-full reset-form-button md:w-auto",type:"reset",onClick:_[5]||(_[5]=I=>d())},"Reset"),v("button",{type:"submit",class:$(["float-right w-full md:w-auto",{"pointer-events-none cursor-not-allowed":o.value||p.value},x.value.length>0?"primary-button":"disabled-button"])},[v("div",sa,[o.value?(q(),gt(be,{key:0,class:"mr-2"})):ge("",!0),oe(" "+S(o.value?D.$t("artworks.add.form.uploadingButton"):D.$t("artworks.add.form.post").toUpperCase()),1)])],2)])],32)])}}},na=Et(aa,[["__scopeId","data-v-e2fd6f25"]]),ra={class:"mb-4 text-base font-medium"},oa={class:"alert-success"},la={class:"italic"},ca={class:"flex flex-row p-2 mb-2 text-white rounded-md button-color"},da={class:"flex flex-row justify-between md:justify-end"},ha={__name:"FeedForm",setup(i){const{oApiConfiguration:e,fetchOptions:t}=vt(),s=ni(e,t()),{$router:a}=bt(),n=O(""),r=O(!1),l=O(!1),d=O(!1),g=async()=>{r.value=!0;const[h,u,x]=await s.postFeed({text:n.value});if(h){r.value=!1,l.value=!0;const w=u.id;setTimeout(()=>{a.push(`/feed/${w}`)},1e3)}else d.value=!0,r.value=!1;r.value=!1};return(h,u)=>(q(),re("div",null,[v("div",ra,S(h.$t("feeds.form.title")),1),L(v("div",oa,[oe(S(h.$t("feeds.form.posted"))+" ",1),v("span",la,S(h.$t("feeds.form.successRedirect")),1)],512),[[F,l.value]]),L(v("div",ca,[R(be,{class:"mr-2"}),oe(" "+S(h.$t("feeds.form.postingYourUpdate")),1)],512),[[F,r.value]]),L(v("div",{class:"alert-danger"},S(h.$t("feeds.form.postFailure")),513),[[F,d.value]]),R(Oe(xt.exports.VueEditor),{modelValue:n.value,"onUpdate:modelValue":u[0]||(u[0]=x=>n.value=x),editorToolbar:[[{size:["normal","large"]}],["bold","italic","underline","strike"],["link"],[{color:[]},{background:[]}],["clean"]],class:$(["mb-4"]),placeholder:h.$t("typeSomething")},null,8,["modelValue","placeholder"]),v("div",da,[v("button",{class:"mr-2 w-full reset-form-button md:w-auto",type:"reset",onClick:u[1]||(u[1]=x=>n.value="")},"Reset"),v("button",{class:$(["flex flex-row w-full md:w-auto",[n.value!==""?"primary-button":"disabled-button"]]),onClick:u[2]||(u[2]=ft(x=>n.value!==""?g():null,["prevent"]))},[L(R(be,{class:"mr-2"},null,512),[[F,r.value]]),v("span",null,S(r.value?h.$t("posting"):h.$t("post").toUpperCase()),1)],2)])]))}};const ua={class:"mb-20"},fa={class:"categories"},ga={class:"text-sm leading-6"},ma={class:"text-sm leading-6"},pa={class:"forms"},wa={__name:"index",setup(i){const e=O("artwork");return ei({title:ti().tl("meta.title.post")}),(t,s)=>(q(),gt(si,{"with-footer":!1,"hide-side":!1,"hide-right-side":!0},{default:Bt(()=>[v("div",ua,[v("div",fa,[v("div",{class:$(["category",[e.value==="feed"?"button":"theme-color"]]),onClick:s[0]||(s[0]=a=>e.value="feed")},[L(R(J,{name:"i-ion-text-outline","text-size":"texl-xl",class:"mr-3 text-2xl"},null,512),[[F,e.value!="feed"]]),L(R(J,{name:"i-ion-text-outline","text-size":"texl-xl",class:"mr-3 text-2xl text-white"},null,512),[[F,e.value=="feed"]]),v("span",ga,S(t.$t("feed")),1)],2),v("div",{class:$(["category",[e.value==="artwork"?"button":"theme-color"]]),onClick:s[1]||(s[1]=a=>e.value="artwork")},[L(R(J,{name:"i-ion-images-outline","text-size":"texl-xl",class:"mr-3 text-2xl"},null,512),[[F,e.value!="artwork"]]),L(R(J,{name:"i-ion-images-outline","text-size":"texl-xl",class:"mr-3 text-2xl text-white"},null,512),[[F,e.value=="artwork"]]),v("span",ma,S(t.$t("artworks.artwork")),1)],2)]),v("div",pa,[L(R(ha,null,null,512),[[F,e.value==="feed"]]),L(R(na,{class:"artwork"},null,512),[[F,e.value==="artwork"]])])])]),_:1}))}},Ia=Et(wa,[["__scopeId","data-v-98d9c630"]]);export{Ia as default};
//# sourceMappingURL=index.82488265.js.map
