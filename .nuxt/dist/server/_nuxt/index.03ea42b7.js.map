{"version":3,"file":"index.03ea42b7.js","sources":["../../../../pages/pro/index.vue"],"sourcesContent":["<template>\r\n  <Layout\r\n    :with-footer=\"true\"\r\n  >\r\n    <div class=\"flex flex-col gap-20\">\r\n      <!-- header -->\r\n      <div class=\"flex flex-col p-10 w-full text-xl text-center rounded-md theme-color\">\r\n        <p class=\"mb-6 font-bold\">\r\n          Unlock all features for only ${{ amount }} a month with PRO version\r\n        </p>\r\n\r\n        <a href=\"#pay\" class=\"p-2 mx-auto w-2/5 text-lg font-bold text-white rounded-md button-color hover:shadow-lg\">\r\n          GET PRO VERSION\r\n        </a>\r\n      </div>\r\n\r\n      <div class=\"flex flex-col gap-10\">\r\n        <div class=\"flex flex-row justify-center mb-4 text-lg italic text-center\">\r\n          <Icon class=\"mr-2\" :name=\"'i-twemoji-thinking-face'\" :text-size=\"'text-4xl'\" />\r\n          <span class=\"mt-1\">What features will be unlocked?</span>\r\n        </div>\r\n\r\n        <div class=\"flex flex-row w-full\">\r\n          <!-- preview -->\r\n          <div class=\"mr-4 w-4/6 h-36 bg-blue-300 rounded-md\"></div>\r\n          <div class=\"w-full\">\r\n            <h1 class=\"mb-2 text-lg font-bold\">Sort by Popularity</h1>\r\n            Find popular artwork with advanced options\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"flex flex-row w-full\">\r\n          <div class=\"w-full\">\r\n            <h1 class=\"mb-2 text-lg font-bold\">Sort by Popularity</h1>\r\n            Find popular artwork with advanced options\r\n          </div>\r\n          <div class=\"mr-4 w-4/6 h-36 bg-blue-300 rounded-md\"></div>\r\n        </div>\r\n\r\n        <div class=\"flex flex-row w-full\">\r\n          <!-- preview -->\r\n          <div class=\"mr-4 w-4/6 h-36 bg-blue-300 rounded-md\"></div>\r\n          <div class=\"w-full\">\r\n            <h1 class=\"mb-2 text-lg font-bold\">Sort by Popularity</h1>\r\n            Find popular artwork with advanced options\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"flex flex-row w-full\">\r\n          <div class=\"w-full\">\r\n            <h1 class=\"mb-2 text-lg font-bold\">Sort by Popularity</h1>\r\n            Find popular artwork with advanced options\r\n          </div>\r\n          <div class=\"mr-4 w-4/6 h-36 bg-blue-300 rounded-md\"></div>\r\n        </div>\r\n\r\n        <div class=\"flex flex-row w-full\">\r\n          <!-- preview -->\r\n          <div class=\"mr-4 w-4/6 h-36 bg-blue-300 rounded-md\"></div>\r\n          <div class=\"w-full\">\r\n            <h1 class=\"mb-2 text-lg font-bold\">Sort by Popularity</h1>\r\n            Find popular artwork with advanced options\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"flex flex-row w-full\">\r\n          <div class=\"w-full\">\r\n            <h1 class=\"mb-2 text-lg font-bold\">Sort by Popularity</h1>\r\n            Find popular artwork with advanced options\r\n          </div>\r\n          <div class=\"mr-4 w-4/6 h-36 bg-blue-300 rounded-md\"></div>\r\n        </div>\r\n      </div>\r\n    \r\n      <div id=\"pay\" class=\"p-10 w-full text-center rounded-md theme-color\">\r\n        <div v-show=\"!isPro\">\r\n          <div class=\"mb-4 text-lg font-bold\">Get PRO version for only ${{ amount }}/month</div>\r\n\r\n          <div id=\"smart-button-container\" class=\"mx-auto w-4/6\">\r\n            <div style=\"te3h-36-align: center;\">\r\n              <div id=\"paypalRef\" ref=\"paypalRef\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div v-show=\"isPro\" class=\"text-xl font-bold\">\r\n          <p class=\"text-green-500\">PRO version active</p>\r\n          <p class=\"mt-2 text-sm font-normal\">Expiry Date: 00/00/0000</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </Layout>\r\n</template>\r\n\r\n<script setup>\r\n// stores\r\nimport useAuthStore from '@/stores/auth.store'\r\n\r\nimport Layout from '~/components/layouts/Layout.vue'\r\nimport Icon from '~/components/globals/Icon.vue'\r\n\r\n// stores\r\nconst auth = useAuthStore()\r\n\r\n// composition\r\nconst { oApiConfiguration, fetchOptions } = useApiFetch()\r\nconst proApi = usePro(oApiConfiguration, fetchOptions())\r\n\r\nonBeforeMount(async () => {\r\n  await checkCurrentSubscriptionStatus()\r\n})\r\n\r\nconst isPro = ref(false)\r\nconst checkCurrentSubscriptionStatus = async () => {\r\n  const [data, error] = await proApi.checkSubscriptionStatus()\r\n\r\n  if (error) {\r\n    isPro.value = false\r\n  } else {\r\n    if (data.is_pro) {\r\n      isPro.value = true\r\n    } else {\r\n      isPro.value = false\r\n    }\r\n  }\r\n}\r\n\r\nonMounted (() => {\r\n  const script = document.createElement(\"script\")\r\n  script.src = \"https://www.paypal.com/sdk/js?client-id=AbFZEy35RTD5A3oCINCJ0m6gfaofU2B95o8gOMRq7ry8C58Uw9hfVNEeVejkXLDjqHOt0ueQ_GoswZei&enable-funding=venmo&currency=USD\"\r\n  script.addEventListener(\"load\", initPaypal)\r\n  document.body.appendChild(script)\r\n})\r\n\r\nconst amount = ref('2.99')\r\nconst paypalRef = ref('paypalRef')\r\nconst initPaypal = () => {\r\n  window.paypal.Buttons({\r\n    style: {\r\n      shape: 'rect',\r\n      color: 'blue',\r\n      layout: 'vertical',\r\n      label: 'paypal',\r\n    },\r\n\r\n    createOrder: function(data, actions) {\r\n      return actions.order.create({\r\n        purchase_units: [{\"description\":\"Upy 1 Month (Sandbox)\",\"amount\":{\"currency_code\":\"USD\",\"value\": amount.value}}]\r\n      });\r\n    },\r\n\r\n    onApprove: async function(data, actions) {\r\n      return await actions.order.capture().then(async function(orderData) {\r\n        // console.log(orderData)\r\n        // console.log('Merchant ID:', orderData.purchase_units[0].payee.merchant_id)\r\n\r\n        if (orderData.purchase_units[0].payee.merchant_id === 'NUTUV969GELDJ' && orderData.purchase_units[0].amount.value == amount.value) {\r\n          const [success, error] = await proApi.registerProVersion({\r\n            paymentType: 'paypal',\r\n            amount: amount.value,\r\n            orderData: JSON.stringify(orderData)\r\n          })\r\n\r\n          if (success) {\r\n            isPro.value = true\r\n          } else {\r\n            console.error('something went wrong!', error)\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    onError: function(err) {\r\n      console.log(err);\r\n    }\r\n  }).render(document.getElementById('paypalRef'))\r\n}\r\n</script>"],"names":["useAuthStore","oApiConfiguration","fetchOptions","useApiFetch","proApi","usePro","isPro","ref","onMounted","script","initPaypal","amount","paypalRef","data","actions","orderData","success","error","err"],"mappings":"koFAsGAA,EAAA,EAGA,KAAA,CAAA,kBAAAC,EAAA,aAAAC,CAAA,EAAAC,EAAA,EACAC,EAAAC,EAAAJ,EAAAC,GAAA,EAMAI,EAAAC,EAAA,EAAA,EAeAC,EAAA,IAAA,CACA,MAAAC,EAAA,SAAA,cAAA,QAAA,EACAA,EAAA,IAAA,6JACAA,EAAA,iBAAA,OAAAC,CAAA,EACA,SAAA,KAAA,YAAAD,CAAA,CACA,CAAA,EAEA,MAAAE,EAAAJ,EAAA,MAAA,EACAK,EAAAL,EAAA,WAAA,EACAG,EAAA,IAAA,CACA,OAAA,OAAA,QAAA,CACA,MAAA,CACA,MAAA,OACA,MAAA,OACA,OAAA,WACA,MAAA,QACA,EAEA,YAAA,SAAAG,EAAAC,EAAA,CACA,OAAAA,EAAA,MAAA,OAAA,CACA,eAAA,CAAA,CAAA,YAAA,wBAAA,OAAA,CAAA,cAAA,MAAA,MAAAH,EAAA,KAAA,CAAA,CAAA,CACA,CAAA,CACA,EAEA,UAAA,eAAAE,EAAAC,EAAA,CACA,OAAA,MAAAA,EAAA,MAAA,QAAA,EAAA,KAAA,eAAAC,EAAA,CAIA,GAAAA,EAAA,eAAA,GAAA,MAAA,cAAA,iBAAAA,EAAA,eAAA,GAAA,OAAA,OAAAJ,EAAA,MAAA,CACA,KAAA,CAAAK,EAAAC,CAAA,EAAA,MAAAb,EAAA,mBAAA,CACA,YAAA,SACA,OAAAO,EAAA,MACA,UAAA,KAAA,UAAAI,CAAA,CACA,CAAA,EAEAC,EACAV,EAAA,MAAA,GAEA,QAAA,MAAA,wBAAAW,CAAA,CAEA,CACA,CAAA,CACA,EAEA,QAAA,SAAAC,EAAA,CACA,QAAA,IAAAA,CAAA,CACA,CACA,CAAA,EAAA,OAAA,SAAA,eAAA,WAAA,CAAA,CACA"}