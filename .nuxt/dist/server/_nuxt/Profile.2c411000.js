import{c as ee,d as Q,i as X,_ as ce,h as me,Q as Me,l as Le,e as Ae}from"../server.mjs";import{ref as p,openBlock as o,createElementBlock as s,Fragment as H,renderList as K,createElementVNode as e,createVNode as v,withCtx as G,createTextVNode as R,toDisplayString as a,createCommentVNode as c,unref as w,withDirectives as M,vShow as E,withModifiers as W,pushScopeId as ve,popScopeId as fe,onBeforeMount as Pe,createBlock as V,KeepAlive as we,normalizeClass as j,vModelText as Z,watch as Ce,onMounted as pe,normalizeStyle as Ie,computed as Fe}from"vue";import"vue-router";import{W as ge,M as _e,e as ne,S as ie,c as re,_ as de,f as ue,g as Se,u as je}from"./ModalView.b218d979.js";import{v as Te,u as he,L as Re}from"./Layout.82674cce.js";import{_ as Y,a as x,u as Ue}from"./Icon.4480cdda.js";import{u as Be}from"./useFeed.1b0a564c.js";import{F as ze}from"./FeedModalView.1638ffa8.js";import{_ as te}from"./ErrorMessages.9543f57f.js";import{u as ke}from"./useUser.415c12c8.js";const ye=i=>(ve("data-v-4bb85468"),i=i(),fe(),i),Oe={class:"mx-auto w-full md:w-1/2"},Ve={class:"flex flex-row mb-4 rounded-lg border-none theme-color-secondary shadow-none"},Ne={class:"w-full"},De={key:0,class:"p-4 user-info"},qe=["src"],We={class:"name"},Ge=ye(()=>e("br",null,null,-1)),He=ye(()=>e("span",{class:"mx-1"},"\xB7",-1)),Ke={class:"text-xxs"},Qe={class:"px-4 mt-6"},Je={class:"mt-2"},Xe={class:"float-right m-6 interactions"},Ye={key:0,class:"reactions"},Ze=["onClick"],et=["onClick"],tt={class:"option dropdown"},ot={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"option-dropdown-items"},lt={class:"option-dropdown dropdown-menu"},st={id:"option-dropdown-items",class:"w-52 toggler","aria-labelledby":"option-dropdown-buttons",role:"menu"},at={class:"menu-wrapper"},nt={class:"mx-auto text-center"},it={class:"mx-auto text-center"},rt={class:"mx-auto mt-10 text-center"},ut=ye(()=>e("b",null,"(\u3186_\u3186)",-1)),dt={id:"chronological-feed-modal",class:"modal work-view"},ct={__name:"Feeds",props:{userId:{type:Number,default:0}},setup(i){const L=i,$=ee(),{oApiConfiguration:r,fetchOptions:A}=Q(),b=Be(r,A()),_=p([]),g=p({page:0,perPage:10}),f=async({loaded:t})=>{await setTimeout(async()=>{const[h,y]=await b.getFeedByUserId({userId:L.userId,pagination:{page:g.value.page,perPage:g.value.perPage}});h.feeds.length&&(g.value.page+=1,h.feeds.forEach(k=>{_.value.push(k),k.liked&&n.value.push(k.id)})),t(_.value.length,g.value.perPage)},1e3)},m=p(null),l=t=>{m.value.view(t),X().openModal("chronological-feed-modal")},n=p([]),C=async t=>{const[h,y]=await b.like({feedId:t});if(h){n.value.push(t);const k=document.getElementById(`profileFeedLikeButton-${t}`);k.classList.add("animate-bounce"),setInterval(()=>{k.classList.remove("animate-bounce")},2500)}},U=async t=>{const[h,y]=await b.unlike({feedId:t});if(h){const k=n.value.indexOf(t);n.value.splice(k,1)}};return(t,h)=>{const y=ce;return o(),s("div",Oe,[(o(!0),s(H,null,K(_.value,k=>(o(),s("div",{key:k.id},[e("div",Ve,[e("div",Ne,[k.users?(o(),s("div",De,[v(y,{to:"/profile/"+k.users.username},{default:G(()=>[e("img",{class:"avatar",src:t.avatarCoverUrl(k.users.avatar_bucket,k.users.avatar_filename),onError:h[0]||(h[0]=(...P)=>t.imageLoadError&&t.imageLoadError(...P))},null,40,qe)]),_:2},1032,["to"]),e("div",We,[v(y,{to:"/profile/"+k.users.username,class:"fullname"},{default:G(()=>[R(a(k.users.name),1)]),_:2},1032,["to"]),Ge,v(y,{to:"/profile/"+k.users.username,class:"username hover:underline"},{default:G(()=>[R(" @"+a(k.users.username),1)]),_:2},1032,["to"]),He,e("span",Ke,a(t.formatDate(k.scheduled_post?k.scheduled_post:k.created_at,!0)),1)])])):c("",!0),e("div",Qe,[e("p",Je,a(k.text),1)]),e("div",Xe,[w($).loggedIn?(o(),s("div",Ye,[e("span",{class:"leading-8",onClick:P=>n.value.includes(k.id)?U(k.id):C(k.id)},[M(v(x,{id:"profileFeedLikeButton-"+k.id,name:"i-ion-heart",class:"mr-1 text-red-500 hover:text-red-500"},null,8,["id"]),[[E,n.value.includes(k.id)]]),M(v(x,{name:"i-ion-heart-outline",class:"mr-1 icon-color hover:text-red-500"},null,512),[[E,!n.value.includes(k.id)]]),R(" "+a(t.thousand(k._count.feed_likes)),1)],8,Ze),e("span",{class:"leading-8",onClick:W(P=>l(k.id),["prevent"])},[v(x,{name:"i-mdi-comment-multiple-outline",class:"mr-1 icon-color hover:text-blue-500"}),R(" "+a(t.thousand(k._count.feed_comments)),1)],8,et),e("div",tt,[e("button",ot,[e("span",null,[v(x,{name:"i-uit-ellipsis-v",class:"align-middle icon icon-color"})])]),e("div",lt,[e("div",st,[e("div",at,[v(y,{to:"/feed/"+k.id,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:G(()=>[v(x,{name:"i-fluent-arrow-enter-20-filled",class:"mr-2 text-base"}),R(" "+a(t.$t("open")),1)]),_:2},1032,["to"]),v(y,{to:"/feed/"+k.id,target:"_blank",class:"flex z-20 py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:G(()=>[v(x,{name:"i-ci-external-link",class:"mr-2 text-base"}),R(" "+a(t.$t("openInNewTab")),1)]),_:2},1032,["to"])])])])])])):c("",!0)])])])]))),128)),v(w(Te.exports.VueEternalLoading),{load:f},{loading:G(()=>[e("div",nt,[v(x,{name:"i-line-md-loading-twotone-loop",class:"text-3xl"})])]),"no-more":G(()=>[e("div",it,a(t.$t("youHaveReachedTheEnd")),1)]),"no-results":G(()=>[e("div",rt,[ut,R(" "+a(t.$t("nothingToShow")),1)])]),_:1}),e("div",dt,[v(ze,{ref_key:"chronologicalFeedModalViewRef",ref:m,section:"chronological-feed"},null,512)])])}}},mt=Y(ct,[["__scopeId","data-v-4bb85468"]]),vt={id:"lists"},ft=["id"],pt={__name:"Artworks",props:{userId:{type:Number,default:0},manageMode:{type:Boolean,default:!1}},emits:["feedSelectedItems","onEmpty"],setup(i,{emit:L}){const $=i,{oApiConfiguration:r,fetchOptions:A}=Q(),b=Ue(r,A()),_="profile",g=p(!1);Pe(()=>{f()});const f=async()=>{const[O,z]=await n();m.value=O,z.record_total<=l.value.perPage&&t(),z.record_total===0&&P()},m=p([]),l=p({perPage:24,page:0}),n=async()=>{l.value.page===0&&(g.value=!0);const[O,z,q]=await b.getUserArtworks({userId:$.userId,pagination:{page:l.value.page,perPage:l.value.perPage}});if(q)N();else return z.record_total<=l.value.perPage&&t(),z.record_total===0&&P(),l.value.page+=1,C(),[O,z]},C=()=>{g.value=!1,k.value=!1,S.value=!1},U=p(!0),t=()=>{U.value=!1},h=p({delay:!1}),y=async()=>{h.value.delay=!0;const[O,z]=await n();for(let q=0;q<O.length;q++)m.value.push(O[q]);h.value.delay=!1,dataPagination.next_previous.next_page||t(),dataPagination.next_previous.next_page&&dataPagination.current_page===h.maxLoad&&(t(),h.showDiscoveryButton=!0)},k=p(!1),P=()=>{k.value=!0,t(),L("onEmpty")},S=p(!1),N=()=>{g.value=!1,S.value=!0,t()},D=p(null),I=(O,z=!1)=>{D.value.view(O,z),X().openModal(_+"-modal")},T=O=>{L("feedSelectedItems",O)};return(O,z)=>(o(),s("div",vt,[M(e("div",null,[(o(),V(we,null,[M(v(ge,{"section-class":"work-grid",works:m.value,view:I,"manage-mode":i.manageMode,onFeedManageList:T},null,8,["works","manage-mode"]),[[E,!k.value]])],1024)),M(e("div",{class:j(["primary-button",h.value.delay?"animate-pulse":""]),onClick:y},a(O.$t("loadMore")),3),[[E,U.value]])],512),[[E,!g.value]]),v(te,{loading:g.value,empty:k.value,error:S.value,fetch:n},null,8,["loading","empty","error"]),e("div",{id:_+"-modal",class:"modal work-view"},[M(v(_e,{ref_key:"profileModalViewRef",ref:D,section:_},null,512),[[E,!g.value]])],8,ft)]))}},ht=Y(pt,[["__scopeId","data-v-0121f048"]]),bt={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},wt={class:"title"},gt=["name"],_t=["placeholder"],kt=["placeholder"],yt=["for"],$t=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),xt={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},Mt=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Ct=[Mt],It={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Et=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Lt=[Et],At={class:"ml-2"},Pt={class:"flex flex-row gap-2 justify-end mt-2"},Ft={type:"submit",class:"primary-button"},St={__name:"AlbumFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(i,{emit:L}){const $=i,{oApiConfiguration:r,fetchOptions:A}=Q(),b=ne(r,A()),{t:_}=me(),g="create-album-form",f=p({title:"",description:"",isPublic:1,category:"artwork"}),m=async()=>{he().validate(g,_);try{let l=!1,n={};if($.category){const[C,U,t]=await b.createAlbum($.category,f.value);l=C,n=U}l&&(X().closeModal($.modalId),L("created",n))}catch{}};return(l,n)=>(o(),s("div",null,[e("div",bt,[e("div",null,[e("span",wt,a(l.$t("albums.create.form.title")),1),e("form",{id:g,class:"mt-2",onSubmit:n[4]||(n[4]=W(C=>m(),["prevent"]))},[e("n-validate",{for:"title",name:l.$t("title")},[M(e("input",{"onUpdate:modelValue":n[0]||(n[0]=C=>f.value.title=C),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:l.$t("title")},null,8,_t),[[Z,f.value.title]])],8,gt),M(e("textarea",{"onUpdate:modelValue":n[1]||(n[1]=C=>f.value.description=C),class:"form-input theme-color-secondary",placeholder:l.$t("description"),"data-gramm":"false"},null,8,kt),[[Z,f.value.description]]),e("label",{for:f.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:n[2]||(n[2]=C=>f.value.isPublic=!f.value.isPublic)},[$t,f.value.isPublic?(o(),s("span",xt,Ct)):c("",!0),f.value.isPublic?c("",!0):(o(),s("span",It,Lt))]),e("span",At,a(l.$t("private")),1)],8,yt),e("div",Pt,[e("button",{class:"cancel-button",onClick:n[3]||(n[3]=W(C=>l.closeModal(i.modalId),["prevent"]))},a(l.$t("cancel")),1),e("button",Ft,a(l.$t("create")),1)])],32)])])]))}},jt={id:"lists"},Tt={class:"p-4 mb-4 w-full rounded-md theme-color-secondary"},Rt={class:"mb-2 text-base font-bold"},Ut={class:"mb-2"},Bt=R(),zt={class:"italic"},Ot=["id"],Vt={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1}},emits:["onAlbumEmpty","feedManageList"],setup(i,{expose:L,emit:$}){const r=i,{oApiConfiguration:A,fetchOptions:b}=Q(),_=ne(A,b()),g=p(r.id);Ce(()=>r.id,(I,T)=>{g.value=I});const f=p(!1),m=p({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:12},list:[],empty:!1}),l=async()=>{f.value=!0,await n(),await C(),f.value=!1},n=async()=>{const[I,T]=await _.getInfo(g.value);m.value.info=I.data},C=async()=>{const[I,T,O]=await _.listAlbumItems({albumId:g.value,pagination:{page:m.value.pagination.page,perPage:m.value.pagination.page===0?m.value.pagination.firstLoad:m.value.pagination.perPage}});T?m.value.pagination.page===0?m.value.pagination.page=m.value.pagination.firstLoad/m.value.pagination.perPage:m.value.pagination.page+=m.value.pagination.page!==0?1:2:m.value.loadMore=!1,I!==null&&I.length?(I.forEach(z=>{m.value.list.push(z.artworks)}),$("onAlbumEmpty",!1)):(m.value.empty=!0,$("onAlbumEmpty",!0))},U=()=>{m.value.loadMore=!0,m.value.pagination.page=0,m.value.list=[]},t=p([]),h=I=>{t.value=I,$("feedManageList",I)},y=p(!1);let k;const P=async()=>{const[I,T]=await _.removeItems(r.id,t.value);I&&(re().splash(k,y,"item-removed-alert"),U(),await l())},S=p("album"),N=p(null),D=(I,T=!1)=>{N.value.view(I,T),X().openModal(S.value+"-modal")};return L({fetchInfo:n,removeItems:P}),(I,T)=>(o(),s("div",jt,[e("div",{class:"hidden",onClick:T[0]||(T[0]=O=>n())}),e("div",{class:"hidden",onClick:T[1]||(T[1]=O=>P())}),e("div",Tt,[e("div",Rt,a(m.value.info.name),1),e("div",Ut,a(m.value.info.description),1),e("div",null,[e("b",null,a(I.$t("private"))+":",1),Bt,e("span",zt,a(m.value.info.is_public?I.$t("no"):I.$t("yes")),1)]),e("div",null,[e("b",null,a(I.$t("createdAt")),1),R(" "+a(I.formatDate(m.value.info.created_at)),1)])]),M(e("div",null,[(o(),V(we,null,[M(v(ge,{"section-class":"work-grid",works:m.value.list,view:D,"manage-mode":i.manageMode,onFeedManageList:h},null,8,["works","manage-mode"]),[[E,!m.value.empty]])],1024)),M(e("div",{class:"primary-button",onClick:T[2]||(T[2]=O=>C())},a(I.$t("loadMore")),513),[[E,m.value.loadMore]])],512),[[E,!f.value]]),v(te,{loading:f.value,empty:m.value.empty,error:!1,fetch:l},null,8,["loading","empty"]),f.value?c("",!0):(o(),s("div",{key:0,id:S.value+"-modal",class:"modal work-view"},[v(_e,{ref_key:"albumModalViewRef",ref:N,section:S.value},null,8,["section"])],8,Ot)),M(v(ie,{id:"item-removed-alert",text:I.$t("albums.itemRemoved")},null,8,["text"]),[[E,y.value]])]))}},Nt=Y(Vt,[["__scopeId","data-v-cea642c2"]]),Dt={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},qt={class:"title"},Wt=["name"],Gt=["placeholder"],Ht=["placeholder"],Kt=["for"],Qt=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),Jt={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},Xt=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Yt=[Xt],Zt={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},eo=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),to=[eo],oo={class:"ml-2"},lo={class:"flex flex-row gap-2 justify-end mt-2"},so={type:"submit",class:"primary-button"},ao={__name:"EditForm",props:{albumId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(i,{expose:L,emit:$}){const r=i,{oApiConfiguration:A,fetchOptions:b}=Q(),_=ne(A,b()),{t:g}=me(),f=p(!0),m=async t=>{if(t){U(),f.value=!0;const[h,y]=await _.getInfo(t),k=h.data;n.value.id=t,n.value.name=k.name,n.value.description=k.description,n.value.isPublic=!!k.is_public,f.value=!1}},l="update-album-form",n=p({id:0,name:"",description:"",isPublic:!1}),C=async()=>{he().validate(l,g);const[t,h]=await _.update({id:n.value.id,name:n.value.name,description:n.value.description,isPublic:n.value.isPublic?1:0});h||(X().closeModal(r.modalId),$("updated",n.value),U())},U=()=>{n.value={id:0,name:"",description:"",isPublic:0}};return L({fetch:m}),(t,h)=>(o(),s("div",null,[e("div",Dt,[e("div",null,[e("span",qt,a(t.$t("albums.edit.form.title")),1),f.value?c("",!0):(o(),s("form",{key:0,id:l,class:"mt-2",onSubmit:h[4]||(h[4]=W(y=>C(),["prevent"]))},[e("n-validate",{for:"title",name:t.$t("title")},[M(e("input",{"onUpdate:modelValue":h[0]||(h[0]=y=>n.value.name=y),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:t.$t("title")},null,8,Gt),[[Z,n.value.name]])],8,Wt),M(e("textarea",{"onUpdate:modelValue":h[1]||(h[1]=y=>n.value.description=y),class:"form-input theme-color-secondary",placeholder:t.$t("description"),"data-gramm":"false"},null,8,Ht),[[Z,n.value.description]]),e("label",{for:n.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:h[2]||(h[2]=y=>n.value.isPublic=!n.value.isPublic)},[Qt,n.value.isPublic?(o(),s("span",Jt,Yt)):c("",!0),n.value.isPublic?c("",!0):(o(),s("span",Zt,to))]),e("span",oo,a(t.$t("private")),1)],8,Kt),e("div",lo,[e("button",{class:"cancel-button",onClick:h[3]||(h[3]=W(y=>t.closeModal(i.modalId),["prevent"]))},a(t.$t("cancel")),1),e("button",so,a(t.$t("save")),1)])],32))])])]))}},Ee=""+globalThis.__buildAssetsURL("folder.11be08fa.png"),$e=i=>(ve("data-v-c3fbed63"),i=i(),fe(),i),no={class:"mb-2"},io={key:0},ro=$e(()=>e("img",{src:Ee,class:"rounded"},null,-1)),uo=[ro],co={key:1},mo={class:"relative text-center"},vo={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},fo={class:"overflow-hidden rounded-md"},po=["src"],ho={key:2,class:"imgrid"},bo={class:"relative text-center"},wo={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},go={class:"overflow-hidden rounded-md"},_o=["src"],ko=$e(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),yo=$e(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),$o={key:3,class:"imgrid"},xo={class:"relative text-center"},Mo={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Co={class:"overflow-hidden rounded-md"},Io=["src"],Eo={key:4,class:"imgrid"},Lo={class:"relative text-center"},Ao={key:0,class:"absolute top-1/2 left-1/2 z-10 text-tiny font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Po={class:"overflow-hidden rounded-md"},Fo=["src"],So={key:5,class:"imgrid"},jo={key:0,class:"relative text-center"},To={key:0,class:"absolute top-1/2 left-1/2 z-10 text-tiny font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Ro={class:"overflow-hidden rounded-md"},Uo=["src"],Bo={key:1,class:"relative text-center"},zo={class:"absolute top-1/2 left-1/2 z-10 text-3xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Oo={class:"overflow-hidden rounded-md"},Vo=["src"],No={__name:"ArtworkThumbnail",props:{album:{type:Object,default:()=>{}}},setup(i){const L=ee(),$={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(r,A)=>(o(),s("div",no,[!i.album.album_has_artworks||i.album._count.album_has_artworks===0?(o(),s("div",io,uo)):c("",!0),i.album.album_has_artworks&&i.album._count.album_has_artworks===1?(o(),s("div",co,[e("div",mo,[r.applyExplicitFilter(w(L),i.album.album_has_artworks[0].artworks.is_explicit)?(o(),s("span",vo,a(r.$t("explicitContent")),1)):c("",!0),e("div",fo,[i.album.album_has_artworks&&i.album._count.album_has_artworks===1?(o(),s("img",{key:0,src:r.artworkThumb(i.album.album_has_artworks[0].artworks.artwork_assets[0].bucket,i.album.album_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:j(["object-cover object-top rounded",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),i.album.album_has_artworks[0].artworks.is_explicit)}]),style:{"aspect-ratio":"1/1"},onError:A[0]||(A[0]=(...b)=>r.imageLoadError&&r.imageLoadError(...b))},null,42,po)):c("",!0)])])])):c("",!0),i.album.album_has_artworks&&i.album._count.album_has_artworks===2?(o(),s("div",ho,[(o(!0),s(H,null,K(i.album.album_has_artworks,(b,_)=>(o(),s("div",{key:_,class:j($[2][_])},[e("div",bo,[r.applyExplicitFilter(w(L),b.artworks.is_explicit)?(o(),s("span",wo,a(r.$t("explicitContent")),1)):c("",!0),e("div",go,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),b.artworks.is_explicit)}]),src:r.artworkThumb(b.artworks.artwork_assets[0].bucket,b.artworks.artwork_assets[0].filename,"thumbnail"),onError:A[1]||(A[1]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,_o)])])],2))),128)),ko,yo])):c("",!0),i.album.album_has_artworks&&i.album._count.album_has_artworks===3?(o(),s("div",$o,[(o(!0),s(H,null,K(i.album.album_has_artworks,(b,_)=>(o(),s("div",{key:_,class:j($[3][_])},[e("div",xo,[r.applyExplicitFilter(w(L),b.artworks.is_explicit)?(o(),s("span",Mo,a(r.$t("explicitContent")),1)):c("",!0),e("div",Co,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),b.artworks.is_explicit)}]),src:r.artworkThumb(b.artworks.artwork_assets[0].bucket,b.artworks.artwork_assets[0].filename,"thumbnail"),onError:A[2]||(A[2]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,Io)])])],2))),128))])):c("",!0),i.album.album_has_artworks&&i.album._count.album_has_artworks===4?(o(),s("div",Eo,[(o(!0),s(H,null,K(i.album.album_has_artworks,(b,_)=>(o(),s("div",{key:_},[e("div",Lo,[r.applyExplicitFilter(w(L),b.artworks.is_explicit)?(o(),s("span",Ao,a(r.$t("explicitContent")),1)):c("",!0),e("div",Po,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),b.artworks.is_explicit)}]),src:r.artworkThumb(b.artworks.artwork_assets[0].bucket,b.artworks.artwork_assets[0].filename,"thumbnail"),onError:A[3]||(A[3]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,Fo)])])]))),128))])):c("",!0),i.album.album_has_artworks&&i.album._count.album_has_artworks>4?(o(),s("div",So,[(o(!0),s(H,null,K(i.album.album_has_artworks,(b,_)=>(o(),s("div",{key:_},[_<3?(o(),s("div",jo,[r.applyExplicitFilter(w(L),b.artworks.is_explicit)?(o(),s("span",To,a(r.$t("explicitContent")),1)):c("",!0),e("div",Ro,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),b.artworks.is_explicit)}]),src:r.artworkThumb(b.artworks.artwork_assets[0].bucket,b.artworks.artwork_assets[0].filename,"thumbnail"),onError:A[4]||(A[4]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,Uo)])])):(o(),s("div",Bo,[e("span",zo,"+"+a(i.album._count.album_has_artworks-4),1),e("div",Oo,[e("img",{src:r.artworkThumb(b.artworks.artwork_assets[0].bucket,b.artworks.artwork_assets[0].filename,"thumbnail"),class:j(["z-0 brightness-50",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),b.artworks.is_explicit)}]),onError:A[5]||(A[5]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,Vo)])]))]))),128))])):c("",!0)]))}},Do=Y(No,[["__scopeId","data-v-c3fbed63"]]),qo={class:"mb-4 w-full"},Wo={key:0,class:"flex flex-row justify-between"},Go={class:"flex flex-row"},Ho={key:0},Ko={key:1,class:"flex flex-row justify-between"},Qo={class:"flex flex-row"},Jo={class:"flex flex-row gap-2"},Xo={class:"flex flex-row gap-2"},Yo={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},Zo=["onClick"],el={class:"flex flex-row pb-1 mt-4 font-bold"},tl={class:"text-xs font-normal"},ol={__name:"Album",props:{userId:{type:Number,default:0}},setup(i){const L=i,$=ee(),{oApiConfiguration:r,fetchOptions:A}=Q(),b=ne(r,A());pe(()=>{C()});const _=p(!1),g=p("artwork"),f=p(0),m=p([]),l=p({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),n=p({artwork:0}),C=async()=>{_.value=!0;const[d,u,F]=await b.fetchAlbums(L.userId,g.value,l.value.pagination.page===0?l.value.pagination.firstLoad:l.value.pagination.perPage,l.value.pagination.page);if(F)k();else{d.length||(l.value.manageMode=!1,h()),d.forEach(be=>{m.value.push(be)}),l.value.pagination.page+=l.value.pagination.firstLoad/l.value.pagination.perPage,l.value.showLoadMore=u;const[B]=await b.countArtworkAlbums(L.userId);n.value.artwork=B}_.value=!1},U=async()=>await C(),t=p(!1),h=()=>{t.value=!0,l.value.showLoadMore=!1},y=p(!1),k=()=>{_.value=!1,y.value=!0,l.value.showLoadMore=!1},P=async()=>{_.value=!1,t.value=!1,y.value=!1,l.value.pagination.page=0,m.value=[],await C()},S=p(!1);let N;const D=async()=>{re().splash(N,S,"created-alert"),await P()},I=p(null),T=()=>{I.value.fetch(f.value),X().openModal("album-edit-form-modal")},O=p(null),z=d=>{O.value.fetchInfo(),m.value.forEach(u=>{u.id===d.id&&(u.name=d.name,u.description=d.description,u.is_public=d.isPublic)})},q=()=>{O.value.removeItems()},J=p([]),oe=d=>{J.value=d},le=async()=>{if(f.value!==0){const[d,u]=await b.deleteAlbum(f.value);d&&(f.value=0,P())}},se=d=>{l.value.showManageButton=!d,l.value.manageMode=!1},ae=()=>{f.value=0,l.value.showManageButton=!1,l.value.manageMode=!1};return(d,u)=>(o(),s("div",null,[e("div",qo,[f.value?c("",!0):(o(),s("div",Wo,[e("div",Go,[e("div",{class:j(["ml-0 primary-button theme-color-secondary",{"button-color text-white":g.value==="artwork"}]),onClick:u[0]||(u[0]=F=>g.value="artwork")},[R(a(d.$t("artworks.artwork"))+" ",1),e("span",{class:j(["px-1 ml-2 font-normal rounded",g.value==="artwork"?"theme-color":"button-color text-white"])},a(n.value.artwork),3)],2)]),w($).loggedIn&&w($).user.id===i.userId?(o(),s("div",Ho,[e("div",{class:"icon-button",onClick:u[1]||(u[1]=F=>d.openModal("album-form-modal"))},[v(x,{name:"i-ion-add-outline"})])])):c("",!0)])),f.value?(o(),s("div",Ko,[e("div",null,[e("div",{class:"ml-0 icon-button",onClick:u[2]||(u[2]=F=>ae())},[v(x,{name:"i-ic-baseline-keyboard-arrow-left"})])]),e("div",Qo,[M(e("div",Jo,[e("button",{class:"action-button secondary-button",onClick:u[3]||(u[3]=F=>l.value.manageMode=!l.value.manageMode)},[v(x,{name:l.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),R(" "+a(l.value.manageMode?d.$t("quit"):d.$t("manage")),1)]),M(e("button",{class:j(["flex flex-row",J.value.length>0?"danger-button":"disabled-button cursor-not-allowed"]),onClick:u[4]||(u[4]=F=>J.value.length>0?d.openModal("item-deletion-confirm-modal"):null)},[v(x,{name:"i-akar-icons-trash-bin"}),R(" "+a(d.$t("albums.removeSelected")),1)],2),[[E,l.value.manageMode]])],512),[[E,w($).loggedIn&&w($).user.id===i.userId&&l.value.showManageButton]]),M(e("div",Xo,[e("button",{class:"icon-button",onClick:u[5]||(u[5]=F=>T())},[v(x,{name:"i-ph-gear-six"})]),e("button",{class:"danger-button-color b-button",onClick:u[6]||(u[6]=F=>d.openModal("album-deletion-confirm-modal"))},[v(x,{name:"i-akar-icons-trash-bin"})])],512),[[E,w($).loggedIn&&w($).user.id===i.userId&&!l.value.manageMode]])])])):c("",!0),M(e("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},a(d.$t("albums.manageModeActiveMessage")),513),[[E,l.value.manageMode]])]),f.value?c("",!0):(o(),s("div",Yo,[(o(!0),s(H,null,K(m.value,F=>(o(),s("div",{key:F.id,class:j(["p-3 rounded-md cursor-pointer",F.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:B=>f.value=F.id},[F.type==="artwork"?(o(),V(Do,{key:0,album:F},null,8,["album"])):c("",!0),e("div",el,[F.is_public?c("",!0):(o(),V(x,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),e("span",tl,a(F.name),1)])],10,Zo))),128))])),l.value.showLoadMore&&!f.value?(o(),s("div",{key:1,class:"mt-4 w-full primary-button",onClick:U},a(d.$t("loadMore")),1)):c("",!0),v(te,{loading:_.value,empty:t.value,error:y.value,fetch:C},null,8,["loading","empty","error"]),!_.value&&!f.value?(o(),V(St,{key:2,id:"album-form-modal","modal-id":"album-form-modal",category:g.value,class:"modal",onCreated:D},null,8,["category"])):c("",!0),M(v(ie,{id:"created-alert",text:d.$t("albums.created")},null,8,["text"]),[[E,S.value]]),!_.value&&f.value?(o(),V(ao,{key:3,id:"album-edit-form-modal",ref_key:"albumEditFormModalRef",ref:I,"modal-id":"album-edit-form-modal","album-id":f.value,class:"modal",onUpdated:z},null,8,["album-id"])):c("",!0),v(de,{id:"album-deletion-confirm-modal","modal-id":"album-deletion-confirm-modal",message:"All saved items in this album will be deleted. Do you still want to delete this album?",class:"modal",onOnAccept:le},null,8,["message"]),v(de,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this album. Do you still want to remove them?",class:"modal",onOnAccept:q},null,8,["message"]),f.value&&!_.value?(o(),V(Nt,{key:4,id:f.value,ref_key:"albumDetailRef",ref:O,"manage-mode":l.value.manageMode,onOnAlbumEmpty:se,onFeedManageList:oe},null,8,["id","manage-mode"])):c("",!0)]))}},ll=Y(ol,[["__scopeId","data-v-305be548"]]),sl={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},al={class:"title"},nl=["placeholder"],il=["placeholder"],rl=["for"],ul=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),dl={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},cl=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),ml=[cl],vl={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},fl=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),pl=[fl],hl={class:"ml-2"},bl={class:"flex flex-row gap-2 justify-end mt-2"},wl={type:"submit",class:"primary-button"},gl={__name:"CollectionFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(i,{emit:L}){const $=i,{oApiConfiguration:r,fetchOptions:A}=Q(),b=ue(r,A()),{t:_}=me(),g="create-collection-form",f=p({title:"",description:"",isPublic:1,category:"artwork"}),m=async()=>{he().validate(g,_);try{let l=!1,n={};if($.category){const[C,U,t]=await b.createCollection($.category,f.value);t||(l=C,n=U)}l&&(X().closeModal($.modalId),L("created",n))}catch{}};return(l,n)=>(o(),s("div",null,[e("div",sl,[e("div",null,[e("span",al,a(l.$t("collections.create.form.title")),1),e("form",{id:g,class:"mt-2",onSubmit:n[4]||(n[4]=W(C=>m(),["prevent"]))},[e("n-validate",null,[M(e("input",{"onUpdate:modelValue":n[0]||(n[0]=C=>f.value.title=C),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:l.$t("title")},null,8,nl),[[Z,f.value.title]])]),M(e("textarea",{"onUpdate:modelValue":n[1]||(n[1]=C=>f.value.description=C),class:"form-input theme-color-secondary",placeholder:l.$t("description"),"data-gramm":"false"},null,8,il),[[Z,f.value.description]]),e("label",{for:f.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:n[2]||(n[2]=C=>f.value.isPublic=!f.value.isPublic)},[ul,f.value.isPublic?(o(),s("span",dl,ml)):c("",!0),f.value.isPublic?c("",!0):(o(),s("span",vl,pl))]),e("span",hl,a(l.$t("private")),1)],8,rl),e("div",bl,[e("button",{class:"cancel-button",onClick:n[3]||(n[3]=W(C=>l.closeModal(i.modalId),["prevent"]))},a(l.$t("cancel")),1),e("button",wl,a(l.$t("create")),1)])],32)])])]))}},_l={id:"lists"},kl={class:"p-4 mb-4 w-full rounded-md theme-color-secondary"},yl={class:"text-base font-bold mb-2"},$l={class:"mb-2"},xl=R(),Ml={class:"italic"},Cl=["id"],Il={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1},type:{type:String,default:""}},emits:["onCollectionEmpty","feedManageList"],setup(i,{expose:L,emit:$}){const r=i,{oApiConfiguration:A,fetchOptions:b}=Q(),_=ue(A,b()),g=p(r.id);Ce(()=>r.id,(I,T)=>{g.value=I});const f=p(!1),m=p({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:12},list:[],empty:!1}),l=async()=>{f.value=!0,await n(),await C(),f.value=!1},n=async()=>{const[I,T]=await _.getInfo(g.value);m.value.info=I.data},C=async()=>{const[I,T,O]=await _.listCollectionItems({collectionId:g.value,pagination:{page:m.value.pagination.page,perPage:m.value.pagination.page===0?m.value.pagination.firstLoad:m.value.pagination.perPage}});T?m.value.pagination.page===0?m.value.pagination.page=m.value.pagination.firstLoad/m.value.pagination.perPage:m.value.pagination.page+=m.value.pagination.page!==0?1:2:m.value.loadMore=!1,I!==null&&I.length?(I.forEach(z=>{m.value.list.push(z.artworks)}),$("onCollectionEmpty",!1)):(m.value.empty=!0,$("onCollectionEmpty",!0))},U=()=>{m.value.loadMore=!0,m.value.pagination.page=0,m.value.list=[]},t=p([]),h=I=>{t.value=I,$("feedManageList",I)},y=p(!1);let k;const P=async()=>{const[I,T]=await _.removeItem({collectionId:r.id,type:r.type,workId:t.value});T||(re().splash(k,y,"item-removed-alert"),U(),await l(),$("feedManageList",[]))},S=p("collection"),N=p(null),D=(I,T=!1)=>{N.value.view(I,T),X().openModal(S.value+"-modal")};return L({fetchInfo:n,removeItem:P}),(I,T)=>(o(),s("div",_l,[e("div",{class:"hidden",onClick:T[0]||(T[0]=O=>n())}),e("div",{class:"hidden",onClick:T[1]||(T[1]=O=>P())}),e("div",kl,[e("div",yl,a(m.value.info.name),1),e("div",$l,a(m.value.info.description),1),e("div",null,[e("b",null,a(I.$t("private"))+":",1),xl,e("span",Ml,a(m.value.info.is_public?I.$t("no"):I.$t("yes")),1)]),e("div",null,[e("b",null,a(I.$t("createdAt")),1),R(" "+a(I.formatDate(m.value.info.created_at)),1)])]),M(e("div",null,[(o(),V(we,null,[M(v(ge,{"section-class":"work-grid",works:m.value.list,view:D,"manage-mode":i.manageMode,onFeedManageList:h},null,8,["works","manage-mode"]),[[E,!m.value.empty]])],1024)),M(e("div",{class:"primary-button",onClick:T[2]||(T[2]=O=>C())},a(I.$t("loadMore")),513),[[E,m.value.loadMore]])],512),[[E,!f.value]]),v(te,{loading:f.value,empty:m.value.empty,error:!1,fetch:l},null,8,["loading","empty"]),f.value?c("",!0):(o(),s("div",{key:0,id:S.value+"-modal",class:"modal work-view"},[v(_e,{ref_key:"collectionModalViewRef",ref:N,section:S.value},null,8,["section"])],8,Cl)),M(v(ie,{id:"item-removed-alert",text:I.$t("collections.itemRemoved")},null,8,["text"]),[[E,y.value]])]))}},El=Y(Il,[["__scopeId","data-v-f3ff7e20"]]),Ll={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Al={class:"title"},Pl=["placeholder"],Fl=["placeholder"],Sl=["for"],jl=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),Tl={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},Rl=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Ul=[Rl],Bl={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},zl=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Ol=[zl],Vl={class:"ml-2"},Nl={class:"flex flex-row gap-2 justify-end mt-2"},Dl={type:"submit",class:"primary-button"},ql={__name:"EditForm",props:{collectionId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(i,{expose:L,emit:$}){const r=i,{t:A}=me(),{oApiConfiguration:b,fetchOptions:_}=Q(),g=ue(b,_()),f=p(!0),m=async t=>{if(t){U(),f.value=!0;const[h,y]=await g.getInfo(t);if(!y){const k=h.data;n.value.id=t,n.value.name=k.name,n.value.description=k.description,n.value.isPublic=!!k.is_public,f.value=!1}}},l="edit-collection-form",n=p({id:0,name:"",description:"",isPublic:!1}),C=async()=>{he().validate(l,A);const[t,h]=await g.update({id:n.value.id,name:n.value.name,description:n.value.description,isPublic:n.value.isPublic?1:0});h||(X().closeModal(r.modalId),$("updated",n.value),U())},U=()=>{n.value={id:0,name:"",description:"",isPublic:0}};return L({fetch:m}),(t,h)=>(o(),s("div",null,[e("div",{class:"hidden",onClick:h[0]||(h[0]=y=>m(0))}),e("div",Ll,[e("div",null,[e("span",Al,a(t.$t("collections.edit.form.title")),1),f.value?c("",!0):(o(),s("form",{key:0,id:l,class:"mt-2",onSubmit:h[5]||(h[5]=W(y=>C(),["prevent"]))},[e("n-validate",null,[M(e("input",{"onUpdate:modelValue":h[1]||(h[1]=y=>n.value.name=y),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:t.$t("title")},null,8,Pl),[[Z,n.value.name]])]),M(e("textarea",{"onUpdate:modelValue":h[2]||(h[2]=y=>n.value.description=y),class:"form-input theme-color-secondary",placeholder:t.$t("description"),"data-gramm":"false"},null,8,Fl),[[Z,n.value.description]]),e("label",{for:n.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:h[3]||(h[3]=y=>n.value.isPublic=!n.value.isPublic)},[jl,n.value.isPublic?(o(),s("span",Tl,Ul)):c("",!0),n.value.isPublic?c("",!0):(o(),s("span",Bl,Ol))]),e("span",Vl,a(t.$t("private")),1)],8,Sl),e("div",Nl,[e("button",{class:"cancel-button",onClick:h[4]||(h[4]=W(y=>t.closeModal(i.modalId),["prevent"]))},a(t.$t("cancel")),1),e("button",Dl,a(t.$t("save")),1)])],32))])])]))}},xe=i=>(ve("data-v-f083c4bf"),i=i(),fe(),i),Wl={class:"mb-2"},Gl={key:0},Hl=xe(()=>e("img",{src:Ee,class:"rounded"},null,-1)),Kl=[Hl],Ql={key:1},Jl={class:"relative text-center"},Xl={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Yl={class:"overflow-hidden rounded-md"},Zl=["src"],es={key:2,class:"imgrid"},ts={class:"relative text-center"},os={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},ls={class:"overflow-hidden rounded-md"},ss=["src"],as=xe(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),ns=xe(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),is={key:3,class:"imgrid"},rs={class:"relative text-center"},us={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},ds={class:"overflow-hidden rounded-md"},cs=["src"],ms={key:4,class:"imgrid"},vs={class:"relative text-center"},fs={key:0,class:"absolute top-1/2 left-1/2 z-10 text-tiny font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},ps={class:"overflow-hidden rounded-md"},hs=["src"],bs={key:5,class:"imgrid"},ws={key:0,class:"relative text-center"},gs={key:0,class:"absolute top-1/2 left-1/2 z-10 text-tiny font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},_s={class:"overflow-hidden rounded-md"},ks=["src"],ys={key:1,class:"relative text-center"},$s={class:"absolute top-1/2 left-1/2 z-10 text-3xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},xs={class:"overflow-hidden rounded-md"},Ms=["src"],Cs={__name:"ArtworkThumbnail",props:{collection:{type:Object,default:()=>{}}},setup(i){const L=ee(),$={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(r,A)=>(o(),s("div",Wl,[!i.collection.collection_has_artworks||i.collection._count.collection_has_artworks===0?(o(),s("div",Gl,Kl)):c("",!0),i.collection.collection_has_artworks&&i.collection._count.collection_has_artworks===1?(o(),s("div",Ql,[e("div",Jl,[r.applyExplicitFilter(w(L),i.collection.collection_has_artworks[0].artworks.is_explicit)?(o(),s("span",Xl,a(r.$t("explicitContent")),1)):c("",!0),e("div",Yl,[i.collection.collection_has_artworks&&i.collection._count.collection_has_artworks===1?(o(),s("img",{key:0,src:r.artworkThumb(i.collection.collection_has_artworks[0].artworks.artwork_assets[0].bucket,i.collection.collection_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:j(["object-cover object-top rounded",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),i.collection.collection_has_artworks[0].artworks.is_explicit)}]),style:{"aspect-ratio":"1/1"},onError:A[0]||(A[0]=(...b)=>r.imageLoadError&&r.imageLoadError(...b))},null,42,Zl)):c("",!0)])])])):c("",!0),i.collection.collection_has_artworks&&i.collection._count.collection_has_artworks===2?(o(),s("div",es,[(o(!0),s(H,null,K(i.collection.collection_has_artworks,(b,_)=>(o(),s("div",{key:_,class:j($[2][_])},[e("div",ts,[r.applyExplicitFilter(w(L),b.artworks.is_explicit)?(o(),s("span",os,a(r.$t("explicitContent")),1)):c("",!0),e("div",ls,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),b.artworks.is_explicit)}]),src:r.artworkThumb(b.artworks.artwork_assets[0].bucket,b.artworks.artwork_assets[0].filename,"thumbnail"),onError:A[1]||(A[1]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,ss)])])],2))),128)),as,ns])):c("",!0),i.collection.collection_has_artworks&&i.collection._count.collection_has_artworks===3?(o(),s("div",is,[(o(!0),s(H,null,K(i.collection.collection_has_artworks,(b,_)=>(o(),s("div",{key:_,class:j($[3][_])},[e("div",rs,[r.applyExplicitFilter(w(L),b.artworks.is_explicit)?(o(),s("span",us,a(r.$t("explicitContent")),1)):c("",!0),e("div",ds,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),b.artworks.is_explicit)}]),src:r.artworkThumb(b.artworks.artwork_assets[0].bucket,b.artworks.artwork_assets[0].filename,"thumbnail"),onError:A[2]||(A[2]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,cs)])])],2))),128))])):c("",!0),i.collection.collection_has_artworks&&i.collection._count.collection_has_artworks===4?(o(),s("div",ms,[(o(!0),s(H,null,K(i.collection.collection_has_artworks,(b,_)=>(o(),s("div",{key:_},[e("div",vs,[r.applyExplicitFilter(w(L),b.artworks.is_explicit)?(o(),s("span",fs,a(r.$t("explicitContent")),1)):c("",!0),e("div",ps,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),b.artworks.is_explicit)}]),src:r.artworkThumb(b.artworks.artwork_assets[0].bucket,b.artworks.artwork_assets[0].filename,"thumbnail"),onError:A[3]||(A[3]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,hs)])])]))),128))])):c("",!0),i.collection.collection_has_artworks&&i.collection._count.collection_has_artworks>4?(o(),s("div",bs,[(o(!0),s(H,null,K(i.collection.collection_has_artworks,(b,_)=>(o(),s("div",{key:_},[_<3?(o(),s("div",ws,[r.applyExplicitFilter(w(L),b.artworks.is_explicit)?(o(),s("span",gs,a(r.$t("explicitContent")),1)):c("",!0),e("div",_s,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),b.artworks.is_explicit)}]),src:r.artworkThumb(b.artworks.artwork_assets[0].bucket,b.artworks.artwork_assets[0].filename,"thumbnail"),onError:A[4]||(A[4]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,ks)])])):(o(),s("div",ys,[e("span",$s,"+"+a(i.collection._count.collection_has_artworks-4),1),e("div",xs,[e("img",{src:r.artworkThumb(b.artworks.artwork_assets[0].bucket,b.artworks.artwork_assets[0].filename,"thumbnail"),class:j(["z-0 brightness-50",{"blur-sm brightness-50":r.applyExplicitFilter(w(L),b.artworks.is_explicit)}]),onError:A[5]||(A[5]=(...g)=>r.imageLoadError&&r.imageLoadError(...g))},null,42,Ms)])]))]))),128))])):c("",!0)]))}},Is=Y(Cs,[["__scopeId","data-v-f083c4bf"]]),Es={class:"mb-4 w-full"},Ls={key:0,class:"flex flex-row justify-between"},As={class:"flex flex-row"},Ps={key:0},Fs={key:1,class:"flex flex-row justify-between"},Ss={class:"flex flex-row"},js={class:"flex flex-row gap-2"},Ts={class:"flex flex-row gap-2"},Rs={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},Us=["onClick"],Bs={class:"flex flex-row pb-1 mt-4 font-bold"},zs={class:"text-xs font-normal"},Os={__name:"Collection",props:{userId:{type:Number,default:0}},setup(i){const L=i,$=ee();pe(()=>{C()});const{oApiConfiguration:r,fetchOptions:A}=Q(),b=ue(r,A()),_=p(!1),g=p("artwork"),f=p(0),m=p([]),l=p({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),n=p({artwork:0}),C=async()=>{_.value=!0;const[d,u,F]=await b.fetchCollections({userId:L.userId,type:g.value,pagination:{page:l.value.pagination.page,perPage:l.value.pagination.page===0?l.value.pagination.firstLoad:l.value.pagination.perPage}});if(F)k();else{d.length||(l.value.manageMode=!1,h()),d.forEach(be=>{m.value.push(be)}),l.value.pagination.page+=l.value.pagination.firstLoad/l.value.pagination.perPage,l.value.showLoadMore=u;const[B]=await b.countArtworkCollections(L.userId);n.value.artwork=B}_.value=!1},U=async()=>await C(),t=p(!1),h=()=>{t.value=!0,l.value.showLoadMore=!1},y=p(!1),k=()=>{_.value=!1,y.value=!0,l.value.showLoadMore=!1},P=async()=>{_.value=!1,t.value=!1,y.value=!1,l.value.pagination.page=0,m.value=[],await C()},S=d=>{l.value.showManageButton=!0,d&&(l.value.showManageButton=!1)},N=p(!1);let D;const I=async()=>{re().splash(D,N,"created-alert"),await P()},T=p(null),O=()=>{T.value.fetch(f.value),X().openModal("collection-edit-form-modal")},z=p(null),q=d=>{z.value.fetchInfo(),m.value.forEach(u=>{u.id===d.id&&(u.name=d.name,u.description=d.description,u.is_public=d.isPublic)})},J=p([]),oe=d=>{J.value=d},le=()=>{z.value.removeItem()},se=async()=>{if(f.value!==0){const[d,u]=await b.deleteCollection(f.value);d&&(f.value=0,P())}},ae=()=>{f.value=0,l.value.showManageButton=!1,l.value.manageMode=!1};return(d,u)=>(o(),s("div",null,[e("div",Es,[f.value?c("",!0):(o(),s("div",Ls,[e("div",As,[e("div",{class:j(["ml-0 primary-button theme-color-secondary",{"button-color text-white":g.value==="artwork"}]),onClick:u[0]||(u[0]=F=>g.value="artwork")},[R(a(d.$t("artworks.artwork"))+" ",1),e("span",{class:j(["px-1 ml-2 font-normal rounded",g.value==="artwork"?"theme-color":"button-color text-white"])},a(n.value.artwork),3)],2)]),w($).loggedIn&&w($).user.id===i.userId?(o(),s("div",Ps,[e("div",{class:"icon-button",onClick:u[1]||(u[1]=F=>d.openModal("collection-form-modal"))},[v(x,{name:"i-ion-add-outline"})])])):c("",!0)])),f.value?(o(),s("div",Fs,[e("div",null,[e("div",{class:"ml-0 icon-button",onClick:u[2]||(u[2]=F=>ae())},[v(x,{name:"i-ic-baseline-keyboard-arrow-left"})])]),e("div",Ss,[M(e("div",js,[e("button",{class:"action-button secondary-button",onClick:u[3]||(u[3]=F=>l.value.manageMode=!l.value.manageMode)},[v(x,{name:l.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),R(" "+a(l.value.manageMode?d.$t("quit"):d.$t("manage")),1)]),M(e("button",{class:j(["flex flex-row",J.value.length>0?"danger-button":"disabled-button cursor-not-allowed"]),onClick:u[4]||(u[4]=F=>J.value.length>0?d.openModal("item-deletion-confirm-modal"):null)},[v(x,{name:"i-akar-icons-trash-bin"}),R(" "+a(d.$t("collections.removeSelected")),1)],2),[[E,l.value.manageMode]])],512),[[E,w($).loggedIn&&w($).user.id===i.userId&&l.value.showManageButton]]),M(e("div",Ts,[e("button",{class:"icon-button",onClick:u[5]||(u[5]=F=>O())},[v(x,{name:"i-ph-gear-six"})]),e("button",{class:"danger-button-color b-button",onClick:u[6]||(u[6]=F=>d.openModal("collection-deletion-confirm-modal"))},[v(x,{name:"i-akar-icons-trash-bin"})])],512),[[E,w($).loggedIn&&w($).user.id===i.userId&&!l.value.manageMode]])])])):c("",!0),M(e("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},a(d.$t("collections.manageModeActiveMessage")),513),[[E,l.value.manageMode]])]),f.value?c("",!0):(o(),s("div",Rs,[(o(!0),s(H,null,K(m.value,F=>(o(),s("div",{key:F.id,class:j(["p-3 rounded-md cursor-pointer",F.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:B=>f.value=F.id},[F.type==="artwork"?(o(),V(Is,{key:0,collection:F},null,8,["collection"])):c("",!0),e("div",Bs,[F.is_public?c("",!0):(o(),V(x,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),e("span",zs,a(F.name),1)])],10,Us))),128))])),l.value.showLoadMore&&!f.value?(o(),s("div",{key:1,class:"mt-4 w-full primary-button",onClick:U},a(d.$t("loadMore")),1)):c("",!0),v(te,{loading:_.value,empty:t.value,error:y.value,fetch:C},null,8,["loading","empty","error"]),!_.value&&!f.value?(o(),V(gl,{key:2,id:"collection-form-modal","modal-id":"collection-form-modal",category:g.value,class:"modal",onCreated:I},null,8,["category"])):c("",!0),M(v(ie,{id:"created-alert",text:d.$t("collections.created")},null,8,["text"]),[[E,N.value]]),!_.value&&f.value?(o(),V(ql,{key:3,id:"collection-edit-form-modal",ref_key:"collectionEditFormModalRef",ref:T,"modal-id":"collection-edit-form-modal","collection-id":f.value,class:"modal",onUpdated:q},null,8,["collection-id"])):c("",!0),v(de,{id:"collection-deletion-confirm-modal","modal-id":"collection-deletion-confirm-modal",message:"All saved items in this collection will be deleted. Do you still want to delete this collection?",class:"modal",onOnAccept:se},null,8,["message"]),v(de,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this collection. Do you still want to remove them?",class:"modal",onOnAccept:le},null,8,["message"]),f.value&&!_.value?(o(),V(El,{key:4,id:f.value,ref_key:"collectionDetailRef",ref:z,"manage-mode":l.value.manageMode,type:g.value,onOnCollectionEmpty:S,onFeedManageList:oe},null,8,["id","manage-mode","type"])):c("",!0)]))}},Vs=Y(Os,[["__scopeId","data-v-90595e53"]]),Ns={class:"text-lg font-bold"},Ds={class:"grid grid-cols-1 gap-4 mt-4 w-full md:grid-cols-2 lg:grid-cols-3"},qs={class:"flex flex-row w-full"},Ws=["src"],Gs={class:"flex flex-col justify-between p-3 w-full text-white"},Hs={class:"flex flex-col"},Ks={class:"font-bold"},Qs={class:"text-xxs"},Js={class:"flex flex-row w-full"},Xs={key:0,class:"flex flex-row"},Ys=["onClick"],Zs=["onMouseover","onClick"],ea={__name:"FollowerList",props:{userId:{type:Number,default:0}},setup(i){const L=i,$=ee(),{oApiConfiguration:r,fetchOptions:A}=Q(),b=ke(r,A());pe(()=>{C()});const _=p([]),g=p(!1),f=p({page:0,perPage:12}),m=p(!1),l=p(!1),n=p(!1),C=async()=>{U(),g.value=!0;const[h,y]=await b.getFollowerList({userId:L.userId,pagination:{page:f.value.page,perPage:f.value.perPage}});y?m.value=!0:(h.followers.length||(l.value=!0),h.followers.forEach(k=>{_.value.push(k)}),f.value.page+=1,h.pagination.next_previous.next_page?n.value=!0:n.value=!1),g.value=!1},U=()=>{l.value=!1,m.value=!1},t=p(0);return(h,y)=>{const k=ce;return o(),s("div",null,[e("div",Ns,a(h.$t("followers")),1),e("div",Ds,[(o(!0),s(H,null,K(_.value,(P,S)=>(o(),V(k,{key:P.id,to:"/profile/"+P.username,class:"flex object-cover flex-row rounded-md shadow-lg cursor-pointer theme-color-secondary hover:shadow-xl",style:Ie(P.cover_bucket&&P.cover_filename?"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+h.avatarCoverUrl(P.cover_bucket,P.cover_filename)+");background-size:cover;":"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+w(Me)+");background-size:cover;")},{default:G(()=>[e("div",qs,[e("img",{src:h.avatarCoverUrl(P.avatar_bucket,P.avatar_filename),class:"avatar",onError:y[0]||(y[0]=(...N)=>h.imageLoadError&&h.imageLoadError(...N))},null,40,Ws),e("div",Gs,[e("div",Hs,[e("span",Ks,a(P.name),1),e("span",Qs,a(P.pen_name),1)]),e("div",Js,[w($).loggedIn&&P.id!==w($).user.id?(o(),s("div",Xs,[M(e("div",{class:"flex flex-row",onClick:W(N=>h.followUser(S,P.id),["prevent"])},[v(x,{name:"i-fluent-person-32-regular-add",class:"text-gray-300 hover:text-white"})],8,Ys),[[E,!P.is_following]]),M(e("div",{class:"flex flex-row",onMouseover:N=>t.value=P.id,onMouseout:y[1]||(y[1]=N=>t.value=0),onClick:W(N=>h.unfollowUser(S,P.id),["prevent"])},[M(v(x,{name:"i-fluent-person-32-regular",class:"text-green-400"},null,512),[[E,t.value!==P.id]]),M(v(x,{name:"i-fluent-person-32-regular-remove",class:"text-red-400 hover:text-red-400"},null,512),[[E,t.value&&t.value===P.id]])],40,Zs),[[E,P.is_following]])])):c("",!0)])])])]),_:2},1032,["to","style"]))),128))]),M(e("div",{class:"mt-4 primary-button",onClick:y[2]||(y[2]=P=>C())},a(h.$t("loadMore")),513),[[E,n.value]]),v(te,{loading:g.value,empty:l.value,error:m.value,fetch:C},null,8,["loading","empty","error"])])}}},ta=Y(ea,[["__scopeId","data-v-7d7b6be2"]]),oa={class:"text-lg font-bold"},la={class:"grid grid-cols-1 gap-4 mt-4 w-full md:grid-cols-2 lg:grid-cols-3"},sa={class:"flex flex-row w-full"},aa=["src"],na={class:"flex flex-col justify-between p-3 w-full text-white"},ia={class:"flex flex-col"},ra={class:"font-bold"},ua={class:"text-xxs"},da={class:"flex flex-row w-full"},ca={key:0,class:"flex flex-row"},ma=["onClick"],va=["onMouseover","onClick"],fa={__name:"FollowingList",props:{userId:{type:Number,default:0}},setup(i){const L=i,$=ee(),{oApiConfiguration:r,fetchOptions:A}=Q(),b=ke(r,A());pe(()=>{U()});const _=async()=>{g.value=[],m.value.page=0,await U()},g=p([]),f=p(!1),m=p({page:0,perPage:12}),l=p(!1),n=p(!1),C=p(!1),U=async()=>{t(),f.value=!0;const[y,k]=await b.getFollowingList({userId:L.userId,pagination:{page:m.value.page,perPage:m.value.perPage}});k?l.value=!0:(y.followings.length||(n.value=!0),y.followings.forEach(P=>{g.value.push(P)}),m.value.page+=1,y.pagination.next_previous.next_page?C.value=!0:C.value=!1),f.value=!1},t=()=>{n.value=!1,l.value=!1},h=p(0);return(y,k)=>{const P=ce;return o(),s("div",null,[e("div",oa,a(y.$t("followings")),1),e("div",la,[(o(!0),s(H,null,K(g.value,(S,N)=>(o(),V(P,{key:S.id,to:"/profile/"+S.username,class:"flex object-cover flex-row rounded-md shadow-lg cursor-pointer theme-color-secondary hover:shadow-xl",style:Ie(S.cover_bucket&&S.cover_filename?"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+y.avatarCoverUrl(S.cover_bucket,S.cover_filename)+");background-size:cover;":"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+w(Me)+");background-size:cover;")},{default:G(()=>[e("div",sa,[e("img",{src:y.avatarCoverUrl(S.avatar_bucket,S.avatar_filename),class:"avatar",onError:k[0]||(k[0]=(...D)=>y.imageLoadError&&y.imageLoadError(...D))},null,40,aa),e("div",na,[e("div",ia,[e("span",ra,a(S.name),1),e("span",ua,a(S.pen_name),1)]),e("div",da,[w($).loggedIn&&S.id!==w($).user.id?(o(),s("div",ca,[M(e("div",{class:"flex flex-row",onClick:W(D=>y.followUser(N,S.id),["prevent"])},[v(x,{name:"i-fluent-person-32-regular-add",class:"text-gray-300 hover:text-white"})],8,ma),[[E,!S.is_following]]),M(e("div",{class:"flex flex-row",onMouseover:D=>h.value=S.id,onMouseout:k[1]||(k[1]=D=>h.value=0),onClick:W(D=>y.unfollowUser(N,S.id),["prevent"])},[M(v(x,{name:"i-fluent-person-32-regular",class:"text-green-400"},null,512),[[E,h.value!==S.id]]),M(v(x,{name:"i-fluent-person-32-regular-remove",class:"text-red-400 hover:text-red-400"},null,512),[[E,h.value&&h.value===S.id]])],40,va),[[E,S.is_following]])])):c("",!0)])])])]),_:2},1032,["to","style"]))),128))]),M(e("div",{class:"primary-button mt-4",onClick:k[2]||(k[2]=S=>U())},a(y.$t("loadMore")),513),[[E,C.value]]),v(te,{loading:f.value,empty:n.value,error:l.value,fetch:_},null,8,["loading","empty","error"])])}}},pa=Y(fa,[["__scopeId","data-v-6ea0789b"]]),ha=i=>(ve("data-v-3035fc01"),i=i(),fe(),i),ba=["src"],wa={class:"px-2 pb-4 w-full rounded md:px-6 md:pb-6 theme-color"},ga={class:"flex-row justify-between hidden-md-flex"},_a={class:"mr-6 w-1/5"},ka=["src"],ya={class:"mt-2"},$a={class:"flex flex-row"},xa={class:"flex flex-row"},Ma=R("\xA0 "),Ca=R("\xA0 "),Ia={class:"hidden flex-row justify-between w-full md:flex md:mt-6"},Ea={class:"flex flex-col w-full"},La={class:"flex flex-row w-full"},Aa={class:"w-9/12"},Pa={class:"text-base font-semibold"},Fa=R("\xA0 "),Sa={class:"mr-2 italic"},ja={class:"flex flex-row mt-2"},Ta={class:"mr-1"},Ra={class:"flex flex-row"},Ua={class:"mr-1"},Ba={key:0,class:"flex flex-row"},za=R(" he/his "),Oa={key:1,class:"flex flex-row"},Va=R(" she/her "),Na={class:"float-right w-3/12 text-right"},Da={class:"flex flex-row primary-button shadow-md"},qa={class:"leading-4"},Wa={key:1,class:"mt-4"},Ga=["href"],Ha=["href"],Ka=["href"],Qa=["href"],Ja=["href"],Xa={key:0,class:"mt-4"},Ya=["id"],Za=["id"],en={class:"flex flex-col text-center md:hidden"},tn=["src"],on={class:"mt-4 text-base font-semibold"},ln={class:"flex flex-row justify-center mt-4"},sn={key:0,class:"flex flex-row mr-1"},an={class:"mr-1"},nn={key:0,class:"flex flex-row"},rn=R(" he/his "),un={key:1,class:"flex flex-row"},dn=R(" she/her "),cn={key:0,class:"mx-2 mt-4 text-center"},mn=["id"],vn=["id"],fn={key:1,class:"flex flex-row justify-center mt-4"},pn=["href"],hn=["href"],bn=["href"],wn=["href"],gn=["href"],_n={class:"flex flex-row justify-center w-full md:hidden"},kn=R("\xA0 "),yn=R("\xA0 "),$n={class:"flex flex-row"},xn={class:"flex flex-row"},Mn={class:"mt-2"},Cn={class:"flex flex-row justify-center md:hidden"},In={class:"flex flex-row justify-between mt-2 md:mt-6"},En={class:"hidden flex-col lg:w-1/5 md:flex"},Ln={class:"profile-navigation_wrapper"},An={class:"hidden-lg-flex"},Pn=ha(()=>e("span",{class:"hidden-lg-flex"},null,-1)),Fn={class:"profile-navigation_wrapper"},Sn={class:"hidden-lg-flex"},jn={class:"hidden-lg-flex"},Tn={class:"profile-navigation_wrapper"},Rn={class:"hidden-lg-flex"},Un={class:"hidden-lg-flex"},Bn={class:"ml-6 w-full"},zn={key:0},On={class:"flex flex-row w-full"},Vn={class:"flex flex-row gap-2 justify-between w-full md:justify-end"},Nn={key:1},Dn={key:2},qn={key:3},Wn={key:4},Gn={__name:"Profile",props:{id:{type:Number,default:0},userLogon:{type:Boolean,default:!1}},setup(i){const L=i,$=ee(),{oApiConfiguration:r,fetchOptions:A}=Q(),b=ke(r,A());ne(r,A()),ue(r,A());const _=Le(),g=Ae(),{o:f}=_.query,m=p(!1),l=f!=null?p(f):p("dashboard"),n=p("artwork");Fe(()=>L.userLogon&&$.loggedIn?$.user.id:L.id);const C=p({manageMode:!1,showManageMode:!0}),U=d=>{l.value=d,C.value.manageMode=!1,f!=null&&g.push("/profile")},t=p({}),h=p({feed:0,artwork:0,comic:0,tutorial:0,album:0,followers:0,followings:0}),y=p(null),k=p([]),P=d=>{k.value=d},S=()=>{C.value.showManageMode=!1},N=p(null),D=()=>{X().openModal("album-selection-modal")},I=p(!1);let T;const O=()=>{re().splash(T,I,"item-added-to-album-alert")},z=p(!1),q=p(null),J=p("i-ri-user-follow-fill"),oe=(d,u)=>{J.value=d,q.value=u},le=async d=>{const[u,F]=await b.follow(d);F||(z.value=!0)},se=async d=>{const[u,F]=await b.unfollow(d);F||(z.value=!1)},ae=(d,u,F,B)=>{je().readMore(d,u,F,B)};return(d,u)=>{const F=ce;return o(),V(Re,{"hide-side":!0,"with-footer":!0,"no-right-side":!0},{default:G(()=>[e("div",null,[e("img",{src:d.avatarCoverUrl(t.value.cover_bucket,t.value.cover_filename),class:"object-cover object-top w-full h-32 rounded-t md:h-52 lg:h-72 xl:h-96 unselectable",onError:u[0]||(u[0]=(...B)=>d.defaultCoverImage&&d.defaultCoverImage(...B))},null,40,ba),w($).loggedIn&&w($).user.id===t.value.id?(o(),V(F,{key:0,to:"/profile/setting",class:"float-right absolute right-4 mt-2 shadow-md icon-button-primary-color flex-md-hidden"},{default:G(()=>[v(x,{name:"i-ph-gear-six"})]),_:1})):c("",!0)]),e("div",wa,[e("div",ga,[e("div",_a,[e("img",{src:d.avatarCoverUrl(t.value.avatar_bucket,t.value.avatar_filename),class:"hidden -mt-2 w-full md:-mt-16 avatar md:flex",onError:u[1]||(u[1]=(...B)=>d.defaultCoverImage&&d.defaultCoverImage(...B))},null,40,ka),e("div",ya,[w($).loggedIn&&t.value.id!==w($).user.id?(o(),s("div",{key:0,class:j(["mt-2 primary-button rounded-b-none hover:rounded-b-none",{"hover:danger-button":z.value}]),onClick:u[2]||(u[2]=B=>z.value?se(t.value.id):le(t.value.id)),onMouseover:u[3]||(u[3]=B=>oe("i-ri-user-unfollow-fill",d.$t("unfollow"))),onMouseleave:u[4]||(u[4]=B=>oe("i-ri-user-follow-fill",d.$t("following")))},[M(e("div",$a,[v(x,{name:"i-ri-user-add-fill","text-size":"text-base"}),R(" "+a(d.$t("follow")),1)],512),[[E,!z.value]]),M(e("div",xa,[v(x,{name:J.value,"text-size":"text-base"},null,8,["name"]),R(" "+a(q.value===null?d.$t("following"):q.value),1)],512),[[E,z.value]])],34)):c("",!0),e("div",{class:j(["flex-row justify-center border hidden-md-flex",t.value.id==w($).user.id?"rounded-md":"rounded-b-md"])},[e("div",{class:"py-2 w-1/2 text-center cursor-pointer hover:text-colored",onClick:u[5]||(u[5]=B=>l.value="followerList")},[e("b",null,a(h.value.followers),1),Ma,e("i",null,a(d.$t("followers").toLowerCase()),1)]),e("div",{class:"py-2 w-1/2 text-center cursor-pointer hover:text-colored",onClick:u[6]||(u[6]=B=>l.value="followingList")},[e("b",null,a(h.value.followings),1),Ca,e("i",null,a(d.$t("following").toLowerCase()),1)])],2)])]),e("div",Ia,[e("div",Ea,[e("div",La,[e("div",Aa,[e("div",null,[e("span",Pa,a(t.value.name),1),Fa,e("span",Sa,a(t.value.username),1)]),e("div",ja,[e("div",Ta,[e("span",Ra,[v(x,{name:"i-ion-pencil-outline",class:"mr-1 text-base font-bold"}),R(" "+a(t.value.pen_name&&t.value.pen_name!==""?t.value.pen_name:"-"),1)])]),e("div",Ua,[t.value.gender==="m"?(o(),s("span",Ba,[v(x,{name:"i-ion-male-outline",class:"mr-1 ml-2 text-base font-bold"}),za])):c("",!0),t.value.gender==="f"?(o(),s("span",Oa,[v(x,{name:"i-ion-female-outline",class:"mr-1 ml-2 text-base font-bold"}),Va])):c("",!0)])])]),e("div",Na,[w($).loggedIn&&w($).user.id===t.value.id?(o(),V(F,{key:0,to:"/profile/setting",class:"float-right -mt-20 shadow-md"},{default:G(()=>[e("button",Da,[v(x,{name:"i-ph-gear-six",class:"mr-2"}),e("span",qa,a(d.$t("profile.setting")),1)])]),_:1})):c("",!0),t.value.user_socials?(o(),s("div",Wa,[t.value.user_socials.facebook?(o(),s("a",{key:0,href:"https://facebook.com/"+t.value.user_socials.facebook,target:"blank",class:"ml-3 cursor-pointer"},[v(x,{name:"i-ion-logo-facebook",class:"text-xl"})],8,Ga)):c("",!0),t.value.user_socials.instagram?(o(),s("a",{key:1,href:"https://instagram.com/"+t.value.user_socials.instagram+"/",target:"blank",class:"ml-3 cursor-pointer"},[v(x,{name:"i-ion-logo-instagram",class:"text-xl"})],8,Ha)):c("",!0),t.value.user_socials.twitter?(o(),s("a",{key:2,href:"https://twitter.com/"+t.value.user_socials.twitter,target:"blank",class:"ml-3 cursor-pointer"},[v(x,{name:"i-ion-logo-twitter",class:"text-xl"})],8,Ka)):c("",!0),t.value.user_socials.youtube?(o(),s("a",{key:3,href:"https://youtube.com/channel/"+t.value.user_socials.youtube,target:"blank",class:"ml-3 cursor-pointer"},[v(x,{name:"i-ion-logo-youtube",class:"text-xl"})],8,Qa)):c("",!0),t.value.user_socials.patreon?(o(),s("a",{key:4,href:"https://patreon.com/"+t.value.user_socials.patreon+"/",target:"blank",class:"ml-3 cursor-pointer"},[v(x,{name:"heart",class:"text-xl"})],8,Ja)):c("",!0)])):c("",!0)])]),e("div",null,[t.value.bio?(o(),s("p",Xa,[e("span",{id:"user-bio-"+t.value.id},a(t.value.bio.length>300?`${t.value.bio.slice(0,300)}...`:t.value.bio),9,Ya),t.value.bio.length>300?(o(),s("a",{key:0,id:"user-bio-read-more-"+t.value.id,class:"href",onClick:u[7]||(u[7]=W(B=>ae(t.value.bio,t.value.id,"user-bio-read-more-","user-bio-"),["prevent"]))},a(d.$t("readMore")),9,Za)):c("",!0)])):c("",!0)])])])]),e("div",en,[e("img",{src:d.avatarCoverUrl(t.value.avatar_bucket,t.value.avatar_filename),class:"flex mx-auto -mt-14 w-2/6 sm:-mt-16 sm:w-1/5 avatar md:hidden",onError:u[8]||(u[8]=(...B)=>d.imageLoadError&&d.imageLoadError(...B))},null,40,tn),e("div",on,a(t.value.name),1),e("div",null,a(t.value.username),1),e("div",ln,[t.value.pen_name?(o(),s("span",sn,[v(x,{name:"i-ion-pencil-outline",class:"mr-1 text-base font-bold"}),R(" "+a(t.value.pen_name&&t.value.pen_name!==""?t.value.pen_name:"-"),1)])):c("",!0),e("div",an,[t.value.gender==="m"?(o(),s("span",nn,[v(x,{name:"i-ion-male-outline",class:"mr-1 ml-2 text-base font-bold"}),rn])):c("",!0),t.value.gender==="f"?(o(),s("span",un,[v(x,{name:"i-ion-female-outline",class:"mr-1 ml-2 text-base font-bold"}),dn])):c("",!0)])]),t.value.bio?(o(),s("div",cn,[e("span",{id:"mobile__user-bio-"+t.value.id},a(t.value.bio.length>150?`${t.value.bio.slice(0,150)}...`:t.value.bio),9,mn),t.value.bio.length>150?(o(),s("a",{key:0,id:"mobile__user-bio-read-more-"+t.value.id,class:"href",onClick:u[9]||(u[9]=W(B=>ae(t.value.bio,t.value.id,"mobile__user-bio-read-more-","mobile__user-bio-"),["prevent"]))},a(d.$t("readMore")),9,vn)):c("",!0)])):c("",!0),t.value.user_socials?(o(),s("div",fn,[t.value.user_socials.facebook?(o(),s("a",{key:0,href:"https://facebook.com/"+t.value.user_socials.facebook,target:"blank",class:"ml-3 cursor-pointer"},[v(x,{name:"i-ion-logo-facebook",class:"text-xl"})],8,pn)):c("",!0),t.value.user_socials.instagram?(o(),s("a",{key:1,href:"https://instagram.com/"+t.value.user_socials.instagram+"/",target:"blank",class:"ml-3 cursor-pointer"},[v(x,{name:"i-ion-logo-instagram",class:"text-xl"})],8,hn)):c("",!0),t.value.user_socials.twitter?(o(),s("a",{key:2,href:"https://twitter.com/"+t.value.user_socials.twitter,target:"blank",class:"ml-3 cursor-pointer"},[v(x,{name:"i-ion-logo-twitter",class:"text-xl"})],8,bn)):c("",!0),t.value.user_socials.youtube?(o(),s("a",{key:3,href:"https://youtube.com/channel/"+t.value.user_socials.youtube,target:"blank",class:"ml-3 cursor-pointer"},[v(x,{name:"i-ion-logo-youtube",class:"text-xl"})],8,wn)):c("",!0),t.value.user_socials.patreon?(o(),s("a",{key:4,href:"https://patreon.com/"+t.value.user_socials.patreon+"/",target:"blank",class:"ml-3 cursor-pointer"},[v(x,{name:"i-ion-heart",class:"text-xl"})],8,gn)):c("",!0)])):c("",!0),e("div",_n,[e("div",{class:"p-2 cursor-pointer hover:text-colored",onClick:u[10]||(u[10]=B=>l.value="followerList")},[e("b",null,a(h.value.followers),1),kn,e("i",null,a(d.$t("followers")),1)]),e("div",{class:"p-2 cursor-pointer hover:text-colored",onClick:u[11]||(u[11]=B=>l.value="followingList")},[e("b",null,a(h.value.followings),1),yn,e("i",null,a(d.$t("following")),1)])]),w($).loggedIn&&t.value.id!==w($).user.id?(o(),s("div",{key:2,class:j(["mt-2 w-auto",z.value?"danger-button":"primary-button"]),onClick:u[12]||(u[12]=B=>z.value?se(t.value.id):le(t.value.id))},[M(e("div",$n,[v(x,{name:"i-ri-user-add-fill","text-size":"text-base"}),R(" "+a(d.$t("follow")),1)],512),[[E,!z.value]]),M(e("div",xn,[v(x,{name:J.value,"text-size":"text-base"},null,8,["name"]),R(" "+a(q.value===null?d.$t("following"):q.value),1)],512),[[E,z.value]])],2)):c("",!0)]),e("div",Mn,[e("div",Cn,[e("div",{class:j(["mr-2 profile-navigation__mobile theme-color-secondary",{"button-color text-white":w(l)=="dashboard"}]),onClick:u[13]||(u[13]=B=>U("dashboard"))},[e("div",null,[M(v(x,{name:"i-ion-home-outline",class:"text-white"},null,512),[[E,w(l)=="dashboard"]]),M(v(x,{name:"i-ion-home-outline",class:"hover:text-white"},null,512),[[E,w(l)!="dashboard"]])]),e("span",null,a(d.$t("dashboard")),1)],2),e("div",{class:j(["mr-2 profile-navigation__mobile theme-color-secondary",{"button-color text-white":w(l)=="albums"}]),onClick:u[14]||(u[14]=B=>U("albums"))},[e("div",null,[M(v(x,{name:"i-ion-folder-outline",class:"text-white"},null,512),[[E,w(l)=="albums"]]),M(v(x,{name:"i-ion-folder-outline",class:"hover:text-white"},null,512),[[E,w(l)!="albums"]])]),e("span",null,a(d.$t("albums.album")),1)],2),e("div",{class:j(["profile-navigation__mobile theme-color-secondary",{"button-color text-white":w(l)=="collections"}]),onClick:u[15]||(u[15]=B=>U("collections"))},[e("div",null,[M(v(x,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[E,w(l)=="collections"]]),M(v(x,{name:"i-majesticons-bookmark-line",class:"hover:text-white"},null,512),[[E,w(l)!="collections"]])]),e("span",null,a(d.$t("collections.collection")),1)],2)]),e("div",In,[e("div",En,[e("div",{class:j(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":w(l)==="dashboard"}]),onClick:u[16]||(u[16]=B=>U("dashboard"))},[e("div",Ln,[M(v(x,{name:"i-humbleicons-dashboard",class:"text-white"},null,512),[[E,w(l)==="dashboard"]]),M(v(x,{name:"i-humbleicons-dashboard"},null,512),[[E,w(l)!=="dashboard"]]),e("label",An,a(d.$t("dashboard")),1)]),Pn],2),e("div",{class:j(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":w(l)==="albums"}]),onClick:u[17]||(u[17]=B=>U("albums"))},[e("div",Fn,[M(v(x,{name:"i-bx-photo-album",class:"text-white"},null,512),[[E,w(l)==="albums"]]),M(v(x,{name:"i-bx-photo-album"},null,512),[[E,w(l)!=="albums"]]),e("label",Sn,a(d.$t("albums.album")),1)]),e("span",jn,a(h.value.album),1)],2),e("div",{class:j(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":w(l)==="collections"}]),onClick:u[18]||(u[18]=B=>U("collections"))},[e("div",Tn,[M(v(x,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[E,w(l)==="collections"]]),M(v(x,{name:"i-majesticons-bookmark-line"},null,512),[[E,w(l)!=="collections"]]),e("label",Rn,a(d.$t("collections.collection")),1)]),e("span",Un,a(h.value.collection),1)],2)]),e("div",Bn,[w(l)==="dashboard"?(o(),s("div",zn,[e("div",On,[e("div",{class:j(["flex flex-row justify-between w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":n.value==="feed"}]),onClick:u[19]||(u[19]=B=>n.value="feed")},[R(a(d.$t("feed"))+" ",1),e("span",{class:j(["px-1 ml-2 rounded",n.value==="feed"?"theme-color":"button-color text-white"])},a(h.value.feed),3)],2),e("div",{class:j(["flex flex-row justify-between mr-0 w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":n.value==="artwork"}]),onClick:u[20]||(u[20]=B=>n.value="artwork")},[R(a(d.$t("artworks.artwork"))+" ",1),e("span",{class:j(["px-1 ml-2 rounded",n.value==="artwork"?"theme-color":"button-color text-white"])},a(h.value.artwork),3)],2)]),M(e("div",Vn,[e("button",{class:"w-full action-button secondary-button md:w-auto",onClick:u[21]||(u[21]=B=>C.value.manageMode=!C.value.manageMode)},[v(x,{name:C.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),R(" "+a(C.value.manageMode?d.$t("quit"):d.$t("manage")),1)]),M(e("button",{class:"w-full primary-button md:w-auto",onClick:u[22]||(u[22]=B=>D())},[v(x,{name:"i-ion-add-outline"}),R(" "+a(d.$t("albums.addToAlbum")),1)],512),[[E,C.value.manageMode]])],512),[[E,w($).loggedIn&&w($).user.id===t.value.id&&n.value==="artwork"&&C.value.showManageMode]]),M(e("div",{class:"p-2 mt-2 text-black bg-yellow-200 rounded-md"},a(d.$t("profile.manageModeActiveMessage")),513),[[E,C.value.manageMode]]),e("div",null,[n.value==="feed"?(o(),V(mt,{key:0,ref:"feedListRef",class:"mt-2","user-id":t.value.id},null,8,["user-id"])):c("",!0),!m.value&&n.value==="artwork"?(o(),V(ht,{key:1,ref_key:"artworkListRef",ref:y,"user-id":t.value.id,"manage-mode":C.value.manageMode,onFeedSelectedItems:P,onOnEmpty:S},null,8,["user-id","manage-mode"])):c("",!0)])])):c("",!0),w(l)==="albums"?(o(),s("div",Nn,[m.value?c("",!0):(o(),V(ll,{key:0,"user-id":t.value.id},null,8,["user-id"]))])):c("",!0),w(l)==="collections"?(o(),s("div",Dn,[m.value?c("",!0):(o(),V(Vs,{key:0,"user-id":t.value.id},null,8,["user-id"]))])):c("",!0),w(l)==="followerList"?(o(),s("div",qn,[m.value?c("",!0):(o(),V(ta,{key:0,"user-id":t.value.id},null,8,["user-id"]))])):c("",!0),w(l)==="followingList"?(o(),s("div",Wn,[m.value?c("",!0):(o(),V(pa,{key:0,"user-id":t.value.id},null,8,["user-id"]))])):c("",!0)])])])]),m.value?c("",!0):(o(),V(Se,{key:0,id:"album-selection-modal",ref_key:"albumSelectionModalRef",ref:N,class:"modal","work-ids":k.value,onAddedToAlbum:O},null,8,["work-ids"])),M(v(ie,{id:"item-added-to-album-alert",text:d.$t("albums.itemAdded")},null,8,["text"]),[[E,I.value]])]),_:1})}}},li=Y(Gn,[["__scopeId","data-v-3035fc01"]]);export{li as P};
//# sourceMappingURL=Profile.2c411000.js.map
