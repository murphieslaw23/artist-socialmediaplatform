import{c as te,d as Q,n as Pe,i as X,_ as ve,h as pe,Q as Ce,k as Fe,e as Se}from"../server.mjs";import{ref as h,openBlock as t,createElementBlock as s,Fragment as J,renderList as K,createElementVNode as e,createVNode as c,withCtx as H,createTextVNode as B,toDisplayString as a,createCommentVNode as n,withModifiers as q,withDirectives as C,vShow as A,normalizeClass as j,unref as g,createBlock as D,pushScopeId as fe,popScopeId as he,onBeforeMount as Te,KeepAlive as _e,vModelText as ee,watch as Ie,onMounted as we,normalizeStyle as Ee,computed as je}from"vue";import"vue-router";import{M as be,u as Le,W as ke,e as ie,S as re,c as ue,_ as me,f as de,g as Re}from"./ModalView.5edb3d86.js";import{J as Ue,u as ge,L as Be}from"./Layout.4030873a.js";import{_ as Z,a as M,u as ze}from"./Icon.859b6451.js";import{u as Oe}from"./useFeed.e6438cd7.js";import{I as Me,F as Ve}from"./FeedModalView.a4d61a4b.js";import{_ as oe}from"./LoadingEmptyErrorMessage.1349f146.js";import{u as ye}from"./useUser.35fbd2a9.js";const ce=u=>(fe("data-v-4ac2ae9a"),u=u(),he(),u),Ne={class:"mx-auto w-full md:w-2/3"},De={class:"flex flex-row mb-2 rounded-lg border-none shadow-none theme-color-secondary"},qe={class:"w-full"},He={key:0,class:"p-4 user-info"},Ge=["src"],We={class:"name"},Je=ce(()=>e("br",null,null,-1)),Ke=ce(()=>e("span",{class:"mx-1"},"\xB7",-1)),Qe={class:"text-xxs"},Xe={class:"px-2 md:px-4"},Ye=["id","innerHTML"],Ze=["id","onClick"],et={key:1,class:"my-2 w-full rounded-md theme-color"},tt={key:0,class:"p-2 md:p-4 user-info"},ot=["src"],lt={class:"name"},st=ce(()=>e("br",null,null,-1)),at=ce(()=>e("span",{class:"mx-1"},"\xB7",-1)),nt={class:"px-2 mt-2 md:px-4"},it={class:"text-xs font-semibold"},rt=["id"],ut=["id","onClick"],dt=["onClick"],ct={key:0,class:"p-2 mx-auto w-full text-center rounded-md opacity-90 theme-color"},mt={class:"mx-auto mt-2 primary-button"},vt={key:0,class:"p-2 mx-auto w-full text-center rounded-md opacity-90 theme-color"},pt={class:"mx-auto mt-2 primary-button"},ft={class:"float-right mx-4 mt-2 interactions"},ht={key:0,class:"reactions"},wt=["onClick"],bt=["onClick"],gt={class:"option dropdown"},_t={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"option-dropdown-items"},kt={class:"option-dropdown dropdown-menu"},yt={id:"option-dropdown-items",class:"w-52 toggler","aria-labelledby":"option-dropdown-buttons",role:"menu"},$t={class:"menu-wrapper"},xt={class:"mx-auto text-center"},Mt={class:"mx-auto mt-10 text-center"},Ct=ce(()=>e("b",null,"(\u3186_\u3186)",-1)),It={class:"mx-auto text-center"},Et={id:"chronological-feed-modal",class:"modal work-view"},Lt={id:"artwork-modal",class:"modal work-view"},At={__name:"Feeds",props:{userId:{type:Number,default:0}},setup(u){const P=u,x=te(),{oApiConfiguration:d,fetchOptions:F}=Q(),w=Oe(d,F()),{generateArtworkThumb:$}=Pe(),k=h([]),p=h({page:0,perPage:10}),m=async({loaded:b})=>{const[L,R]=await w.getFeedByUserId({userId:P.userId,pagination:{page:p.value.page,perPage:p.value.perPage}});p.value.page+=1;for(let r=0;r<L.feeds.length;r++){const y=L.feeds[r];if(y.liked&&o.value.push(y.id),y.artworks){y.artworks.images=[],y.artworks.apply_explicit_filter=!1;for(let S=0;S<y.artworks.artwork_assets.length;S++)if(S<=3){const N=await $(y.artworks.artwork_assets[S].bucket,y.artworks.artwork_assets[S].filename,"feed");y.artworks.images.push(N)}y.artworks!=null&&(!x.loggedIn&&y.artworks.is_explicit||y.artworks.is_explicit&&!x.user.user_settings.show_explicit)&&(y.artworks.apply_explicit_filter=!0)}k.value.push(y)}b(L.feeds.length,p.value.perPage)},l=h(null),i=b=>{l.value.view(b),X().openModal("chronological-feed-modal")},I=h(null),z=(b,L,R)=>{L?(console.log("removing explicit filter.."),k.value[R].artworks.apply_explicit_filter=!1):(I.value.view(b),X().openModal("artwork-modal"))},o=h([]),_=async b=>{const[L,R]=await w.like({feedId:b});if(L){o.value.push(b);const r=document.getElementById(`profileFeedLikeButton-${b}`);r.classList.add("animate-bounce"),setInterval(()=>{r.classList.remove("animate-bounce")},2500)}},E=async b=>{const[L,R]=await w.unlike({feedId:b});if(L){const r=o.value.indexOf(b);o.value.splice(r,1)}},U=(b,L,R,r)=>{Le().readMore(b,L,R,r)};return(b,L)=>{const R=ve;return t(),s("div",Ne,[(t(!0),s(J,null,K(k.value,(r,y)=>(t(),s("div",{key:r.id},[e("div",De,[e("div",qe,[r.users?(t(),s("div",He,[c(R,{to:"/profile/"+r.users.username},{default:H(()=>[e("img",{class:"avatar",src:b.avatarCoverUrl(r.users.avatar_bucket,r.users.avatar_filename),onError:L[0]||(L[0]=(...S)=>b.imageLoadError&&b.imageLoadError(...S))},null,40,Ge)]),_:2},1032,["to"]),e("div",We,[c(R,{to:"/profile/"+r.users.username,class:"fullname"},{default:H(()=>[B(a(r.users.name),1)]),_:2},1032,["to"]),Je,c(R,{to:"/profile/"+r.users.username,class:"username hover:underline"},{default:H(()=>[B(" @"+a(r.users.username),1)]),_:2},1032,["to"]),Ke,e("span",Qe,a(b.formatDate(r.scheduled_post?r.scheduled_post:r.created_at,!0)),1)])])):n("",!0),e("div",Xe,[e("p",{id:"feed-text-"+r.id,innerHTML:r.text.split("<br>").length>3&&r.text.length>300?`${r.text.slice(0,300)}...`:r.text},null,8,Ye),r.text.split("<br>").length>3&&r.text.length>300?(t(),s("a",{key:0,id:"feed-read-more-"+r.id,class:"href",onClick:q(S=>U(r.text,r.id,"feed-read-more-","feed-text-"),["prevent"])},a(b.$t("readMore")),9,Ze)):n("",!0),r.artworks?(t(),s("div",et,[r.artworks.users?(t(),s("div",tt,[c(R,{to:"/profile/"+r.artworks.users.username},{default:H(()=>[e("img",{class:"avatar",src:b.avatarCoverUrl(r.artworks.users.avatar_bucket,r.artworks.users.avatar_filename),onError:L[1]||(L[1]=(...S)=>b.imageLoadError&&b.imageLoadError(...S))},null,40,ot)]),_:2},1032,["to"]),e("div",lt,[c(R,{to:"/profile/"+r.artworks.users.username,class:"fullname hover:href"},{default:H(()=>[B(a(r.artworks.users.name),1)]),_:2},1032,["to"]),st,c(R,{to:"/profile/"+r.artworks.users.username,class:"hover:underline text-xxs"},{default:H(()=>[B(" @"+a(r.artworks.users.username),1)]),_:2},1032,["to"]),at,c(R,{to:"/a/"+r.artworks.id,class:"hover:underline text-xxs"},{default:H(()=>[B(a(b.formatDate(r.artworks.scheduled_post?r.artworks.scheduled_post:r.artworks.created_at,!0)),1)]),_:2},1032,["to"])])])):n("",!0),e("div",nt,[e("span",it,a(r.artworks.title),1),C(e("p",null,[e("span",{id:"feed-description-"+r.artworks.id},a(r.artworks.description.length>300?`${r.artworks.description.slice(0,300)}...`:r.artworks.description),9,rt),r.artworks.description.length>300?(t(),s("a",{key:0,id:"feed-read-more-"+r.artworks.id,class:"href",onClick:q(S=>U(r.artworks.description,r.artworks.id,"feed-read-more-","feed-description-"),["prevent"])},a(b.$t("readMore")),9,ut)):n("",!0)],512),[[A,r.artworks.description]])]),e("div",null,[b.isMobile()?n("",!0):(t(),s("div",{key:0,class:j(["p-2",{"cursor-pointer":!r.artworks.apply_explicit_filter}]),onClick:q(S=>z(r.artworks.id,r.artworks.apply_explicit_filter,y),["prevent"])},[e("div",{class:j(["overflow-hidden relative p-2 rounded-md",{"md:mx-2":r.artworks.apply_explicit_filter}])},[c(Me,{class:j([{"blur-3xl unclickable":r.artworks.apply_explicit_filter},r.artworks.apply_explicit_filter?"brightness-50":"brightness-100"]),work:r.artworks},null,8,["class","work"]),r.artworks.apply_explicit_filter?(t(),s("div",ct,[e("div",null,a(g(x).loggedIn?b.$t("explicitContentAlert"):b.$t("explicitContentAlertForGuest")),1),e("button",mt,a(b.$t("explicitShowMeThisContent")),1)])):n("",!0)],2)],10,dt)),b.isMobile()?(t(),D(R,{key:1,to:r.artworks.apply_explicit_filter?null:"/a/"+r.artworks.id,onClick:q(S=>z(r.artworks.id,r.artworks.apply_explicit_filter,y),["prevent"]),class:"cursor-pointer"},{default:H(()=>[e("div",{class:j(["overflow-hidden relative p-2 rounded-md",{"m-2":r.artworks.apply_explicit_filter}])},[c(Me,{class:j([{"blur-3xl unclickable":r.artworks.apply_explicit_filter},r.artworks.apply_explicit_filter?"brightness-50":"brightness-100"]),work:r.artworks},null,8,["class","work"]),r.artworks.apply_explicit_filter?(t(),s("div",vt,[e("div",null,a(g(x).loggedIn?b.$t("explicitContentAlert"):b.$t("explicitContentAlertForGuest")),1),e("button",pt,a(b.$t("explicitShowMeThisContent")),1)])):n("",!0)],2)]),_:2},1032,["to","onClick"])):n("",!0)])])):n("",!0)]),e("div",ft,[g(x).loggedIn?(t(),s("div",ht,[e("span",{class:"leading-8",onClick:S=>o.value.includes(r.id)?E(r.id):_(r.id)},[C(c(M,{id:"profileFeedLikeButton-"+r.id,name:"i-ion-heart",class:"mr-1 text-red-500 hover:text-red-500"},null,8,["id"]),[[A,o.value.includes(r.id)]]),C(c(M,{name:"i-ion-heart-outline",class:"mr-1 icon-color hover:text-red-500"},null,512),[[A,!o.value.includes(r.id)]]),B(" "+a(b.thousand(r._count.feed_likes)),1)],8,wt),e("span",{class:"leading-8",onClick:q(S=>i(r.id),["prevent"])},[c(M,{name:"i-mdi-comment-multiple-outline",class:"mr-1 icon-color hover:text-blue-500"}),B(" "+a(b.thousand(r._count.feed_comments)),1)],8,bt),e("div",gt,[e("button",_t,[e("span",null,[c(M,{name:"i-uit-ellipsis-v",class:"align-middle icon icon-color"})])]),e("div",kt,[e("div",yt,[e("div",$t,[c(R,{to:"/feed/"+r.id,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:H(()=>[c(M,{name:"i-fluent-arrow-enter-20-filled",class:"mr-2 text-base"}),B(" "+a(b.$t("open")),1)]),_:2},1032,["to"]),c(R,{to:"/feed/"+r.id,target:"_blank",class:"flex z-20 py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:H(()=>[c(M,{name:"i-ci-external-link",class:"mr-2 text-base"}),B(" "+a(b.$t("openInNewTab")),1)]),_:2},1032,["to"])])])])])])):n("",!0)])])])]))),128)),c(g(Ue),{load:m},{loading:H(()=>[e("div",xt,[c(M,{name:"i-line-md-loading-twotone-loop",class:"text-3xl"})])]),"no-results":H(()=>[e("div",Mt,[Ct,B(" "+a(b.$t("nothingToShow")),1)])]),"no-more":H(()=>[e("div",It,a(b.$t("youHaveReachedTheEnd")),1)]),_:1}),e("div",Et,[c(Ve,{ref_key:"chronologicalFeedModalViewRef",ref:l,section:"chronological-feed"},null,512)]),e("div",Lt,[c(be,{ref_key:"artworkModalViewRef",ref:I,section:"artwork"},null,512)])])}}},Pt=Z(At,[["__scopeId","data-v-4ac2ae9a"]]),Ft={id:"lists"},St=["id"],Tt={__name:"Artworks",props:{userId:{type:Number,default:0},manageMode:{type:Boolean,default:!1}},emits:["feedSelectedItems","onEmpty"],setup(u,{emit:P}){const x=u,{oApiConfiguration:d,fetchOptions:F}=Q(),w=ze(d,F()),$="profile",k=h(!0);Te(()=>{p()});const p=async()=>{const[N,O]=await i();m.value=N,O.record_total<=l.value.perPage&&o(),O.record_total===0&&b()},m=h([]),l=h({perPage:24,page:0}),i=async()=>{l.value.page===0&&(k.value=!0);const[N,O,G]=await w.getUserArtworks({userId:x.userId,pagination:{page:l.value.page,perPage:l.value.perPage}});if(G)R();else return O.record_total<=l.value.perPage&&o(),O.record_total===0&&b(),l.value.page+=1,I(),[N,O]},I=()=>{k.value=!1,U.value=!1,L.value=!1},z=h(!0),o=()=>{z.value=!1},_=h({delay:!1}),E=async()=>{_.value.delay=!0;const[N,O]=await i();for(let G=0;G<N.length;G++)m.value.push(N[G]);_.value.delay=!1,dataPagination.next_previous.next_page||o(),dataPagination.next_previous.next_page&&dataPagination.current_page===_.maxLoad&&(o(),_.showDiscoveryButton=!0)},U=h(!1),b=()=>{U.value=!0,o(),P("onEmpty")},L=h(!1),R=()=>{k.value=!1,L.value=!0,o()},r=h(null),y=(N,O=!1)=>{r.value.view(N,O),X().openModal($+"-modal")},S=N=>{P("feedSelectedItems",N)};return(N,O)=>(t(),s("div",Ft,[C(e("div",null,[(t(),D(_e,null,[C(c(ke,{"section-class":"work-grid",works:m.value,view:y,"manage-mode":u.manageMode,onFeedManageList:S},null,8,["works","manage-mode"]),[[A,!U.value]])],1024)),C(e("div",{class:j(["primary-button",_.value.delay?"animate-pulse":""]),onClick:E},a(N.$t("loadMore")),3),[[A,z.value]])],512),[[A,!k.value]]),c(oe,{loading:k.value,empty:U.value,error:L.value,fetch:i},null,8,["loading","empty","error"]),e("div",{id:$+"-modal",class:"modal work-view"},[C(c(be,{ref_key:"profileModalViewRef",ref:r,section:$},null,512),[[A,!k.value]])],8,St)]))}},jt=Z(Tt,[["__scopeId","data-v-d66e8da0"]]),Rt={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Ut={class:"title"},Bt=["name"],zt=["placeholder"],Ot=["placeholder"],Vt=["for"],Nt=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),Dt={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},qt=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Ht=[qt],Gt={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Wt=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Jt=[Wt],Kt={class:"ml-2"},Qt={class:"flex flex-row gap-2 justify-end mt-2"},Xt={type:"submit",class:"primary-button"},Yt={__name:"AlbumFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(u,{emit:P}){const x=u,{oApiConfiguration:d,fetchOptions:F}=Q(),w=ie(d,F()),{t:$}=pe(),k="create-album-form",p=h({title:"",description:"",isPublic:1,category:"artwork"}),m=async()=>{ge().validate(k,$);try{let l=!1,i={};if(x.category){const[I,z,o]=await w.createAlbum(x.category,p.value);l=I,i=z}l&&(X().closeModal(x.modalId),P("created",i))}catch{}};return(l,i)=>(t(),s("div",null,[e("div",Rt,[e("div",null,[e("span",Ut,a(l.$t("albums.create.form.title")),1),e("form",{id:k,class:"mt-2",onSubmit:i[4]||(i[4]=q(I=>m(),["prevent"]))},[e("n-validate",{for:"title",name:l.$t("title")},[C(e("input",{"onUpdate:modelValue":i[0]||(i[0]=I=>p.value.title=I),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:l.$t("title")},null,8,zt),[[ee,p.value.title]])],8,Bt),C(e("textarea",{"onUpdate:modelValue":i[1]||(i[1]=I=>p.value.description=I),class:"form-input theme-color-secondary",placeholder:l.$t("description"),"data-gramm":"false"},null,8,Ot),[[ee,p.value.description]]),e("label",{for:p.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:i[2]||(i[2]=I=>p.value.isPublic=!p.value.isPublic)},[Nt,p.value.isPublic?(t(),s("span",Dt,Ht)):n("",!0),p.value.isPublic?n("",!0):(t(),s("span",Gt,Jt))]),e("span",Kt,a(l.$t("private")),1)],8,Vt),e("div",Qt,[e("button",{class:"cancel-button",onClick:i[3]||(i[3]=q(I=>l.closeModal(u.modalId),["prevent"]))},a(l.$t("cancel")),1),e("button",Xt,a(l.$t("create")),1)])],32)])])]))}},Zt={id:"lists"},eo={class:"p-4 mb-4 w-full rounded-md theme-color-secondary"},to={class:"mb-2 text-base font-bold"},oo={class:"mb-2"},lo=B(),so={class:"italic"},ao=["id"],no={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1}},emits:["onAlbumEmpty","feedManageList"],setup(u,{expose:P,emit:x}){const d=u,{oApiConfiguration:F,fetchOptions:w}=Q(),$=ie(F,w()),k=h(d.id);Ie(()=>d.id,(y,S)=>{k.value=y});const p=h(!0),m=h({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:24},list:[],empty:!1}),l=async()=>{p.value=!0,await i(),await I(),p.value=!1},i=async()=>{const[y,S]=await $.getInfo(k.value);m.value.info=y.data},I=async()=>{const[y,S,N]=await $.listAlbumItems({albumId:k.value,pagination:{page:m.value.pagination.page,perPage:m.value.pagination.page===0?m.value.pagination.firstLoad:m.value.pagination.perPage}});S?m.value.pagination.page===0?m.value.pagination.page=m.value.pagination.firstLoad/m.value.pagination.perPage:m.value.pagination.page+=m.value.pagination.page!==0?1:2:m.value.loadMore=!1,y!==null&&y.length?(y.forEach(O=>{m.value.list.push(O.artworks)}),x("onAlbumEmpty",!1)):(m.value.empty=!0,x("onAlbumEmpty",!0))},z=()=>{m.value.loadMore=!0,m.value.pagination.page=0,m.value.list=[]},o=h([]),_=y=>{o.value=y,x("feedManageList",y)},E=h(!1);let U;const b=async()=>{const[y,S]=await $.removeItems(d.id,o.value);y&&(ue().splash(U,E,"item-removed-alert"),z(),await l())},L=h("album"),R=h(null),r=(y,S=!1)=>{R.value.view(y,S),X().openModal(L.value+"-modal")};return P({fetchInfo:i,removeItems:b}),(y,S)=>(t(),s("div",Zt,[e("div",{class:"hidden",onClick:S[0]||(S[0]=N=>i())}),e("div",{class:"hidden",onClick:S[1]||(S[1]=N=>b())}),e("div",eo,[e("div",to,a(m.value.info.name),1),e("div",oo,a(m.value.info.description),1),e("div",null,[e("b",null,a(y.$t("private"))+":",1),lo,e("span",so,a(m.value.info.is_public?y.$t("no"):y.$t("yes")),1)]),e("div",null,[e("b",null,a(y.$t("createdAt")),1),B(" "+a(y.formatDate(m.value.info.created_at)),1)])]),C(e("div",null,[(t(),D(_e,null,[C(c(ke,{"section-class":"work-grid",works:m.value.list,view:r,"manage-mode":u.manageMode,onFeedManageList:_},null,8,["works","manage-mode"]),[[A,!m.value.empty]])],1024)),C(e("div",{class:"primary-button",onClick:S[2]||(S[2]=N=>I())},a(y.$t("loadMore")),513),[[A,m.value.loadMore]])],512),[[A,!p.value]]),c(oe,{loading:p.value,empty:m.value.empty,error:!1,fetch:l},null,8,["loading","empty"]),p.value?n("",!0):(t(),s("div",{key:0,id:L.value+"-modal",class:"modal work-view"},[c(be,{ref_key:"albumModalViewRef",ref:R,section:L.value},null,8,["section"])],8,ao)),C(c(re,{id:"item-removed-alert",text:y.$t("albums.itemRemoved")},null,8,["text"]),[[A,E.value]])]))}},io=Z(no,[["__scopeId","data-v-cfab43ea"]]),ro={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},uo={class:"title"},co=["name"],mo=["placeholder"],vo=["placeholder"],po=["for"],fo=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),ho={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},wo=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),bo=[wo],go={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},_o=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),ko=[_o],yo={class:"ml-2"},$o={class:"flex flex-row gap-2 justify-end mt-2"},xo={type:"submit",class:"primary-button"},Mo={__name:"EditForm",props:{albumId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(u,{expose:P,emit:x}){const d=u,{oApiConfiguration:F,fetchOptions:w}=Q(),$=ie(F,w()),{t:k}=pe(),p=h(!0),m=async o=>{if(o){z(),p.value=!0;const[_,E]=await $.getInfo(o),U=_.data;i.value.id=o,i.value.name=U.name,i.value.description=U.description,i.value.isPublic=!!U.is_public,p.value=!1}},l="update-album-form",i=h({id:0,name:"",description:"",isPublic:!1}),I=async()=>{ge().validate(l,k);const[o,_]=await $.update({id:i.value.id,name:i.value.name,description:i.value.description,isPublic:i.value.isPublic?1:0});_||(X().closeModal(d.modalId),x("updated",i.value),z())},z=()=>{i.value={id:0,name:"",description:"",isPublic:0}};return P({fetch:m}),(o,_)=>(t(),s("div",null,[e("div",ro,[e("div",null,[e("span",uo,a(o.$t("albums.edit.form.title")),1),p.value?n("",!0):(t(),s("form",{key:0,id:l,class:"mt-2",onSubmit:_[4]||(_[4]=q(E=>I(),["prevent"]))},[e("n-validate",{for:"title",name:o.$t("title")},[C(e("input",{"onUpdate:modelValue":_[0]||(_[0]=E=>i.value.name=E),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:o.$t("title")},null,8,mo),[[ee,i.value.name]])],8,co),C(e("textarea",{"onUpdate:modelValue":_[1]||(_[1]=E=>i.value.description=E),class:"form-input theme-color-secondary",placeholder:o.$t("description"),"data-gramm":"false"},null,8,vo),[[ee,i.value.description]]),e("label",{for:i.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:_[2]||(_[2]=E=>i.value.isPublic=!i.value.isPublic)},[fo,i.value.isPublic?(t(),s("span",ho,bo)):n("",!0),i.value.isPublic?n("",!0):(t(),s("span",go,ko))]),e("span",yo,a(o.$t("private")),1)],8,po),e("div",$o,[e("button",{class:"cancel-button",onClick:_[3]||(_[3]=q(E=>o.closeModal(u.modalId),["prevent"]))},a(o.$t("cancel")),1),e("button",xo,a(o.$t("save")),1)])],32))])])]))}},Ae=""+globalThis.__buildAssetsURL("folder.11be08fa.png"),$e=u=>(fe("data-v-eccd717d"),u=u(),he(),u),Co={class:"mb-2"},Io={key:0},Eo=$e(()=>e("img",{src:Ae,class:"rounded"},null,-1)),Lo=[Eo],Ao={key:1},Po={class:"relative text-center"},Fo={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},So={class:"overflow-hidden rounded-md"},To=["src"],jo={key:2,class:"imgrid"},Ro={class:"relative text-center"},Uo={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Bo={class:"overflow-hidden rounded-md"},zo=["src"],Oo=$e(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),Vo=$e(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),No={key:3,class:"imgrid"},Do={class:"relative text-center"},qo={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Ho={class:"overflow-hidden rounded-md"},Go=["src"],Wo={key:4,class:"imgrid"},Jo={class:"relative text-center"},Ko={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},Qo={class:"overflow-hidden rounded-md"},Xo=["src"],Yo={key:5,class:"imgrid"},Zo={key:0,class:"relative text-center"},el={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},tl={class:"overflow-hidden rounded-md"},ol=["src"],ll={key:1,class:"relative text-center"},sl={class:"absolute top-1/2 left-1/2 z-10 text-lg font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 md:text-xl lg:text-3xl"},al={class:"overflow-hidden rounded-md"},nl=["src"],il={__name:"ArtworkThumbnail",props:{album:{type:Object,default:()=>{}}},setup(u){const P=te(),x={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(d,F)=>(t(),s("div",Co,[!u.album.album_has_artworks||u.album._count.album_has_artworks===0?(t(),s("div",Io,Lo)):n("",!0),u.album.album_has_artworks&&u.album._count.album_has_artworks===1?(t(),s("div",Ao,[e("div",Po,[d.applyExplicitFilter(g(P),u.album.album_has_artworks[0].artworks.is_explicit)?(t(),s("span",Fo,a(d.$t("explicitContent")),1)):n("",!0),e("div",So,[u.album.album_has_artworks&&u.album._count.album_has_artworks===1?(t(),s("img",{key:0,src:d.artworkThumb(u.album.album_has_artworks[0].artworks.artwork_assets[0].bucket,u.album.album_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:j(["object-cover object-top rounded",{"blur-sm brightness-50":d.applyExplicitFilter(g(P),u.album.album_has_artworks[0].artworks.is_explicit)}]),style:{"aspect-ratio":"1/1"},onError:F[0]||(F[0]=(...w)=>d.imageLoadError&&d.imageLoadError(...w))},null,42,To)):n("",!0)])])])):n("",!0),u.album.album_has_artworks&&u.album._count.album_has_artworks===2?(t(),s("div",jo,[(t(!0),s(J,null,K(u.album.album_has_artworks,(w,$)=>(t(),s("div",{key:$,class:j(x[2][$])},[e("div",Ro,[d.applyExplicitFilter(g(P),w.artworks.is_explicit)?(t(),s("span",Uo,a(d.$t("explicitContent")),1)):n("",!0),e("div",Bo,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":d.applyExplicitFilter(g(P),w.artworks.is_explicit)}]),src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:F[1]||(F[1]=(...k)=>d.imageLoadError&&d.imageLoadError(...k))},null,42,zo)])])],2))),128)),Oo,Vo])):n("",!0),u.album.album_has_artworks&&u.album._count.album_has_artworks===3?(t(),s("div",No,[(t(!0),s(J,null,K(u.album.album_has_artworks,(w,$)=>(t(),s("div",{key:$,class:j(x[3][$])},[e("div",Do,[d.applyExplicitFilter(g(P),w.artworks.is_explicit)?(t(),s("span",qo,a(d.$t("explicitContent")),1)):n("",!0),e("div",Ho,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":d.applyExplicitFilter(g(P),w.artworks.is_explicit)}]),src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:F[2]||(F[2]=(...k)=>d.imageLoadError&&d.imageLoadError(...k))},null,42,Go)])])],2))),128))])):n("",!0),u.album.album_has_artworks&&u.album._count.album_has_artworks===4?(t(),s("div",Wo,[(t(!0),s(J,null,K(u.album.album_has_artworks,(w,$)=>(t(),s("div",{key:$},[e("div",Jo,[d.applyExplicitFilter(g(P),w.artworks.is_explicit)?(t(),s("span",Ko,a(d.$t("explicitContent")),1)):n("",!0),e("div",Qo,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":d.applyExplicitFilter(g(P),w.artworks.is_explicit)}]),src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:F[3]||(F[3]=(...k)=>d.imageLoadError&&d.imageLoadError(...k))},null,42,Xo)])])]))),128))])):n("",!0),u.album.album_has_artworks&&u.album._count.album_has_artworks>4?(t(),s("div",Yo,[(t(!0),s(J,null,K(u.album.album_has_artworks,(w,$)=>(t(),s("div",{key:$},[$<3?(t(),s("div",Zo,[d.applyExplicitFilter(g(P),w.artworks.is_explicit)?(t(),s("span",el,a(d.$t("explicitContent")),1)):n("",!0),e("div",tl,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":d.applyExplicitFilter(g(P),w.artworks.is_explicit)}]),src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:F[4]||(F[4]=(...k)=>d.imageLoadError&&d.imageLoadError(...k))},null,42,ol)])])):(t(),s("div",ll,[e("span",sl,"+"+a(u.album._count.album_has_artworks-4),1),e("div",al,[e("img",{src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),class:j(["z-0 brightness-50",{"blur-sm brightness-50":d.applyExplicitFilter(g(P),w.artworks.is_explicit)}]),onError:F[5]||(F[5]=(...k)=>d.imageLoadError&&d.imageLoadError(...k))},null,42,nl)])]))]))),128))])):n("",!0)]))}},rl=Z(il,[["__scopeId","data-v-eccd717d"]]),ul={class:"mb-2 w-full"},dl={key:0,class:"flex flex-row justify-between"},cl={class:"flex flex-row"},ml={key:0},vl={key:1,class:"flex flex-row justify-between"},pl={class:"flex flex-row"},fl={class:"flex flex-row gap-2"},hl={class:"flex flex-row gap-2"},wl={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},bl=["onClick"],gl={class:"flex flex-row pb-1 mt-4 font-bold"},_l={class:"text-xs font-normal"},kl={__name:"Album",props:{userId:{type:Number,default:0}},setup(u){const P=u,x=te(),{oApiConfiguration:d,fetchOptions:F}=Q(),w=ie(d,F());we(()=>{I()});const $=h(!0),k=h("artwork"),p=h(0),m=h([]),l=h({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),i=h({artwork:0}),I=async()=>{$.value=!0;const[T,v,f]=await w.fetchAlbums(P.userId,k.value,l.value.pagination.page===0?l.value.pagination.firstLoad:l.value.pagination.perPage,l.value.pagination.page);if(f)U();else{T.length||(l.value.manageMode=!1,_()),T.forEach(V=>{m.value.push(V)}),l.value.pagination.page+=l.value.pagination.firstLoad/l.value.pagination.perPage,l.value.showLoadMore=v;const[W]=await w.countArtworkAlbums(P.userId);i.value.artwork=W}$.value=!1},z=async()=>await I(),o=h(!1),_=()=>{o.value=!0,l.value.showLoadMore=!1},E=h(!1),U=()=>{$.value=!1,E.value=!0,l.value.showLoadMore=!1},b=async()=>{$.value=!1,o.value=!1,E.value=!1,l.value.pagination.page=0,m.value=[],await I()},L=h(!1);let R;const r=async()=>{ue().splash(R,L,"created-alert"),await b()},y=h(null),S=()=>{y.value.fetch(p.value),X().openModal("album-edit-form-modal")},N=h(null),O=T=>{N.value.fetchInfo(),m.value.forEach(v=>{v.id===T.id&&(v.name=T.name,v.description=T.description,v.is_public=T.isPublic)})},G=()=>{N.value.removeItems()},Y=h([]),le=T=>{Y.value=T},se=async()=>{if(p.value!==0){const[T,v]=await w.deleteAlbum(p.value);T&&(p.value=0,b())}},ae=T=>{l.value.showManageButton=!T,l.value.manageMode=!1},ne=()=>{p.value=0,l.value.showManageButton=!1,l.value.manageMode=!1};return(T,v)=>(t(),s("div",null,[e("div",ul,[p.value?n("",!0):(t(),s("div",dl,[e("div",cl,[e("div",{class:j(["ml-0 primary-button theme-color-secondary",{"button-color text-white":k.value==="artwork"}]),onClick:v[0]||(v[0]=f=>k.value="artwork")},[B(a(T.$t("artworks.artwork"))+" ",1),e("span",{class:j(["px-1 ml-2 font-normal rounded",k.value==="artwork"?"theme-color":"button-color text-white"])},a(i.value.artwork),3)],2)]),g(x).loggedIn&&g(x).user.id===u.userId?(t(),s("div",ml,[e("div",{class:"icon-button",onClick:v[1]||(v[1]=f=>T.openModal("album-form-modal"))},[c(M,{name:"i-ion-add-outline"})])])):n("",!0)])),p.value?(t(),s("div",vl,[e("div",null,[e("div",{class:"ml-0 icon-button",onClick:v[2]||(v[2]=f=>ne())},[c(M,{name:"i-ic-baseline-keyboard-arrow-left"})])]),e("div",pl,[C(e("div",fl,[e("button",{class:"action-button secondary-button",onClick:v[3]||(v[3]=f=>l.value.manageMode=!l.value.manageMode)},[c(M,{name:l.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),B(" "+a(l.value.manageMode?T.$t("quit"):T.$t("manage")),1)]),C(e("button",{class:j(["flex flex-row",Y.value.length>0?"danger-button":"disabled-button cursor-not-allowed"]),onClick:v[4]||(v[4]=f=>Y.value.length>0?T.openModal("item-deletion-confirm-modal"):null)},[c(M,{name:"i-akar-icons-trash-bin"}),B(" "+a(T.$t("albums.removeSelected")),1)],2),[[A,l.value.manageMode]])],512),[[A,g(x).loggedIn&&g(x).user.id===u.userId&&l.value.showManageButton]]),C(e("div",hl,[e("button",{class:"icon-button",onClick:v[5]||(v[5]=f=>S())},[c(M,{name:"i-ph-gear-six"})]),e("button",{class:"danger-button-color b-button",onClick:v[6]||(v[6]=f=>T.openModal("album-deletion-confirm-modal"))},[c(M,{name:"i-akar-icons-trash-bin"})])],512),[[A,g(x).loggedIn&&g(x).user.id===u.userId&&!l.value.manageMode]])])])):n("",!0),C(e("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},a(T.$t("albums.manageModeActiveMessage")),513),[[A,l.value.manageMode]])]),p.value?n("",!0):(t(),s("div",wl,[(t(!0),s(J,null,K(m.value,f=>(t(),s("div",{key:f.id,class:j(["p-3 rounded-md cursor-pointer",f.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:W=>p.value=f.id},[f.type==="artwork"?(t(),D(rl,{key:0,album:f},null,8,["album"])):n("",!0),e("div",gl,[f.is_public?n("",!0):(t(),D(M,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),e("span",_l,a(f.name),1)])],10,bl))),128))])),l.value.showLoadMore&&!p.value?(t(),s("div",{key:1,class:"mt-4 w-full primary-button",onClick:z},a(T.$t("loadMore")),1)):n("",!0),c(oe,{loading:$.value,empty:o.value,error:E.value,fetch:I},null,8,["loading","empty","error"]),!$.value&&!p.value?(t(),D(Yt,{key:2,id:"album-form-modal","modal-id":"album-form-modal",category:k.value,class:"modal",onCreated:r},null,8,["category"])):n("",!0),C(c(re,{id:"created-alert",text:T.$t("albums.created")},null,8,["text"]),[[A,L.value]]),!$.value&&p.value?(t(),D(Mo,{key:3,id:"album-edit-form-modal",ref_key:"albumEditFormModalRef",ref:y,"modal-id":"album-edit-form-modal","album-id":p.value,class:"modal",onUpdated:O},null,8,["album-id"])):n("",!0),c(me,{id:"album-deletion-confirm-modal","modal-id":"album-deletion-confirm-modal",message:"All saved items in this album will be deleted. Do you still want to delete this album?",class:"modal",onOnAccept:se},null,8,["message"]),c(me,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this album. Do you still want to remove them?",class:"modal",onOnAccept:G},null,8,["message"]),p.value&&!$.value?(t(),D(io,{key:4,id:p.value,ref_key:"albumDetailRef",ref:N,"manage-mode":l.value.manageMode,onOnAlbumEmpty:ae,onFeedManageList:le},null,8,["id","manage-mode"])):n("",!0)]))}},yl=Z(kl,[["__scopeId","data-v-7bee1255"]]),$l={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},xl={class:"title"},Ml=["placeholder"],Cl=["placeholder"],Il=["for"],El=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),Ll={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},Al=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Pl=[Al],Fl={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Sl=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Tl=[Sl],jl={class:"ml-2"},Rl={class:"flex flex-row gap-2 justify-end mt-2"},Ul={type:"submit",class:"primary-button"},Bl={__name:"CollectionFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(u,{emit:P}){const x=u,{oApiConfiguration:d,fetchOptions:F}=Q(),w=de(d,F()),{t:$}=pe(),k="create-collection-form",p=h({title:"",description:"",isPublic:1,category:"artwork"}),m=async()=>{ge().validate(k,$);try{let l=!1,i={};if(x.category){const[I,z,o]=await w.createCollection(x.category,p.value);o||(l=I,i=z)}l&&(X().closeModal(x.modalId),P("created",i))}catch{}};return(l,i)=>(t(),s("div",null,[e("div",$l,[e("div",null,[e("span",xl,a(l.$t("collections.create.form.title")),1),e("form",{id:k,class:"mt-2",onSubmit:i[4]||(i[4]=q(I=>m(),["prevent"]))},[e("n-validate",null,[C(e("input",{"onUpdate:modelValue":i[0]||(i[0]=I=>p.value.title=I),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:l.$t("title")},null,8,Ml),[[ee,p.value.title]])]),C(e("textarea",{"onUpdate:modelValue":i[1]||(i[1]=I=>p.value.description=I),class:"form-input theme-color-secondary",placeholder:l.$t("description"),"data-gramm":"false"},null,8,Cl),[[ee,p.value.description]]),e("label",{for:p.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:i[2]||(i[2]=I=>p.value.isPublic=!p.value.isPublic)},[El,p.value.isPublic?(t(),s("span",Ll,Pl)):n("",!0),p.value.isPublic?n("",!0):(t(),s("span",Fl,Tl))]),e("span",jl,a(l.$t("private")),1)],8,Il),e("div",Rl,[e("button",{class:"cancel-button",onClick:i[3]||(i[3]=q(I=>l.closeModal(u.modalId),["prevent"]))},a(l.$t("cancel")),1),e("button",Ul,a(l.$t("create")),1)])],32)])])]))}},zl={id:"lists"},Ol={class:"p-4 mb-4 w-full rounded-md theme-color-secondary"},Vl={class:"text-base font-bold mb-2"},Nl={class:"mb-2"},Dl=B(),ql={class:"italic"},Hl=["id"],Gl={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1},type:{type:String,default:""}},emits:["onCollectionEmpty","feedManageList"],setup(u,{expose:P,emit:x}){const d=u,{oApiConfiguration:F,fetchOptions:w}=Q(),$=de(F,w()),k=h(d.id);Ie(()=>d.id,(y,S)=>{k.value=y});const p=h(!0),m=h({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:24},list:[],empty:!1}),l=async()=>{p.value=!0,await i(),await I(),p.value=!1},i=async()=>{const[y,S]=await $.getInfo(k.value);m.value.info=y.data},I=async()=>{const[y,S,N]=await $.listCollectionItems({collectionId:k.value,pagination:{page:m.value.pagination.page,perPage:m.value.pagination.page===0?m.value.pagination.firstLoad:m.value.pagination.perPage}});S?m.value.pagination.page===0?m.value.pagination.page=m.value.pagination.firstLoad/m.value.pagination.perPage:m.value.pagination.page+=m.value.pagination.page!==0?1:2:m.value.loadMore=!1,y!==null&&y.length?(y.forEach(O=>{m.value.list.push(O.artworks)}),x("onCollectionEmpty",!1)):(m.value.empty=!0,x("onCollectionEmpty",!0))},z=()=>{m.value.loadMore=!0,m.value.pagination.page=0,m.value.list=[]},o=h([]),_=y=>{o.value=y,x("feedManageList",y)},E=h(!1);let U;const b=async()=>{const[y,S]=await $.removeItem({collectionId:d.id,type:d.type,workId:o.value});S||(ue().splash(U,E,"item-removed-alert"),z(),await l(),x("feedManageList",[]))},L=h("collection"),R=h(null),r=(y,S=!1)=>{R.value.view(y,S),X().openModal(L.value+"-modal")};return P({fetchInfo:i,removeItem:b}),(y,S)=>(t(),s("div",zl,[e("div",{class:"hidden",onClick:S[0]||(S[0]=N=>i())}),e("div",{class:"hidden",onClick:S[1]||(S[1]=N=>b())}),e("div",Ol,[e("div",Vl,a(m.value.info.name),1),e("div",Nl,a(m.value.info.description),1),e("div",null,[e("b",null,a(y.$t("private"))+":",1),Dl,e("span",ql,a(m.value.info.is_public?y.$t("no"):y.$t("yes")),1)]),e("div",null,[e("b",null,a(y.$t("createdAt")),1),B(" "+a(y.formatDate(m.value.info.created_at)),1)])]),C(e("div",null,[(t(),D(_e,null,[C(c(ke,{"section-class":"work-grid",works:m.value.list,view:r,"manage-mode":u.manageMode,onFeedManageList:_},null,8,["works","manage-mode"]),[[A,!m.value.empty]])],1024)),C(e("div",{class:"primary-button",onClick:S[2]||(S[2]=N=>I())},a(y.$t("loadMore")),513),[[A,m.value.loadMore]])],512),[[A,!p.value]]),c(oe,{loading:p.value,empty:m.value.empty,error:!1,fetch:l},null,8,["loading","empty"]),p.value?n("",!0):(t(),s("div",{key:0,id:L.value+"-modal",class:"modal work-view"},[c(be,{ref_key:"collectionModalViewRef",ref:R,section:L.value},null,8,["section"])],8,Hl)),C(c(re,{id:"item-removed-alert",text:y.$t("collections.itemRemoved")},null,8,["text"]),[[A,E.value]])]))}},Wl=Z(Gl,[["__scopeId","data-v-4a542a64"]]),Jl={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Kl={class:"title"},Ql=["placeholder"],Xl=["placeholder"],Yl=["for"],Zl=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),es={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},ts=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),os=[ts],ls={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},ss=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),as=[ss],ns={class:"ml-2"},is={class:"flex flex-row gap-2 justify-end mt-2"},rs={type:"submit",class:"primary-button"},us={__name:"EditForm",props:{collectionId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(u,{expose:P,emit:x}){const d=u,{t:F}=pe(),{oApiConfiguration:w,fetchOptions:$}=Q(),k=de(w,$()),p=h(!0),m=async o=>{if(o){z(),p.value=!0;const[_,E]=await k.getInfo(o);if(!E){const U=_.data;i.value.id=o,i.value.name=U.name,i.value.description=U.description,i.value.isPublic=!!U.is_public,p.value=!1}}},l="edit-collection-form",i=h({id:0,name:"",description:"",isPublic:!1}),I=async()=>{ge().validate(l,F);const[o,_]=await k.update({id:i.value.id,name:i.value.name,description:i.value.description,isPublic:i.value.isPublic?1:0});_||(X().closeModal(d.modalId),x("updated",i.value),z())},z=()=>{i.value={id:0,name:"",description:"",isPublic:0}};return P({fetch:m}),(o,_)=>(t(),s("div",null,[e("div",{class:"hidden",onClick:_[0]||(_[0]=E=>m(0))}),e("div",Jl,[e("div",null,[e("span",Kl,a(o.$t("collections.edit.form.title")),1),p.value?n("",!0):(t(),s("form",{key:0,id:l,class:"mt-2",onSubmit:_[5]||(_[5]=q(E=>I(),["prevent"]))},[e("n-validate",null,[C(e("input",{"onUpdate:modelValue":_[1]||(_[1]=E=>i.value.name=E),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:o.$t("title")},null,8,Ql),[[ee,i.value.name]])]),C(e("textarea",{"onUpdate:modelValue":_[2]||(_[2]=E=>i.value.description=E),class:"form-input theme-color-secondary",placeholder:o.$t("description"),"data-gramm":"false"},null,8,Xl),[[ee,i.value.description]]),e("label",{for:i.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:_[3]||(_[3]=E=>i.value.isPublic=!i.value.isPublic)},[Zl,i.value.isPublic?(t(),s("span",es,os)):n("",!0),i.value.isPublic?n("",!0):(t(),s("span",ls,as))]),e("span",ns,a(o.$t("private")),1)],8,Yl),e("div",is,[e("button",{class:"cancel-button",onClick:_[4]||(_[4]=q(E=>o.closeModal(u.modalId),["prevent"]))},a(o.$t("cancel")),1),e("button",rs,a(o.$t("save")),1)])],32))])])]))}},xe=u=>(fe("data-v-a484fb7b"),u=u(),he(),u),ds={class:"mb-2"},cs={key:0},ms=xe(()=>e("img",{src:Ae,class:"rounded"},null,-1)),vs=[ms],ps={key:1},fs={class:"relative text-center"},hs={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},ws={class:"overflow-hidden rounded-md"},bs=["src"],gs={key:2,class:"imgrid"},_s={class:"relative text-center"},ks={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},ys={class:"overflow-hidden rounded-md"},$s=["src"],xs=xe(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),Ms=xe(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),Cs={key:3,class:"imgrid"},Is={class:"relative text-center"},Es={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Ls={class:"overflow-hidden rounded-md"},As=["src"],Ps={key:4,class:"imgrid"},Fs={class:"relative text-center"},Ss={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},Ts={class:"overflow-hidden rounded-md"},js=["src"],Rs={key:5,class:"imgrid"},Us={key:0,class:"relative text-center"},Bs={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},zs={class:"overflow-hidden rounded-md"},Os=["src"],Vs={key:1,class:"relative text-center"},Ns={class:"absolute top-1/2 left-1/2 z-10 text-lg font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 md:text-xl lg:text-3xl"},Ds={class:"overflow-hidden rounded-md"},qs=["src"],Hs={__name:"ArtworkThumbnail",props:{collection:{type:Object,default:()=>{}}},setup(u){const P=te(),x={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(d,F)=>(t(),s("div",ds,[!u.collection.collection_has_artworks||u.collection._count.collection_has_artworks===0?(t(),s("div",cs,vs)):n("",!0),u.collection.collection_has_artworks&&u.collection._count.collection_has_artworks===1?(t(),s("div",ps,[e("div",fs,[d.applyExplicitFilter(g(P),u.collection.collection_has_artworks[0].artworks.is_explicit)?(t(),s("span",hs,a(d.$t("explicitContent")),1)):n("",!0),e("div",ws,[u.collection.collection_has_artworks&&u.collection._count.collection_has_artworks===1?(t(),s("img",{key:0,src:d.artworkThumb(u.collection.collection_has_artworks[0].artworks.artwork_assets[0].bucket,u.collection.collection_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:j(["object-cover object-top rounded",{"blur-sm brightness-50":d.applyExplicitFilter(g(P),u.collection.collection_has_artworks[0].artworks.is_explicit)}]),style:{"aspect-ratio":"1/1"},onError:F[0]||(F[0]=(...w)=>d.imageLoadError&&d.imageLoadError(...w))},null,42,bs)):n("",!0)])])])):n("",!0),u.collection.collection_has_artworks&&u.collection._count.collection_has_artworks===2?(t(),s("div",gs,[(t(!0),s(J,null,K(u.collection.collection_has_artworks,(w,$)=>(t(),s("div",{key:$,class:j(x[2][$])},[e("div",_s,[d.applyExplicitFilter(g(P),w.artworks.is_explicit)?(t(),s("span",ks,a(d.$t("explicitContent")),1)):n("",!0),e("div",ys,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":d.applyExplicitFilter(g(P),w.artworks.is_explicit)}]),src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:F[1]||(F[1]=(...k)=>d.imageLoadError&&d.imageLoadError(...k))},null,42,$s)])])],2))),128)),xs,Ms])):n("",!0),u.collection.collection_has_artworks&&u.collection._count.collection_has_artworks===3?(t(),s("div",Cs,[(t(!0),s(J,null,K(u.collection.collection_has_artworks,(w,$)=>(t(),s("div",{key:$,class:j(x[3][$])},[e("div",Is,[d.applyExplicitFilter(g(P),w.artworks.is_explicit)?(t(),s("span",Es,a(d.$t("explicitContent")),1)):n("",!0),e("div",Ls,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":d.applyExplicitFilter(g(P),w.artworks.is_explicit)}]),src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:F[2]||(F[2]=(...k)=>d.imageLoadError&&d.imageLoadError(...k))},null,42,As)])])],2))),128))])):n("",!0),u.collection.collection_has_artworks&&u.collection._count.collection_has_artworks===4?(t(),s("div",Ps,[(t(!0),s(J,null,K(u.collection.collection_has_artworks,(w,$)=>(t(),s("div",{key:$},[e("div",Fs,[d.applyExplicitFilter(g(P),w.artworks.is_explicit)?(t(),s("span",Ss,a(d.$t("explicitContent")),1)):n("",!0),e("div",Ts,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":d.applyExplicitFilter(g(P),w.artworks.is_explicit)}]),src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:F[3]||(F[3]=(...k)=>d.imageLoadError&&d.imageLoadError(...k))},null,42,js)])])]))),128))])):n("",!0),u.collection.collection_has_artworks&&u.collection._count.collection_has_artworks>4?(t(),s("div",Rs,[(t(!0),s(J,null,K(u.collection.collection_has_artworks,(w,$)=>(t(),s("div",{key:$},[$<3?(t(),s("div",Us,[d.applyExplicitFilter(g(P),w.artworks.is_explicit)?(t(),s("span",Bs,a(d.$t("explicitContent")),1)):n("",!0),e("div",zs,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":d.applyExplicitFilter(g(P),w.artworks.is_explicit)}]),src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:F[4]||(F[4]=(...k)=>d.imageLoadError&&d.imageLoadError(...k))},null,42,Os)])])):(t(),s("div",Vs,[e("span",Ns,"+"+a(u.collection._count.collection_has_artworks-4),1),e("div",Ds,[e("img",{src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),class:j(["z-0 brightness-50",{"blur-sm brightness-50":d.applyExplicitFilter(g(P),w.artworks.is_explicit)}]),onError:F[5]||(F[5]=(...k)=>d.imageLoadError&&d.imageLoadError(...k))},null,42,qs)])]))]))),128))])):n("",!0)]))}},Gs=Z(Hs,[["__scopeId","data-v-a484fb7b"]]),Ws={class:"mb-2 w-full"},Js={key:0,class:"flex flex-row justify-between"},Ks={class:"flex flex-row"},Qs={key:0},Xs={key:1,class:"flex flex-row justify-between"},Ys={class:"flex flex-row"},Zs={class:"flex flex-row gap-2"},ea={class:"flex flex-row gap-2"},ta={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},oa=["onClick"],la={class:"flex flex-row pb-1 mt-4 font-bold"},sa={class:"text-xs font-normal"},aa={__name:"Collection",props:{userId:{type:Number,default:0}},setup(u){const P=u,x=te();we(()=>{I()});const{oApiConfiguration:d,fetchOptions:F}=Q(),w=de(d,F()),$=h(!0),k=h("artwork"),p=h(0),m=h([]),l=h({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),i=h({artwork:0}),I=async()=>{$.value=!0;const[T,v,f]=await w.fetchCollections({userId:P.userId,type:k.value,pagination:{page:l.value.pagination.page,perPage:l.value.pagination.page===0?l.value.pagination.firstLoad:l.value.pagination.perPage}});if(f)U();else{T.length||(l.value.manageMode=!1,_()),T.forEach(V=>{m.value.push(V)}),l.value.pagination.page+=l.value.pagination.firstLoad/l.value.pagination.perPage,l.value.showLoadMore=v;const[W]=await w.countArtworkCollections(P.userId);i.value.artwork=W}$.value=!1},z=async()=>await I(),o=h(!1),_=()=>{o.value=!0,l.value.showLoadMore=!1},E=h(!1),U=()=>{$.value=!1,E.value=!0,l.value.showLoadMore=!1},b=async()=>{$.value=!1,o.value=!1,E.value=!1,l.value.pagination.page=0,m.value=[],await I()},L=T=>{l.value.showManageButton=!0,T&&(l.value.showManageButton=!1)},R=h(!1);let r;const y=async()=>{ue().splash(r,R,"created-alert"),await b()},S=h(null),N=()=>{S.value.fetch(p.value),X().openModal("collection-edit-form-modal")},O=h(null),G=T=>{O.value.fetchInfo(),m.value.forEach(v=>{v.id===T.id&&(v.name=T.name,v.description=T.description,v.is_public=T.isPublic)})},Y=h([]),le=T=>{Y.value=T},se=()=>{O.value.removeItem()},ae=async()=>{if(p.value!==0){const[T,v]=await w.deleteCollection(p.value);T&&(p.value=0,b())}},ne=()=>{p.value=0,l.value.showManageButton=!1,l.value.manageMode=!1};return(T,v)=>(t(),s("div",null,[e("div",Ws,[p.value?n("",!0):(t(),s("div",Js,[e("div",Ks,[e("div",{class:j(["ml-0 primary-button theme-color-secondary",{"button-color text-white":k.value==="artwork"}]),onClick:v[0]||(v[0]=f=>k.value="artwork")},[B(a(T.$t("artworks.artwork"))+" ",1),e("span",{class:j(["px-1 ml-2 font-normal rounded",k.value==="artwork"?"theme-color":"button-color text-white"])},a(i.value.artwork),3)],2)]),g(x).loggedIn&&g(x).user.id===u.userId?(t(),s("div",Qs,[e("div",{class:"icon-button",onClick:v[1]||(v[1]=f=>T.openModal("collection-form-modal"))},[c(M,{name:"i-ion-add-outline"})])])):n("",!0)])),p.value?(t(),s("div",Xs,[e("div",null,[e("div",{class:"ml-0 icon-button",onClick:v[2]||(v[2]=f=>ne())},[c(M,{name:"i-ic-baseline-keyboard-arrow-left"})])]),e("div",Ys,[C(e("div",Zs,[e("button",{class:"action-button secondary-button",onClick:v[3]||(v[3]=f=>l.value.manageMode=!l.value.manageMode)},[c(M,{name:l.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),B(" "+a(l.value.manageMode?T.$t("quit"):T.$t("manage")),1)]),C(e("button",{class:j(["flex flex-row",Y.value.length>0?"danger-button":"disabled-button cursor-not-allowed"]),onClick:v[4]||(v[4]=f=>Y.value.length>0?T.openModal("item-deletion-confirm-modal"):null)},[c(M,{name:"i-akar-icons-trash-bin"}),B(" "+a(T.$t("collections.removeSelected")),1)],2),[[A,l.value.manageMode]])],512),[[A,g(x).loggedIn&&g(x).user.id===u.userId&&l.value.showManageButton]]),C(e("div",ea,[e("button",{class:"icon-button",onClick:v[5]||(v[5]=f=>N())},[c(M,{name:"i-ph-gear-six"})]),e("button",{class:"danger-button-color b-button",onClick:v[6]||(v[6]=f=>T.openModal("collection-deletion-confirm-modal"))},[c(M,{name:"i-akar-icons-trash-bin"})])],512),[[A,g(x).loggedIn&&g(x).user.id===u.userId&&!l.value.manageMode]])])])):n("",!0),C(e("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},a(T.$t("collections.manageModeActiveMessage")),513),[[A,l.value.manageMode]])]),p.value?n("",!0):(t(),s("div",ta,[(t(!0),s(J,null,K(m.value,f=>(t(),s("div",{key:f.id,class:j(["p-3 rounded-md cursor-pointer",f.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:W=>p.value=f.id},[f.type==="artwork"?(t(),D(Gs,{key:0,collection:f},null,8,["collection"])):n("",!0),e("div",la,[f.is_public?n("",!0):(t(),D(M,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),e("span",sa,a(f.name),1)])],10,oa))),128))])),l.value.showLoadMore&&!p.value?(t(),s("div",{key:1,class:"mt-4 w-full primary-button",onClick:z},a(T.$t("loadMore")),1)):n("",!0),c(oe,{loading:$.value,empty:o.value,error:E.value,fetch:I},null,8,["loading","empty","error"]),!$.value&&!p.value?(t(),D(Bl,{key:2,id:"collection-form-modal","modal-id":"collection-form-modal",category:k.value,class:"modal",onCreated:y},null,8,["category"])):n("",!0),C(c(re,{id:"created-alert",text:T.$t("collections.created")},null,8,["text"]),[[A,R.value]]),!$.value&&p.value?(t(),D(us,{key:3,id:"collection-edit-form-modal",ref_key:"collectionEditFormModalRef",ref:S,"modal-id":"collection-edit-form-modal","collection-id":p.value,class:"modal",onUpdated:G},null,8,["collection-id"])):n("",!0),c(me,{id:"collection-deletion-confirm-modal","modal-id":"collection-deletion-confirm-modal",message:"All saved items in this collection will be deleted. Do you still want to delete this collection?",class:"modal",onOnAccept:ae},null,8,["message"]),c(me,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this collection. Do you still want to remove them?",class:"modal",onOnAccept:se},null,8,["message"]),p.value&&!$.value?(t(),D(Wl,{key:4,id:p.value,ref_key:"collectionDetailRef",ref:O,"manage-mode":l.value.manageMode,type:k.value,onOnCollectionEmpty:L,onFeedManageList:le},null,8,["id","manage-mode","type"])):n("",!0)]))}},na=Z(aa,[["__scopeId","data-v-52371e9a"]]),ia={class:"text-lg font-bold"},ra={class:"grid grid-cols-1 gap-4 mt-4 w-full md:grid-cols-2 lg:grid-cols-3"},ua={class:"flex flex-row w-full"},da=["src"],ca={class:"flex flex-col justify-between p-3 w-full text-white"},ma={class:"flex flex-col"},va={class:"font-bold"},pa={class:"text-xxs"},fa={class:"flex flex-row w-full"},ha={key:0,class:"flex flex-row"},wa=["onClick"],ba=["onMouseover","onClick"],ga={__name:"FollowerList",props:{userId:{type:Number,default:0}},setup(u){const P=u,x=te(),{oApiConfiguration:d,fetchOptions:F}=Q(),w=ye(d,F());we(()=>{I()});const $=h([]),k=h(!0),p=h({page:0,perPage:12}),m=h(!1),l=h(!1),i=h(!1),I=async()=>{z(),k.value=!0;const[_,E]=await w.getFollowerList({userId:P.userId,pagination:{page:p.value.page,perPage:p.value.perPage}});E?m.value=!0:(_.followers.length||(l.value=!0),_.followers.forEach(U=>{$.value.push(U)}),p.value.page+=1,_.pagination.next_previous.next_page?i.value=!0:i.value=!1),k.value=!1},z=()=>{l.value=!1,m.value=!1},o=h(0);return(_,E)=>{const U=ve;return t(),s("div",null,[e("div",ia,a(_.$t("followers")),1),e("div",ra,[(t(!0),s(J,null,K($.value,(b,L)=>(t(),D(U,{key:b.id,to:"/profile/"+b.username,class:"flex object-cover flex-row rounded-md shadow-lg cursor-pointer theme-color-secondary hover:shadow-xl",style:Ee(b.cover_bucket&&b.cover_filename?"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+_.avatarCoverUrl(b.cover_bucket,b.cover_filename)+");background-size:cover;":"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+g(Ce)+");background-size:cover;")},{default:H(()=>[e("div",ua,[e("img",{src:_.avatarCoverUrl(b.avatar_bucket,b.avatar_filename),class:"avatar",onError:E[0]||(E[0]=(...R)=>_.imageLoadError&&_.imageLoadError(...R))},null,40,da),e("div",ca,[e("div",ma,[e("span",va,a(b.name),1),e("span",pa,a(b.pen_name),1)]),e("div",fa,[g(x).loggedIn&&b.id!==g(x).user.id?(t(),s("div",ha,[C(e("div",{class:"flex flex-row",onClick:q(R=>_.followUser(L,b.id),["prevent"])},[c(M,{name:"i-ri-user-add-fill",class:"text-gray-300 hover:text-white"})],8,wa),[[A,!b.is_following]]),C(e("div",{class:"flex flex-row",onMouseover:R=>o.value=b.id,onMouseout:E[1]||(E[1]=R=>o.value=0),onClick:q(R=>_.unfollowUser(L,b.id),["prevent"])},[C(c(M,{name:"i-ri-user-follow-fill",class:"text-green-400"},null,512),[[A,o.value!==b.id]]),C(c(M,{name:"i-ri-user-unfollow-fill",class:"text-red-400 hover:text-red-400"},null,512),[[A,o.value&&o.value===b.id]])],40,ba),[[A,b.is_following]])])):n("",!0)])])])]),_:2},1032,["to","style"]))),128))]),C(e("div",{class:"mt-4 primary-button",onClick:E[2]||(E[2]=b=>I())},a(_.$t("loadMore")),513),[[A,i.value]]),c(oe,{loading:k.value,empty:l.value,error:m.value,fetch:I},null,8,["loading","empty","error"])])}}},_a=Z(ga,[["__scopeId","data-v-b2599f1b"]]),ka={class:"text-lg font-bold"},ya={class:"grid grid-cols-1 gap-4 mt-4 w-full md:grid-cols-2 lg:grid-cols-3"},$a={class:"flex flex-row w-full"},xa=["src"],Ma={class:"flex flex-col justify-between p-3 w-full text-white"},Ca={class:"flex flex-col"},Ia={class:"font-bold"},Ea={class:"text-xxs"},La={class:"flex flex-row w-full"},Aa={key:0,class:"flex flex-row"},Pa=["onClick"],Fa=["onMouseover","onClick"],Sa={__name:"FollowingList",props:{userId:{type:Number,default:0}},setup(u){const P=u,x=te(),{oApiConfiguration:d,fetchOptions:F}=Q(),w=ye(d,F());we(()=>{z()});const $=async()=>{k.value=[],m.value.page=0,await z()},k=h([]),p=h(!0),m=h({page:0,perPage:12}),l=h(!1),i=h(!1),I=h(!1),z=async()=>{o(),p.value=!0;const[E,U]=await w.getFollowingList({userId:P.userId,pagination:{page:m.value.page,perPage:m.value.perPage}});U?l.value=!0:(E.followings.length||(i.value=!0),E.followings.forEach(b=>{k.value.push(b)}),m.value.page+=1,E.pagination.next_previous.next_page?I.value=!0:I.value=!1),p.value=!1},o=()=>{i.value=!1,l.value=!1},_=h(0);return(E,U)=>{const b=ve;return t(),s("div",null,[e("div",ka,a(E.$t("followings")),1),e("div",ya,[(t(!0),s(J,null,K(k.value,(L,R)=>(t(),D(b,{key:L.id,to:"/profile/"+L.username,class:"flex object-cover flex-row rounded-md shadow-lg cursor-pointer theme-color-secondary hover:shadow-xl",style:Ee(L.cover_bucket&&L.cover_filename?"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+E.avatarCoverUrl(L.cover_bucket,L.cover_filename)+");background-size:cover;":"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+g(Ce)+");background-size:cover;")},{default:H(()=>[e("div",$a,[e("img",{src:E.avatarCoverUrl(L.avatar_bucket,L.avatar_filename),class:"avatar",onError:U[0]||(U[0]=(...r)=>E.imageLoadError&&E.imageLoadError(...r))},null,40,xa),e("div",Ma,[e("div",Ca,[e("span",Ia,a(L.name),1),e("span",Ea,a(L.pen_name),1)]),e("div",La,[g(x).loggedIn&&L.id!==g(x).user.id?(t(),s("div",Aa,[C(e("div",{class:"flex flex-row",onClick:q(r=>E.followUser(R,L.id),["prevent"])},[c(M,{name:"i-ri-user-add-fill",class:"text-gray-300 hover:text-white"})],8,Pa),[[A,!L.is_following]]),C(e("div",{class:"flex flex-row",onMouseover:r=>_.value=L.id,onMouseout:U[1]||(U[1]=r=>_.value=0),onClick:q(r=>E.unfollowUser(R,L.id),["prevent"])},[C(c(M,{name:"i-ri-user-follow-fill",class:"text-green-400"},null,512),[[A,_.value!==L.id]]),C(c(M,{name:"i-ri-user-unfollow-fill",class:"text-red-400 hover:text-red-400"},null,512),[[A,_.value&&_.value===L.id]])],40,Fa),[[A,L.is_following]])])):n("",!0)])])])]),_:2},1032,["to","style"]))),128))]),C(e("div",{class:"primary-button mt-4",onClick:U[2]||(U[2]=L=>z())},a(E.$t("loadMore")),513),[[A,I.value]]),c(oe,{loading:p.value,empty:i.value,error:l.value,fetch:$},null,8,["loading","empty","error"])])}}},Ta=Z(Sa,[["__scopeId","data-v-5ff9c687"]]),ja=u=>(fe("data-v-1ec3da97"),u=u(),he(),u),Ra=["src"],Ua={class:"px-2 pb-4 w-full rounded md:px-6 md:pb-6 theme-color"},Ba={class:"flex-row justify-between hidden-md-flex"},za={class:"mr-6 w-1/5"},Oa=["src"],Va={class:"mt-2"},Na={class:"flex flex-row"},Da={class:"flex flex-row"},qa=B("\xA0 "),Ha=B("\xA0 "),Ga={class:"hidden flex-row justify-between w-full md:flex md:mt-6"},Wa={class:"flex flex-col w-full"},Ja={class:"flex flex-row w-full"},Ka={class:"w-9/12"},Qa={class:"text-base font-semibold"},Xa=B("\xA0 "),Ya={class:"mr-2 italic"},Za={class:"flex flex-row mt-2"},en={key:0,class:"mr-1"},tn={class:"flex flex-row"},on={class:"mr-1"},ln={key:0,class:"flex flex-row"},sn=B(" he/his "),an={key:1,class:"flex flex-row"},nn=B(" she/her "),rn={class:"float-right w-3/12 text-right"},un={class:"flex flex-row shadow-md primary-button"},dn={class:"leading-4"},cn={key:1,class:"mt-4"},mn=["href"],vn=["href"],pn=["href"],fn=["href"],hn=["href"],wn={key:0,class:"mt-4"},bn=["id","innerHTML"],gn=["id"],_n={class:"flex flex-col text-center md:hidden"},kn=["src"],yn={class:"mt-4 text-base font-semibold"},$n={class:"flex flex-row justify-center mt-4"},xn={key:0,class:"flex flex-row mr-1"},Mn={class:"mr-1"},Cn={key:0,class:"flex flex-row"},In=B(" he/his "),En={key:1,class:"flex flex-row"},Ln=B(" she/her "),An={key:0,class:"mx-2 mt-4 text-center"},Pn=["id"],Fn=["id"],Sn={key:1,class:"flex flex-row justify-center mt-4"},Tn=["href"],jn=["href"],Rn=["href"],Un=["href"],Bn=["href"],zn={class:"flex flex-row justify-center w-full md:hidden"},On=B("\xA0 "),Vn=B("\xA0 "),Nn={class:"flex flex-row"},Dn={class:"flex flex-row"},qn={class:"mt-2"},Hn={class:"flex flex-row justify-center md:hidden"},Gn={class:"flex flex-row justify-between mt-2 md:mt-6"},Wn={class:"hidden flex-col lg:w-1/5 md:flex"},Jn={class:"profile-navigation_wrapper"},Kn={class:"hidden-lg-flex"},Qn=ja(()=>e("span",{class:"hidden-lg-flex"},null,-1)),Xn={class:"profile-navigation_wrapper"},Yn={class:"hidden-lg-flex"},Zn={class:"hidden-lg-flex"},ei={class:"profile-navigation_wrapper"},ti={class:"hidden-lg-flex"},oi={class:"hidden-lg-flex"},li={class:"w-full md:ml-6"},si={key:0},ai={class:"flex flex-row w-full"},ni={class:"flex flex-row gap-2 justify-between w-full md:justify-end"},ii={key:1},ri={key:2},ui={key:3},di={key:4},ci={__name:"Profile",props:{id:{type:Number,default:0},userLogon:{type:Boolean,default:!1}},setup(u){const P=u,x=te(),{oApiConfiguration:d,fetchOptions:F}=Q(),w=ye(d,F());ie(d,F()),de(d,F());const $=Fe(),k=Se(),{o:p}=$.query,m=h(!0),l=p!=null?h(p):h("dashboard"),i=h("artwork");je(()=>P.userLogon&&x.loggedIn?x.user.id:P.id);const I=h({manageMode:!1,showManageMode:!0}),z=v=>{l.value=v,I.value.manageMode=!1,p!=null&&k.push("/profile")},o=h({}),_=h({feed:0,artwork:0,comic:0,tutorial:0,album:0,followers:0,followings:0}),E=h(null),U=h([]),b=v=>{U.value=v},L=()=>{I.value.showManageMode=!1},R=h(null),r=()=>{X().openModal("album-selection-modal")},y=h(!1);let S;const N=()=>{ue().splash(S,y,"item-added-to-album-alert")},O=h(!1),G=h(null),Y=h("i-ri-user-follow-fill"),le=(v,f)=>{Y.value=v,G.value=f},se=async v=>{const[f,W]=await w.follow(v);W||(O.value=!0)},ae=async v=>{const[f,W]=await w.unfollow(v);W||(O.value=!1)},ne=h(!0),T=(v,f,W,V)=>{ne.value=!1,Le().readMore(v,f,W,V)};return(v,f)=>{const W=ve;return t(),D(Be,{"hide-side":!0,"with-footer":!0,"no-right-side":!0},{default:H(()=>[e("div",null,[e("img",{src:v.avatarCoverUrl(o.value.cover_bucket,o.value.cover_filename),class:"object-cover object-top w-full h-32 rounded-t md:h-52 lg:h-72 xl:h-96 unselectable",onError:f[0]||(f[0]=(...V)=>v.defaultCoverImage&&v.defaultCoverImage(...V))},null,40,Ra),g(x).loggedIn&&g(x).user.id===o.value.id?(t(),D(W,{key:0,to:"/profile/setting",class:"float-right absolute right-4 mt-2 shadow-md icon-button-primary-color flex-md-hidden"},{default:H(()=>[c(M,{name:"i-ph-gear-six"})]),_:1})):n("",!0)]),e("div",Ua,[e("div",Ba,[e("div",za,[e("img",{src:v.avatarCoverUrl(o.value.avatar_bucket,o.value.avatar_filename),class:"hidden -mt-2 w-full md:-mt-16 avatar md:flex",onError:f[1]||(f[1]=(...V)=>v.defaultCoverImage&&v.defaultCoverImage(...V))},null,40,Oa),e("div",Va,[g(x).loggedIn&&o.value.id!==g(x).user.id?(t(),s("div",{key:0,class:j(["mt-2 primary-button rounded-b-none hover:rounded-b-none",{"hover:danger-button":O.value}]),onClick:f[2]||(f[2]=V=>O.value?ae(o.value.id):se(o.value.id)),onMouseover:f[3]||(f[3]=V=>le("i-ri-user-unfollow-fill",v.$t("unfollow"))),onMouseleave:f[4]||(f[4]=V=>le("i-ri-user-follow-fill",v.$t("following")))},[C(e("div",Na,[c(M,{name:"i-ri-user-add-fill","text-size":"text-base"}),B(" "+a(v.$t("follow")),1)],512),[[A,!O.value]]),C(e("div",Da,[c(M,{name:Y.value,"text-size":"text-base"},null,8,["name"]),B(" "+a(G.value===null?v.$t("following"):G.value),1)],512),[[A,O.value]])],34)):n("",!0),e("div",{class:j(["flex-row justify-center border hidden-md-flex",o.value.id==g(x).user.id?"rounded-md":"rounded-b-md"])},[e("div",{class:"py-2 w-1/2 text-center cursor-pointer hover:text-colored",onClick:f[5]||(f[5]=V=>l.value="followerList")},[e("b",null,a(_.value.followers),1),qa,e("i",null,a(v.$t("followers").toLowerCase()),1)]),e("div",{class:"py-2 w-1/2 text-center cursor-pointer hover:text-colored",onClick:f[6]||(f[6]=V=>l.value="followingList")},[e("b",null,a(_.value.followings),1),Ha,e("i",null,a(v.$t("following").toLowerCase()),1)])],2)])]),e("div",Ga,[e("div",Wa,[e("div",Ja,[e("div",Ka,[e("div",null,[e("span",Qa,a(o.value.name),1),Xa,e("span",Ya,a(o.value.username),1)]),e("div",Za,[o.value.pen_name&&o.value.pen_name!==""?(t(),s("div",en,[e("span",tn,[c(M,{name:"i-ion-pencil-outline",class:"mr-1 text-base font-bold"}),B(" "+a(o.value.pen_name),1)])])):n("",!0),e("div",on,[o.value.gender==="m"?(t(),s("span",ln,[c(M,{name:"i-ion-male-outline",class:"mr-1 ml-2 text-base font-bold"}),sn])):n("",!0),o.value.gender==="f"?(t(),s("span",an,[c(M,{name:"i-ion-female-outline",class:"mr-1 ml-2 text-base font-bold"}),nn])):n("",!0)])])]),e("div",rn,[g(x).loggedIn&&g(x).user.id===o.value.id?(t(),D(W,{key:0,to:"/profile/setting",class:"float-right -mt-20 shadow-md"},{default:H(()=>[e("button",un,[c(M,{name:"i-ph-gear-six",class:"mr-2"}),e("span",dn,a(v.$t("profile.setting")),1)])]),_:1})):n("",!0),o.value.user_socials?(t(),s("div",cn,[o.value.user_socials.facebook?(t(),s("a",{key:0,href:"https://facebook.com/"+o.value.user_socials.facebook,target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-logo-facebook",class:"text-xl"})],8,mn)):n("",!0),o.value.user_socials.instagram?(t(),s("a",{key:1,href:"https://instagram.com/"+o.value.user_socials.instagram+"/",target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-logo-instagram",class:"text-xl"})],8,vn)):n("",!0),o.value.user_socials.twitter?(t(),s("a",{key:2,href:"https://twitter.com/"+o.value.user_socials.twitter,target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-logo-twitter",class:"text-xl"})],8,pn)):n("",!0),o.value.user_socials.youtube?(t(),s("a",{key:3,href:"https://youtube.com/channel/"+o.value.user_socials.youtube,target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-logo-youtube",class:"text-xl"})],8,fn)):n("",!0),o.value.user_socials.patreon?(t(),s("a",{key:4,href:"https://patreon.com/"+o.value.user_socials.patreon+"/",target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"heart",class:"text-xl"})],8,hn)):n("",!0)])):n("",!0)])]),e("div",null,[o.value.bio?(t(),s("p",wn,[e("div",{id:"user-bio-"+o.value.id,innerHTML:o.value.bio.length>300?`${o.value.bio.slice(0,300)}...`:o.value.bio},null,8,bn),o.value.bio.length>300?(t(),s("a",{key:0,id:"user-bio-read-more-"+o.value.id,class:"href",onClick:f[7]||(f[7]=q(V=>T(o.value.bio,o.value.id,"user-bio-read-more-","user-bio-"),["prevent"]))},a(v.$t("readMore")),9,gn)):n("",!0)])):n("",!0)])])])]),e("div",_n,[e("img",{src:v.avatarCoverUrl(o.value.avatar_bucket,o.value.avatar_filename),class:"flex mx-auto -mt-14 w-2/6 sm:-mt-16 sm:w-1/5 avatar md:hidden",onError:f[8]||(f[8]=(...V)=>v.imageLoadError&&v.imageLoadError(...V))},null,40,kn),e("div",yn,a(o.value.name),1),e("div",null,a(o.value.username),1),e("div",$n,[o.value.pen_name?(t(),s("span",xn,[c(M,{name:"i-ion-pencil-outline",class:"mr-1 text-base font-bold"}),B(" "+a(o.value.pen_name&&o.value.pen_name!==""?o.value.pen_name:"-"),1)])):n("",!0),e("div",Mn,[o.value.gender==="m"?(t(),s("span",Cn,[c(M,{name:"i-ion-male-outline",class:"mr-1 ml-2 text-base font-bold"}),In])):n("",!0),o.value.gender==="f"?(t(),s("span",En,[c(M,{name:"i-ion-female-outline",class:"mr-1 ml-2 text-base font-bold"}),Ln])):n("",!0)])]),o.value.bio?(t(),s("div",An,[e("span",{id:"mobile__user-bio-"+o.value.id},a(o.value.bio.length>150&&ne.value?`${o.value.bio.slice(0,150)}...`:o.value.bio),9,Pn),o.value.bio.length>150?(t(),s("a",{key:0,id:"mobile__user-bio-read-more-"+o.value.id,class:"href",onClick:f[9]||(f[9]=q(V=>T(o.value.bio,o.value.id,"mobile__user-bio-read-more-","mobile__user-bio-"),["prevent"]))},a(v.$t("readMore")),9,Fn)):n("",!0)])):n("",!0),o.value.user_socials?(t(),s("div",Sn,[o.value.user_socials.facebook?(t(),s("a",{key:0,href:"https://facebook.com/"+o.value.user_socials.facebook,target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-logo-facebook",class:"text-xl"})],8,Tn)):n("",!0),o.value.user_socials.instagram?(t(),s("a",{key:1,href:"https://instagram.com/"+o.value.user_socials.instagram+"/",target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-logo-instagram",class:"text-xl"})],8,jn)):n("",!0),o.value.user_socials.twitter?(t(),s("a",{key:2,href:"https://twitter.com/"+o.value.user_socials.twitter,target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-logo-twitter",class:"text-xl"})],8,Rn)):n("",!0),o.value.user_socials.youtube?(t(),s("a",{key:3,href:"https://youtube.com/channel/"+o.value.user_socials.youtube,target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-logo-youtube",class:"text-xl"})],8,Un)):n("",!0),o.value.user_socials.patreon?(t(),s("a",{key:4,href:"https://patreon.com/"+o.value.user_socials.patreon+"/",target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-heart",class:"text-xl"})],8,Bn)):n("",!0)])):n("",!0),e("div",zn,[e("div",{class:"p-2 cursor-pointer hover:text-colored",onClick:f[10]||(f[10]=V=>l.value="followerList")},[e("b",null,a(_.value.followers),1),On,e("i",null,a(v.$t("followers")),1)]),e("div",{class:"p-2 cursor-pointer hover:text-colored",onClick:f[11]||(f[11]=V=>l.value="followingList")},[e("b",null,a(_.value.followings),1),Vn,e("i",null,a(v.$t("following")),1)])]),g(x).loggedIn&&o.value.id!==g(x).user.id?(t(),s("div",{key:2,class:j(["mt-2 w-auto",O.value?"danger-button":"primary-button"]),onClick:f[12]||(f[12]=V=>O.value?ae(o.value.id):se(o.value.id))},[C(e("div",Nn,[c(M,{name:"i-ri-user-add-fill","text-size":"text-base"}),B(" "+a(v.$t("follow")),1)],512),[[A,!O.value]]),C(e("div",Dn,[c(M,{name:Y.value,"text-size":"text-base"},null,8,["name"]),B(" "+a(G.value===null?v.$t("following"):G.value),1)],512),[[A,O.value]])],2)):n("",!0)]),e("div",qn,[e("div",Hn,[e("div",{class:j(["mr-2 profile-navigation__mobile theme-color-secondary",{"button-color text-white":g(l)=="dashboard"}]),onClick:f[13]||(f[13]=V=>z("dashboard"))},[e("div",null,[C(c(M,{name:"i-ion-home-outline",class:"text-white"},null,512),[[A,g(l)=="dashboard"]]),C(c(M,{name:"i-ion-home-outline",class:"hover:text-white"},null,512),[[A,g(l)!="dashboard"]])]),e("span",null,a(v.$t("dashboard")),1)],2),e("div",{class:j(["mr-2 profile-navigation__mobile theme-color-secondary",{"button-color text-white":g(l)=="albums"}]),onClick:f[14]||(f[14]=V=>z("albums"))},[e("div",null,[C(c(M,{name:"i-ion-folder-outline",class:"text-white"},null,512),[[A,g(l)=="albums"]]),C(c(M,{name:"i-ion-folder-outline",class:"hover:text-white"},null,512),[[A,g(l)!="albums"]])]),e("span",null,a(v.$t("albums.album")),1)],2),e("div",{class:j(["profile-navigation__mobile theme-color-secondary",{"button-color text-white":g(l)=="collections"}]),onClick:f[15]||(f[15]=V=>z("collections"))},[e("div",null,[C(c(M,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[A,g(l)=="collections"]]),C(c(M,{name:"i-majesticons-bookmark-line",class:"hover:text-white"},null,512),[[A,g(l)!="collections"]])]),e("span",null,a(v.$t("collections.collection")),1)],2)]),e("div",Gn,[e("div",Wn,[e("div",{class:j(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":g(l)==="dashboard"}]),onClick:f[16]||(f[16]=V=>z("dashboard"))},[e("div",Jn,[C(c(M,{name:"i-humbleicons-dashboard",class:"text-white"},null,512),[[A,g(l)==="dashboard"]]),C(c(M,{name:"i-humbleicons-dashboard"},null,512),[[A,g(l)!=="dashboard"]]),e("label",Kn,a(v.$t("dashboard")),1)]),Qn],2),e("div",{class:j(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":g(l)==="albums"}]),onClick:f[17]||(f[17]=V=>z("albums"))},[e("div",Xn,[C(c(M,{name:"i-bx-photo-album",class:"text-white"},null,512),[[A,g(l)==="albums"]]),C(c(M,{name:"i-bx-photo-album"},null,512),[[A,g(l)!=="albums"]]),e("label",Yn,a(v.$t("albums.album")),1)]),e("span",Zn,a(_.value.album),1)],2),e("div",{class:j(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":g(l)==="collections"}]),onClick:f[18]||(f[18]=V=>z("collections"))},[e("div",ei,[C(c(M,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[A,g(l)==="collections"]]),C(c(M,{name:"i-majesticons-bookmark-line"},null,512),[[A,g(l)!=="collections"]]),e("label",ti,a(v.$t("collections.collection")),1)]),e("span",oi,a(_.value.collection),1)],2)]),e("div",li,[g(l)==="dashboard"?(t(),s("div",si,[e("div",ai,[e("div",{class:j(["flex flex-row justify-between w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":i.value==="feed"}]),onClick:f[19]||(f[19]=V=>i.value="feed")},[B(a(v.$t("feed"))+" ",1),e("span",{class:j(["px-1 ml-2 rounded",i.value==="feed"?"theme-color":"button-color text-white"])},a(_.value.feed),3)],2),e("div",{class:j(["flex flex-row justify-between mr-0 w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":i.value==="artwork"}]),onClick:f[20]||(f[20]=V=>i.value="artwork")},[B(a(v.$t("artworks.artwork"))+" ",1),e("span",{class:j(["px-1 ml-2 rounded",i.value==="artwork"?"theme-color":"button-color text-white"])},a(_.value.artwork),3)],2)]),C(e("div",ni,[e("button",{class:"w-full action-button secondary-button md:w-auto",onClick:f[21]||(f[21]=V=>I.value.manageMode=!I.value.manageMode)},[c(M,{name:I.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),B(" "+a(I.value.manageMode?v.$t("quit"):v.$t("manage")),1)]),C(e("button",{class:"w-full primary-button md:w-auto",onClick:f[22]||(f[22]=V=>r())},[c(M,{name:"i-ion-add-outline"}),B(" "+a(v.$t("albums.addToAlbum")),1)],512),[[A,I.value.manageMode]])],512),[[A,!m.value&&g(x).loggedIn&&g(x).user.id===o.value.id&&i.value==="artwork"&&I.value.showManageMode]]),c(oe,{loading:m.value},null,8,["loading"]),C(e("div",{class:"p-2 mt-2 text-black bg-yellow-200 rounded-md"},a(v.$t("profile.manageModeActiveMessage")),513),[[A,I.value.manageMode]]),e("div",null,[i.value==="feed"?(t(),D(Pt,{key:0,ref:"feedListRef",class:"mt-2","user-id":o.value.id},null,8,["user-id"])):n("",!0),!m.value&&i.value==="artwork"?(t(),D(jt,{key:1,ref_key:"artworkListRef",ref:E,"user-id":o.value.id,"manage-mode":I.value.manageMode,onFeedSelectedItems:b,onOnEmpty:L},null,8,["user-id","manage-mode"])):n("",!0)])])):n("",!0),g(l)==="albums"?(t(),s("div",ii,[m.value?n("",!0):(t(),D(yl,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):n("",!0),g(l)==="collections"?(t(),s("div",ri,[m.value?n("",!0):(t(),D(na,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):n("",!0),g(l)==="followerList"?(t(),s("div",ui,[m.value?n("",!0):(t(),D(_a,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):n("",!0),g(l)==="followingList"?(t(),s("div",di,[m.value?n("",!0):(t(),D(Ta,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):n("",!0)])])])]),m.value?n("",!0):(t(),D(Re,{key:0,id:"album-selection-modal",ref_key:"albumSelectionModalRef",ref:R,class:"modal","work-ids":U.value,onAddedToAlbum:N},null,8,["work-ids"])),C(c(re,{id:"item-added-to-album-alert",text:v.$t("albums.itemAdded")},null,8,["text"]),[[A,y.value]])]),_:1})}}},yi=Z(ci,[["__scopeId","data-v-1ec3da97"]]);export{yi as P};
//# sourceMappingURL=Profile.5c6821f4.js.map
