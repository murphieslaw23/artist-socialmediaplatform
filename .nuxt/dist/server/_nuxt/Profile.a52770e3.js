import{c as ee,d as K,n as Ae,i as Q,_ as me,h as ve,P as Ce,k as Pe,e as Fe}from"../server.mjs";import{ref as h,openBlock as t,createElementBlock as s,Fragment as H,renderList as J,createElementVNode as e,createVNode as c,withCtx as q,createTextVNode as U,toDisplayString as a,createCommentVNode as i,withDirectives as C,withModifiers as G,vShow as P,normalizeClass as j,unref as b,createBlock as D,pushScopeId as pe,popScopeId as fe,onBeforeMount as Se,KeepAlive as _e,vModelText as Z,watch as Ie,onMounted as he,normalizeStyle as Ee,computed as je}from"vue";import"vue-router";import{M as we,W as ke,e as ne,S as ie,c as re,_ as ce,f as ue,g as Te,u as Re}from"./ModalView.784f5ea3.js";import{J as Ue,u as be,L as Be}from"./Layout.294e92ff.js";import{_ as Y,a as M,u as ze}from"./Icon.66eb61eb.js";import{u as Oe}from"./useFeed.0a870d4a.js";import{I as Me,F as Ve}from"./FeedModalView.e4cf9595.js";import{_ as te}from"./LoadingEmptyErrorMessage.02098181.js";import{u as ye}from"./useUser.bda0577f.js";const de=r=>(pe("data-v-7e34e61a"),r=r(),fe(),r),Ne={class:"mx-auto w-full md:w-2/3"},De={class:"flex flex-row mb-2 rounded-lg border-none shadow-none theme-color-secondary"},qe={class:"w-full"},Ge={key:0,class:"p-4 user-info"},We=["src"],He={class:"name"},Je=de(()=>e("br",null,null,-1)),Ke=de(()=>e("span",{class:"mx-1"},"\xB7",-1)),Qe={class:"text-xxs"},Xe={class:"px-2 md:px-4"},Ye={key:0,class:"my-2 w-full rounded-md theme-color"},Ze={key:0,class:"p-2 md:p-4 user-info"},et=["src"],tt={class:"name"},ot=de(()=>e("br",null,null,-1)),lt=de(()=>e("span",{class:"mx-1"},"\xB7",-1)),st={class:"px-2 mt-2 md:px-4"},at={class:"text-xs font-semibold"},nt=["id"],it=["id","onClick"],rt=["onClick"],ut={key:0,class:"p-2 mx-auto w-full text-center rounded-md opacity-90 theme-color"},dt={class:"mx-auto mt-2 primary-button"},ct={key:0,class:"p-2 mx-auto w-full text-center rounded-md opacity-90 theme-color"},mt={class:"mx-auto mt-2 primary-button"},vt={class:"float-right mx-4 mt-2 interactions"},pt={key:0,class:"reactions"},ft=["onClick"],ht=["onClick"],wt={class:"option dropdown"},bt={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"option-dropdown-items"},gt={class:"option-dropdown dropdown-menu"},_t={id:"option-dropdown-items",class:"w-52 toggler","aria-labelledby":"option-dropdown-buttons",role:"menu"},kt={class:"menu-wrapper"},yt={class:"mx-auto text-center"},$t={class:"mx-auto mt-10 text-center"},xt=de(()=>e("b",null,"(\u3186_\u3186)",-1)),Mt={class:"mx-auto text-center"},Ct={id:"chronological-feed-modal",class:"modal work-view"},It={id:"artwork-modal",class:"modal work-view"},Et={__name:"Feeds",props:{userId:{type:Number,default:0}},setup(r){const F=r,x=ee(),{oApiConfiguration:u,fetchOptions:S}=K(),w=Oe(u,S()),{generateArtworkThumb:y}=Ae(),k=h([]),f=h({page:0,perPage:10}),p=async({loaded:_})=>{const[A,L]=await w.getFeedByUserId({userId:F.userId,pagination:{page:f.value.page,perPage:f.value.perPage}});f.value.page+=1;for(let m=0;m<A.feeds.length;m++){const z=A.feeds[m];if(z.liked&&o.value.push(z.id),z.artworks){z.artworks.images=[],z.artworks.apply_explicit_filter=!1;for(let $=0;$<z.artworks.artwork_assets.length;$++)if($<=3){const R=await y(z.artworks.artwork_assets[$].bucket,z.artworks.artwork_assets[$].filename,"feed");z.artworks.images.push(R)}z.artworks!=null&&(!x.loggedIn&&z.artworks.is_explicit||z.artworks.is_explicit&&!x.user.user_settings.show_explicit)&&(z.artworks.apply_explicit_filter=!0)}k.value.push(z)}_(A.feeds.length,f.value.perPage)},l=h(null),n=_=>{l.value.view(_),Q().openModal("chronological-feed-modal")},I=h(null),B=(_,A,L)=>{A?(console.log("removing explicit filter.."),k.value[L].artworks.apply_explicit_filter=!1):(I.value.view(_),Q().openModal("artwork-modal"))},o=h([]),g=async _=>{const[A,L]=await w.like({feedId:_});if(A){o.value.push(_);const m=document.getElementById(`profileFeedLikeButton-${_}`);m.classList.add("animate-bounce"),setInterval(()=>{m.classList.remove("animate-bounce")},2500)}},E=async _=>{const[A,L]=await w.unlike({feedId:_});if(A){const m=o.value.indexOf(_);o.value.splice(m,1)}};return(_,A)=>{const L=me;return t(),s("div",Ne,[(t(!0),s(H,null,J(k.value,(m,z)=>(t(),s("div",{key:m.id},[e("div",De,[e("div",qe,[m.users?(t(),s("div",Ge,[c(L,{to:"/profile/"+m.users.username},{default:q(()=>[e("img",{class:"avatar",src:_.avatarCoverUrl(m.users.avatar_bucket,m.users.avatar_filename),onError:A[0]||(A[0]=(...$)=>_.imageLoadError&&_.imageLoadError(...$))},null,40,We)]),_:2},1032,["to"]),e("div",He,[c(L,{to:"/profile/"+m.users.username,class:"fullname"},{default:q(()=>[U(a(m.users.name),1)]),_:2},1032,["to"]),Je,c(L,{to:"/profile/"+m.users.username,class:"username hover:underline"},{default:q(()=>[U(" @"+a(m.users.username),1)]),_:2},1032,["to"]),Ke,e("span",Qe,a(_.formatDate(m.scheduled_post?m.scheduled_post:m.created_at,!0)),1)])])):i("",!0),e("div",Xe,[e("p",null,a(m.text),1),m.artworks?(t(),s("div",Ye,[m.artworks.users?(t(),s("div",Ze,[c(L,{to:"/profile/"+m.artworks.users.username},{default:q(()=>[e("img",{class:"avatar",src:_.avatarCoverUrl(m.artworks.users.avatar_bucket,m.artworks.users.avatar_filename),onError:A[1]||(A[1]=(...$)=>_.imageLoadError&&_.imageLoadError(...$))},null,40,et)]),_:2},1032,["to"]),e("div",tt,[c(L,{to:"/profile/"+m.artworks.users.username,class:"fullname hover:href"},{default:q(()=>[U(a(m.artworks.users.name),1)]),_:2},1032,["to"]),ot,c(L,{to:"/profile/"+m.artworks.users.username,class:"hover:underline text-xxs"},{default:q(()=>[U(" @"+a(m.artworks.users.username),1)]),_:2},1032,["to"]),lt,c(L,{to:"/a/"+m.artworks.id,class:"hover:underline text-xxs"},{default:q(()=>[U(a(_.formatDate(m.artworks.scheduled_post?m.artworks.scheduled_post:m.artworks.created_at,!0)),1)]),_:2},1032,["to"])])])):i("",!0),e("div",st,[e("span",at,a(m.artworks.title),1),C(e("p",null,[e("span",{id:"feed-description-"+m.artworks.id},a(m.artworks.description.length>300?`${m.artworks.description.slice(0,300)}...`:m.artworks.description),9,nt),m.artworks.description.length>300?(t(),s("a",{key:0,id:"feed-read-more-"+m.artworks.id,class:"href",onClick:G($=>_.readMore(m.artworks.description,m.artworks.id,"feed-read-more-","feed-description-"),["prevent"])},a(_.$t("readMore")),9,it)):i("",!0)],512),[[P,m.artworks.description]])]),e("div",null,[_.isMobile()?i("",!0):(t(),s("div",{key:0,class:j(["p-2",{"cursor-pointer":!m.artworks.apply_explicit_filter}]),onClick:G($=>B(m.artworks.id,m.artworks.apply_explicit_filter,z),["prevent"])},[e("div",{class:j(["overflow-hidden relative p-2 rounded-md",{"md:mx-2":m.artworks.apply_explicit_filter}])},[c(Me,{class:j([{"blur-3xl unclickable":m.artworks.apply_explicit_filter},m.artworks.apply_explicit_filter?"brightness-50":"brightness-100"]),work:m.artworks},null,8,["class","work"]),m.artworks.apply_explicit_filter?(t(),s("div",ut,[e("div",null,a(b(x).loggedIn?_.$t("explicitContentAlert"):_.$t("explicitContentAlertForGuest")),1),e("button",dt,a(_.$t("explicitShowMeThisContent")),1)])):i("",!0)],2)],10,rt)),_.isMobile()?(t(),D(L,{key:1,to:m.artworks.apply_explicit_filter?null:"/a/"+m.artworks.id,onClick:G($=>B(m.artworks.id,m.artworks.apply_explicit_filter,z),["prevent"]),class:"cursor-pointer"},{default:q(()=>[e("div",{class:j(["overflow-hidden relative p-2 rounded-md",{"m-2":m.artworks.apply_explicit_filter}])},[c(Me,{class:j([{"blur-3xl unclickable":m.artworks.apply_explicit_filter},m.artworks.apply_explicit_filter?"brightness-50":"brightness-100"]),work:m.artworks},null,8,["class","work"]),m.artworks.apply_explicit_filter?(t(),s("div",ct,[e("div",null,a(b(x).loggedIn?_.$t("explicitContentAlert"):_.$t("explicitContentAlertForGuest")),1),e("button",mt,a(_.$t("explicitShowMeThisContent")),1)])):i("",!0)],2)]),_:2},1032,["to","onClick"])):i("",!0)])])):i("",!0)]),e("div",vt,[b(x).loggedIn?(t(),s("div",pt,[e("span",{class:"leading-8",onClick:$=>o.value.includes(m.id)?E(m.id):g(m.id)},[C(c(M,{id:"profileFeedLikeButton-"+m.id,name:"i-ion-heart",class:"mr-1 text-red-500 hover:text-red-500"},null,8,["id"]),[[P,o.value.includes(m.id)]]),C(c(M,{name:"i-ion-heart-outline",class:"mr-1 icon-color hover:text-red-500"},null,512),[[P,!o.value.includes(m.id)]]),U(" "+a(_.thousand(m._count.feed_likes)),1)],8,ft),e("span",{class:"leading-8",onClick:G($=>n(m.id),["prevent"])},[c(M,{name:"i-mdi-comment-multiple-outline",class:"mr-1 icon-color hover:text-blue-500"}),U(" "+a(_.thousand(m._count.feed_comments)),1)],8,ht),e("div",wt,[e("button",bt,[e("span",null,[c(M,{name:"i-uit-ellipsis-v",class:"align-middle icon icon-color"})])]),e("div",gt,[e("div",_t,[e("div",kt,[c(L,{to:"/feed/"+m.id,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:q(()=>[c(M,{name:"i-fluent-arrow-enter-20-filled",class:"mr-2 text-base"}),U(" "+a(_.$t("open")),1)]),_:2},1032,["to"]),c(L,{to:"/feed/"+m.id,target:"_blank",class:"flex z-20 py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:q(()=>[c(M,{name:"i-ci-external-link",class:"mr-2 text-base"}),U(" "+a(_.$t("openInNewTab")),1)]),_:2},1032,["to"])])])])])])):i("",!0)])])])]))),128)),c(b(Ue),{load:p},{loading:q(()=>[e("div",yt,[c(M,{name:"i-line-md-loading-twotone-loop",class:"text-3xl"})])]),"no-results":q(()=>[e("div",$t,[xt,U(" "+a(_.$t("nothingToShow")),1)])]),"no-more":q(()=>[e("div",Mt,a(_.$t("youHaveReachedTheEnd")),1)]),_:1}),e("div",Ct,[c(Ve,{ref_key:"chronologicalFeedModalViewRef",ref:l,section:"chronological-feed"},null,512)]),e("div",It,[c(we,{ref_key:"artworkModalViewRef",ref:I,section:"artwork"},null,512)])])}}},Lt=Y(Et,[["__scopeId","data-v-7e34e61a"]]),At={id:"lists"},Pt=["id"],Ft={__name:"Artworks",props:{userId:{type:Number,default:0},manageMode:{type:Boolean,default:!1}},emits:["feedSelectedItems","onEmpty"],setup(r,{emit:F}){const x=r,{oApiConfiguration:u,fetchOptions:S}=K(),w=ze(u,S()),y="profile",k=h(!0);Se(()=>{f()});const f=async()=>{const[N,V]=await n();p.value=N,V.record_total<=l.value.perPage&&o(),V.record_total===0&&A()},p=h([]),l=h({perPage:24,page:0}),n=async()=>{l.value.page===0&&(k.value=!0);const[N,V,W]=await w.getUserArtworks({userId:x.userId,pagination:{page:l.value.page,perPage:l.value.perPage}});if(W)m();else return V.record_total<=l.value.perPage&&o(),V.record_total===0&&A(),l.value.page+=1,I(),[N,V]},I=()=>{k.value=!1,_.value=!1,L.value=!1},B=h(!0),o=()=>{B.value=!1},g=h({delay:!1}),E=async()=>{g.value.delay=!0;const[N,V]=await n();for(let W=0;W<N.length;W++)p.value.push(N[W]);g.value.delay=!1,dataPagination.next_previous.next_page||o(),dataPagination.next_previous.next_page&&dataPagination.current_page===g.maxLoad&&(o(),g.showDiscoveryButton=!0)},_=h(!1),A=()=>{_.value=!0,o(),F("onEmpty")},L=h(!1),m=()=>{k.value=!1,L.value=!0,o()},z=h(null),$=(N,V=!1)=>{z.value.view(N,V),Q().openModal(y+"-modal")},R=N=>{F("feedSelectedItems",N)};return(N,V)=>(t(),s("div",At,[C(e("div",null,[(t(),D(_e,null,[C(c(ke,{"section-class":"work-grid",works:p.value,view:$,"manage-mode":r.manageMode,onFeedManageList:R},null,8,["works","manage-mode"]),[[P,!_.value]])],1024)),C(e("div",{class:j(["primary-button",g.value.delay?"animate-pulse":""]),onClick:E},a(N.$t("loadMore")),3),[[P,B.value]])],512),[[P,!k.value]]),c(te,{loading:k.value,empty:_.value,error:L.value,fetch:n},null,8,["loading","empty","error"]),e("div",{id:y+"-modal",class:"modal work-view"},[C(c(we,{ref_key:"profileModalViewRef",ref:z,section:y},null,512),[[P,!k.value]])],8,Pt)]))}},St=Y(Ft,[["__scopeId","data-v-d66e8da0"]]),jt={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Tt={class:"title"},Rt=["name"],Ut=["placeholder"],Bt=["placeholder"],zt=["for"],Ot=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),Vt={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},Nt=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Dt=[Nt],qt={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Gt=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Wt=[Gt],Ht={class:"ml-2"},Jt={class:"flex flex-row gap-2 justify-end mt-2"},Kt={type:"submit",class:"primary-button"},Qt={__name:"AlbumFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(r,{emit:F}){const x=r,{oApiConfiguration:u,fetchOptions:S}=K(),w=ne(u,S()),{t:y}=ve(),k="create-album-form",f=h({title:"",description:"",isPublic:1,category:"artwork"}),p=async()=>{be().validate(k,y);try{let l=!1,n={};if(x.category){const[I,B,o]=await w.createAlbum(x.category,f.value);l=I,n=B}l&&(Q().closeModal(x.modalId),F("created",n))}catch{}};return(l,n)=>(t(),s("div",null,[e("div",jt,[e("div",null,[e("span",Tt,a(l.$t("albums.create.form.title")),1),e("form",{id:k,class:"mt-2",onSubmit:n[4]||(n[4]=G(I=>p(),["prevent"]))},[e("n-validate",{for:"title",name:l.$t("title")},[C(e("input",{"onUpdate:modelValue":n[0]||(n[0]=I=>f.value.title=I),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:l.$t("title")},null,8,Ut),[[Z,f.value.title]])],8,Rt),C(e("textarea",{"onUpdate:modelValue":n[1]||(n[1]=I=>f.value.description=I),class:"form-input theme-color-secondary",placeholder:l.$t("description"),"data-gramm":"false"},null,8,Bt),[[Z,f.value.description]]),e("label",{for:f.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:n[2]||(n[2]=I=>f.value.isPublic=!f.value.isPublic)},[Ot,f.value.isPublic?(t(),s("span",Vt,Dt)):i("",!0),f.value.isPublic?i("",!0):(t(),s("span",qt,Wt))]),e("span",Ht,a(l.$t("private")),1)],8,zt),e("div",Jt,[e("button",{class:"cancel-button",onClick:n[3]||(n[3]=G(I=>l.closeModal(r.modalId),["prevent"]))},a(l.$t("cancel")),1),e("button",Kt,a(l.$t("create")),1)])],32)])])]))}},Xt={id:"lists"},Yt={class:"p-4 mb-4 w-full rounded-md theme-color-secondary"},Zt={class:"mb-2 text-base font-bold"},eo={class:"mb-2"},to=U(),oo={class:"italic"},lo=["id"],so={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1}},emits:["onAlbumEmpty","feedManageList"],setup(r,{expose:F,emit:x}){const u=r,{oApiConfiguration:S,fetchOptions:w}=K(),y=ne(S,w()),k=h(u.id);Ie(()=>u.id,($,R)=>{k.value=$});const f=h(!0),p=h({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:24},list:[],empty:!1}),l=async()=>{f.value=!0,await n(),await I(),f.value=!1},n=async()=>{const[$,R]=await y.getInfo(k.value);p.value.info=$.data},I=async()=>{const[$,R,N]=await y.listAlbumItems({albumId:k.value,pagination:{page:p.value.pagination.page,perPage:p.value.pagination.page===0?p.value.pagination.firstLoad:p.value.pagination.perPage}});R?p.value.pagination.page===0?p.value.pagination.page=p.value.pagination.firstLoad/p.value.pagination.perPage:p.value.pagination.page+=p.value.pagination.page!==0?1:2:p.value.loadMore=!1,$!==null&&$.length?($.forEach(V=>{p.value.list.push(V.artworks)}),x("onAlbumEmpty",!1)):(p.value.empty=!0,x("onAlbumEmpty",!0))},B=()=>{p.value.loadMore=!0,p.value.pagination.page=0,p.value.list=[]},o=h([]),g=$=>{o.value=$,x("feedManageList",$)},E=h(!1);let _;const A=async()=>{const[$,R]=await y.removeItems(u.id,o.value);$&&(re().splash(_,E,"item-removed-alert"),B(),await l())},L=h("album"),m=h(null),z=($,R=!1)=>{m.value.view($,R),Q().openModal(L.value+"-modal")};return F({fetchInfo:n,removeItems:A}),($,R)=>(t(),s("div",Xt,[e("div",{class:"hidden",onClick:R[0]||(R[0]=N=>n())}),e("div",{class:"hidden",onClick:R[1]||(R[1]=N=>A())}),e("div",Yt,[e("div",Zt,a(p.value.info.name),1),e("div",eo,a(p.value.info.description),1),e("div",null,[e("b",null,a($.$t("private"))+":",1),to,e("span",oo,a(p.value.info.is_public?$.$t("no"):$.$t("yes")),1)]),e("div",null,[e("b",null,a($.$t("createdAt")),1),U(" "+a($.formatDate(p.value.info.created_at)),1)])]),C(e("div",null,[(t(),D(_e,null,[C(c(ke,{"section-class":"work-grid",works:p.value.list,view:z,"manage-mode":r.manageMode,onFeedManageList:g},null,8,["works","manage-mode"]),[[P,!p.value.empty]])],1024)),C(e("div",{class:"primary-button",onClick:R[2]||(R[2]=N=>I())},a($.$t("loadMore")),513),[[P,p.value.loadMore]])],512),[[P,!f.value]]),c(te,{loading:f.value,empty:p.value.empty,error:!1,fetch:l},null,8,["loading","empty"]),f.value?i("",!0):(t(),s("div",{key:0,id:L.value+"-modal",class:"modal work-view"},[c(we,{ref_key:"albumModalViewRef",ref:m,section:L.value},null,8,["section"])],8,lo)),C(c(ie,{id:"item-removed-alert",text:$.$t("albums.itemRemoved")},null,8,["text"]),[[P,E.value]])]))}},ao=Y(so,[["__scopeId","data-v-cfab43ea"]]),no={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},io={class:"title"},ro=["name"],uo=["placeholder"],co=["placeholder"],mo=["for"],vo=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),po={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},fo=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),ho=[fo],wo={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},bo=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),go=[bo],_o={class:"ml-2"},ko={class:"flex flex-row gap-2 justify-end mt-2"},yo={type:"submit",class:"primary-button"},$o={__name:"EditForm",props:{albumId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(r,{expose:F,emit:x}){const u=r,{oApiConfiguration:S,fetchOptions:w}=K(),y=ne(S,w()),{t:k}=ve(),f=h(!0),p=async o=>{if(o){B(),f.value=!0;const[g,E]=await y.getInfo(o),_=g.data;n.value.id=o,n.value.name=_.name,n.value.description=_.description,n.value.isPublic=!!_.is_public,f.value=!1}},l="update-album-form",n=h({id:0,name:"",description:"",isPublic:!1}),I=async()=>{be().validate(l,k);const[o,g]=await y.update({id:n.value.id,name:n.value.name,description:n.value.description,isPublic:n.value.isPublic?1:0});g||(Q().closeModal(u.modalId),x("updated",n.value),B())},B=()=>{n.value={id:0,name:"",description:"",isPublic:0}};return F({fetch:p}),(o,g)=>(t(),s("div",null,[e("div",no,[e("div",null,[e("span",io,a(o.$t("albums.edit.form.title")),1),f.value?i("",!0):(t(),s("form",{key:0,id:l,class:"mt-2",onSubmit:g[4]||(g[4]=G(E=>I(),["prevent"]))},[e("n-validate",{for:"title",name:o.$t("title")},[C(e("input",{"onUpdate:modelValue":g[0]||(g[0]=E=>n.value.name=E),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:o.$t("title")},null,8,uo),[[Z,n.value.name]])],8,ro),C(e("textarea",{"onUpdate:modelValue":g[1]||(g[1]=E=>n.value.description=E),class:"form-input theme-color-secondary",placeholder:o.$t("description"),"data-gramm":"false"},null,8,co),[[Z,n.value.description]]),e("label",{for:n.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:g[2]||(g[2]=E=>n.value.isPublic=!n.value.isPublic)},[vo,n.value.isPublic?(t(),s("span",po,ho)):i("",!0),n.value.isPublic?i("",!0):(t(),s("span",wo,go))]),e("span",_o,a(o.$t("private")),1)],8,mo),e("div",ko,[e("button",{class:"cancel-button",onClick:g[3]||(g[3]=G(E=>o.closeModal(r.modalId),["prevent"]))},a(o.$t("cancel")),1),e("button",yo,a(o.$t("save")),1)])],32))])])]))}},Le=""+globalThis.__buildAssetsURL("folder.11be08fa.png"),$e=r=>(pe("data-v-eccd717d"),r=r(),fe(),r),xo={class:"mb-2"},Mo={key:0},Co=$e(()=>e("img",{src:Le,class:"rounded"},null,-1)),Io=[Co],Eo={key:1},Lo={class:"relative text-center"},Ao={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Po={class:"overflow-hidden rounded-md"},Fo=["src"],So={key:2,class:"imgrid"},jo={class:"relative text-center"},To={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Ro={class:"overflow-hidden rounded-md"},Uo=["src"],Bo=$e(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),zo=$e(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),Oo={key:3,class:"imgrid"},Vo={class:"relative text-center"},No={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Do={class:"overflow-hidden rounded-md"},qo=["src"],Go={key:4,class:"imgrid"},Wo={class:"relative text-center"},Ho={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},Jo={class:"overflow-hidden rounded-md"},Ko=["src"],Qo={key:5,class:"imgrid"},Xo={key:0,class:"relative text-center"},Yo={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},Zo={class:"overflow-hidden rounded-md"},el=["src"],tl={key:1,class:"relative text-center"},ol={class:"absolute top-1/2 left-1/2 z-10 text-lg font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 md:text-xl lg:text-3xl"},ll={class:"overflow-hidden rounded-md"},sl=["src"],al={__name:"ArtworkThumbnail",props:{album:{type:Object,default:()=>{}}},setup(r){const F=ee(),x={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(u,S)=>(t(),s("div",xo,[!r.album.album_has_artworks||r.album._count.album_has_artworks===0?(t(),s("div",Mo,Io)):i("",!0),r.album.album_has_artworks&&r.album._count.album_has_artworks===1?(t(),s("div",Eo,[e("div",Lo,[u.applyExplicitFilter(b(F),r.album.album_has_artworks[0].artworks.is_explicit)?(t(),s("span",Ao,a(u.$t("explicitContent")),1)):i("",!0),e("div",Po,[r.album.album_has_artworks&&r.album._count.album_has_artworks===1?(t(),s("img",{key:0,src:u.artworkThumb(r.album.album_has_artworks[0].artworks.artwork_assets[0].bucket,r.album.album_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:j(["object-cover object-top rounded",{"blur-sm brightness-50":u.applyExplicitFilter(b(F),r.album.album_has_artworks[0].artworks.is_explicit)}]),style:{"aspect-ratio":"1/1"},onError:S[0]||(S[0]=(...w)=>u.imageLoadError&&u.imageLoadError(...w))},null,42,Fo)):i("",!0)])])])):i("",!0),r.album.album_has_artworks&&r.album._count.album_has_artworks===2?(t(),s("div",So,[(t(!0),s(H,null,J(r.album.album_has_artworks,(w,y)=>(t(),s("div",{key:y,class:j(x[2][y])},[e("div",jo,[u.applyExplicitFilter(b(F),w.artworks.is_explicit)?(t(),s("span",To,a(u.$t("explicitContent")),1)):i("",!0),e("div",Ro,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":u.applyExplicitFilter(b(F),w.artworks.is_explicit)}]),src:u.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:S[1]||(S[1]=(...k)=>u.imageLoadError&&u.imageLoadError(...k))},null,42,Uo)])])],2))),128)),Bo,zo])):i("",!0),r.album.album_has_artworks&&r.album._count.album_has_artworks===3?(t(),s("div",Oo,[(t(!0),s(H,null,J(r.album.album_has_artworks,(w,y)=>(t(),s("div",{key:y,class:j(x[3][y])},[e("div",Vo,[u.applyExplicitFilter(b(F),w.artworks.is_explicit)?(t(),s("span",No,a(u.$t("explicitContent")),1)):i("",!0),e("div",Do,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":u.applyExplicitFilter(b(F),w.artworks.is_explicit)}]),src:u.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:S[2]||(S[2]=(...k)=>u.imageLoadError&&u.imageLoadError(...k))},null,42,qo)])])],2))),128))])):i("",!0),r.album.album_has_artworks&&r.album._count.album_has_artworks===4?(t(),s("div",Go,[(t(!0),s(H,null,J(r.album.album_has_artworks,(w,y)=>(t(),s("div",{key:y},[e("div",Wo,[u.applyExplicitFilter(b(F),w.artworks.is_explicit)?(t(),s("span",Ho,a(u.$t("explicitContent")),1)):i("",!0),e("div",Jo,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":u.applyExplicitFilter(b(F),w.artworks.is_explicit)}]),src:u.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:S[3]||(S[3]=(...k)=>u.imageLoadError&&u.imageLoadError(...k))},null,42,Ko)])])]))),128))])):i("",!0),r.album.album_has_artworks&&r.album._count.album_has_artworks>4?(t(),s("div",Qo,[(t(!0),s(H,null,J(r.album.album_has_artworks,(w,y)=>(t(),s("div",{key:y},[y<3?(t(),s("div",Xo,[u.applyExplicitFilter(b(F),w.artworks.is_explicit)?(t(),s("span",Yo,a(u.$t("explicitContent")),1)):i("",!0),e("div",Zo,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":u.applyExplicitFilter(b(F),w.artworks.is_explicit)}]),src:u.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:S[4]||(S[4]=(...k)=>u.imageLoadError&&u.imageLoadError(...k))},null,42,el)])])):(t(),s("div",tl,[e("span",ol,"+"+a(r.album._count.album_has_artworks-4),1),e("div",ll,[e("img",{src:u.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),class:j(["z-0 brightness-50",{"blur-sm brightness-50":u.applyExplicitFilter(b(F),w.artworks.is_explicit)}]),onError:S[5]||(S[5]=(...k)=>u.imageLoadError&&u.imageLoadError(...k))},null,42,sl)])]))]))),128))])):i("",!0)]))}},nl=Y(al,[["__scopeId","data-v-eccd717d"]]),il={class:"mb-2 w-full"},rl={key:0,class:"flex flex-row justify-between"},ul={class:"flex flex-row"},dl={key:0},cl={key:1,class:"flex flex-row justify-between"},ml={class:"flex flex-row"},vl={class:"flex flex-row gap-2"},pl={class:"flex flex-row gap-2"},fl={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},hl=["onClick"],wl={class:"flex flex-row pb-1 mt-4 font-bold"},bl={class:"text-xs font-normal"},gl={__name:"Album",props:{userId:{type:Number,default:0}},setup(r){const F=r,x=ee(),{oApiConfiguration:u,fetchOptions:S}=K(),w=ne(u,S());he(()=>{I()});const y=h(!0),k=h("artwork"),f=h(0),p=h([]),l=h({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),n=h({artwork:0}),I=async()=>{y.value=!0;const[v,d,T]=await w.fetchAlbums(F.userId,k.value,l.value.pagination.page===0?l.value.pagination.firstLoad:l.value.pagination.perPage,l.value.pagination.page);if(T)_();else{v.length||(l.value.manageMode=!1,g()),v.forEach(ge=>{p.value.push(ge)}),l.value.pagination.page+=l.value.pagination.firstLoad/l.value.pagination.perPage,l.value.showLoadMore=d;const[O]=await w.countArtworkAlbums(F.userId);n.value.artwork=O}y.value=!1},B=async()=>await I(),o=h(!1),g=()=>{o.value=!0,l.value.showLoadMore=!1},E=h(!1),_=()=>{y.value=!1,E.value=!0,l.value.showLoadMore=!1},A=async()=>{y.value=!1,o.value=!1,E.value=!1,l.value.pagination.page=0,p.value=[],await I()},L=h(!1);let m;const z=async()=>{re().splash(m,L,"created-alert"),await A()},$=h(null),R=()=>{$.value.fetch(f.value),Q().openModal("album-edit-form-modal")},N=h(null),V=v=>{N.value.fetchInfo(),p.value.forEach(d=>{d.id===v.id&&(d.name=v.name,d.description=v.description,d.is_public=v.isPublic)})},W=()=>{N.value.removeItems()},X=h([]),oe=v=>{X.value=v},le=async()=>{if(f.value!==0){const[v,d]=await w.deleteAlbum(f.value);v&&(f.value=0,A())}},se=v=>{l.value.showManageButton=!v,l.value.manageMode=!1},ae=()=>{f.value=0,l.value.showManageButton=!1,l.value.manageMode=!1};return(v,d)=>(t(),s("div",null,[e("div",il,[f.value?i("",!0):(t(),s("div",rl,[e("div",ul,[e("div",{class:j(["ml-0 primary-button theme-color-secondary",{"button-color text-white":k.value==="artwork"}]),onClick:d[0]||(d[0]=T=>k.value="artwork")},[U(a(v.$t("artworks.artwork"))+" ",1),e("span",{class:j(["px-1 ml-2 font-normal rounded",k.value==="artwork"?"theme-color":"button-color text-white"])},a(n.value.artwork),3)],2)]),b(x).loggedIn&&b(x).user.id===r.userId?(t(),s("div",dl,[e("div",{class:"icon-button",onClick:d[1]||(d[1]=T=>v.openModal("album-form-modal"))},[c(M,{name:"i-ion-add-outline"})])])):i("",!0)])),f.value?(t(),s("div",cl,[e("div",null,[e("div",{class:"ml-0 icon-button",onClick:d[2]||(d[2]=T=>ae())},[c(M,{name:"i-ic-baseline-keyboard-arrow-left"})])]),e("div",ml,[C(e("div",vl,[e("button",{class:"action-button secondary-button",onClick:d[3]||(d[3]=T=>l.value.manageMode=!l.value.manageMode)},[c(M,{name:l.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),U(" "+a(l.value.manageMode?v.$t("quit"):v.$t("manage")),1)]),C(e("button",{class:j(["flex flex-row",X.value.length>0?"danger-button":"disabled-button cursor-not-allowed"]),onClick:d[4]||(d[4]=T=>X.value.length>0?v.openModal("item-deletion-confirm-modal"):null)},[c(M,{name:"i-akar-icons-trash-bin"}),U(" "+a(v.$t("albums.removeSelected")),1)],2),[[P,l.value.manageMode]])],512),[[P,b(x).loggedIn&&b(x).user.id===r.userId&&l.value.showManageButton]]),C(e("div",pl,[e("button",{class:"icon-button",onClick:d[5]||(d[5]=T=>R())},[c(M,{name:"i-ph-gear-six"})]),e("button",{class:"danger-button-color b-button",onClick:d[6]||(d[6]=T=>v.openModal("album-deletion-confirm-modal"))},[c(M,{name:"i-akar-icons-trash-bin"})])],512),[[P,b(x).loggedIn&&b(x).user.id===r.userId&&!l.value.manageMode]])])])):i("",!0),C(e("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},a(v.$t("albums.manageModeActiveMessage")),513),[[P,l.value.manageMode]])]),f.value?i("",!0):(t(),s("div",fl,[(t(!0),s(H,null,J(p.value,T=>(t(),s("div",{key:T.id,class:j(["p-3 rounded-md cursor-pointer",T.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:O=>f.value=T.id},[T.type==="artwork"?(t(),D(nl,{key:0,album:T},null,8,["album"])):i("",!0),e("div",wl,[T.is_public?i("",!0):(t(),D(M,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),e("span",bl,a(T.name),1)])],10,hl))),128))])),l.value.showLoadMore&&!f.value?(t(),s("div",{key:1,class:"mt-4 w-full primary-button",onClick:B},a(v.$t("loadMore")),1)):i("",!0),c(te,{loading:y.value,empty:o.value,error:E.value,fetch:I},null,8,["loading","empty","error"]),!y.value&&!f.value?(t(),D(Qt,{key:2,id:"album-form-modal","modal-id":"album-form-modal",category:k.value,class:"modal",onCreated:z},null,8,["category"])):i("",!0),C(c(ie,{id:"created-alert",text:v.$t("albums.created")},null,8,["text"]),[[P,L.value]]),!y.value&&f.value?(t(),D($o,{key:3,id:"album-edit-form-modal",ref_key:"albumEditFormModalRef",ref:$,"modal-id":"album-edit-form-modal","album-id":f.value,class:"modal",onUpdated:V},null,8,["album-id"])):i("",!0),c(ce,{id:"album-deletion-confirm-modal","modal-id":"album-deletion-confirm-modal",message:"All saved items in this album will be deleted. Do you still want to delete this album?",class:"modal",onOnAccept:le},null,8,["message"]),c(ce,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this album. Do you still want to remove them?",class:"modal",onOnAccept:W},null,8,["message"]),f.value&&!y.value?(t(),D(ao,{key:4,id:f.value,ref_key:"albumDetailRef",ref:N,"manage-mode":l.value.manageMode,onOnAlbumEmpty:se,onFeedManageList:oe},null,8,["id","manage-mode"])):i("",!0)]))}},_l=Y(gl,[["__scopeId","data-v-7bee1255"]]),kl={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},yl={class:"title"},$l=["placeholder"],xl=["placeholder"],Ml=["for"],Cl=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),Il={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},El=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Ll=[El],Al={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Pl=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Fl=[Pl],Sl={class:"ml-2"},jl={class:"flex flex-row gap-2 justify-end mt-2"},Tl={type:"submit",class:"primary-button"},Rl={__name:"CollectionFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(r,{emit:F}){const x=r,{oApiConfiguration:u,fetchOptions:S}=K(),w=ue(u,S()),{t:y}=ve(),k="create-collection-form",f=h({title:"",description:"",isPublic:1,category:"artwork"}),p=async()=>{be().validate(k,y);try{let l=!1,n={};if(x.category){const[I,B,o]=await w.createCollection(x.category,f.value);o||(l=I,n=B)}l&&(Q().closeModal(x.modalId),F("created",n))}catch{}};return(l,n)=>(t(),s("div",null,[e("div",kl,[e("div",null,[e("span",yl,a(l.$t("collections.create.form.title")),1),e("form",{id:k,class:"mt-2",onSubmit:n[4]||(n[4]=G(I=>p(),["prevent"]))},[e("n-validate",null,[C(e("input",{"onUpdate:modelValue":n[0]||(n[0]=I=>f.value.title=I),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:l.$t("title")},null,8,$l),[[Z,f.value.title]])]),C(e("textarea",{"onUpdate:modelValue":n[1]||(n[1]=I=>f.value.description=I),class:"form-input theme-color-secondary",placeholder:l.$t("description"),"data-gramm":"false"},null,8,xl),[[Z,f.value.description]]),e("label",{for:f.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:n[2]||(n[2]=I=>f.value.isPublic=!f.value.isPublic)},[Cl,f.value.isPublic?(t(),s("span",Il,Ll)):i("",!0),f.value.isPublic?i("",!0):(t(),s("span",Al,Fl))]),e("span",Sl,a(l.$t("private")),1)],8,Ml),e("div",jl,[e("button",{class:"cancel-button",onClick:n[3]||(n[3]=G(I=>l.closeModal(r.modalId),["prevent"]))},a(l.$t("cancel")),1),e("button",Tl,a(l.$t("create")),1)])],32)])])]))}},Ul={id:"lists"},Bl={class:"p-4 mb-4 w-full rounded-md theme-color-secondary"},zl={class:"text-base font-bold mb-2"},Ol={class:"mb-2"},Vl=U(),Nl={class:"italic"},Dl=["id"],ql={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1},type:{type:String,default:""}},emits:["onCollectionEmpty","feedManageList"],setup(r,{expose:F,emit:x}){const u=r,{oApiConfiguration:S,fetchOptions:w}=K(),y=ue(S,w()),k=h(u.id);Ie(()=>u.id,($,R)=>{k.value=$});const f=h(!0),p=h({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:24},list:[],empty:!1}),l=async()=>{f.value=!0,await n(),await I(),f.value=!1},n=async()=>{const[$,R]=await y.getInfo(k.value);p.value.info=$.data},I=async()=>{const[$,R,N]=await y.listCollectionItems({collectionId:k.value,pagination:{page:p.value.pagination.page,perPage:p.value.pagination.page===0?p.value.pagination.firstLoad:p.value.pagination.perPage}});R?p.value.pagination.page===0?p.value.pagination.page=p.value.pagination.firstLoad/p.value.pagination.perPage:p.value.pagination.page+=p.value.pagination.page!==0?1:2:p.value.loadMore=!1,$!==null&&$.length?($.forEach(V=>{p.value.list.push(V.artworks)}),x("onCollectionEmpty",!1)):(p.value.empty=!0,x("onCollectionEmpty",!0))},B=()=>{p.value.loadMore=!0,p.value.pagination.page=0,p.value.list=[]},o=h([]),g=$=>{o.value=$,x("feedManageList",$)},E=h(!1);let _;const A=async()=>{const[$,R]=await y.removeItem({collectionId:u.id,type:u.type,workId:o.value});R||(re().splash(_,E,"item-removed-alert"),B(),await l(),x("feedManageList",[]))},L=h("collection"),m=h(null),z=($,R=!1)=>{m.value.view($,R),Q().openModal(L.value+"-modal")};return F({fetchInfo:n,removeItem:A}),($,R)=>(t(),s("div",Ul,[e("div",{class:"hidden",onClick:R[0]||(R[0]=N=>n())}),e("div",{class:"hidden",onClick:R[1]||(R[1]=N=>A())}),e("div",Bl,[e("div",zl,a(p.value.info.name),1),e("div",Ol,a(p.value.info.description),1),e("div",null,[e("b",null,a($.$t("private"))+":",1),Vl,e("span",Nl,a(p.value.info.is_public?$.$t("no"):$.$t("yes")),1)]),e("div",null,[e("b",null,a($.$t("createdAt")),1),U(" "+a($.formatDate(p.value.info.created_at)),1)])]),C(e("div",null,[(t(),D(_e,null,[C(c(ke,{"section-class":"work-grid",works:p.value.list,view:z,"manage-mode":r.manageMode,onFeedManageList:g},null,8,["works","manage-mode"]),[[P,!p.value.empty]])],1024)),C(e("div",{class:"primary-button",onClick:R[2]||(R[2]=N=>I())},a($.$t("loadMore")),513),[[P,p.value.loadMore]])],512),[[P,!f.value]]),c(te,{loading:f.value,empty:p.value.empty,error:!1,fetch:l},null,8,["loading","empty"]),f.value?i("",!0):(t(),s("div",{key:0,id:L.value+"-modal",class:"modal work-view"},[c(we,{ref_key:"collectionModalViewRef",ref:m,section:L.value},null,8,["section"])],8,Dl)),C(c(ie,{id:"item-removed-alert",text:$.$t("collections.itemRemoved")},null,8,["text"]),[[P,E.value]])]))}},Gl=Y(ql,[["__scopeId","data-v-4a542a64"]]),Wl={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Hl={class:"title"},Jl=["placeholder"],Kl=["placeholder"],Ql=["for"],Xl=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),Yl={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},Zl=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),es=[Zl],ts={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},os=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),ls=[os],ss={class:"ml-2"},as={class:"flex flex-row gap-2 justify-end mt-2"},ns={type:"submit",class:"primary-button"},is={__name:"EditForm",props:{collectionId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(r,{expose:F,emit:x}){const u=r,{t:S}=ve(),{oApiConfiguration:w,fetchOptions:y}=K(),k=ue(w,y()),f=h(!0),p=async o=>{if(o){B(),f.value=!0;const[g,E]=await k.getInfo(o);if(!E){const _=g.data;n.value.id=o,n.value.name=_.name,n.value.description=_.description,n.value.isPublic=!!_.is_public,f.value=!1}}},l="edit-collection-form",n=h({id:0,name:"",description:"",isPublic:!1}),I=async()=>{be().validate(l,S);const[o,g]=await k.update({id:n.value.id,name:n.value.name,description:n.value.description,isPublic:n.value.isPublic?1:0});g||(Q().closeModal(u.modalId),x("updated",n.value),B())},B=()=>{n.value={id:0,name:"",description:"",isPublic:0}};return F({fetch:p}),(o,g)=>(t(),s("div",null,[e("div",{class:"hidden",onClick:g[0]||(g[0]=E=>p(0))}),e("div",Wl,[e("div",null,[e("span",Hl,a(o.$t("collections.edit.form.title")),1),f.value?i("",!0):(t(),s("form",{key:0,id:l,class:"mt-2",onSubmit:g[5]||(g[5]=G(E=>I(),["prevent"]))},[e("n-validate",null,[C(e("input",{"onUpdate:modelValue":g[1]||(g[1]=E=>n.value.name=E),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:o.$t("title")},null,8,Jl),[[Z,n.value.name]])]),C(e("textarea",{"onUpdate:modelValue":g[2]||(g[2]=E=>n.value.description=E),class:"form-input theme-color-secondary",placeholder:o.$t("description"),"data-gramm":"false"},null,8,Kl),[[Z,n.value.description]]),e("label",{for:n.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:g[3]||(g[3]=E=>n.value.isPublic=!n.value.isPublic)},[Xl,n.value.isPublic?(t(),s("span",Yl,es)):i("",!0),n.value.isPublic?i("",!0):(t(),s("span",ts,ls))]),e("span",ss,a(o.$t("private")),1)],8,Ql),e("div",as,[e("button",{class:"cancel-button",onClick:g[4]||(g[4]=G(E=>o.closeModal(r.modalId),["prevent"]))},a(o.$t("cancel")),1),e("button",ns,a(o.$t("save")),1)])],32))])])]))}},xe=r=>(pe("data-v-a484fb7b"),r=r(),fe(),r),rs={class:"mb-2"},us={key:0},ds=xe(()=>e("img",{src:Le,class:"rounded"},null,-1)),cs=[ds],ms={key:1},vs={class:"relative text-center"},ps={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},fs={class:"overflow-hidden rounded-md"},hs=["src"],ws={key:2,class:"imgrid"},bs={class:"relative text-center"},gs={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},_s={class:"overflow-hidden rounded-md"},ks=["src"],ys=xe(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),$s=xe(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),xs={key:3,class:"imgrid"},Ms={class:"relative text-center"},Cs={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Is={class:"overflow-hidden rounded-md"},Es=["src"],Ls={key:4,class:"imgrid"},As={class:"relative text-center"},Ps={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},Fs={class:"overflow-hidden rounded-md"},Ss=["src"],js={key:5,class:"imgrid"},Ts={key:0,class:"relative text-center"},Rs={key:0,class:"absolute top-1/2 left-1/2 z-10 font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 text-tiny"},Us={class:"overflow-hidden rounded-md"},Bs=["src"],zs={key:1,class:"relative text-center"},Os={class:"absolute top-1/2 left-1/2 z-10 text-lg font-semibold text-white transform -translate-x-1/2 -translate-y-1/2 md:text-xl lg:text-3xl"},Vs={class:"overflow-hidden rounded-md"},Ns=["src"],Ds={__name:"ArtworkThumbnail",props:{collection:{type:Object,default:()=>{}}},setup(r){const F=ee(),x={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(u,S)=>(t(),s("div",rs,[!r.collection.collection_has_artworks||r.collection._count.collection_has_artworks===0?(t(),s("div",us,cs)):i("",!0),r.collection.collection_has_artworks&&r.collection._count.collection_has_artworks===1?(t(),s("div",ms,[e("div",vs,[u.applyExplicitFilter(b(F),r.collection.collection_has_artworks[0].artworks.is_explicit)?(t(),s("span",ps,a(u.$t("explicitContent")),1)):i("",!0),e("div",fs,[r.collection.collection_has_artworks&&r.collection._count.collection_has_artworks===1?(t(),s("img",{key:0,src:u.artworkThumb(r.collection.collection_has_artworks[0].artworks.artwork_assets[0].bucket,r.collection.collection_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:j(["object-cover object-top rounded",{"blur-sm brightness-50":u.applyExplicitFilter(b(F),r.collection.collection_has_artworks[0].artworks.is_explicit)}]),style:{"aspect-ratio":"1/1"},onError:S[0]||(S[0]=(...w)=>u.imageLoadError&&u.imageLoadError(...w))},null,42,hs)):i("",!0)])])])):i("",!0),r.collection.collection_has_artworks&&r.collection._count.collection_has_artworks===2?(t(),s("div",ws,[(t(!0),s(H,null,J(r.collection.collection_has_artworks,(w,y)=>(t(),s("div",{key:y,class:j(x[2][y])},[e("div",bs,[u.applyExplicitFilter(b(F),w.artworks.is_explicit)?(t(),s("span",gs,a(u.$t("explicitContent")),1)):i("",!0),e("div",_s,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":u.applyExplicitFilter(b(F),w.artworks.is_explicit)}]),src:u.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:S[1]||(S[1]=(...k)=>u.imageLoadError&&u.imageLoadError(...k))},null,42,ks)])])],2))),128)),ys,$s])):i("",!0),r.collection.collection_has_artworks&&r.collection._count.collection_has_artworks===3?(t(),s("div",xs,[(t(!0),s(H,null,J(r.collection.collection_has_artworks,(w,y)=>(t(),s("div",{key:y,class:j(x[3][y])},[e("div",Ms,[u.applyExplicitFilter(b(F),w.artworks.is_explicit)?(t(),s("span",Cs,a(u.$t("explicitContent")),1)):i("",!0),e("div",Is,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":u.applyExplicitFilter(b(F),w.artworks.is_explicit)}]),src:u.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:S[2]||(S[2]=(...k)=>u.imageLoadError&&u.imageLoadError(...k))},null,42,Es)])])],2))),128))])):i("",!0),r.collection.collection_has_artworks&&r.collection._count.collection_has_artworks===4?(t(),s("div",Ls,[(t(!0),s(H,null,J(r.collection.collection_has_artworks,(w,y)=>(t(),s("div",{key:y},[e("div",As,[u.applyExplicitFilter(b(F),w.artworks.is_explicit)?(t(),s("span",Ps,a(u.$t("explicitContent")),1)):i("",!0),e("div",Fs,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":u.applyExplicitFilter(b(F),w.artworks.is_explicit)}]),src:u.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:S[3]||(S[3]=(...k)=>u.imageLoadError&&u.imageLoadError(...k))},null,42,Ss)])])]))),128))])):i("",!0),r.collection.collection_has_artworks&&r.collection._count.collection_has_artworks>4?(t(),s("div",js,[(t(!0),s(H,null,J(r.collection.collection_has_artworks,(w,y)=>(t(),s("div",{key:y},[y<3?(t(),s("div",Ts,[u.applyExplicitFilter(b(F),w.artworks.is_explicit)?(t(),s("span",Rs,a(u.$t("explicitContent")),1)):i("",!0),e("div",Us,[e("img",{class:j(["theme-color",{"blur-sm brightness-50":u.applyExplicitFilter(b(F),w.artworks.is_explicit)}]),src:u.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:S[4]||(S[4]=(...k)=>u.imageLoadError&&u.imageLoadError(...k))},null,42,Bs)])])):(t(),s("div",zs,[e("span",Os,"+"+a(r.collection._count.collection_has_artworks-4),1),e("div",Vs,[e("img",{src:u.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),class:j(["z-0 brightness-50",{"blur-sm brightness-50":u.applyExplicitFilter(b(F),w.artworks.is_explicit)}]),onError:S[5]||(S[5]=(...k)=>u.imageLoadError&&u.imageLoadError(...k))},null,42,Ns)])]))]))),128))])):i("",!0)]))}},qs=Y(Ds,[["__scopeId","data-v-a484fb7b"]]),Gs={class:"mb-2 w-full"},Ws={key:0,class:"flex flex-row justify-between"},Hs={class:"flex flex-row"},Js={key:0},Ks={key:1,class:"flex flex-row justify-between"},Qs={class:"flex flex-row"},Xs={class:"flex flex-row gap-2"},Ys={class:"flex flex-row gap-2"},Zs={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},ea=["onClick"],ta={class:"flex flex-row pb-1 mt-4 font-bold"},oa={class:"text-xs font-normal"},la={__name:"Collection",props:{userId:{type:Number,default:0}},setup(r){const F=r,x=ee();he(()=>{I()});const{oApiConfiguration:u,fetchOptions:S}=K(),w=ue(u,S()),y=h(!0),k=h("artwork"),f=h(0),p=h([]),l=h({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),n=h({artwork:0}),I=async()=>{y.value=!0;const[v,d,T]=await w.fetchCollections({userId:F.userId,type:k.value,pagination:{page:l.value.pagination.page,perPage:l.value.pagination.page===0?l.value.pagination.firstLoad:l.value.pagination.perPage}});if(T)_();else{v.length||(l.value.manageMode=!1,g()),v.forEach(ge=>{p.value.push(ge)}),l.value.pagination.page+=l.value.pagination.firstLoad/l.value.pagination.perPage,l.value.showLoadMore=d;const[O]=await w.countArtworkCollections(F.userId);n.value.artwork=O}y.value=!1},B=async()=>await I(),o=h(!1),g=()=>{o.value=!0,l.value.showLoadMore=!1},E=h(!1),_=()=>{y.value=!1,E.value=!0,l.value.showLoadMore=!1},A=async()=>{y.value=!1,o.value=!1,E.value=!1,l.value.pagination.page=0,p.value=[],await I()},L=v=>{l.value.showManageButton=!0,v&&(l.value.showManageButton=!1)},m=h(!1);let z;const $=async()=>{re().splash(z,m,"created-alert"),await A()},R=h(null),N=()=>{R.value.fetch(f.value),Q().openModal("collection-edit-form-modal")},V=h(null),W=v=>{V.value.fetchInfo(),p.value.forEach(d=>{d.id===v.id&&(d.name=v.name,d.description=v.description,d.is_public=v.isPublic)})},X=h([]),oe=v=>{X.value=v},le=()=>{V.value.removeItem()},se=async()=>{if(f.value!==0){const[v,d]=await w.deleteCollection(f.value);v&&(f.value=0,A())}},ae=()=>{f.value=0,l.value.showManageButton=!1,l.value.manageMode=!1};return(v,d)=>(t(),s("div",null,[e("div",Gs,[f.value?i("",!0):(t(),s("div",Ws,[e("div",Hs,[e("div",{class:j(["ml-0 primary-button theme-color-secondary",{"button-color text-white":k.value==="artwork"}]),onClick:d[0]||(d[0]=T=>k.value="artwork")},[U(a(v.$t("artworks.artwork"))+" ",1),e("span",{class:j(["px-1 ml-2 font-normal rounded",k.value==="artwork"?"theme-color":"button-color text-white"])},a(n.value.artwork),3)],2)]),b(x).loggedIn&&b(x).user.id===r.userId?(t(),s("div",Js,[e("div",{class:"icon-button",onClick:d[1]||(d[1]=T=>v.openModal("collection-form-modal"))},[c(M,{name:"i-ion-add-outline"})])])):i("",!0)])),f.value?(t(),s("div",Ks,[e("div",null,[e("div",{class:"ml-0 icon-button",onClick:d[2]||(d[2]=T=>ae())},[c(M,{name:"i-ic-baseline-keyboard-arrow-left"})])]),e("div",Qs,[C(e("div",Xs,[e("button",{class:"action-button secondary-button",onClick:d[3]||(d[3]=T=>l.value.manageMode=!l.value.manageMode)},[c(M,{name:l.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),U(" "+a(l.value.manageMode?v.$t("quit"):v.$t("manage")),1)]),C(e("button",{class:j(["flex flex-row",X.value.length>0?"danger-button":"disabled-button cursor-not-allowed"]),onClick:d[4]||(d[4]=T=>X.value.length>0?v.openModal("item-deletion-confirm-modal"):null)},[c(M,{name:"i-akar-icons-trash-bin"}),U(" "+a(v.$t("collections.removeSelected")),1)],2),[[P,l.value.manageMode]])],512),[[P,b(x).loggedIn&&b(x).user.id===r.userId&&l.value.showManageButton]]),C(e("div",Ys,[e("button",{class:"icon-button",onClick:d[5]||(d[5]=T=>N())},[c(M,{name:"i-ph-gear-six"})]),e("button",{class:"danger-button-color b-button",onClick:d[6]||(d[6]=T=>v.openModal("collection-deletion-confirm-modal"))},[c(M,{name:"i-akar-icons-trash-bin"})])],512),[[P,b(x).loggedIn&&b(x).user.id===r.userId&&!l.value.manageMode]])])])):i("",!0),C(e("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},a(v.$t("collections.manageModeActiveMessage")),513),[[P,l.value.manageMode]])]),f.value?i("",!0):(t(),s("div",Zs,[(t(!0),s(H,null,J(p.value,T=>(t(),s("div",{key:T.id,class:j(["p-3 rounded-md cursor-pointer",T.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:O=>f.value=T.id},[T.type==="artwork"?(t(),D(qs,{key:0,collection:T},null,8,["collection"])):i("",!0),e("div",ta,[T.is_public?i("",!0):(t(),D(M,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),e("span",oa,a(T.name),1)])],10,ea))),128))])),l.value.showLoadMore&&!f.value?(t(),s("div",{key:1,class:"mt-4 w-full primary-button",onClick:B},a(v.$t("loadMore")),1)):i("",!0),c(te,{loading:y.value,empty:o.value,error:E.value,fetch:I},null,8,["loading","empty","error"]),!y.value&&!f.value?(t(),D(Rl,{key:2,id:"collection-form-modal","modal-id":"collection-form-modal",category:k.value,class:"modal",onCreated:$},null,8,["category"])):i("",!0),C(c(ie,{id:"created-alert",text:v.$t("collections.created")},null,8,["text"]),[[P,m.value]]),!y.value&&f.value?(t(),D(is,{key:3,id:"collection-edit-form-modal",ref_key:"collectionEditFormModalRef",ref:R,"modal-id":"collection-edit-form-modal","collection-id":f.value,class:"modal",onUpdated:W},null,8,["collection-id"])):i("",!0),c(ce,{id:"collection-deletion-confirm-modal","modal-id":"collection-deletion-confirm-modal",message:"All saved items in this collection will be deleted. Do you still want to delete this collection?",class:"modal",onOnAccept:se},null,8,["message"]),c(ce,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this collection. Do you still want to remove them?",class:"modal",onOnAccept:le},null,8,["message"]),f.value&&!y.value?(t(),D(Gl,{key:4,id:f.value,ref_key:"collectionDetailRef",ref:V,"manage-mode":l.value.manageMode,type:k.value,onOnCollectionEmpty:L,onFeedManageList:oe},null,8,["id","manage-mode","type"])):i("",!0)]))}},sa=Y(la,[["__scopeId","data-v-52371e9a"]]),aa={class:"text-lg font-bold"},na={class:"grid grid-cols-1 gap-4 mt-4 w-full md:grid-cols-2 lg:grid-cols-3"},ia={class:"flex flex-row w-full"},ra=["src"],ua={class:"flex flex-col justify-between p-3 w-full text-white"},da={class:"flex flex-col"},ca={class:"font-bold"},ma={class:"text-xxs"},va={class:"flex flex-row w-full"},pa={key:0,class:"flex flex-row"},fa=["onClick"],ha=["onMouseover","onClick"],wa={__name:"FollowerList",props:{userId:{type:Number,default:0}},setup(r){const F=r,x=ee(),{oApiConfiguration:u,fetchOptions:S}=K(),w=ye(u,S());he(()=>{I()});const y=h([]),k=h(!0),f=h({page:0,perPage:12}),p=h(!1),l=h(!1),n=h(!1),I=async()=>{B(),k.value=!0;const[g,E]=await w.getFollowerList({userId:F.userId,pagination:{page:f.value.page,perPage:f.value.perPage}});E?p.value=!0:(g.followers.length||(l.value=!0),g.followers.forEach(_=>{y.value.push(_)}),f.value.page+=1,g.pagination.next_previous.next_page?n.value=!0:n.value=!1),k.value=!1},B=()=>{l.value=!1,p.value=!1},o=h(0);return(g,E)=>{const _=me;return t(),s("div",null,[e("div",aa,a(g.$t("followers")),1),e("div",na,[(t(!0),s(H,null,J(y.value,(A,L)=>(t(),D(_,{key:A.id,to:"/profile/"+A.username,class:"flex object-cover flex-row rounded-md shadow-lg cursor-pointer theme-color-secondary hover:shadow-xl",style:Ee(A.cover_bucket&&A.cover_filename?"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+g.avatarCoverUrl(A.cover_bucket,A.cover_filename)+");background-size:cover;":"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+b(Ce)+");background-size:cover;")},{default:q(()=>[e("div",ia,[e("img",{src:g.avatarCoverUrl(A.avatar_bucket,A.avatar_filename),class:"avatar",onError:E[0]||(E[0]=(...m)=>g.imageLoadError&&g.imageLoadError(...m))},null,40,ra),e("div",ua,[e("div",da,[e("span",ca,a(A.name),1),e("span",ma,a(A.pen_name),1)]),e("div",va,[b(x).loggedIn&&A.id!==b(x).user.id?(t(),s("div",pa,[C(e("div",{class:"flex flex-row",onClick:G(m=>g.followUser(L,A.id),["prevent"])},[c(M,{name:"i-ri-user-add-fill",class:"text-gray-300 hover:text-white"})],8,fa),[[P,!A.is_following]]),C(e("div",{class:"flex flex-row",onMouseover:m=>o.value=A.id,onMouseout:E[1]||(E[1]=m=>o.value=0),onClick:G(m=>g.unfollowUser(L,A.id),["prevent"])},[C(c(M,{name:"i-ri-user-follow-fill",class:"text-green-400"},null,512),[[P,o.value!==A.id]]),C(c(M,{name:"i-ri-user-unfollow-fill",class:"text-red-400 hover:text-red-400"},null,512),[[P,o.value&&o.value===A.id]])],40,ha),[[P,A.is_following]])])):i("",!0)])])])]),_:2},1032,["to","style"]))),128))]),C(e("div",{class:"mt-4 primary-button",onClick:E[2]||(E[2]=A=>I())},a(g.$t("loadMore")),513),[[P,n.value]]),c(te,{loading:k.value,empty:l.value,error:p.value,fetch:I},null,8,["loading","empty","error"])])}}},ba=Y(wa,[["__scopeId","data-v-b2599f1b"]]),ga={class:"text-lg font-bold"},_a={class:"grid grid-cols-1 gap-4 mt-4 w-full md:grid-cols-2 lg:grid-cols-3"},ka={class:"flex flex-row w-full"},ya=["src"],$a={class:"flex flex-col justify-between p-3 w-full text-white"},xa={class:"flex flex-col"},Ma={class:"font-bold"},Ca={class:"text-xxs"},Ia={class:"flex flex-row w-full"},Ea={key:0,class:"flex flex-row"},La=["onClick"],Aa=["onMouseover","onClick"],Pa={__name:"FollowingList",props:{userId:{type:Number,default:0}},setup(r){const F=r,x=ee(),{oApiConfiguration:u,fetchOptions:S}=K(),w=ye(u,S());he(()=>{B()});const y=async()=>{k.value=[],p.value.page=0,await B()},k=h([]),f=h(!0),p=h({page:0,perPage:12}),l=h(!1),n=h(!1),I=h(!1),B=async()=>{o(),f.value=!0;const[E,_]=await w.getFollowingList({userId:F.userId,pagination:{page:p.value.page,perPage:p.value.perPage}});_?l.value=!0:(E.followings.length||(n.value=!0),E.followings.forEach(A=>{k.value.push(A)}),p.value.page+=1,E.pagination.next_previous.next_page?I.value=!0:I.value=!1),f.value=!1},o=()=>{n.value=!1,l.value=!1},g=h(0);return(E,_)=>{const A=me;return t(),s("div",null,[e("div",ga,a(E.$t("followings")),1),e("div",_a,[(t(!0),s(H,null,J(k.value,(L,m)=>(t(),D(A,{key:L.id,to:"/profile/"+L.username,class:"flex object-cover flex-row rounded-md shadow-lg cursor-pointer theme-color-secondary hover:shadow-xl",style:Ee(L.cover_bucket&&L.cover_filename?"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+E.avatarCoverUrl(L.cover_bucket,L.cover_filename)+");background-size:cover;":"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+b(Ce)+");background-size:cover;")},{default:q(()=>[e("div",ka,[e("img",{src:E.avatarCoverUrl(L.avatar_bucket,L.avatar_filename),class:"avatar",onError:_[0]||(_[0]=(...z)=>E.imageLoadError&&E.imageLoadError(...z))},null,40,ya),e("div",$a,[e("div",xa,[e("span",Ma,a(L.name),1),e("span",Ca,a(L.pen_name),1)]),e("div",Ia,[b(x).loggedIn&&L.id!==b(x).user.id?(t(),s("div",Ea,[C(e("div",{class:"flex flex-row",onClick:G(z=>E.followUser(m,L.id),["prevent"])},[c(M,{name:"i-ri-user-add-fill",class:"text-gray-300 hover:text-white"})],8,La),[[P,!L.is_following]]),C(e("div",{class:"flex flex-row",onMouseover:z=>g.value=L.id,onMouseout:_[1]||(_[1]=z=>g.value=0),onClick:G(z=>E.unfollowUser(m,L.id),["prevent"])},[C(c(M,{name:"i-ri-user-follow-fill",class:"text-green-400"},null,512),[[P,g.value!==L.id]]),C(c(M,{name:"i-ri-user-unfollow-fill",class:"text-red-400 hover:text-red-400"},null,512),[[P,g.value&&g.value===L.id]])],40,Aa),[[P,L.is_following]])])):i("",!0)])])])]),_:2},1032,["to","style"]))),128))]),C(e("div",{class:"primary-button mt-4",onClick:_[2]||(_[2]=L=>B())},a(E.$t("loadMore")),513),[[P,I.value]]),c(te,{loading:f.value,empty:n.value,error:l.value,fetch:y},null,8,["loading","empty","error"])])}}},Fa=Y(Pa,[["__scopeId","data-v-5ff9c687"]]),Sa=r=>(pe("data-v-51d43998"),r=r(),fe(),r),ja=["src"],Ta={class:"px-2 pb-4 w-full rounded md:px-6 md:pb-6 theme-color"},Ra={class:"flex-row justify-between hidden-md-flex"},Ua={class:"mr-6 w-1/5"},Ba=["src"],za={class:"mt-2"},Oa={class:"flex flex-row"},Va={class:"flex flex-row"},Na=U("\xA0 "),Da=U("\xA0 "),qa={class:"hidden flex-row justify-between w-full md:flex md:mt-6"},Ga={class:"flex flex-col w-full"},Wa={class:"flex flex-row w-full"},Ha={class:"w-9/12"},Ja={class:"text-base font-semibold"},Ka=U("\xA0 "),Qa={class:"mr-2 italic"},Xa={class:"flex flex-row mt-2"},Ya={key:0,class:"mr-1"},Za={class:"flex flex-row"},en={class:"mr-1"},tn={key:0,class:"flex flex-row"},on=U(" he/his "),ln={key:1,class:"flex flex-row"},sn=U(" she/her "),an={class:"float-right w-3/12 text-right"},nn={class:"flex flex-row shadow-md primary-button"},rn={class:"leading-4"},un={key:1,class:"mt-4"},dn=["href"],cn=["href"],mn=["href"],vn=["href"],pn=["href"],fn={key:0,class:"mt-4"},hn=["id"],wn=["id"],bn={class:"flex flex-col text-center md:hidden"},gn=["src"],_n={class:"mt-4 text-base font-semibold"},kn={class:"flex flex-row justify-center mt-4"},yn={key:0,class:"flex flex-row mr-1"},$n={class:"mr-1"},xn={key:0,class:"flex flex-row"},Mn=U(" he/his "),Cn={key:1,class:"flex flex-row"},In=U(" she/her "),En={key:0,class:"mx-2 mt-4 text-center"},Ln=["id"],An=["id"],Pn={key:1,class:"flex flex-row justify-center mt-4"},Fn=["href"],Sn=["href"],jn=["href"],Tn=["href"],Rn=["href"],Un={class:"flex flex-row justify-center w-full md:hidden"},Bn=U("\xA0 "),zn=U("\xA0 "),On={class:"flex flex-row"},Vn={class:"flex flex-row"},Nn={class:"mt-2"},Dn={class:"flex flex-row justify-center md:hidden"},qn={class:"flex flex-row justify-between mt-2 md:mt-6"},Gn={class:"hidden flex-col lg:w-1/5 md:flex"},Wn={class:"profile-navigation_wrapper"},Hn={class:"hidden-lg-flex"},Jn=Sa(()=>e("span",{class:"hidden-lg-flex"},null,-1)),Kn={class:"profile-navigation_wrapper"},Qn={class:"hidden-lg-flex"},Xn={class:"hidden-lg-flex"},Yn={class:"profile-navigation_wrapper"},Zn={class:"hidden-lg-flex"},ei={class:"hidden-lg-flex"},ti={class:"w-full md:ml-6"},oi={key:0},li={class:"flex flex-row w-full"},si={class:"flex flex-row gap-2 justify-between w-full md:justify-end"},ai={key:1},ni={key:2},ii={key:3},ri={key:4},ui={__name:"Profile",props:{id:{type:Number,default:0},userLogon:{type:Boolean,default:!1}},setup(r){const F=r,x=ee(),{oApiConfiguration:u,fetchOptions:S}=K(),w=ye(u,S());ne(u,S()),ue(u,S());const y=Pe(),k=Fe(),{o:f}=y.query,p=h(!0),l=f!=null?h(f):h("dashboard"),n=h("artwork");je(()=>F.userLogon&&x.loggedIn?x.user.id:F.id);const I=h({manageMode:!1,showManageMode:!0}),B=v=>{l.value=v,I.value.manageMode=!1,f!=null&&k.push("/profile")},o=h({}),g=h({feed:0,artwork:0,comic:0,tutorial:0,album:0,followers:0,followings:0}),E=h(null),_=h([]),A=v=>{_.value=v},L=()=>{I.value.showManageMode=!1},m=h(null),z=()=>{Q().openModal("album-selection-modal")},$=h(!1);let R;const N=()=>{re().splash(R,$,"item-added-to-album-alert")},V=h(!1),W=h(null),X=h("i-ri-user-follow-fill"),oe=(v,d)=>{X.value=v,W.value=d},le=async v=>{const[d,T]=await w.follow(v);T||(V.value=!0)},se=async v=>{const[d,T]=await w.unfollow(v);T||(V.value=!1)},ae=(v,d,T,O)=>{Re().readMore(v,d,T,O)};return(v,d)=>{const T=me;return t(),D(Be,{"hide-side":!0,"with-footer":!0,"no-right-side":!0},{default:q(()=>[e("div",null,[e("img",{src:v.avatarCoverUrl(o.value.cover_bucket,o.value.cover_filename),class:"object-cover object-top w-full h-32 rounded-t md:h-52 lg:h-72 xl:h-96 unselectable",onError:d[0]||(d[0]=(...O)=>v.defaultCoverImage&&v.defaultCoverImage(...O))},null,40,ja),b(x).loggedIn&&b(x).user.id===o.value.id?(t(),D(T,{key:0,to:"/profile/setting",class:"float-right absolute right-4 mt-2 shadow-md icon-button-primary-color flex-md-hidden"},{default:q(()=>[c(M,{name:"i-ph-gear-six"})]),_:1})):i("",!0)]),e("div",Ta,[e("div",Ra,[e("div",Ua,[e("img",{src:v.avatarCoverUrl(o.value.avatar_bucket,o.value.avatar_filename),class:"hidden -mt-2 w-full md:-mt-16 avatar md:flex",onError:d[1]||(d[1]=(...O)=>v.defaultCoverImage&&v.defaultCoverImage(...O))},null,40,Ba),e("div",za,[b(x).loggedIn&&o.value.id!==b(x).user.id?(t(),s("div",{key:0,class:j(["mt-2 primary-button rounded-b-none hover:rounded-b-none",{"hover:danger-button":V.value}]),onClick:d[2]||(d[2]=O=>V.value?se(o.value.id):le(o.value.id)),onMouseover:d[3]||(d[3]=O=>oe("i-ri-user-unfollow-fill",v.$t("unfollow"))),onMouseleave:d[4]||(d[4]=O=>oe("i-ri-user-follow-fill",v.$t("following")))},[C(e("div",Oa,[c(M,{name:"i-ri-user-add-fill","text-size":"text-base"}),U(" "+a(v.$t("follow")),1)],512),[[P,!V.value]]),C(e("div",Va,[c(M,{name:X.value,"text-size":"text-base"},null,8,["name"]),U(" "+a(W.value===null?v.$t("following"):W.value),1)],512),[[P,V.value]])],34)):i("",!0),e("div",{class:j(["flex-row justify-center border hidden-md-flex",o.value.id==b(x).user.id?"rounded-md":"rounded-b-md"])},[e("div",{class:"py-2 w-1/2 text-center cursor-pointer hover:text-colored",onClick:d[5]||(d[5]=O=>l.value="followerList")},[e("b",null,a(g.value.followers),1),Na,e("i",null,a(v.$t("followers").toLowerCase()),1)]),e("div",{class:"py-2 w-1/2 text-center cursor-pointer hover:text-colored",onClick:d[6]||(d[6]=O=>l.value="followingList")},[e("b",null,a(g.value.followings),1),Da,e("i",null,a(v.$t("following").toLowerCase()),1)])],2)])]),e("div",qa,[e("div",Ga,[e("div",Wa,[e("div",Ha,[e("div",null,[e("span",Ja,a(o.value.name),1),Ka,e("span",Qa,a(o.value.username),1)]),e("div",Xa,[o.value.pen_name&&o.value.pen_name!==""?(t(),s("div",Ya,[e("span",Za,[c(M,{name:"i-ion-pencil-outline",class:"mr-1 text-base font-bold"}),U(" "+a(o.value.pen_name),1)])])):i("",!0),e("div",en,[o.value.gender==="m"?(t(),s("span",tn,[c(M,{name:"i-ion-male-outline",class:"mr-1 ml-2 text-base font-bold"}),on])):i("",!0),o.value.gender==="f"?(t(),s("span",ln,[c(M,{name:"i-ion-female-outline",class:"mr-1 ml-2 text-base font-bold"}),sn])):i("",!0)])])]),e("div",an,[b(x).loggedIn&&b(x).user.id===o.value.id?(t(),D(T,{key:0,to:"/profile/setting",class:"float-right -mt-20 shadow-md"},{default:q(()=>[e("button",nn,[c(M,{name:"i-ph-gear-six",class:"mr-2"}),e("span",rn,a(v.$t("profile.setting")),1)])]),_:1})):i("",!0),o.value.user_socials?(t(),s("div",un,[o.value.user_socials.facebook?(t(),s("a",{key:0,href:"https://facebook.com/"+o.value.user_socials.facebook,target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-logo-facebook",class:"text-xl"})],8,dn)):i("",!0),o.value.user_socials.instagram?(t(),s("a",{key:1,href:"https://instagram.com/"+o.value.user_socials.instagram+"/",target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-logo-instagram",class:"text-xl"})],8,cn)):i("",!0),o.value.user_socials.twitter?(t(),s("a",{key:2,href:"https://twitter.com/"+o.value.user_socials.twitter,target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-logo-twitter",class:"text-xl"})],8,mn)):i("",!0),o.value.user_socials.youtube?(t(),s("a",{key:3,href:"https://youtube.com/channel/"+o.value.user_socials.youtube,target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-logo-youtube",class:"text-xl"})],8,vn)):i("",!0),o.value.user_socials.patreon?(t(),s("a",{key:4,href:"https://patreon.com/"+o.value.user_socials.patreon+"/",target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"heart",class:"text-xl"})],8,pn)):i("",!0)])):i("",!0)])]),e("div",null,[o.value.bio?(t(),s("p",fn,[e("span",{id:"user-bio-"+o.value.id},a(o.value.bio.length>300?`${o.value.bio.slice(0,300)}...`:o.value.bio),9,hn),o.value.bio.length>300?(t(),s("a",{key:0,id:"user-bio-read-more-"+o.value.id,class:"href",onClick:d[7]||(d[7]=G(O=>ae(o.value.bio,o.value.id,"user-bio-read-more-","user-bio-"),["prevent"]))},a(v.$t("readMore")),9,wn)):i("",!0)])):i("",!0)])])])]),e("div",bn,[e("img",{src:v.avatarCoverUrl(o.value.avatar_bucket,o.value.avatar_filename),class:"flex mx-auto -mt-14 w-2/6 sm:-mt-16 sm:w-1/5 avatar md:hidden",onError:d[8]||(d[8]=(...O)=>v.imageLoadError&&v.imageLoadError(...O))},null,40,gn),e("div",_n,a(o.value.name),1),e("div",null,a(o.value.username),1),e("div",kn,[o.value.pen_name?(t(),s("span",yn,[c(M,{name:"i-ion-pencil-outline",class:"mr-1 text-base font-bold"}),U(" "+a(o.value.pen_name&&o.value.pen_name!==""?o.value.pen_name:"-"),1)])):i("",!0),e("div",$n,[o.value.gender==="m"?(t(),s("span",xn,[c(M,{name:"i-ion-male-outline",class:"mr-1 ml-2 text-base font-bold"}),Mn])):i("",!0),o.value.gender==="f"?(t(),s("span",Cn,[c(M,{name:"i-ion-female-outline",class:"mr-1 ml-2 text-base font-bold"}),In])):i("",!0)])]),o.value.bio?(t(),s("div",En,[e("span",{id:"mobile__user-bio-"+o.value.id},a(o.value.bio.length>150?`${o.value.bio.slice(0,150)}...`:o.value.bio),9,Ln),o.value.bio.length>150?(t(),s("a",{key:0,id:"mobile__user-bio-read-more-"+o.value.id,class:"href",onClick:d[9]||(d[9]=G(O=>ae(o.value.bio,o.value.id,"mobile__user-bio-read-more-","mobile__user-bio-"),["prevent"]))},a(v.$t("readMore")),9,An)):i("",!0)])):i("",!0),o.value.user_socials?(t(),s("div",Pn,[o.value.user_socials.facebook?(t(),s("a",{key:0,href:"https://facebook.com/"+o.value.user_socials.facebook,target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-logo-facebook",class:"text-xl"})],8,Fn)):i("",!0),o.value.user_socials.instagram?(t(),s("a",{key:1,href:"https://instagram.com/"+o.value.user_socials.instagram+"/",target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-logo-instagram",class:"text-xl"})],8,Sn)):i("",!0),o.value.user_socials.twitter?(t(),s("a",{key:2,href:"https://twitter.com/"+o.value.user_socials.twitter,target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-logo-twitter",class:"text-xl"})],8,jn)):i("",!0),o.value.user_socials.youtube?(t(),s("a",{key:3,href:"https://youtube.com/channel/"+o.value.user_socials.youtube,target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-logo-youtube",class:"text-xl"})],8,Tn)):i("",!0),o.value.user_socials.patreon?(t(),s("a",{key:4,href:"https://patreon.com/"+o.value.user_socials.patreon+"/",target:"blank",class:"ml-3 cursor-pointer"},[c(M,{name:"i-ion-heart",class:"text-xl"})],8,Rn)):i("",!0)])):i("",!0),e("div",Un,[e("div",{class:"p-2 cursor-pointer hover:text-colored",onClick:d[10]||(d[10]=O=>l.value="followerList")},[e("b",null,a(g.value.followers),1),Bn,e("i",null,a(v.$t("followers")),1)]),e("div",{class:"p-2 cursor-pointer hover:text-colored",onClick:d[11]||(d[11]=O=>l.value="followingList")},[e("b",null,a(g.value.followings),1),zn,e("i",null,a(v.$t("following")),1)])]),b(x).loggedIn&&o.value.id!==b(x).user.id?(t(),s("div",{key:2,class:j(["mt-2 w-auto",V.value?"danger-button":"primary-button"]),onClick:d[12]||(d[12]=O=>V.value?se(o.value.id):le(o.value.id))},[C(e("div",On,[c(M,{name:"i-ri-user-add-fill","text-size":"text-base"}),U(" "+a(v.$t("follow")),1)],512),[[P,!V.value]]),C(e("div",Vn,[c(M,{name:X.value,"text-size":"text-base"},null,8,["name"]),U(" "+a(W.value===null?v.$t("following"):W.value),1)],512),[[P,V.value]])],2)):i("",!0)]),e("div",Nn,[e("div",Dn,[e("div",{class:j(["mr-2 profile-navigation__mobile theme-color-secondary",{"button-color text-white":b(l)=="dashboard"}]),onClick:d[13]||(d[13]=O=>B("dashboard"))},[e("div",null,[C(c(M,{name:"i-ion-home-outline",class:"text-white"},null,512),[[P,b(l)=="dashboard"]]),C(c(M,{name:"i-ion-home-outline",class:"hover:text-white"},null,512),[[P,b(l)!="dashboard"]])]),e("span",null,a(v.$t("dashboard")),1)],2),e("div",{class:j(["mr-2 profile-navigation__mobile theme-color-secondary",{"button-color text-white":b(l)=="albums"}]),onClick:d[14]||(d[14]=O=>B("albums"))},[e("div",null,[C(c(M,{name:"i-ion-folder-outline",class:"text-white"},null,512),[[P,b(l)=="albums"]]),C(c(M,{name:"i-ion-folder-outline",class:"hover:text-white"},null,512),[[P,b(l)!="albums"]])]),e("span",null,a(v.$t("albums.album")),1)],2),e("div",{class:j(["profile-navigation__mobile theme-color-secondary",{"button-color text-white":b(l)=="collections"}]),onClick:d[15]||(d[15]=O=>B("collections"))},[e("div",null,[C(c(M,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[P,b(l)=="collections"]]),C(c(M,{name:"i-majesticons-bookmark-line",class:"hover:text-white"},null,512),[[P,b(l)!="collections"]])]),e("span",null,a(v.$t("collections.collection")),1)],2)]),e("div",qn,[e("div",Gn,[e("div",{class:j(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":b(l)==="dashboard"}]),onClick:d[16]||(d[16]=O=>B("dashboard"))},[e("div",Wn,[C(c(M,{name:"i-humbleicons-dashboard",class:"text-white"},null,512),[[P,b(l)==="dashboard"]]),C(c(M,{name:"i-humbleicons-dashboard"},null,512),[[P,b(l)!=="dashboard"]]),e("label",Hn,a(v.$t("dashboard")),1)]),Jn],2),e("div",{class:j(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":b(l)==="albums"}]),onClick:d[17]||(d[17]=O=>B("albums"))},[e("div",Kn,[C(c(M,{name:"i-bx-photo-album",class:"text-white"},null,512),[[P,b(l)==="albums"]]),C(c(M,{name:"i-bx-photo-album"},null,512),[[P,b(l)!=="albums"]]),e("label",Qn,a(v.$t("albums.album")),1)]),e("span",Xn,a(g.value.album),1)],2),e("div",{class:j(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":b(l)==="collections"}]),onClick:d[18]||(d[18]=O=>B("collections"))},[e("div",Yn,[C(c(M,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[P,b(l)==="collections"]]),C(c(M,{name:"i-majesticons-bookmark-line"},null,512),[[P,b(l)!=="collections"]]),e("label",Zn,a(v.$t("collections.collection")),1)]),e("span",ei,a(g.value.collection),1)],2)]),e("div",ti,[b(l)==="dashboard"?(t(),s("div",oi,[e("div",li,[e("div",{class:j(["flex flex-row justify-between w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":n.value==="feed"}]),onClick:d[19]||(d[19]=O=>n.value="feed")},[U(a(v.$t("feed"))+" ",1),e("span",{class:j(["px-1 ml-2 rounded",n.value==="feed"?"theme-color":"button-color text-white"])},a(g.value.feed),3)],2),e("div",{class:j(["flex flex-row justify-between mr-0 w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":n.value==="artwork"}]),onClick:d[20]||(d[20]=O=>n.value="artwork")},[U(a(v.$t("artworks.artwork"))+" ",1),e("span",{class:j(["px-1 ml-2 rounded",n.value==="artwork"?"theme-color":"button-color text-white"])},a(g.value.artwork),3)],2)]),C(e("div",si,[e("button",{class:"w-full action-button secondary-button md:w-auto",onClick:d[21]||(d[21]=O=>I.value.manageMode=!I.value.manageMode)},[c(M,{name:I.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),U(" "+a(I.value.manageMode?v.$t("quit"):v.$t("manage")),1)]),C(e("button",{class:"w-full primary-button md:w-auto",onClick:d[22]||(d[22]=O=>z())},[c(M,{name:"i-ion-add-outline"}),U(" "+a(v.$t("albums.addToAlbum")),1)],512),[[P,I.value.manageMode]])],512),[[P,!p.value&&b(x).loggedIn&&b(x).user.id===o.value.id&&n.value==="artwork"&&I.value.showManageMode]]),c(te,{loading:p.value},null,8,["loading"]),C(e("div",{class:"p-2 mt-2 text-black bg-yellow-200 rounded-md"},a(v.$t("profile.manageModeActiveMessage")),513),[[P,I.value.manageMode]]),e("div",null,[n.value==="feed"?(t(),D(Lt,{key:0,ref:"feedListRef",class:"mt-2","user-id":o.value.id},null,8,["user-id"])):i("",!0),!p.value&&n.value==="artwork"?(t(),D(St,{key:1,ref_key:"artworkListRef",ref:E,"user-id":o.value.id,"manage-mode":I.value.manageMode,onFeedSelectedItems:A,onOnEmpty:L},null,8,["user-id","manage-mode"])):i("",!0)])])):i("",!0),b(l)==="albums"?(t(),s("div",ai,[p.value?i("",!0):(t(),D(_l,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):i("",!0),b(l)==="collections"?(t(),s("div",ni,[p.value?i("",!0):(t(),D(sa,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):i("",!0),b(l)==="followerList"?(t(),s("div",ii,[p.value?i("",!0):(t(),D(ba,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):i("",!0),b(l)==="followingList"?(t(),s("div",ri,[p.value?i("",!0):(t(),D(Fa,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):i("",!0)])])])]),p.value?i("",!0):(t(),D(Te,{key:0,id:"album-selection-modal",ref_key:"albumSelectionModalRef",ref:m,class:"modal","work-ids":_.value,onAddedToAlbum:N},null,8,["work-ids"])),C(c(ie,{id:"item-added-to-album-alert",text:v.$t("albums.itemAdded")},null,8,["text"]),[[P,$.value]])]),_:1})}}},_i=Y(ui,[["__scopeId","data-v-51d43998"]]);export{_i as P};
//# sourceMappingURL=Profile.a52770e3.js.map
