import{c as D,d as F,u as R,i as T}from"../server.mjs";import{_ as z,u as O,a as y}from"./Icon.b4cfd501.js";import{onBeforeMount as j,ref as n,reactive as q,openBlock as _,createBlock as G,withCtx as H,createElementVNode as o,toDisplayString as r,unref as $,createElementBlock as M,normalizeClass as d,createCommentVNode as C,createVNode as p,withDirectives as w,vShow as b,createTextVNode as N}from"vue";import"vue-router";import{L as J}from"./Layout.95ee41da.js";import{W as K,M as Q}from"./ModalView.a5e9048d.js";import{_ as U}from"./LoadingEmptyErrorMessage.06690c93.js";import"#internal/nitro";import"./Spinner.bd1da415.js";import"./user-counters-api.70d48752.js";import"./useFeed.a9121734.js";const X={id:"lists"},Y={class:"navigations"},Z={class:"title"},ee={class:"buttons"},te={key:0,class:"filter-buttons"},oe={class:"mt-4"},ae={key:0,class:"art-list-view-paging-control"},ne={id:"recent-modal",class:"modal work-view"},ie={__name:"index",setup(se){const m=D(),{oApiConfiguration:P,fetchOptions:E}=F(),V=O(P,E()),{$router:A}=R();j(()=>{m.loggedIn||A.push("/"),v()});const u=n(void 0),g=async e=>{u.value=e,l.page=0,await v()},h=n([]),s=n({pagination:{enablePrev:!0,enableNext:!0}}),v=async()=>{const e=await B(),t=e.works,a=e.pagination;!t.length&&a.record_total===0?I():(h.value=t,a.next_previous.next_page===null?s.value.pagination.enableNext=!1:s.value.pagination.enableNext=!0,a.next_previous.prev_page===null?s.value.pagination.enablePrev=!1:s.value.pagination.enablePrev=!0)},i=n(!0),l=q({perPage:30,page:n(0)}),B=async()=>{l.page===0&&(i.value=!0);const[e,t]=await V.getFollowing({pagination:{perPage:l.perPage,page:l.page},explicitMode:u.value});if(t)L();else return S(),e},k=async e=>{e==="prev"?l.page-=1:l.page+=1,await v()},c=n(!1),I=()=>{c.value=!0},f=n(!1),L=()=>{i.value=!1,f.value=!0,hideButton()},S=()=>{i.value=!1,c.value=!1,f.value=!1},x=n(null),W=(e,t=!1)=>{x.value.view(e,t),T().openModal("recent-modal")};return(e,t)=>(_(),G(J,{"with-footer":!0,"hide-side":!0,"no-right-side":!0,fullscreen:!0},{default:H(()=>[o("div",X,[o("div",Y,[o("div",Z,r(e.$t("following")),1),o("div",ee,[$(m).loggedIn&&$(m).user.user_settings.show_explicit?(_(),M("div",te,[o("p",{class:d(["rounded-l-md button-item",[u.value===void 0?"button":"theme-color"]]),onClick:t[0]||(t[0]=a=>g(void 0))},r(e.$t("default")),3),o("p",{class:d(["button-item",[u.value==="safe"?"button":"theme-color"]]),onClick:t[1]||(t[1]=a=>g("safe"))},r(e.$t("safe")),3),o("p",{class:d(["rounded-r-md button-item",[u.value==="explicit"?"button":"theme-color"]]),onClick:t[2]||(t[2]=a=>g("explicit"))},r(e.$t("explicit")),3)])):C("",!0)])]),p(U,{loading:i.value,empty:c.value,error:f.value,fetch:v},null,8,["loading","empty","error"]),w(o("div",oe,[w(p(K,{"section-class":"work-grid",works:h.value,view:W},null,8,["works"]),[[b,!c.value]])],512),[[b,!i.value]]),!i.value&&!c.value&&!f.value?(_(),M("div",ae,[o("button",{class:d([s.value.pagination.enablePrev?"primary-button":"disabled-button"]),onClick:t[3]||(t[3]=a=>k("prev"))},[p(y,{name:"i-ion-chevron-back-outline"}),N(" "+r(e.$t("pagination.previous")),1)],2),o("button",{class:d([s.value.pagination.enableNext?"primary-button":"disabled-button"]),onClick:t[4]||(t[4]=a=>k("next"))},[N(r(e.$t("pagination.next"))+" ",1),p(y,{name:"i-ion-chevron-forward-outline",class:"md:ml-2",style:{"margin-right":"0 !important"}})],2)])):C("",!0),o("div",ne,[w(p(Q,{ref_key:"recentModalViewRef",ref:x,section:"recent"},null,512),[[b,!i.value]])])])]),_:1}))}},we=z(ie,[["__scopeId","data-v-46c6078d"]]);export{we as default};
//# sourceMappingURL=index.f2b86a48.js.map
