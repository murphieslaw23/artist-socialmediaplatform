import{B as vt,a as z,b as W,R as j,k as ft,_ as Re,c as Ve,e as Xt,d as _e,i as X,j as wt,n as Zt,u as ea,o as rt}from"../server.mjs";import{_ as fe,u as gt,a as V}from"./Icon.25764744.js";import{_ as Ee,u as yt}from"./LoadingEmptyErrorMessage.284d6663.js";import{getCurrentScope as ta,onScopeDispose as aa,ref as b,unref as O,computed as Le,getCurrentInstance as sa,nextTick as oa,watchEffect as la,watch as Oe,openBlock as y,createElementBlock as x,createElementVNode as r,createVNode as k,withCtx as K,createTextVNode as B,toDisplayString as g,withDirectives as I,vShow as R,createCommentVNode as S,withModifiers as pe,normalizeClass as D,Fragment as he,renderList as ve,createBlock as ie,onMounted as qe,reactive as Je,vModelText as Ae,pushScopeId as bt,popScopeId as kt,resolveComponent as na,resolveDirective as it,KeepAlive as ra}from"vue";import"vue-router";import{S as Ye}from"./Spinner.cb811415.js";import{U as Ue}from"./user-counters-api.9dcda3c8.js";import{u as ia}from"./useFeed.e853e4d0.js";const ce=function(o){return{addWorkToAlbum:async(e,t={})=>{const s="/albums/add-work",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"POST",...l,...t},u={},p={};u["Content-Type"]="application/json";const h=new URLSearchParams(a.search);for(const w in p)h.set(w,p[w]);for(const w in t.params)h.set(w,t.params[w]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};n.headers={...u,...d,...t.headers};const f=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=f?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},createAlbum:async(e,t={})=>{const s="/albums/create",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"POST",...l,...t},u={},p={};u["Content-Type"]="application/json";const h=new URLSearchParams(a.search);for(const w in p)h.set(w,p[w]);for(const w in t.params)h.set(w,t.params[w]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};n.headers={...u,...d,...t.headers};const f=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=f?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},deleteAlbum:async(e,t={})=>{if(e==null)throw new j("id","Required parameter id was null or undefined when calling deleteAlbum.");const s="/albums/{id}".replace("{id}",encodeURIComponent(String(e))),a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"DELETE",...l,...t},u={},p={},h=new URLSearchParams(a.search);for(const f in p)h.set(f,p[f]);for(const f in t.params)h.set(f,t.params[f]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};return n.headers={...u,...d,...t.headers},{url:a.pathname+a.search+a.hash,options:n}},getAlbumById:async(e,t={})=>{if(e==null)throw new j("id","Required parameter id was null or undefined when calling getAlbumById.");const s="/albums/{id}".replace("{id}",encodeURIComponent(String(e))),a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"GET",...l,...t},u={},p={},h=new URLSearchParams(a.search);for(const f in p)h.set(f,p[f]);for(const f in t.params)h.set(f,t.params[f]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};return n.headers={...u,...d,...t.headers},{url:a.pathname+a.search+a.hash,options:n}},getAlbumItems:async(e,t,s,a={})=>{if(e==null)throw new j("id","Required parameter id was null or undefined when calling getAlbumItems.");if(t==null)throw new j("perPage","Required parameter perPage was null or undefined when calling getAlbumItems.");if(s==null)throw new j("page","Required parameter page was null or undefined when calling getAlbumItems.");const l="/albums/list/{id}".replace("{id}",encodeURIComponent(String(e))),n=new URL(l,"https://example.com");let u;o&&(u=o.baseOptions);const p={method:"GET",...u,...a},h={},d={};t!==void 0&&(d.per_page=t),s!==void 0&&(d.page=s);const f=new URLSearchParams(n.search);for(const i in d)f.set(i,d[i]);for(const i in a.params)f.set(i,a.params[i]);n.search=new URLSearchParams(f).toString();let w=u&&u.headers?u.headers:{};return p.headers={...h,...w,...a.headers},{url:n.pathname+n.search+n.hash,options:p}},getCurrentAlbumSaveInfo:async(e,t,s={})=>{if(e==null)throw new j("type","Required parameter type was null or undefined when calling getCurrentAlbumSaveInfo.");if(t==null)throw new j("workId","Required parameter workId was null or undefined when calling getCurrentAlbumSaveInfo.");const a="/albums/current/{type}/{work_id}".replace("{type}",encodeURIComponent(String(e))).replace("{work_id}",encodeURIComponent(String(t))),l=new URL(a,"https://example.com");let n;o&&(n=o.baseOptions);const u={method:"GET",...n,...s},p={},h={},d=new URLSearchParams(l.search);for(const w in h)d.set(w,h[w]);for(const w in s.params)d.set(w,s.params[w]);l.search=new URLSearchParams(d).toString();let f=n&&n.headers?n.headers:{};return u.headers={...p,...f,...s.headers},{url:l.pathname+l.search+l.hash,options:u}},listUserAlbums:async(e,t,s,a,l={})=>{if(e==null)throw new j("userId","Required parameter userId was null or undefined when calling listUserAlbums.");if(t==null)throw new j("perPage","Required parameter perPage was null or undefined when calling listUserAlbums.");if(s==null)throw new j("page","Required parameter page was null or undefined when calling listUserAlbums.");if(a==null)throw new j("type","Required parameter type was null or undefined when calling listUserAlbums.");const n="/albums/user/{userId}".replace("{userId}",encodeURIComponent(String(e))),u=new URL(n,"https://example.com");let p;o&&(p=o.baseOptions);const h={method:"GET",...p,...l},d={},f={};t!==void 0&&(f.per_page=t),s!==void 0&&(f.page=s),a!==void 0&&(f.type=a);const w=new URLSearchParams(u.search);for(const c in f)w.set(c,f[c]);for(const c in l.params)w.set(c,l.params[c]);u.search=new URLSearchParams(w).toString();let i=p&&p.headers?p.headers:{};return h.headers={...d,...i,...l.headers},{url:u.pathname+u.search+u.hash,options:h}},removeWorkFromAlbum:async(e,t={})=>{const s="/albums/work/remove",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"DELETE",...l,...t},u={},p={};u["Content-Type"]="application/json";const h=new URLSearchParams(a.search);for(const w in p)h.set(w,p[w]);for(const w in t.params)h.set(w,t.params[w]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};n.headers={...u,...d,...t.headers};const f=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=f?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},updateAlbum:async(e,t={})=>{const s="/albums",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"PATCH",...l,...t},u={},p={};u["Content-Type"]="application/json";const h=new URLSearchParams(a.search);for(const w in p)h.set(w,p[w]);for(const w in t.params)h.set(w,t.params[w]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};n.headers={...u,...d,...t.headers};const f=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=f?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}}}},ue=function(o){return{async addWorkToAlbum(e,t){const s=await ce(o).addWorkToAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async createAlbum(e,t){const s=await ce(o).createAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async deleteAlbum(e,t){const s=await ce(o).deleteAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async getAlbumById(e,t){const s=await ce(o).getAlbumById(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async getAlbumItems(e,t,s,a){const l=await ce(o).getAlbumItems(e,t,s,a);return(n=z,u=W)=>{const p={...l.options,url:u+l.url};return n.request(p)}},async getCurrentAlbumSaveInfo(e,t,s){const a=await ce(o).getCurrentAlbumSaveInfo(e,t,s);return(l=z,n=W)=>{const u={...a.options,url:n+a.url};return l.request(u)}},async listUserAlbums(e,t,s,a,l){const n=await ce(o).listUserAlbums(e,t,s,a,l);return(u=z,p=W)=>{const h={...n.options,url:p+n.url};return u.request(h)}},async removeWorkFromAlbum(e,t){const s=await ce(o).removeWorkFromAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async updateAlbum(e,t){const s=await ce(o).updateAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}}}};class de extends vt{async addWorkToAlbum(e,t){return ue(this.configuration).addWorkToAlbum(e,t).then(s=>s(this.axios,this.basePath))}async createAlbum(e,t){return ue(this.configuration).createAlbum(e,t).then(s=>s(this.axios,this.basePath))}async deleteAlbum(e,t){return ue(this.configuration).deleteAlbum(e,t).then(s=>s(this.axios,this.basePath))}async getAlbumById(e,t){return ue(this.configuration).getAlbumById(e,t).then(s=>s(this.axios,this.basePath))}async getAlbumItems(e,t,s,a){return ue(this.configuration).getAlbumItems(e,t,s,a).then(l=>l(this.axios,this.basePath))}async getCurrentAlbumSaveInfo(e,t,s){return ue(this.configuration).getCurrentAlbumSaveInfo(e,t,s).then(a=>a(this.axios,this.basePath))}async listUserAlbums(e,t,s,a,l){return ue(this.configuration).listUserAlbums(e,t,s,a,l).then(n=>n(this.axios,this.basePath))}async removeWorkFromAlbum(e,t){return ue(this.configuration).removeWorkFromAlbum(e,t).then(s=>s(this.axios,this.basePath))}async updateAlbum(e,t){return ue(this.configuration).updateAlbum(e,t).then(s=>s(this.axios,this.basePath))}}const ne=function(o){return{addItemForLater:async(e,t,s={})=>{if(e==null)throw new j("type","Required parameter type was null or undefined when calling addItemForLater.");const a="/collections/later",l=new URL(a,"https://example.com");let n;o&&(n=o.baseOptions);const u={method:"POST",...n,...s},p={},h={};e!==void 0&&(h.type=e),p["Content-Type"]="application/json";const d=new URLSearchParams(l.search);for(const i in h)d.set(i,h[i]);for(const i in s.params)d.set(i,s.params[i]);l.search=new URLSearchParams(d).toString();let f=n&&n.headers?n.headers:{};u.headers={...p,...f,...s.headers};const w=typeof t!="string"||u.headers["Content-Type"]==="application/json";return u.data=w?JSON.stringify(t!==void 0?t:{}):t||"",{url:l.pathname+l.search+l.hash,options:u}},addItemToCollection:async(e,t,s,a={})=>{if(e==null)throw new j("type","Required parameter type was null or undefined when calling addItemToCollection.");if(t==null)throw new j("collectionId","Required parameter collectionId was null or undefined when calling addItemToCollection.");const l="/collections/{collectionId}/items".replace("{collectionId}",encodeURIComponent(String(t))),n=new URL(l,"https://example.com");let u;o&&(u=o.baseOptions);const p={method:"POST",...u,...a},h={},d={};e!==void 0&&(d.type=e),h["Content-Type"]="application/json";const f=new URLSearchParams(n.search);for(const c in d)f.set(c,d[c]);for(const c in a.params)f.set(c,a.params[c]);n.search=new URLSearchParams(f).toString();let w=u&&u.headers?u.headers:{};p.headers={...h,...w,...a.headers};const i=typeof s!="string"||p.headers["Content-Type"]==="application/json";return p.data=i?JSON.stringify(s!==void 0?s:{}):s||"",{url:n.pathname+n.search+n.hash,options:p}},collectionsIdDelete:async(e,t={})=>{if(e==null)throw new j("id","Required parameter id was null or undefined when calling collectionsIdDelete.");const s="/collections/{id}".replace("{id}",encodeURIComponent(String(e))),a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"DELETE",...l,...t},u={},p={},h=new URLSearchParams(a.search);for(const f in p)h.set(f,p[f]);for(const f in t.params)h.set(f,t.params[f]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};return n.headers={...u,...d,...t.headers},{url:a.pathname+a.search+a.hash,options:n}},create:async(e,t={})=>{const s="/collections/create",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"POST",...l,...t},u={},p={};u["Content-Type"]="application/json";const h=new URLSearchParams(a.search);for(const w in p)h.set(w,p[w]);for(const w in t.params)h.set(w,t.params[w]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};n.headers={...u,...d,...t.headers};const f=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=f?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},detail:async(e,t={})=>{if(e==null)throw new j("id","Required parameter id was null or undefined when calling detail.");const s="/collections/{id}".replace("{id}",encodeURIComponent(String(e))),a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"GET",...l,...t},u={},p={},h=new URLSearchParams(a.search);for(const f in p)h.set(f,p[f]);for(const f in t.params)h.set(f,t.params[f]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};return n.headers={...u,...d,...t.headers},{url:a.pathname+a.search+a.hash,options:n}},getCurrentSaveInfo:async(e,t,s={})=>{if(e==null)throw new j("type","Required parameter type was null or undefined when calling getCurrentSaveInfo.");if(t==null)throw new j("workId","Required parameter workId was null or undefined when calling getCurrentSaveInfo.");const a="/collections/current/{type}/{work_id}".replace("{type}",encodeURIComponent(String(e))).replace("{work_id}",encodeURIComponent(String(t))),l=new URL(a,"https://example.com");let n;o&&(n=o.baseOptions);const u={method:"GET",...n,...s},p={},h={},d=new URLSearchParams(l.search);for(const w in h)d.set(w,h[w]);for(const w in s.params)d.set(w,s.params[w]);l.search=new URLSearchParams(d).toString();let f=n&&n.headers?n.headers:{};return u.headers={...p,...f,...s.headers},{url:l.pathname+l.search+l.hash,options:u}},listCollectionItems:async(e,t,s,a={})=>{if(e==null)throw new j("id","Required parameter id was null or undefined when calling listCollectionItems.");if(t==null)throw new j("perPage","Required parameter perPage was null or undefined when calling listCollectionItems.");if(s==null)throw new j("page","Required parameter page was null or undefined when calling listCollectionItems.");const l="/collections/{id}/items".replace("{id}",encodeURIComponent(String(e))),n=new URL(l,"https://example.com");let u;o&&(u=o.baseOptions);const p={method:"GET",...u,...a},h={},d={};t!==void 0&&(d.per_page=t),s!==void 0&&(d.page=s);const f=new URLSearchParams(n.search);for(const i in d)f.set(i,d[i]);for(const i in a.params)f.set(i,a.params[i]);n.search=new URLSearchParams(f).toString();let w=u&&u.headers?u.headers:{};return p.headers={...h,...w,...a.headers},{url:n.pathname+n.search+n.hash,options:p}},listUserCollections:async(e,t,s,a,l,n={})=>{if(e==null)throw new j("userId","Required parameter userId was null or undefined when calling listUserCollections.");if(t==null)throw new j("type","Required parameter type was null or undefined when calling listUserCollections.");if(s==null)throw new j("page","Required parameter page was null or undefined when calling listUserCollections.");if(a==null)throw new j("perPage","Required parameter perPage was null or undefined when calling listUserCollections.");const u="/collections/user/{userId}".replace("{userId}",encodeURIComponent(String(e))),p=new URL(u,"https://example.com");let h;o&&(h=o.baseOptions);const d={method:"GET",...h,...n},f={},w={};t!==void 0&&(w.type=t),l!==void 0&&(w.name=l),s!==void 0&&(w.page=s),a!==void 0&&(w.per_page=a);const i=new URLSearchParams(p.search);for(const _ in w)i.set(_,w[_]);for(const _ in n.params)i.set(_,n.params[_]);p.search=new URLSearchParams(i).toString();let c=h&&h.headers?h.headers:{};return d.headers={...f,...c,...n.headers},{url:p.pathname+p.search+p.hash,options:d}},removeItemFromCollection:async(e,t,s,a={})=>{if(e==null)throw new j("type","Required parameter type was null or undefined when calling removeItemFromCollection.");if(t==null)throw new j("collectionId","Required parameter collectionId was null or undefined when calling removeItemFromCollection.");const l="/collections/{collectionId}/items".replace("{collectionId}",encodeURIComponent(String(t))),n=new URL(l,"https://example.com");let u;o&&(u=o.baseOptions);const p={method:"DELETE",...u,...a},h={},d={};e!==void 0&&(d.type=e),h["Content-Type"]="application/json";const f=new URLSearchParams(n.search);for(const c in d)f.set(c,d[c]);for(const c in a.params)f.set(c,a.params[c]);n.search=new URLSearchParams(f).toString();let w=u&&u.headers?u.headers:{};p.headers={...h,...w,...a.headers};const i=typeof s!="string"||p.headers["Content-Type"]==="application/json";return p.data=i?JSON.stringify(s!==void 0?s:{}):s||"",{url:n.pathname+n.search+n.hash,options:p}},updateCollection:async(e,t={})=>{const s="/collections",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"PATCH",...l,...t},u={},p={};u["Content-Type"]="application/json";const h=new URLSearchParams(a.search);for(const w in p)h.set(w,p[w]);for(const w in t.params)h.set(w,t.params[w]);a.search=new URLSearchParams(h).toString();let d=l&&l.headers?l.headers:{};n.headers={...u,...d,...t.headers};const f=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=f?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}}}},re=function(o){return{async addItemForLater(e,t,s){const a=await ne(o).addItemForLater(e,t,s);return(l=z,n=W)=>{const u={...a.options,url:n+a.url};return l.request(u)}},async addItemToCollection(e,t,s,a){const l=await ne(o).addItemToCollection(e,t,s,a);return(n=z,u=W)=>{const p={...l.options,url:u+l.url};return n.request(p)}},async collectionsIdDelete(e,t){const s=await ne(o).collectionsIdDelete(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async create(e,t){const s=await ne(o).create(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async detail(e,t){const s=await ne(o).detail(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async getCurrentSaveInfo(e,t,s){const a=await ne(o).getCurrentSaveInfo(e,t,s);return(l=z,n=W)=>{const u={...a.options,url:n+a.url};return l.request(u)}},async listCollectionItems(e,t,s,a){const l=await ne(o).listCollectionItems(e,t,s,a);return(n=z,u=W)=>{const p={...l.options,url:u+l.url};return n.request(p)}},async listUserCollections(e,t,s,a,l,n){const u=await ne(o).listUserCollections(e,t,s,a,l,n);return(p=z,h=W)=>{const d={...u.options,url:h+u.url};return p.request(d)}},async removeItemFromCollection(e,t,s,a){const l=await ne(o).removeItemFromCollection(e,t,s,a);return(n=z,u=W)=>{const p={...l.options,url:u+l.url};return n.request(p)}},async updateCollection(e,t){const s=await ne(o).updateCollection(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}}}};class me extends vt{async addItemForLater(e,t,s){return re(this.configuration).addItemForLater(e,t,s).then(a=>a(this.axios,this.basePath))}async addItemToCollection(e,t,s,a){return re(this.configuration).addItemToCollection(e,t,s,a).then(l=>l(this.axios,this.basePath))}async collectionsIdDelete(e,t){return re(this.configuration).collectionsIdDelete(e,t).then(s=>s(this.axios,this.basePath))}async create(e,t){return re(this.configuration).create(e,t).then(s=>s(this.axios,this.basePath))}async detail(e,t){return re(this.configuration).detail(e,t).then(s=>s(this.axios,this.basePath))}async getCurrentSaveInfo(e,t,s){return re(this.configuration).getCurrentSaveInfo(e,t,s).then(a=>a(this.axios,this.basePath))}async listCollectionItems(e,t,s,a){return re(this.configuration).listCollectionItems(e,t,s,a).then(l=>l(this.axios,this.basePath))}async listUserCollections(e,t,s,a,l,n){return re(this.configuration).listUserCollections(e,t,s,a,l,n).then(u=>u(this.axios,this.basePath))}async removeItemFromCollection(e,t,s,a){return re(this.configuration).removeItemFromCollection(e,t,s,a).then(l=>l(this.axios,this.basePath))}async updateCollection(e,t){return re(this.configuration).updateCollection(e,t).then(s=>s(this.axios,this.basePath))}}function ct(){return{animate:t=>{const s=document.getElementById(t);s==null||s.classList.add("animate-bounce"),setInterval(()=>{s==null||s.classList.remove("animate-bounce")},2500)}}}function xt(){const o=(t,s,a)=>{s.value=!1,clearTimeout(t),s.value=!0,t=setTimeout(()=>{s.value=!1,e(a)},2e3)},e=t=>{const s=document.getElementById(t);s==null||s.classList.add("fade"),s==null||s.classList.add("fade-out")};return{splash:o,hide:e}}const Me=!1,ca=o=>typeof o=="string",Ge=()=>{};function Ze(o){return typeof o=="function"?o():O(o)}function ua(o){return o}function et(o){return ta()?(aa(o),!0):!1}function da(o){return typeof o=="function"?Le(o):b(o)}function ma(o,e=!0){sa()||(e?o():oa(o))}function pa(o,e,t={}){const{immediate:s=!0}=t,a=b(!1);let l=null;function n(){l&&(clearTimeout(l),l=null)}function u(){a.value=!1,n()}function p(...h){n(),a.value=!0,l=setTimeout(()=>{a.value=!1,l=null,o(...h)},Ze(e))}return s&&(a.value=!0),et(u),{isPending:a,start:p,stop:u}}function ha(o){var e;const t=Ze(o);return(e=t==null?void 0:t.$el)!=null?e:t}const _t=Me?window:void 0;Me&&window.document;const va=Me?window.navigator:void 0;Me&&window.location;function fa(...o){let e,t,s,a;if(ca(o[0])?([t,s,a]=o,e=_t):[e,t,s,a]=o,!e)return Ge;let l=Ge;const n=Oe(()=>ha(e),p=>{l(),p&&(p.addEventListener(t,s,a),l=()=>{p.removeEventListener(t,s,a),l=Ge})},{immediate:!0,flush:"post"}),u=()=>{n(),l()};return et(u),u}function Ct(o,e=!1){const t=b(),s=()=>t.value=Boolean(o());return s(),ma(s,e),t}function wa(o,e={}){const{window:t=_t}=e,s=Ct(()=>t&&"matchMedia"in t&&"undefined".matchMedia==="function");let a;const l=b(!1),n=()=>{!a||("removeEventListener"in a?a.removeEventListener("change",u):a.removeListener(u))},u=()=>{!s.value||(n(),a=t.matchMedia(da(o).value),l.value=a.matches,"addEventListener"in a?a.addEventListener("change",u):a.addListener(u))};return la(u),et(()=>n()),l}function $t(o={}){const{navigator:e=va,read:t=!1,source:s,copiedDuring:a=1500}=o,l=["copy","cut"],n=Ct(()=>e&&"clipboard"in e),u=b(""),p=b(!1),h=pa(()=>p.value=!1,a);function d(){e.clipboard.readText().then(w=>{u.value=w})}if(n.value&&t)for(const w of l)fa(w,d);async function f(w=Ze(s)){n.value&&w!=null&&(await e.clipboard.writeText(w),u.value=w,p.value=!0,h.start())}return{isSupported:n,text:u,copied:p,copy:f}}const Ke=typeof globalThis<"u"?globalThis:typeof global<"u"?global:typeof self<"u"?self:{},Xe="__vueuse_ssr_handlers__";Ke[Xe]=Ke[Xe]||{};Ke[Xe];var ut;(function(o){o.UP="UP",o.RIGHT="RIGHT",o.DOWN="DOWN",o.LEFT="LEFT",o.NONE="NONE"})(ut||(ut={}));var ga=Object.defineProperty,dt=Object.getOwnPropertySymbols,ya=Object.prototype.hasOwnProperty,ba=Object.prototype.propertyIsEnumerable,mt=(o,e,t)=>e in o?ga(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,ka=(o,e)=>{for(var t in e||(e={}))ya.call(e,t)&&mt(o,t,e[t]);if(dt)for(var t of dt(e))ba.call(e,t)&&mt(o,t,e[t]);return o};const xa={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};ka({linear:ua},xa);function _a(){return{readMore:(e,t,s,a)=>{const l=document.getElementById(`${a}${t}`);l!==null&&(l.innerHTML=e);const n=document.getElementById(`${s}${t}`);n==null||n.remove()}}}const Ca={class:"flex-col info"},$a={key:0,class:"user-info"},Ia={class:"flex flex-row w-full"},Aa=["src"],Ra={class:"w-full name"},Sa={class:"flex flex-row justify-between"},Pa={class:"flex flex-col"},La={class:"mb-2 text-base font-bold"},Oa={key:1,class:"mb-4"},Ua=["id","innerHTML"],Va=["id"],Ea={class:"mb-4"},qa={key:2,class:"tags"},Ma={__name:"ModalViewInfo",props:{section:{type:String,default:""},isModal:{type:Boolean,default:!1},artworkDetail:{type:Object,default:()=>{}},previewMode:{type:Boolean,default:!1},isDesktop:{type:Boolean,default:!1}},setup(o){ft();const e=(t,s,a,l)=>{_a().readMore(t,s,a,l)};return(t,s)=>{const a=Re;return y(),x("section",Ca,[o.artworkDetail.users?(y(),x("div",$a,[r("div",Ia,[k(a,{to:"/profile/"+o.artworkDetail.users.username},{default:K(()=>[r("img",{class:"avatar",src:t.avatarCoverUrl(o.artworkDetail.users.avatar_bucket,o.artworkDetail.users.avatar_filename),onError:s[0]||(s[0]=(...l)=>t.imageLoadError&&t.imageLoadError(...l))},null,40,Aa)]),_:1},8,["to"]),r("div",Ra,[r("div",Sa,[r("div",Pa,[k(a,{to:"/profile/"+o.artworkDetail.users.username,class:"fullname"},{default:K(()=>[B(g(o.artworkDetail.users.name),1)]),_:1},8,["to"]),k(a,{to:"/profile/"+o.artworkDetail.users.username,class:"username"},{default:K(()=>[B(" @"+g(o.artworkDetail.users.username),1)]),_:1},8,["to"])]),I(r("div",{class:"p-1 h-7 font-bold rounded-md border-2 cursor-pointer hover:shadow-md border-color-primary",style:{"font-size":"10px"},onClick:s[1]||(s[1]=l=>t.closeModal(o.section+"-modal"))}," ESC ",512),[[R,o.isModal]])])])])])):S("",!0),r("div",La,g(o.artworkDetail.title),1),o.artworkDetail.description?(y(),x("div",Oa,[r("span",{id:"mview-"+o.isDesktop+"-description-"+o.artworkDetail.id,innerHTML:o.artworkDetail.description.length>300?`${o.artworkDetail.description.slice(0,300)}...`:o.artworkDetail.description},null,8,Ua),o.artworkDetail.description.length>300?(y(),x("a",{key:0,id:"mview-"+o.isDesktop+"-read-more-"+o.artworkDetail.id,class:"href",onClick:s[2]||(s[2]=pe(l=>e(o.artworkDetail.description,o.artworkDetail.id,"mview-"+o.isDesktop+"-read-more-","mview-"+o.isDesktop+"-description-"),["prevent"]))},g(t.$t("readMore")),9,Va)):S("",!0)])):S("",!0),r("div",Ea,[r("span",{class:D(["italic text-color-secondary",{"font-bold text-red-400":o.previewMode}])},g(o.previewMode?t.$t("willBePublishedOn"):t.$t("publishedOn")),3),B(" "+g(t.formatDate(o.artworkDetail.scheduled_post)),1)]),o.artworkDetail.artwork_has_tags&&o.artworkDetail.artwork_has_tags.length?(y(),x("div",qa,[(y(!0),x(he,null,ve(o.artworkDetail.artwork_has_tags,l=>(y(),x("span",{key:l.artwork_tags.id,class:"tag"},[k(a,{to:"/works/browse?tags="+l.artwork_tags.tag.replaceAll(" ","+")},{default:K(()=>[B(g(l.artwork_tags.tag),1)]),_:2},1032,["to"])]))),128))])):S("",!0)])}}},pt=fe(Ma,[["__scopeId","data-v-35c1316f"]]),Ta=["href","onClick"],Ba={class:"overflow-hidden relative text-center rounded-md"},Fa={key:0},ja={key:1,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Da=["href"],Na=["src"],Ha={class:"overflow-hidden relative text-center rounded-md"},Qa={key:0},za={key:1,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Wa=["href"],Ga=["src"],Ja={__name:"WorkList",props:{works:{type:Array,default:()=>[]},view:{type:Function,default:()=>{}},sectionClass:{type:String,default:""},isHref:{type:Boolean,default:!1},manageMode:{type:Boolean,default:!1},isMiniList:{type:Boolean,default:!1},currentWorkId:{type:Number,default:0}},emits:"feedManageList",setup(o,{emit:e}){const t=o,s=Ve();Oe(()=>t.currentWorkId,d=>{l.value=d});const a=Xt(),l=b(t.currentWorkId),n=wa("(min-width: 1024px)"),u=d=>{n.value&&!t.isMiniList||t.isMiniList?(l.value=d,t.view(d)):a.replace({path:"/a/"+d})},p=b([]),h=d=>{if(p.value.includes(d)){const f=p.value.indexOf(d);p.value.splice(f,1)}else p.value.push(d);e("feedManageList",p.value)};return Oe(()=>t.manageMode,d=>{d===!1&&(p.value=[])}),(d,f)=>{const w=Re;return y(),x("section",{class:D(o.sectionClass)},[(y(!0),x(he,null,ve(o.works,i=>(y(),x("span",{key:i.id,class:D(["work-thumbnail theme-color-bg rounded-lg",i._count.artwork_assets>1&&l.value!=i.id?"work-multiple":"",{"border-4 border-yellow-400":p.value.includes(i.id)||l.value==i.id}])},[!d.isMobile()&&!o.isHref&&!o.isMiniList?(y(),x("a",{key:0,href:"/a/"+i.id,onClick:pe(c=>o.manageMode?h(i.id):o.view(i.id),["prevent"]),class:"w-full h-full theme-color-bg"},[r("div",Ba,[i._count.artwork_assets>1&&!d.applyExplicitFilter(O(s),i.is_explicit)?(y(),x("p",Fa,g(i._count.artwork_assets),1)):S("",!0),d.applyExplicitFilter(O(s),i.is_explicit)?(y(),x("span",ja,g(d.$t("explicitContent")),1)):S("",!0),r("a",{href:"/a/"+i.id,class:D([{"animate-wigglefast":o.manageMode}])},[r("img",{class:D(["object-cover w-full h-full unselectable",{"blur-3xl brightness-50 unclickable":d.applyExplicitFilter(O(s),i.is_explicit)}]),src:d.artworkThumb(i.artwork_assets[0].bucket,i.artwork_assets[0].filename,"thumbnail"),onError:f[0]||(f[0]=(...c)=>d.imageLoadError&&d.imageLoadError(...c))},null,42,Na)],10,Da)])],8,Ta)):(y(),ie(w,{key:1,onClick:c=>o.manageMode?h(i.id):u(i.id)},{default:K(()=>[r("div",Ha,[i._count.artwork_assets>1&&!d.applyExplicitFilter(O(s),i.is_explicit)?(y(),x("p",Qa,g(i._count.artwork_assets),1)):S("",!0),d.applyExplicitFilter(O(s),i.is_explicit)?(y(),x("span",za,g(d.$t("explicitContent")),1)):S("",!0),r("a",{href:"/a/"+i.id,onClick:f[2]||(f[2]=pe(c=>d.void,["prevent"])),class:D([{"animate-wigglefast":o.manageMode}])},[r("img",{class:D(["object-cover w-full h-full unselectable",{"blur-3xl brightness-50 unclickable":d.applyExplicitFilter(O(s),i.is_explicit)}]),src:d.artworkThumb(i.artwork_assets[0].bucket,i.artwork_assets[0].filename,"thumbnail"),onError:f[1]||(f[1]=(...c)=>d.imageLoadError&&d.imageLoadError(...c))},null,42,Ga)],10,Wa)])]),_:2},1032,["onClick"]))],2))),128))],2)}}},Ya=fe(Ja,[["__scopeId","data-v-a0a41970"]]),Ka={class:"artist-works"},Xa={class:"heading"},Za={key:0,class:"pagination-controller"},es={__name:"ArtistWorks",props:{artworkDetail:{type:Object,default(){return{}}},keepArtistPageNumber:{type:Boolean,default:!1},view:Function,isHref:{type:Boolean,default:!1},paginationPerPage:{type:Number,default:4}},setup(o){const e=o,t=e.artworkDetail,{oApiConfiguration:s,fetchOptions:a}=_e(),l=gt(s,a()),n=b(null);qe(()=>{e.keepArtistPageNumber||(h.page=-1),d(t.users.id)});const u=b(!0),p=b([]),h=Je({page:0,perPage:e.paginationPerPage,options:{nextPrevLoading:!1,disableArtistNextButton:!0,disableArtistPrevButton:!0}}),d=async(i,c)=>{u.value=!0,h.options.nextPrevLoading=!0,i!==n.value&&(n.value=i,h.page=-1),c==="prev"?h.page-=1:h.page+=1;const[_,$,L]=await l.getUserArtworks({userId:i,pagination:{page:h.page,perPage:h.perPage}});L?(u.value=!1,w()):($.next_previous.prev_page===null||$.next_previous.prev_page===void 0?h.options.disableArtistPrevButton=!0:h.options.disableArtistPrevButton=!1,$.next_previous.next_page===null||$.next_previous.next_page===void 0?h.options.disableArtistNextButton=!0:h.options.disableArtistNextButton=!1,p.value=_),h.options.nextPrevLoading=!1,u.value=!1},f=b(!1),w=()=>{f.value=!0};return(i,c)=>{const _=Re;return y(),x("div",Ka,[r("div",Xa,[r("span",null,[B(g(i.$t("artworks.moreArtworkBy"))+" ",1),o.artworkDetail.users?(y(),ie(_,{key:0,to:"/profile/"+o.artworkDetail.users.username,class:"text-colored"},{default:K(()=>[B(g(o.artworkDetail.users.username)+" <"+g(o.artworkDetail.users.name)+"> ",1)]),_:1},8,["to"])):S("",!0)]),k(_,{to:"/profile/"+o.artworkDetail.users.username,target:"_blank",class:"flex flex-row cursor-pointer"},{default:K(()=>[k(V,{name:"i-ci-external-link"})]),_:1},8,["to"])]),k(Ee,{loading:u.value,error:f.value,class:"mt-2"},null,8,["loading","error"]),I(k(Ya,{class:D(["gap-2 md:gap-4",[h.options.nextPrevLoading?"animate-pulse":"",o.paginationPerPage===6?"grid-cols-6":"grid-cols-4"]]),"section-class":"works",works:p.value,view:o.view,"is-href":o.isHref,"is-mini-list":!0,"current-work-id":o.artworkDetail.id},null,8,["class","works","view","is-href","current-work-id"]),[[R,!u.value&&!f.value]]),o.artworkDetail.users?I((y(),x("div",Za,[r("span",{onClick:c[0]||(c[0]=$=>h.options.disableArtistPrevButton?null:d(o.artworkDetail.users.id,"prev"))},[k(V,{name:"i-ion-chevron-back"})]),r("span",{onClick:c[1]||(c[1]=$=>h.options.disableArtistNextButton?null:d(o.artworkDetail.users.id,"next"))},[k(V,{name:"i-ion-chevron-forward"})])],512)),[[R,!u.value]]):S("",!0)])}}},ht=fe(es,[["__scopeId","data-v-a626d965"]]);function ts(o,e){return{createCollection:async(i,c)=>{try{const{data:_}=await new me(o).create({name:c.title,description:c.description,is_public:c.isPublic?1:0,type:i},e);return[_.success,_.data,null]}catch(_){return[null,null,_]}},getInfo:async i=>{try{return[(await new me(o).detail(i,e)).data,null]}catch(c){return[null,c]}},countCollections:async i=>{try{const{data:c}=await new Ue(o).countUserCollections(i,e);return[c.data.total,null]}catch(c){return[null,c]}},countArtworkCollections:async i=>{try{const{data:c}=await new Ue(o).countUserArtworkCollections(i,e);return[c.data.total,null]}catch(c){return[null,c]}},fetchCollections:async i=>{try{const{data:c}=await new me(o).listUserCollections(i.userId,i.type,i.pagination.page,i.pagination.perPage,i.name,e),_=c.data.collections,$=c.data.pagination;let L=!0;return $.current_page===$.total_page&&(L=!1),[_,L,null]}catch(c){return[null,!1,c]}},listCollectionItems:async i=>{try{const{data:c}=await new me(o).listCollectionItems(i.collectionId,i.pagination.perPage,i.pagination.page,e),_=c.data.pagination;let $=!0;return _.current_page===_.total_page&&($=!1),[c.data.items,$,null]}catch(c){return[null,!1,c]}},getCurrentSaveInfo:async(i,c)=>{try{const{data:_}=await new me(o).getCurrentSaveInfo(i,c,e);return[_.data,null]}catch(_){return[null,_]}},addItem:async i=>{try{return await new me(o).addItemToCollection(i.type,i.collectionId,{id:i.workId},e),[!0,null]}catch(c){return[null,c]}},removeItem:async i=>{try{const{data:c}=await new me(o).removeItemFromCollection(i.type,i.collectionId,{id:i.workId},e);return[c.success,null]}catch(c){return[null,c]}},update:async i=>{try{const{data:c}=await new me(o).updateCollection({id:i.id,name:i.name,description:i.description,is_public:i.isPublic},e);return[c.success,null]}catch(c){return[null,c]}},deleteCollection:async i=>{try{const{data:c}=await new me(o).collectionsIdDelete(i,e);return[c.success,null]}catch(c){return[null,c]}}}}const as={class:"w-full modal-layer xl:w-3/12 lg:w-2/5"},ss={class:"flex flex-row justify-between w-full"},os={class:"title"},ls={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},ns={class:"list"},rs={class:"overflow-y-scroll pr-2 max-h-60"},is=["onClick"],cs={class:"flex flex-row justify-between"},us={class:"flex float-right flex-row gap-2 mt-4"},ds=["placeholder"],ms={class:"flex flex-row justify-between mt-2"},ps={__name:"ManageSave",props:{modalId:{type:String,default:"collection-selection-modal"},workId:{type:Number,default:0}},emits:["save"],setup(o,{expose:e,emit:t}){const s=o,a=Ve(),{oApiConfiguration:l,fetchOptions:n}=_e(),u=ts(l,n());qe(()=>{w(),c()});const p=b({pagination:{page:0,perPage:10},loading:!1}),h=b(!1),d=b(!1),f=b([]),w=async(q=!1)=>{f.value=[],q||(p.value.loading=!0);const[M,Q,ye]=await u.fetchCollections({userId:a.user.id,type:"artwork",pagination:{page:p.value.pagination.page,perPage:p.value.pagination.perPage}});p.value.loading=!1,ye&&(h.value=!0),ye||(M&&M.length>0?(Q?(p.value.pagination.page+=1,_.value=!0):_.value=!1,M.forEach(se=>{f.value.push(se)})):d.value=!0)},i=b([]),c=async()=>{h.value=!1,i.value=[],L.value=[],P.value=[],await setTimeout(async()=>{const[q,M]=await u.getCurrentSaveInfo("artwork",s.workId);if(M)h.value=!0;else for(const Q of q)L.value.push(Q.collection_id),i.value.push(Q.collection_id)},300)},_=b(!0),$=async()=>{await w({isLoadMore:!0}),await c()},L=b([]),P=b([]),G=q=>{if(L.value.includes(q)){P.value.push(q);const M=L.value.indexOf(q);L.value.splice(M,1)}else if(L.value.push(q),P.value.includes(q)){const M=P.value.indexOf(q);P.value.splice(M,1)}},J=async()=>{try{for(const M of L.value)await u.addItem({collectionId:M,type:"artwork",workId:s.workId});if(P.value.length)for(const M of P.value)await u.removeItem({collectionId:M,type:"artwork",workId:s.workId});let q=!1;L.value.length===0&&i.value.length===P.value.length&&(q=!0),await c(),X().closeModal(s.modalId),t("save",q)}catch{}},Y=b(""),A=b(!1),oe=async()=>{A.value=!1;const[q,M,Q]=await u.createCollection("artwork",{title:Y.value,isPublic:1,description:""});q?(f.value=[],H(),p.value.pagination.page=0,await w(),await c(),Y.value="",N()):A.value=!0},ae=b(!1),N=()=>{ae.value=!0,setInterval(()=>{ae.value=!1},5e3)},H=()=>{L.value=[]},F=()=>{X().closeModal(s.modalId),H()};return e({fetchCollection:w,fetchCurrentSaved:c}),(q,M)=>(y(),x("div",null,[r("div",as,[r("div",null,[r("div",ss,[r("span",os,g(q.$t("collections.addItem.form.title")),1),r("div",ls,[r("div",{class:"modal-close",onClick:M[0]||(M[0]=Q=>F())},[k(V,{name:"close",class:"text-2xl"})])])]),I(r("div",ns,[r("div",rs,[(y(!0),x(he,null,ve(f.value,(Q,ye)=>(y(),x("div",{key:Q.id,class:D(["item",[{"mt-2":ye!==0},L.value.includes(Q.id)?"button-color text-white":"theme-color-secondary"]]),onClick:se=>G(Q.id)},[r("div",cs,[r("span",null,g(Q.name),1),r("span",{class:D(["ml-2 font-bold",L.value.includes(Q.id)?"text-white":"text-colored"])},g(Q._count.collection_has_artworks),3)])],10,is))),128))]),I(r("div",{class:"mt-2 primary-button",onClick:M[1]||(M[1]=Q=>$())},[k(V,{name:"chevron-down-outline",class:"mr-2"}),B(" "+g(q.$t("loadMore")),1)],512),[[R,_.value]]),r("div",us,[r("button",{class:"cancel-button",onClick:M[2]||(M[2]=Q=>F())},g(q.$t("cancel")),1),r("button",{class:"primary-button",onClick:M[3]||(M[3]=Q=>J())},g(q.$t("save")),1)])],512),[[R,!p.value.loading&&!h.value&&!d.value]]),I(r("div",null,[I(r("input",{"onUpdate:modelValue":M[4]||(M[4]=Q=>Y.value=Q),type:"text",class:D(["mt-4 mb-0 form-input theme-color-secondary",{"border border-red-400":A.value}]),placeholder:q.$t("collections.createNewCollection")},null,10,ds),[[Ae,Y.value]]),r("div",ms,[r("div",null,[I(r("span",{class:"font-bold text-green-400 transition-all duration-200 ease-in-out"},g(q.$t("collections.collectionCreated")),513),[[R,ae.value]]),I(r("span",{class:"font-bold text-red-400 transition-all duration-200 ease-in-out"},g(q.$t("collections.failedToCreateCollection")),513),[[R,A.value]])]),I(r("button",{class:"primary-button",onClick:M[5]||(M[5]=Q=>oe())},g(q.$t("create")),513),[[R,Y.value&&Y.value.length>0]])])],512),[[R,!p.value.loading&&!h.value&&!d.value]])]),k(Ee,{loading:p.value.loading,empty:d.value,error:h.value,fetch:w},null,8,["loading","empty","error"])])]))}},hs=fe(ps,[["__scopeId","data-v-61879341"]]);function vs(o,e){return{createAlbum:async(i,c)=>{try{const{data:_}=await new de(o).createAlbum({name:c.title,description:c.description,is_public:c.isPublic?1:0,type:i},e);return[_.success,_.data,null]}catch(_){return[null,null,_]}},getInfo:async i=>{try{return[(await new de(o).getAlbumById(i,e)).data,null]}catch(c){return[null,c]}},countAlbums:async i=>{try{const{data:c}=await new Ue(o).countUserAlbums(i,e);return[c.data.total,null]}catch(c){return[null,c]}},countArtworkAlbums:async i=>{try{const{data:c}=await new Ue(o).countUserArtworkAlbums(i,e);return[c.data.total,null]}catch(c){return[null,c]}},fetchAlbums:async(i,c,_,$)=>{try{const{data:L}=await new de(o).listUserAlbums(i,_,$,c,e),P=L.data.pagination;let G=!0;return P.current_page===P.total_page&&(G=!1),[L.data.albums,G,null]}catch(L){return[null,!1,L]}},listAlbumItems:async i=>{try{const{data:c}=await new de(o).getAlbumItems(i.albumId,i.pagination.perPage,i.pagination.page,e),_=c.data.pagination;let $=!0;return _.current_page===_.total_page&&($=!1),[c.data.works,$,null]}catch(c){return[null,!1,c]}},getCurrentSaveInfo:async(i,c)=>{try{const{data:_}=await new de(o).getCurrentAlbumSaveInfo(i,c,e);return[_.data,null]}catch(_){return[null,_]}},addItems:async(i,c)=>{try{for(const _ of i)await new de(o).addWorkToAlbum({album_id:_,work_ids:c},e);return[!0,null]}catch(_){return[null,_]}},removeItems:async(i,c)=>{try{const{data:_}=await new de(o).removeWorkFromAlbum({album_id:i,work_ids:c},e);return[_.success,null]}catch(_){return[null,_]}},update:async i=>{try{const{data:c}=await new de(o).updateAlbum({id:i.id,name:i.name,description:i.description,is_public:i.isPublic},e);return[c.success,null]}catch(c){return[null,c]}},deleteAlbum:async i=>{try{const{data:c}=await new de(o).deleteAlbum(i,e);return[c.success,null]}catch(c){return[null,c]}}}}const fs={class:"w-full modal-layer xl:w-3/12 lg:w-2/5"},ws={class:"flex flex-row justify-between w-full"},gs={class:"title"},ys={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},bs={class:"list"},ks={class:"overflow-y-scroll pr-2 max-h-60"},xs=["onClick"],_s={class:"flex float-right flex-row gap-2 mt-4"},Cs={__name:"ManageAlbum",props:{modalId:{type:String,default:"album-selection-modal"},workId:{type:Number,default:0},workIds:{type:Array,default:()=>[]}},emits:["addedToAlbum"],setup(o,{expose:e,emit:t}){const s=o;qe(()=>{c(),s.workIds.length||L()});const a=Ve(),{oApiConfiguration:l,fetchOptions:n}=_e(),u=vs(l,n()),p=async()=>{h.value=[],d.value.pagination.page=0,_(),await c()},h=b([]),d=b({pagination:{perPage:10,page:0,firstLoad:10},showLoadMore:!0}),f=b(!0),w=b(!1),i=b(!1),c=async()=>{_(),f.value=!0;const[N,H,F]=await u.fetchAlbums(a.user.id,"artwork",d.value.pagination.page===0?d.value.pagination.firstLoad:d.value.pagination.perPage,d.value.pagination.page);F&&(w.value=!0),N.length?(H?(d.value.pagination.page+=1,d.value.showLoadMore=!0):d.value.showLoadMore=!1,N.forEach(q=>{h.value.push(q)})):i.value=!0,f.value=!1},_=()=>{i.value=!1,w.value=!1},$=b([]),L=async()=>{$.value=[],G.value=[],J.value=[];const[N,H]=await u.getCurrentSaveInfo("artwork",s.workId);for(const F of N)G.value.push(F.album_id),$.value.push(F.album_id)},P=async()=>{await c(),await L()},G=b([]),J=b([]),Y=N=>{if(G.value.includes(N)){J.value.push(N);const H=G.value.indexOf(N);G.value.splice(H,1)}else if(G.value.push(N),J.value.includes(N)){const H=J.value.indexOf(N);J.value.splice(H,1)}},A=async()=>{const[N,H]=await u.addItems(G.value,s.workIds.length?s.workIds:[s.workId]);if(!s.workIds.length&&J.value.length)for(const F of J.value)await u.removeItems(F,[s.workId]);if(N){let F=!1;s.workIds.length||G.value.length===0&&$.value.length===J.value.length&&(F=!0),oe(),X().closeModal(s.modalId),t("addedToAlbum",s.workIds.length?!0:F)}},oe=()=>{G.value=[]},ae=()=>{X().closeModal(s.modalId),oe()};return e({fetchCurrentSaved:L,fetchAlbums:c}),(N,H)=>(y(),x("div",null,[r("div",fs,[r("div",null,[r("div",ws,[r("span",gs,g(N.$t("albums.selectAlbums")),1),r("div",ys,[r("div",{class:"modal-close",onClick:H[0]||(H[0]=F=>ae())},[k(V,{name:"close",class:"text-2xl"})])])]),r("div",bs,[I(r("div",null,[r("div",ks,[(y(!0),x(he,null,ve(h.value,(F,q)=>(y(),x("div",{key:F.id,class:D(["item",[{"mt-2":q!==0},G.value.includes(F.id)?"button-color text-white":"theme-color-secondary"]]),onClick:M=>Y(F.id)},[r("span",null,g(F.name),1),r("span",{class:D(["ml-2 font-bold",G.value.includes(F.id)?"text-white":"text-colored"])},g(F._count.album_has_artworks),3)],10,xs))),128))]),I(r("div",{class:"mt-2 primary-button",onClick:H[1]||(H[1]=F=>P())}," Load More ",512),[[R,d.value.showLoadMore]]),r("div",_s,[r("button",{class:"cancel-button",onClick:H[2]||(H[2]=F=>ae())},g(N.$t("cancel")),1),r("button",{class:"primary-button",onClick:H[3]||(H[3]=F=>A())},g(N.$t("save")),1)])],512),[[R,!f.value&&!i.value&&!w.value]])])]),k(Ee,{loading:f.value,empty:i.value,error:w.value,fetch:p},null,8,["loading","empty","error"])])]))}},$s=fe(Cs,[["__scopeId","data-v-92721f88"]]),Is={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},As={class:"mb-4"},Rs={class:"flex flex-row justify-end gap-2"},Ss={__name:"ConfirmationDialog",props:{modalId:{type:String,default:"confirmation-dialog-modal"},message:{type:String,default:"Are you sure?"},onAccept:{type:Function,default:()=>{}}},emits:"onAccept",setup(o,{emit:e}){const t=o,s=a=>{a&&e("onAccept",!0),X().closeModal(t.modalId)};return(a,l)=>(y(),x("div",null,[r("div",Is,[r("p",As,g(o.message),1),r("div",Rs,[r("button",{class:"cancel-button",onClick:l[0]||(l[0]=n=>s(!1))},g(a.$t("no")),1),r("button",{class:"danger-button",onClick:l[1]||(l[1]=n=>s(!0))},g(a.$t("yes")),1)])])]))}},Ps={class:"splash"},Ls={class:"flex flex-row"},Os={__name:"SplashAlert",props:{text:{type:String,default:""},icon:{type:String,default:"checkmark-outline"}},setup(o){return(e,t)=>(y(),x("div",Ps,[r("div",Ls,[k(V,{name:o.icon,class:"mr-2 text-base"},null,8,["name"]),r("span",null,g(o.text),1)])]))}},It=fe(Os,[["__scopeId","data-v-86e964a1"]]),At=o=>(bt("data-v-93d8d761"),o=o(),kt(),o),Us={class:"opt-modal modal-layer"},Vs={class:"opt-modal__title"},Es={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},qs={class:"opt-modal__content"},Ms={class:"report"},Ts={class:"report__reason_opt"},Bs={class:"report__title"},Fs=["onClick"],js={class:"report__title"},Ds=["placeholder"],Ns={class:"report__buttons"},Hs={class:"text-justify"},Qs={class:"mt-2"},zs=At(()=>r("i",null,"Your report ID:",-1)),Ws=B("\xA0 "),Gs=At(()=>r("i",null,"Report date:",-1)),Js=B("\xA0 "),Ys={__name:"ReportModal",props:{type:{type:String,default:""},postId:{type:Number,default:0},reportStatus:{type:Object,default:()=>{}}},setup(o){const e=o,{oApiConfiguration:t,fetchOptions:s}=_e(),a=yt(t,s()),l=b(["stolen","spam","hateSpeech","harassment","falseInfo","suicide","graphic","terrorism","somethingElse"]),n=b({selectedReasons:[],reasonDescription:"",enableSubmit:Le(()=>n.value.selectedReasons.length>0&&n.value.reasonDescription!=="")}),u=i=>{if(!n.value.selectedReasons.includes(i))n.value.selectedReasons.push(i);else{const c=n.value.selectedReasons.indexOf(i);n.value.selectedReasons.splice(c,1)}},p=b(!1),h=b({}),d=async()=>{p.value=!1,h.value={};const[i,c,_]=await a.createNewReport({type:e.type,postId:e.postId,reasons:n.value.selectedReasons.join(","),description:n.value.reasonDescription});_&&!i||(p.value=!0,h.value=c)},f=()=>{X().closeModal("report-modal"),w()},w=()=>{n.value.selectedReasons=[],n.value.reasonDescription="",p.value=!1};return(i,c)=>{const _=Re;return y(),x("div",null,[r("div",Us,[r("div",Vs,[r("h1",null,g(p.value?i.$t("reports.reportSubmitted"):o.reportStatus.id?i.$t("reports.alreadyReported"):i.$t("reports.title")),1),r("div",Es,[r("div",{class:"modal-close",onClick:c[0]||(c[0]=$=>f())},[k(V,{name:"i-ion-close",class:"text-2xl"})])])]),r("div",qs,[I(r("div",Ms,[r("div",Ts,[r("div",Bs,g(i.$t("reports.selectReasons")),1),(y(!0),x(he,null,ve(l.value,$=>(y(),x("span",{key:$,class:D([n.value.selectedReasons.includes($)?"button-color":"theme-color-secondary"]),onClick:L=>u($)},[r("div",null,[I(k(V,{name:"i-ion-square-outline",class:"text-color-secondary"},null,512),[[R,!n.value.selectedReasons.includes($)]]),I(k(V,{name:"i-ion-checkbox-outline",class:"text-green-300"},null,512),[[R,n.value.selectedReasons.includes($)]])]),r("div",{class:D(["reason",[n.value.selectedReasons.includes($)?"text-white":"text-color-secondary"]])},g(i.$t("reports.reasons."+$)),3)],10,Fs))),128))]),r("div",null,[r("div",js,g(i.$t("reports.describeReason")),1),I(r("textarea",{"onUpdate:modelValue":c[1]||(c[1]=$=>n.value.reasonDescription=$),class:"report__reason_description",placeholder:i.$t("reports.describeText"),cols:"5",rows:"5"},null,8,Ds),[[Ae,n.value.reasonDescription]])]),r("div",Ns,[r("button",{class:"cancel-button",onClick:c[2]||(c[2]=$=>f())},g(i.$t("cancel")),1),r("button",{class:D(n.value.enableSubmit?"primary-button":"disabled-button"),onClick:c[3]||(c[3]=$=>n.value.enableSubmit?d():null)},g(i.$t("report")),3)])],512),[[R,!p.value&&!o.reportStatus.id]]),I(r("div",null,[r("div",Hs,g(i.$t("reports.reportSubmittedMessage")),1),r("div",Qs,[r("div",null,[zs,Ws,r("b",null,"#"+g(h.value.id),1)]),r("div",null,[Gs,Js,r("b",null,g(i.formatDate(h.value.created_at)),1)])])],512),[[R,p.value]]),I(r("div",null,[B(g(i.$t("reports.alreadyReportedDescription"))+" ",1),k(_,{class:"underline href",to:"/reports"},{default:K(()=>[B(g(i.$t("reports.reportStatus")),1)]),_:1})],512),[[R,o.reportStatus.id]])])])])}}},Ks=fe(Ys,[["__scopeId","data-v-93d8d761"]]),Xs={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Zs={class:"title"},eo={class:"mt-2"},to={class:"alert-success"},ao={class:"italic"},so={class:"flex flex-row p-2 mb-2 text-white rounded-md button-color"},oo=["placeholder"],lo={class:"flex flex-row gap-2 justify-end"},no={class:"flex flex-row justify-between mt-6"},ro=["value"],io={__name:"ShareArtworkToFeedModal",props:{postId:{type:Number,default:0}},setup(o){const e=o,{oApiConfiguration:t,fetchOptions:s}=_e(),a=ia(t,s()),l=wt(),n=()=>{p.value=""},u=()=>{h.value=!1,d.value=!1,f.value=!1,X().closeModal("share-to-feed-modal"),n()},p=b(""),h=b(!1),d=b(!1),f=b(!1),w=async()=>{h.value=!1,d.value=!0,f.value=!1;const[$,L,P]=await a.shareArtworkToFeed({text:p.value,workId:e.postId});$?(f.value=!0,setTimeout(()=>{u()},500)):h.value=!0,d.value=!1},i=b(!1);let c;const _=$=>{const L=b($),{copy:P}=$t({source:L});P(),xt().splash(c,i,"copy-alert")};return($,L)=>(y(),x("div",null,[r("div",Xs,[r("span",Zs,g($.$t("feeds.share.artwork.title")),1),r("div",eo,[I(r("div",to,[r("span",ao,g($.$t("feeds.share.artwork.success")),1)],512),[[R,f.value]]),I(r("div",so,[k(Ye,{class:"mr-2"}),B(" "+g($.$t("feeds.form.postingYourUpdate")),1)],512),[[R,d.value]]),I(r("div",{class:"alert-danger"},g($.$t("feeds.form.postFailure")),513),[[R,h.value]]),I(r("textarea",{"onUpdate:modelValue":L[0]||(L[0]=P=>p.value=P),class:"input form-input textarea",placeholder:$.$t("typeSomething"),cols:"30",rows:"2","data-gramm":"false",maxlength:"2000"},null,8,oo),[[Ae,p.value]]),r("div",lo,[r("button",{class:"cancel-button",onClick:L[1]||(L[1]=P=>u())},g($.$t("cancel")),1),r("button",{class:D(["primary-button"]),onClick:L[2]||(L[2]=P=>w())},g($.$t("share")),1)]),r("div",no,[r("input",{readonly:"",value:O(l).public.appUrl+"/a/"+e.postId,class:"p-3 w-full rounded-md theme-color-secondary"},null,8,ro),r("button",{class:"icon-button",onClick:L[3]||(L[3]=P=>_(O(l).public.appUrl+"/a/"+o.postId))},[k(V,{name:"i-icon-park-outline-copy"})])])])]),I(k(It,{id:"copy-alert",text:$.$t("linkCopied"),icon:"i-bi-check-all"},null,8,["text"]),[[R,i.value]])]))}},tt=o=>(bt("data-v-9292c707"),o=o(),kt(),o),co={class:"mx-auto w-full align-middle work-view md:w-1/2"},uo={key:0,class:"p-4 mb-4 w-full text-center text-black bg-yellow-200 rounded-md theme-color-secondary"},mo={class:"flex flex-row justify-center mb-2"},po=tt(()=>r("div",null,"You are currently viewing the preview mode, this work isn't published yet.",-1)),ho={class:"font-bold cursor-pointer"},vo={class:"mr-2 font-normal"},fo={class:"italic"},wo={key:1,class:"alert-success"},go={class:"flex flex-row justify-between p-3 mb-2 text-black align-middle bg-yellow-200 rounded"},yo={class:"mr-4"},bo={class:"image-list"},ko=["src","data-source"],xo={class:"interactions"},_o={class:"reaction-counters"},Co={class:"counter"},$o={key:1,class:"counter"},Io={key:2,class:"counter"},Ao={key:3,class:"counter"},Ro={key:0,class:"reactions"},So={class:"inline-block relative z-30 dropdown"},Po={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options"},Lo={class:"invisible rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 dropdown-menu"},Oo={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 p-1 mt-2 w-56 rounded-md shadow-lg origin-top-right outline-none theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},Uo={key:2,class:"custom-divider"},Vo={key:4,class:"custom-divider"},Eo=["to"],qo=tt(()=>r("div",{class:"custom-divider"},null,-1)),Mo={class:"comments"},To={key:0,class:"comment-box"},Bo={class:"flex flex-col"},Fo={class:"flex relative flex-col"},jo=["readonly","rows","placeholder"],Do={key:1,class:"p-4 mb-4 text-center rounded-md theme-color-secondary"},No={class:"comment-content"},Ho=["src"],Qo={class:"w-full"},zo={class:"flex justify-between"},Wo={class:"comment-time"},Go={class:"mt-4 reactions"},Jo=["onClick"],Yo={key:0},Ko={key:0,class:"flex flex-row"},Xo=["onClick"],Zo=["onClick"],el={class:"inline-block relative ml-2 dropdown"},tl={class:"invisible z-50 rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 cursor-pointer dropdown-menu"},al={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 p-1 mt-2 w-56 rounded-md border shadow-lg origin-top-right outline-none border-color theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},sl=["onClick"],ol={key:0,class:"-mb-4 comment-box"},ll={class:"flex flex-col"},nl={class:"flex relative flex-col"},rl=["id","readonly","rows","placeholder"],il=["onClick"],cl=["id"],ul={key:0,class:"w-full"},dl={class:"float-left mb-2 text-xs italic text-color-secondary"},ml=["onClick"],pl={class:"flex flex-row justify-between"},hl=["src"],vl={class:"transition-all duration-150 cursor-pointer hover:font-bold"},fl={class:"leading-6 comment-time"},wl={class:"mt-2"},gl={key:0,class:"mt-2 reactions"},yl=tt(()=>r("span",null,null,-1)),bl={class:"flex flex-row"},kl=["onClick"],xl={class:"inline-block relative ml-2 dropdown"},_l={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options"},Cl={class:"invisible z-50 rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 cursor-pointer dropdown-menu"},$l={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 z-50 p-1 mt-2 w-56 rounded-md border shadow-lg origin-top-right outline-none border-color theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},Il=["onClick"],Al=["onClick"],Rl={key:3,class:"mt-4 w-full text-xs italic text-center"},Sl={__name:"ModalView",props:{id:{type:String,default:""},section:{type:String,default:""}},emits:["stopLoading","showEmpty","showError"],setup(o,{expose:e,emit:t}){const s=o,a=Ve(),{oApiConfiguration:l,fetchOptions:n}=_e(),{applyExplicitFilter:u,removeExplicitFilter:p,generateSemiCompressedArtworkUrl:h}=Zt(),d=gt(l,n()),f=yt(l,n()),w=wt(),{$router:i}=ea(),c=ft();Oe(()=>c.query,()=>{_(),X().closeModal("collection-selection-modal"),X().closeModal("album-selection-modal"),X().closeModal("report-modal")}),qe(()=>{s.id!==""&&F(s.id),window.addEventListener("keydown",m=>{const v=document.getElementById("collection-selection-modal"),U=document.getElementById("album-selection-modal"),E=document.getElementById("report-modal"),te=document.querySelectorAll(".viewer-in");m.key==="Escape"&&(!v||v.style.display!="flex")&&(!U||U.style.display!="flex")&&(!E||E.style.display!="flex")&&!te.length&&_()})});const _=()=>{X().closeModal(`${s.section}-modal`)},$=b(!1),L=()=>{$.value=!1,p()},P=s.id==="",G=async m=>{await d.incraseViewCount(m)},J=b(!1),Y=b(!0),A=b({}),oe=b(!1),ae=b(!1),N=b(!1),H=b([]),F=async m=>{Z.value="",se.value=[],le.value=[],Y.value=!0;const[v,U]=await d.getWorkById(m);U?U=="Work not found"?t("showEmpty"):t("showError"):(A.value=v,H.value=[],v.artwork_assets.forEach(te=>{H.value.push({thumbnail:h(te.bucket,te.filename,!0),source:h(te.bucket,te.filename,!1)})}),!a.loggedIn&&v.is_explicit||v.is_explicit&&!a.user.user_settings.show_explicit?($.value=!0,u()):$.value=!1,oe.value=v.liked,ae.value=v.saved,N.value=v.in_album,rt().formatApiToWeb(v.scheduled_post)<rt().currentUtcTime()?(await Rt(m),a.loggedIn&&await M(m),(!a.loggedIn||a.user.id!==v.users.id)&&await G(m)):a.user.id!==v.users.id?i.push("/"):J.value=!0),Y.value=!1,t("stopLoading")},q=b({}),M=async m=>{const[v,U]=await f.getReportStatus({type:"artwork",postId:m});U||(v.length?q.value=v[0]:q.value={})},Q=async()=>{const[m,v]=await d.like({workId:A.value.id});if(m){oe.value=!0;const U=document.getElementById("like-button");U.classList.add("animate-bounce"),setInterval(()=>{U.classList.remove("animate-bounce")},2500)}},ye=async()=>{const[m,v]=await d.unlike({workId:A.value.id});m&&(oe.value=!1)},se=b([]),Te=Je({perPage:3,page:0}),Ce=b([]),at=async m=>{const[v,U]=await d.getComments({workId:m,pagination:{page:Te.page,perPage:Te.perPage}});if(v)return v.pagination.current_page===v.pagination.first_last.last_page?Se.value=!1:Se.value=!0,v.comments.forEach(E=>{E.liked&&we.value.push(E.id),Ce.value.push(E.id)}),v.comments},Rt=async m=>{try{(await at(m)).forEach(U=>se.value.push(U))}catch{}},Se=b(!1),St=async m=>{try{Te.page+=1,(await at(m)).forEach(U=>se.value.push(U))}catch{}},Z=b(),Be=200,Pt=Le(()=>Z.value!=null&&Z.value!==""?Be-Z.value.length:Be),be=b(!1),Lt=async()=>{be.value=!0;try{const[m,v,U]=await d.addComment({workId:A.value.id,comment:Z.value});m&&(Z.value="",se.value.splice(0,0,v),se.value.join(),Ce.value.splice(0,0,v.id),Ce.value.join())}catch{}be.value=!1},Ot=async m=>{const[v,U]=await d.deleteComment({commentId:m});if(v){const E=Ce.value.indexOf(m);se.value.splice(E,1),Ce.value.splice(E,1)}},we=b([]),Ut=async m=>{const[v,U]=await d.likeComment({commentId:m});if(v){we.value.push(m);const E=document.getElementById(`comment-like-button-${m}`);E.classList.add("animate-bounce"),setInterval(()=>{E.classList.remove("animate-bounce")},2500)}},Vt=async m=>{const[v,U]=await d.unlikeComment({commentId:m});if(v){const E=we.value.indexOf(m);we.value.splice(E,1)}},Fe=Je({perPage:2,page:0}),le=b([]),ke=b([]),je=b(!0),st=async m=>{const[v,U,E]=await d.getCommentReplies({commentId:m,pagination:{page:Fe.page,perPage:Fe.perPage}});if(!E)return U.current_page===U.first_last.last_page&&(je.value=!1),v.map(te=>ke.value.push(te.id)),v},$e=b(0),De=async m=>{je.value=!0,ke.value=[];try{const v=await st(m);le.value={[m]:v},v.forEach(E=>{E.liked&&ge.value.push(E.id)}),$e.value&&Ne($e.value);const U=document.getElementById(`comment-replies-${m}`);U.classList.add("flex"),U.classList.remove("hidden"),$e.value=m}catch{}},Ne=m=>{const v=document.getElementById(`comment-replies-${m}`);v.classList.remove("flex"),v.classList.add("hidden"),$e.value=0},Et=async m=>{Fe.page+=1;try{(await st(m)).forEach(U=>{le.value[m].push(U)})}catch{}},Pe=b(0),qt=async m=>{await De(m),Pe.value=m},ee=b(),He=200,Mt=Le(()=>ee.value!=null&&ee.value!==""?He-ee.value.length:He),xe=b(!1),Tt=async m=>{xe.value=!0;try{const[v,U,E]=await d.addReply({commentId:m,reply:ee.value});v&&(De(m),ee.value="",le.value[m].splice(0,0,U),le.value[m].join(),Pe.value=0,ke.value.splice(0,0,U.id),ke.value.join())}catch{}xe.value=!1},Bt=async(m,v)=>{const[U,E]=await d.deleteReply({replyId:v});if(U){const te=ke.value.indexOf(v);le.value[m].splice(te,1),ke.value.splice(te,1)}},ge=b([]),Ft=async m=>{const[v,U]=await d.likeReply({replyId:m});if(v){ge.value.push(m);const E=document.getElementById(`reply-like-button-${m}`);E.classList.add("animate-bounce"),setInterval(()=>{E.classList.remove("animate-bounce")},2500)}},jt=async m=>{const[v,U]=await d.unlikeReply({replyId:m});if(v){const E=ge.value.indexOf(m);ge.value.splice(E,1)}},Qe=b(!1),ze=b(!1),ot=async m=>{const[v,U]=await d.deleteWork({workId:[m]});v&&(ze.value=!0,setTimeout(()=>{i.push("/")},1500))},We=b(null),Dt=()=>{X().openModal("collection-selection-modal"),We.value.fetchCollection(),We.value.fetchCurrentSaved()},Nt=m=>{m?ae.value=!1:ae.value=!0,ct().animate("save-to-collection-button")},lt=b(null),Ht=()=>{X().openModal("album-selection-modal"),lt.value.fetchCurrentSaved()},Qt=m=>{m?N.value=!1:N.value=!0,ct().animate("save-to-album-button")},zt=()=>{X().openModal("share-to-feed-modal")},nt=b(!1);let Wt;const Gt=m=>{const v=b(w.public.appUrl+m),{copy:U}=$t({source:v});U(),xt().splash(Wt,nt,"copy-alert")},Jt=b(null),Yt=()=>{X().openModal("report-modal")};return e({view:F}),(m,v)=>{const U=na("viewer"),E=Re,te=it("lazy"),Kt=it("auto-animate");return y(),x(he,null,[I(r("div",co,[k(Ee,{loading:Y.value},null,8,["loading"])],512),[[R,Y.value&&!m.isMobile()&&P]]),I(r("div",{class:D(["work-container work-view",P?"w-full 2xl:w-4/6 2xl:mx-auto p-2 md:p-6 theme-color":"w-full"])},[r("div",{class:D(["left-side",{"overflow-y-scroll mr-6":P}])},[J.value&&!ze.value?(y(),x("div",uo,[r("div",mo,[k(V,{name:"i-ion-alert-outline"}),po]),r("div",ho,[r("span",{class:"text-red-500",onClick:v[0]||(v[0]=C=>Qe.value=!0)},g(m.$t("artworks.deleteArtwork")),1),I(r("div",null,[r("span",vo,[B(g(m.$t("alert.areYouSure"))+" ",1),r("span",fo,"("+g(m.$t("alert.youCannotUndoThisAction"))+")",1)]),r("span",{class:"mr-2 text-red-500 hover:underline",onClick:v[1]||(v[1]=C=>ot(A.value.id))},g(m.$t("yes")),1),r("span",{class:"hover:underline",onClick:v[2]||(v[2]=C=>Qe.value=!1)},g(m.$t("no")),1)],512),[[R,Qe.value]])])])):S("",!0),ze.value?(y(),x("div",wo,g(m.$t("artworks.successDelete")),1)):S("",!0),I(r("div",go,[r("span",yo,g(O(a).loggedIn?m.$t("explicitContentAlert"):m.$t("explicitContentAlertForGuest")),1),r("button",{class:"primary-button",onClick:v[3]||(v[3]=pe(C=>L(),["prevent"]))},g(m.$t("show")),1)],512),[[R,$.value]]),r("div",bo,[k(U,{options:{url:"data-source"},images:H.value,class:"overflow-hidden rounded-md"},{default:K(()=>[(y(!0),x(he,null,ve(H.value,(C,T)=>I((y(),x("img",{key:C.thumbnail,loading:"lazy",src:C.thumbnail,"data-source":C.source,class:D(["overflow-hidden mb-2 rounded cursor-pointer image image-layer unselectable",{"blur-lg unclickable":$.value},$.value?"brightness-50":"brightness-100"]),onError:v[4]||(v[4]=(...Ie)=>m.imageLoadError&&m.imageLoadError(...Ie))},null,42,ko)),[[te,C.thumbnail]])),128))]),_:1},8,["images"])]),r("div",xo,[r("div",_o,[A.value.is_explicit?(y(),x("span",{key:0,class:D(["py-1 px-2 mr-2 font-bold rounded-md text-xxs",P?"theme-color-secondary":"bg-tag"])},"E",2)):S("",!0),I(r("span",Co,[r("b",null,g(m.shortNumber(A.value.views)),1),B(" "+g(m.$t("count.views")),1)],512),[[R,A.value.views>0]]),A.value._count?I((y(),x("span",$o,[r("b",null,g(m.thousand(A.value._count.artwork_likes)),1),B(" "+g(m.$t("count.likes")),1)],512)),[[R,A.value._count.artwork_likes>0]]):S("",!0),A.value._count?I((y(),x("span",Io,[r("b",null,g(m.thousand(A.value._count.artwork_comments)),1),B(" "+g(m.$t("count.comments")),1)],512)),[[R,A.value._count.artwork_comments>0]]):S("",!0),A.value._count?I((y(),x("span",Ao,[r("b",null,g(m.thousand(A.value._count.artwork_collection_has_works)),1)],512)),[[R,A.value._count.artwork_collection_has_works]]):S("",!0)]),J.value?S("",!0):(y(),x("div",Ro,[O(a).loggedIn?(y(),x("span",{key:0,onClick:v[5]||(v[5]=C=>oe.value?ye():Q())},[I(k(V,{id:"like-button",name:"i-ion-heart",class:"text-red-500 hover:text-red-500"},null,512),[[R,oe.value]]),I(k(V,{name:"i-ion-heart-outline",class:"hover:text-red-500"},null,512),[[R,!oe.value]])])):S("",!0),O(a).loggedIn?(y(),x("span",{key:1,onClick:v[6]||(v[6]=C=>Dt())},[I(k(V,{id:"save-to-collection-button",name:"i-majesticons-bookmark",class:"text-blue-500 hover:text-blue-500"},null,512),[[R,ae.value]]),I(k(V,{name:"i-majesticons-bookmark-line",class:"hover:text-blue-500"},null,512),[[R,!ae.value]])])):S("",!0),O(a).loggedIn&&A.value.users&&O(a).user.id===A.value.users.id?(y(),x("span",{key:2,onClick:v[7]||(v[7]=C=>Ht())},[I(k(V,{id:"save-to-album-button",name:"i-ion-folder-open",class:"text-green-500 hover:text-green-500"},null,512),[[R,N.value]]),I(k(V,{name:"i-bx-photo-album",class:"hover:text-blue-500"},null,512),[[R,!N.value]])])):S("",!0),O(a).loggedIn?(y(),x("span",{key:3,onClick:v[8]||(v[8]=C=>zt())},[k(V,{name:"i-uil-share",class:"hover:text-blue-500"})])):S("",!0),r("div",So,[r("button",Po,[r("span",null,[k(V,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),r("div",Lo,[r("div",Oo,[P?(y(),ie(E,{key:0,to:"/a/"+A.value.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:K(()=>[k(V,{name:"i-fluent-arrow-enter-20-filled",class:"mr-2 text-base"}),B(" "+g(m.$t("open")),1)]),_:1},8,["to"])):S("",!0),P?(y(),ie(E,{key:1,to:"/a/"+A.value.id,target:"_blank",class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:K(()=>[k(V,{name:"i-ci-external-link",class:"mr-2 text-base"}),B(" "+g(m.$t("openInNewTab")),1)]),_:1},8,["to"])):S("",!0),P?(y(),x("div",Uo)):S("",!0),O(a).loggedIn&&A.value.users&&O(a).user.id!=A.value.users.id&&!O(a).user.is_admin&&!O(a).user.is_moderator?(y(),x("div",{key:3,to:"#",class:D(["flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",{"rounded-t-md":!P}]),onClick:v[9]||(v[9]=C=>Yt())},[k(V,{name:"i-akar-icons-flag",class:"mr-2 text-base"}),B(" "+g(m.$t("report")),1)],2)):S("",!0),r("div",{class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 cursor-pointer theme-color hover:button-color parent-icon hover:text-white",onClick:v[10]||(v[10]=C=>Gt("/a/"+A.value.id))},[k(V,{name:"i-icon-park-outline-copy",class:"mr-2 text-base"}),B(" "+g(m.$t("copySharableLink")),1)]),O(a).loggedIn&&A.value.users&&O(a).user.id===A.value.users.id?(y(),x("div",Vo)):S("",!0),O(a).loggedIn&&A.value.users&&O(a).user.id===A.value.users.id?(y(),ie(E,{key:5,to:"/works/update/"+A.value.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:K(()=>[k(V,{name:"i-ion-settings-outline",class:"mr-2 text-base"}),B(" "+g(m.$t("update")),1)]),_:1},8,["to"])):S("",!0),O(a).loggedIn&&A.value.users&&O(a).user.id===A.value.users.id?(y(),x("div",{key:6,to:"/a/"+A.value.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 cursor-pointer bg-danger hover:button-color parent-icon hover:text-white",onClick:v[11]||(v[11]=C=>m.openModal("work-deletion-confirm-modal"))},[k(V,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),B(" "+g(m.$t("delete")),1)],8,Eo)):S("",!0)])])])]))]),k(pt,{section:o.section,class:"flex-md-hidden","is-modal":P,"artwork-detail":A.value,"preview-mode":J.value,"is-desktop":!0},null,8,["section","artwork-detail","preview-mode"]),(y(),ie(ra,null,[Y.value?S("",!0):(y(),ie(ht,{key:0,class:"mb-6 hidden-md-flex","artwork-detail":A.value,view:F,"is-href":!P,"keep-artist-page-number":!0,"pagination-per-page":4},null,8,["artwork-detail","is-href","pagination-per-page"]))],1024))],2),r("div",{class:D(["right-side",{"pr-3 overflow-y-scroll":P}])},[k(pt,{section:o.section,class:"hidden-md-flex","is-modal":P,"artwork-detail":A.value,"preview-mode":J.value,"is-desktop":!1},null,8,["section","artwork-detail","preview-mode"]),Y.value?S("",!0):(y(),ie(ht,{key:0,class:"flex-md-hidden","artwork-detail":A.value,view:F,"is-href":!P,"keep-artist-page-number":!0,"pagination-per-page":4},null,8,["artwork-detail","is-href","pagination-per-page"])),qo,r("section",Mo,[O(a).loggedIn&&!J.value?(y(),x("div",To,[r("div",Bo,[r("div",Fo,[I(r("textarea",{"onUpdate:modelValue":v[12]||(v[12]=C=>Z.value=C),class:D(["input form-input",[{"cursor-not-allowed":be.value},{"theme-color-secondary textarea":P}]]),readonly:be.value,cols:"30",rows:Z.value!=null&&Z.value!=""?"8":"0",placeholder:m.$t("comments.inputPlaceholder"),maxlength:Be,"data-gramm":"false"},null,10,jo),[[Ae,Z.value]]),I(r("span",{class:"absolute left-4 bottom-6 py-1 px-2 text-white rounded-md button-color"},g(O(Pt)),513),[[R,Z.value!=null&&Z.value!=""]]),r("span",{class:"absolute right-2 bottom-5 py-1 px-2",onClick:v[13]||(v[13]=pe(C=>Lt(),["prevent"]))},[I(k(V,{name:"i-ion-prism",class:"text-xl transition-all duration-100 rotate-90 cursor-pointer text-colored"},null,512),[[R,Z.value!=null&&Z.value!=""&&!be.value]]),I(k(Ye,null,null,512),[[R,be.value]])])])])])):S("",!0),O(a).loggedIn?S("",!0):(y(),x("div",Do,g(m.$t("comments.loginOrRegisterToLeaveComment")),1)),r("div",No,[(y(!0),x(he,null,ve(se.value,C=>I((y(),x("div",{key:C.id,class:"flex flex-row w-full comment-item"},[k(E,{class:"mr-2",to:"/profile/"+C.users.username},{default:K(()=>[r("img",{class:"w-10 h-10 avatar",src:m.avatarCoverUrl(C.users.avatar_bucket,C.users.avatar_filename),onError:v[14]||(v[14]=(...T)=>m.imageLoadError&&m.imageLoadError(...T))},null,40,Ho)]),_:2},1032,["to"]),r("div",Qo,[r("div",{class:D(["p-3 w-full rounded-md",P?"theme-color-secondary":"theme-color"])},[r("div",zo,[k(E,{to:"/profile/"+C.users.username,class:"mb-2 text-xs font-semibold transition-all duration-150 cursor-pointer"},{default:K(()=>[B(g(C.users.name),1)]),_:2},1032,["to"]),r("div",Wo,g(m.formatDate(C.created_at,!0)),1)]),r("div",null,g(C.comment),1),r("div",Go,[r("div",{class:"cursor-pointer hover:underline",onClick:T=>$e.value==C.id?Ne(C.id):De(C.id)},[C._count.artwork_comment_has_replies>0?(y(),x("span",Yo,[r("b",null,g(m.shortNumber(C._count.artwork_comment_has_replies)),1),B(" "+g(C._count.artwork_comment_has_replies>1?m.$t("comments.replies.replies").toLowerCase():m.$t("comments.replies.reply").toLowerCase()),1)])):S("",!0)],8,Jo),O(a).loggedIn?(y(),x("div",Ko,[r("span",{class:"reaction",onClick:T=>we.value.includes(C.id)?Vt(C.id):Ut(C.id)},[I(k(V,{name:"i-ion-heart-outline",class:"text-gray-500 hover:text-red-500"},null,512),[[R,!we.value.includes(C.id)]]),I(k(V,{id:"comment-like-button-"+C.id,name:"i-ion-heart",class:"text-red-500 hover:text-red-500"},null,8,["id"]),[[R,we.value.includes(C.id)]]),B(" "+g(m.shortNumber(C._count.artwork_comment_has_likes)),1)],8,Xo),r("span",{class:"reaction",onClick:T=>qt(C.id)},[k(V,{name:"i-quill-reply",class:"text-gray-500 hover:text-blue-500"})],8,Zo),r("div",el,[r("button",{type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options",onClick:v[15]||(v[15]=T=>Pe.value=0)},[r("span",null,[k(V,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),r("div",tl,[r("div",al,[k(E,{to:"/profile/"+C.users.username,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:v[16]||(v[16]=pe(()=>{},["prevent"]))},{default:K(()=>[k(V,{name:"i-fluent-person-32-regular",class:"mr-2 text-base"}),B(" "+g(m.$t("viewProfile")),1)]),_:2},1032,["to"]),O(a).loggedIn&&O(a).user.id===C.users.id?(y(),x("div",{key:0,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:T=>Ot(C.id)},[k(V,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),B(" "+g(m.$t("delete")),1)],8,sl)):S("",!0)])])])])):S("",!0)])],2),O(a).loggedIn?I((y(),x("div",ol,[r("div",ll,[r("div",nl,[I(r("textarea",{id:"reply-"+C.id,"onUpdate:modelValue":v[17]||(v[17]=T=>ee.value=T),class:D(["mt-2 w-full input form-input",[{"cursor-not-allowed":xe.value},{"theme-color-secondary textarea":P}]]),readonly:xe.value,cols:"30",rows:ee.value!=null&&ee.value!=""?"5":"0",placeholder:m.$t("comments.replies.write"),maxlength:He,"data-gramm":"false"},null,10,rl),[[Ae,ee.value]]),I(r("span",{class:"absolute left-4 bottom-6 py-1 px-2 text-white rounded-md button-color"},g(O(Mt)),513),[[R,ee.value!=null&&ee.value!=""]]),r("span",{class:"absolute right-2 bottom-5 py-1 px-2",onClick:pe(T=>Tt(C.id),["prevent"])},[I(k(V,{name:"i-ion-prism",class:"text-xl transition-all duration-100 rotate-90 cursor-pointer text-colored"},null,512),[[R,ee.value!=null&&ee.value!=""&&!xe.value]]),I(k(Ye,null,null,512),[[R,xe.value]])],8,il)])])],512)),[[R,Pe.value===C.id]]):S("",!0),r("div",{id:"comment-replies-"+C.id,class:"hidden flex-col mt-2"},[le.value[C.id]&&le.value[C.id].length?(y(),x("div",ul,[r("span",dl,g(m.$t("comments.replies.replies")),1),r("span",{class:"float-right text-xs cursor-pointer hover:font-semibold",onClick:T=>Ne(C.id)},g(m.$t("hide")),9,ml)])):S("",!0),(y(!0),x(he,null,ve(le.value[C.id],T=>(y(),x("div",{key:T.id,class:D(["p-3 mb-2 w-full rounded-md border-l-4",P?"theme-color-secondary":"theme-color"])},[r("div",pl,[k(E,{to:"/profile/"+T.users.username,class:"flex flex-row leading-6"},{default:K(()=>[r("img",{class:"mr-2 w-6 h-6 rounded-full",src:m.avatarCoverUrl(T.users.avatar_bucket,T.users.avatar_filename),onError:v[18]||(v[18]=(...Ie)=>m.imageLoadError&&m.imageLoadError(...Ie))},null,40,hl),r("span",vl,g(T.users.name),1)]),_:2},1032,["to"]),r("span",fl,g(m.formatDate(T.created_at,!0)),1)]),r("div",wl,g(T.content),1),O(a).loggedIn?(y(),x("div",gl,[yl,r("div",bl,[r("span",{class:"reaction",onClick:Ie=>ge.value.includes(T.id)?jt(T.id):Ft(T.id)},[I(k(V,{id:"reply-like-button-"+T.id,name:"i-ion-heart",class:"text-red-500 hover:text-red-500"},null,8,["id"]),[[R,ge.value.includes(T.id)]]),I(k(V,{name:"i-ion-heart-outline",class:"text-gray-500 hover:text-red-500"},null,512),[[R,!ge.value.includes(T.id)]]),B(" "+g(m.shortNumber(T._count.artwork_comment_reply_has_likes)),1)],8,kl),r("div",xl,[r("button",_l,[r("span",null,[k(V,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),r("div",Cl,[r("div",$l,[k(E,{to:"/profile/"+T.users.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:v[19]||(v[19]=pe(()=>{},["prevent"]))},{default:K(()=>[k(V,{name:"i-fluent-person-32-regular",class:"mr-2 text-base"}),B(" "+g(m.$t("viewProfile")),1)]),_:2},1032,["to"]),O(a).loggedIn&&O(a).user.id===T.users.id?(y(),x("div",{key:0,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:Ie=>Bt(C.id,T.id)},[k(V,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),B(" "+g(m.$t("delete")),1)],8,Il)):S("",!0)])])])])])):S("",!0)],2))),128)),le.value[C.id]&&je.value?(y(),x("div",{key:1,class:"mb-1 text-center transition ease-in-out delay-75 cursor-pointer hover:font-semibold hover:underline text-color-secondary href",onClick:T=>Et(C.id)},g(m.$t("comments.replies.loadMore")),9,Al)):S("",!0)],8,cl)])])),[[Kt]])),128))]),A.value._count?I((y(),x("div",{key:2,class:"text-center capitalize href",onClick:v[20]||(v[20]=pe(C=>St(A.value.id),["prevent"]))},g(m.$t("comments.loadOlder")),513)),[[R,A.value._count.artwork_comments>3&&Se.value]]):S("",!0),I(r("div",{class:"w-full text-xs italic text-center"},g(m.$t("comments.reachedTheEnd")),513),[[R,se.value.length&&!Se.value]]),O(a).loggedIn&&!se.value.length&&!J.value?(y(),x("div",Rl,g(m.$t("comments.noCommentYet")),1)):S("",!0)])],2),Y.value?S("",!0):(y(),ie(hs,{key:0,id:"collection-selection-modal","modal-id":"collection-selection-modal",ref_key:"collectionSelectionModalRef",ref:We,"work-id":A.value.id,class:"modal",onSave:Nt},null,8,["work-id"])),!Y.value&&O(a).loggedIn&&A.value.users&&O(a).user.id==A.value.users.id?(y(),ie(O($s),{key:1,id:"album-selection-modal",ref_key:"albumSelectionModalRef",ref:lt,"modal-id":"album-selection-modal","work-id":A.value.id,class:"modal",onAddedToAlbum:Qt},null,8,["work-id"])):S("",!0),k(Ss,{id:"work-deletion-confirm-modal","modal-id":"work-deletion-confirm-modal",message:`${m.$t("alert.areYouSure")} ${m.$t("alert.youCannotUndoThisAction")}`,class:"modal",onOnAccept:v[21]||(v[21]=C=>ot(A.value.id))},null,8,["message"]),k(Ks,{id:"report-modal",ref_key:"reportModalRef",ref:Jt,class:"modal",type:"artwork","post-id":A.value.id,"report-status":q.value},null,8,["post-id","report-status"]),k(io,{id:"share-to-feed-modal",ref:"shareToFeedModalRef",class:"modal","post-id":A.value.id},null,8,["post-id"]),I(k(It,{id:"copy-alert",text:m.$t("linkCopied"),icon:"i-bi-check-all"},null,8,["text"]),[[R,nt.value]])],2),[[R,!Y.value]])],64)}}},Tl=fe(Sl,[["__scopeId","data-v-9292c707"]]);export{Tl as M,It as S,Ya as W,Ss as _,hs as a,$t as b,xt as c,ct as d,vs as e,ts as f,$s as g,_a as u};
//# sourceMappingURL=ModalView.5655df94.js.map
