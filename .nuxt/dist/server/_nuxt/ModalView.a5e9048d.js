import{B as ht,a as z,b as W,R as F,k as vt,_ as Re,c as Ve,e as Yt,d as Ce,i as X,j as ft,n as Kt,u as Xt,o as rt}from"../server.mjs";import{_ as fe,u as wt,a as V}from"./Icon.b4cfd501.js";import{_ as qe,u as yt}from"./LoadingEmptyErrorMessage.06690c93.js";import{getCurrentScope as Zt,onScopeDispose as ea,ref as k,unref as O,computed as Le,getCurrentInstance as ta,nextTick as aa,watchEffect as sa,watch as Oe,openBlock as b,createElementBlock as _,createElementVNode as r,createVNode as x,withCtx as K,createTextVNode as B,toDisplayString as g,withDirectives as $,vShow as R,createCommentVNode as P,withModifiers as pe,normalizeClass as D,Fragment as he,renderList as ve,createBlock as ce,onMounted as Ee,reactive as Je,vModelText as Ae,pushScopeId as gt,popScopeId as bt,resolveComponent as oa,resolveDirective as la,KeepAlive as na}from"vue";import"vue-router";import{S as Ye}from"./Spinner.bd1da415.js";import{U as Ue}from"./user-counters-api.70d48752.js";import{u as ra}from"./useFeed.a9121734.js";const ue=function(o){return{addWorkToAlbum:async(e,t={})=>{const s="/albums/add-work",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"POST",...l,...t},c={},p={};c["Content-Type"]="application/json";const u=new URLSearchParams(a.search);for(const h in p)u.set(h,p[h]);for(const h in t.params)u.set(h,t.params[h]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};n.headers={...c,...v,...t.headers};const d=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=d?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},createAlbum:async(e,t={})=>{const s="/albums/create",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"POST",...l,...t},c={},p={};c["Content-Type"]="application/json";const u=new URLSearchParams(a.search);for(const h in p)u.set(h,p[h]);for(const h in t.params)u.set(h,t.params[h]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};n.headers={...c,...v,...t.headers};const d=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=d?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},deleteAlbum:async(e,t={})=>{if(e==null)throw new F("id","Required parameter id was null or undefined when calling deleteAlbum.");const s="/albums/{id}".replace("{id}",encodeURIComponent(String(e))),a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"DELETE",...l,...t},c={},p={},u=new URLSearchParams(a.search);for(const d in p)u.set(d,p[d]);for(const d in t.params)u.set(d,t.params[d]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};return n.headers={...c,...v,...t.headers},{url:a.pathname+a.search+a.hash,options:n}},getAlbumById:async(e,t={})=>{if(e==null)throw new F("id","Required parameter id was null or undefined when calling getAlbumById.");const s="/albums/{id}".replace("{id}",encodeURIComponent(String(e))),a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"GET",...l,...t},c={},p={},u=new URLSearchParams(a.search);for(const d in p)u.set(d,p[d]);for(const d in t.params)u.set(d,t.params[d]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};return n.headers={...c,...v,...t.headers},{url:a.pathname+a.search+a.hash,options:n}},getAlbumItems:async(e,t,s,a={})=>{if(e==null)throw new F("id","Required parameter id was null or undefined when calling getAlbumItems.");if(t==null)throw new F("perPage","Required parameter perPage was null or undefined when calling getAlbumItems.");if(s==null)throw new F("page","Required parameter page was null or undefined when calling getAlbumItems.");const l="/albums/list/{id}".replace("{id}",encodeURIComponent(String(e))),n=new URL(l,"https://example.com");let c;o&&(c=o.baseOptions);const p={method:"GET",...c,...a},u={},v={};t!==void 0&&(v.per_page=t),s!==void 0&&(v.page=s);const d=new URLSearchParams(n.search);for(const y in v)d.set(y,v[y]);for(const y in a.params)d.set(y,a.params[y]);n.search=new URLSearchParams(d).toString();let h=c&&c.headers?c.headers:{};return p.headers={...u,...h,...a.headers},{url:n.pathname+n.search+n.hash,options:p}},getCurrentAlbumSaveInfo:async(e,t,s={})=>{if(e==null)throw new F("type","Required parameter type was null or undefined when calling getCurrentAlbumSaveInfo.");if(t==null)throw new F("workId","Required parameter workId was null or undefined when calling getCurrentAlbumSaveInfo.");const a="/albums/current/{type}/{work_id}".replace("{type}",encodeURIComponent(String(e))).replace("{work_id}",encodeURIComponent(String(t))),l=new URL(a,"https://example.com");let n;o&&(n=o.baseOptions);const c={method:"GET",...n,...s},p={},u={},v=new URLSearchParams(l.search);for(const h in u)v.set(h,u[h]);for(const h in s.params)v.set(h,s.params[h]);l.search=new URLSearchParams(v).toString();let d=n&&n.headers?n.headers:{};return c.headers={...p,...d,...s.headers},{url:l.pathname+l.search+l.hash,options:c}},listUserAlbums:async(e,t,s,a,l={})=>{if(e==null)throw new F("userId","Required parameter userId was null or undefined when calling listUserAlbums.");if(t==null)throw new F("perPage","Required parameter perPage was null or undefined when calling listUserAlbums.");if(s==null)throw new F("page","Required parameter page was null or undefined when calling listUserAlbums.");if(a==null)throw new F("type","Required parameter type was null or undefined when calling listUserAlbums.");const n="/albums/user/{userId}".replace("{userId}",encodeURIComponent(String(e))),c=new URL(n,"https://example.com");let p;o&&(p=o.baseOptions);const u={method:"GET",...p,...l},v={},d={};t!==void 0&&(d.per_page=t),s!==void 0&&(d.page=s),a!==void 0&&(d.type=a);const h=new URLSearchParams(c.search);for(const i in d)h.set(i,d[i]);for(const i in l.params)h.set(i,l.params[i]);c.search=new URLSearchParams(h).toString();let y=p&&p.headers?p.headers:{};return u.headers={...v,...y,...l.headers},{url:c.pathname+c.search+c.hash,options:u}},removeWorkFromAlbum:async(e,t={})=>{const s="/albums/work/remove",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"DELETE",...l,...t},c={},p={};c["Content-Type"]="application/json";const u=new URLSearchParams(a.search);for(const h in p)u.set(h,p[h]);for(const h in t.params)u.set(h,t.params[h]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};n.headers={...c,...v,...t.headers};const d=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=d?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},updateAlbum:async(e,t={})=>{const s="/albums",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"PATCH",...l,...t},c={},p={};c["Content-Type"]="application/json";const u=new URLSearchParams(a.search);for(const h in p)u.set(h,p[h]);for(const h in t.params)u.set(h,t.params[h]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};n.headers={...c,...v,...t.headers};const d=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=d?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}}}},de=function(o){return{async addWorkToAlbum(e,t){const s=await ue(o).addWorkToAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async createAlbum(e,t){const s=await ue(o).createAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async deleteAlbum(e,t){const s=await ue(o).deleteAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async getAlbumById(e,t){const s=await ue(o).getAlbumById(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async getAlbumItems(e,t,s,a){const l=await ue(o).getAlbumItems(e,t,s,a);return(n=z,c=W)=>{const p={...l.options,url:c+l.url};return n.request(p)}},async getCurrentAlbumSaveInfo(e,t,s){const a=await ue(o).getCurrentAlbumSaveInfo(e,t,s);return(l=z,n=W)=>{const c={...a.options,url:n+a.url};return l.request(c)}},async listUserAlbums(e,t,s,a,l){const n=await ue(o).listUserAlbums(e,t,s,a,l);return(c=z,p=W)=>{const u={...n.options,url:p+n.url};return c.request(u)}},async removeWorkFromAlbum(e,t){const s=await ue(o).removeWorkFromAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async updateAlbum(e,t){const s=await ue(o).updateAlbum(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}}}};class me extends ht{async addWorkToAlbum(e,t){return de(this.configuration).addWorkToAlbum(e,t).then(s=>s(this.axios,this.basePath))}async createAlbum(e,t){return de(this.configuration).createAlbum(e,t).then(s=>s(this.axios,this.basePath))}async deleteAlbum(e,t){return de(this.configuration).deleteAlbum(e,t).then(s=>s(this.axios,this.basePath))}async getAlbumById(e,t){return de(this.configuration).getAlbumById(e,t).then(s=>s(this.axios,this.basePath))}async getAlbumItems(e,t,s,a){return de(this.configuration).getAlbumItems(e,t,s,a).then(l=>l(this.axios,this.basePath))}async getCurrentAlbumSaveInfo(e,t,s){return de(this.configuration).getCurrentAlbumSaveInfo(e,t,s).then(a=>a(this.axios,this.basePath))}async listUserAlbums(e,t,s,a,l){return de(this.configuration).listUserAlbums(e,t,s,a,l).then(n=>n(this.axios,this.basePath))}async removeWorkFromAlbum(e,t){return de(this.configuration).removeWorkFromAlbum(e,t).then(s=>s(this.axios,this.basePath))}async updateAlbum(e,t){return de(this.configuration).updateAlbum(e,t).then(s=>s(this.axios,this.basePath))}}const oe=function(o){return{addItemForLater:async(e,t,s={})=>{if(e==null)throw new F("type","Required parameter type was null or undefined when calling addItemForLater.");const a="/collections/later",l=new URL(a,"https://example.com");let n;o&&(n=o.baseOptions);const c={method:"POST",...n,...s},p={},u={};e!==void 0&&(u.type=e),p["Content-Type"]="application/json";const v=new URLSearchParams(l.search);for(const y in u)v.set(y,u[y]);for(const y in s.params)v.set(y,s.params[y]);l.search=new URLSearchParams(v).toString();let d=n&&n.headers?n.headers:{};c.headers={...p,...d,...s.headers};const h=typeof t!="string"||c.headers["Content-Type"]==="application/json";return c.data=h?JSON.stringify(t!==void 0?t:{}):t||"",{url:l.pathname+l.search+l.hash,options:c}},addItemToCollection:async(e,t,s,a={})=>{if(e==null)throw new F("type","Required parameter type was null or undefined when calling addItemToCollection.");if(t==null)throw new F("collectionId","Required parameter collectionId was null or undefined when calling addItemToCollection.");const l="/collections/{collectionId}/items".replace("{collectionId}",encodeURIComponent(String(t))),n=new URL(l,"https://example.com");let c;o&&(c=o.baseOptions);const p={method:"POST",...c,...a},u={},v={};e!==void 0&&(v.type=e),u["Content-Type"]="application/json";const d=new URLSearchParams(n.search);for(const i in v)d.set(i,v[i]);for(const i in a.params)d.set(i,a.params[i]);n.search=new URLSearchParams(d).toString();let h=c&&c.headers?c.headers:{};p.headers={...u,...h,...a.headers};const y=typeof s!="string"||p.headers["Content-Type"]==="application/json";return p.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:n.pathname+n.search+n.hash,options:p}},collectionsIdDelete:async(e,t={})=>{if(e==null)throw new F("id","Required parameter id was null or undefined when calling collectionsIdDelete.");const s="/collections/{id}".replace("{id}",encodeURIComponent(String(e))),a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"DELETE",...l,...t},c={},p={},u=new URLSearchParams(a.search);for(const d in p)u.set(d,p[d]);for(const d in t.params)u.set(d,t.params[d]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};return n.headers={...c,...v,...t.headers},{url:a.pathname+a.search+a.hash,options:n}},countUserCollectionsByType:async(e,t={})=>{const s="/collections/count",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"POST",...l,...t},c={},p={};c["Content-Type"]="application/json";const u=new URLSearchParams(a.search);for(const h in p)u.set(h,p[h]);for(const h in t.params)u.set(h,t.params[h]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};n.headers={...c,...v,...t.headers};const d=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=d?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},create:async(e,t={})=>{const s="/collections/create",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"POST",...l,...t},c={},p={};c["Content-Type"]="application/json";const u=new URLSearchParams(a.search);for(const h in p)u.set(h,p[h]);for(const h in t.params)u.set(h,t.params[h]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};n.headers={...c,...v,...t.headers};const d=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=d?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},detail:async(e,t={})=>{if(e==null)throw new F("id","Required parameter id was null or undefined when calling detail.");const s="/collections/{id}".replace("{id}",encodeURIComponent(String(e))),a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"GET",...l,...t},c={},p={},u=new URLSearchParams(a.search);for(const d in p)u.set(d,p[d]);for(const d in t.params)u.set(d,t.params[d]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};return n.headers={...c,...v,...t.headers},{url:a.pathname+a.search+a.hash,options:n}},getCurrentSaveInfo:async(e,t,s={})=>{if(e==null)throw new F("type","Required parameter type was null or undefined when calling getCurrentSaveInfo.");if(t==null)throw new F("workId","Required parameter workId was null or undefined when calling getCurrentSaveInfo.");const a="/collections/current/{type}/{work_id}".replace("{type}",encodeURIComponent(String(e))).replace("{work_id}",encodeURIComponent(String(t))),l=new URL(a,"https://example.com");let n;o&&(n=o.baseOptions);const c={method:"GET",...n,...s},p={},u={},v=new URLSearchParams(l.search);for(const h in u)v.set(h,u[h]);for(const h in s.params)v.set(h,s.params[h]);l.search=new URLSearchParams(v).toString();let d=n&&n.headers?n.headers:{};return c.headers={...p,...d,...s.headers},{url:l.pathname+l.search+l.hash,options:c}},listCollectionItems:async(e,t,s,a={})=>{if(e==null)throw new F("id","Required parameter id was null or undefined when calling listCollectionItems.");if(t==null)throw new F("perPage","Required parameter perPage was null or undefined when calling listCollectionItems.");if(s==null)throw new F("page","Required parameter page was null or undefined when calling listCollectionItems.");const l="/collections/{id}/items".replace("{id}",encodeURIComponent(String(e))),n=new URL(l,"https://example.com");let c;o&&(c=o.baseOptions);const p={method:"GET",...c,...a},u={},v={};t!==void 0&&(v.per_page=t),s!==void 0&&(v.page=s);const d=new URLSearchParams(n.search);for(const y in v)d.set(y,v[y]);for(const y in a.params)d.set(y,a.params[y]);n.search=new URLSearchParams(d).toString();let h=c&&c.headers?c.headers:{};return p.headers={...u,...h,...a.headers},{url:n.pathname+n.search+n.hash,options:p}},listUserCollections:async(e,t,s,a,l,n={})=>{if(e==null)throw new F("userId","Required parameter userId was null or undefined when calling listUserCollections.");if(t==null)throw new F("type","Required parameter type was null or undefined when calling listUserCollections.");if(s==null)throw new F("page","Required parameter page was null or undefined when calling listUserCollections.");if(a==null)throw new F("perPage","Required parameter perPage was null or undefined when calling listUserCollections.");const c="/collections/user/{userId}".replace("{userId}",encodeURIComponent(String(e))),p=new URL(c,"https://example.com");let u;o&&(u=o.baseOptions);const v={method:"GET",...u,...n},d={},h={};t!==void 0&&(h.type=t),l!==void 0&&(h.name=l),s!==void 0&&(h.page=s),a!==void 0&&(h.per_page=a);const y=new URLSearchParams(p.search);for(const w in h)y.set(w,h[w]);for(const w in n.params)y.set(w,n.params[w]);p.search=new URLSearchParams(y).toString();let i=u&&u.headers?u.headers:{};return v.headers={...d,...i,...n.headers},{url:p.pathname+p.search+p.hash,options:v}},proLimitIsCanCreateCollection:async(e,t={})=>{const s="/collections/create/permission",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"POST",...l,...t},c={},p={};c["Content-Type"]="application/json";const u=new URLSearchParams(a.search);for(const h in p)u.set(h,p[h]);for(const h in t.params)u.set(h,t.params[h]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};n.headers={...c,...v,...t.headers};const d=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=d?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}},removeItemFromCollection:async(e,t,s,a={})=>{if(e==null)throw new F("type","Required parameter type was null or undefined when calling removeItemFromCollection.");if(t==null)throw new F("collectionId","Required parameter collectionId was null or undefined when calling removeItemFromCollection.");const l="/collections/{collectionId}/items".replace("{collectionId}",encodeURIComponent(String(t))),n=new URL(l,"https://example.com");let c;o&&(c=o.baseOptions);const p={method:"DELETE",...c,...a},u={},v={};e!==void 0&&(v.type=e),u["Content-Type"]="application/json";const d=new URLSearchParams(n.search);for(const i in v)d.set(i,v[i]);for(const i in a.params)d.set(i,a.params[i]);n.search=new URLSearchParams(d).toString();let h=c&&c.headers?c.headers:{};p.headers={...u,...h,...a.headers};const y=typeof s!="string"||p.headers["Content-Type"]==="application/json";return p.data=y?JSON.stringify(s!==void 0?s:{}):s||"",{url:n.pathname+n.search+n.hash,options:p}},updateCollection:async(e,t={})=>{const s="/collections",a=new URL(s,"https://example.com");let l;o&&(l=o.baseOptions);const n={method:"PATCH",...l,...t},c={},p={};c["Content-Type"]="application/json";const u=new URLSearchParams(a.search);for(const h in p)u.set(h,p[h]);for(const h in t.params)u.set(h,t.params[h]);a.search=new URLSearchParams(u).toString();let v=l&&l.headers?l.headers:{};n.headers={...c,...v,...t.headers};const d=typeof e!="string"||n.headers["Content-Type"]==="application/json";return n.data=d?JSON.stringify(e!==void 0?e:{}):e||"",{url:a.pathname+a.search+a.hash,options:n}}}},le=function(o){return{async addItemForLater(e,t,s){const a=await oe(o).addItemForLater(e,t,s);return(l=z,n=W)=>{const c={...a.options,url:n+a.url};return l.request(c)}},async addItemToCollection(e,t,s,a){const l=await oe(o).addItemToCollection(e,t,s,a);return(n=z,c=W)=>{const p={...l.options,url:c+l.url};return n.request(p)}},async collectionsIdDelete(e,t){const s=await oe(o).collectionsIdDelete(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async countUserCollectionsByType(e,t){const s=await oe(o).countUserCollectionsByType(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async create(e,t){const s=await oe(o).create(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async detail(e,t){const s=await oe(o).detail(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async getCurrentSaveInfo(e,t,s){const a=await oe(o).getCurrentSaveInfo(e,t,s);return(l=z,n=W)=>{const c={...a.options,url:n+a.url};return l.request(c)}},async listCollectionItems(e,t,s,a){const l=await oe(o).listCollectionItems(e,t,s,a);return(n=z,c=W)=>{const p={...l.options,url:c+l.url};return n.request(p)}},async listUserCollections(e,t,s,a,l,n){const c=await oe(o).listUserCollections(e,t,s,a,l,n);return(p=z,u=W)=>{const v={...c.options,url:u+c.url};return p.request(v)}},async proLimitIsCanCreateCollection(e,t){const s=await oe(o).proLimitIsCanCreateCollection(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}},async removeItemFromCollection(e,t,s,a){const l=await oe(o).removeItemFromCollection(e,t,s,a);return(n=z,c=W)=>{const p={...l.options,url:c+l.url};return n.request(p)}},async updateCollection(e,t){const s=await oe(o).updateCollection(e,t);return(a=z,l=W)=>{const n={...s.options,url:l+s.url};return a.request(n)}}}};class ie extends ht{async addItemForLater(e,t,s){return le(this.configuration).addItemForLater(e,t,s).then(a=>a(this.axios,this.basePath))}async addItemToCollection(e,t,s,a){return le(this.configuration).addItemToCollection(e,t,s,a).then(l=>l(this.axios,this.basePath))}async collectionsIdDelete(e,t){return le(this.configuration).collectionsIdDelete(e,t).then(s=>s(this.axios,this.basePath))}async countUserCollectionsByType(e,t){return le(this.configuration).countUserCollectionsByType(e,t).then(s=>s(this.axios,this.basePath))}async create(e,t){return le(this.configuration).create(e,t).then(s=>s(this.axios,this.basePath))}async detail(e,t){return le(this.configuration).detail(e,t).then(s=>s(this.axios,this.basePath))}async getCurrentSaveInfo(e,t,s){return le(this.configuration).getCurrentSaveInfo(e,t,s).then(a=>a(this.axios,this.basePath))}async listCollectionItems(e,t,s,a){return le(this.configuration).listCollectionItems(e,t,s,a).then(l=>l(this.axios,this.basePath))}async listUserCollections(e,t,s,a,l,n){return le(this.configuration).listUserCollections(e,t,s,a,l,n).then(c=>c(this.axios,this.basePath))}async proLimitIsCanCreateCollection(e,t){return le(this.configuration).proLimitIsCanCreateCollection(e,t).then(s=>s(this.axios,this.basePath))}async removeItemFromCollection(e,t,s,a){return le(this.configuration).removeItemFromCollection(e,t,s,a).then(l=>l(this.axios,this.basePath))}async updateCollection(e,t){return le(this.configuration).updateCollection(e,t).then(s=>s(this.axios,this.basePath))}}function it(){return{animate:t=>{const s=document.getElementById(t);s==null||s.classList.add("animate-bounce"),setInterval(()=>{s==null||s.classList.remove("animate-bounce")},2500)}}}function kt(){const o=(t,s,a)=>{s.value=!1,clearTimeout(t),s.value=!0,t=setTimeout(()=>{s.value=!1,e(a)},2e3)},e=t=>{const s=document.getElementById(t);s==null||s.classList.add("fade"),s==null||s.classList.add("fade-out")};return{splash:o,hide:e}}const Te=!1,ia=o=>typeof o=="string",Ge=()=>{};function Ze(o){return typeof o=="function"?o():O(o)}function ca(o){return o}function et(o){return Zt()?(ea(o),!0):!1}function ua(o){return typeof o=="function"?Le(o):k(o)}function da(o,e=!0){ta()||(e?o():aa(o))}function ma(o,e,t={}){const{immediate:s=!0}=t,a=k(!1);let l=null;function n(){l&&(clearTimeout(l),l=null)}function c(){a.value=!1,n()}function p(...u){n(),a.value=!0,l=setTimeout(()=>{a.value=!1,l=null,o(...u)},Ze(e))}return s&&(a.value=!0),et(c),{isPending:a,start:p,stop:c}}function pa(o){var e;const t=Ze(o);return(e=t==null?void 0:t.$el)!=null?e:t}const xt=Te?window:void 0;Te&&window.document;const ha=Te?window.navigator:void 0;Te&&window.location;function va(...o){let e,t,s,a;if(ia(o[0])?([t,s,a]=o,e=xt):[e,t,s,a]=o,!e)return Ge;let l=Ge;const n=Oe(()=>pa(e),p=>{l(),p&&(p.addEventListener(t,s,a),l=()=>{p.removeEventListener(t,s,a),l=Ge})},{immediate:!0,flush:"post"}),c=()=>{n(),l()};return et(c),c}function Ct(o,e=!1){const t=k(),s=()=>t.value=Boolean(o());return s(),da(s,e),t}function fa(o,e={}){const{window:t=xt}=e,s=Ct(()=>t&&"matchMedia"in t&&"undefined".matchMedia==="function");let a;const l=k(!1),n=()=>{!a||("removeEventListener"in a?a.removeEventListener("change",c):a.removeListener(c))},c=()=>{!s.value||(n(),a=t.matchMedia(ua(o).value),l.value=a.matches,"addEventListener"in a?a.addEventListener("change",c):a.addListener(c))};return sa(c),et(()=>n()),l}function _t(o={}){const{navigator:e=ha,read:t=!1,source:s,copiedDuring:a=1500}=o,l=["copy","cut"],n=Ct(()=>e&&"clipboard"in e),c=k(""),p=k(!1),u=ma(()=>p.value=!1,a);function v(){e.clipboard.readText().then(h=>{c.value=h})}if(n.value&&t)for(const h of l)va(h,v);async function d(h=Ze(s)){n.value&&h!=null&&(await e.clipboard.writeText(h),c.value=h,p.value=!0,u.start())}return{isSupported:n,text:c,copied:p,copy:d}}const Ke=typeof globalThis<"u"?globalThis:typeof global<"u"?global:typeof self<"u"?self:{},Xe="__vueuse_ssr_handlers__";Ke[Xe]=Ke[Xe]||{};Ke[Xe];var ct;(function(o){o.UP="UP",o.RIGHT="RIGHT",o.DOWN="DOWN",o.LEFT="LEFT",o.NONE="NONE"})(ct||(ct={}));var wa=Object.defineProperty,ut=Object.getOwnPropertySymbols,ya=Object.prototype.hasOwnProperty,ga=Object.prototype.propertyIsEnumerable,dt=(o,e,t)=>e in o?wa(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,ba=(o,e)=>{for(var t in e||(e={}))ya.call(e,t)&&dt(o,t,e[t]);if(ut)for(var t of ut(e))ga.call(e,t)&&dt(o,t,e[t]);return o};const ka={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};ba({linear:ca},ka);function xa(){return{readMore:(e,t,s,a)=>{const l=document.getElementById(`${a}${t}`);l!==null&&(l.innerHTML=e);const n=document.getElementById(`${s}${t}`);n==null||n.remove()}}}const Ca={class:"flex-col info"},_a={key:0,class:"user-info"},Ia={class:"flex flex-row w-full"},$a=["src"],Aa={class:"w-full name"},Ra={class:"flex flex-row justify-between"},Sa={class:"flex flex-col"},Pa={class:"mb-2 text-base font-bold"},La={key:1,class:"mb-4"},Oa=["id","innerHTML"],Ua=["id"],Va={class:"mb-4"},qa={key:2,class:"tags"},Ea={__name:"ModalViewInfo",props:{section:{type:String,default:""},isModal:{type:Boolean,default:!1},artworkDetail:{type:Object,default:()=>{}},previewMode:{type:Boolean,default:!1},isDesktop:{type:Boolean,default:!1}},setup(o){vt();const e=(t,s,a,l)=>{xa().readMore(t,s,a,l)};return(t,s)=>{const a=Re;return b(),_("section",Ca,[o.artworkDetail.users?(b(),_("div",_a,[r("div",Ia,[x(a,{to:"/profile/"+o.artworkDetail.users.username},{default:K(()=>[r("img",{class:"avatar",src:t.avatarCoverUrl(o.artworkDetail.users.avatar_bucket,o.artworkDetail.users.avatar_filename),onError:s[0]||(s[0]=(...l)=>t.imageLoadError&&t.imageLoadError(...l))},null,40,$a)]),_:1},8,["to"]),r("div",Aa,[r("div",Ra,[r("div",Sa,[x(a,{to:"/profile/"+o.artworkDetail.users.username,class:"fullname"},{default:K(()=>[B(g(o.artworkDetail.users.name),1)]),_:1},8,["to"]),x(a,{to:"/profile/"+o.artworkDetail.users.username,class:"username"},{default:K(()=>[B(" @"+g(o.artworkDetail.users.username),1)]),_:1},8,["to"])]),$(r("div",{class:"p-1 h-7 font-bold rounded-md border-2 cursor-pointer hover:shadow-md border-color-primary",style:{"font-size":"10px"},onClick:s[1]||(s[1]=l=>t.closeModal(o.section+"-modal"))}," ESC ",512),[[R,o.isModal]])])])])])):P("",!0),r("div",Pa,g(o.artworkDetail.title),1),o.artworkDetail.description?(b(),_("div",La,[r("span",{id:"mview-"+o.isDesktop+"-description-"+o.artworkDetail.id,innerHTML:o.artworkDetail.description.length>300?`${o.artworkDetail.description.slice(0,300)}...`:o.artworkDetail.description},null,8,Oa),o.artworkDetail.description.length>300?(b(),_("a",{key:0,id:"mview-"+o.isDesktop+"-read-more-"+o.artworkDetail.id,class:"href",onClick:s[2]||(s[2]=pe(l=>e(o.artworkDetail.description,o.artworkDetail.id,"mview-"+o.isDesktop+"-read-more-","mview-"+o.isDesktop+"-description-"),["prevent"]))},g(t.$t("readMore")),9,Ua)):P("",!0)])):P("",!0),r("div",Va,[r("span",{class:D(["italic text-color-secondary",{"font-bold text-red-400":o.previewMode}])},g(o.previewMode?t.$t("willBePublishedOn"):t.$t("publishedOn")),3),B(" "+g(t.formatDate(o.artworkDetail.scheduled_post)),1)]),o.artworkDetail.artwork_has_tags&&o.artworkDetail.artwork_has_tags.length?(b(),_("div",qa,[(b(!0),_(he,null,ve(o.artworkDetail.artwork_has_tags,l=>(b(),_("span",{key:l.artwork_tags.id,class:"tag"},[x(a,{to:"/works/browse?tags="+l.artwork_tags.tag.replaceAll(" ","+")},{default:K(()=>[B(g(l.artwork_tags.tag),1)]),_:2},1032,["to"])]))),128))])):P("",!0)])}}},mt=fe(Ea,[["__scopeId","data-v-35c1316f"]]),Ta=["href","onClick"],Ma={class:"overflow-hidden relative text-center rounded-md"},Ba={key:0},ja={key:1,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Fa=["href"],Da=["src"],Na={class:"overflow-hidden relative text-center rounded-md"},Ha={key:0},Qa={key:1,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},za=["href"],Wa=["src"],Ga={__name:"WorkList",props:{works:{type:Array,default:()=>[]},view:{type:Function,default:()=>{}},sectionClass:{type:String,default:""},isHref:{type:Boolean,default:!1},manageMode:{type:Boolean,default:!1},isMiniList:{type:Boolean,default:!1},currentWorkId:{type:Number,default:0}},emits:"feedManageList",setup(o,{emit:e}){const t=o,s=Ve();Oe(()=>t.currentWorkId,d=>{n.value=d});const a=Yt(),l=k(!1),n=k(t.currentWorkId),c=fa("(min-width: 1024px)"),p=d=>{c.value&&!t.isMiniList||t.isMiniList?(n.value=d,t.view(d)):a.replace({path:"/a/"+d})},u=k([]),v=d=>{if(u.value.includes(d)){const h=u.value.indexOf(d);u.value.splice(h,1)}else u.value.push(d);e("feedManageList",u.value)};return Oe(()=>t.manageMode,d=>{d===!1&&(u.value=[])}),(d,h)=>{const y=Re;return b(),_("section",{class:D(o.sectionClass)},[(b(!0),_(he,null,ve(o.works,i=>(b(),_("span",{key:i.id,class:D(["work-thumbnail theme-color-bg rounded-lg",i._count.artwork_assets>1&&n.value!=i.id?"work-multiple":"",{"border-4 border-yellow-400":u.value.includes(i.id)||n.value==i.id}])},[!d.isMobile()&&!o.isHref&&!o.isMiniList?(b(),_("a",{key:0,href:"/a/"+i.id,onClick:pe(w=>o.manageMode?v(i.id):o.view(i.id),["prevent"]),class:"w-full h-full theme-color-bg"},[r("div",Ma,[i._count.artwork_assets>1&&!d.applyExplicitFilter(O(s),i.is_explicit)?(b(),_("p",Ba,g(i._count.artwork_assets),1)):P("",!0),d.applyExplicitFilter(O(s),i.is_explicit)?(b(),_("span",ja,g(d.$t("explicitContent")),1)):P("",!0),r("a",{href:"/a/"+i.id,class:D([{"animate-wigglefast":o.manageMode}])},[r("img",{class:D(["w-full h-full unselectable",{"object-cover":!l.value},l.value?"object-contain object-center h-44":"object-cover",{"blur-3xl brightness-50 unclickable":d.applyExplicitFilter(O(s),i.is_explicit)}]),src:d.artworkThumb(i.artwork_assets[0].bucket,i.artwork_assets[0].filename,"thumbnail",l.value),onError:h[0]||(h[0]=(...w)=>d.imageLoadError&&d.imageLoadError(...w))},null,42,Da)],10,Fa)])],8,Ta)):(b(),ce(y,{key:1,onClick:w=>o.manageMode?v(i.id):p(i.id)},{default:K(()=>[r("div",Na,[i._count.artwork_assets>1&&!d.applyExplicitFilter(O(s),i.is_explicit)?(b(),_("p",Ha,g(i._count.artwork_assets),1)):P("",!0),d.applyExplicitFilter(O(s),i.is_explicit)?(b(),_("span",Qa,g(d.$t("explicitContent")),1)):P("",!0),r("a",{href:"/a/"+i.id,onClick:h[2]||(h[2]=pe(w=>d.void,["prevent"])),class:D([{"animate-wigglefast":o.manageMode}])},[r("img",{class:D(["object-cover w-full h-full unselectable",{"blur-3xl brightness-50 unclickable":d.applyExplicitFilter(O(s),i.is_explicit)}]),src:d.artworkThumb(i.artwork_assets[0].bucket,i.artwork_assets[0].filename,"thumbnail",l.value),onError:h[1]||(h[1]=(...w)=>d.imageLoadError&&d.imageLoadError(...w))},null,42,Wa)],10,za)])]),_:2},1032,["onClick"]))],2))),128))],2)}}},Ja=fe(Ga,[["__scopeId","data-v-9442f5f1"]]),Ya={class:"artist-works"},Ka={class:"heading"},Xa={key:0,class:"pagination-controller"},Za={__name:"ArtistWorks",props:{artworkDetail:{type:Object,default(){return{}}},keepArtistPageNumber:{type:Boolean,default:!1},view:Function,isHref:{type:Boolean,default:!1},paginationPerPage:{type:Number,default:4}},setup(o){const e=o,t=e.artworkDetail,{oApiConfiguration:s,fetchOptions:a}=Ce(),l=wt(s,a()),n=k(null);Ee(()=>{e.keepArtistPageNumber||(u.page=-1),v(t.users.id)});const c=k(!0),p=k([]),u=Je({page:0,perPage:e.paginationPerPage,options:{nextPrevLoading:!1,disableArtistNextButton:!0,disableArtistPrevButton:!0}}),v=async(y,i)=>{c.value=!0,u.options.nextPrevLoading=!0,y!==n.value&&(n.value=y,u.page=-1),i==="prev"?u.page-=1:u.page+=1;const[w,C,L]=await l.getUserArtworks({userId:y,pagination:{page:u.page,perPage:u.perPage}});L?(c.value=!1,h()):(C.next_previous.prev_page===null||C.next_previous.prev_page===void 0?u.options.disableArtistPrevButton=!0:u.options.disableArtistPrevButton=!1,C.next_previous.next_page===null||C.next_previous.next_page===void 0?u.options.disableArtistNextButton=!0:u.options.disableArtistNextButton=!1,p.value=w),u.options.nextPrevLoading=!1,c.value=!1},d=k(!1),h=()=>{d.value=!0};return(y,i)=>{const w=Re;return b(),_("div",Ya,[r("div",Ka,[r("span",null,[B(g(y.$t("artworks.moreArtworkBy"))+" ",1),o.artworkDetail.users?(b(),ce(w,{key:0,to:"/profile/"+o.artworkDetail.users.username,class:"text-colored"},{default:K(()=>[B(g(o.artworkDetail.users.username)+" <"+g(o.artworkDetail.users.name)+"> ",1)]),_:1},8,["to"])):P("",!0)]),x(w,{to:"/profile/"+o.artworkDetail.users.username,target:"_blank",class:"flex flex-row cursor-pointer"},{default:K(()=>[x(V,{name:"i-ci-external-link"})]),_:1},8,["to"])]),x(qe,{loading:c.value,error:d.value,class:"mt-2"},null,8,["loading","error"]),$(x(Ja,{class:D(["gap-2 md:gap-4",[u.options.nextPrevLoading?"animate-pulse":"",o.paginationPerPage===6?"grid-cols-6":"grid-cols-4"]]),"section-class":"works",works:p.value,view:o.view,"is-href":o.isHref,"is-mini-list":!0,"current-work-id":o.artworkDetail.id},null,8,["class","works","view","is-href","current-work-id"]),[[R,!c.value&&!d.value]]),o.artworkDetail.users?$((b(),_("div",Xa,[r("span",{onClick:i[0]||(i[0]=C=>u.options.disableArtistPrevButton?null:v(o.artworkDetail.users.id,"prev"))},[x(V,{name:"i-ion-chevron-back"})]),r("span",{onClick:i[1]||(i[1]=C=>u.options.disableArtistNextButton?null:v(o.artworkDetail.users.id,"next"))},[x(V,{name:"i-ion-chevron-forward"})])],512)),[[R,!c.value]]):P("",!0)])}}},pt=fe(Za,[["__scopeId","data-v-a626d965"]]);function es(o,e){return{proCanCreateCollection:async i=>{try{const{data:w}=await new ie(o).proLimitIsCanCreateCollection({type:i.type},e);return[w.data.is_can_create,null]}catch(w){return[null,w]}},createCollection:async(i,w)=>{try{const{data:C}=await new ie(o).create({name:w.title,description:w.description,is_public:w.isPublic?1:0,type:i},e);return[C.success,C.data,null]}catch(C){return[null,null,C]}},getInfo:async i=>{try{return[(await new ie(o).detail(i,e)).data,null]}catch(w){return[null,w]}},countCollections:async i=>{try{const{data:w}=await new Ue(o).countUserCollections(i,e);return[w.data.total,null]}catch(w){return[null,w]}},countArtworkCollections:async i=>{try{const{data:w}=await new Ue(o).countUserArtworkCollections(i,e);return[w.data.total,null]}catch(w){return[null,w]}},fetchCollections:async i=>{try{const{data:w}=await new ie(o).listUserCollections(i.userId,i.type,i.pagination.page,i.pagination.perPage,i.name,e),C=w.data.collections,L=w.data.pagination;let S=!0;return L.current_page===L.total_page&&(S=!1),[C,S,null]}catch(w){return[null,!1,w]}},listCollectionItems:async i=>{try{const{data:w}=await new ie(o).listCollectionItems(i.collectionId,i.pagination.perPage,i.pagination.page,e),C=w.data.pagination;let L=!0;return C.current_page===C.total_page&&(L=!1),[w.data.items,L,null]}catch(w){return[null,!1,w]}},getCurrentSaveInfo:async(i,w)=>{try{const{data:C}=await new ie(o).getCurrentSaveInfo(i,w,e);return[C.data,null]}catch(C){return[null,C]}},addItem:async i=>{try{return await new ie(o).addItemToCollection(i.type,i.collectionId,{id:i.workId},e),[!0,null]}catch(w){return[null,w]}},removeItem:async i=>{try{const{data:w}=await new ie(o).removeItemFromCollection(i.type,i.collectionId,{id:i.workId},e);return[w.success,null]}catch(w){return[null,w]}},update:async i=>{try{const{data:w}=await new ie(o).updateCollection({id:i.id,name:i.name,description:i.description,is_public:i.isPublic},e);return[w.success,null]}catch(w){return[null,w]}},deleteCollection:async i=>{try{const{data:w}=await new ie(o).collectionsIdDelete(i,e);return[w.success,null]}catch(w){return[null,w]}}}}const ts={class:"w-full modal-layer xl:w-3/12 lg:w-2/5"},as={class:"flex flex-row justify-between w-full"},ss={class:"title"},os={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},ls={class:"list"},ns={class:"overflow-y-scroll pr-2 max-h-60"},rs=["onClick"],is={class:"flex flex-row justify-between"},cs={class:"flex float-right flex-row gap-2 mt-4"},us=["placeholder"],ds={class:"flex flex-row justify-between mt-2"},ms={__name:"ManageSave",props:{modalId:{type:String,default:"collection-selection-modal"},workId:{type:Number,default:0}},emits:["save"],setup(o,{expose:e,emit:t}){const s=o,a=Ve(),{oApiConfiguration:l,fetchOptions:n}=Ce(),c=es(l,n());Ee(()=>{h(),i()});const p=k({pagination:{page:0,perPage:10},loading:!1}),u=k(!1),v=k(!1),d=k([]),h=async(E=!1)=>{d.value=[],E||(p.value.loading=!0);const[T,Q,ge]=await c.fetchCollections({userId:a.user.id,type:"artwork",pagination:{page:p.value.pagination.page,perPage:p.value.pagination.perPage}});p.value.loading=!1,ge&&(u.value=!0),ge||(T&&T.length>0?(Q?(p.value.pagination.page+=1,w.value=!0):w.value=!1,T.forEach(se=>{d.value.push(se)})):v.value=!0)},y=k([]),i=async()=>{u.value=!1,y.value=[],L.value=[],S.value=[],await setTimeout(async()=>{const[E,T]=await c.getCurrentSaveInfo("artwork",s.workId);if(T)u.value=!0;else for(const Q of E)L.value.push(Q.collection_id),y.value.push(Q.collection_id)},300)},w=k(!0),C=async()=>{await h({isLoadMore:!0}),await i()},L=k([]),S=k([]),G=E=>{if(L.value.includes(E)){S.value.push(E);const T=L.value.indexOf(E);L.value.splice(T,1)}else if(L.value.push(E),S.value.includes(E)){const T=S.value.indexOf(E);S.value.splice(T,1)}},J=async()=>{try{for(const T of L.value)await c.addItem({collectionId:T,type:"artwork",workId:s.workId});if(S.value.length)for(const T of S.value)await c.removeItem({collectionId:T,type:"artwork",workId:s.workId});let E=!1;L.value.length===0&&y.value.length===S.value.length&&(E=!0),await i(),X().closeModal(s.modalId),t("save",E)}catch{}},Y=k(""),A=k(!1),ne=async()=>{A.value=!1;const[E,T,Q]=await c.createCollection("artwork",{title:Y.value,isPublic:1,description:""});E?(d.value=[],H(),p.value.pagination.page=0,await h(),await i(),Y.value="",N()):A.value=!0},ae=k(!1),N=()=>{ae.value=!0,setInterval(()=>{ae.value=!1},5e3)},H=()=>{L.value=[]},j=()=>{X().closeModal(s.modalId),H()};return e({fetchCollection:h,fetchCurrentSaved:i}),(E,T)=>(b(),_("div",null,[r("div",ts,[r("div",null,[r("div",as,[r("span",ss,g(E.$t("collections.addItem.form.title")),1),r("div",os,[r("div",{class:"modal-close",onClick:T[0]||(T[0]=Q=>j())},[x(V,{name:"close",class:"text-2xl"})])])]),$(r("div",ls,[r("div",ns,[(b(!0),_(he,null,ve(d.value,(Q,ge)=>(b(),_("div",{key:Q.id,class:D(["item",[{"mt-2":ge!==0},L.value.includes(Q.id)?"button-color text-white":"theme-color-secondary"]]),onClick:se=>G(Q.id)},[r("div",is,[r("span",null,g(Q.name),1),r("span",{class:D(["ml-2 font-bold",L.value.includes(Q.id)?"text-white":"text-colored"])},g(Q._count.collection_has_artworks),3)])],10,rs))),128))]),$(r("div",{class:"mt-2 primary-button",onClick:T[1]||(T[1]=Q=>C())},[x(V,{name:"chevron-down-outline",class:"mr-2"}),B(" "+g(E.$t("loadMore")),1)],512),[[R,w.value]]),r("div",cs,[r("button",{class:"cancel-button",onClick:T[2]||(T[2]=Q=>j())},g(E.$t("cancel")),1),r("button",{class:"primary-button",onClick:T[3]||(T[3]=Q=>J())},g(E.$t("save")),1)])],512),[[R,!p.value.loading&&!u.value&&!v.value]]),$(r("div",null,[$(r("input",{"onUpdate:modelValue":T[4]||(T[4]=Q=>Y.value=Q),type:"text",class:D(["mt-4 mb-0 form-input theme-color-secondary",{"border border-red-400":A.value}]),placeholder:E.$t("collections.createNewCollection")},null,10,us),[[Ae,Y.value]]),r("div",ds,[r("div",null,[$(r("span",{class:"font-bold text-green-400 transition-all duration-200 ease-in-out"},g(E.$t("collections.collectionCreated")),513),[[R,ae.value]]),$(r("span",{class:"font-bold text-red-400 transition-all duration-200 ease-in-out"},g(E.$t("collections.failedToCreateCollection")),513),[[R,A.value]])]),$(r("button",{class:"primary-button",onClick:T[5]||(T[5]=Q=>ne())},g(E.$t("create")),513),[[R,Y.value&&Y.value.length>0]])])],512),[[R,!p.value.loading&&!u.value&&!v.value]])]),x(qe,{loading:p.value.loading,empty:v.value,error:u.value,fetch:h},null,8,["loading","empty","error"])])]))}},ps=fe(ms,[["__scopeId","data-v-61879341"]]);function hs(o,e){return{createAlbum:async(y,i)=>{try{const{data:w}=await new me(o).createAlbum({name:i.title,description:i.description,is_public:i.isPublic?1:0,type:y},e);return[w.success,w.data,null]}catch(w){return[null,null,w]}},getInfo:async y=>{try{return[(await new me(o).getAlbumById(y,e)).data,null]}catch(i){return[null,i]}},countAlbums:async y=>{try{const{data:i}=await new Ue(o).countUserAlbums(y,e);return[i.data.total,null]}catch(i){return[null,i]}},countArtworkAlbums:async y=>{try{const{data:i}=await new Ue(o).countUserArtworkAlbums(y,e);return[i.data.total,null]}catch(i){return[null,i]}},fetchAlbums:async(y,i,w,C)=>{try{const{data:L}=await new me(o).listUserAlbums(y,w,C,i,e),S=L.data.pagination;let G=!0;return S.current_page===S.total_page&&(G=!1),[L.data.albums,G,null]}catch(L){return[null,!1,L]}},listAlbumItems:async y=>{try{const{data:i}=await new me(o).getAlbumItems(y.albumId,y.pagination.perPage,y.pagination.page,e),w=i.data.pagination;let C=!0;return w.current_page===w.total_page&&(C=!1),[i.data.works,C,null]}catch(i){return[null,!1,i]}},getCurrentSaveInfo:async(y,i)=>{try{const{data:w}=await new me(o).getCurrentAlbumSaveInfo(y,i,e);return[w.data,null]}catch(w){return[null,w]}},addItems:async(y,i)=>{try{for(const w of y)await new me(o).addWorkToAlbum({album_id:w,work_ids:i},e);return[!0,null]}catch(w){return[null,w]}},removeItems:async(y,i)=>{try{const{data:w}=await new me(o).removeWorkFromAlbum({album_id:y,work_ids:i},e);return[w.success,null]}catch(w){return[null,w]}},update:async y=>{try{const{data:i}=await new me(o).updateAlbum({id:y.id,name:y.name,description:y.description,is_public:y.isPublic},e);return[i.success,null]}catch(i){return[null,i]}},deleteAlbum:async y=>{try{const{data:i}=await new me(o).deleteAlbum(y,e);return[i.success,null]}catch(i){return[null,i]}}}}const vs={class:"w-full modal-layer xl:w-3/12 lg:w-2/5"},fs={class:"flex flex-row justify-between w-full"},ws={class:"title"},ys={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},gs={class:"list"},bs={class:"overflow-y-scroll pr-2 max-h-60"},ks=["onClick"],xs={class:"flex float-right flex-row gap-2 mt-4"},Cs={__name:"ManageAlbum",props:{modalId:{type:String,default:"album-selection-modal"},workId:{type:Number,default:0},workIds:{type:Array,default:()=>[]}},emits:["addedToAlbum"],setup(o,{expose:e,emit:t}){const s=o;Ee(()=>{i(),s.workIds.length||L()});const a=Ve(),{oApiConfiguration:l,fetchOptions:n}=Ce(),c=hs(l,n()),p=async()=>{u.value=[],v.value.pagination.page=0,w(),await i()},u=k([]),v=k({pagination:{perPage:10,page:0,firstLoad:10},showLoadMore:!0}),d=k(!0),h=k(!1),y=k(!1),i=async()=>{w(),d.value=!0;const[N,H,j]=await c.fetchAlbums(a.user.id,"artwork",v.value.pagination.page===0?v.value.pagination.firstLoad:v.value.pagination.perPage,v.value.pagination.page);j&&(h.value=!0),N.length?(H?(v.value.pagination.page+=1,v.value.showLoadMore=!0):v.value.showLoadMore=!1,N.forEach(E=>{u.value.push(E)})):y.value=!0,d.value=!1},w=()=>{y.value=!1,h.value=!1},C=k([]),L=async()=>{C.value=[],G.value=[],J.value=[];const[N,H]=await c.getCurrentSaveInfo("artwork",s.workId);for(const j of N)G.value.push(j.album_id),C.value.push(j.album_id)},S=async()=>{await i(),await L()},G=k([]),J=k([]),Y=N=>{if(G.value.includes(N)){J.value.push(N);const H=G.value.indexOf(N);G.value.splice(H,1)}else if(G.value.push(N),J.value.includes(N)){const H=J.value.indexOf(N);J.value.splice(H,1)}},A=async()=>{const[N,H]=await c.addItems(G.value,s.workIds.length?s.workIds:[s.workId]);if(!s.workIds.length&&J.value.length)for(const j of J.value)await c.removeItems(j,[s.workId]);if(N){let j=!1;s.workIds.length||G.value.length===0&&C.value.length===J.value.length&&(j=!0),ne(),X().closeModal(s.modalId),t("addedToAlbum",s.workIds.length?!0:j)}},ne=()=>{G.value=[]},ae=()=>{X().closeModal(s.modalId),ne()};return e({fetchCurrentSaved:L,fetchAlbums:i}),(N,H)=>(b(),_("div",null,[r("div",vs,[r("div",null,[r("div",fs,[r("span",ws,g(N.$t("albums.selectAlbums")),1),r("div",ys,[r("div",{class:"modal-close",onClick:H[0]||(H[0]=j=>ae())},[x(V,{name:"close",class:"text-2xl"})])])]),r("div",gs,[$(r("div",null,[r("div",bs,[(b(!0),_(he,null,ve(u.value,(j,E)=>(b(),_("div",{key:j.id,class:D(["item",[{"mt-2":E!==0},G.value.includes(j.id)?"button-color text-white":"theme-color-secondary"]]),onClick:T=>Y(j.id)},[r("span",null,g(j.name),1),r("span",{class:D(["ml-2 font-bold",G.value.includes(j.id)?"text-white":"text-colored"])},g(j._count.album_has_artworks),3)],10,ks))),128))]),$(r("div",{class:"mt-2 primary-button",onClick:H[1]||(H[1]=j=>S())}," Load More ",512),[[R,v.value.showLoadMore]]),r("div",xs,[r("button",{class:"cancel-button",onClick:H[2]||(H[2]=j=>ae())},g(N.$t("cancel")),1),r("button",{class:"primary-button",onClick:H[3]||(H[3]=j=>A())},g(N.$t("save")),1)])],512),[[R,!d.value&&!y.value&&!h.value]])])]),x(qe,{loading:d.value,empty:y.value,error:h.value,fetch:p},null,8,["loading","empty","error"])])]))}},_s=fe(Cs,[["__scopeId","data-v-92721f88"]]),Is={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},$s={class:"mb-4"},As={class:"flex flex-row justify-end gap-2"},Rs={__name:"ConfirmationDialog",props:{modalId:{type:String,default:"confirmation-dialog-modal"},message:{type:String,default:"Are you sure?"},onAccept:{type:Function,default:()=>{}}},emits:"onAccept",setup(o,{emit:e}){const t=o,s=a=>{a&&e("onAccept",!0),X().closeModal(t.modalId)};return(a,l)=>(b(),_("div",null,[r("div",Is,[r("p",$s,g(o.message),1),r("div",As,[r("button",{class:"cancel-button",onClick:l[0]||(l[0]=n=>s(!1))},g(a.$t("no")),1),r("button",{class:"danger-button",onClick:l[1]||(l[1]=n=>s(!0))},g(a.$t("yes")),1)])])]))}},Ss={class:"splash"},Ps={class:"flex flex-row"},Ls={__name:"SplashAlert",props:{text:{type:String,default:""},icon:{type:String,default:"checkmark-outline"}},setup(o){return(e,t)=>(b(),_("div",Ss,[r("div",Ps,[x(V,{name:o.icon,class:"mr-2 text-base"},null,8,["name"]),r("span",null,g(o.text),1)])]))}},It=fe(Ls,[["__scopeId","data-v-86e964a1"]]),$t=o=>(gt("data-v-93d8d761"),o=o(),bt(),o),Os={class:"opt-modal modal-layer"},Us={class:"opt-modal__title"},Vs={class:"flex float-right flex-row gap-2 mb-2 cursor-pointer"},qs={class:"opt-modal__content"},Es={class:"report"},Ts={class:"report__reason_opt"},Ms={class:"report__title"},Bs=["onClick"],js={class:"report__title"},Fs=["placeholder"],Ds={class:"report__buttons"},Ns={class:"text-justify"},Hs={class:"mt-2"},Qs=$t(()=>r("i",null,"Your report ID:",-1)),zs=B("\xA0 "),Ws=$t(()=>r("i",null,"Report date:",-1)),Gs=B("\xA0 "),Js={__name:"ReportModal",props:{type:{type:String,default:""},postId:{type:Number,default:0},reportStatus:{type:Object,default:()=>{}}},setup(o){const e=o,{oApiConfiguration:t,fetchOptions:s}=Ce(),a=yt(t,s()),l=k(["stolen","spam","hateSpeech","harassment","falseInfo","suicide","graphic","terrorism","somethingElse"]),n=k({selectedReasons:[],reasonDescription:"",enableSubmit:Le(()=>n.value.selectedReasons.length>0&&n.value.reasonDescription!=="")}),c=y=>{if(!n.value.selectedReasons.includes(y))n.value.selectedReasons.push(y);else{const i=n.value.selectedReasons.indexOf(y);n.value.selectedReasons.splice(i,1)}},p=k(!1),u=k({}),v=async()=>{p.value=!1,u.value={};const[y,i,w]=await a.createNewReport({type:e.type,postId:e.postId,reasons:n.value.selectedReasons.join(","),description:n.value.reasonDescription});w&&!y||(p.value=!0,u.value=i)},d=()=>{X().closeModal("report-modal"),h()},h=()=>{n.value.selectedReasons=[],n.value.reasonDescription="",p.value=!1};return(y,i)=>{const w=Re;return b(),_("div",null,[r("div",Os,[r("div",Us,[r("h1",null,g(p.value?y.$t("reports.reportSubmitted"):o.reportStatus.id?y.$t("reports.alreadyReported"):y.$t("reports.title")),1),r("div",Vs,[r("div",{class:"modal-close",onClick:i[0]||(i[0]=C=>d())},[x(V,{name:"i-ion-close",class:"text-2xl"})])])]),r("div",qs,[$(r("div",Es,[r("div",Ts,[r("div",Ms,g(y.$t("reports.selectReasons")),1),(b(!0),_(he,null,ve(l.value,C=>(b(),_("span",{key:C,class:D([n.value.selectedReasons.includes(C)?"button-color":"theme-color-secondary"]),onClick:L=>c(C)},[r("div",null,[$(x(V,{name:"i-ion-square-outline",class:"text-color-secondary"},null,512),[[R,!n.value.selectedReasons.includes(C)]]),$(x(V,{name:"i-ion-checkbox-outline",class:"text-green-300"},null,512),[[R,n.value.selectedReasons.includes(C)]])]),r("div",{class:D(["reason",[n.value.selectedReasons.includes(C)?"text-white":"text-color-secondary"]])},g(y.$t("reports.reasons."+C)),3)],10,Bs))),128))]),r("div",null,[r("div",js,g(y.$t("reports.describeReason")),1),$(r("textarea",{"onUpdate:modelValue":i[1]||(i[1]=C=>n.value.reasonDescription=C),class:"report__reason_description",placeholder:y.$t("reports.describeText"),cols:"5",rows:"5"},null,8,Fs),[[Ae,n.value.reasonDescription]])]),r("div",Ds,[r("button",{class:"cancel-button",onClick:i[2]||(i[2]=C=>d())},g(y.$t("cancel")),1),r("button",{class:D(n.value.enableSubmit?"primary-button":"disabled-button"),onClick:i[3]||(i[3]=C=>n.value.enableSubmit?v():null)},g(y.$t("report")),3)])],512),[[R,!p.value&&!o.reportStatus.id]]),$(r("div",null,[r("div",Ns,g(y.$t("reports.reportSubmittedMessage")),1),r("div",Hs,[r("div",null,[Qs,zs,r("b",null,"#"+g(u.value.id),1)]),r("div",null,[Ws,Gs,r("b",null,g(y.formatDate(u.value.created_at)),1)])])],512),[[R,p.value]]),$(r("div",null,[B(g(y.$t("reports.alreadyReportedDescription"))+" ",1),x(w,{class:"underline href",to:"/reports"},{default:K(()=>[B(g(y.$t("reports.reportStatus")),1)]),_:1})],512),[[R,o.reportStatus.id]])])])])}}},Ys=fe(Js,[["__scopeId","data-v-93d8d761"]]),Ks={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Xs={class:"title"},Zs={class:"mt-2"},eo={class:"alert-success"},to={class:"italic"},ao={class:"flex flex-row p-2 mb-2 text-white rounded-md button-color"},so=["placeholder"],oo={class:"flex flex-row gap-2 justify-end"},lo={class:"flex flex-row justify-between mt-6"},no=["value"],ro={__name:"ShareArtworkToFeedModal",props:{postId:{type:Number,default:0}},setup(o){const e=o,{oApiConfiguration:t,fetchOptions:s}=Ce(),a=ra(t,s()),l=ft(),n=()=>{p.value=""},c=()=>{u.value=!1,v.value=!1,d.value=!1,X().closeModal("share-to-feed-modal"),n()},p=k(""),u=k(!1),v=k(!1),d=k(!1),h=async()=>{u.value=!1,v.value=!0,d.value=!1;const[C,L,S]=await a.shareArtworkToFeed({text:p.value,workId:e.postId});C?(d.value=!0,setTimeout(()=>{c()},500)):u.value=!0,v.value=!1},y=k(!1);let i;const w=C=>{const L=k(C),{copy:S}=_t({source:L});S(),kt().splash(i,y,"copy-alert")};return(C,L)=>(b(),_("div",null,[r("div",Ks,[r("span",Xs,g(C.$t("feeds.share.artwork.title")),1),r("div",Zs,[$(r("div",eo,[r("span",to,g(C.$t("feeds.share.artwork.success")),1)],512),[[R,d.value]]),$(r("div",ao,[x(Ye,{class:"mr-2"}),B(" "+g(C.$t("feeds.form.postingYourUpdate")),1)],512),[[R,v.value]]),$(r("div",{class:"alert-danger"},g(C.$t("feeds.form.postFailure")),513),[[R,u.value]]),$(r("textarea",{"onUpdate:modelValue":L[0]||(L[0]=S=>p.value=S),class:"input form-input textarea",placeholder:C.$t("typeSomething"),cols:"30",rows:"2","data-gramm":"false",maxlength:"2000"},null,8,so),[[Ae,p.value]]),r("div",oo,[r("button",{class:"cancel-button",onClick:L[1]||(L[1]=S=>c())},g(C.$t("cancel")),1),r("button",{class:D(["primary-button"]),onClick:L[2]||(L[2]=S=>h())},g(C.$t("share")),1)]),r("div",lo,[r("input",{readonly:"",value:O(l).public.appUrl+"/a/"+e.postId,class:"p-3 w-full rounded-md theme-color-secondary"},null,8,no),r("button",{class:"icon-button",onClick:L[3]||(L[3]=S=>w(O(l).public.appUrl+"/a/"+o.postId))},[x(V,{name:"i-icon-park-outline-copy"})])])])]),$(x(It,{id:"copy-alert",text:C.$t("linkCopied"),icon:"i-bi-check-all"},null,8,["text"]),[[R,y.value]])]))}},tt=o=>(gt("data-v-1bcaa719"),o=o(),bt(),o),io={class:"mx-auto w-full align-middle work-view md:w-1/2"},co={key:0,class:"p-4 mb-4 w-full text-center text-black bg-yellow-200 rounded-md theme-color-secondary"},uo={class:"flex flex-row justify-center mb-2"},mo=tt(()=>r("div",null,"You are currently viewing the preview mode, this work isn't published yet.",-1)),po={class:"font-bold cursor-pointer"},ho={class:"mr-2 font-normal"},vo={class:"italic"},fo={key:1,class:"alert-success"},wo={class:"flex flex-row justify-between p-3 mb-2 text-black align-middle bg-yellow-200 rounded"},yo={class:"mr-4"},go={class:"image-list"},bo=["src","data-source"],ko={class:"interactions"},xo={class:"reaction-counters"},Co={class:"counter"},_o={key:1,class:"counter"},Io={key:2,class:"counter"},$o={key:3,class:"counter"},Ao={key:0,class:"reactions"},Ro={class:"inline-block relative z-30 dropdown"},So={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options"},Po={class:"invisible rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 dropdown-menu"},Lo={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 p-1 mt-2 w-56 rounded-md shadow-lg origin-top-right outline-none theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},Oo={key:2,class:"custom-divider"},Uo={key:4,class:"custom-divider"},Vo=["to"],qo=tt(()=>r("div",{class:"custom-divider"},null,-1)),Eo={class:"comments"},To={key:0,class:"comment-box"},Mo={class:"flex flex-col"},Bo={class:"flex relative flex-col"},jo=["readonly","rows","placeholder"],Fo={key:1,class:"p-4 mb-4 text-center rounded-md theme-color-secondary"},Do={class:"comment-content"},No=["src"],Ho={class:"w-full"},Qo={class:"flex justify-between"},zo={class:"comment-time"},Wo={class:"mt-4 reactions"},Go=["onClick"],Jo={key:0},Yo={key:0,class:"flex flex-row"},Ko=["onClick"],Xo=["onClick"],Zo={class:"inline-block relative ml-2 dropdown"},el={class:"invisible z-50 rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 cursor-pointer dropdown-menu"},tl={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 p-1 mt-2 w-56 rounded-md border shadow-lg origin-top-right outline-none border-color theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},al=["onClick"],sl={key:0,class:"-mb-4 comment-box"},ol={class:"flex flex-col"},ll={class:"flex relative flex-col"},nl=["id","readonly","rows","placeholder"],rl=["onClick"],il=["id"],cl={key:0,class:"w-full"},ul={class:"float-left mb-2 text-xs italic text-color-secondary"},dl=["onClick"],ml={class:"flex flex-row justify-between"},pl=["src"],hl={class:"transition-all duration-150 cursor-pointer hover:font-bold"},vl={class:"leading-6 comment-time"},fl={class:"mt-2"},wl={key:0,class:"mt-2 reactions"},yl=tt(()=>r("span",null,null,-1)),gl={class:"flex flex-row"},bl=["onClick"],kl={class:"inline-block relative ml-2 dropdown"},xl={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options"},Cl={class:"invisible z-50 rounded-md opacity-0 transition-all duration-300 transform origin-top-right scale-95 -translate-y-2 cursor-pointer dropdown-menu"},_l={id:"headlessui-menu-items-feed-more-options",class:"absolute right-0 z-50 p-1 mt-2 w-56 rounded-md border shadow-lg origin-top-right outline-none border-color theme-color","aria-labelledby":"headlessui-menu-button-1",role:"menu"},Il=["onClick"],$l=["onClick"],Al={key:3,class:"mt-4 w-full text-xs italic text-center"},Rl={__name:"ModalView",props:{id:{type:String,default:""},section:{type:String,default:""}},emits:["stopLoading","showEmpty","showError"],setup(o,{expose:e,emit:t}){const s=o,a=Ve(),{oApiConfiguration:l,fetchOptions:n}=Ce(),{applyExplicitFilter:c,removeExplicitFilter:p,generateSemiCompressedArtworkUrl:u}=Kt(),v=wt(l,n()),d=yt(l,n()),h=ft(),{$router:y}=Xt(),i=vt();Oe(()=>i.query,()=>{w(),X().closeModal("collection-selection-modal"),X().closeModal("album-selection-modal"),X().closeModal("report-modal")}),Ee(()=>{s.id!==""&&j(s.id),window.addEventListener("keydown",m=>{const f=document.getElementById("collection-selection-modal"),U=document.getElementById("album-selection-modal"),q=document.getElementById("report-modal"),te=document.querySelectorAll(".viewer-in");m.key==="Escape"&&(!f||f.style.display!="flex")&&(!U||U.style.display!="flex")&&(!q||q.style.display!="flex")&&!te.length&&w()})});const w=()=>{X().closeModal(`${s.section}-modal`)},C=k(!1),L=()=>{C.value=!1,p()},S=s.id==="",G=async m=>{await v.incraseViewCount(m)},J=k(!1),Y=k(!0),A=k({}),ne=k(!1),ae=k(!1),N=k(!1),H=k([]),j=async m=>{Z.value="",se.value=[],re.value=[],Y.value=!0;const[f,U]=await v.getWorkById(m);U?U=="Work not found"?t("showEmpty"):t("showError"):(A.value=f,H.value=[],f.artwork_assets.forEach(te=>{H.value.push({thumbnail:u(te.bucket,te.filename,!0),source:u(te.bucket,te.filename,!1)})}),!a.loggedIn&&f.is_explicit||f.is_explicit&&!a.user.user_settings.show_explicit?(C.value=!0,c()):C.value=!1,ne.value=f.liked,ae.value=f.saved,N.value=f.in_album,rt().formatApiToWeb(f.scheduled_post)<rt().currentUtcTime()?(await At(m),a.loggedIn&&await T(m),(!a.loggedIn||a.user.id!==f.users.id)&&await G(m)):a.user.id!==f.users.id?y.push("/"):J.value=!0),Y.value=!1,t("stopLoading")},E=k({}),T=async m=>{const[f,U]=await d.getReportStatus({type:"artwork",postId:m});U||(f.length?E.value=f[0]:E.value={})},Q=async()=>{const[m,f]=await v.like({workId:A.value.id});if(m){ne.value=!0;const U=document.getElementById("like-button");U.classList.add("animate-bounce"),setInterval(()=>{U.classList.remove("animate-bounce")},2500)}},ge=async()=>{const[m,f]=await v.unlike({workId:A.value.id});m&&(ne.value=!1)},se=k([]),Me=Je({perPage:3,page:0}),_e=k([]),at=async m=>{const[f,U]=await v.getComments({workId:m,pagination:{page:Me.page,perPage:Me.perPage}});if(f)return f.pagination.current_page===f.pagination.first_last.last_page?Se.value=!1:Se.value=!0,f.comments.forEach(q=>{q.liked&&we.value.push(q.id),_e.value.push(q.id)}),f.comments},At=async m=>{try{(await at(m)).forEach(U=>se.value.push(U))}catch{}},Se=k(!1),Rt=async m=>{try{Me.page+=1,(await at(m)).forEach(U=>se.value.push(U))}catch{}},Z=k(),Be=200,St=Le(()=>Z.value!=null&&Z.value!==""?Be-Z.value.length:Be),be=k(!1),Pt=async()=>{be.value=!0;try{const[m,f,U]=await v.addComment({workId:A.value.id,comment:Z.value});m&&(Z.value="",se.value.splice(0,0,f),se.value.join(),_e.value.splice(0,0,f.id),_e.value.join())}catch{}be.value=!1},Lt=async m=>{const[f,U]=await v.deleteComment({commentId:m});if(f){const q=_e.value.indexOf(m);se.value.splice(q,1),_e.value.splice(q,1)}},we=k([]),Ot=async m=>{const[f,U]=await v.likeComment({commentId:m});if(f){we.value.push(m);const q=document.getElementById(`comment-like-button-${m}`);q.classList.add("animate-bounce"),setInterval(()=>{q.classList.remove("animate-bounce")},2500)}},Ut=async m=>{const[f,U]=await v.unlikeComment({commentId:m});if(f){const q=we.value.indexOf(m);we.value.splice(q,1)}},je=Je({perPage:2,page:0}),re=k([]),ke=k([]),Fe=k(!0),st=async m=>{const[f,U,q]=await v.getCommentReplies({commentId:m,pagination:{page:je.page,perPage:je.perPage}});if(!q)return U.current_page===U.first_last.last_page&&(Fe.value=!1),f.map(te=>ke.value.push(te.id)),f},Ie=k(0),De=async m=>{Fe.value=!0,ke.value=[];try{const f=await st(m);re.value={[m]:f},f.forEach(q=>{q.liked&&ye.value.push(q.id)}),Ie.value&&Ne(Ie.value);const U=document.getElementById(`comment-replies-${m}`);U.classList.add("flex"),U.classList.remove("hidden"),Ie.value=m}catch{}},Ne=m=>{const f=document.getElementById(`comment-replies-${m}`);f.classList.remove("flex"),f.classList.add("hidden"),Ie.value=0},Vt=async m=>{je.page+=1;try{(await st(m)).forEach(U=>{re.value[m].push(U)})}catch{}},Pe=k(0),qt=async m=>{await De(m),Pe.value=m},ee=k(),He=200,Et=Le(()=>ee.value!=null&&ee.value!==""?He-ee.value.length:He),xe=k(!1),Tt=async m=>{xe.value=!0;try{const[f,U,q]=await v.addReply({commentId:m,reply:ee.value});f&&(De(m),ee.value="",re.value[m].splice(0,0,U),re.value[m].join(),Pe.value=0,ke.value.splice(0,0,U.id),ke.value.join())}catch{}xe.value=!1},Mt=async(m,f)=>{const[U,q]=await v.deleteReply({replyId:f});if(U){const te=ke.value.indexOf(f);re.value[m].splice(te,1),ke.value.splice(te,1)}},ye=k([]),Bt=async m=>{const[f,U]=await v.likeReply({replyId:m});if(f){ye.value.push(m);const q=document.getElementById(`reply-like-button-${m}`);q.classList.add("animate-bounce"),setInterval(()=>{q.classList.remove("animate-bounce")},2500)}},jt=async m=>{const[f,U]=await v.unlikeReply({replyId:m});if(f){const q=ye.value.indexOf(m);ye.value.splice(q,1)}},Qe=k(!1),ze=k(!1),ot=async m=>{const[f,U]=await v.deleteWork({workId:[m]});f&&(ze.value=!0,setTimeout(()=>{y.push("/")},1500))},We=k(null),Ft=()=>{X().openModal("collection-selection-modal"),We.value.fetchCollection(),We.value.fetchCurrentSaved()},Dt=m=>{m?ae.value=!1:ae.value=!0,it().animate("save-to-collection-button")},lt=k(null),Nt=()=>{X().openModal("album-selection-modal"),lt.value.fetchCurrentSaved()},Ht=m=>{m?N.value=!1:N.value=!0,it().animate("save-to-album-button")},Qt=()=>{X().openModal("share-to-feed-modal")},nt=k(!1);let zt;const Wt=m=>{const f=k(h.public.appUrl+m),{copy:U}=_t({source:f});U(),kt().splash(zt,nt,"copy-alert")},Gt=k(null),Jt=()=>{X().openModal("report-modal")};return e({view:j}),(m,f)=>{const U=oa("viewer"),q=Re,te=la("auto-animate");return b(),_(he,null,[$(r("div",io,[x(qe,{loading:Y.value},null,8,["loading"])],512),[[R,Y.value&&!m.isMobile()&&S]]),$(r("div",{class:D(["work-container work-view",S?"w-full 2xl:w-4/6 2xl:mx-auto p-2 md:p-6 theme-color":"w-full"])},[r("div",{class:D(["left-side",{"overflow-y-scroll mr-6":S}])},[J.value&&!ze.value?(b(),_("div",co,[r("div",uo,[x(V,{name:"i-ion-alert-outline"}),mo]),r("div",po,[r("span",{class:"text-red-500",onClick:f[0]||(f[0]=I=>Qe.value=!0)},g(m.$t("artworks.deleteArtwork")),1),$(r("div",null,[r("span",ho,[B(g(m.$t("alert.areYouSure"))+" ",1),r("span",vo,"("+g(m.$t("alert.youCannotUndoThisAction"))+")",1)]),r("span",{class:"mr-2 text-red-500 hover:underline",onClick:f[1]||(f[1]=I=>ot(A.value.id))},g(m.$t("yes")),1),r("span",{class:"hover:underline",onClick:f[2]||(f[2]=I=>Qe.value=!1)},g(m.$t("no")),1)],512),[[R,Qe.value]])])])):P("",!0),ze.value?(b(),_("div",fo,g(m.$t("artworks.successDelete")),1)):P("",!0),$(r("div",wo,[r("span",yo,g(O(a).loggedIn?m.$t("explicitContentAlert"):m.$t("explicitContentAlertForGuest")),1),r("button",{class:"primary-button",onClick:f[3]||(f[3]=pe(I=>L(),["prevent"]))},g(m.$t("show")),1)],512),[[R,C.value]]),r("div",go,[x(U,{options:{url:"data-source"},images:H.value,class:"overflow-hidden rounded-md"},{default:K(()=>[(b(!0),_(he,null,ve(H.value,(I,M)=>(b(),_("img",{key:I.thumbnail,src:I.thumbnail,"data-source":I.source,class:D(["overflow-hidden mb-2 rounded cursor-pointer image image-layer unselectable",{"blur-lg unclickable":C.value},C.value?"brightness-50":"brightness-100"]),onError:f[4]||(f[4]=(...$e)=>m.imageLoadError&&m.imageLoadError(...$e))},null,42,bo))),128))]),_:1},8,["images"])]),r("div",ko,[r("div",xo,[A.value.is_explicit?(b(),_("span",{key:0,class:D(["py-1 px-2 mr-2 font-bold rounded-md text-xxs",S?"theme-color-secondary":"bg-tag"])},"E",2)):P("",!0),$(r("span",Co,[r("b",null,g(m.shortNumber(A.value.views)),1),B(" "+g(m.$t("count.views")),1)],512),[[R,A.value.views>0]]),A.value._count?$((b(),_("span",_o,[r("b",null,g(m.thousand(A.value._count.artwork_likes)),1),B(" "+g(m.$t("count.likes")),1)],512)),[[R,A.value._count.artwork_likes>0]]):P("",!0),A.value._count?$((b(),_("span",Io,[r("b",null,g(m.thousand(A.value._count.artwork_comments)),1),B(" "+g(m.$t("count.comments")),1)],512)),[[R,A.value._count.artwork_comments>0]]):P("",!0),A.value._count?$((b(),_("span",$o,[r("b",null,g(m.thousand(A.value._count.artwork_collection_has_works)),1)],512)),[[R,A.value._count.artwork_collection_has_works]]):P("",!0)]),J.value?P("",!0):(b(),_("div",Ao,[O(a).loggedIn?(b(),_("span",{key:0,onClick:f[5]||(f[5]=I=>ne.value?ge():Q())},[$(x(V,{id:"like-button",name:"i-ri-heart-3-line",class:"text-red-500 hover:text-red-500"},null,512),[[R,ne.value]]),$(x(V,{name:"i-ion-heart-outline",class:"hover:text-red-500"},null,512),[[R,!ne.value]])])):P("",!0),O(a).loggedIn?(b(),_("span",{key:1,onClick:f[6]||(f[6]=I=>Ft())},[$(x(V,{id:"save-to-collection-button",name:"i-majesticons-bookmark",class:"text-blue-500 hover:text-blue-500"},null,512),[[R,ae.value]]),$(x(V,{name:"i-majesticons-bookmark-line",class:"hover:text-blue-500"},null,512),[[R,!ae.value]])])):P("",!0),O(a).loggedIn&&A.value.users&&O(a).user.id===A.value.users.id?(b(),_("span",{key:2,onClick:f[7]||(f[7]=I=>Nt())},[$(x(V,{id:"save-to-album-button",name:"i-ion-folder-open",class:"text-green-500 hover:text-green-500"},null,512),[[R,N.value]]),$(x(V,{name:"i-bx-photo-album",class:"hover:text-blue-500"},null,512),[[R,!N.value]])])):P("",!0),O(a).loggedIn?(b(),_("span",{key:3,onClick:f[8]||(f[8]=I=>Qt())},[x(V,{name:"i-uil-share",class:"hover:text-blue-500"})])):P("",!0),r("div",Ro,[r("button",So,[r("span",null,[x(V,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),r("div",Po,[r("div",Lo,[S?(b(),ce(q,{key:0,to:"/a/"+A.value.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:K(()=>[x(V,{name:"i-fluent-arrow-enter-20-filled",class:"mr-2 text-base"}),B(" "+g(m.$t("open")),1)]),_:1},8,["to"])):P("",!0),S?(b(),ce(q,{key:1,to:"/a/"+A.value.id,target:"_blank",class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:K(()=>[x(V,{name:"i-ci-external-link",class:"mr-2 text-base"}),B(" "+g(m.$t("openInNewTab")),1)]),_:1},8,["to"])):P("",!0),S?(b(),_("div",Oo)):P("",!0),O(a).loggedIn&&A.value.users&&O(a).user.id!=A.value.users.id&&!O(a).user.is_admin&&!O(a).user.is_moderator?(b(),_("div",{key:3,to:"#",class:D(["flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",{"rounded-t-md":!S}]),onClick:f[9]||(f[9]=I=>Jt())},[x(V,{name:"i-akar-icons-flag",class:"mr-2 text-base"}),B(" "+g(m.$t("report")),1)],2)):P("",!0),r("div",{class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 cursor-pointer theme-color hover:button-color parent-icon hover:text-white",onClick:f[10]||(f[10]=I=>Wt("/a/"+A.value.id))},[x(V,{name:"i-icon-park-outline-copy",class:"mr-2 text-base"}),B(" "+g(m.$t("copySharableLink")),1)]),O(a).loggedIn&&A.value.users&&O(a).user.id===A.value.users.id?(b(),_("div",Uo)):P("",!0),O(a).loggedIn&&A.value.users&&O(a).user.id===A.value.users.id?(b(),ce(q,{key:5,to:"/works/update/"+A.value.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white"},{default:K(()=>[x(V,{name:"i-ion-settings-outline",class:"mr-2 text-base"}),B(" "+g(m.$t("update")),1)]),_:1},8,["to"])):P("",!0),O(a).loggedIn&&A.value.users&&O(a).user.id===A.value.users.id?(b(),_("div",{key:6,to:"/a/"+A.value.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 cursor-pointer bg-danger hover:button-color parent-icon hover:text-white",onClick:f[11]||(f[11]=I=>m.openModal("work-deletion-confirm-modal"))},[x(V,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),B(" "+g(m.$t("delete")),1)],8,Vo)):P("",!0)])])])]))]),x(mt,{section:o.section,class:"flex-md-hidden","is-modal":S,"artwork-detail":A.value,"preview-mode":J.value,"is-desktop":!0},null,8,["section","artwork-detail","preview-mode"]),(b(),ce(na,null,[Y.value?P("",!0):(b(),ce(pt,{key:0,class:"mb-6 hidden-md-flex","artwork-detail":A.value,view:j,"is-href":!S,"keep-artist-page-number":!0,"pagination-per-page":4},null,8,["artwork-detail","is-href","pagination-per-page"]))],1024))],2),r("div",{class:D(["right-side",{"pr-3 overflow-y-scroll":S}])},[x(mt,{section:o.section,class:"hidden-md-flex","is-modal":S,"artwork-detail":A.value,"preview-mode":J.value,"is-desktop":!1},null,8,["section","artwork-detail","preview-mode"]),Y.value?P("",!0):(b(),ce(pt,{key:0,class:"flex-md-hidden","artwork-detail":A.value,view:j,"is-href":!S,"keep-artist-page-number":!0,"pagination-per-page":4},null,8,["artwork-detail","is-href","pagination-per-page"])),qo,r("section",Eo,[O(a).loggedIn&&!J.value?(b(),_("div",To,[r("div",Mo,[r("div",Bo,[$(r("textarea",{"onUpdate:modelValue":f[12]||(f[12]=I=>Z.value=I),class:D(["input form-input",[{"cursor-not-allowed":be.value},{"theme-color-secondary textarea":S}]]),readonly:be.value,cols:"30",rows:Z.value!=null&&Z.value!=""?"8":"0",placeholder:m.$t("comments.inputPlaceholder"),maxlength:Be,"data-gramm":"false"},null,10,jo),[[Ae,Z.value]]),$(r("span",{class:"absolute left-4 bottom-6 py-1 px-2 text-white rounded-md button-color"},g(O(St)),513),[[R,Z.value!=null&&Z.value!=""]]),r("span",{class:"absolute right-2 bottom-5 py-1 px-2",onClick:f[13]||(f[13]=pe(I=>Pt(),["prevent"]))},[$(x(V,{name:"i-ion-prism",class:"text-xl transition-all duration-100 rotate-90 cursor-pointer text-colored"},null,512),[[R,Z.value!=null&&Z.value!=""&&!be.value]]),$(x(Ye,null,null,512),[[R,be.value]])])])])])):P("",!0),O(a).loggedIn?P("",!0):(b(),_("div",Fo,g(m.$t("comments.loginOrRegisterToLeaveComment")),1)),r("div",Do,[(b(!0),_(he,null,ve(se.value,I=>$((b(),_("div",{key:I.id,class:"flex flex-row w-full comment-item"},[x(q,{class:"mr-2",to:"/profile/"+I.users.username},{default:K(()=>[r("img",{class:"w-10 h-10 avatar",src:m.avatarCoverUrl(I.users.avatar_bucket,I.users.avatar_filename),onError:f[14]||(f[14]=(...M)=>m.imageLoadError&&m.imageLoadError(...M))},null,40,No)]),_:2},1032,["to"]),r("div",Ho,[r("div",{class:D(["p-3 w-full rounded-md",S?"theme-color-secondary":"theme-color"])},[r("div",Qo,[x(q,{to:"/profile/"+I.users.username,class:"mb-2 text-xs font-semibold transition-all duration-150 cursor-pointer"},{default:K(()=>[B(g(I.users.name),1)]),_:2},1032,["to"]),r("div",zo,g(m.formatDate(I.created_at,!0)),1)]),r("div",null,g(I.comment),1),r("div",Wo,[r("div",{class:"cursor-pointer hover:underline",onClick:M=>Ie.value==I.id?Ne(I.id):De(I.id)},[I._count.artwork_comment_has_replies>0?(b(),_("span",Jo,[r("b",null,g(m.shortNumber(I._count.artwork_comment_has_replies)),1),B(" "+g(I._count.artwork_comment_has_replies>1?m.$t("comments.replies.replies").toLowerCase():m.$t("comments.replies.reply").toLowerCase()),1)])):P("",!0)],8,Go),O(a).loggedIn?(b(),_("div",Yo,[r("span",{class:"reaction",onClick:M=>we.value.includes(I.id)?Ut(I.id):Ot(I.id)},[$(x(V,{name:"i-ion-heart-outline",class:"text-gray-500 hover:text-red-500"},null,512),[[R,!we.value.includes(I.id)]]),$(x(V,{id:"comment-like-button-"+I.id,name:"i-ri-heart-3-line",class:"text-red-500 hover:text-red-500"},null,8,["id"]),[[R,we.value.includes(I.id)]]),B(" "+g(m.shortNumber(I._count.artwork_comment_has_likes)),1)],8,Ko),r("span",{class:"reaction",onClick:M=>qt(I.id)},[x(V,{name:"i-quill-reply",class:"text-gray-500 hover:text-blue-500"})],8,Xo),r("div",Zo,[r("button",{type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"headlessui-menu-items-feed-more-options",onClick:f[15]||(f[15]=M=>Pe.value=0)},[r("span",null,[x(V,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),r("div",el,[r("div",tl,[x(q,{to:"/profile/"+I.users.username,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:f[16]||(f[16]=pe(()=>{},["prevent"]))},{default:K(()=>[x(V,{name:"i-fluent-person-32-regular",class:"mr-2 text-base"}),B(" "+g(m.$t("viewProfile")),1)]),_:2},1032,["to"]),O(a).loggedIn&&O(a).user.id===I.users.id?(b(),_("div",{key:0,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:M=>Lt(I.id)},[x(V,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),B(" "+g(m.$t("delete")),1)],8,al)):P("",!0)])])])])):P("",!0)])],2),O(a).loggedIn?$((b(),_("div",sl,[r("div",ol,[r("div",ll,[$(r("textarea",{id:"reply-"+I.id,"onUpdate:modelValue":f[17]||(f[17]=M=>ee.value=M),class:D(["mt-2 w-full input form-input",[{"cursor-not-allowed":xe.value},{"theme-color-secondary textarea":S}]]),readonly:xe.value,cols:"30",rows:ee.value!=null&&ee.value!=""?"5":"0",placeholder:m.$t("comments.replies.write"),maxlength:He,"data-gramm":"false"},null,10,nl),[[Ae,ee.value]]),$(r("span",{class:"absolute left-4 bottom-6 py-1 px-2 text-white rounded-md button-color"},g(O(Et)),513),[[R,ee.value!=null&&ee.value!=""]]),r("span",{class:"absolute right-2 bottom-5 py-1 px-2",onClick:pe(M=>Tt(I.id),["prevent"])},[$(x(V,{name:"i-ion-prism",class:"text-xl transition-all duration-100 rotate-90 cursor-pointer text-colored"},null,512),[[R,ee.value!=null&&ee.value!=""&&!xe.value]]),$(x(Ye,null,null,512),[[R,xe.value]])],8,rl)])])],512)),[[R,Pe.value===I.id]]):P("",!0),r("div",{id:"comment-replies-"+I.id,class:"hidden flex-col mt-2"},[re.value[I.id]&&re.value[I.id].length?(b(),_("div",cl,[r("span",ul,g(m.$t("comments.replies.replies")),1),r("span",{class:"float-right text-xs cursor-pointer hover:font-semibold",onClick:M=>Ne(I.id)},g(m.$t("hide")),9,dl)])):P("",!0),(b(!0),_(he,null,ve(re.value[I.id],M=>(b(),_("div",{key:M.id,class:D(["p-3 mb-2 w-full rounded-md border-l-4",S?"theme-color-secondary":"theme-color"])},[r("div",ml,[x(q,{to:"/profile/"+M.users.username,class:"flex flex-row leading-6"},{default:K(()=>[r("img",{class:"mr-2 w-6 h-6 rounded-full",src:m.avatarCoverUrl(M.users.avatar_bucket,M.users.avatar_filename),onError:f[18]||(f[18]=(...$e)=>m.imageLoadError&&m.imageLoadError(...$e))},null,40,pl),r("span",hl,g(M.users.name),1)]),_:2},1032,["to"]),r("span",vl,g(m.formatDate(M.created_at,!0)),1)]),r("div",fl,g(M.content),1),O(a).loggedIn?(b(),_("div",wl,[yl,r("div",gl,[r("span",{class:"reaction",onClick:$e=>ye.value.includes(M.id)?jt(M.id):Bt(M.id)},[$(x(V,{id:"reply-like-button-"+M.id,name:"i-ri-heart-3-line",class:"text-red-500 hover:text-red-500"},null,8,["id"]),[[R,ye.value.includes(M.id)]]),$(x(V,{name:"i-ion-heart-outline",class:"text-gray-500 hover:text-red-500"},null,512),[[R,!ye.value.includes(M.id)]]),B(" "+g(m.shortNumber(M._count.artwork_comment_reply_has_likes)),1)],8,bl),r("div",kl,[r("button",xl,[r("span",null,[x(V,{name:"i-ion-ellipsis-vertical-outline",class:"align-middle icon icon-color"})])]),r("div",Cl,[r("div",_l,[x(q,{to:"/profile/"+M.users.id,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:f[19]||(f[19]=pe(()=>{},["prevent"]))},{default:K(()=>[x(V,{name:"i-fluent-person-32-regular",class:"mr-2 text-base"}),B(" "+g(m.$t("viewProfile")),1)]),_:2},1032,["to"]),O(a).loggedIn&&O(a).user.id===M.users.id?(b(),_("div",{key:0,class:"flex z-50 py-2 px-3 w-full rounded-md transition-all duration-150 theme-color hover:button-color parent-icon hover:text-white",onClick:$e=>Mt(I.id,M.id)},[x(V,{name:"i-ion-trash-outline",class:"mr-2 text-base"}),B(" "+g(m.$t("delete")),1)],8,Il)):P("",!0)])])])])])):P("",!0)],2))),128)),re.value[I.id]&&Fe.value?(b(),_("div",{key:1,class:"mb-1 text-center transition ease-in-out delay-75 cursor-pointer hover:font-semibold hover:underline text-color-secondary href",onClick:M=>Vt(I.id)},g(m.$t("comments.replies.loadMore")),9,$l)):P("",!0)],8,il)])])),[[te]])),128))]),A.value._count?$((b(),_("div",{key:2,class:"text-center capitalize href",onClick:f[20]||(f[20]=pe(I=>Rt(A.value.id),["prevent"]))},g(m.$t("comments.loadOlder")),513)),[[R,A.value._count.artwork_comments>3&&Se.value]]):P("",!0),$(r("div",{class:"w-full text-xs italic text-center"},g(m.$t("comments.reachedTheEnd")),513),[[R,se.value.length&&!Se.value]]),O(a).loggedIn&&!se.value.length&&!J.value?(b(),_("div",Al,g(m.$t("comments.noCommentYet")),1)):P("",!0)])],2),Y.value?P("",!0):(b(),ce(ps,{key:0,id:"collection-selection-modal","modal-id":"collection-selection-modal",ref_key:"collectionSelectionModalRef",ref:We,"work-id":A.value.id,class:"modal",onSave:Dt},null,8,["work-id"])),!Y.value&&O(a).loggedIn&&A.value.users&&O(a).user.id==A.value.users.id?(b(),ce(O(_s),{key:1,id:"album-selection-modal",ref_key:"albumSelectionModalRef",ref:lt,"modal-id":"album-selection-modal","work-id":A.value.id,class:"modal",onAddedToAlbum:Ht},null,8,["work-id"])):P("",!0),x(Rs,{id:"work-deletion-confirm-modal","modal-id":"work-deletion-confirm-modal",message:`${m.$t("alert.areYouSure")} ${m.$t("alert.youCannotUndoThisAction")}`,class:"modal",onOnAccept:f[21]||(f[21]=I=>ot(A.value.id))},null,8,["message"]),x(Ys,{id:"report-modal",ref_key:"reportModalRef",ref:Gt,class:"modal",type:"artwork","post-id":A.value.id,"report-status":E.value},null,8,["post-id","report-status"]),x(ro,{id:"share-to-feed-modal",ref:"shareToFeedModalRef",class:"modal","post-id":A.value.id},null,8,["post-id"]),$(x(It,{id:"copy-alert",text:m.$t("linkCopied"),icon:"i-bi-check-all"},null,8,["text"]),[[R,nt.value]])],2),[[R,!Y.value]])],64)}}},Tl=fe(Rl,[["__scopeId","data-v-1bcaa719"]]);export{Tl as M,It as S,Ja as W,Rs as _,ps as a,_t as b,kt as c,it as d,hs as e,es as f,_s as g,xa as u};
//# sourceMappingURL=ModalView.a5e9048d.js.map
