import{c as ee,d as K,n as Ae,i as X,_ as me,h as ve,P as Ce,l as Pe,e as Fe}from"../server.mjs";import{ref as b,openBlock as t,createElementBlock as l,Fragment as H,renderList as J,createElementVNode as e,createVNode as f,withCtx as q,createTextVNode as j,toDisplayString as a,createCommentVNode as r,withDirectives as C,withModifiers as W,vShow as E,createBlock as N,unref as g,pushScopeId as fe,popScopeId as pe,onBeforeMount as Se,KeepAlive as ge,normalizeClass as T,vModelText as Z,watch as Ie,onMounted as he,normalizeStyle as Ee,computed as je}from"vue";import"vue-router";import{W as _e,M as ke,e as ne,S as ie,c as re,_ as ce,f as ue,g as Te,u as Re}from"./ModalView.bcb00595.js";import{J as Ue,u as be,L as Be}from"./Layout.46c0288b.js";import{_ as Y,a as M,u as ze}from"./Icon.0b4f7d9a.js";import{u as Oe}from"./useFeed.28f12f74.js";import{I as Me,F as Ve}from"./FeedModalView.a5709a20.js";import{_ as te}from"./ErrorMessages.3c30c12c.js";import{u as ye}from"./useUser.437bf027.js";const de=u=>(fe("data-v-98a1c50f"),u=u(),pe(),u),Ne={class:"mx-auto w-full md:w-2/3"},De={class:"flex flex-row mb-2 rounded-lg border-none shadow-none theme-color-secondary"},qe={class:"w-full"},We={key:0,class:"p-4 user-info"},Ge=["src"],He={class:"name"},Je=de(()=>e("br",null,null,-1)),Ke=de(()=>e("span",{class:"mx-1"},"\xB7",-1)),Qe={class:"text-xxs"},Xe={class:"px-2 md:px-4"},Ye={key:0,class:"my-2 w-full rounded-md theme-color"},Ze={key:0,class:"p-2 md:p-4 user-info"},et=["src"],tt={class:"name"},ot=de(()=>e("br",null,null,-1)),st=de(()=>e("span",{class:"mx-1"},"\xB7",-1)),lt={class:"px-2 mt-2 md:px-4"},at={class:"text-xs font-semibold"},nt=["id"],it=["id","onClick"],rt=["onClick"],ut={class:"float-right mx-4 mt-2 interactions"},dt={key:0,class:"reactions"},ct=["onClick"],mt=["onClick"],vt={class:"option dropdown"},ft={type:"button","aria-haspopup":"true","aria-expanded":"true","aria-controls":"option-dropdown-items"},pt={class:"option-dropdown dropdown-menu"},ht={id:"option-dropdown-items",class:"w-52 toggler","aria-labelledby":"option-dropdown-buttons",role:"menu"},bt={class:"menu-wrapper"},wt={class:"mx-auto text-center"},gt={class:"mx-auto mt-10 text-center"},_t=de(()=>e("b",null,"(\u3186_\u3186)",-1)),kt={class:"mx-auto text-center"},yt={id:"chronological-feed-modal",class:"modal work-view"},$t={__name:"Feeds",props:{userId:{type:Number,default:0}},setup(u){const A=u,x=ee(),{oApiConfiguration:d,fetchOptions:P}=K(),w=Oe(d,P()),{generateArtworkThumb:y}=Ae(),_=b([]),p=b({page:0,perPage:10}),h=async({loaded:i})=>{const[k,F]=await w.getFeedByUserId({userId:A.userId,pagination:{page:p.value.page,perPage:p.value.perPage}});p.value.page+=1;for(let c=0;c<k.feeds.length;c++){const I=k.feeds[c];if(I.liked&&$.value.push(I.id),I.artworks){I.artworks.images=[];for(let O=0;O<I.artworks.artwork_assets.length;O++)if(O<=3){const D=await y(I.artworks.artwork_assets[O].bucket,I.artworks.artwork_assets[O].filename,"feed");I.artworks.images.push(D)}}_.value.push(I)}i(k.feeds.length,p.value.perPage)},s=b(null),n=i=>{s.value.view(i),X().openModal("chronological-feed-modal")},$=b([]),U=async i=>{const[k,F]=await w.like({feedId:i});if(k){$.value.push(i);const c=document.getElementById(`profileFeedLikeButton-${i}`);c.classList.add("animate-bounce"),setInterval(()=>{c.classList.remove("animate-bounce")},2500)}},o=async i=>{const[k,F]=await w.unlike({feedId:i});if(k){const c=$.value.indexOf(i);$.value.splice(c,1)}};return(i,k)=>{const F=me;return t(),l("div",Ne,[(t(!0),l(H,null,J(_.value,c=>(t(),l("div",{key:c.id},[e("div",De,[e("div",qe,[c.users?(t(),l("div",We,[f(F,{to:"/profile/"+c.users.username},{default:q(()=>[e("img",{class:"avatar",src:i.avatarCoverUrl(c.users.avatar_bucket,c.users.avatar_filename),onError:k[0]||(k[0]=(...I)=>i.imageLoadError&&i.imageLoadError(...I))},null,40,Ge)]),_:2},1032,["to"]),e("div",He,[f(F,{to:"/profile/"+c.users.username,class:"fullname"},{default:q(()=>[j(a(c.users.name),1)]),_:2},1032,["to"]),Je,f(F,{to:"/profile/"+c.users.username,class:"username hover:underline"},{default:q(()=>[j(" @"+a(c.users.username),1)]),_:2},1032,["to"]),Ke,e("span",Qe,a(i.formatDate(c.scheduled_post?c.scheduled_post:c.created_at,!0)),1)])])):r("",!0),e("div",Xe,[e("p",null,a(c.text),1),c.artworks?(t(),l("div",Ye,[c.artworks.users?(t(),l("div",Ze,[f(F,{to:"/profile/"+c.artworks.users.username},{default:q(()=>[e("img",{class:"avatar",src:i.avatarCoverUrl(c.artworks.users.avatar_bucket,c.artworks.users.avatar_filename),onError:k[1]||(k[1]=(...I)=>i.imageLoadError&&i.imageLoadError(...I))},null,40,et)]),_:2},1032,["to"]),e("div",tt,[f(F,{to:"/profile/"+c.artworks.users.username,class:"fullname hover:href"},{default:q(()=>[j(a(c.artworks.users.name),1)]),_:2},1032,["to"]),ot,f(F,{to:"/profile/"+c.artworks.users.username,class:"hover:underline text-xxs"},{default:q(()=>[j(" @"+a(c.artworks.users.username),1)]),_:2},1032,["to"]),st,f(F,{to:"/a/"+c.artworks.id,class:"hover:underline text-xxs"},{default:q(()=>[j(a(i.formatDate(c.artworks.scheduled_post?c.artworks.scheduled_post:c.artworks.created_at,!0)),1)]),_:2},1032,["to"])])])):r("",!0),e("div",lt,[e("span",at,a(c.artworks.title),1),C(e("p",null,[e("span",{id:"feed-description-"+c.artworks.id},a(c.artworks.description.length>300?`${c.artworks.description.slice(0,300)}...`:c.artworks.description),9,nt),c.artworks.description.length>300?(t(),l("a",{key:0,id:"feed-read-more-"+c.artworks.id,class:"href",onClick:W(I=>i.readMore(c.artworks.description,c.artworks.id,"feed-read-more-","feed-description-"),["prevent"])},a(i.$t("readMore")),9,it)):r("",!0)],512),[[E,c.artworks.description]])]),e("div",null,[i.isMobile()?(t(),N(F,{key:0,to:"/a/"+c.artworks.id,class:"cursor-pointer"},{default:q(()=>[f(Me,{class:"p-2",work:c.artworks},null,8,["work"])]),_:2},1032,["to"])):r("",!0),i.isMobile()?r("",!0):(t(),l("div",{key:1,class:"cursor-pointer",onClick:W(I=>i.view(c.artworks.id),["prevent"])},[f(Me,{class:"p-2 md:p-4",work:c.artworks},null,8,["work"])],8,rt))])])):r("",!0)]),e("div",ut,[g(x).loggedIn?(t(),l("div",dt,[e("span",{class:"leading-8",onClick:I=>$.value.includes(c.id)?o(c.id):U(c.id)},[C(f(M,{id:"profileFeedLikeButton-"+c.id,name:"i-ion-heart",class:"mr-1 text-red-500 hover:text-red-500"},null,8,["id"]),[[E,$.value.includes(c.id)]]),C(f(M,{name:"i-ion-heart-outline",class:"mr-1 icon-color hover:text-red-500"},null,512),[[E,!$.value.includes(c.id)]]),j(" "+a(i.thousand(c._count.feed_likes)),1)],8,ct),e("span",{class:"leading-8",onClick:W(I=>n(c.id),["prevent"])},[f(M,{name:"i-mdi-comment-multiple-outline",class:"mr-1 icon-color hover:text-blue-500"}),j(" "+a(i.thousand(c._count.feed_comments)),1)],8,mt),e("div",vt,[e("button",ft,[e("span",null,[f(M,{name:"i-uit-ellipsis-v",class:"align-middle icon icon-color"})])]),e("div",pt,[e("div",ht,[e("div",bt,[f(F,{to:"/feed/"+c.id,class:"flex py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:q(()=>[f(M,{name:"i-fluent-arrow-enter-20-filled",class:"mr-2 text-base"}),j(" "+a(i.$t("open")),1)]),_:2},1032,["to"]),f(F,{to:"/feed/"+c.id,target:"_blank",class:"flex z-20 py-2 px-3 w-full rounded-md transition-all duration-150 hover:button-color parent-icon hover:text-white"},{default:q(()=>[f(M,{name:"i-ci-external-link",class:"mr-2 text-base"}),j(" "+a(i.$t("openInNewTab")),1)]),_:2},1032,["to"])])])])])])):r("",!0)])])])]))),128)),f(g(Ue),{load:h},{loading:q(()=>[e("div",wt,[f(M,{name:"i-line-md-loading-twotone-loop",class:"text-3xl"})])]),"no-results":q(()=>[e("div",gt,[_t,j(" "+a(i.$t("nothingToShow")),1)])]),"no-more":q(()=>[e("div",kt,a(i.$t("youHaveReachedTheEnd")),1)]),_:1}),e("div",yt,[f(Ve,{ref_key:"chronologicalFeedModalViewRef",ref:s,section:"chronological-feed"},null,512)])])}}},xt=Y($t,[["__scopeId","data-v-98a1c50f"]]),Mt={id:"lists"},Ct=["id"],It={__name:"Artworks",props:{userId:{type:Number,default:0},manageMode:{type:Boolean,default:!1}},emits:["feedSelectedItems","onEmpty"],setup(u,{emit:A}){const x=u,{oApiConfiguration:d,fetchOptions:P}=K(),w=ze(d,P()),y="profile",_=b(!0);Se(()=>{p()});const p=async()=>{const[V,z]=await n();h.value=V,z.record_total<=s.value.perPage&&o(),z.record_total===0&&c()},h=b([]),s=b({perPage:24,page:0}),n=async()=>{s.value.page===0&&(_.value=!0);const[V,z,G]=await w.getUserArtworks({userId:x.userId,pagination:{page:s.value.page,perPage:s.value.perPage}});if(G)O();else return z.record_total<=s.value.perPage&&o(),z.record_total===0&&c(),s.value.page+=1,$(),[V,z]},$=()=>{_.value=!1,F.value=!1,I.value=!1},U=b(!0),o=()=>{U.value=!1},i=b({delay:!1}),k=async()=>{i.value.delay=!0;const[V,z]=await n();for(let G=0;G<V.length;G++)h.value.push(V[G]);i.value.delay=!1,dataPagination.next_previous.next_page||o(),dataPagination.next_previous.next_page&&dataPagination.current_page===i.maxLoad&&(o(),i.showDiscoveryButton=!0)},F=b(!1),c=()=>{F.value=!0,o(),A("onEmpty")},I=b(!1),O=()=>{_.value=!1,I.value=!0,o()},D=b(null),L=(V,z=!1)=>{D.value.view(V,z),X().openModal(y+"-modal")},R=V=>{A("feedSelectedItems",V)};return(V,z)=>(t(),l("div",Mt,[C(e("div",null,[(t(),N(ge,null,[C(f(_e,{"section-class":"work-grid",works:h.value,view:L,"manage-mode":u.manageMode,onFeedManageList:R},null,8,["works","manage-mode"]),[[E,!F.value]])],1024)),C(e("div",{class:T(["primary-button",i.value.delay?"animate-pulse":""]),onClick:k},a(V.$t("loadMore")),3),[[E,U.value]])],512),[[E,!_.value]]),f(te,{loading:_.value,empty:F.value,error:I.value,fetch:n},null,8,["loading","empty","error"]),e("div",{id:y+"-modal",class:"modal work-view"},[C(f(ke,{ref_key:"profileModalViewRef",ref:D,section:y},null,512),[[E,!_.value]])],8,Ct)]))}},Et=Y(It,[["__scopeId","data-v-865112c2"]]),Lt={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},At={class:"title"},Pt=["name"],Ft=["placeholder"],St=["placeholder"],jt=["for"],Tt=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),Rt={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},Ut=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Bt=[Ut],zt={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Ot=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Vt=[Ot],Nt={class:"ml-2"},Dt={class:"flex flex-row gap-2 justify-end mt-2"},qt={type:"submit",class:"primary-button"},Wt={__name:"AlbumFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(u,{emit:A}){const x=u,{oApiConfiguration:d,fetchOptions:P}=K(),w=ne(d,P()),{t:y}=ve(),_="create-album-form",p=b({title:"",description:"",isPublic:1,category:"artwork"}),h=async()=>{be().validate(_,y);try{let s=!1,n={};if(x.category){const[$,U,o]=await w.createAlbum(x.category,p.value);s=$,n=U}s&&(X().closeModal(x.modalId),A("created",n))}catch{}};return(s,n)=>(t(),l("div",null,[e("div",Lt,[e("div",null,[e("span",At,a(s.$t("albums.create.form.title")),1),e("form",{id:_,class:"mt-2",onSubmit:n[4]||(n[4]=W($=>h(),["prevent"]))},[e("n-validate",{for:"title",name:s.$t("title")},[C(e("input",{"onUpdate:modelValue":n[0]||(n[0]=$=>p.value.title=$),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:s.$t("title")},null,8,Ft),[[Z,p.value.title]])],8,Pt),C(e("textarea",{"onUpdate:modelValue":n[1]||(n[1]=$=>p.value.description=$),class:"form-input theme-color-secondary",placeholder:s.$t("description"),"data-gramm":"false"},null,8,St),[[Z,p.value.description]]),e("label",{for:p.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:n[2]||(n[2]=$=>p.value.isPublic=!p.value.isPublic)},[Tt,p.value.isPublic?(t(),l("span",Rt,Bt)):r("",!0),p.value.isPublic?r("",!0):(t(),l("span",zt,Vt))]),e("span",Nt,a(s.$t("private")),1)],8,jt),e("div",Dt,[e("button",{class:"cancel-button",onClick:n[3]||(n[3]=W($=>s.closeModal(u.modalId),["prevent"]))},a(s.$t("cancel")),1),e("button",qt,a(s.$t("create")),1)])],32)])])]))}},Gt={id:"lists"},Ht={class:"p-4 mb-4 w-full rounded-md theme-color-secondary"},Jt={class:"mb-2 text-base font-bold"},Kt={class:"mb-2"},Qt=j(),Xt={class:"italic"},Yt=["id"],Zt={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1}},emits:["onAlbumEmpty","feedManageList"],setup(u,{expose:A,emit:x}){const d=u,{oApiConfiguration:P,fetchOptions:w}=K(),y=ne(P,w()),_=b(d.id);Ie(()=>d.id,(L,R)=>{_.value=L});const p=b(!0),h=b({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:24},list:[],empty:!1}),s=async()=>{p.value=!0,await n(),await $(),p.value=!1},n=async()=>{const[L,R]=await y.getInfo(_.value);h.value.info=L.data},$=async()=>{const[L,R,V]=await y.listAlbumItems({albumId:_.value,pagination:{page:h.value.pagination.page,perPage:h.value.pagination.page===0?h.value.pagination.firstLoad:h.value.pagination.perPage}});R?h.value.pagination.page===0?h.value.pagination.page=h.value.pagination.firstLoad/h.value.pagination.perPage:h.value.pagination.page+=h.value.pagination.page!==0?1:2:h.value.loadMore=!1,L!==null&&L.length?(L.forEach(z=>{h.value.list.push(z.artworks)}),x("onAlbumEmpty",!1)):(h.value.empty=!0,x("onAlbumEmpty",!0))},U=()=>{h.value.loadMore=!0,h.value.pagination.page=0,h.value.list=[]},o=b([]),i=L=>{o.value=L,x("feedManageList",L)},k=b(!1);let F;const c=async()=>{const[L,R]=await y.removeItems(d.id,o.value);L&&(re().splash(F,k,"item-removed-alert"),U(),await s())},I=b("album"),O=b(null),D=(L,R=!1)=>{O.value.view(L,R),X().openModal(I.value+"-modal")};return A({fetchInfo:n,removeItems:c}),(L,R)=>(t(),l("div",Gt,[e("div",{class:"hidden",onClick:R[0]||(R[0]=V=>n())}),e("div",{class:"hidden",onClick:R[1]||(R[1]=V=>c())}),e("div",Ht,[e("div",Jt,a(h.value.info.name),1),e("div",Kt,a(h.value.info.description),1),e("div",null,[e("b",null,a(L.$t("private"))+":",1),Qt,e("span",Xt,a(h.value.info.is_public?L.$t("no"):L.$t("yes")),1)]),e("div",null,[e("b",null,a(L.$t("createdAt")),1),j(" "+a(L.formatDate(h.value.info.created_at)),1)])]),C(e("div",null,[(t(),N(ge,null,[C(f(_e,{"section-class":"work-grid",works:h.value.list,view:D,"manage-mode":u.manageMode,onFeedManageList:i},null,8,["works","manage-mode"]),[[E,!h.value.empty]])],1024)),C(e("div",{class:"primary-button",onClick:R[2]||(R[2]=V=>$())},a(L.$t("loadMore")),513),[[E,h.value.loadMore]])],512),[[E,!p.value]]),f(te,{loading:p.value,empty:h.value.empty,error:!1,fetch:s},null,8,["loading","empty"]),p.value?r("",!0):(t(),l("div",{key:0,id:I.value+"-modal",class:"modal work-view"},[f(ke,{ref_key:"albumModalViewRef",ref:O,section:I.value},null,8,["section"])],8,Yt)),C(f(ie,{id:"item-removed-alert",text:L.$t("albums.itemRemoved")},null,8,["text"]),[[E,k.value]])]))}},eo=Y(Zt,[["__scopeId","data-v-8e492ab6"]]),to={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},oo={class:"title"},so=["name"],lo=["placeholder"],ao=["placeholder"],no=["for"],io=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),ro={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},uo=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),co=[uo],mo={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},vo=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),fo=[vo],po={class:"ml-2"},ho={class:"flex flex-row gap-2 justify-end mt-2"},bo={type:"submit",class:"primary-button"},wo={__name:"EditForm",props:{albumId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(u,{expose:A,emit:x}){const d=u,{oApiConfiguration:P,fetchOptions:w}=K(),y=ne(P,w()),{t:_}=ve(),p=b(!0),h=async o=>{if(o){U(),p.value=!0;const[i,k]=await y.getInfo(o),F=i.data;n.value.id=o,n.value.name=F.name,n.value.description=F.description,n.value.isPublic=!!F.is_public,p.value=!1}},s="update-album-form",n=b({id:0,name:"",description:"",isPublic:!1}),$=async()=>{be().validate(s,_);const[o,i]=await y.update({id:n.value.id,name:n.value.name,description:n.value.description,isPublic:n.value.isPublic?1:0});i||(X().closeModal(d.modalId),x("updated",n.value),U())},U=()=>{n.value={id:0,name:"",description:"",isPublic:0}};return A({fetch:h}),(o,i)=>(t(),l("div",null,[e("div",to,[e("div",null,[e("span",oo,a(o.$t("albums.edit.form.title")),1),p.value?r("",!0):(t(),l("form",{key:0,id:s,class:"mt-2",onSubmit:i[4]||(i[4]=W(k=>$(),["prevent"]))},[e("n-validate",{for:"title",name:o.$t("title")},[C(e("input",{"onUpdate:modelValue":i[0]||(i[0]=k=>n.value.name=k),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:o.$t("title")},null,8,lo),[[Z,n.value.name]])],8,so),C(e("textarea",{"onUpdate:modelValue":i[1]||(i[1]=k=>n.value.description=k),class:"form-input theme-color-secondary",placeholder:o.$t("description"),"data-gramm":"false"},null,8,ao),[[Z,n.value.description]]),e("label",{for:n.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:i[2]||(i[2]=k=>n.value.isPublic=!n.value.isPublic)},[io,n.value.isPublic?(t(),l("span",ro,co)):r("",!0),n.value.isPublic?r("",!0):(t(),l("span",mo,fo))]),e("span",po,a(o.$t("private")),1)],8,no),e("div",ho,[e("button",{class:"cancel-button",onClick:i[3]||(i[3]=W(k=>o.closeModal(u.modalId),["prevent"]))},a(o.$t("cancel")),1),e("button",bo,a(o.$t("save")),1)])],32))])])]))}},Le=""+globalThis.__buildAssetsURL("folder.11be08fa.png"),$e=u=>(fe("data-v-c3fbed63"),u=u(),pe(),u),go={class:"mb-2"},_o={key:0},ko=$e(()=>e("img",{src:Le,class:"rounded"},null,-1)),yo=[ko],$o={key:1},xo={class:"relative text-center"},Mo={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Co={class:"overflow-hidden rounded-md"},Io=["src"],Eo={key:2,class:"imgrid"},Lo={class:"relative text-center"},Ao={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Po={class:"overflow-hidden rounded-md"},Fo=["src"],So=$e(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),jo=$e(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),To={key:3,class:"imgrid"},Ro={class:"relative text-center"},Uo={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Bo={class:"overflow-hidden rounded-md"},zo=["src"],Oo={key:4,class:"imgrid"},Vo={class:"relative text-center"},No={key:0,class:"absolute top-1/2 left-1/2 z-10 text-tiny font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Do={class:"overflow-hidden rounded-md"},qo=["src"],Wo={key:5,class:"imgrid"},Go={key:0,class:"relative text-center"},Ho={key:0,class:"absolute top-1/2 left-1/2 z-10 text-tiny font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Jo={class:"overflow-hidden rounded-md"},Ko=["src"],Qo={key:1,class:"relative text-center"},Xo={class:"absolute top-1/2 left-1/2 z-10 text-3xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Yo={class:"overflow-hidden rounded-md"},Zo=["src"],es={__name:"ArtworkThumbnail",props:{album:{type:Object,default:()=>{}}},setup(u){const A=ee(),x={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(d,P)=>(t(),l("div",go,[!u.album.album_has_artworks||u.album._count.album_has_artworks===0?(t(),l("div",_o,yo)):r("",!0),u.album.album_has_artworks&&u.album._count.album_has_artworks===1?(t(),l("div",$o,[e("div",xo,[d.applyExplicitFilter(g(A),u.album.album_has_artworks[0].artworks.is_explicit)?(t(),l("span",Mo,a(d.$t("explicitContent")),1)):r("",!0),e("div",Co,[u.album.album_has_artworks&&u.album._count.album_has_artworks===1?(t(),l("img",{key:0,src:d.artworkThumb(u.album.album_has_artworks[0].artworks.artwork_assets[0].bucket,u.album.album_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:T(["object-cover object-top rounded",{"blur-sm brightness-50":d.applyExplicitFilter(g(A),u.album.album_has_artworks[0].artworks.is_explicit)}]),style:{"aspect-ratio":"1/1"},onError:P[0]||(P[0]=(...w)=>d.imageLoadError&&d.imageLoadError(...w))},null,42,Io)):r("",!0)])])])):r("",!0),u.album.album_has_artworks&&u.album._count.album_has_artworks===2?(t(),l("div",Eo,[(t(!0),l(H,null,J(u.album.album_has_artworks,(w,y)=>(t(),l("div",{key:y,class:T(x[2][y])},[e("div",Lo,[d.applyExplicitFilter(g(A),w.artworks.is_explicit)?(t(),l("span",Ao,a(d.$t("explicitContent")),1)):r("",!0),e("div",Po,[e("img",{class:T(["theme-color",{"blur-sm brightness-50":d.applyExplicitFilter(g(A),w.artworks.is_explicit)}]),src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:P[1]||(P[1]=(..._)=>d.imageLoadError&&d.imageLoadError(..._))},null,42,Fo)])])],2))),128)),So,jo])):r("",!0),u.album.album_has_artworks&&u.album._count.album_has_artworks===3?(t(),l("div",To,[(t(!0),l(H,null,J(u.album.album_has_artworks,(w,y)=>(t(),l("div",{key:y,class:T(x[3][y])},[e("div",Ro,[d.applyExplicitFilter(g(A),w.artworks.is_explicit)?(t(),l("span",Uo,a(d.$t("explicitContent")),1)):r("",!0),e("div",Bo,[e("img",{class:T(["theme-color",{"blur-sm brightness-50":d.applyExplicitFilter(g(A),w.artworks.is_explicit)}]),src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:P[2]||(P[2]=(..._)=>d.imageLoadError&&d.imageLoadError(..._))},null,42,zo)])])],2))),128))])):r("",!0),u.album.album_has_artworks&&u.album._count.album_has_artworks===4?(t(),l("div",Oo,[(t(!0),l(H,null,J(u.album.album_has_artworks,(w,y)=>(t(),l("div",{key:y},[e("div",Vo,[d.applyExplicitFilter(g(A),w.artworks.is_explicit)?(t(),l("span",No,a(d.$t("explicitContent")),1)):r("",!0),e("div",Do,[e("img",{class:T(["theme-color",{"blur-sm brightness-50":d.applyExplicitFilter(g(A),w.artworks.is_explicit)}]),src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:P[3]||(P[3]=(..._)=>d.imageLoadError&&d.imageLoadError(..._))},null,42,qo)])])]))),128))])):r("",!0),u.album.album_has_artworks&&u.album._count.album_has_artworks>4?(t(),l("div",Wo,[(t(!0),l(H,null,J(u.album.album_has_artworks,(w,y)=>(t(),l("div",{key:y},[y<3?(t(),l("div",Go,[d.applyExplicitFilter(g(A),w.artworks.is_explicit)?(t(),l("span",Ho,a(d.$t("explicitContent")),1)):r("",!0),e("div",Jo,[e("img",{class:T(["theme-color",{"blur-sm brightness-50":d.applyExplicitFilter(g(A),w.artworks.is_explicit)}]),src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:P[4]||(P[4]=(..._)=>d.imageLoadError&&d.imageLoadError(..._))},null,42,Ko)])])):(t(),l("div",Qo,[e("span",Xo,"+"+a(u.album._count.album_has_artworks-4),1),e("div",Yo,[e("img",{src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),class:T(["z-0 brightness-50",{"blur-sm brightness-50":d.applyExplicitFilter(g(A),w.artworks.is_explicit)}]),onError:P[5]||(P[5]=(..._)=>d.imageLoadError&&d.imageLoadError(..._))},null,42,Zo)])]))]))),128))])):r("",!0)]))}},ts=Y(es,[["__scopeId","data-v-c3fbed63"]]),os={class:"mb-2 w-full"},ss={key:0,class:"flex flex-row justify-between"},ls={class:"flex flex-row"},as={key:0},ns={key:1,class:"flex flex-row justify-between"},is={class:"flex flex-row"},rs={class:"flex flex-row gap-2"},us={class:"flex flex-row gap-2"},ds={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},cs=["onClick"],ms={class:"flex flex-row pb-1 mt-4 font-bold"},vs={class:"text-xs font-normal"},fs={__name:"Album",props:{userId:{type:Number,default:0}},setup(u){const A=u,x=ee(),{oApiConfiguration:d,fetchOptions:P}=K(),w=ne(d,P());he(()=>{$()});const y=b(!0),_=b("artwork"),p=b(0),h=b([]),s=b({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),n=b({artwork:0}),$=async()=>{y.value=!0;const[v,m,S]=await w.fetchAlbums(A.userId,_.value,s.value.pagination.page===0?s.value.pagination.firstLoad:s.value.pagination.perPage,s.value.pagination.page);if(S)F();else{v.length||(s.value.manageMode=!1,i()),v.forEach(we=>{h.value.push(we)}),s.value.pagination.page+=s.value.pagination.firstLoad/s.value.pagination.perPage,s.value.showLoadMore=m;const[B]=await w.countArtworkAlbums(A.userId);n.value.artwork=B}y.value=!1},U=async()=>await $(),o=b(!1),i=()=>{o.value=!0,s.value.showLoadMore=!1},k=b(!1),F=()=>{y.value=!1,k.value=!0,s.value.showLoadMore=!1},c=async()=>{y.value=!1,o.value=!1,k.value=!1,s.value.pagination.page=0,h.value=[],await $()},I=b(!1);let O;const D=async()=>{re().splash(O,I,"created-alert"),await c()},L=b(null),R=()=>{L.value.fetch(p.value),X().openModal("album-edit-form-modal")},V=b(null),z=v=>{V.value.fetchInfo(),h.value.forEach(m=>{m.id===v.id&&(m.name=v.name,m.description=v.description,m.is_public=v.isPublic)})},G=()=>{V.value.removeItems()},Q=b([]),oe=v=>{Q.value=v},se=async()=>{if(p.value!==0){const[v,m]=await w.deleteAlbum(p.value);v&&(p.value=0,c())}},le=v=>{s.value.showManageButton=!v,s.value.manageMode=!1},ae=()=>{p.value=0,s.value.showManageButton=!1,s.value.manageMode=!1};return(v,m)=>(t(),l("div",null,[e("div",os,[p.value?r("",!0):(t(),l("div",ss,[e("div",ls,[e("div",{class:T(["ml-0 primary-button theme-color-secondary",{"button-color text-white":_.value==="artwork"}]),onClick:m[0]||(m[0]=S=>_.value="artwork")},[j(a(v.$t("artworks.artwork"))+" ",1),e("span",{class:T(["px-1 ml-2 font-normal rounded",_.value==="artwork"?"theme-color":"button-color text-white"])},a(n.value.artwork),3)],2)]),g(x).loggedIn&&g(x).user.id===u.userId?(t(),l("div",as,[e("div",{class:"icon-button",onClick:m[1]||(m[1]=S=>v.openModal("album-form-modal"))},[f(M,{name:"i-ion-add-outline"})])])):r("",!0)])),p.value?(t(),l("div",ns,[e("div",null,[e("div",{class:"ml-0 icon-button",onClick:m[2]||(m[2]=S=>ae())},[f(M,{name:"i-ic-baseline-keyboard-arrow-left"})])]),e("div",is,[C(e("div",rs,[e("button",{class:"action-button secondary-button",onClick:m[3]||(m[3]=S=>s.value.manageMode=!s.value.manageMode)},[f(M,{name:s.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),j(" "+a(s.value.manageMode?v.$t("quit"):v.$t("manage")),1)]),C(e("button",{class:T(["flex flex-row",Q.value.length>0?"danger-button":"disabled-button cursor-not-allowed"]),onClick:m[4]||(m[4]=S=>Q.value.length>0?v.openModal("item-deletion-confirm-modal"):null)},[f(M,{name:"i-akar-icons-trash-bin"}),j(" "+a(v.$t("albums.removeSelected")),1)],2),[[E,s.value.manageMode]])],512),[[E,g(x).loggedIn&&g(x).user.id===u.userId&&s.value.showManageButton]]),C(e("div",us,[e("button",{class:"icon-button",onClick:m[5]||(m[5]=S=>R())},[f(M,{name:"i-ph-gear-six"})]),e("button",{class:"danger-button-color b-button",onClick:m[6]||(m[6]=S=>v.openModal("album-deletion-confirm-modal"))},[f(M,{name:"i-akar-icons-trash-bin"})])],512),[[E,g(x).loggedIn&&g(x).user.id===u.userId&&!s.value.manageMode]])])])):r("",!0),C(e("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},a(v.$t("albums.manageModeActiveMessage")),513),[[E,s.value.manageMode]])]),p.value?r("",!0):(t(),l("div",ds,[(t(!0),l(H,null,J(h.value,S=>(t(),l("div",{key:S.id,class:T(["p-3 rounded-md cursor-pointer",S.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:B=>p.value=S.id},[S.type==="artwork"?(t(),N(ts,{key:0,album:S},null,8,["album"])):r("",!0),e("div",ms,[S.is_public?r("",!0):(t(),N(M,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),e("span",vs,a(S.name),1)])],10,cs))),128))])),s.value.showLoadMore&&!p.value?(t(),l("div",{key:1,class:"mt-4 w-full primary-button",onClick:U},a(v.$t("loadMore")),1)):r("",!0),f(te,{loading:y.value,empty:o.value,error:k.value,fetch:$},null,8,["loading","empty","error"]),!y.value&&!p.value?(t(),N(Wt,{key:2,id:"album-form-modal","modal-id":"album-form-modal",category:_.value,class:"modal",onCreated:D},null,8,["category"])):r("",!0),C(f(ie,{id:"created-alert",text:v.$t("albums.created")},null,8,["text"]),[[E,I.value]]),!y.value&&p.value?(t(),N(wo,{key:3,id:"album-edit-form-modal",ref_key:"albumEditFormModalRef",ref:L,"modal-id":"album-edit-form-modal","album-id":p.value,class:"modal",onUpdated:z},null,8,["album-id"])):r("",!0),f(ce,{id:"album-deletion-confirm-modal","modal-id":"album-deletion-confirm-modal",message:"All saved items in this album will be deleted. Do you still want to delete this album?",class:"modal",onOnAccept:se},null,8,["message"]),f(ce,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this album. Do you still want to remove them?",class:"modal",onOnAccept:G},null,8,["message"]),p.value&&!y.value?(t(),N(eo,{key:4,id:p.value,ref_key:"albumDetailRef",ref:V,"manage-mode":s.value.manageMode,onOnAlbumEmpty:le,onFeedManageList:oe},null,8,["id","manage-mode"])):r("",!0)]))}},ps=Y(fs,[["__scopeId","data-v-0fbf1d07"]]),hs={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},bs={class:"title"},ws=["placeholder"],gs=["placeholder"],_s=["for"],ks=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),ys={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},$s=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),xs=[$s],Ms={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Cs=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Is=[Cs],Es={class:"ml-2"},Ls={class:"flex flex-row gap-2 justify-end mt-2"},As={type:"submit",class:"primary-button"},Ps={__name:"CollectionFormModal",props:{category:{type:String,default:"artwork"},modalId:{type:String,default:""}},emits:"created",setup(u,{emit:A}){const x=u,{oApiConfiguration:d,fetchOptions:P}=K(),w=ue(d,P()),{t:y}=ve(),_="create-collection-form",p=b({title:"",description:"",isPublic:1,category:"artwork"}),h=async()=>{be().validate(_,y);try{let s=!1,n={};if(x.category){const[$,U,o]=await w.createCollection(x.category,p.value);o||(s=$,n=U)}s&&(X().closeModal(x.modalId),A("created",n))}catch{}};return(s,n)=>(t(),l("div",null,[e("div",hs,[e("div",null,[e("span",bs,a(s.$t("collections.create.form.title")),1),e("form",{id:_,class:"mt-2",onSubmit:n[4]||(n[4]=W($=>h(),["prevent"]))},[e("n-validate",null,[C(e("input",{"onUpdate:modelValue":n[0]||(n[0]=$=>p.value.title=$),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:s.$t("title")},null,8,ws),[[Z,p.value.title]])]),C(e("textarea",{"onUpdate:modelValue":n[1]||(n[1]=$=>p.value.description=$),class:"form-input theme-color-secondary",placeholder:s.$t("description"),"data-gramm":"false"},null,8,gs),[[Z,p.value.description]]),e("label",{for:p.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:n[2]||(n[2]=$=>p.value.isPublic=!p.value.isPublic)},[ks,p.value.isPublic?(t(),l("span",ys,xs)):r("",!0),p.value.isPublic?r("",!0):(t(),l("span",Ms,Is))]),e("span",Es,a(s.$t("private")),1)],8,_s),e("div",Ls,[e("button",{class:"cancel-button",onClick:n[3]||(n[3]=W($=>s.closeModal(u.modalId),["prevent"]))},a(s.$t("cancel")),1),e("button",As,a(s.$t("create")),1)])],32)])])]))}},Fs={id:"lists"},Ss={class:"p-4 mb-4 w-full rounded-md theme-color-secondary"},js={class:"text-base font-bold mb-2"},Ts={class:"mb-2"},Rs=j(),Us={class:"italic"},Bs=["id"],zs={__name:"List",props:{id:{type:Number,default:0},manageMode:{type:Boolean,default:!1},type:{type:String,default:""}},emits:["onCollectionEmpty","feedManageList"],setup(u,{expose:A,emit:x}){const d=u,{oApiConfiguration:P,fetchOptions:w}=K(),y=ue(P,w()),_=b(d.id);Ie(()=>d.id,(L,R)=>{_.value=L});const p=b(!0),h=b({id:0,info:{},loadMore:!0,pagination:{page:0,perPage:12,firstLoad:24},list:[],empty:!1}),s=async()=>{p.value=!0,await n(),await $(),p.value=!1},n=async()=>{const[L,R]=await y.getInfo(_.value);h.value.info=L.data},$=async()=>{const[L,R,V]=await y.listCollectionItems({collectionId:_.value,pagination:{page:h.value.pagination.page,perPage:h.value.pagination.page===0?h.value.pagination.firstLoad:h.value.pagination.perPage}});R?h.value.pagination.page===0?h.value.pagination.page=h.value.pagination.firstLoad/h.value.pagination.perPage:h.value.pagination.page+=h.value.pagination.page!==0?1:2:h.value.loadMore=!1,L!==null&&L.length?(L.forEach(z=>{h.value.list.push(z.artworks)}),x("onCollectionEmpty",!1)):(h.value.empty=!0,x("onCollectionEmpty",!0))},U=()=>{h.value.loadMore=!0,h.value.pagination.page=0,h.value.list=[]},o=b([]),i=L=>{o.value=L,x("feedManageList",L)},k=b(!1);let F;const c=async()=>{const[L,R]=await y.removeItem({collectionId:d.id,type:d.type,workId:o.value});R||(re().splash(F,k,"item-removed-alert"),U(),await s(),x("feedManageList",[]))},I=b("collection"),O=b(null),D=(L,R=!1)=>{O.value.view(L,R),X().openModal(I.value+"-modal")};return A({fetchInfo:n,removeItem:c}),(L,R)=>(t(),l("div",Fs,[e("div",{class:"hidden",onClick:R[0]||(R[0]=V=>n())}),e("div",{class:"hidden",onClick:R[1]||(R[1]=V=>c())}),e("div",Ss,[e("div",js,a(h.value.info.name),1),e("div",Ts,a(h.value.info.description),1),e("div",null,[e("b",null,a(L.$t("private"))+":",1),Rs,e("span",Us,a(h.value.info.is_public?L.$t("no"):L.$t("yes")),1)]),e("div",null,[e("b",null,a(L.$t("createdAt")),1),j(" "+a(L.formatDate(h.value.info.created_at)),1)])]),C(e("div",null,[(t(),N(ge,null,[C(f(_e,{"section-class":"work-grid",works:h.value.list,view:D,"manage-mode":u.manageMode,onFeedManageList:i},null,8,["works","manage-mode"]),[[E,!h.value.empty]])],1024)),C(e("div",{class:"primary-button",onClick:R[2]||(R[2]=V=>$())},a(L.$t("loadMore")),513),[[E,h.value.loadMore]])],512),[[E,!p.value]]),f(te,{loading:p.value,empty:h.value.empty,error:!1,fetch:s},null,8,["loading","empty"]),p.value?r("",!0):(t(),l("div",{key:0,id:I.value+"-modal",class:"modal work-view"},[f(ke,{ref_key:"collectionModalViewRef",ref:O,section:I.value},null,8,["section"])],8,Bs)),C(f(ie,{id:"item-removed-alert",text:L.$t("collections.itemRemoved")},null,8,["text"]),[[E,k.value]])]))}},Os=Y(zs,[["__scopeId","data-v-1df1f9a5"]]),Vs={class:"w-full modal-layer xl:w-1/4 lg:w-2/5"},Ns={class:"title"},Ds=["placeholder"],qs=["placeholder"],Ws=["for"],Gs=e("span",{class:"block w-10 h-6 bg-gray-300 rounded-full shadow-inner"},null,-1),Hs={key:0,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 bg-white rounded-full shadow transition-transform duration-300 ease-in-out focus-within:shadow-outline"},Js=e("input",{id:"unchecked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Ks=[Js],Qs={key:1,class:"block absolute inset-y-0 left-0 mt-1 ml-1 w-4 h-4 rounded-full shadow transition-transform duration-300 ease-in-out transform translate-x-full focus-within:shadow-outline button-color"},Xs=e("input",{id:"checked",type:"checkbox",class:"absolute w-0 h-0 opacity-0"},null,-1),Ys=[Xs],Zs={class:"ml-2"},el={class:"flex flex-row gap-2 justify-end mt-2"},tl={type:"submit",class:"primary-button"},ol={__name:"EditForm",props:{collectionId:{type:Number,default:0},modalId:{type:String,default:""}},emits:"updated",setup(u,{expose:A,emit:x}){const d=u,{t:P}=ve(),{oApiConfiguration:w,fetchOptions:y}=K(),_=ue(w,y()),p=b(!0),h=async o=>{if(o){U(),p.value=!0;const[i,k]=await _.getInfo(o);if(!k){const F=i.data;n.value.id=o,n.value.name=F.name,n.value.description=F.description,n.value.isPublic=!!F.is_public,p.value=!1}}},s="edit-collection-form",n=b({id:0,name:"",description:"",isPublic:!1}),$=async()=>{be().validate(s,P);const[o,i]=await _.update({id:n.value.id,name:n.value.name,description:n.value.description,isPublic:n.value.isPublic?1:0});i||(X().closeModal(d.modalId),x("updated",n.value),U())},U=()=>{n.value={id:0,name:"",description:"",isPublic:0}};return A({fetch:h}),(o,i)=>(t(),l("div",null,[e("div",{class:"hidden",onClick:i[0]||(i[0]=k=>h(0))}),e("div",Vs,[e("div",null,[e("span",Ns,a(o.$t("collections.edit.form.title")),1),p.value?r("",!0):(t(),l("form",{key:0,id:s,class:"mt-2",onSubmit:i[5]||(i[5]=W(k=>$(),["prevent"]))},[e("n-validate",null,[C(e("input",{"onUpdate:modelValue":i[1]||(i[1]=k=>n.value.name=k),type:"text",class:"form-input theme-color-secondary",rules:"required",placeholder:o.$t("title")},null,8,Ds),[[Z,n.value.name]])]),C(e("textarea",{"onUpdate:modelValue":i[2]||(i[2]=k=>n.value.description=k),class:"form-input theme-color-secondary",placeholder:o.$t("description"),"data-gramm":"false"},null,8,qs),[[Z,n.value.description]]),e("label",{for:n.value.isPublic?"checked":"unchecked",class:"inline-flex items-center"},[e("span",{class:"relative cursor-pointer",onClick:i[3]||(i[3]=k=>n.value.isPublic=!n.value.isPublic)},[Gs,n.value.isPublic?(t(),l("span",Hs,Ks)):r("",!0),n.value.isPublic?r("",!0):(t(),l("span",Qs,Ys))]),e("span",Zs,a(o.$t("private")),1)],8,Ws),e("div",el,[e("button",{class:"cancel-button",onClick:i[4]||(i[4]=W(k=>o.closeModal(u.modalId),["prevent"]))},a(o.$t("cancel")),1),e("button",tl,a(o.$t("save")),1)])],32))])])]))}},xe=u=>(fe("data-v-f083c4bf"),u=u(),pe(),u),sl={class:"mb-2"},ll={key:0},al=xe(()=>e("img",{src:Le,class:"rounded"},null,-1)),nl=[al],il={key:1},rl={class:"relative text-center"},ul={key:0,class:"absolute top-1/2 left-1/2 z-10 text-xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},dl={class:"overflow-hidden rounded-md"},cl=["src"],ml={key:2,class:"imgrid"},vl={class:"relative text-center"},fl={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},pl={class:"overflow-hidden rounded-md"},hl=["src"],bl=xe(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),wl=xe(()=>e("img",{class:"bg-gray-300 border-none"},null,-1)),gl={key:3,class:"imgrid"},_l={class:"relative text-center"},kl={key:0,class:"absolute top-1/2 left-1/2 z-10 text-base font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},yl={class:"overflow-hidden rounded-md"},$l=["src"],xl={key:4,class:"imgrid"},Ml={class:"relative text-center"},Cl={key:0,class:"absolute top-1/2 left-1/2 z-10 text-tiny font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Il={class:"overflow-hidden rounded-md"},El=["src"],Ll={key:5,class:"imgrid"},Al={key:0,class:"relative text-center"},Pl={key:0,class:"absolute top-1/2 left-1/2 z-10 text-tiny font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Fl={class:"overflow-hidden rounded-md"},Sl=["src"],jl={key:1,class:"relative text-center"},Tl={class:"absolute top-1/2 left-1/2 z-10 text-3xl font-semibold text-white transform -translate-x-1/2 -translate-y-1/2"},Rl={class:"overflow-hidden rounded-md"},Ul=["src"],Bl={__name:"ArtworkThumbnail",props:{collection:{type:Object,default:()=>{}}},setup(u){const A=ee(),x={1:"col-start-1 row-start-1 col-span-4 row-span-4",2:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"],3:["col-start-1 row-start-1 col-span-1 row-span-2","col-start-2 row-start-1 col-span-1 row-span-2"]};return(d,P)=>(t(),l("div",sl,[!u.collection.collection_has_artworks||u.collection._count.collection_has_artworks===0?(t(),l("div",ll,nl)):r("",!0),u.collection.collection_has_artworks&&u.collection._count.collection_has_artworks===1?(t(),l("div",il,[e("div",rl,[d.applyExplicitFilter(g(A),u.collection.collection_has_artworks[0].artworks.is_explicit)?(t(),l("span",ul,a(d.$t("explicitContent")),1)):r("",!0),e("div",dl,[u.collection.collection_has_artworks&&u.collection._count.collection_has_artworks===1?(t(),l("img",{key:0,src:d.artworkThumb(u.collection.collection_has_artworks[0].artworks.artwork_assets[0].bucket,u.collection.collection_has_artworks[0].artworks.artwork_assets[0].filename,"thumbnail"),class:T(["object-cover object-top rounded",{"blur-sm brightness-50":d.applyExplicitFilter(g(A),u.collection.collection_has_artworks[0].artworks.is_explicit)}]),style:{"aspect-ratio":"1/1"},onError:P[0]||(P[0]=(...w)=>d.imageLoadError&&d.imageLoadError(...w))},null,42,cl)):r("",!0)])])])):r("",!0),u.collection.collection_has_artworks&&u.collection._count.collection_has_artworks===2?(t(),l("div",ml,[(t(!0),l(H,null,J(u.collection.collection_has_artworks,(w,y)=>(t(),l("div",{key:y,class:T(x[2][y])},[e("div",vl,[d.applyExplicitFilter(g(A),w.artworks.is_explicit)?(t(),l("span",fl,a(d.$t("explicitContent")),1)):r("",!0),e("div",pl,[e("img",{class:T(["theme-color",{"blur-sm brightness-50":d.applyExplicitFilter(g(A),w.artworks.is_explicit)}]),src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:P[1]||(P[1]=(..._)=>d.imageLoadError&&d.imageLoadError(..._))},null,42,hl)])])],2))),128)),bl,wl])):r("",!0),u.collection.collection_has_artworks&&u.collection._count.collection_has_artworks===3?(t(),l("div",gl,[(t(!0),l(H,null,J(u.collection.collection_has_artworks,(w,y)=>(t(),l("div",{key:y,class:T(x[3][y])},[e("div",_l,[d.applyExplicitFilter(g(A),w.artworks.is_explicit)?(t(),l("span",kl,a(d.$t("explicitContent")),1)):r("",!0),e("div",yl,[e("img",{class:T(["theme-color",{"blur-sm brightness-50":d.applyExplicitFilter(g(A),w.artworks.is_explicit)}]),src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:P[2]||(P[2]=(..._)=>d.imageLoadError&&d.imageLoadError(..._))},null,42,$l)])])],2))),128))])):r("",!0),u.collection.collection_has_artworks&&u.collection._count.collection_has_artworks===4?(t(),l("div",xl,[(t(!0),l(H,null,J(u.collection.collection_has_artworks,(w,y)=>(t(),l("div",{key:y},[e("div",Ml,[d.applyExplicitFilter(g(A),w.artworks.is_explicit)?(t(),l("span",Cl,a(d.$t("explicitContent")),1)):r("",!0),e("div",Il,[e("img",{class:T(["theme-color",{"blur-sm brightness-50":d.applyExplicitFilter(g(A),w.artworks.is_explicit)}]),src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:P[3]||(P[3]=(..._)=>d.imageLoadError&&d.imageLoadError(..._))},null,42,El)])])]))),128))])):r("",!0),u.collection.collection_has_artworks&&u.collection._count.collection_has_artworks>4?(t(),l("div",Ll,[(t(!0),l(H,null,J(u.collection.collection_has_artworks,(w,y)=>(t(),l("div",{key:y},[y<3?(t(),l("div",Al,[d.applyExplicitFilter(g(A),w.artworks.is_explicit)?(t(),l("span",Pl,a(d.$t("explicitContent")),1)):r("",!0),e("div",Fl,[e("img",{class:T(["theme-color",{"blur-sm brightness-50":d.applyExplicitFilter(g(A),w.artworks.is_explicit)}]),src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),onError:P[4]||(P[4]=(..._)=>d.imageLoadError&&d.imageLoadError(..._))},null,42,Sl)])])):(t(),l("div",jl,[e("span",Tl,"+"+a(u.collection._count.collection_has_artworks-4),1),e("div",Rl,[e("img",{src:d.artworkThumb(w.artworks.artwork_assets[0].bucket,w.artworks.artwork_assets[0].filename,"thumbnail"),class:T(["z-0 brightness-50",{"blur-sm brightness-50":d.applyExplicitFilter(g(A),w.artworks.is_explicit)}]),onError:P[5]||(P[5]=(..._)=>d.imageLoadError&&d.imageLoadError(..._))},null,42,Ul)])]))]))),128))])):r("",!0)]))}},zl=Y(Bl,[["__scopeId","data-v-f083c4bf"]]),Ol={class:"mb-2 w-full"},Vl={key:0,class:"flex flex-row justify-between"},Nl={class:"flex flex-row"},Dl={key:0},ql={key:1,class:"flex flex-row justify-between"},Wl={class:"flex flex-row"},Gl={class:"flex flex-row gap-2"},Hl={class:"flex flex-row gap-2"},Jl={key:0,class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},Kl=["onClick"],Ql={class:"flex flex-row pb-1 mt-4 font-bold"},Xl={class:"text-xs font-normal"},Yl={__name:"Collection",props:{userId:{type:Number,default:0}},setup(u){const A=u,x=ee();he(()=>{$()});const{oApiConfiguration:d,fetchOptions:P}=K(),w=ue(d,P()),y=b(!0),_=b("artwork"),p=b(0),h=b([]),s=b({pagination:{page:0,perPage:4,firstLoad:8},showLoadMore:!1,manageMode:!1,showManageButton:!0}),n=b({artwork:0}),$=async()=>{y.value=!0;const[v,m,S]=await w.fetchCollections({userId:A.userId,type:_.value,pagination:{page:s.value.pagination.page,perPage:s.value.pagination.page===0?s.value.pagination.firstLoad:s.value.pagination.perPage}});if(S)F();else{v.length||(s.value.manageMode=!1,i()),v.forEach(we=>{h.value.push(we)}),s.value.pagination.page+=s.value.pagination.firstLoad/s.value.pagination.perPage,s.value.showLoadMore=m;const[B]=await w.countArtworkCollections(A.userId);n.value.artwork=B}y.value=!1},U=async()=>await $(),o=b(!1),i=()=>{o.value=!0,s.value.showLoadMore=!1},k=b(!1),F=()=>{y.value=!1,k.value=!0,s.value.showLoadMore=!1},c=async()=>{y.value=!1,o.value=!1,k.value=!1,s.value.pagination.page=0,h.value=[],await $()},I=v=>{s.value.showManageButton=!0,v&&(s.value.showManageButton=!1)},O=b(!1);let D;const L=async()=>{re().splash(D,O,"created-alert"),await c()},R=b(null),V=()=>{R.value.fetch(p.value),X().openModal("collection-edit-form-modal")},z=b(null),G=v=>{z.value.fetchInfo(),h.value.forEach(m=>{m.id===v.id&&(m.name=v.name,m.description=v.description,m.is_public=v.isPublic)})},Q=b([]),oe=v=>{Q.value=v},se=()=>{z.value.removeItem()},le=async()=>{if(p.value!==0){const[v,m]=await w.deleteCollection(p.value);v&&(p.value=0,c())}},ae=()=>{p.value=0,s.value.showManageButton=!1,s.value.manageMode=!1};return(v,m)=>(t(),l("div",null,[e("div",Ol,[p.value?r("",!0):(t(),l("div",Vl,[e("div",Nl,[e("div",{class:T(["ml-0 primary-button theme-color-secondary",{"button-color text-white":_.value==="artwork"}]),onClick:m[0]||(m[0]=S=>_.value="artwork")},[j(a(v.$t("artworks.artwork"))+" ",1),e("span",{class:T(["px-1 ml-2 font-normal rounded",_.value==="artwork"?"theme-color":"button-color text-white"])},a(n.value.artwork),3)],2)]),g(x).loggedIn&&g(x).user.id===u.userId?(t(),l("div",Dl,[e("div",{class:"icon-button",onClick:m[1]||(m[1]=S=>v.openModal("collection-form-modal"))},[f(M,{name:"i-ion-add-outline"})])])):r("",!0)])),p.value?(t(),l("div",ql,[e("div",null,[e("div",{class:"ml-0 icon-button",onClick:m[2]||(m[2]=S=>ae())},[f(M,{name:"i-ic-baseline-keyboard-arrow-left"})])]),e("div",Wl,[C(e("div",Gl,[e("button",{class:"action-button secondary-button",onClick:m[3]||(m[3]=S=>s.value.manageMode=!s.value.manageMode)},[f(M,{name:s.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),j(" "+a(s.value.manageMode?v.$t("quit"):v.$t("manage")),1)]),C(e("button",{class:T(["flex flex-row",Q.value.length>0?"danger-button":"disabled-button cursor-not-allowed"]),onClick:m[4]||(m[4]=S=>Q.value.length>0?v.openModal("item-deletion-confirm-modal"):null)},[f(M,{name:"i-akar-icons-trash-bin"}),j(" "+a(v.$t("collections.removeSelected")),1)],2),[[E,s.value.manageMode]])],512),[[E,g(x).loggedIn&&g(x).user.id===u.userId&&s.value.showManageButton]]),C(e("div",Hl,[e("button",{class:"icon-button",onClick:m[5]||(m[5]=S=>V())},[f(M,{name:"i-ph-gear-six"})]),e("button",{class:"danger-button-color b-button",onClick:m[6]||(m[6]=S=>v.openModal("collection-deletion-confirm-modal"))},[f(M,{name:"i-akar-icons-trash-bin"})])],512),[[E,g(x).loggedIn&&g(x).user.id===u.userId&&!s.value.manageMode]])])])):r("",!0),C(e("div",{class:"p-2 mt-4 text-black bg-yellow-200 rounded-md"},a(v.$t("collections.manageModeActiveMessage")),513),[[E,s.value.manageMode]])]),p.value?r("",!0):(t(),l("div",Jl,[(t(!0),l(H,null,J(h.value,S=>(t(),l("div",{key:S.id,class:T(["p-3 rounded-md cursor-pointer",S.is_public?"theme-color-secondary":"theme-color-secondary border-red-300 border-2"]),onClick:B=>p.value=S.id},[S.type==="artwork"?(t(),N(zl,{key:0,collection:S},null,8,["collection"])):r("",!0),e("div",Ql,[S.is_public?r("",!0):(t(),N(M,{key:0,name:"i-radix-icons-lock-closed",class:"mr-2 cursor-default"})),e("span",Xl,a(S.name),1)])],10,Kl))),128))])),s.value.showLoadMore&&!p.value?(t(),l("div",{key:1,class:"mt-4 w-full primary-button",onClick:U},a(v.$t("loadMore")),1)):r("",!0),f(te,{loading:y.value,empty:o.value,error:k.value,fetch:$},null,8,["loading","empty","error"]),!y.value&&!p.value?(t(),N(Ps,{key:2,id:"collection-form-modal","modal-id":"collection-form-modal",category:_.value,class:"modal",onCreated:L},null,8,["category"])):r("",!0),C(f(ie,{id:"created-alert",text:v.$t("collections.created")},null,8,["text"]),[[E,O.value]]),!y.value&&p.value?(t(),N(ol,{key:3,id:"collection-edit-form-modal",ref_key:"collectionEditFormModalRef",ref:R,"modal-id":"collection-edit-form-modal","collection-id":p.value,class:"modal",onUpdated:G},null,8,["collection-id"])):r("",!0),f(ce,{id:"collection-deletion-confirm-modal","modal-id":"collection-deletion-confirm-modal",message:"All saved items in this collection will be deleted. Do you still want to delete this collection?",class:"modal",onOnAccept:le},null,8,["message"]),f(ce,{id:"item-deletion-confirm-modal","modal-id":"item-deletion-confirm-modal",message:"Selected item(s) will be removed from this collection. Do you still want to remove them?",class:"modal",onOnAccept:se},null,8,["message"]),p.value&&!y.value?(t(),N(Os,{key:4,id:p.value,ref_key:"collectionDetailRef",ref:z,"manage-mode":s.value.manageMode,type:_.value,onOnCollectionEmpty:I,onFeedManageList:oe},null,8,["id","manage-mode","type"])):r("",!0)]))}},Zl=Y(Yl,[["__scopeId","data-v-853d0a40"]]),ea={class:"text-lg font-bold"},ta={class:"grid grid-cols-1 gap-4 mt-4 w-full md:grid-cols-2 lg:grid-cols-3"},oa={class:"flex flex-row w-full"},sa=["src"],la={class:"flex flex-col justify-between p-3 w-full text-white"},aa={class:"flex flex-col"},na={class:"font-bold"},ia={class:"text-xxs"},ra={class:"flex flex-row w-full"},ua={key:0,class:"flex flex-row"},da=["onClick"],ca=["onMouseover","onClick"],ma={__name:"FollowerList",props:{userId:{type:Number,default:0}},setup(u){const A=u,x=ee(),{oApiConfiguration:d,fetchOptions:P}=K(),w=ye(d,P());he(()=>{$()});const y=b([]),_=b(!0),p=b({page:0,perPage:12}),h=b(!1),s=b(!1),n=b(!1),$=async()=>{U(),_.value=!0;const[i,k]=await w.getFollowerList({userId:A.userId,pagination:{page:p.value.page,perPage:p.value.perPage}});k?h.value=!0:(i.followers.length||(s.value=!0),i.followers.forEach(F=>{y.value.push(F)}),p.value.page+=1,i.pagination.next_previous.next_page?n.value=!0:n.value=!1),_.value=!1},U=()=>{s.value=!1,h.value=!1},o=b(0);return(i,k)=>{const F=me;return t(),l("div",null,[e("div",ea,a(i.$t("followers")),1),e("div",ta,[(t(!0),l(H,null,J(y.value,(c,I)=>(t(),N(F,{key:c.id,to:"/profile/"+c.username,class:"flex object-cover flex-row rounded-md shadow-lg cursor-pointer theme-color-secondary hover:shadow-xl",style:Ee(c.cover_bucket&&c.cover_filename?"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+i.avatarCoverUrl(c.cover_bucket,c.cover_filename)+");background-size:cover;":"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+g(Ce)+");background-size:cover;")},{default:q(()=>[e("div",oa,[e("img",{src:i.avatarCoverUrl(c.avatar_bucket,c.avatar_filename),class:"avatar",onError:k[0]||(k[0]=(...O)=>i.imageLoadError&&i.imageLoadError(...O))},null,40,sa),e("div",la,[e("div",aa,[e("span",na,a(c.name),1),e("span",ia,a(c.pen_name),1)]),e("div",ra,[g(x).loggedIn&&c.id!==g(x).user.id?(t(),l("div",ua,[C(e("div",{class:"flex flex-row",onClick:W(O=>i.followUser(I,c.id),["prevent"])},[f(M,{name:"i-ri-user-add-fill",class:"text-gray-300 hover:text-white"})],8,da),[[E,!c.is_following]]),C(e("div",{class:"flex flex-row",onMouseover:O=>o.value=c.id,onMouseout:k[1]||(k[1]=O=>o.value=0),onClick:W(O=>i.unfollowUser(I,c.id),["prevent"])},[C(f(M,{name:"i-ri-user-follow-fill",class:"text-green-400"},null,512),[[E,o.value!==c.id]]),C(f(M,{name:"i-ri-user-unfollow-fill",class:"text-red-400 hover:text-red-400"},null,512),[[E,o.value&&o.value===c.id]])],40,ca),[[E,c.is_following]])])):r("",!0)])])])]),_:2},1032,["to","style"]))),128))]),C(e("div",{class:"mt-4 primary-button",onClick:k[2]||(k[2]=c=>$())},a(i.$t("loadMore")),513),[[E,n.value]]),f(te,{loading:_.value,empty:s.value,error:h.value,fetch:$},null,8,["loading","empty","error"])])}}},va=Y(ma,[["__scopeId","data-v-4c6ae399"]]),fa={class:"text-lg font-bold"},pa={class:"grid grid-cols-1 gap-4 mt-4 w-full md:grid-cols-2 lg:grid-cols-3"},ha={class:"flex flex-row w-full"},ba=["src"],wa={class:"flex flex-col justify-between p-3 w-full text-white"},ga={class:"flex flex-col"},_a={class:"font-bold"},ka={class:"text-xxs"},ya={class:"flex flex-row w-full"},$a={key:0,class:"flex flex-row"},xa=["onClick"],Ma=["onMouseover","onClick"],Ca={__name:"FollowingList",props:{userId:{type:Number,default:0}},setup(u){const A=u,x=ee(),{oApiConfiguration:d,fetchOptions:P}=K(),w=ye(d,P());he(()=>{U()});const y=async()=>{_.value=[],h.value.page=0,await U()},_=b([]),p=b(!0),h=b({page:0,perPage:12}),s=b(!1),n=b(!1),$=b(!1),U=async()=>{o(),p.value=!0;const[k,F]=await w.getFollowingList({userId:A.userId,pagination:{page:h.value.page,perPage:h.value.perPage}});F?s.value=!0:(k.followings.length||(n.value=!0),k.followings.forEach(c=>{_.value.push(c)}),h.value.page+=1,k.pagination.next_previous.next_page?$.value=!0:$.value=!1),p.value=!1},o=()=>{n.value=!1,s.value=!1},i=b(0);return(k,F)=>{const c=me;return t(),l("div",null,[e("div",fa,a(k.$t("followings")),1),e("div",pa,[(t(!0),l(H,null,J(_.value,(I,O)=>(t(),N(c,{key:I.id,to:"/profile/"+I.username,class:"flex object-cover flex-row rounded-md shadow-lg cursor-pointer theme-color-secondary hover:shadow-xl",style:Ee(I.cover_bucket&&I.cover_filename?"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+k.avatarCoverUrl(I.cover_bucket,I.cover_filename)+");background-size:cover;":"background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url("+g(Ce)+");background-size:cover;")},{default:q(()=>[e("div",ha,[e("img",{src:k.avatarCoverUrl(I.avatar_bucket,I.avatar_filename),class:"avatar",onError:F[0]||(F[0]=(...D)=>k.imageLoadError&&k.imageLoadError(...D))},null,40,ba),e("div",wa,[e("div",ga,[e("span",_a,a(I.name),1),e("span",ka,a(I.pen_name),1)]),e("div",ya,[g(x).loggedIn&&I.id!==g(x).user.id?(t(),l("div",$a,[C(e("div",{class:"flex flex-row",onClick:W(D=>k.followUser(O,I.id),["prevent"])},[f(M,{name:"i-ri-user-add-fill",class:"text-gray-300 hover:text-white"})],8,xa),[[E,!I.is_following]]),C(e("div",{class:"flex flex-row",onMouseover:D=>i.value=I.id,onMouseout:F[1]||(F[1]=D=>i.value=0),onClick:W(D=>k.unfollowUser(O,I.id),["prevent"])},[C(f(M,{name:"i-ri-user-follow-fill",class:"text-green-400"},null,512),[[E,i.value!==I.id]]),C(f(M,{name:"i-ri-user-unfollow-fill",class:"text-red-400 hover:text-red-400"},null,512),[[E,i.value&&i.value===I.id]])],40,Ma),[[E,I.is_following]])])):r("",!0)])])])]),_:2},1032,["to","style"]))),128))]),C(e("div",{class:"primary-button mt-4",onClick:F[2]||(F[2]=I=>U())},a(k.$t("loadMore")),513),[[E,$.value]]),f(te,{loading:p.value,empty:n.value,error:s.value,fetch:y},null,8,["loading","empty","error"])])}}},Ia=Y(Ca,[["__scopeId","data-v-6f865147"]]),Ea=u=>(fe("data-v-699764c0"),u=u(),pe(),u),La=["src"],Aa={class:"px-2 pb-4 w-full rounded md:px-6 md:pb-6 theme-color"},Pa={class:"flex-row justify-between hidden-md-flex"},Fa={class:"mr-6 w-1/5"},Sa=["src"],ja={class:"mt-2"},Ta={class:"flex flex-row"},Ra={class:"flex flex-row"},Ua=j("\xA0 "),Ba=j("\xA0 "),za={class:"hidden flex-row justify-between w-full md:flex md:mt-6"},Oa={class:"flex flex-col w-full"},Va={class:"flex flex-row w-full"},Na={class:"w-9/12"},Da={class:"text-base font-semibold"},qa=j("\xA0 "),Wa={class:"mr-2 italic"},Ga={class:"flex flex-row mt-2"},Ha={key:0,class:"mr-1"},Ja={class:"flex flex-row"},Ka={class:"mr-1"},Qa={key:0,class:"flex flex-row"},Xa=j(" he/his "),Ya={key:1,class:"flex flex-row"},Za=j(" she/her "),en={class:"float-right w-3/12 text-right"},tn={class:"flex flex-row shadow-md primary-button"},on={class:"leading-4"},sn={key:1,class:"mt-4"},ln=["href"],an=["href"],nn=["href"],rn=["href"],un=["href"],dn={key:0,class:"mt-4"},cn=["id"],mn=["id"],vn={class:"flex flex-col text-center md:hidden"},fn=["src"],pn={class:"mt-4 text-base font-semibold"},hn={class:"flex flex-row justify-center mt-4"},bn={key:0,class:"flex flex-row mr-1"},wn={class:"mr-1"},gn={key:0,class:"flex flex-row"},_n=j(" he/his "),kn={key:1,class:"flex flex-row"},yn=j(" she/her "),$n={key:0,class:"mx-2 mt-4 text-center"},xn=["id"],Mn=["id"],Cn={key:1,class:"flex flex-row justify-center mt-4"},In=["href"],En=["href"],Ln=["href"],An=["href"],Pn=["href"],Fn={class:"flex flex-row justify-center w-full md:hidden"},Sn=j("\xA0 "),jn=j("\xA0 "),Tn={class:"flex flex-row"},Rn={class:"flex flex-row"},Un={class:"mt-2"},Bn={class:"flex flex-row justify-center md:hidden"},zn={class:"flex flex-row justify-between mt-2 md:mt-6"},On={class:"hidden flex-col lg:w-1/5 md:flex"},Vn={class:"profile-navigation_wrapper"},Nn={class:"hidden-lg-flex"},Dn=Ea(()=>e("span",{class:"hidden-lg-flex"},null,-1)),qn={class:"profile-navigation_wrapper"},Wn={class:"hidden-lg-flex"},Gn={class:"hidden-lg-flex"},Hn={class:"profile-navigation_wrapper"},Jn={class:"hidden-lg-flex"},Kn={class:"hidden-lg-flex"},Qn={class:"w-full md:ml-6"},Xn={key:0},Yn={class:"flex flex-row w-full"},Zn={class:"flex flex-row gap-2 justify-between w-full md:justify-end"},ei={key:1},ti={key:2},oi={key:3},si={key:4},li={__name:"Profile",props:{id:{type:Number,default:0},userLogon:{type:Boolean,default:!1}},setup(u){const A=u,x=ee(),{oApiConfiguration:d,fetchOptions:P}=K(),w=ye(d,P());ne(d,P()),ue(d,P());const y=Pe(),_=Fe(),{o:p}=y.query,h=b(!0),s=p!=null?b(p):b("dashboard"),n=b("artwork");je(()=>A.userLogon&&x.loggedIn?x.user.id:A.id);const $=b({manageMode:!1,showManageMode:!0}),U=v=>{s.value=v,$.value.manageMode=!1,p!=null&&_.push("/profile")},o=b({}),i=b({feed:0,artwork:0,comic:0,tutorial:0,album:0,followers:0,followings:0}),k=b(null),F=b([]),c=v=>{F.value=v},I=()=>{$.value.showManageMode=!1},O=b(null),D=()=>{X().openModal("album-selection-modal")},L=b(!1);let R;const V=()=>{re().splash(R,L,"item-added-to-album-alert")},z=b(!1),G=b(null),Q=b("i-ri-user-follow-fill"),oe=(v,m)=>{Q.value=v,G.value=m},se=async v=>{const[m,S]=await w.follow(v);S||(z.value=!0)},le=async v=>{const[m,S]=await w.unfollow(v);S||(z.value=!1)},ae=(v,m,S,B)=>{Re().readMore(v,m,S,B)};return(v,m)=>{const S=me;return t(),N(Be,{"hide-side":!0,"with-footer":!0,"no-right-side":!0},{default:q(()=>[e("div",null,[e("img",{src:v.avatarCoverUrl(o.value.cover_bucket,o.value.cover_filename),class:"object-cover object-top w-full h-32 rounded-t md:h-52 lg:h-72 xl:h-96 unselectable",onError:m[0]||(m[0]=(...B)=>v.defaultCoverImage&&v.defaultCoverImage(...B))},null,40,La),g(x).loggedIn&&g(x).user.id===o.value.id?(t(),N(S,{key:0,to:"/profile/setting",class:"float-right absolute right-4 mt-2 shadow-md icon-button-primary-color flex-md-hidden"},{default:q(()=>[f(M,{name:"i-ph-gear-six"})]),_:1})):r("",!0)]),e("div",Aa,[e("div",Pa,[e("div",Fa,[e("img",{src:v.avatarCoverUrl(o.value.avatar_bucket,o.value.avatar_filename),class:"hidden -mt-2 w-full md:-mt-16 avatar md:flex",onError:m[1]||(m[1]=(...B)=>v.defaultCoverImage&&v.defaultCoverImage(...B))},null,40,Sa),e("div",ja,[g(x).loggedIn&&o.value.id!==g(x).user.id?(t(),l("div",{key:0,class:T(["mt-2 primary-button rounded-b-none hover:rounded-b-none",{"hover:danger-button":z.value}]),onClick:m[2]||(m[2]=B=>z.value?le(o.value.id):se(o.value.id)),onMouseover:m[3]||(m[3]=B=>oe("i-ri-user-unfollow-fill",v.$t("unfollow"))),onMouseleave:m[4]||(m[4]=B=>oe("i-ri-user-follow-fill",v.$t("following")))},[C(e("div",Ta,[f(M,{name:"i-ri-user-add-fill","text-size":"text-base"}),j(" "+a(v.$t("follow")),1)],512),[[E,!z.value]]),C(e("div",Ra,[f(M,{name:Q.value,"text-size":"text-base"},null,8,["name"]),j(" "+a(G.value===null?v.$t("following"):G.value),1)],512),[[E,z.value]])],34)):r("",!0),e("div",{class:T(["flex-row justify-center border hidden-md-flex",o.value.id==g(x).user.id?"rounded-md":"rounded-b-md"])},[e("div",{class:"py-2 w-1/2 text-center cursor-pointer hover:text-colored",onClick:m[5]||(m[5]=B=>s.value="followerList")},[e("b",null,a(i.value.followers),1),Ua,e("i",null,a(v.$t("followers").toLowerCase()),1)]),e("div",{class:"py-2 w-1/2 text-center cursor-pointer hover:text-colored",onClick:m[6]||(m[6]=B=>s.value="followingList")},[e("b",null,a(i.value.followings),1),Ba,e("i",null,a(v.$t("following").toLowerCase()),1)])],2)])]),e("div",za,[e("div",Oa,[e("div",Va,[e("div",Na,[e("div",null,[e("span",Da,a(o.value.name),1),qa,e("span",Wa,a(o.value.username),1)]),e("div",Ga,[o.value.pen_name&&o.value.pen_name!==""?(t(),l("div",Ha,[e("span",Ja,[f(M,{name:"i-ion-pencil-outline",class:"mr-1 text-base font-bold"}),j(" "+a(o.value.pen_name),1)])])):r("",!0),e("div",Ka,[o.value.gender==="m"?(t(),l("span",Qa,[f(M,{name:"i-ion-male-outline",class:"mr-1 ml-2 text-base font-bold"}),Xa])):r("",!0),o.value.gender==="f"?(t(),l("span",Ya,[f(M,{name:"i-ion-female-outline",class:"mr-1 ml-2 text-base font-bold"}),Za])):r("",!0)])])]),e("div",en,[g(x).loggedIn&&g(x).user.id===o.value.id?(t(),N(S,{key:0,to:"/profile/setting",class:"float-right -mt-20 shadow-md"},{default:q(()=>[e("button",tn,[f(M,{name:"i-ph-gear-six",class:"mr-2"}),e("span",on,a(v.$t("profile.setting")),1)])]),_:1})):r("",!0),o.value.user_socials?(t(),l("div",sn,[o.value.user_socials.facebook?(t(),l("a",{key:0,href:"https://facebook.com/"+o.value.user_socials.facebook,target:"blank",class:"ml-3 cursor-pointer"},[f(M,{name:"i-ion-logo-facebook",class:"text-xl"})],8,ln)):r("",!0),o.value.user_socials.instagram?(t(),l("a",{key:1,href:"https://instagram.com/"+o.value.user_socials.instagram+"/",target:"blank",class:"ml-3 cursor-pointer"},[f(M,{name:"i-ion-logo-instagram",class:"text-xl"})],8,an)):r("",!0),o.value.user_socials.twitter?(t(),l("a",{key:2,href:"https://twitter.com/"+o.value.user_socials.twitter,target:"blank",class:"ml-3 cursor-pointer"},[f(M,{name:"i-ion-logo-twitter",class:"text-xl"})],8,nn)):r("",!0),o.value.user_socials.youtube?(t(),l("a",{key:3,href:"https://youtube.com/channel/"+o.value.user_socials.youtube,target:"blank",class:"ml-3 cursor-pointer"},[f(M,{name:"i-ion-logo-youtube",class:"text-xl"})],8,rn)):r("",!0),o.value.user_socials.patreon?(t(),l("a",{key:4,href:"https://patreon.com/"+o.value.user_socials.patreon+"/",target:"blank",class:"ml-3 cursor-pointer"},[f(M,{name:"heart",class:"text-xl"})],8,un)):r("",!0)])):r("",!0)])]),e("div",null,[o.value.bio?(t(),l("p",dn,[e("span",{id:"user-bio-"+o.value.id},a(o.value.bio.length>300?`${o.value.bio.slice(0,300)}...`:o.value.bio),9,cn),o.value.bio.length>300?(t(),l("a",{key:0,id:"user-bio-read-more-"+o.value.id,class:"href",onClick:m[7]||(m[7]=W(B=>ae(o.value.bio,o.value.id,"user-bio-read-more-","user-bio-"),["prevent"]))},a(v.$t("readMore")),9,mn)):r("",!0)])):r("",!0)])])])]),e("div",vn,[e("img",{src:v.avatarCoverUrl(o.value.avatar_bucket,o.value.avatar_filename),class:"flex mx-auto -mt-14 w-2/6 sm:-mt-16 sm:w-1/5 avatar md:hidden",onError:m[8]||(m[8]=(...B)=>v.imageLoadError&&v.imageLoadError(...B))},null,40,fn),e("div",pn,a(o.value.name),1),e("div",null,a(o.value.username),1),e("div",hn,[o.value.pen_name?(t(),l("span",bn,[f(M,{name:"i-ion-pencil-outline",class:"mr-1 text-base font-bold"}),j(" "+a(o.value.pen_name&&o.value.pen_name!==""?o.value.pen_name:"-"),1)])):r("",!0),e("div",wn,[o.value.gender==="m"?(t(),l("span",gn,[f(M,{name:"i-ion-male-outline",class:"mr-1 ml-2 text-base font-bold"}),_n])):r("",!0),o.value.gender==="f"?(t(),l("span",kn,[f(M,{name:"i-ion-female-outline",class:"mr-1 ml-2 text-base font-bold"}),yn])):r("",!0)])]),o.value.bio?(t(),l("div",$n,[e("span",{id:"mobile__user-bio-"+o.value.id},a(o.value.bio.length>150?`${o.value.bio.slice(0,150)}...`:o.value.bio),9,xn),o.value.bio.length>150?(t(),l("a",{key:0,id:"mobile__user-bio-read-more-"+o.value.id,class:"href",onClick:m[9]||(m[9]=W(B=>ae(o.value.bio,o.value.id,"mobile__user-bio-read-more-","mobile__user-bio-"),["prevent"]))},a(v.$t("readMore")),9,Mn)):r("",!0)])):r("",!0),o.value.user_socials?(t(),l("div",Cn,[o.value.user_socials.facebook?(t(),l("a",{key:0,href:"https://facebook.com/"+o.value.user_socials.facebook,target:"blank",class:"ml-3 cursor-pointer"},[f(M,{name:"i-ion-logo-facebook",class:"text-xl"})],8,In)):r("",!0),o.value.user_socials.instagram?(t(),l("a",{key:1,href:"https://instagram.com/"+o.value.user_socials.instagram+"/",target:"blank",class:"ml-3 cursor-pointer"},[f(M,{name:"i-ion-logo-instagram",class:"text-xl"})],8,En)):r("",!0),o.value.user_socials.twitter?(t(),l("a",{key:2,href:"https://twitter.com/"+o.value.user_socials.twitter,target:"blank",class:"ml-3 cursor-pointer"},[f(M,{name:"i-ion-logo-twitter",class:"text-xl"})],8,Ln)):r("",!0),o.value.user_socials.youtube?(t(),l("a",{key:3,href:"https://youtube.com/channel/"+o.value.user_socials.youtube,target:"blank",class:"ml-3 cursor-pointer"},[f(M,{name:"i-ion-logo-youtube",class:"text-xl"})],8,An)):r("",!0),o.value.user_socials.patreon?(t(),l("a",{key:4,href:"https://patreon.com/"+o.value.user_socials.patreon+"/",target:"blank",class:"ml-3 cursor-pointer"},[f(M,{name:"i-ion-heart",class:"text-xl"})],8,Pn)):r("",!0)])):r("",!0),e("div",Fn,[e("div",{class:"p-2 cursor-pointer hover:text-colored",onClick:m[10]||(m[10]=B=>s.value="followerList")},[e("b",null,a(i.value.followers),1),Sn,e("i",null,a(v.$t("followers")),1)]),e("div",{class:"p-2 cursor-pointer hover:text-colored",onClick:m[11]||(m[11]=B=>s.value="followingList")},[e("b",null,a(i.value.followings),1),jn,e("i",null,a(v.$t("following")),1)])]),g(x).loggedIn&&o.value.id!==g(x).user.id?(t(),l("div",{key:2,class:T(["mt-2 w-auto",z.value?"danger-button":"primary-button"]),onClick:m[12]||(m[12]=B=>z.value?le(o.value.id):se(o.value.id))},[C(e("div",Tn,[f(M,{name:"i-ri-user-add-fill","text-size":"text-base"}),j(" "+a(v.$t("follow")),1)],512),[[E,!z.value]]),C(e("div",Rn,[f(M,{name:Q.value,"text-size":"text-base"},null,8,["name"]),j(" "+a(G.value===null?v.$t("following"):G.value),1)],512),[[E,z.value]])],2)):r("",!0)]),e("div",Un,[e("div",Bn,[e("div",{class:T(["mr-2 profile-navigation__mobile theme-color-secondary",{"button-color text-white":g(s)=="dashboard"}]),onClick:m[13]||(m[13]=B=>U("dashboard"))},[e("div",null,[C(f(M,{name:"i-ion-home-outline",class:"text-white"},null,512),[[E,g(s)=="dashboard"]]),C(f(M,{name:"i-ion-home-outline",class:"hover:text-white"},null,512),[[E,g(s)!="dashboard"]])]),e("span",null,a(v.$t("dashboard")),1)],2),e("div",{class:T(["mr-2 profile-navigation__mobile theme-color-secondary",{"button-color text-white":g(s)=="albums"}]),onClick:m[14]||(m[14]=B=>U("albums"))},[e("div",null,[C(f(M,{name:"i-ion-folder-outline",class:"text-white"},null,512),[[E,g(s)=="albums"]]),C(f(M,{name:"i-ion-folder-outline",class:"hover:text-white"},null,512),[[E,g(s)!="albums"]])]),e("span",null,a(v.$t("albums.album")),1)],2),e("div",{class:T(["profile-navigation__mobile theme-color-secondary",{"button-color text-white":g(s)=="collections"}]),onClick:m[15]||(m[15]=B=>U("collections"))},[e("div",null,[C(f(M,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[E,g(s)=="collections"]]),C(f(M,{name:"i-majesticons-bookmark-line",class:"hover:text-white"},null,512),[[E,g(s)!="collections"]])]),e("span",null,a(v.$t("collections.collection")),1)],2)]),e("div",zn,[e("div",On,[e("div",{class:T(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":g(s)==="dashboard"}]),onClick:m[16]||(m[16]=B=>U("dashboard"))},[e("div",Vn,[C(f(M,{name:"i-humbleicons-dashboard",class:"text-white"},null,512),[[E,g(s)==="dashboard"]]),C(f(M,{name:"i-humbleicons-dashboard"},null,512),[[E,g(s)!=="dashboard"]]),e("label",Nn,a(v.$t("dashboard")),1)]),Dn],2),e("div",{class:T(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":g(s)==="albums"}]),onClick:m[17]||(m[17]=B=>U("albums"))},[e("div",qn,[C(f(M,{name:"i-bx-photo-album",class:"text-white"},null,512),[[E,g(s)==="albums"]]),C(f(M,{name:"i-bx-photo-album"},null,512),[[E,g(s)!=="albums"]]),e("label",Wn,a(v.$t("albums.album")),1)]),e("span",Gn,a(i.value.album),1)],2),e("div",{class:T(["profile-navigation left-menu-link theme-color-secondary",{"button-color text-white":g(s)==="collections"}]),onClick:m[18]||(m[18]=B=>U("collections"))},[e("div",Hn,[C(f(M,{name:"i-majesticons-bookmark-line",class:"text-white"},null,512),[[E,g(s)==="collections"]]),C(f(M,{name:"i-majesticons-bookmark-line"},null,512),[[E,g(s)!=="collections"]]),e("label",Jn,a(v.$t("collections.collection")),1)]),e("span",Kn,a(i.value.collection),1)],2)]),e("div",Qn,[g(s)==="dashboard"?(t(),l("div",Xn,[e("div",Yn,[e("div",{class:T(["flex flex-row justify-between w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":n.value==="feed"}]),onClick:m[19]||(m[19]=B=>n.value="feed")},[j(a(v.$t("feed"))+" ",1),e("span",{class:T(["px-1 ml-2 rounded",n.value==="feed"?"theme-color":"button-color text-white"])},a(i.value.feed),3)],2),e("div",{class:T(["flex flex-row justify-between mr-0 w-full md:justify-center profile-category-button left-menu-link theme-color-secondary md:w-auto",{"button-color text-white":n.value==="artwork"}]),onClick:m[20]||(m[20]=B=>n.value="artwork")},[j(a(v.$t("artworks.artwork"))+" ",1),e("span",{class:T(["px-1 ml-2 rounded",n.value==="artwork"?"theme-color":"button-color text-white"])},a(i.value.artwork),3)],2)]),C(e("div",Zn,[e("button",{class:"w-full action-button secondary-button md:w-auto",onClick:m[21]||(m[21]=B=>$.value.manageMode=!$.value.manageMode)},[f(M,{name:$.value.manageMode?"i-ion-close-outline":"i-material-symbols-library-add-check-outline-rounded"},null,8,["name"]),j(" "+a($.value.manageMode?v.$t("quit"):v.$t("manage")),1)]),C(e("button",{class:"w-full primary-button md:w-auto",onClick:m[22]||(m[22]=B=>D())},[f(M,{name:"i-ion-add-outline"}),j(" "+a(v.$t("albums.addToAlbum")),1)],512),[[E,$.value.manageMode]])],512),[[E,g(x).loggedIn&&g(x).user.id===o.value.id&&n.value==="artwork"&&$.value.showManageMode]]),C(e("div",{class:"p-2 mt-2 text-black bg-yellow-200 rounded-md"},a(v.$t("profile.manageModeActiveMessage")),513),[[E,$.value.manageMode]]),e("div",null,[n.value==="feed"?(t(),N(xt,{key:0,ref:"feedListRef",class:"mt-2","user-id":o.value.id},null,8,["user-id"])):r("",!0),!h.value&&n.value==="artwork"?(t(),N(Et,{key:1,ref_key:"artworkListRef",ref:k,"user-id":o.value.id,"manage-mode":$.value.manageMode,onFeedSelectedItems:c,onOnEmpty:I},null,8,["user-id","manage-mode"])):r("",!0)])])):r("",!0),g(s)==="albums"?(t(),l("div",ei,[h.value?r("",!0):(t(),N(ps,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):r("",!0),g(s)==="collections"?(t(),l("div",ti,[h.value?r("",!0):(t(),N(Zl,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):r("",!0),g(s)==="followerList"?(t(),l("div",oi,[h.value?r("",!0):(t(),N(va,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):r("",!0),g(s)==="followingList"?(t(),l("div",si,[h.value?r("",!0):(t(),N(Ia,{key:0,"user-id":o.value.id},null,8,["user-id"]))])):r("",!0)])])])]),h.value?r("",!0):(t(),N(Te,{key:0,id:"album-selection-modal",ref_key:"albumSelectionModalRef",ref:O,class:"modal","work-ids":F.value,onAddedToAlbum:V},null,8,["work-ids"])),C(f(ie,{id:"item-added-to-album-alert",text:v.$t("albums.itemAdded")},null,8,["text"]),[[E,L.value]])]),_:1})}}},pi=Y(li,[["__scopeId","data-v-699764c0"]]);export{pi as P};
//# sourceMappingURL=Profile.1dc6c27a.js.map
